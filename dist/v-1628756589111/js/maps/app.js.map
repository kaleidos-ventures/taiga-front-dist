{"version":3,"file":"../app.js","sources":["app.js"],"sourcesContent":["\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var configure, i18nInit, init, module, modules, pluginsModules, pluginsWithModule, taiga;\n\n  this.taiga = taiga = {};\n\n  taiga.emojis = window.emojis;\n\n  this.taigaContribPlugins = this.taigaContribPlugins || window.taigaContribPlugins || [];\n\n  taiga.generateHash = function(components) {\n    if (components == null) {\n      components = [];\n    }\n    components = _.map(components, function(x) {\n      return JSON.stringify(x);\n    });\n    return hex_sha1(components.join(\":\"));\n  };\n\n  taiga.generateUniqueSessionIdentifier = function() {\n    var date, randomNumber;\n    date = (new Date()).getTime();\n    randomNumber = Math.floor(Math.random() * 0x9000000);\n    return taiga.generateHash([date, randomNumber]);\n  };\n\n  taiga.sessionId = taiga.generateUniqueSessionIdentifier();\n\n  configure = function($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider, $compileProvider, $translateProvider, $translatePartialLoaderProvider, $animateProvider, $logProvider) {\n    var authHttpIntercept, blockingIntercept, decorators, defaultHeaders, loaderIntercept, originalWhen, preferedLangCode, userInfo, versionCheckHttpIntercept;\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);\n    originalWhen = $routeProvider.when;\n    $routeProvider.when = function(path, route) {\n      route.resolve || (route.resolve = {});\n      angular.extend(route.resolve, {\n        languageLoad: [\n          \"$q\", \"$translate\", function($q, $translate) {\n            var deferred;\n            deferred = $q.defer();\n            $translate(\"COMMON.YES\").then(function() {\n              return deferred.resolve();\n            });\n            return deferred.promise;\n          }\n        ],\n        projectLoaded: [\n          \"$q\", \"tgProjectService\", \"$route\", function($q, projectService, $route) {\n            var deferred, ref;\n            deferred = $q.defer();\n            projectService.setSection((ref = $route.current.$$route) != null ? ref.section : void 0);\n            if ($route.current.params.pslug) {\n              projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve);\n            } else {\n              projectService.cleanProject();\n              deferred.resolve();\n            }\n            return deferred.promise;\n          }\n        ]\n      });\n      return originalWhen.call($routeProvider, path, route);\n    };\n    $routeProvider.when(\"/\", {\n      templateUrl: \"home/home.html\",\n      controller: \"Home\",\n      controllerAs: \"vm\",\n      loader: true,\n      title: \"HOME.PAGE_TITLE\",\n      loader: true,\n      description: \"HOME.PAGE_DESCRIPTION\",\n      joyride: \"dashboard\"\n    });\n    $routeProvider.when(\"/discover\", {\n      templateUrl: \"discover/discover-home/discover-home.html\",\n      controller: \"DiscoverHome\",\n      controllerAs: \"vm\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true\n    });\n    $routeProvider.when(\"/discover/search\", {\n      templateUrl: \"discover/discover-search/discover-search.html\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true,\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      reloadOnSearch: false\n    });\n    $routeProvider.when(\"/projects/\", {\n      templateUrl: \"projects/listing/projects-listing.html\",\n      access: {\n        requiresLogin: true\n      },\n      title: \"PROJECTS.PAGE_TITLE\",\n      description: \"PROJECTS.PAGE_DESCRIPTION\",\n      loader: true,\n      controller: \"ProjectsListing\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      templateUrl: \"projects/create/create-project.html\",\n      loader: true,\n      controller: \"CreateProjectCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new/scrum\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/kanban\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/duplicate\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-duplicate-project></tg-duplicate-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/import/:platform?\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-import-project></tg-import-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/\", {\n      template: \"\",\n      loader: true,\n      controller: \"ProjectRouter\"\n    });\n    $routeProvider.when(\"/project/:pslug/timeline\", {\n      templateUrl: \"projects/project/project.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\",\n      section: \"project-timeline\"\n    });\n    $routeProvider.when(\"/project/:pslug/t/:ref\", {\n      loader: true,\n      controller: \"DetailController\",\n      template: \"\"\n    });\n    $routeProvider.when(\"/project/:pslug/search\", {\n      templateUrl: \"search/search.html\",\n      reloadOnSearch: false,\n      section: \"search\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/epics\", {\n      section: \"epics\",\n      templateUrl: \"epics/dashboard/epics-dashboard.html\",\n      loader: true,\n      controller: \"EpicsDashboardCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\", {\n      templateUrl: \"epic/epic-detail.html\",\n      loader: true,\n      section: \"epics\"\n    });\n    $routeProvider.when(\"/project/:pslug/backlog\", {\n      templateUrl: \"backlog/backlog.html\",\n      loader: true,\n      section: \"backlog\",\n      joyride: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/kanban\", {\n      templateUrl: \"kanban/kanban.html\",\n      loader: true,\n      section: \"kanban\",\n      joyride: \"kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\", {\n      templateUrl: \"taskboard/taskboard.html\",\n      loader: true,\n      section: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/us/:usref\", {\n      templateUrl: \"us/us-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/task/:taskref\", {\n      templateUrl: \"task/task-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki\", {\n      redirectTo: function(params) {\n        return \"/project/\" + params.pslug + \"/wiki/home\";\n      }\n    });\n    $routeProvider.when(\"/project/:pslug/wiki-list\", {\n      templateUrl: \"wiki/wiki-list.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\", {\n      templateUrl: \"wiki/wiki.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/team\", {\n      templateUrl: \"team/team.html\",\n      loader: true,\n      section: \"team\"\n    });\n    $routeProvider.when(\"/project/:pslug/issues\", {\n      templateUrl: \"issue/issues.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\", {\n      templateUrl: \"issue/issues-detail.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\", {\n      templateUrl: \"admin/admin-project-profile.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\", {\n      templateUrl: \"admin/admin-project-default-values.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\", {\n      templateUrl: \"admin/admin-project-modules.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\", {\n      templateUrl: \"admin/admin-project-export.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\", {\n      templateUrl: \"admin/admin-project-reports.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\", {\n      templateUrl: \"admin/admin-project-values-status.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\", {\n      templateUrl: \"admin/admin-project-values-points.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\", {\n      templateUrl: \"admin/admin-project-values-priorities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\", {\n      templateUrl: \"admin/admin-project-values-severities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\", {\n      templateUrl: \"admin/admin-project-values-types.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\", {\n      templateUrl: \"admin/admin-project-values-custom-fields.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\", {\n      templateUrl: \"admin/admin-project-values-tags.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\", {\n      templateUrl: \"admin/admin-project-values-due-dates.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/kanban-power-ups\", {\n      templateUrl: \"admin/admin-project-values-kanban-power-ups.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/memberships\", {\n      templateUrl: \"admin/admin-memberships.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/roles\", {\n      templateUrl: \"admin/admin-roles.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\", {\n      templateUrl: \"admin/admin-third-parties-webhooks.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\", {\n      templateUrl: \"admin/admin-third-parties-github.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\", {\n      templateUrl: \"admin/admin-third-parties-gitlab.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\", {\n      templateUrl: \"admin/admin-third-parties-bitbucket.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\", {\n      templateUrl: \"admin/admin-third-parties-gogs.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\", {\n      templateUrl: \"contrib/main.html\"\n    });\n    $routeProvider.when(\"/project/:pslug/transfer/:token\", {\n      templateUrl: \"projects/transfer/transfer-page.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/user-settings/user-profile\", {\n      templateUrl: \"user/user-profile.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-change-password\", {\n      templateUrl: \"user/user-change-password.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-project-settings\", {\n      templateUrl: \"user/user-project-settings.html\"\n    });\n    $routeProvider.when(\"/user-settings/mail-notifications\", {\n      templateUrl: \"user/mail-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/live-notifications\", {\n      templateUrl: \"user/live-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/web-notifications\", {\n      templateUrl: \"user/web-notifications.html\"\n    });\n    $routeProvider.when(\"/change-email/:email_token\", {\n      templateUrl: \"user/change-email.html\"\n    });\n    $routeProvider.when(\"/verify-email/:email_token\", {\n      templateUrl: \"user/verify-email.html\"\n    });\n    $routeProvider.when(\"/cancel-account/:cancel_token\", {\n      templateUrl: \"user/cancel-account.html\"\n    });\n    $routeProvider.when(\"/user-settings/contrib/:plugin\", {\n      templateUrl: \"contrib/user-settings.html\"\n    });\n    $routeProvider.when(\"/profile\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/notifications\", {\n      templateUrl: \"notifications/notifications.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Notifications\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/profile/:slug\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/login\", {\n      templateUrl: \"auth/login.html\",\n      title: \"LOGIN.PAGE_TITLE\",\n      description: \"LOGIN.PAGE_DESCRIPTION\",\n      disableHeader: true,\n      controller: \"LoginPage\"\n    });\n    if (window.taigaConfig.publicRegisterEnabled) {\n      $routeProvider.when(\"/register\", {\n        templateUrl: \"auth/register.html\",\n        title: \"REGISTER.PAGE_TITLE\",\n        description: \"REGISTER.PAGE_DESCRIPTION\",\n        disableHeader: true\n      });\n    }\n    $routeProvider.when(\"/forgot-password\", {\n      templateUrl: \"auth/forgot-password.html\",\n      title: \"FORGOT_PASSWORD.PAGE_TITLE\",\n      description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/change-password/:token\", {\n      templateUrl: \"auth/change-password-from-recovery.html\",\n      title: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      description: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/invitation/:token\", {\n      templateUrl: \"auth/invitation.html\",\n      title: \"INVITATION.PAGE_TITLE\",\n      description: \"INVITATION.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/external-apps\", {\n      templateUrl: \"external-apps/external-app.html\",\n      title: \"EXTERNAL_APP.PAGE_TITLE\",\n      description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\n      controller: \"ExternalApp\",\n      controllerAs: \"vm\",\n      disableHeader: true,\n      mobileViewport: true\n    });\n    $routeProvider.when(\"/blocked-project/:pslug/\", {\n      templateUrl: \"projects/project/blocked-project.html\",\n      loader: true\n    });\n    $routeProvider.when(\"/error\", {\n      templateUrl: \"error/error.html\"\n    });\n    $routeProvider.when(\"/not-found\", {\n      templateUrl: \"error/not-found.html\"\n    });\n    $routeProvider.when(\"/permission-denied\", {\n      templateUrl: \"error/permission-denied.html\"\n    });\n    $routeProvider.otherwise({\n      templateUrl: \"error/not-found.html\"\n    });\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: false\n    });\n    defaultHeaders = {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\",\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.defaults.headers[\"delete\"] = defaultHeaders;\n    $httpProvider.defaults.headers.patch = defaultHeaders;\n    $httpProvider.defaults.headers.post = defaultHeaders;\n    $httpProvider.defaults.headers.put = defaultHeaders;\n    $httpProvider.defaults.headers.get = {\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.useApplyAsync(true);\n    $tgEventsProvider.setSessionId(taiga.sessionId);\n    authHttpIntercept = function($q, $location, $navUrls, $lightboxService, errorHandlingService, $injector, urls, storage) {\n      var httpResponseError, retry;\n      retry = {\n        inProgress: false,\n        promise: null\n      };\n      httpResponseError = function(response) {\n        if (response.config.url.includes('/auth/refresh')) {\n          return $q.reject(response);\n        }\n        if (response.status === 0 || (response.status === -1 && !response.config.cancelable)) {\n          $lightboxService.closeAll();\n          errorHandlingService.error();\n        } else if (response.status === 401 && $location.url().indexOf('/login') === -1) {\n          return new Promise((function(_this) {\n            return function(resolve, reject) {\n              var $http, apiUrl, errorToken, refreshToken, refreshTokenReponse, request;\n              $http = $injector.get('$http');\n              refreshTokenReponse = function(responseRefresh) {\n                storage.set(\"token\", responseRefresh.data.auth_token);\n                storage.set(\"refresh\", responseRefresh.data.refresh);\n                response.config.headers.Authorization = \"Bearer \" + responseRefresh.data.auth_token;\n                return $http(response.config).then(function(result) {\n                  return resolve(result);\n                });\n              };\n              errorToken = function() {\n                var nextUrl, search;\n                nextUrl = $location.url();\n                search = $location.search();\n                storage.remove(\"token\");\n                storage.remove(\"userInfo\");\n                if (search.force_next) {\n                  return window.location.href = $navUrls.resolve(\"login\") + '?force_next=' + search.force_next;\n                } else {\n                  return window.location.href = $navUrls.resolve(\"login\") + '?unauthorized=true&next=' + nextUrl;\n                }\n              };\n              if (retry.inProgress) {\n                return retry.promise.then(function(responseRefresh) {\n                  return refreshTokenReponse(responseRefresh)[\"catch\"](function(err) {\n                    return reject(err);\n                  });\n                })[\"catch\"](function(err) {\n                  errorToken();\n                  return reject(err);\n                });\n              } else {\n                retry.inProgress = true;\n                apiUrl = urls.resolve('refresh');\n                refreshToken = storage.get(\"refresh\");\n                if (refreshToken) {\n                  request = $http.post(apiUrl, {\n                    refresh: refreshToken\n                  });\n                  retry.promise = request;\n                  request.then(function(responseRefresh) {\n                    retry.inProgress = false;\n                    return refreshTokenReponse(responseRefresh)[\"catch\"](function(err) {\n                      return reject(err);\n                    });\n                  });\n                  return request[\"catch\"](function(err) {\n                    retry.inProgress = false;\n                    errorToken();\n                    return reject(err);\n                  });\n                } else {\n                  window.location.href = $navUrls.resolve(\"login\") + '?force_login';\n                  reject(response);\n                }\n              }\n            };\n          })(this));\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\", \"tgErrorHandlingService\", \"$injector\", \"$tgUrls\", \"$tgStorage\", authHttpIntercept]);\n    $httpProvider.interceptors.push(\"authHttpIntercept\");\n    loaderIntercept = function($q, loaderService) {\n      return {\n        request: function(config) {\n          loaderService.logRequest();\n          return config;\n        },\n        requestError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        responseError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        response: function(response) {\n          loaderService.logResponse();\n          return response;\n        }\n      };\n    };\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept]);\n    $httpProvider.interceptors.push(\"loaderIntercept\");\n    versionCheckHttpIntercept = function($q) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var $injector;\n        if (response.status === 400 && response.data.version) {\n          $injector = angular.element(\"body\").injector();\n          $injector.invoke([\n            \"$tgConfirm\", \"$translate\", (function(_this) {\n              return function($confirm, $translate) {\n                var versionErrorMsg;\n                versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\");\n                return $confirm.notify(\"error\", versionErrorMsg, null, 10000);\n              };\n            })(this)\n          ]);\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept]);\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\");\n    blockingIntercept = function($q, errorHandlingService) {\n      var redirectToBlockedPage, responseError, responseOk;\n      redirectToBlockedPage = function() {\n        return errorHandlingService.block();\n      };\n      responseOk = function(response) {\n        if (response.data.blocked_code) {\n          redirectToBlockedPage();\n        }\n        return response;\n      };\n      responseError = function(response) {\n        if (response.status === 451) {\n          redirectToBlockedPage();\n        }\n        return $q.reject(response);\n      };\n      return {\n        response: responseOk,\n        responseError: responseError\n      };\n    };\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept]);\n    $httpProvider.interceptors.push(\"blockingIntercept\");\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false);\n    if (localStorage.userInfo) {\n      userInfo = JSON.parse(localStorage.userInfo);\n    }\n    preferedLangCode = (userInfo != null ? userInfo.lang : void 0) || window.taigaConfig.defaultLanguage || \"en\";\n    $translatePartialLoaderProvider.addPart('taiga');\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: '/' + window._version + '/locales/{part}/locale-{lang}.json'\n    }).useSanitizeValueStrategy('escapeParameters').addInterpolation('$translateMessageFormatInterpolation').preferredLanguage(preferedLangCode).useMissingTranslationHandlerLog();\n    $translateProvider.fallbackLanguage(\"en\");\n    decorators = window.getDecorators();\n    _.each(decorators, function(decorator) {\n      return $provide.decorator(decorator.provider, decorator.decorator);\n    });\n    $logProvider.debugEnabled(window.taigaConfig.debug);\n    if (window.taigaConfig.debug) {\n      return console.info(\"Debug mode is enable\");\n    }\n  };\n\n  i18nInit = function(lang, $translate) {\n    var messages;\n    moment.locale(lang);\n    document.querySelector('html').setAttribute('lang', lang);\n    if (lang !== 'en') {\n      ljs.load((\"/\" + window._version + \"/locales/moment-locales/\") + lang + \".js\");\n    }\n    messages = {\n      defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\"),\n      type: {\n        email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\"),\n        url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\"),\n        urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\"),\n        number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\"),\n        digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\"),\n        dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\"),\n        alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\"),\n        phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\n      },\n      notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\"),\n      notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\"),\n      required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\"),\n      regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\"),\n      min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\"),\n      max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\"),\n      range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\"),\n      minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\"),\n      maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\"),\n      rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\"),\n      mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\"),\n      maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\"),\n      rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\"),\n      equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\"),\n      linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\"),\n      pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\")\n    };\n    return checksley.updateMessages('default', messages);\n  };\n\n  init = function($log, $rootscope, $auth, $events, $analytics, $tagManager, $userPilot, $translate, $location, $navUrls, appMetaService, loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig, projectService) {\n    var lang, un, user, validators;\n    $log.debug(\"Initialize application\");\n    $rootscope.$on('$translatePartialLoaderStructureChanged', function() {\n      return $translate.refresh();\n    });\n    validators = {\n      linewidth: function(val, width) {\n        var lines, valid;\n        lines = taiga.nl2br(val).split(\"<br />\");\n        valid = _.every(lines, function(line) {\n          return line.length < width;\n        });\n        return valid;\n      },\n      pikaday: function(val) {\n        var prettyDate;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        return moment(val, prettyDate).isValid();\n      },\n      url: function(val) {\n        var re_weburl;\n        re_weburl = new RegExp(\"^\" + \"(?:(?:https?|ftp)://)\" + \"(?:\\\\S+(?::\\\\S*)?@)?\" + \"(?:\" + \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" + \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" + \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" + \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" + \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" + \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" + \"|\" + \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" + \"\\\\.?\" + \")\" + \"(?::\\\\d{2,5})?\" + \"(?:[/?#]\\\\S*)?\" + \"$\", \"i\");\n        return re_weburl.test(val);\n      }\n    };\n    checksley.updateValidators(validators);\n    $rootscope.contribPlugins = this.taigaContribPlugins;\n    $rootscope.adminPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"admin\"\n    });\n    $rootscope.authPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"auth\"\n    });\n    $rootscope.userSettingsPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"userSettings\"\n    });\n    lang = null;\n    $rootscope.$on(\"$translateChangeEnd\", function(e, ctx) {\n      var legacy, rtlLanguages;\n      if (lang !== ctx.language) {\n        lang = ctx.language;\n        i18nInit(lang, $translate);\n        rtlLanguages = $tgConfig.get(\"rtlLanguages\", []);\n        $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1;\n        legacy = document.querySelector('tg-legacy');\n        return legacy.translations = {\n          translationTable: $translate.getTranslationTable(lang),\n          lan: lang\n        };\n      }\n    });\n    $events.setupConnection();\n    if ($auth.isAuthenticated()) {\n      user = $auth.getUser();\n    }\n    $analytics.initialize();\n    $tagManager.initialize();\n    $userPilot.initialize();\n    $userPilot.identify();\n    $rootscope.$on('$locationChangeStart', function(event) {\n      errorHandlingService.init();\n      if (lightboxService.getLightboxOpen().length) {\n        event.preventDefault();\n        return lightboxService.closeAll();\n      }\n    });\n    un = $rootscope.$on('$routeChangeStart', function(event, next) {\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      return un();\n    });\n    return $rootscope.$on('$routeChangeSuccess', function(event, next) {\n      var description, ref, title;\n      if ((ref = projectService.project) != null ? ref.get('blocked_code') : void 0) {\n        errorHandlingService.block();\n      }\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      if (next.access && next.access.requiresLogin) {\n        if (!$auth.isAuthenticated()) {\n          $location.path($navUrls.resolve(\"login\"));\n        }\n      }\n      if (next.title || next.description) {\n        title = $translate.instant(next.title || \"\");\n        description = $translate.instant(next.description || \"\");\n        appMetaService.setAll(title, description);\n      }\n      if (next.mobileViewport) {\n        appMetaService.addMobileViewport();\n      } else {\n        appMetaService.removeMobileViewport();\n      }\n      if (next.disableHeader) {\n        return navigationBarService.disableHeader();\n      } else {\n        return navigationBarService.enableHeader();\n      }\n    });\n  };\n\n  angular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500);\n\n  pluginsWithModule = _.filter(this.taigaContribPlugins, function(plugin) {\n    return plugin.module;\n  });\n\n  pluginsModules = _.map(pluginsWithModule, function(plugin) {\n    return plugin.module;\n  });\n\n  modules = [\"taigaBase\", \"taigaCommon\", \"taigaResources\", \"taigaResources2\", \"taigaAuth\", \"taigaEvents\", \"taigaHome\", \"taigaNavigationBar\", \"taigaProjects\", \"taigaRelatedTasks\", \"taigaBacklog\", \"taigaTaskboard\", \"taigaKanban\", \"taigaIssues\", \"taigaUserStories\", \"taigaTasks\", \"taigaTeam\", \"taigaWiki\", \"taigaSearch\", \"taigaAdmin\", \"taigaProject\", \"taigaUserSettings\", \"taigaFeedback\", \"taigaPlugins\", \"taigaIntegrations\", \"taigaComponents\", \"taigaProfile\", \"taigaHome\", \"taigaUserTimeline\", \"taigaExternalApps\", \"taigaDiscover\", \"taigaHistory\", \"taigaNotifications\", \"taigaWikiHistory\", \"taigaEpics\", \"taigaUtils\", \"templates\", \"ngSanitize\", \"ngRoute\", \"ngAnimate\", \"ngAria\", \"pascalprecht.translate\", \"infinite-scroll\", \"tgRepeat\"].concat(pluginsModules);\n\n  module = angular.module(\"taiga\", modules);\n\n  module.config([\"$routeProvider\", \"$locationProvider\", \"$httpProvider\", \"$provide\", \"$tgEventsProvider\", \"$compileProvider\", \"$translateProvider\", \"$translatePartialLoaderProvider\", \"$animateProvider\", \"$logProvider\", configure]);\n\n  module.run([\"$log\", \"$rootScope\", \"$tgAuth\", \"$tgEvents\", \"$tgAnalytics\", \"$tgTagManager\", \"$tgUserPilot\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"tgLoader\", \"tgNavigationBarService\", \"tgErrorHandlingService\", \"lightboxService\", \"$tgConfig\", \"tgProjectService\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaBase, TaigaController, TaigaService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  TaigaBase = (function() {\n    function TaigaBase() {}\n\n    return TaigaBase;\n\n  })();\n\n  TaigaService = (function(superClass) {\n    extend(TaigaService, superClass);\n\n    function TaigaService() {\n      return TaigaService.__super__.constructor.apply(this, arguments);\n    }\n\n    return TaigaService;\n\n  })(TaigaBase);\n\n  TaigaController = (function(superClass) {\n    extend(TaigaController, superClass);\n\n    function TaigaController() {\n      this.onInitialDataError = bind(this.onInitialDataError, this);\n      return TaigaController.__super__.constructor.apply(this, arguments);\n    }\n\n    TaigaController.prototype.onInitialDataError = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.errorHandlingService.notfound();\n        } else if (xhr.status === 403) {\n          this.errorHandlingService.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return TaigaController;\n\n  })(TaigaBase);\n\n  this.taiga.Base = TaigaBase;\n\n  this.taiga.Service = TaigaService;\n\n  this.taiga.Controller = TaigaController;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DEFAULT_COLOR_LIST, addClass, bindMethods, bindOnce, cancelTimeout, debounce, debounceLeading, defineImmutableProperty, findScope, getDefaulColorList, getMatches, getRandomDefaultColor, groupBy, isEmail, isImage, isPdf, joinStr, mixOf, nl2br, normalizeString, patch, randomInt, replaceTags, scopeDefer, sizeFormat, slugify, startswith, stripTags, taiga, timeout, toString, toggleText, trim, truncate, unslugify,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  addClass = function(el, className) {\n    if (el.classList) {\n      return el.classList.add(className);\n    } else {\n      return el.className += ' ' + className;\n    }\n  };\n\n  nl2br = (function(_this) {\n    return function(str) {\n      var breakTag;\n      breakTag = '<br />';\n      return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n    };\n  })(this);\n\n  bindMethods = (function(_this) {\n    return function(object) {\n      var dependencies, methods;\n      dependencies = _.keys(object);\n      methods = [];\n      _.forIn(object, function(value, key) {\n        if (indexOf.call(dependencies, key) < 0 && _.isFunction(value)) {\n          return methods.push(key);\n        }\n      });\n      return _.bindAll(object, methods);\n    };\n  })(this);\n\n  bindOnce = (function(_this) {\n    return function(scope, attr, continuation) {\n      var delBind, val;\n      val = scope.$eval(attr);\n      if (val !== void 0) {\n        return continuation(val);\n      }\n      delBind = null;\n      return delBind = scope.$watch(attr, function(val) {\n        if (val === void 0) {\n          return;\n        }\n        continuation(val);\n        if (delBind) {\n          return delBind();\n        }\n      });\n    };\n  })(this);\n\n  mixOf = function() {\n    var Mixed, base, i, method, mixin, mixins, name, ref;\n    base = arguments[0], mixins = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    Mixed = (function(superClass) {\n      extend(Mixed, superClass);\n\n      function Mixed() {\n        return Mixed.__super__.constructor.apply(this, arguments);\n      }\n\n      return Mixed;\n\n    })(base);\n    for (i = mixins.length - 1; i >= 0; i += -1) {\n      mixin = mixins[i];\n      ref = mixin.prototype;\n      for (name in ref) {\n        method = ref[name];\n        Mixed.prototype[name] = method;\n      }\n    }\n    return Mixed;\n  };\n\n  trim = function(data, char) {\n    return _.trim(data, char);\n  };\n\n  slugify = function(data) {\n    return data.toString().toLowerCase().trim().replace(/\\s+/g, '-').replace(/&/g, '-and-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-');\n  };\n\n  unslugify = function(data) {\n    if (data) {\n      return _.capitalize(data.replace(/-/g, ' '));\n    }\n    return data;\n  };\n\n  toggleText = function(element, texts) {\n    var nextTextPosition, text;\n    nextTextPosition = element.data('nextTextPosition');\n    if ((nextTextPosition == null) || nextTextPosition >= texts.length) {\n      nextTextPosition = 0;\n    }\n    text = texts[nextTextPosition];\n    element.data('nextTextPosition', nextTextPosition + 1);\n    return element.text(text);\n  };\n\n  groupBy = function(coll, pred) {\n    var i, item, len, result;\n    result = {};\n    for (i = 0, len = coll.length; i < len; i++) {\n      item = coll[i];\n      result[pred(item)] = item;\n    }\n    return result;\n  };\n\n  timeout = function(wait, continuation) {\n    return window.setTimeout(continuation, wait);\n  };\n\n  cancelTimeout = function(timeoutVar) {\n    return window.clearTimeout(timeoutVar);\n  };\n\n  scopeDefer = function(scope, func) {\n    return _.defer((function(_this) {\n      return function() {\n        return scope.$apply(func);\n      };\n    })(this));\n  };\n\n  toString = function(value) {\n    if (_.isNumber(value)) {\n      return value + \"\";\n    } else if (_.isString(value)) {\n      return value;\n    } else if (_.isPlainObject(value)) {\n      return JSON.stringify(value);\n    } else if (_.isUndefined(value)) {\n      return \"\";\n    }\n    return value.toString();\n  };\n\n  joinStr = function(str, coll) {\n    return coll.join(str);\n  };\n\n  debounce = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: true,\n      trailing: false\n    });\n  };\n\n  debounceLeading = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: false,\n      trailing: true\n    });\n  };\n\n  startswith = function(str1, str2) {\n    return _.startsWith(str1, str2);\n  };\n\n  truncate = function(str, maxLength, suffix) {\n    var out;\n    if (suffix == null) {\n      suffix = \"...\";\n    }\n    if ((typeof str !== \"string\") && !(str instanceof String)) {\n      return str;\n    }\n    out = str.slice(0);\n    if (out.length > maxLength) {\n      out = out.substring(0, maxLength + 1);\n      out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")));\n      out = out + suffix;\n    }\n    return out;\n  };\n\n  sizeFormat = function(input, precision) {\n    var number, size, units;\n    if (precision == null) {\n      precision = 1;\n    }\n    if (isNaN(parseFloat(input)) || !isFinite(input)) {\n      return \"-\";\n    }\n    if (input === 0) {\n      return \"0 bytes\";\n    }\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n    number = Math.floor(Math.log(input) / Math.log(1024));\n    if (number > 5) {\n      number = 5;\n    }\n    size = (input / Math.pow(1024, number)).toFixed(precision);\n    return size + \" \" + units[number];\n  };\n\n  stripTags = function(str, exception) {\n    var pattern;\n    if (exception) {\n      pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi');\n      return String(str).replace(pattern, '');\n    } else {\n      return String(str).replace(/<\\/?[^>]+>/g, '');\n    }\n  };\n\n  replaceTags = function(str, tags, replace) {\n    var pattern;\n    pattern = new RegExp('<(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '<' + replace + '>');\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '</' + replace + '>');\n    return str;\n  };\n\n  defineImmutableProperty = (function(_this) {\n    return function(obj, name, fn) {\n      return Object.defineProperty(obj, name, {\n        get: function() {\n          var fn_result;\n          if (!_.isFunction(fn)) {\n            throw \"defineImmutableProperty third param must be a function\";\n          }\n          fn_result = fn();\n          if (fn_result && _.isObject(fn_result)) {\n            if (fn_result.size === void 0) {\n              throw \"defineImmutableProperty must return immutable data\";\n            }\n          }\n          return fn_result;\n        }\n      });\n    };\n  })(this);\n\n  _.mixin({\n    removeKeys: function(obj, keys) {\n      return _.chain([keys]).flatten().reduce(function(obj, key) {\n        delete obj[key];\n        return obj;\n      }, obj).value();\n    },\n    cartesianProduct: function() {\n      return _.reduceRight(arguments, function(a, b) {\n        return _.flatten(_.map(a, function(x) {\n          return _.map(b, function(y) {\n            return [y].concat(x);\n          });\n        }), true);\n      }, [[]]);\n    }\n  });\n\n  isImage = function(name) {\n    return name.match(/\\.(jpe?g|png|gif|gifv|svg|psd|webp)/i) !== null;\n  };\n\n  isEmail = function(name) {\n    return (name != null) && name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) !== null;\n  };\n\n  isPdf = function(name) {\n    return name.match(/\\.(pdf)/i) !== null;\n  };\n\n  patch = function(oldImmutable, newImmutable) {\n    var pathObj;\n    pathObj = {};\n    newImmutable.forEach(function(newValue, key) {\n      if (newValue !== oldImmutable.get(key)) {\n        if (newValue.toJS) {\n          return pathObj[key] = newValue.toJS();\n        } else {\n          return pathObj[key] = newValue;\n        }\n      }\n    });\n    return pathObj;\n  };\n\n  DEFAULT_COLOR_LIST = ['#D35163', '#D351CF', '#AC51D3', '#8151D3', '#5551D3', '#5178D3', '#78D351', '#51D355', '#51D381', '#51D3AC', '#51CFD3', '#51A3D3', '#A3D350', '#CFD350', '#D3AC50', '#D38050', '#D35450', '#E44057', '#4C566A', '#70728F', '#A9AABC'];\n\n  getRandomDefaultColor = function() {\n    return _.sample(DEFAULT_COLOR_LIST);\n  };\n\n  getDefaulColorList = function() {\n    return _.clone(DEFAULT_COLOR_LIST);\n  };\n\n  getMatches = function(string, regex, index) {\n    var match, matches;\n    index || (index = 1);\n    matches = [];\n    match = null;\n    while (match = regex.exec(string)) {\n      if (index === -1) {\n        matches.push(match);\n      } else {\n        matches.push(match[index]);\n      }\n    }\n    return matches;\n  };\n\n  randomInt = function(start, end) {\n    var interval;\n    interval = end - start;\n    return start + Math.floor(Math.random() * (interval + 1));\n  };\n\n  normalizeString = function(string) {\n    var normalizedString;\n    normalizedString = string;\n    normalizedString = normalizedString.replace(\"Á\", \"A\").replace(\"Ä\", \"A\").replace(\"À\", \"A\");\n    normalizedString = normalizedString.replace(\"É\", \"E\").replace(\"Ë\", \"E\").replace(\"È\", \"E\");\n    normalizedString = normalizedString.replace(\"Í\", \"I\").replace(\"Ï\", \"I\").replace(\"Ì\", \"I\");\n    normalizedString = normalizedString.replace(\"Ó\", \"O\").replace(\"Ö\", \"O\").replace(\"Ò\", \"O\");\n    normalizedString = normalizedString.replace(\"Ú\", \"U\").replace(\"Ü\", \"U\").replace(\"Ù\", \"U\");\n    return normalizedString;\n  };\n\n  findScope = function($scope, condition) {\n    var result;\n    result = condition($scope);\n    if (result) {\n      return result;\n    }\n    if ($scope) {\n      return findScope($scope.$parent, condition);\n    }\n    return null;\n  };\n\n  taiga = this.taiga;\n\n  taiga.addClass = addClass;\n\n  taiga.nl2br = nl2br;\n\n  taiga.bindMethods = bindMethods;\n\n  taiga.bindOnce = bindOnce;\n\n  taiga.mixOf = mixOf;\n\n  taiga.trim = trim;\n\n  taiga.slugify = slugify;\n\n  taiga.unslugify = unslugify;\n\n  taiga.toggleText = toggleText;\n\n  taiga.groupBy = groupBy;\n\n  taiga.timeout = timeout;\n\n  taiga.cancelTimeout = cancelTimeout;\n\n  taiga.scopeDefer = scopeDefer;\n\n  taiga.toString = toString;\n\n  taiga.joinStr = joinStr;\n\n  taiga.truncate = truncate;\n\n  taiga.debounce = debounce;\n\n  taiga.debounceLeading = debounceLeading;\n\n  taiga.startswith = startswith;\n\n  taiga.sizeFormat = sizeFormat;\n\n  taiga.stripTags = stripTags;\n\n  taiga.replaceTags = replaceTags;\n\n  taiga.defineImmutableProperty = defineImmutableProperty;\n\n  taiga.isImage = isImage;\n\n  taiga.isEmail = isEmail;\n\n  taiga.isPdf = isPdf;\n\n  taiga.patch = patch;\n\n  taiga.getRandomDefaultColor = getRandomDefaultColor;\n\n  taiga.getDefaulColorList = getDefaulColorList;\n\n  taiga.getMatches = getMatches;\n\n  taiga.randomInt = randomInt;\n\n  taiga.normalizeString = normalizeString;\n\n  taiga.findScope = findScope;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersMixin, PageMixin, UsFiltersMixin, groupBy, joinStr, taiga, toString, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  joinStr = this.taiga.joinStr;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  PageMixin = (function() {\n    function PageMixin() {}\n\n    PageMixin.prototype.fillUsersAndRoles = function(users, roles) {\n      var activeUsers, computableRoles;\n      activeUsers = _.filter(users, (function(_this) {\n        return function(user) {\n          return user.is_active;\n        };\n      })(this));\n      this.scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\");\n      this.scope.activeUsersById = groupBy(this.scope.activeUsers, function(e) {\n        return e.id;\n      });\n      this.scope.users = _.sortBy(users, \"full_name_display\");\n      this.scope.usersById = groupBy(users, function(e) {\n        return e.id;\n      });\n      this.scope.roles = _.sortBy(roles, \"order\");\n      computableRoles = _(this.scope.project.members).map(\"role\").uniq().value();\n      return this.scope.computableRoles = _(roles).filter(\"computable\").filter(function(x) {\n        return _.includes(computableRoles, x.id);\n      }).value();\n    };\n\n    PageMixin.prototype.loadUsersAndRoles = function() {\n      var promise;\n      promise = this.q.all([this.rs.projects.usersList(this.scope.projectId), this.rs.projects.rolesList(this.scope.projectId)]);\n      return promise.then((function(_this) {\n        return function(results) {\n          var roles, users;\n          users = results[0], roles = results[1];\n          _this.fillUsersAndRoles(users, roles);\n          return results;\n        };\n      })(this));\n    };\n\n    return PageMixin;\n\n  })();\n\n  taiga.PageMixin = PageMixin;\n\n  FiltersMixin = (function() {\n    function FiltersMixin() {}\n\n    FiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    FiltersMixin.prototype.selectFilter = function(name, value, load, mode) {\n      var existing, location, params;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = \"include\";\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] !== void 0 && name !== \"page\") {\n        existing = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n          return trim(x);\n        });\n        existing.push(taiga.toString(value));\n        existing = _.compact(existing);\n        value = joinStr(\",\", _.uniq(existing));\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceFilter = function(name, value, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceAllFilters = function(filters, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(filters);\n    };\n\n    FiltersMixin.prototype.unselectFilter = function(name, value, load, mode) {\n      var location, newValues, params, parsedValues;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = 'include';\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] === void 0) {\n        return;\n      }\n      if (value === void 0 || value === null) {\n        delete params[name];\n      }\n      parsedValues = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n        return trim(x);\n      });\n      newValues = _.reject(parsedValues, function(x) {\n        return x === taiga.toString(value);\n      });\n      newValues = _.compact(newValues);\n      if (_.isEmpty(newValues)) {\n        value = null;\n      } else {\n        value = joinStr(\",\", _.uniq(newValues));\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(name, value);\n    };\n\n    FiltersMixin.prototype.applyStoredFilters = function(projectSlug, key, validKeys) {\n      var filters;\n      if (_.isEmpty(this.location.search())) {\n        filters = this.getFilters(projectSlug, key);\n        if (validKeys) {\n          filters = _.pick(filters, validKeys);\n        }\n        if (Object.keys(filters).length) {\n          this.location.search(filters);\n          this.location.replace();\n          return true;\n        }\n      }\n      return false;\n    };\n\n    FiltersMixin.prototype.storeFilters = function(projectSlug, params, filtersHashSuffix) {\n      var hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      return this.storage.set(hash, params);\n    };\n\n    FiltersMixin.prototype.getFilters = function(projectSlug, filtersHashSuffix) {\n      var data, hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      data = this.storage.get(hash) || {};\n      delete data.q;\n      return data;\n    };\n\n    FiltersMixin.prototype.formatSelectedFilters = function(type, list, urlIds, mode) {\n      var invalidAppliedTags, invalidTags, selectedFilters, selectedIds, validAppliedTags;\n      if (mode == null) {\n        mode = \"include\";\n      }\n      selectedIds = urlIds.split(',');\n      selectedFilters = _.filter(list, function(it) {\n        return selectedIds.indexOf(_.toString(it.id)) !== -1;\n      });\n      invalidTags = _.filter(selectedIds, function(it) {\n        return !_.find(selectedFilters, function(sit) {\n          return _.toString(sit.id) === it;\n        });\n      });\n      invalidAppliedTags = _.map(invalidTags, function(it) {\n        return {\n          id: it,\n          key: type + \":\" + it,\n          dataType: type,\n          name: it,\n          mode: mode\n        };\n      });\n      validAppliedTags = _.map(selectedFilters, function(it) {\n        return {\n          id: it.id,\n          key: type + \":\" + it.id,\n          dataType: type,\n          name: it.name,\n          color: it.color,\n          mode: mode\n        };\n      });\n      return invalidAppliedTags.concat(validAppliedTags);\n    };\n\n    return FiltersMixin;\n\n  })();\n\n  taiga.FiltersMixin = FiltersMixin;\n\n  UsFiltersMixin = (function() {\n    function UsFiltersMixin() {}\n\n    UsFiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    UsFiltersMixin.prototype.filterCategories = [\"tags\", \"status\", \"assigned_users\", \"assigned_to\", \"owner\", \"epic\", \"role\"];\n\n    UsFiltersMixin.prototype.excludeFilters = [];\n\n    UsFiltersMixin.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      return this.filtersReloadContent();\n    };\n\n    UsFiltersMixin.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n          return _this.generateFilters();\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    UsFiltersMixin.prototype.generateFilters = function(milestone) {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      this.storeFilters(this.params.pslug, this.location.search(), this.storeFiltersName);\n      urlfilters = this.location.search();\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      if (milestone) {\n        loadFilters.milestone = milestone;\n      }\n      return this.q.all([this.rs.userstories.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_users = _.map(data.assigned_users, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.epic = _.map(data.epics, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n              it.name = \"#\" + it.ref + \" \" + it.subject;\n            } else {\n              it.id = \"null\";\n              it.name = \"Not in an epic\";\n            }\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [];\n          if (!_this.excludeFilters.includes('status')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            });\n          }\n          if (!_this.excludeFilters.includes('tags')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            });\n          }\n          if (!_this.excludeFilters.includes('assigned_to')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_users\",\n              content: dataCollection.assigned_users\n            });\n          }\n          if (!_this.excludeFilters.includes('role')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            });\n          }\n          if (!_this.excludeFilters.includes('created_by')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            });\n          }\n          if (!_this.excludeFilters.includes('epic')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\n              dataType: \"epic\",\n              content: dataCollection.epic\n            });\n          }\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    return UsFiltersMixin;\n\n  })();\n\n  taiga.UsFiltersMixin = UsFiltersMixin;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaAdmin\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var $translateMissingTranslationHandlerLog;\n\n  $translateMissingTranslationHandlerLog = function($log) {\n    return function(translationId) {};\n  };\n\n  $translateMissingTranslationHandlerLog.$inject = ['$log'];\n\n  angular.module('pascalprecht.translate').factory('$translateMissingTranslationHandlerLog', $translateMissingTranslationHandlerLog);\n\n  $translateMissingTranslationHandlerLog.displayName = '$translateMissingTranslationHandlerLog';\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AuthService, CancelAccountDirective, ChangeEmailDirective, ChangePasswordFromRecoveryDirective, ForgotPasswordDirective, InvitationDirective, LoginDirective, LoginPage, PublicRegisterMessageDirective, RegisterDirective, RegisterOptionsDirective, VerifyEmailDirective, debounce, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAuth\", [\"taigaResources\"]);\n\n  LoginPage = (function() {\n    LoginPage.$inject = ['tgCurrentUserService', '$location', '$tgNavUrls', '$routeParams', '$tgAuth'];\n\n    function LoginPage(currentUserService, $location, $navUrls, $routeParams, $auth) {\n      var url;\n      if (currentUserService.isAuthenticated()) {\n        if (!$routeParams['force_login']) {\n          url = $navUrls.resolve(\"home\");\n          if ($routeParams['next']) {\n            url = decodeURIComponent($routeParams['next']);\n            $location.search('next', null);\n          }\n          if ($routeParams['unauthorized']) {\n            $auth.clear();\n            $auth.removeToken();\n          } else {\n            $location.url(url);\n          }\n        }\n      }\n    }\n\n    return LoginPage;\n\n  })();\n\n  module.controller('LoginPage', LoginPage);\n\n  AuthService = (function(superClass) {\n    extend(AuthService, superClass);\n\n    AuthService.$inject = [\"$rootScope\", \"$tgStorage\", \"$tgModel\", \"$tgResources\", \"$tgHttp\", \"$tgUrls\", \"$tgConfig\", \"$tgUserPilot\", \"$translate\", \"tgCurrentUserService\", \"tgThemeService\", \"$tgAnalytics\"];\n\n    function AuthService(rootscope, storage, model, rs, http, urls, config1, userpilot, translate, currentUserService1, themeService, analytics) {\n      var userModel;\n      this.rootscope = rootscope;\n      this.storage = storage;\n      this.model = model;\n      this.rs = rs;\n      this.http = http;\n      this.urls = urls;\n      this.config = config1;\n      this.userpilot = userpilot;\n      this.translate = translate;\n      this.currentUserService = currentUserService1;\n      this.themeService = themeService;\n      this.analytics = analytics;\n      AuthService.__super__.constructor.call(this);\n      userModel = this.getUser();\n      this._currentTheme = this._getUserTheme();\n      this.setUserdata(userModel);\n    }\n\n    AuthService.prototype.setUserdata = function(userModel) {\n      if (userModel) {\n        this.userData = Immutable.fromJS(userModel.getAttrs());\n        this.currentUserService.setUser(this.userData);\n      } else {\n        this.userData = null;\n      }\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype._getUserTheme = function() {\n      var compiledThemes, defaultTheme, ref, ref1, ref2;\n      compiledThemes = window._taigaAvailableThemes;\n      defaultTheme = this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!_.includes(this.config.get(\"themes\"), (ref = this.rootscope.user) != null ? ref.theme : void 0) || !compiledThemes.includes((ref1 = this.rootscope.user) != null ? ref1.theme : void 0)) {\n        return defaultTheme;\n      }\n      return (ref2 = this.rootscope.user) != null ? ref2.theme : void 0;\n    };\n\n    AuthService.prototype._setTheme = function() {\n      var newTheme;\n      newTheme = this._getUserTheme();\n      if (this._currentTheme !== newTheme) {\n        this._currentTheme = newTheme;\n        return this.themeService.use(this._currentTheme);\n      }\n    };\n\n    AuthService.prototype._setLocales = function() {\n      var lang, ref;\n      lang = ((ref = this.rootscope.user) != null ? ref.lang : void 0) || this.config.get(\"defaultLanguage\") || \"en\";\n      this.translate.preferredLanguage(lang);\n      return this.translate.use(lang);\n    };\n\n    AuthService.prototype.getUser = function() {\n      var user, userData;\n      if (this.rootscope.user) {\n        return this.rootscope.user;\n      }\n      userData = this.storage.get(\"userInfo\");\n      if (userData) {\n        user = this.model.make_model(\"users\", userData);\n        this.rootscope.user = user;\n        this._setLocales();\n        this._setTheme();\n        return user;\n      } else {\n        this._setTheme();\n      }\n      return null;\n    };\n\n    AuthService.prototype.setUser = function(user) {\n      this.rootscope.auth = user;\n      this.storage.set(\"userInfo\", user.getAttrs());\n      this.rootscope.user = user;\n      this.setUserdata(user);\n      this._setLocales();\n      return this._setTheme();\n    };\n\n    AuthService.prototype.clear = function() {\n      this.rootscope.auth = null;\n      this.rootscope.user = null;\n      return this.storage.remove(\"userInfo\");\n    };\n\n    AuthService.prototype.setRefreshToken = function(token) {\n      return this.storage.set(\"refresh\", token);\n    };\n\n    AuthService.prototype.getRefreshToken = function() {\n      return this.storage.get(\"refresh\");\n    };\n\n    AuthService.prototype.setToken = function(token) {\n      return this.storage.set(\"token\", token);\n    };\n\n    AuthService.prototype.getToken = function() {\n      return this.storage.get(\"token\");\n    };\n\n    AuthService.prototype.removeToken = function() {\n      return this.storage.remove(\"token\");\n    };\n\n    AuthService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    AuthService.prototype.refresh = function() {\n      var url;\n      url = this.urls.resolve(\"user-me\");\n      return this.http.get(url).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = data.data;\n          user.token = _this.getUser().auth_token;\n          user = _this.model.make_model(\"users\", user);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:refresh\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.login = function(data, type) {\n      var url;\n      url = this.urls.resolve(\"auth\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"normal\";\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = _this.model.make_model(\"users\", data.data);\n          _this.setToken(user.auth_token);\n          _this.setRefreshToken(user.refresh);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:login\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.logout = function() {\n      this.removeToken();\n      this.clear();\n      this.currentUserService.removeUser();\n      this._setTheme();\n      this._setLocales();\n      this.rootscope.$broadcast(\"auth:logout\");\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype.register = function(data, type, existing) {\n      var url;\n      url = this.urls.resolve(\"auth-register\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"public\";\n      if (type === \"private\") {\n        data.existing = existing ? existing : false;\n      }\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(response) {\n          var user;\n          user = _this.model.make_model(\"users\", response.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:register\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.getInvitation = function(token) {\n      return this.rs.invitations.get(token);\n    };\n\n    AuthService.prototype.acceptInvitiationWithNewUser = function(data) {\n      return this.register(data, \"private\", false);\n    };\n\n    AuthService.prototype.forgotPassword = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-password-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changePasswordFromRecovery = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-password-from-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changeEmail = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-email\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.cancelAccount = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-cancel-account\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.exportProfile = function() {\n      var url;\n      url = this.urls.resolve(\"users-export\");\n      return this.http.post(url);\n    };\n\n    AuthService.prototype.sendVerificationEmail = function() {\n      var url;\n      url = this.urls.resolve(\"user-send-verification-email\");\n      return this.http.post(url);\n    };\n\n    return AuthService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAuth\", AuthService);\n\n  PublicRegisterMessageDirective = function($config, $navUrls, $routeParams, templates) {\n    var template, templateFn;\n    template = templates.get(\"auth/login-text.html\", true);\n    templateFn = function() {\n      var nextUrl, publicRegisterEnabled, url;\n      publicRegisterEnabled = $config.get(\"publicRegisterEnabled\");\n      if (!publicRegisterEnabled) {\n        return \"\";\n      }\n      url = $navUrls.resolve(\"register\");\n      if ($routeParams['force_next']) {\n        nextUrl = encodeURIComponent($routeParams['force_next']);\n        url += \"?next=\" + nextUrl;\n      }\n      return template({\n        url: url\n      });\n    };\n    return {\n      restrict: \"AE\",\n      scope: {},\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\", \"$tgTemplate\", PublicRegisterMessageDirective]);\n\n  LoginDirective = function($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onError, onSuccess, submit;\n      form = new checksley.Form($el.find(\"form.login-form\"));\n      $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true);\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\") && !$routeParams['next'].startsWith(\"%2Fdiscover\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      if ($routeParams['force_next']) {\n        $scope.nextUrl = decodeURIComponent($routeParams['force_next']);\n      }\n      onSuccess = function(response) {\n        $events.setupConnection();\n        $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onError = function(response) {\n        return $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"));\n      };\n      $scope.onKeyUp = function(event) {\n        var target, value;\n        target = angular.element(event.currentTarget);\n        value = target.val();\n        $scope.iscapsLockActivated = false;\n        if (value !== value.toLowerCase()) {\n          return $scope.iscapsLockActivated = true;\n        }\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          data = {\n            \"username\": $el.find(\"form.login-form input[name=username]\").val(),\n            \"password\": $el.find(\"form.login-form input[name=password]\").val()\n          };\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          promise = $auth.login(data, loginFormType);\n          return promise.then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      window.prerenderReady = true;\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective]);\n\n  RegisterDirective = function($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      if (!$config.get(\"publicRegisterEnabled\")) {\n        $location.path($navUrls.resolve(\"not-found\"));\n        $location.replace();\n      }\n      $scope.data = {};\n      form = $el.find(\"form\").checksley({\n        onlyOneErrorElement: true\n      });\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      onSuccessSubmit = function(response) {\n        $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return form.setErrors(response.data);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.register($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective]);\n\n  RegisterOptionsDirective = function() {\n    return {};\n  };\n\n  module.directive(\"tgRegisterOptions\", [RegisterOptionsDirective]);\n\n  ForgotPasswordDirective = function($auth, $confirm, $location, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var message, title;\n        $location.path($navUrls.resolve(\"login\"));\n        title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\");\n        message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\");\n        return $confirm.success(title, message);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\");\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.forgotPassword($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\", ForgotPasswordDirective]);\n\n  ChangePasswordFromRecoveryDirective = function($auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit, text;\n      $scope.data = {};\n      if ($params.token != null) {\n        $scope.tokenInParams = true;\n        $scope.data.token = $params.token;\n      } else {\n        $location.path($navUrls.resolve(\"login\"));\n        text = '';\n        text = response.data.token.map(function(message) {\n          return text + \" \" + message;\n        });\n        $confirm.notify(\"light-error\", text);\n      }\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        text = '';\n        text = response.data.password.map(function(message) {\n          return text + \" \" + message;\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.changePasswordFromRecovery($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangePasswordFromRecoveryDirective]);\n\n  InvitationDirective = function($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var loginForm, onErrorSubmitLogin, onErrorSubmitRegister, onSuccessSubmitLogin, onSuccessSubmitRegister, promise, registerForm, submitLogin, submitRegister, token;\n      token = $params.token;\n      promise = $auth.getInvitation(token);\n      promise.then(function(invitation) {\n        $scope.invitation = invitation;\n        return $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      });\n      promise.then(null, function(response) {\n        var text;\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\");\n        return $confirm.notify(\"light-error\", text);\n      });\n      $scope.dataLogin = {\n        token: token\n      };\n      loginForm = $el.find(\"form.login-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitLogin = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitLogin = function(response) {\n        return $confirm.notify(\"light-error\", response.data._error_message);\n      };\n      submitLogin = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType;\n          event.preventDefault();\n          if (!loginForm.validate()) {\n            return;\n          }\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          data = $scope.dataLogin;\n          promise = $auth.login({\n            username: data.username,\n            password: data.password,\n            invitation_token: data.token\n          }, loginFormType);\n          return promise.then(onSuccessSubmitLogin, onErrorSubmitLogin);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.login-form\", submitLogin);\n      $el.on(\"click\", \".button-login\", submitLogin);\n      $scope.dataRegister = {\n        token: token\n      };\n      registerForm = $el.find(\"form.register-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitRegister = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitRegister = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return registerForm.setErrors(response.data);\n      };\n      submitRegister = debounce(2000, (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          if (!registerForm.validate()) {\n            return;\n          }\n          promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister);\n          return promise.then(onSuccessSubmitRegister, onErrorSubmitRegister);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.register-form\", submitRegister);\n      $el.on(\"click\", \".button-register\", submitRegister);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective]);\n\n  VerifyEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"VERIFY_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgVerifyEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", VerifyEmailDirective]);\n\n  ChangeEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective]);\n\n  CancelAccountDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.cancel_token = $params.cancel_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        $auth.logout();\n        $location.path($navUrls.resolve(\"home\"));\n        text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.cancelAccount($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", CancelAccountDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaBacklog\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaMainDirective, bindOnce, groupBy, init, module, taiga, urls;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\", []);\n\n  TaigaMainDirective = function($rootscope, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $window.onresize = function() {\n        return $rootscope.$broadcast(\"resize\");\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective]);\n\n  urls = {\n    \"home\": \"/\",\n    \"projects\": \"/projects\",\n    \"error\": \"/error\",\n    \"not-found\": \"/not-found\",\n    \"permission-denied\": \"/permission-denied\",\n    \"discover\": \"/discover\",\n    \"discover-search\": \"/discover/search\",\n    \"login\": \"/login\",\n    \"forgot-password\": \"/forgot-password\",\n    \"change-password\": \"/change-password/:token\",\n    \"change-email\": \"/change-email/:token\",\n    \"verified-email\": \"/change-email/:token\",\n    \"cancel-account\": \"/cancel-account/:token\",\n    \"register\": \"/register\",\n    \"invitation\": \"/invitation/:token\",\n    \"create-project\": \"/project/new\",\n    \"create-project-scrum\": \"/project/new/scrum\",\n    \"create-project-kanban\": \"/project/new/kanban\",\n    \"create-project-duplicate\": \"/project/new/duplicate\",\n    \"create-project-import\": \"/project/new/import\",\n    \"create-project-import-platform\": \"/project/new/import/:platform\",\n    \"profile\": \"/profile\",\n    \"user-profile\": \"/profile/:username\",\n    \"blocked-project\": \"/blocked-project/:project\",\n    \"project\": \"/project/:project\",\n    \"project-detail-ref\": \"/project/:project/t/:ref\",\n    \"project-backlog\": \"/project/:project/backlog\",\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\",\n    \"project-kanban\": \"/project/:project/kanban\",\n    \"project-issues\": \"/project/:project/issues\",\n    \"project-epics\": \"/project/:project/epics\",\n    \"project-search\": \"/project/:project/search\",\n    \"project-timeline\": \"/project/:project/timeline\",\n    \"project-epics-detail\": \"/project/:project/epic/:ref\",\n    \"project-userstories-detail\": \"/project/:project/us/:ref\",\n    \"project-tasks-detail\": \"/project/:project/task/:ref\",\n    \"project-issues-detail\": \"/project/:project/issue/:ref\",\n    \"project-wiki\": \"/project/:project/wiki\",\n    \"project-wiki-list\": \"/project/:project/wiki-list\",\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\",\n    \"project-team\": \"/project/:project/team\",\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\",\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\",\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\",\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\",\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\",\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\",\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\",\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\",\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\",\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\",\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\",\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\",\n    \"project-admin-project-values-kanban-power-ups\": \"/project/:project/admin/project-values/kanban-power-ups\",\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\",\n    \"project-admin-roles\": \"/project/:project/admin/roles\",\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\",\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\",\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\",\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\",\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\",\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\",\n    \"user-settings-user-profile\": \"/user-settings/user-profile\",\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\",\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\",\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\",\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\",\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\",\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\",\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\",\n    \"notifications\": \"/notifications\"\n  };\n\n  init = function($log, $navurls) {\n    $log.debug(\"Initialize navigation urls\");\n    return $navurls.update(urls);\n  };\n\n  module.run([\"$log\", \"$tgNavUrls\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimationFrame, Autofocus, Capslock, CheckPermissionDirective, ClassPermissionDirective, DataPickerConfig, ProjectUrl, Qqueue, QueueModelTransformation, SelectedText, Svg, Template, ToggleCommentDirective, module, taiga,\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\", []);\n\n  DataPickerConfig = function($translate, $config, $auth) {\n    return {\n      get: function() {\n        var isRTL, lang, rtlLanguages, user;\n        user = $auth.getUser();\n        lang = (user != null ? user.lang : void 0) || $translate.preferredLanguage();\n        rtlLanguages = $config.get(\"rtlLanguages\", []);\n        isRTL = rtlLanguages.indexOf(lang) > -1;\n        return {\n          i18n: {\n            previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\n            nextMonth: $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\n            months: [$translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")],\n            weekdays: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")],\n            weekdaysShort: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")]\n          },\n          isRTL: isRTL,\n          firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\n          format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        };\n      }\n    };\n  };\n\n  module.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig]);\n\n  SelectedText = function($window, $document) {\n    var get;\n    get = function() {\n      if ($window.getSelection) {\n        return $window.getSelection().toString();\n      } else if ($document.selection) {\n        return $document.selection.createRange().text;\n      }\n      return \"\";\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText]);\n\n  CheckPermissionDirective = function(projectService) {\n    var link, render;\n    render = function($el, project, permission) {\n      if (project && permission) {\n        if (project.get('my_permissions').indexOf(permission) > -1) {\n          return $el.removeClass('hidden');\n        }\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var permission, unObserve, unwatch;\n      $el.addClass('hidden');\n      permission = $attrs.tgCheckPermission;\n      unwatch = $scope.$watch(function() {\n        return projectService.project;\n      }, function() {\n        if (!projectService.project) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unwatch();\n      });\n      unObserve = $attrs.$observe(\"tgCheckPermission\", function(permission) {\n        if (!permission) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unObserve();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CheckPermissionDirective.$inject = [\"tgProjectService\"];\n\n  module.directive(\"tgCheckPermission\", CheckPermissionDirective);\n\n  ClassPermissionDirective = function() {\n    var link, name;\n    name = \"tgClassPermission\";\n    link = function($scope, $el, $attrs) {\n      var checkPermissions, tgClassPermissionWatchAction, unbindWatcher;\n      checkPermissions = function(project, className, permission) {\n        var negation;\n        negation = permission[0] === \"!\";\n        if (negation) {\n          permission = permission.slice(1);\n        }\n        if (negation && project.my_permissions.indexOf(permission) === -1) {\n          return $el.addClass(className);\n        } else if (!negation && project.my_permissions.indexOf(permission) !== -1) {\n          return $el.addClass(className);\n        } else {\n          return $el.removeClass(className);\n        }\n      };\n      tgClassPermissionWatchAction = function(project) {\n        var className, classes, permission, results;\n        if (project) {\n          unbindWatcher();\n          classes = $scope.$eval($attrs[name]);\n          results = [];\n          for (className in classes) {\n            permission = classes[className];\n            results.push(checkPermissions(project, className, permission));\n          }\n          return results;\n        }\n      };\n      return unbindWatcher = $scope.$watch(\"project\", tgClassPermissionWatchAction);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgClassPermission\", ClassPermissionDirective);\n\n  AnimationFrame = function() {\n    var add, animationFrame, performAnimation, tail;\n    animationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n    performAnimation = (function(_this) {\n      return function(time) {\n        var fn;\n        fn = tail.shift();\n        fn();\n        if (tail.length) {\n          return animationFrame(performAnimation);\n        }\n      };\n    })(this);\n    tail = [];\n    add = function() {\n      var fn, i, len, results;\n      results = [];\n      for (i = 0, len = arguments.length; i < len; i++) {\n        fn = arguments[i];\n        tail.push(fn);\n        if (tail.length === 1) {\n          results.push(animationFrame(performAnimation));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n    return {\n      add: add\n    };\n  };\n\n  module.factory(\"animationFrame\", AnimationFrame);\n\n  ToggleCommentDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.find(\"textarea\").on(\"focus\", function() {\n        return $el.addClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleComment\", ToggleCommentDirective);\n\n  ProjectUrl = function($navurls) {\n    var get;\n    get = function(project) {\n      var ctx;\n      if (project.toJS) {\n        project = project.toJS();\n      }\n      ctx = {\n        project: project.slug\n      };\n      if (project.is_backlog_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-backlog\", ctx);\n      }\n      if (project.is_kanban_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-kanban\", ctx);\n      }\n      if (project.is_wiki_activated && project.my_permissions.indexOf(\"view_wiki_pages\") > -1) {\n        return $navurls.resolve(\"project-wiki\", ctx);\n      }\n      if (project.is_issues_activated && project.my_permissions.indexOf(\"view_issues\") > -1) {\n        return $navurls.resolve(\"project-issues\", ctx);\n      }\n      return $navurls.resolve(\"project\", ctx);\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl]);\n\n  Qqueue = function($q) {\n    var deferred, lastPromise, qqueue;\n    deferred = $q.defer();\n    deferred.resolve();\n    lastPromise = deferred.promise;\n    qqueue = {\n      bindAdd: (function(_this) {\n        return function(fn) {\n          return function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return lastPromise = lastPromise.then(function() {\n              return fn.apply(_this, args);\n            });\n          };\n        };\n      })(this),\n      add: (function(_this) {\n        return function(fn) {\n          if (!lastPromise) {\n            lastPromise = fn();\n          } else {\n            lastPromise = lastPromise.then(fn);\n          }\n          return qqueue;\n        };\n      })(this)\n    };\n    return qqueue;\n  };\n\n  module.factory(\"$tgQqueue\", [\"$q\", Qqueue]);\n\n  QueueModelTransformation = (function(superClass) {\n    extend(QueueModelTransformation, superClass);\n\n    QueueModelTransformation.$inject = [\"$tgQqueue\", \"$tgRepo\", \"$q\", \"$tgModel\"];\n\n    function QueueModelTransformation(qqueue1, repo, q, model1) {\n      this.qqueue = qqueue1;\n      this.repo = repo;\n      this.q = q;\n      this.model = model1;\n    }\n\n    QueueModelTransformation.prototype.setObject = function(scope1, prop) {\n      this.scope = scope1;\n      this.prop = prop;\n    };\n\n    QueueModelTransformation.prototype.clone = function() {\n      var attrs, model;\n      attrs = _.cloneDeep(this.scope[this.prop]._attrs);\n      model = this.model.make_model(this.scope[this.prop]._name, attrs);\n      return model;\n    };\n\n    QueueModelTransformation.prototype.getObj = function() {\n      return this.scope[this.prop];\n    };\n\n    QueueModelTransformation.prototype.save = function(transformation) {\n      var defered;\n      defered = this.q.defer();\n      this.qqueue.add((function(_this) {\n        return function() {\n          var clone, comment, modified, obj, success;\n          obj = _this.getObj();\n          comment = obj.comment;\n          obj.comment = '';\n          clone = _this.clone();\n          modified = _.omit(obj._modifiedAttrs, ['version']);\n          clone = _.assign(clone, modified);\n          transformation(clone);\n          if (comment.length) {\n            clone.comment = comment;\n          }\n          success = function() {\n            _this.scope[_this.prop] = clone;\n            return defered.resolve.apply(null, arguments);\n          };\n          return _this.repo.save(clone).then(success, defered.reject);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    return QueueModelTransformation;\n\n  })(taiga.Service);\n\n  module.service(\"$tgQueueModelTransformation\", QueueModelTransformation);\n\n  Template = function($templateCache) {\n    return {\n      get: (function(_this) {\n        return function(name, lodash) {\n          var tmp;\n          if (lodash == null) {\n            lodash = false;\n          }\n          tmp = $templateCache.get(name);\n          if (lodash) {\n            tmp = _.template(tmp);\n          }\n          return tmp;\n        };\n      })(this)\n    };\n  };\n\n  module.factory(\"$tgTemplate\", [\"$templateCache\", Template]);\n\n  Capslock = function() {\n    var template;\n    template = \"<tg-svg class=\\\"capslock\\\" ng-if=\\\"capslockIcon && iscapsLockActivated\\\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\";\n    return {\n      template: template\n    };\n  };\n\n  module.directive(\"tgCapslock\", [Capslock]);\n\n  Svg = function() {\n    var template;\n    template = \"<svg class=\\\"{{ 'icon ' + svgIcon }}\\\" style=\\\"fill: {{ svgFill }}\\\">\\n    <use xlink:href=\\\"\\\" ng-attr-xlink:href=\\\"{{ '#' + svgIcon }}\\\" ng-attr-href=\\\"{{ '#' + svgIcon }}\\\">\\n        <title ng-if=\\\"svgTitle\\\">{{svgTitle}}</title>\\n        <title ng-if=\\\"svgTitleTranslate\\\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\\n    </use>\\n</svg>\";\n    return {\n      scope: {\n        svgIcon: \"@\",\n        svgTitle: \"@\",\n        svgTitleTranslate: \"@\",\n        svgTitleTranslateValues: \"=\",\n        svgFill: \"=\"\n      },\n      template: template\n    };\n  };\n\n  module.directive(\"tgSvg\", [Svg]);\n\n  Autofocus = function($timeout, $parse, animationFrame) {\n    return {\n      restrict: 'A',\n      link: function($scope, $element, attrs) {\n        var model;\n        if (attrs.ngShow) {\n          model = $parse(attrs.ngShow);\n          return $scope.$watch(model, function(value) {\n            if (value === true) {\n              return $timeout(function() {\n                return $element[0].focus();\n              });\n            }\n          });\n        } else {\n          return $timeout(function() {\n            return $element[0].focus();\n          });\n        }\n      }\n    };\n  };\n\n  module.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus]);\n\n  module.directive('tgPreloadImage', function() {\n    var preload, spinner, template;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    template = \"<div>\\n    <ng-transclude></ng-transclude>\\n</div>\";\n    preload = function(src, onLoad) {\n      var image;\n      image = new Image();\n      image.onload = onLoad;\n      image.src = src;\n      return image;\n    };\n    return {\n      template: template,\n      transclude: true,\n      replace: true,\n      link: function(scope, el, attrs) {\n        var image, onLoad, timeout;\n        image = el.find('img:last');\n        timeout = null;\n        onLoad = function() {\n          el.find('.loading-spinner').remove();\n          image.show();\n          if (timeout) {\n            clearTimeout(timeout);\n            return timeout = null;\n          }\n        };\n        return attrs.$observe('preloadSrc', function(src) {\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          el.find('.loading-spinner').remove();\n          timeout = setTimeout(function() {\n            return el.prepend(spinner);\n          }, 200);\n          image.hide();\n          return preload(src, onLoad);\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailController, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaCommon\");\n\n  DetailController = (function() {\n    DetailController.$inject = ['$routeParams', '$tgRepo', \"tgProjectService\", \"$tgNavUrls\", \"$location\"];\n\n    function DetailController(params, repo, projectService, navurls, location) {\n      this.params = params;\n      this.repo = repo;\n      this.projectService = projectService;\n      this.navurls = navurls;\n      this.location = location;\n      this.repo.resolve({\n        pslug: this.params.pslug,\n        ref: this.params.ref\n      }).then((function(_this) {\n        return function(result) {\n          var url;\n          if (result.issue) {\n            url = _this.navurls.resolve('project-issues-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.task) {\n            url = _this.navurls.resolve('project-tasks-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.us) {\n            url = _this.navurls.resolve('project-userstories-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.epic) {\n            url = _this.navurls.resolve('project-epics-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.wikipage) {\n            url = _this.navurls.resolve('project-wiki-page', {\n              project: _this.projectService.project.get('slug'),\n              slug: _this.params.ref\n            });\n          }\n          return _this.location.path(url);\n        };\n      })(this));\n    }\n\n    return DetailController;\n\n  })();\n\n  module.controller(\"DetailController\", DetailController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaEpics\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EventsProvider, EventsService, bindMethods, module, startswith, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEvents\", []);\n\n  EventsService = (function() {\n    function EventsService(win, log, config, auth, liveAnnouncementService1, rootScope) {\n      this.win = win;\n      this.log = log;\n      this.config = config;\n      this.auth = auth;\n      this.liveAnnouncementService = liveAnnouncementService1;\n      this.rootScope = rootScope;\n      this.processMessage = bind(this.processMessage, this);\n      bindMethods(this);\n    }\n\n    EventsService.prototype.initialize = function(sessionId) {\n      this.sessionId = sessionId;\n      this.subscriptions = {};\n      this.connected = false;\n      this.error = false;\n      this.pendingMessages = [];\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = null;\n      if (this.win.WebSocket === void 0) {\n        return this.log.info(\"WebSockets not supported on your browser\");\n      }\n    };\n\n    EventsService.prototype.setupConnection = function() {\n      var loc, path, scheme, url;\n      this.stopExistingConnection();\n      url = this.config.get(\"eventsUrl\");\n      if (!url) {\n        return;\n      }\n      if (!startswith(url, \"ws:\") && !startswith(url, \"wss:\")) {\n        loc = this.win.location;\n        scheme = loc.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n        path = _.trimStart(url, \"/\");\n        url = scheme + \"//\" + loc.host + \"/\" + path;\n      }\n      this.error = false;\n      this.ws = new this.win.WebSocket(url);\n      this.ws.addEventListener(\"open\", this.onOpen);\n      this.ws.addEventListener(\"message\", this.onMessage);\n      this.ws.addEventListener(\"error\", this.onError);\n      return this.ws.addEventListener(\"close\", this.onClose);\n    };\n\n    EventsService.prototype.stopExistingConnection = function() {\n      if (this.ws === void 0) {\n        return;\n      }\n      this.ws.removeEventListener(\"open\", this.onOpen);\n      this.ws.removeEventListener(\"close\", this.onClose);\n      this.ws.removeEventListener(\"error\", this.onError);\n      this.ws.removeEventListener(\"message\", this.onMessage);\n      this.stopHeartBeatMessages();\n      this.ws.close();\n      return delete this.ws;\n    };\n\n    EventsService.prototype.notifications = function() {\n      return this.subscribe(null, 'notifications', (function(_this) {\n        return function(data) {\n          _this.liveAnnouncementService.show(data.title, data.desc);\n          return _this.rootScope.$digest();\n        };\n      })(this));\n    };\n\n    EventsService.prototype.liveNotifications = function() {\n      var subscribe, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      subscribe = (function(_this) {\n        return function() {\n          return _this.subscribe(null, \"live_notifications.\" + userId, function(data) {\n            var notification;\n            notification = new Notification(data.title, {\n              icon: \"/\" + window._version + \"/images/favicon.png\",\n              body: data.body,\n              tag: data.id\n            });\n            notification.onshow = function() {\n              if (data.timeout && data.timeout > 0) {\n                return setTimeout(function() {\n                  return notification.close();\n                }, data.timeout);\n              }\n            };\n            if (data.url) {\n              return notification.onclick = function() {\n                return window.open(data.url);\n              };\n            }\n          });\n        };\n      })(this);\n      if (!window.Notification) {\n        return this.log.info(\"This browser does not support desktop notification\");\n      } else if (Notification.permission === \"granted\") {\n        return subscribe();\n      } else if (Notification.permission !== 'denied') {\n        return Notification.requestPermission((function(_this) {\n          return function(permission) {\n            if (permission === \"granted\") {\n              return subscribe();\n            }\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.webNotifications = function() {\n      var randomTimeout, routingKey, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      routingKey = \"web_notifications.\" + userId;\n      randomTimeout = taiga.randomInt(700, 1000);\n      return this.subscribe(null, routingKey, (function(_this) {\n        return function(data) {\n          return _this.rootScope.$broadcast(\"notifications:new\");\n        };\n      })(this));\n    };\n\n    EventsService.prototype.startHeartBeatMessages = function() {\n      var heartbeatIntervalTime, maxMissedHeartbeats, reconnectTryInterval;\n      if (this.heartbeatInterval) {\n        return;\n      }\n      maxMissedHeartbeats = this.config.get(\"eventsMaxMissedHeartbeats\", 5);\n      heartbeatIntervalTime = this.config.get(\"eventsHeartbeatIntervalTime\", 60000);\n      reconnectTryInterval = this.config.get(\"eventsReconnectTryInterval\", 10000);\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = setInterval((function(_this) {\n        return function() {\n          var e;\n          try {\n            if (_this.missedHeartbeats >= maxMissedHeartbeats) {\n              throw new Error(\"Too many missed heartbeats PINGs.\");\n            }\n            _this.missedHeartbeats++;\n            _this.sendMessage({\n              cmd: \"ping\"\n            });\n            return _this.log.debug(\"HeartBeat send PING\");\n          } catch (error1) {\n            e = error1;\n            _this.log.error(\"HeartBeat error: \" + e.message);\n            return _this.setupConnection();\n          }\n        };\n      })(this), heartbeatIntervalTime);\n      return this.log.debug(\"HeartBeat enabled\");\n    };\n\n    EventsService.prototype.stopHeartBeatMessages = function() {\n      if (!this.heartbeatInterval) {\n        return;\n      }\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n      return this.log.debug(\"HeartBeat disabled\");\n    };\n\n    EventsService.prototype.processHeartBeatPongMessage = function(data) {\n      this.missedHeartbeats = 0;\n      return this.log.debug(\"HeartBeat received PONG\");\n    };\n\n    EventsService.prototype.serialize = function(message) {\n      if (_.isObject(message)) {\n        return JSON.stringify(message);\n      }\n      return message;\n    };\n\n    EventsService.prototype.sendMessage = function(message) {\n      var i, len, messages, msg, results;\n      this.pendingMessages.push(message);\n      if (!this.connected) {\n        return;\n      }\n      messages = _.map(this.pendingMessages, this.serialize);\n      this.pendingMessages = [];\n      results = [];\n      for (i = 0, len = messages.length; i < len; i++) {\n        msg = messages[i];\n        results.push(this.ws.send(msg));\n      }\n      return results;\n    };\n\n    EventsService.prototype.processMessage = function(data) {\n      var routingKey, subscription;\n      routingKey = data.routing_key;\n      if (this.subscriptions[routingKey] == null) {\n        return;\n      }\n      subscription = this.subscriptions[routingKey];\n      if (subscription.scope) {\n        return subscription.scope.$apply(function() {\n          return subscription.callback(data.data);\n        });\n      } else {\n        return subscription.callback(data.data);\n      }\n    };\n\n    EventsService.prototype.subscribe = function(scope, routingKey, callback, options) {\n      var message, subscription;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Subscribe to: \" + routingKey);\n      subscription = {\n        scope: scope,\n        routingKey: routingKey,\n        callback: callback\n      };\n      message = {\n        \"cmd\": \"subscribe\",\n        \"routing_key\": routingKey\n      };\n      if (options) {\n        message.options = options;\n      }\n      this.subscriptions[routingKey] = subscription;\n      this.sendMessage(message);\n      if (scope) {\n        return scope.$on(\"$destroy\", (function(_this) {\n          return function() {\n            return _this.unsubscribe(routingKey);\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.unsubscribe = function(routingKey) {\n      var message;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Unsubscribe from: \" + routingKey);\n      message = {\n        \"cmd\": \"unsubscribe\",\n        \"routing_key\": routingKey\n      };\n      return this.sendMessage(message);\n    };\n\n    EventsService.prototype.onOpen = function() {\n      var message, token;\n      this.connected = true;\n      this.log.debug(\"WebSocket connection opened\");\n      token = this.auth.getToken();\n      message = {\n        cmd: \"auth\",\n        data: {\n          token: token,\n          sessionId: this.sessionId\n        }\n      };\n      this.sendMessage(message);\n      this.startHeartBeatMessages();\n      this.notifications();\n      this.liveNotifications();\n      return this.webNotifications();\n    };\n\n    EventsService.prototype.onMessage = function(event) {\n      var data;\n      this.log.debug(\"WebSocket message received: \" + event.data);\n      data = JSON.parse(event.data);\n      if (data.cmd === \"pong\") {\n        return this.processHeartBeatPongMessage(data);\n      } else {\n        return this.processMessage(data);\n      }\n    };\n\n    EventsService.prototype.onError = function(error) {\n      this.log.error(\"WebSocket error: \" + error);\n      this.error = true;\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    EventsService.prototype.onClose = function() {\n      this.log.debug(\"WebSocket closed.\");\n      this.connected = false;\n      this.stopHeartBeatMessages();\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    return EventsService;\n\n  })();\n\n  EventsProvider = (function() {\n    function EventsProvider() {}\n\n    EventsProvider.prototype.setSessionId = function(sessionId) {\n      return this.sessionId = sessionId;\n    };\n\n    EventsProvider.prototype.$get = function($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) {\n      var service;\n      service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope);\n      service.initialize(this.sessionId);\n      return service;\n    };\n\n    EventsProvider.prototype.$get.$inject = [\"$window\", \"$log\", \"$tgConfig\", \"$tgAuth\", \"tgLiveAnnouncementService\", \"$rootScope\"];\n\n    return EventsProvider;\n\n  })();\n\n  module.provider(\"$tgEvents\", EventsProvider);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackDirective, bindOnce, debounce, groupBy, mixOf, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaFeedback\", []);\n\n  FeedbackDirective = function($lightboxService, $repo, $confirm, $loading, feedbackService) {\n    var directive, link;\n    link = function($scope, $el, $attrs) {\n      var form, openLightbox, submit, submitButton;\n      form = $el.find(\"form\").checksley();\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.create(\"feedback\", $scope.feedback);\n          promise.then(function(data) {\n            currentLoading.finish();\n            $lightboxService.close($el);\n            return $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\");\n          });\n          return promise.then(null, function() {\n            currentLoading.finish();\n            return $confirm.notify(\"error\");\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      openLightbox = function() {\n        $scope.feedback = {};\n        $lightboxService.open($el);\n        return $el.find(\"textarea\").focus();\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return openLightbox();\n    };\n    directive = {\n      link: link,\n      templateUrl: \"common/lightbox-feedback.html\",\n      scope: {}\n    };\n    return directive;\n  };\n\n  module.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIntegrations\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIssues\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaKanban\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaPlugins\", [\"ngRoute\"]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProject\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskAssignedToInlineEditionDirective, RelatedTaskCreateButtonDirective, RelatedTaskCreateFormDirective, RelatedTaskRowDirective, RelatedTasksDirective, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaRelatedTasks\", []);\n\n  RelatedTaskRowDirective = function($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) {\n    var link, templateEdit, templateView;\n    templateView = $template.get(\"task/related-task-row.html\", true);\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var renderEdit, renderView, saveTask;\n      saveTask = debounce(2000, function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.save(task);\n        promise.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"related-tasks:update\");\n          };\n        })(this));\n        promise.then(null, (function(_this) {\n          return function() {\n            currentLoading.finish();\n            $el.find('input').val(task.subject);\n            return $confirm.notify(\"error\");\n          };\n        })(this));\n        return promise;\n      });\n      renderEdit = function(task) {\n        if (this.childScope) {\n          this.childScope.$destroy();\n        }\n        this.childScope = $scope.$new();\n        $el.off();\n        $el.html($compile(templateEdit({\n          task: task\n        }))(childScope));\n        $el.find(\".task-name input\").val(task.subject);\n        $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 13) {\n            return saveTask($model.$modelValue).then(function() {\n              return renderView($model.$modelValue);\n            });\n          } else if (event.keyCode === 27) {\n            return renderView($model.$modelValue);\n          }\n        });\n        $el.on(\"click\", \".save-task\", function(event) {\n          return saveTask($model.$modelValue).then(function() {\n            return renderView($model.$modelValue);\n          });\n        });\n        return $el.on(\"click\", \".cancel-edit\", function(event) {\n          return renderView($model.$modelValue);\n        });\n      };\n      renderView = function(task) {\n        var perms;\n        perms = {\n          modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") !== -1,\n          delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") !== -1\n        };\n        $el.html($compile(templateView({\n          task: task,\n          perms: perms,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        }))($scope));\n        $el.on(\"click\", \".edit-task\", function() {\n          renderEdit($model.$modelValue);\n          return $el.find('input').focus().select();\n        });\n        return $el.on(\"click\", \".delete-task\", function(event) {\n          var message, title;\n          title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          task = $model.$modelValue;\n          message = task.subject;\n          return $confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = $repo.remove(task);\n            promise.then(function() {\n              askResponse.finish();\n              return $scope.$emit(\"related-tasks:delete\");\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          });\n        });\n      };\n      $scope.$watch($attrs.ngModel, function(val) {\n        if (!val) {\n          return;\n        }\n        return renderView(val);\n      });\n      $scope.$on(\"related-tasks:assigned-to-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:status-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective]);\n\n  RelatedTaskCreateFormDirective = function($repo, $compile, $confirm, $tgmodel, $loading, $analytics) {\n    var link, newTask;\n    newTask = {\n      subject: \"\",\n      assigned_to: null\n    };\n    link = function($scope, $el, $attrs) {\n      var close, createTask, render, reset;\n      createTask = function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        task.assigned_to = $scope.newTask.assigned_to;\n        task.status = $scope.newTask.status;\n        $scope.newTask.status = $scope.project.default_task_status;\n        $scope.newTask.assigned_to = null;\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.create(\"tasks\", task);\n        promise.then(function() {\n          $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1);\n          currentLoading.finish();\n          return $scope.$emit(\"related-tasks:add\");\n        });\n        promise.then(null, function() {\n          $el.find('input').val(task.subject);\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n        return promise;\n      };\n      close = function() {\n        $el.off();\n        return $scope.openNewRelatedTask = false;\n      };\n      reset = function() {\n        newTask = {\n          subject: \"\",\n          assigned_to: null\n        };\n        newTask[\"status\"] = $scope.project.default_task_status;\n        newTask[\"project\"] = $scope.project.id;\n        newTask[\"user_story\"] = $scope.us.id;\n        return $scope.newTask = $tgmodel.make_model(\"tasks\", newTask);\n      };\n      render = function() {\n        if ($scope.openNewRelatedTask) {\n          return;\n        }\n        $scope.openNewRelatedTask = true;\n        $el.on(\"submit\", \"form\", function(event) {\n          event.preventDefault();\n          return createTask(newTask).then(function() {\n            reset();\n            return $el.find('input').focus();\n          });\n        });\n        return $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 27) {\n            return $scope.$apply(function() {\n              return close();\n            });\n          }\n        });\n      };\n      $scope.save = function() {\n        return createTask(newTask).then(function() {\n          return close();\n        });\n      };\n      taiga.bindOnce($scope, \"us\", reset);\n      $scope.$on(\"related-tasks:show-form\", function() {\n        return $scope.$apply(render);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: 'task/related-task-create-form.html'\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\", \"$tgAnalytics\", RelatedTaskCreateFormDirective]);\n\n  RelatedTaskCreateButtonDirective = function($repo, $compile, $confirm, $tgmodel, $template) {\n    var link, template;\n    template = $template.get(\"common/components/add-button.html\", true);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch(\"project\", function(val) {\n        if (!val) {\n          return;\n        }\n        $el.off();\n        if ($scope.project.my_permissions.indexOf(\"add_task\") !== -1) {\n          $el.html($compile(template())($scope));\n        } else {\n          $el.html(\"\");\n        }\n        return $el.on(\"click\", \".add-button\", function(event) {\n          return $scope.$emit(\"related-tasks:add-new-clicked\");\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgTemplate\", RelatedTaskCreateButtonDirective]);\n\n  RelatedTasksDirective = function($repo, $rs, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _isEditable, _isVisible, loadTasks;\n      loadTasks = function() {\n        return $rs.tasks.list($scope.projectId, null, $scope.usId).then(function(result) {\n          return Immutable.fromJS(result.data);\n        });\n      };\n      _isVisible = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"view_tasks\") !== -1;\n        }\n        return false;\n      };\n      _isEditable = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.reorderTask = function(task, newIndex) {\n        return $rootscope.$broadcast('task:reorder', task, newIndex);\n      };\n      $scope.showAddTaks = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"add_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.showRelatedTasks = function() {\n        return _isVisible();\n      };\n      $scope.$on(\"related-tasks:add\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:reordered\", function() {\n        return loadTasks();\n      });\n      $scope.$on(\"related-tasks:delete\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:add-new-clicked\", function() {\n        return $scope.$broadcast(\"related-tasks:show-form\");\n      });\n      taiga.bindOnce($scope, \"us\", function(val) {\n        return loadTasks();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", RelatedTasksDirective]);\n\n  RelatedTaskAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\\n<figcaption><%- name %></figcaption>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task, updateRelatedTask;\n      updateRelatedTask = function(task) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = $scope.usersById[task.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".task-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $scope.$watch($attrs.tgRelatedTaskAssignedToInlineEdition, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n        return updateRelatedTask(task);\n      });\n      updateRelatedTask(task);\n      $el.on(\"click\", \".task-assignedto\", function(event) {\n        var onClose;\n        event.preventDefault();\n        event.stopPropagation();\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            task.assigned_to = assignedUsers.pop() || null;\n            if (autoSave) {\n              return $repo.save(task).then(function() {\n                $scope.$emit(\"related-tasks:assigned-to-changed\");\n                return updateRelatedTask(task);\n              });\n            }\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [task.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ResourcesService, initResources, initUrls, module, taiga, urls,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ResourcesService = (function(superClass) {\n    extend(ResourcesService, superClass);\n\n    function ResourcesService() {\n      return ResourcesService.__super__.constructor.apply(this, arguments);\n    }\n\n    return ResourcesService;\n\n  })(taiga.Service);\n\n  urls = {\n    \"auth\": \"/auth\",\n    \"auth-register\": \"/auth/register\",\n    \"invitations\": \"/invitations\",\n    \"refresh\": \"/auth/refresh\",\n    \"users\": \"/users\",\n    \"by_username\": \"/users/by_username\",\n    \"users-password-recovery\": \"/users/password_recovery\",\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\",\n    \"users-change-password\": \"/users/change_password\",\n    \"users-change-email\": \"/users/change_email\",\n    \"users-cancel-account\": \"/users/cancel\",\n    \"users-export\": \"/users/export\",\n    \"user-stats\": \"/users/%s/stats\",\n    \"user-liked\": \"/users/%s/liked\",\n    \"user-voted\": \"/users/%s/voted\",\n    \"user-watched\": \"/users/%s/watched\",\n    \"user-contacts\": \"/users/%s/contacts\",\n    \"user-me\": \"/users/me\",\n    \"user-send-verification-email\": \"/users/send_verification_email\",\n    \"permissions\": \"/permissions\",\n    \"notify-policies\": \"/notify-policies\",\n    \"notifications\": \"/web-notifications\",\n    \"user-project-settings\": \"/user-project-settings\",\n    \"user-storage\": \"/user-storage\",\n    \"memberships\": \"/memberships\",\n    \"bulk-create-memberships\": \"/memberships/bulk_create\",\n    \"roles\": \"/roles\",\n    \"permissions\": \"/permissions\",\n    \"resolver\": \"/resolver\",\n    \"projects\": \"/projects\",\n    \"project-templates\": \"/project-templates\",\n    \"project-modules\": \"/projects/%s/modules\",\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\",\n    \"project-like\": \"/projects/%s/like\",\n    \"project-unlike\": \"/projects/%s/unlike\",\n    \"project-watch\": \"/projects/%s/watch\",\n    \"project-unwatch\": \"/projects/%s/unwatch\",\n    \"project-contact\": \"contact\",\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\",\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\",\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\",\n    \"project-transfer-request\": \"/projects/%s/transfer_request\",\n    \"project-transfer-start\": \"/projects/%s/transfer_start\",\n    \"epic-statuses\": \"/epic-statuses\",\n    \"userstory-statuses\": \"/userstory-statuses\",\n    \"userstory-due-dates\": \"/userstory-due-dates\",\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\",\n    \"points\": \"/points\",\n    \"task-statuses\": \"/task-statuses\",\n    \"task-due-dates\": \"/task-due-dates\",\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\",\n    \"issue-statuses\": \"/issue-statuses\",\n    \"issue-due-dates\": \"/issue-due-dates\",\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\",\n    \"issue-types\": \"/issue-types\",\n    \"priorities\": \"/priorities\",\n    \"severities\": \"/severities\",\n    \"milestones\": \"/milestones\",\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\",\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\",\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\",\n    \"epics\": \"/epics\",\n    \"epic-upvote\": \"/epics/%s/upvote\",\n    \"epic-downvote\": \"/epics/%s/downvote\",\n    \"epic-watch\": \"/epics/%s/watch\",\n    \"epic-unwatch\": \"/epics/%s/unwatch\",\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\",\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\",\n    \"userstories\": \"/userstories\",\n    \"bulk-create-us\": \"/userstories/bulk_create\",\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\",\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\",\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\",\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\",\n    \"userstories-filters\": \"/userstories/filters_data\",\n    \"userstory-upvote\": \"/userstories/%s/upvote\",\n    \"userstory-downvote\": \"/userstories/%s/downvote\",\n    \"userstory-watch\": \"/userstories/%s/watch\",\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\",\n    \"tasks\": \"/tasks\",\n    \"bulk-create-tasks\": \"/tasks/bulk_create\",\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\",\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\",\n    \"task-upvote\": \"/tasks/%s/upvote\",\n    \"task-downvote\": \"/tasks/%s/downvote\",\n    \"task-watch\": \"/tasks/%s/watch\",\n    \"task-unwatch\": \"/tasks/%s/unwatch\",\n    \"task-filters\": \"/tasks/filters_data\",\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\",\n    \"issues\": \"/issues\",\n    \"bulk-create-issues\": \"/issues/bulk_create\",\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\",\n    \"issues-filters\": \"/issues/filters_data\",\n    \"issue-upvote\": \"/issues/%s/upvote\",\n    \"issue-downvote\": \"/issues/%s/downvote\",\n    \"issue-watch\": \"/issues/%s/watch\",\n    \"issue-unwatch\": \"/issues/%s/unwatch\",\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\",\n    \"swimlanes\": \"/swimlanes\",\n    \"swimlane-userstory-statuses\": \"/swimlane-userstory-statuses\",\n    \"wiki\": \"/wiki\",\n    \"wiki-restore\": \"/wiki/%s/restore\",\n    \"wiki-links\": \"/wiki-links\",\n    \"history/epic\": \"/history/epic\",\n    \"history/us\": \"/history/userstory\",\n    \"history/issue\": \"/history/issue\",\n    \"history/task\": \"/history/task\",\n    \"history/wiki\": \"/history/wiki\",\n    \"attachments/epic\": \"/epics/attachments\",\n    \"attachments/us\": \"/userstories/attachments\",\n    \"attachments/issue\": \"/issues/attachments\",\n    \"attachments/task\": \"/tasks/attachments\",\n    \"attachments/wiki_page\": \"/wiki/attachments\",\n    \"attachments/wikipage\": \"/wiki/attachments\",\n    \"custom-attributes/epic\": \"/epic-custom-attributes\",\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\",\n    \"custom-attributes/task\": \"/task-custom-attributes\",\n    \"custom-attributes/issue\": \"/issue-custom-attributes\",\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\",\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\",\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\",\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\",\n    \"webhooks\": \"/webhooks\",\n    \"webhooks-test\": \"/webhooks/%s/test\",\n    \"webhooklogs\": \"/webhooklogs\",\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\",\n    \"epics-csv\": \"/epics/csv?uuid=%s\",\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\",\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\",\n    \"issues-csv\": \"/issues/csv?uuid=%s\",\n    \"timeline-profile\": \"/timeline/profile\",\n    \"timeline-user\": \"/timeline/user\",\n    \"timeline-project\": \"/timeline/project\",\n    \"search\": \"/search\",\n    \"exporter\": \"/exporter\",\n    \"importer\": \"/importer/load_dump\",\n    \"feedback\": \"/feedback\",\n    \"locales\": \"/locales\",\n    \"applications\": \"/applications\",\n    \"application-tokens\": \"/application-tokens\",\n    \"stats-discover\": \"/stats/discover\",\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\",\n    \"importers-trello-authorize\": \"/importers/trello/authorize\",\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\",\n    \"importers-trello-list-users\": \"/importers/trello/list_users\",\n    \"importers-trello-import-project\": \"/importers/trello/import_project\",\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\",\n    \"importers-jira-authorize\": \"/importers/jira/authorize\",\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\",\n    \"importers-jira-list-users\": \"/importers/jira/list_users\",\n    \"importers-jira-import-project\": \"/importers/jira/import_project\",\n    \"importers-github-auth-url\": \"/importers/github/auth_url\",\n    \"importers-github-authorize\": \"/importers/github/authorize\",\n    \"importers-github-list-projects\": \"/importers/github/list_projects\",\n    \"importers-github-list-users\": \"/importers/github/list_users\",\n    \"importers-github-import-project\": \"/importers/github/import_project\",\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\",\n    \"importers-asana-authorize\": \"/importers/asana/authorize\",\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\",\n    \"importers-asana-list-users\": \"/importers/asana/list_users\",\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\n  };\n\n  initUrls = function($log, $urls) {\n    $log.debug(\"Initialize api urls\");\n    return $urls.update(urls);\n  };\n\n  initResources = function($log, $rs) {\n    var i, len, provider, providers, results;\n    $log.debug(\"Initialize resources\");\n    providers = _.toArray(arguments).slice(2);\n    results = [];\n    for (i = 0, len = providers.length; i < len; i++) {\n      provider = providers[i];\n      results.push(provider($rs));\n    }\n    return results;\n  };\n\n  module = angular.module(\"taigaResources\", [\"taigaBase\"]);\n\n  module.service(\"$tgResources\", ResourcesService);\n\n  module.run([\"$log\", \"$tgUrls\", initUrls]);\n\n  module.run([\"$log\", \"$tgResources\", \"$tgProjectsResourcesProvider\", \"$tgCustomAttributesResourcesProvider\", \"$tgCustomAttributesValuesResourcesProvider\", \"$tgMembershipsResourcesProvider\", \"$tgNotifyPoliciesResourcesProvider\", \"$tgInvitationsResourcesProvider\", \"$tgRolesResourcesProvider\", \"$tgUserProjectSettingsResourcesProvider\", \"$tgUserSettingsResourcesProvider\", \"$tgSprintsResourcesProvider\", \"$tgEpicsResourcesProvider\", \"$tgUserstoriesResourcesProvider\", \"$tgTasksResourcesProvider\", \"$tgIssuesResourcesProvider\", \"$tgSwimlanesResourcesProvider\", \"$tgWikiResourcesProvider\", \"$tgSearchResourcesProvider\", \"$tgMdRenderResourcesProvider\", \"$tgHistoryResourcesProvider\", \"$tgKanbanResourcesProvider\", \"$tgModulesResourcesProvider\", \"$tgWebhooksResourcesProvider\", \"$tgWebhookLogsResourcesProvider\", \"$tgLocalesResourcesProvider\", \"$tgUsersResourcesProvider\", initResources]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SearchBoxDirective, SearchController, SearchDirective, bindOnce, debounce, debounceLeading, groupBy, mixOf, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaSearch\", []);\n\n  SearchController = (function(superClass) {\n    extend(SearchController, superClass);\n\n    SearchController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function SearchController(scope1, repo, rs, params, q, location, appMetaService, navUrls, translate, errorHandlingService, projectService1) {\n      var description, loadSearchData, title;\n      this.scope = scope1;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.sectionName = \"Search\";\n      this.loadInitialData();\n      title = this.translate.instant(\"SEARCH.PAGE_TITLE\", {\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        projectDescription: this.scope.project.description\n      });\n      this.appMetaService.setAll(title, description);\n      this.scope.searchTerm = null;\n      loadSearchData = debounceLeading(100, (function(_this) {\n        return function(t) {\n          return _this.loadSearchData(t);\n        };\n      })(this));\n      bindOnce(this.scope, \"projectId\", (function(_this) {\n        return function(projectId) {\n          if (!_this.scope.searchResults && _this.scope.searchTerm) {\n            return _this.loadSearchData();\n          }\n        };\n      })(this));\n      this.scope.$watch(\"searchTerm\", (function(_this) {\n        return function(term) {\n          if (term !== void 0 && _this.scope.projectId) {\n            return _this.loadSearchData(term);\n          }\n        };\n      })(this));\n    }\n\n    SearchController.prototype.loadFilters = function() {\n      var defered;\n      defered = this.q.defer();\n      defered.resolve();\n      return defered.promise;\n    };\n\n    SearchController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.epicStatusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    SearchController.prototype.loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      this.scope.loading = true;\n      return this._loadSearchData(term).then((function(_this) {\n        return function(data) {\n          _this.scope.searchResults = data;\n          return _this.scope.loading = false;\n        };\n      })(this));\n    };\n\n    SearchController.prototype._loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      if (this._promise) {\n        this._promise.abort();\n      }\n      this._promise = this.rs.search[\"do\"](this.scope.projectId, term);\n      return this._promise;\n    };\n\n    SearchController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.scope.projectId = project.id;\n      return this.fillUsersAndRoles(project.members, project.roles);\n    };\n\n    return SearchController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"SearchController\", SearchController);\n\n  SearchBoxDirective = function(projectService, $lightboxService, $navurls, $location, $route) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var openLightbox, project, submit;\n      project = null;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, text, url;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          text = $el.find(\"#search-text\").val();\n          url = $navurls.resolve(\"project-search\", {\n            project: project.get(\"slug\")\n          });\n          return $scope.$apply(function() {\n            $lightboxService.close($el);\n            $location.path(url);\n            $location.search(\"text\", text).path(url);\n            return $route.reload();\n          });\n        };\n      })(this));\n      openLightbox = function() {\n        project = projectService.project;\n        return $lightboxService.open($el).then(function() {\n          return $el.find(\"#search-text\").focus();\n        });\n      };\n      $el.on(\"submit\", \"form\", submit);\n      return openLightbox();\n    };\n    return {\n      templateUrl: \"search/lightbox-search.html\",\n      link: link\n    };\n  };\n\n  SearchBoxDirective.$inject = [\"tgProjectService\", \"lightboxService\", \"$tgNavUrls\", \"$tgLocation\", \"$route\"];\n\n  module.directive(\"tgSearchBox\", SearchBoxDirective);\n\n  SearchDirective = function($log, $compile, $templatecache, $routeparams, $location, $analytics) {\n    var link, linkTable;\n    linkTable = function($scope, $el, $attrs, $ctrl) {\n      var activeSectionName, applyAutoTab, currentSearchResults, getActiveSection, markSectionTabActive, renderFilterTabs, renderTableContent, tabsDom, templates;\n      applyAutoTab = true;\n      activeSectionName = \"userstories\";\n      tabsDom = $el.find(\".search-filter\");\n      currentSearchResults = null;\n      getActiveSection = function(data) {\n        var i, len, maxVal, name, ref, selectedSection, value;\n        maxVal = 0;\n        selectedSection = {};\n        selectedSection.name = \"userstories\";\n        selectedSection.value = [];\n        if (!applyAutoTab) {\n          selectedSection.name = activeSectionName;\n          selectedSection.value = data[activeSectionName];\n          return selectedSection;\n        }\n        if (data) {\n          ref = [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"];\n          for (i = 0, len = ref.length; i < len; i++) {\n            name = ref[i];\n            value = data[name];\n            if (value.length > maxVal) {\n              maxVal = value.length;\n              selectedSection.name = name;\n              selectedSection.value = value;\n              break;\n            }\n          }\n        }\n        if (maxVal === 0) {\n          return selectedSection;\n        }\n        return selectedSection;\n      };\n      renderFilterTabs = function(data) {\n        var name, results, value;\n        results = [];\n        for (name in data) {\n          value = data[name];\n          tabsDom.find(\"li.\" + name).show();\n          results.push(tabsDom.find(\"li.\" + name + \" .num\").html(value.length));\n        }\n        return results;\n      };\n      markSectionTabActive = function(section) {\n        tabsDom.find(\"a.active\").removeClass(\"active\");\n        tabsDom.find(\"li.\" + section.name + \" a\").addClass(\"active\");\n        applyAutoTab = false;\n        return activeSectionName = section.name;\n      };\n      templates = {\n        epics: $templatecache.get(\"search-epics\"),\n        issues: $templatecache.get(\"search-issues\"),\n        tasks: $templatecache.get(\"search-tasks\"),\n        userstories: $templatecache.get(\"search-userstories\"),\n        wikipages: $templatecache.get(\"search-wikipages\")\n      };\n      renderTableContent = function(section) {\n        var element, oldElements, oldScope, scope, template;\n        oldElements = $el.find(\".search-result-table\").children();\n        oldScope = oldElements.scope();\n        if (oldScope) {\n          oldScope.$destroy();\n          oldElements.remove();\n        }\n        scope = $scope.$new();\n        scope[section.name] = section.value;\n        template = angular.element.parseHTML(trim(templates[section.name]));\n        element = $compile(template)(scope);\n        return $el.find(\".search-result-table\").html(element);\n      };\n      $scope.$watch(\"searchResults\", function(data) {\n        var activeSection;\n        currentSearchResults = data;\n        if (!currentSearchResults) {\n          return;\n        }\n        activeSection = getActiveSection(data);\n        renderFilterTabs(data);\n        renderTableContent(activeSection);\n        return markSectionTabActive(activeSection);\n      });\n      $scope.$watch(\"searchTerm\", function(searchTerm) {\n        if (searchTerm !== void 0) {\n          $location.search(\"text\", searchTerm);\n        }\n        return $analytics.trackPage($location.url(), \"Search\");\n      });\n      return $el.on(\"click\", \".search-filter li > a\", function(event) {\n        var section, sectionData, sectionName, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        sectionName = target.parent().data(\"name\");\n        sectionData = !currentSearchResults ? [] : currentSearchResults[sectionName];\n        section = {\n          name: sectionName,\n          value: sectionData\n        };\n        return $scope.$apply(function() {\n          renderTableContent(section);\n          return markSectionTabActive(section);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, searchText;\n      $ctrl = $el.controller();\n      linkTable($scope, $el, $attrs, $ctrl);\n      searchText = $routeparams.text;\n      return $scope.$watch(\"projectId\", function(projectId) {\n        if (projectId != null) {\n          return $scope.searchTerm = searchText;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\", SearchDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTaskboard\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTasks\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTeam\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserSettings\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserStories\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaWiki\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnalyticsService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  AnalyticsService = (function(superClass) {\n    extend(AnalyticsService, superClass);\n\n    AnalyticsService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function AnalyticsService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"analytics\", {});\n      this.accountId = conf.accountId;\n      this.pageEvent = conf.pageEvent || \"$routeChangeSuccess\";\n      this.trackRoutes = conf.trackRoutes || true;\n      this.ignoreFirstPageLoad = conf.ignoreFirstPageLoad || false;\n    }\n\n    AnalyticsService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Analytics: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectAnalytics();\n      this.win.ga(\"create\", this.accountId, \"auto\");\n      this.win.ga(\"require\", \"ec\");\n      this.win.ga(\"require\", \"displayfeatures\");\n      if (this.trackRoutes && (!this.ignoreFirstPageLoad)) {\n        this.win.ga(\"send\", \"pageview\", this.getUrl());\n      }\n      if (this.trackRoutes) {\n        this.rootscope.$on(this.pageEvent, (function(_this) {\n          return function() {\n            return _this.trackPage(_this.getUrl(), \"Taiga\");\n          };\n        })(this));\n      }\n      this.initialized = true;\n      return this.setUserId();\n    };\n\n    AnalyticsService.prototype.setUserId = function() {\n      var ref, ref1;\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga('set', 'userId', (ref = this.rootscope) != null ? (ref1 = ref.user) != null ? ref1.uuid : void 0 : void 0);\n    };\n\n    AnalyticsService.prototype.getUrl = function() {\n      return this.location.path();\n    };\n\n    AnalyticsService.prototype.injectAnalytics = function() {\n      var fn;\n      fn = (function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);});\n      return fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\");\n    };\n\n    AnalyticsService.prototype.trackPage = function(url, title) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      title = title || this.doc[0].title;\n      return this.win.ga(\"send\", \"pageview\", {\n        \"page\": url,\n        \"title\": title\n      });\n    };\n\n    AnalyticsService.prototype.trackEvent = function(category, action, label, value) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga(\"send\", \"event\", category, action, label, value);\n    };\n\n    AnalyticsService.prototype.ecViewPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'detail');\n      return this.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecClickPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'click');\n      return this.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecListPlans = function(arg, page) {\n      var i, len, plan, plans, position;\n      plans = arg[0];\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      position = 1;\n      for (i = 0, len = plans.length; i < len; i++) {\n        plan = plans[i];\n        this.win.ga('ec:addImpression', {\n          'id': plan.plan_id,\n          'name': plan.name,\n          'list': page,\n          'position': position\n        });\n        position++;\n      }\n      return this.trackEvent(\"ecommerce\", \"list-plans\");\n    };\n\n    AnalyticsService.prototype.ecAddToCart = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'add');\n      return this.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null);\n    };\n\n    AnalyticsService.prototype.ecConfirmChange = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 1\n      });\n      return this.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1);\n    };\n\n    AnalyticsService.prototype.ecPurchase = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 2\n      });\n      this.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2);\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'purchase', {\n        'id': plan_id,\n        'revenue': plan_price\n      });\n      return this.trackEvent('ecommerce', 'checkout', 'Plan checkout', null);\n    };\n\n    return AnalyticsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAnalytics\", AnalyticsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindScope, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  BindScope = function(config) {\n    var link;\n    if (!config.debugInfo) {\n      jQuery.fn.scope = function() {\n        return this.data('scope');\n      };\n    }\n    link = function($scope, $el) {\n      if (!config.debugInfo) {\n        return $el.data('scope', $scope).addClass('tg-scope');\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBindScope\", [\"$tgConfig\", BindScope]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CompileHtmlDirective;\n\n  CompileHtmlDirective = function($compile) {\n    var link;\n    link = function(scope, element, attrs) {\n      return scope.$watch(attrs.tgCompileHtml, function(newValue, oldValue) {\n        element.html(newValue);\n        return $compile(element.contents())(scope);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CompileHtmlDirective.$inject = [\"$compile\"];\n\n  angular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockButtonDirective, CreatedByDisplayDirective, DateRangeDirective, DateSelectorDirective, DeleteButtonDirective, ListItemAssignedtoDirective, ListItemEpicStatusDirective, ListItemIssueStatusDirective, ListItemPriorityDirective, ListItemSeverityDirective, ListItemTaskStatusDirective, ListItemTypeDirective, ListItemUsStatusDirective, SprintProgressBarDirective, TgMainTitleDirective, TgProgressBarDirective, UserDisplayDirective, bindOnce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  DateRangeDirective = function($translate) {\n    var link, renderRange;\n    renderRange = function($el, first, second) {\n      var endDate, prettyDate, startDate;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      startDate = moment(first).format(prettyDate);\n      endDate = moment(second).format(prettyDate);\n      return $el.html($translate.instant(\"TASKBOARD.TITLE_DATE_RANGE\", {\n        startDate: startDate,\n        endDate: endDate\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var first, ref, second;\n      ref = $attrs.tgDateRange.split(\",\"), first = ref[0], second = ref[1];\n      return bindOnce($scope, first, function(valFirst) {\n        return bindOnce($scope, second, function(valSecond) {\n          return renderRange($el, valFirst, valSecond);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective]);\n\n  DateSelectorDirective = function($rootscope, datePickerConfigService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var initialize, selectedDate, unbind;\n      selectedDate = null;\n      initialize = function() {\n        var datePickerConfig;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: $el[0]\n        });\n        return $el.picker = new Pikaday(datePickerConfig);\n      };\n      unbind = $rootscope.$on(\"$translateChangeEnd\", (function(_this) {\n        return function(ctx) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          return initialize();\n        };\n      })(this));\n      $attrs.$observe(\"pickerValue\", function(val) {\n        $el.val(val);\n        if (val != null) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          initialize();\n        }\n        return $el.picker.setDate(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        unbind();\n        return $el.picker.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective]);\n\n  SprintProgressBarDirective = function() {\n    var link, renderProgress;\n    renderProgress = function($el, percentage, visual_percentage) {\n      if ($el.hasClass(\".current-progress\")) {\n        return $el.css(\"width\", percentage + \"%\");\n      } else {\n        $el.find(\".current-progress\").css(\"width\", visual_percentage + \"%\");\n        return $el.find(\".number\").html(percentage + \" %\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.tgSprintProgressbar, function(sprint) {\n        var closedPoints, percentage, totalPoints, visual_percentage;\n        closedPoints = sprint.closed_points;\n        totalPoints = sprint.total_points;\n        percentage = 0;\n        if (totalPoints !== 0) {\n          percentage = Math.round(100 * (closedPoints / totalPoints));\n        }\n        visual_percentage = 0;\n        if (totalPoints !== 0) {\n          visual_percentage = Math.round(98 * (closedPoints / totalPoints));\n        }\n        return renderProgress($el, percentage, visual_percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintProgressbar\", SprintProgressBarDirective);\n\n  CreatedByDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.ngModel, function(model) {\n        var avatar, ref;\n        if (model != null) {\n          avatar = avatarService.getAvatar(model.owner_extra_info);\n          $scope.owner = model.owner_extra_info || {\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n          };\n          $scope.owner.avatar = avatar.url;\n          $scope.owner.bg = avatar.bg;\n          $scope.url = ((ref = $scope.owner) != null ? ref.is_active : void 0) ? $navUrls.resolve(\"user-profile\", {\n            username: $scope.owner.username\n          }) : \"\";\n          return $scope.date = moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"));\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      scope: true,\n      templateUrl: \"common/components/created-by.html\"\n    };\n  };\n\n  module.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", CreatedByDisplayDirective]);\n\n  UserDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var avatar, id;\n      id = $attrs.tgUserId;\n      $scope.user = $scope.usersById[id] || {\n        full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n      };\n      avatar = avatarService.getAvatar($scope.usersById[id] || null);\n      $scope.user.avatar = avatar.url;\n      $scope.user.bg = avatar.bg;\n      $scope.url = $scope.user.is_active ? $navUrls.resolve(\"user-profile\", {\n        username: $scope.user.username\n      }) : \"\";\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      scope: true,\n      templateUrl: \"common/components/user-display.html\"\n    };\n  };\n\n  module.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", UserDisplayDirective]);\n\n  BlockButtonDirective = function($rootscope, $loading, $template) {\n    var link, template;\n    template = $template.get(\"common/components/block-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        $scope.item = item;\n        if (isEditable()) {\n          return $el.find('.button-lock').addClass('editable');\n        }\n      });\n      $el.on(\"click\", \".item-block\", function(event) {\n        event.preventDefault();\n        return $rootscope.$broadcast(\"block\", $model.$modelValue);\n      });\n      $el.on(\"click\", \".item-unblock\", function(event) {\n        var currentLoading, finish;\n        event.preventDefault();\n        currentLoading = $loading().target($el.find(\".item-unblock\")).start();\n        finish = function() {\n          return currentLoading.finish();\n        };\n        return $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective]);\n\n  DeleteButtonDirective = function($log, $repo, $confirm, $location, $template) {\n    var link, template;\n    template = $template.get(\"common/components/delete-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.onDeleteGoToUrl) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-go-to-url set in scope.\");\n      }\n      if (!$attrs.onDeleteTitle) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-title set in scope.\");\n      }\n      $el.on(\"click\", \".button-delete\", function(event) {\n        var subtitle, title;\n        title = $attrs.onDeleteTitle;\n        subtitle = $model.$modelValue.subject;\n        return $confirm.askOnDelete(title, subtitle).then((function(_this) {\n          return function(askResponse) {\n            var promise;\n            promise = $repo.remove($model.$modelValue);\n            promise.then(function() {\n              var url;\n              askResponse.finish();\n              url = $scope.$eval($attrs.onDeleteGoToUrl);\n              return $location.path(url);\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          };\n        })(this));\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective]);\n\n  ListItemEpicStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var epic;\n      epic = $scope.$eval($attrs.tgListitemEpicStatus);\n      return bindOnce($scope, \"epicStatusById\", function(epicStatusById) {\n        return $el.html(epicStatusById[epic.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective);\n\n  ListItemUsStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var us;\n      us = $scope.$eval($attrs.tgListitemUsStatus);\n      return bindOnce($scope, \"usStatusById\", function(usStatusById) {\n        return $el.html(usStatusById[us.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective);\n\n  ListItemTaskStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var task;\n      task = $scope.$eval($attrs.tgListitemTaskStatus);\n      return bindOnce($scope, \"taskStatusById\", function(taskStatusById) {\n        return $el.html(taskStatusById[task.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective);\n\n  ListItemAssignedtoDirective = function($template, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, \"usersById\", function(usersById) {\n        var avatar, ctx, item, member;\n        item = $scope.$eval($attrs.tgListitemAssignedto);\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = usersById[item.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        return $el.html(template(ctx));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective]);\n\n  ListItemIssueStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var issue;\n      issue = $scope.$eval($attrs.tgListitemIssueStatus);\n      return bindOnce($scope, \"issueStatusById\", function(issueStatusById) {\n        return $el.html(issueStatusById[issue.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective);\n\n  ListItemTypeDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issueTypeById, issue) {\n        var domNode, type;\n        type = issueTypeById[issue.type];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", type.color);\n        return domNode.attr(\"title\", type.name);\n      };\n      bindOnce($scope, \"issueTypeById\", function(issueTypeById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemType);\n        return render(issueTypeById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemType, function(issue) {\n        return render($scope.issueTypeById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemType\", ListItemTypeDirective);\n\n  ListItemPriorityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(priorityById, issue) {\n        var domNode, priority;\n        priority = priorityById[issue.priority];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", priority.color);\n        return domNode.attr(\"title\", priority.name);\n      };\n      bindOnce($scope, \"priorityById\", function(priorityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemPriority);\n        return render(priorityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemPriority, function(issue) {\n        return render($scope.priorityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemPriority\", ListItemPriorityDirective);\n\n  ListItemSeverityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(severityById, issue) {\n        var domNode, severity;\n        severity = severityById[issue.severity];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", severity.color);\n        return domNode.attr(\"title\", severity.name);\n      };\n      bindOnce($scope, \"severityById\", function(severityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemSeverity);\n        return render(severityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemSeverity, function(issue) {\n        return render($scope.severityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemSeverity\", ListItemSeverityDirective);\n\n  TgProgressBarDirective = function($template) {\n    var link, render, template;\n    template = $template.get(\"common/components/progress-bar.html\", true);\n    render = function(el, percentage) {\n      return el.html(template({\n        percentage: percentage\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgProgressBar, function(percentage) {\n        percentage = _.max([0, percentage]);\n        percentage = _.min([100, percentage]);\n        return render($el, percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective]);\n\n  TgMainTitleDirective = function($translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $attrs.$observe(\"i18nSectionName\", function(i18nSectionName) {\n        return $scope.sectionName = i18nSectionName;\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/main-title.html\"\n    };\n  };\n\n  module.directive(\"tgMainTitle\", [\"$translate\", TgMainTitleDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfirmService, NOTIFICATION_MSG, bindMethods, cancelTimeout, debounce, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  NOTIFICATION_MSG = {\n    \"success\": {\n      title: \"NOTIFICATION.OK\",\n      message: \"NOTIFICATION.SAVED\"\n    },\n    \"error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    },\n    \"light-error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    }\n  };\n\n  ConfirmService = (function(superClass) {\n    extend(ConfirmService, superClass);\n\n    ConfirmService.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"];\n\n    function ConfirmService(q, lightboxService, loading, translate, filter) {\n      this.q = q;\n      this.lightboxService = lightboxService;\n      this.loading = loading;\n      this.translate = translate;\n      this.filter = filter;\n      bindMethods(this);\n    }\n\n    ConfirmService.prototype.hide = function(el) {\n      if (el) {\n        this.lightboxService.close(el);\n        return el.off(\".confirm-dialog\");\n      }\n    };\n\n    ConfirmService.prototype.ask = function(title, subtitle, message, lightboxSelector) {\n      var defered, el, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-ask\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title || '');\n      el.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      el.find(\".message\").html(message || '');\n      el.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(el);\n        };\n      })(this);\n      this.lightboxService.open(el, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askDelete = function(title, subtitle, message, lightboxSelector) {\n      var defered, lightbox, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-delete\";\n      }\n      defered = this.q.defer();\n      lightbox = angular.element(lightboxSelector);\n      lightbox.find(\".title\").text(title || '');\n      lightbox.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      lightbox.find(\".message\").html(message || '');\n      lightbox.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(lightbox);\n              }\n            }\n          });\n        };\n      })(this)));\n      lightbox.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(lightbox);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(lightbox);\n        };\n      })(this);\n      this.lightboxService.open(lightbox, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askOnDelete = function(title, message, subtitle) {\n      if (subtitle == null) {\n        subtitle = this.translate.instant(\"NOTIFICATION.ASK_DELETE\");\n      }\n      return this.askDelete(title, subtitle, message);\n    };\n\n    ConfirmService.prototype.askChoice = function(title, subtitle, choices, replacement, warning, lightboxSelector) {\n      var choicesField, defered, el;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-ask-choice\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title);\n      el.find(\".subtitle\").text(subtitle);\n      if (replacement) {\n        el.find(\".replacement\").text(replacement);\n      } else {\n        el.find(\".replacement\").remove();\n      }\n      if (warning) {\n        el.find(\".warning\").text(warning);\n      } else {\n        el.find(\".warning\").remove();\n      }\n      choicesField = el.find(\".choices\");\n      choicesField.html('');\n      _.each(choices, function(value, key) {\n        value = _.escape(value);\n        return choicesField.append(angular.element(\"<option value='\" + key + \"'>\" + value + \"</option>\"));\n      });\n      el.on(\"click.confirm-dialog\", \".js-confirm-ask\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            selected: choicesField.val(),\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel-ask\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.error = function(message) {\n      var defered, el;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-error\");\n      el.find(\".title\").html(message);\n      el.on(\"click.confirm-dialog\", \".button-green\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.success = function(title, message, icon, action) {\n      var defered, detailImage, el, svgContainer, useSVG;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-success\");\n      el.find(\"img\").remove();\n      el.find(\"svg\").remove();\n      if (icon) {\n        if (icon.type === \"img\") {\n          detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name);\n        } else if (icon.type === \"svg\") {\n          detailImage = document.createElement(\"div\");\n          taiga.addClass(detailImage, \"icon\");\n          taiga.addClass(detailImage, icon.name);\n          taiga.addClass(detailImage, \"lb-icon\");\n          svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n          useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n          useSVG.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + icon.name);\n          detailImage.appendChild(svgContainer).appendChild(useSVG);\n        }\n        if (detailImage) {\n          el.find('section').prepend(detailImage);\n        }\n      }\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (action) {\n        el.find(\".js-confirm\").html(action);\n        el.find(\".js-confirm\").attr('title', action);\n      }\n      el.on(\"click.confirm-dialog\", \".js-confirm\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.loader = function(title, message, spin) {\n      var el;\n      if (spin == null) {\n        spin = false;\n      }\n      el = angular.element(\".lightbox-generic-loading\");\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (spin) {\n        el.find(\".spin\").removeClass(\"hidden\");\n      }\n      return {\n        start: (function(_this) {\n          return function() {\n            return _this.lightboxService.open(el);\n          };\n        })(this),\n        stop: (function(_this) {\n          return function() {\n            return _this.lightboxService.close(el);\n          };\n        })(this),\n        update: (function(_this) {\n          return function(status, title, message, percent) {\n            if (title) {\n              el.find(\".title\").html(title);\n            }\n            if (message) {\n              el.find(\".message\").html(message);\n            }\n            if (percent) {\n              el.find(\".spin\").addClass(\"hidden\");\n              el.find(\".progress-bar-wrapper\").removeClass(\"hidden\");\n              el.find(\".progress-bar-wrapper > .bar\").width(percent + '%');\n              return el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%');\n            } else {\n              el.find(\".spin\").removeClass(\"hidden\");\n              return el.find(\".progress-bar-wrapper\").addClass(\"hidden\");\n            }\n          };\n        })(this)\n      };\n    };\n\n    ConfirmService.prototype.notify = function(type, message, title, time) {\n      var body, el, selector;\n      selector = \".notification-message-\" + type;\n      el = angular.element(selector);\n      if (el.hasClass(\"active\")) {\n        return;\n      }\n      if (title) {\n        el.find(\"h4\").html(title);\n      } else {\n        el.find(\"h4\").html(this.translate.instant(NOTIFICATION_MSG[type].title));\n      }\n      if (message) {\n        el.find(\"p\").html(message);\n      } else {\n        el.find(\"p\").html(this.translate.instant(NOTIFICATION_MSG[type].message));\n      }\n      body = angular.element(\"body\");\n      body.find(\".notification-message .notification-light\").removeClass('active').addClass('inactive');\n      body.find(selector).removeClass('inactive').addClass('active');\n      if (this.tsem) {\n        cancelTimeout(this.tsem);\n      }\n      if (!time) {\n        time = type === 'error' || type === 'light-error' ? 3500 : 1500;\n      }\n      this.tsem = timeout(time, (function(_this) {\n        return function() {\n          body.find(selector).removeClass('active').addClass('inactive').one('animationend', function() {\n            return $(this).removeClass('inactive');\n          });\n          return delete _this.tsem;\n        };\n      })(this));\n      return el.on(\"click\", \".icon-close, .close\", (function(_this) {\n        return function(event) {\n          return body.find(selector).removeClass('active').addClass('inactive');\n        };\n      })(this));\n    };\n\n    return ConfirmService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaCommon\");\n\n  module.service(\"$tgConfirm\", ConfirmService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, CustomAttributeValueDirective, CustomAttributesValuesController, CustomAttributesValuesDirective, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, RICHTEXT_TYPE, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindMethods, bindOnce, debounce, generateHash, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = this.taiga.bindMethods;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  generateHash = taiga.generateHash;\n\n  module = angular.module(\"taigaCommon\");\n\n  TEXT_TYPE = \"text\";\n\n  RICHTEXT_TYPE = \"url\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  CustomAttributesValuesController = (function(superClass) {\n    extend(CustomAttributesValuesController, superClass);\n\n    CustomAttributesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"];\n\n    function CustomAttributesValuesController(scope1, rootscope, repo, rs, confirm, q) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.q = q;\n      bindMethods(this);\n      this.type = null;\n      this.objectId = null;\n      this.projectId = null;\n      this.customAttributes = [];\n      this.customAttributesValues = null;\n    }\n\n    CustomAttributesValuesController.prototype.initialize = function(type, objectId) {\n      this.project = this.scope.project;\n      this.type = type;\n      this.objectId = objectId;\n      return this.projectId = this.scope.projectId;\n    };\n\n    CustomAttributesValuesController.prototype.loadCustomAttributesValues = function() {\n      if (!this.objectId) {\n        return this.customAttributesValues;\n      }\n      return this.rs.customAttributesValues[this.type].get(this.objectId).then((function(_this) {\n        return function(customAttributesValues) {\n          _this.customAttributes = _this.project[_this.type + \"_custom_attributes\"];\n          _this.customAttributesValues = customAttributesValues;\n          return customAttributesValues;\n        };\n      })(this));\n    };\n\n    CustomAttributesValuesController.prototype.getAttributeValue = function(attribute) {\n      var attributeValue;\n      attributeValue = _.clone(attribute, false);\n      attributeValue.value = this.customAttributesValues.attributes_values[attribute.id];\n      return attributeValue;\n    };\n\n    CustomAttributesValuesController.prototype.updateAttributeValue = function(attributeValue) {\n      var attributesValues, onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"custom-attributes-values:edit\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          _this.confirm.notify(\"error\");\n          return _this.q.reject();\n        };\n      })(this);\n      attributesValues = _.clone(this.customAttributesValues.attributes_values, true);\n      attributesValues[attributeValue.id] = attributeValue.value;\n      this.customAttributesValues.attributes_values = attributesValues;\n      this.customAttributesValues.id = this.objectId;\n      return this.repo.save(this.customAttributesValues).then(onSuccess, onError);\n    };\n\n    return CustomAttributesValuesController;\n\n  })(taiga.Controller);\n\n  CustomAttributesValuesDirective = function($templates, $storage) {\n    var collapsedHash, link, template, templateFn;\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true);\n    collapsedHash = function(type) {\n      return generateHash([\"custom-attributes-collapsed\", type]);\n    };\n    link = function($scope, $el, $attrs, $ctrls) {\n      var $ctrl, $model, hash;\n      $ctrl = $ctrls[0];\n      $model = $ctrls[1];\n      hash = collapsedHash($attrs.type);\n      $scope.collapsed = $storage.get(hash) || false;\n      bindOnce($scope, $attrs.ngModel, function(value) {\n        $ctrl.initialize($attrs.type, value.id);\n        return $ctrl.loadCustomAttributesValues();\n      });\n      $scope.toggleCollapse = function() {\n        $scope.collapsed = !$scope.collapsed;\n        return $storage.set(hash, $scope.collapsed);\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        requiredEditionPerm: $attrs.requiredEditionPerm\n      });\n    };\n    return {\n      require: [\"tgCustomAttributesValues\", \"ngModel\"],\n      controller: CustomAttributesValuesController,\n      controllerAs: \"ctrl\",\n      restrict: \"AE\",\n      scope: true,\n      link: link,\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\", CustomAttributesValuesDirective]);\n\n  CustomAttributeValueDirective = function($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) {\n    var link, template, templateEdit;\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true);\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true);\n    link = function($scope, $el, $attrs, $ctrl) {\n      var attributeValue, isEditable, prettyDate, render, setFocusAndSelectOnInputField, submit;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      render = function(attributeValue, edit) {\n        var ctx, datePickerConfig, editable, html, scope, value;\n        if (edit == null) {\n          edit = false;\n        }\n        if (attributeValue.type === DATE_TYPE && attributeValue.value) {\n          value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate);\n        }\n        if (attributeValue.type === NUMBER_TYPE && attributeValue.value) {\n          value = parseFloat(attributeValue.value);\n        } else {\n          value = attributeValue.value;\n        }\n        editable = isEditable();\n        ctx = {\n          id: attributeValue.id,\n          name: attributeValue.name,\n          description: attributeValue.description,\n          value: value,\n          type: attributeValue.type,\n          isEditable: editable\n        };\n        scope = $scope.$new();\n        scope.attributeHtml = wysiwygService.getHTML(\"\" + value);\n        scope.extra = attributeValue.extra;\n        scope.model = value;\n        scope.project = $scope.project;\n        if (editable && (edit || !value)) {\n          html = templateEdit(ctx);\n          html = $compile(html)(scope);\n          $el.html(html);\n          if (attributeValue.type === DATE_TYPE) {\n            datePickerConfig = datePickerConfigService.get();\n            _.merge(datePickerConfig, {\n              field: $el.find(\"input[name=value]\")[0],\n              onSelect: (function(_this) {\n                return function(date) {\n                  var selectedDate;\n                  return selectedDate = date;\n                };\n              })(this),\n              onOpen: (function(_this) {\n                return function() {\n                  if (typeof selectedDate !== \"undefined\" && selectedDate !== null) {\n                    return $el.picker.setDate(selectedDate);\n                  }\n                };\n              })(this)\n            });\n            return $el.picker = new Pikaday(datePickerConfig);\n          }\n        } else {\n          html = template(ctx);\n          html = $compile(html)(scope);\n          return $el.html(html);\n        }\n      };\n      isEditable = function() {\n        var permissions, requiredEditionPerm;\n        permissions = $scope.project.my_permissions;\n        requiredEditionPerm = $attrs.requiredEditionPerm;\n        return permissions.indexOf(requiredEditionPerm) > -1;\n      };\n      $scope.saveCustomRichText = (function(_this) {\n        return function(markdown, callback) {\n          attributeValue.value = markdown;\n          return $ctrl.updateAttributeValue(attributeValue).then(function() {\n            callback();\n            return render(attributeValue, false);\n          });\n        };\n      })(this);\n      $scope.cancelCustomRichText = (function(_this) {\n        return function() {\n          render(attributeValue, false);\n          return null;\n        };\n      })(this);\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, formControl;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          if (attributeValue.type === DROPDOWN_TYPE) {\n            formControl = $el.find(\"select[name='value']\");\n            attributeValue.value = formControl.val();\n          } else if (attributeValue.type === CHECKBOX_TYPE) {\n            formControl = $el.find(\"input[name=value]\");\n            attributeValue.value = formControl[0].checked;\n          } else {\n            formControl = $el.find(\"input[name=value], textarea[name='value']\");\n            attributeValue.value = formControl.val();\n            if (attributeValue.type === DATE_TYPE && moment(attributeValue.value, prettyDate).isValid()) {\n              attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\");\n            }\n            if (attributeValue.type === NUMBER_TYPE) {\n              attributeValue.value = parseFloat(attributeValue.value);\n            }\n          }\n          return $scope.$apply(function() {\n            return $ctrl.updateAttributeValue(attributeValue).then(function() {\n              return render(attributeValue, false);\n            });\n          });\n        };\n      })(this));\n      setFocusAndSelectOnInputField = function() {\n        return $el.find(\"input[name='value'], textarea[name='value']\").focus().select();\n      };\n      attributeValue = $scope.$eval($attrs.tgCustomAttributeValue);\n      if (attributeValue.value === null || attributeValue.value === void 0) {\n        attributeValue.value = \"\";\n      }\n      $scope.customAttributeValue = attributeValue;\n      render(attributeValue);\n      $el.on(\"click\", \".js-value-view-mode span a\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".js-value-view-mode\", function() {\n        if (!isEditable()) {\n          return;\n        }\n        if ($selectedText.get().length) {\n          return;\n        }\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"click\", \".js-edit-description\", function(event) {\n        event.preventDefault();\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"keyup\", \"input[name=value], textarea[name='value']\", function(event) {\n        if (event.keyCode === 13 && event.currentTarget.type !== \"textarea\") {\n          return submit(event);\n        } else if (event.keyCode === 27) {\n          return render(attributeValue, false);\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".js-save-description\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"^tgCustomAttributesValues\",\n      restrict: \"AE\"\n    };\n  };\n\n  module.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\", \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EmojisService, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  EmojisService = (function(superClass) {\n    extend(EmojisService, superClass);\n\n    EmojisService.$inject = [];\n\n    function EmojisService() {\n      this.replaceEmojiNameByHtmlImgs = bind(this.replaceEmojiNameByHtmlImgs, this);\n      this.replaceEmojiNameByImgs = bind(this.replaceEmojiNameByImgs, this);\n      this.replaceImgsByEmojiName = bind(this.replaceImgsByEmojiName, this);\n      this.getEmojiByName = bind(this.getEmojiByName, this);\n      this.getEmojiById = bind(this.getEmojiById, this);\n      this.searchByName = bind(this.searchByName, this);\n      this.emojis = _.map(taiga.emojis, function(it) {\n        it.image = (\"/\" + window._version + \"/emojis/\") + it.image;\n        return it;\n      });\n      this.emojisById = _.keyBy(this.emojis, 'id');\n      this.emojisByName = _.keyBy(this.emojis, 'name');\n    }\n\n    EmojisService.prototype.searchByName = function(name) {\n      return _.filter(this.emojis, function(it) {\n        return it.name.indexOf(name) !== -1;\n      });\n    };\n\n    EmojisService.prototype.getEmojiById = function(id) {\n      return this.emojisById[id];\n    };\n\n    EmojisService.prototype.getEmojiByName = function(name) {\n      return this.emojisByName[name];\n    };\n\n    EmojisService.prototype.replaceImgsByEmojiName = function(html) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g');\n        emoji = this.getEmojiById(emojiId);\n        html = html.replace(regexImgs, ':' + emoji.name + ':');\n      }\n      return html;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + emojiId + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '![alt](' + emoji.image + ')');\n        }\n      }\n      return text;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByHtmlImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />');\n        }\n      }\n      return text;\n    };\n\n    return EmojisService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgEmojis\", EmojisService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EstimationsService, LbUsEstimationDirective, UsEstimationDirective, groupBy, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaCommon\");\n\n  LbUsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.$watch($attrs.ngModel, function(us) {\n        var estimationProcess;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return $scope.$apply(function() {\n              return $model.$setViewValue(us);\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: false\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", LbUsEstimationDirective]);\n\n  UsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var save;\n      save = function(points) {\n        var onError, transform;\n        transform = $modelTransform.save((function(_this) {\n          return function(us) {\n            us.points = points;\n            return us;\n          };\n        })(this));\n        onError = (function(_this) {\n          return function() {\n            return $confirm.notify(\"error\");\n          };\n        })(this);\n        return transform.then(null, onError);\n      };\n      $scope.$watchCollection(function() {\n        return $model.$modelValue && $model.$modelValue.points;\n      }, function() {\n        var estimationProcess, us;\n        us = $model.$modelValue;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            estimationProcess.loading = roleId;\n            estimationProcess.render();\n            return save(points).then(function() {\n              estimationProcess.loading = false;\n              $rootScope.$broadcast(\"object:updated\");\n              return estimationProcess.render();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: estimationProcess.loading\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\", \"$tgConfirm\", UsEstimationDirective]);\n\n  EstimationsService = function($template, $repo, $confirm, $q, $qqueue) {\n    var EstimationProcess, create, pointsTemplate;\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true);\n    EstimationProcess = (function() {\n      function EstimationProcess($el1, us1, project1) {\n        this.$el = $el1;\n        this.us = us1;\n        this.project = project1;\n        this.bindClickEvents = bind(this.bindClickEvents, this);\n        this.isEditable = this.project.my_permissions.indexOf(\"modify_us\") !== -1;\n        this.roles = this.project.roles;\n        this.points = this.project.points;\n        this.loading = false;\n        this.pointsById = groupBy(this.points, function(x) {\n          return x.id;\n        });\n        this.onSelectedPointForRole = function(roleId, pointId) {};\n        this.render = function() {};\n      }\n\n      EstimationProcess.prototype.save = function(roleId, pointId) {\n        var deferred;\n        deferred = $q.defer();\n        $qqueue.add((function(_this) {\n          return function() {\n            var onError, onSuccess;\n            onSuccess = function() {\n              deferred.resolve();\n              return _this.render();\n            };\n            onError = function() {\n              $confirm.notify(\"error\");\n              _this.us.revert();\n              _this.render();\n              return deferred.reject();\n            };\n            return $repo.save(_this.us).then(onSuccess, onError);\n          };\n        })(this));\n        return deferred.promise;\n      };\n\n      EstimationProcess.prototype.calculateTotalPoints = function() {\n        var notNullValues, values;\n        values = _.map(this.us.points, (function(_this) {\n          return function(v, k) {\n            var ref;\n            return (ref = _this.pointsById[v]) != null ? ref.value : void 0;\n          };\n        })(this));\n        if (values.length === 0) {\n          return \"?\";\n        }\n        notNullValues = _.filter(values, function(v) {\n          return v != null;\n        });\n        if (notNullValues.length === 0) {\n          return \"?\";\n        }\n        return _.reduce(notNullValues, function(acc, num) {\n          return acc + num;\n        });\n      };\n\n      EstimationProcess.prototype.calculateRoles = function() {\n        var computableRoles, roles;\n        computableRoles = _.filter(this.project.roles, \"computable\");\n        roles = _.map(computableRoles, (function(_this) {\n          return function(role) {\n            var pointId, pointObj;\n            pointId = _this.us.points[role.id];\n            pointObj = _this.pointsById[pointId];\n            role = _.clone(role, true);\n            role.points = (pointObj != null) && (pointObj.name != null) ? pointObj.name : \"?\";\n            return role;\n          };\n        })(this));\n        return roles;\n      };\n\n      EstimationProcess.prototype.bindClickEvents = function() {\n        this.$el.on(\"click\", \".total.clickable\", (function(_this) {\n          return function(event) {\n            var roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            _this.renderPointsSelector(roleId, target);\n            target.siblings().removeClass('active');\n            return target.addClass('active');\n          };\n        })(this));\n        return this.$el.on(\"click\", \".point\", (function(_this) {\n          return function(event) {\n            var pointId, points, roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            pointId = target.data(\"point-id\");\n            _this.$el.find(\".popover\").popover().close();\n            points = _.clone(_this.us.points, true);\n            points[roleId] = pointId;\n            return _this.onSelectedPointForRole(roleId, pointId, points);\n          };\n        })(this));\n      };\n\n      EstimationProcess.prototype.renderPointsSelector = function(roleId, target) {\n        var horizontalList, html, maxPointLength, points, pop;\n        points = _.map(this.points, (function(_this) {\n          return function(point) {\n            point = _.clone(point, true);\n            point.selected = _this.us.points[roleId] === point.id ? false : true;\n            return point;\n          };\n        })(this));\n        maxPointLength = 5;\n        horizontalList = _.some(points, (function(_this) {\n          return function(point) {\n            return point.name.length > maxPointLength;\n          };\n        })(this));\n        html = pointsTemplate({\n          \"points\": points,\n          roleId: roleId,\n          horizontal: horizontalList\n        });\n        this.$el.find(\".popover\").popover().close();\n        this.$el.find(\".pop-points-open\").remove();\n        if (target != null) {\n          this.$el.find(target).append(html);\n        } else {\n          this.$el.append(html);\n        }\n        this.$el.find(\".pop-points-open\").popover().open(function() {\n          return $(this).removeClass(\"active\").closest(\"li\").removeClass(\"active\");\n        });\n        this.$el.find(\".pop-points-open\").show();\n        pop = this.$el.find(\".pop-points-open\");\n        if (pop.offset().top + pop.height() > document.body.clientHeight) {\n          return pop.addClass('pop-bottom');\n        }\n      };\n\n      return EstimationProcess;\n\n    })();\n    create = function($el, us, project) {\n      var estimationProcess;\n      $el.unbind(\"click\");\n      estimationProcess = new EstimationProcess($el, us, project);\n      if (estimationProcess.isEditable) {\n        estimationProcess.bindClickEvents();\n      }\n      return estimationProcess;\n    };\n    return {\n      create: create\n    };\n  };\n\n  module.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\", \"$q\", \"$tgQqueue\", EstimationsService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var byRefFilter, darkerFilter, defaultFilter, emojify, inArray, markdownToHTML, module, momentFormat, momentFromNow, sizeFormat, taiga, textToHTML, toMutableFilter, unslugify, yesNoFilter;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  defaultFilter = function() {\n    return function(value, defaultValue) {\n      if (value === [null, void 0]) {\n        return defaultValue;\n      }\n      return value;\n    };\n  };\n\n  module.filter(\"default\", defaultFilter);\n\n  yesNoFilter = function($translate) {\n    return function(value) {\n      if (value) {\n        return $translate.instant(\"COMMON.YES\");\n      }\n      return $translate.instant(\"COMMON.NO\");\n    };\n  };\n\n  module.filter(\"yesNo\", [\"$translate\", yesNoFilter]);\n\n  unslugify = function() {\n    return taiga.unslugify;\n  };\n\n  module.filter(\"unslugify\", unslugify);\n\n  momentFormat = function() {\n    return function(input, format) {\n      if (input) {\n        return moment(input).format(format);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFormat\", momentFormat);\n\n  momentFromNow = function() {\n    return function(input, without_suffix) {\n      if (input) {\n        return moment(input).fromNow(without_suffix || false);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFromNow\", momentFromNow);\n\n  sizeFormat = (function(_this) {\n    return function() {\n      return _this.taiga.sizeFormat;\n    };\n  })(this);\n\n  module.filter(\"sizeFormat\", sizeFormat);\n\n  toMutableFilter = function() {\n    var memoizedMutable, toMutable;\n    toMutable = function(js) {\n      return js.toJS();\n    };\n    memoizedMutable = _.memoize(toMutable);\n    return function(input) {\n      if (input instanceof Immutable.List) {\n        return memoizedMutable(input);\n      }\n      return input;\n    };\n  };\n\n  module.filter(\"toMutable\", toMutableFilter);\n\n  byRefFilter = function($filterFilter) {\n    return function(userstories, filter) {\n      var cleanRef;\n      if (filter != null ? filter.startsWith(\"#\") : void 0) {\n        cleanRef = filter.substr(1);\n        return _.filter(userstories, (function(_this) {\n          return function(us) {\n            return String(us.ref).startsWith(cleanRef);\n          };\n        })(this));\n      }\n      return $filterFilter(userstories, filter);\n    };\n  };\n\n  module.filter(\"byRef\", [\"filterFilter\", byRefFilter]);\n\n  darkerFilter = function() {\n    return function(color, luminosity) {\n      var black, c, i, j, len, newColor, ref, white;\n      if (!color) {\n        return 'transparent';\n      }\n      color = new String(color).replace(/[^0-9a-f]/gi, '');\n      if (color.length < 6) {\n        color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n      }\n      luminosity = luminosity || 0;\n      newColor = \"#\";\n      c = 0;\n      i = 0;\n      black = 0;\n      white = 255;\n      ref = [0, 1, 2];\n      for (j = 0, len = ref.length; j < len; j++) {\n        i = ref[j];\n        c = parseInt(color.substr(i * 2, 2), 16);\n        c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16);\n        newColor += (\"00\" + c).substr(c.length);\n      }\n      return newColor;\n    };\n  };\n\n  module.filter(\"darker\", darkerFilter);\n\n  markdownToHTML = function(wysiwigService) {\n    return function(input) {\n      if (input) {\n        return wysiwigService.getHTML(input);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML]);\n\n  inArray = function($filter) {\n    return function(list, arrayFilter, element) {\n      var filter;\n      if (arrayFilter) {\n        filter = $filter(\"filter\");\n        return filter(list, function(listItem) {\n          return arrayFilter.indexOf(listItem[element]) !== -1;\n        });\n      }\n    };\n  };\n\n  module.filter(\"inArray\", [\"$filter\", inArray]);\n\n  emojify = function($emojis) {\n    return function(input) {\n      if (input) {\n        return $emojis.replaceEmojiNameByHtmlImgs(_.escape(input));\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"emojify\", [\"$tgEmojis\", emojify]);\n\n  textToHTML = function($filter) {\n    return function(input) {\n      if (input) {\n        return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\");\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"textToHTML\", [\"$filter\", textToHTML]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockLightboxDirective, BlockingMessageInputDirective, CreateBulkUserstoriesDirective, CreateEditDirective, LightboxClose, LightboxDirective, LightboxKeyboardNavigationService, LightboxLeaveProjectWarningDirective, LightboxService, RelateToEpicLightboxDirective, SetDueDateDirective, bindOnce, debounce, debounceLeading, groupBy, module, normalizeString, sizeFormat, timeout, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  module = angular.module(\"taigaCommon\");\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  trim = this.taiga.trim;\n\n  normalizeString = this.taiga.normalizeString;\n\n  LightboxService = (function(superClass) {\n    extend(LightboxService, superClass);\n\n    function LightboxService(animationFrame, q, rootScope) {\n      this.animationFrame = animationFrame;\n      this.q = q;\n      this.rootScope = rootScope;\n    }\n\n    LightboxService.prototype.open = function($el, onClose, onEsc, ignoreEsc) {\n      var defered, docEl, lightboxContent;\n      this.onClose = onClose;\n      if (_.isString($el)) {\n        $el = $($el);\n      }\n      defered = this.q.defer();\n      lightboxContent = $el.children().not(\".close\");\n      lightboxContent.hide();\n      this.animationFrame.add(function() {\n        return $el.css('display', 'flex');\n      });\n      this.animationFrame.add(function() {\n        $el.addClass(\"open\");\n        return $el.one(\"transitionend\", (function(_this) {\n          return function() {\n            var firstField;\n            firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first();\n            if (firstField.length) {\n              return firstField.focus();\n            } else if (document.activeElement) {\n              return $(document.activeElement).blur();\n            }\n          };\n        })(this));\n      });\n      this.animationFrame.add((function(_this) {\n        return function() {\n          lightboxContent.show();\n          return defered.resolve();\n        };\n      })(this));\n      if (!ignoreEsc) {\n        docEl = angular.element(document);\n        docEl.on(\"keydown.lightbox\", (function(_this) {\n          return function(e) {\n            var code;\n            code = e.keyCode ? e.keyCode : e.which;\n            if (code === 27) {\n              if (onEsc) {\n                return _this.rootScope.$applyAsync(onEsc);\n              } else {\n                return _this.close($el);\n              }\n            }\n          };\n        })(this));\n      }\n      this.rootScope.$broadcast(\"lightbox:opened\");\n      return defered.promise;\n    };\n\n    LightboxService.prototype.close = function($el) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          var docEl, scope;\n          if (_.isString($el)) {\n            $el = $($el);\n          }\n          docEl = angular.element(document);\n          docEl.off(\".lightbox\");\n          docEl.off(\".keyboard-navigation\");\n          $el.addClass('close-started');\n          _this.animationFrame.add(function() {\n            $el.addClass('close');\n            return $el.one(\"transitionend\", function() {\n              $el.removeAttr('style');\n              $el.removeClass(\"open\").removeClass('close').removeClass('close-started');\n              if (_this.onClose) {\n                _this.rootScope.$apply(_this.onClose);\n              }\n              return resolve();\n            });\n          });\n          if ($el.hasClass(\"remove-on-close\")) {\n            scope = $el.data(\"scope\");\n            if (scope) {\n              scope.$destroy();\n            }\n            $el.remove();\n          }\n          return _this.rootScope.$broadcast(\"lightbox:closed\");\n        };\n      })(this));\n    };\n\n    LightboxService.prototype.getLightboxOpen = function() {\n      return $(\".lightbox.open:not(.close-started)\");\n    };\n\n    LightboxService.prototype.closeAll = function() {\n      var docEl, i, len, lightboxEl, ref, results;\n      docEl = angular.element(document);\n      ref = docEl.find(\".lightbox.open\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        lightboxEl = ref[i];\n        results.push(this.close($(lightboxEl)));\n      }\n      return results;\n    };\n\n    return LightboxService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService]);\n\n  LightboxKeyboardNavigationService = (function(superClass) {\n    extend(LightboxKeyboardNavigationService, superClass);\n\n    function LightboxKeyboardNavigationService() {\n      return LightboxKeyboardNavigationService.__super__.constructor.apply(this, arguments);\n    }\n\n    LightboxKeyboardNavigationService.prototype.stop = function() {\n      var docEl;\n      docEl = angular.element(document);\n      return docEl.off(\".keyboard-navigation\");\n    };\n\n    LightboxKeyboardNavigationService.prototype.dispatch = function($el, code) {\n      var activeElement, next, prev;\n      activeElement = $el.find(\".selected\");\n      if (code === 13) {\n        if ($el.find(\".user-list-single\").length === 1) {\n          return $el.find('.user-list-single:first').trigger(\"click\");\n        } else {\n          return activeElement.trigger(\"click\");\n        }\n      } else if (code === 40) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected');\n        } else {\n          next = activeElement.next('.user-list-single');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return next.addClass('selected');\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:last').addClass('selected');\n        } else {\n          prev = activeElement.prev('.user-list-single:not(\".is-active\")');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return prev.addClass('selected');\n          }\n        }\n      }\n    };\n\n    LightboxKeyboardNavigationService.prototype.init = function($el) {\n      var docEl;\n      this.stop();\n      docEl = angular.element(document);\n      return docEl.on(\"keydown.keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38 || code === 13) {\n            event.preventDefault();\n            return _this.dispatch($el, code);\n          }\n        };\n      })(this));\n    };\n\n    return LightboxKeyboardNavigationService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService);\n\n  LightboxDirective = function(lightboxService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$attrs.$attr.visible) {\n        return $el.on(\"click\", \".close\", function(event) {\n          event.preventDefault();\n          return lightboxService.close($el);\n        });\n      }\n    };\n    return {\n      restrict: \"C\",\n      link: link\n    };\n  };\n\n  module.directive(\"lightbox\", [\"lightboxService\", LightboxDirective]);\n\n  LightboxClose = function() {\n    var link, template;\n    template = \"<a class=\\\"close\\\" ng-click=\\\"onClose()\\\" href=\\\"\\\" title=\\\"{{'COMMON.CLOSE' | translate}}\\\">\\n    <tg-svg svg-icon=\\\"icon-close\\\"></tg-svg>\\n</a>\";\n    link = function(scope, elm, attrs) {};\n    return {\n      scope: {\n        onClose: '&'\n      },\n      link: link,\n      template: template\n    };\n  };\n\n  module.directive(\"tgLightboxClose\", [LightboxClose]);\n\n  BlockLightboxDirective = function($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var block, title, unblock;\n      title = $translate.instant($attrs.title);\n      $el.find(\"h2.title\").text(title);\n      unblock = (function(_this) {\n        return function(finishCallback) {\n          var transform;\n          transform = $modelTransform.save(function(item) {\n            item.is_blocked = false;\n            item.blocked_note = \"\";\n            return item;\n          });\n          transform.then(function() {\n            $confirm.notify(\"success\");\n            $rootscope.$broadcast(\"object:updated\");\n            return finishCallback();\n          });\n          transform.then(null, function() {\n            $confirm.notify(\"error\");\n            return item.revert();\n          });\n          transform[\"finally\"](function() {\n            return finishCallback();\n          });\n          return transform;\n        };\n      })(this);\n      block = function() {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\".js-block-item\")).start();\n        transform = $modelTransform.save(function(item) {\n          item.is_blocked = true;\n          item.blocked_note = $el.find(\".reason\").val();\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          return lightboxService.close($el);\n        });\n      };\n      $scope.$on(\"block\", function() {\n        $el.find(\".reason\").val($model.$modelValue.blocked_note);\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"unblock\", (function(_this) {\n        return function(event, model, finishCallback) {\n          return unblock(finishCallback);\n        };\n      })(this));\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $el.on(\"click\", \".js-block-item\", function(event) {\n        event.preventDefault();\n        return block();\n      });\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-block.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective]);\n\n  BlockingMessageInputDirective = function($log, $template, $compile) {\n    var link, template, templateFn;\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.watch) {\n        return $log.error(\"No watch attribute on tg-blocking-message-input directive\");\n      }\n      return $scope.$watch($attrs.watch, function(value) {\n        if (value === !void 0 && value === true) {\n          return $el.find(\".blocked-note\").removeClass(\"hidden\");\n        } else {\n          return $el.find(\".blocked-note\").addClass(\"hidden\");\n        }\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        ngmodel: $attrs.ngModel\n      });\n    };\n    return {\n      template: templateFn,\n      link: link,\n      require: \"ngModel\",\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective]);\n\n  CreateBulkUserstoriesDirective = function($repo, $rs, $rootscope, lightboxService, $loading, $model, $timeout, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, getCurrentStatus, submit, submitButton;\n      form = null;\n      $scope.displayStatusSelector = false;\n      getCurrentStatus = (function(_this) {\n        return function() {\n          return $scope.currentStatus = $scope.project.us_statuses.filter(function(status) {\n            return status.id === $scope[\"new\"].statusId;\n          }).pop();\n        };\n      })(this);\n      $scope.toggleStatus = function() {\n        return $scope.displayStatusSelector = !$scope.displayStatusSelector;\n      };\n      $scope.displayStatus = function() {\n        return $scope.displayStatusSelector = true;\n      };\n      $scope.hideStatus = function() {\n        $scope.displayStatusSelector = false;\n        return $scope.$apply();\n      };\n      $scope.setStatus = (function(_this) {\n        return function(status) {\n          $scope[\"new\"].statusId = status.id;\n          getCurrentStatus();\n          return $scope.displayStatusSelector = false;\n        };\n      })(this);\n      $scope.$on(\"usform:bulk\", function(ctx, projectId, status, swimlaneId) {\n        if (form) {\n          form.reset();\n        }\n        $scope[\"new\"] = {\n          projectId: projectId,\n          statusId: status,\n          bulk: \"\",\n          swimlaneId: swimlaneId,\n          us_position: 'bottom'\n        };\n        getCurrentStatus();\n        return lightboxService.open($el);\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise, swimlaneId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley({\n            onlyOneErrorElement: true\n          });\n          if (!form.validate()) {\n            return;\n          }\n          swimlaneId = null;\n          if ($scope.project.is_kanban_activated) {\n            swimlaneId = $scope[\"new\"].swimlane;\n            if (swimlaneId === void 0) {\n              swimlaneId = $scope.project.default_swimlane;\n            }\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userstories.bulkCreate($scope[\"new\"].projectId, $scope[\"new\"].statusId, $scope[\"new\"].bulk, swimlaneId);\n          promise.then(function(result) {\n            result = _.map(result.data, (function(_this) {\n              return function(x) {\n                return $model.make_model('userstories', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"usform:bulk:success\", result, $scope[\"new\"].us_position);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function(response) {\n            var text;\n            currentLoading.finish();\n            form.setErrors(response);\n            if (response.data.status) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response.data.swimlane_id) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response._error_message) {\n              return $confirm.notify(\"error\", response._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".js-submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", (function(_this) {\n        return function(event) {\n          var parentNodes, target;\n          target = angular.element(event.target);\n          parentNodes = _.filter(target.parents(), function(parent) {\n            return parent.className === \"bulk-status-selector-wrapper\";\n          });\n          if (!parentNodes.length) {\n            return $scope.hideStatus();\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkUserstories\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$tgModel\", \"$timeout\", \"$tgConfirm\", \"$translate\", CreateBulkUserstoriesDirective]);\n\n  LightboxLeaveProjectWarningDirective = function(lightboxService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      return lightboxService.open($el);\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective]);\n\n  SetDueDateDirective = function($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var prettyDate, remove, save;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      lightboxService.open($el);\n      if ($scope.object.due_date) {\n        $scope.new_due_date = moment($scope.object.due_date).format(prettyDate);\n      }\n      $el.on(\"click\", \".suggestion\", function(event) {\n        var quantity, target, unit, value;\n        target = angular.element(event.currentTarget);\n        quantity = target.data('quantity');\n        unit = target.data('unit');\n        value = moment().add(quantity, unit).format(prettyDate);\n        return $el.find(\".due-date\").val(value);\n      });\n      save = function() {\n        var currentLoading, new_due_date, transform;\n        currentLoading = $loading().target($el.find(\".submit-button\")).start();\n        if ($scope.notAutoSave) {\n          new_due_date = $('.due-date').val();\n          $scope.object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          $scope.$apply();\n          currentLoading.finish();\n          lightboxService.close($el);\n          return;\n        }\n        transform = $modelTransform.save(function(object) {\n          new_due_date = $('.due-date').val();\n          object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          return object;\n        });\n        transform.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          lightboxService.close($el);\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n      };\n      $el.on(\"click\", \".submit-button\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      remove = function() {\n        var message, subtitle, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\");\n        subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\");\n        message = moment($scope.object.due_date).format(prettyDate);\n        return $confirm.askOnDelete(title, message, subtitle).then(function(askResponse) {\n          askResponse.finish();\n          $('.due-date').val(null);\n          $scope.object.due_date_reason = null;\n          if ($scope.notAutoSave) {\n            $scope.object.due_date = null;\n            return lightboxService.close($el);\n          } else {\n            return save();\n          }\n        });\n      };\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-due-date.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$tgQueueModelTransformation\", SetDueDateDirective]);\n\n  groupBy = this.taiga.groupBy;\n\n  CreateEditDirective = function($log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate, $confirm, $q, attachmentsService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var addExistingToSprint, attachmentsToAdd, attachmentsToDelete, checkClose, close, createAttachments, deleteAttachments, docEl, form, getSchema, isDisabledExisting, mount, objType, render, resetAttachments, saveItem, schema, schemas, setStatus, sprintChangeConfirmAndSave, submit;\n      schema = null;\n      objType = null;\n      form = null;\n      attachmentsToAdd = Immutable.List();\n      attachmentsToDelete = Immutable.List();\n      schemas = {\n        us: {\n          objName: 'User Story',\n          model: 'userstories',\n          params: {\n            include_attachments: true,\n            include_tasks: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'US',\n              translationIDPlural: 'US',\n              statusList: _.sortBy(project.us_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              tags: [],\n              points: {},\n              swimlane: data.project.is_kanban_activated ? data.project.default_swimlane : null,\n              status: data.statusId ? data.statusId : data.project.default_us_status,\n              is_archived: false\n            };\n          }\n        },\n        task: {\n          objName: 'Task',\n          model: 'tasks',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'TASK',\n              translationIDPlural: 'TASKS',\n              statusList: _.sortBy(project.task_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              assigned_to: null,\n              tags: [],\n              milestone: data.sprintId,\n              status: data.project.default_task_status,\n              user_story: data.usId,\n              is_archived: false\n            };\n          }\n        },\n        issue: {\n          objName: 'Issue',\n          model: 'issues',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'ISSUE',\n              translationIDPlural: 'ISSUES',\n              project: project,\n              statusList: _.sortBy(project.issue_statuses, \"order\"),\n              typeById: groupBy(project.issue_types, function(x) {\n                return x.id;\n              }),\n              typeList: _.sortBy(project.issue_types, \"order\"),\n              severityById: groupBy(project.severities, function(x) {\n                return x.id;\n              }),\n              severityList: _.sortBy(project.severities, \"order\"),\n              priorityById: groupBy(project.priorities, function(x) {\n                return x.id;\n              }),\n              priorityList: _.sortBy(project.priorities, \"order\"),\n              milestonesById: groupBy(project.milestones, function(x) {\n                return x.id;\n              })\n            };\n          },\n          initialData: function(data) {\n            return {\n              assigned_to: null,\n              milestone: data.sprintId,\n              priority: data.project.default_priority,\n              project: data.project.id,\n              severity: data.project.default_severity,\n              status: data.project.default_issue_status,\n              subject: \"\",\n              tags: [],\n              type: data.project.default_issue_type\n            };\n          }\n        }\n      };\n      $scope.setMode = function(value) {\n        return $scope.mode = value;\n      };\n      $scope.$on(\"genericform:new\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'new';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      $scope.$on(\"genericform:new-or-existing\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'add-existing';\n        $scope.getOrCreate = true;\n        $scope.existingFilterText = '';\n        $rs[schema.model].listInAllProjects({\n          project: $scope.project.id\n        }, true).then(function(data) {\n          return $scope.existingItems = angular.copy(data);\n        });\n        return mount(params);\n      });\n      $scope.$on(\"genericform:edit\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'edit';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      getSchema = function(params) {\n        _.map(params, function(value, key) {\n          return $scope[key] = value;\n        });\n        if (!$scope.objType || !schemas[$scope.objType]) {\n          return $log.error(\"Invalid objType `\" + $scope.objType + \"` for `genericform` event\");\n        }\n        return schema = schemas[$scope.objType];\n      };\n      mount = function(params) {\n        $scope.objName = schema.objName;\n        if ($scope.mode === 'edit') {\n          $scope.obj = params.obj;\n          $scope.attachments = Immutable.fromJS(params.attachments);\n        } else {\n          $scope.obj = $model.make_model(schema.model, schema.initialData(params));\n          $scope.attachments = Immutable.List();\n        }\n        _.map(schema.data($scope.project), function(value, key) {\n          return $scope[key] = value;\n        });\n        if (params.objType === 'us') {\n          $scope.obj.us_position = 'bottom';\n        }\n        if (form) {\n          form.reset();\n        }\n        resetAttachments();\n        setStatus($scope.obj.status);\n        render();\n        $scope.lightboxOpen = true;\n        return lightboxService.open($el, null, null, true);\n      };\n      resetAttachments = function() {\n        attachmentsToAdd = Immutable.List();\n        return attachmentsToDelete = Immutable.List();\n      };\n      $scope.addAttachment = function(attachment) {\n        return attachmentsToAdd = attachmentsToAdd.push(attachment);\n      };\n      $scope.deleteAttachment = function(attachment) {\n        attachmentsToAdd = attachmentsToAdd.filter(function(it) {\n          return it.get('name') !== attachment.get('name');\n        });\n        if (attachment.get(\"id\")) {\n          return attachmentsToDelete = attachmentsToDelete.push(attachment);\n        }\n      };\n      $scope.addTag = function(tag, color) {\n        var inserted, itemtags, projectTags, tags, value;\n        value = trim(tag.toLowerCase());\n        tags = $scope.project.tags;\n        projectTags = $scope.project.tags_colors;\n        if (tags == null) {\n          tags = [];\n        }\n        if (projectTags == null) {\n          projectTags = {};\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        projectTags[tag] = color || null;\n        $scope.project.tags = tags;\n        itemtags = _.clone($scope.obj.tags);\n        inserted = _.find(itemtags, function(it) {\n          return it[0] === value;\n        });\n        if (!inserted) {\n          itemtags.push([value, color]);\n          return $scope.obj.tags = itemtags;\n        }\n      };\n      $scope.deleteTag = function(tag) {\n        var itemtags, tags, value;\n        value = trim(tag[0].toLowerCase());\n        tags = $scope.project.tags;\n        itemtags = _.clone($scope.obj.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === value;\n        });\n        $scope.obj.tags = itemtags;\n        return _.pull($scope.obj.tags, value);\n      };\n      createAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToAdd.toJS(), function(attachment) {\n          return attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType);\n        });\n        return $q.all(promises);\n      };\n      deleteAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToDelete.toJS(), function(attachment) {\n          return attachmentsService[\"delete\"]($scope.objType, attachment.id);\n        });\n        return $q.all(promises);\n      };\n      addExistingToSprint = function(item) {\n        var currentLoading, onError, onSuccess;\n        currentLoading = $loading().target($el.find(\".add-existing-button\")).start();\n        if (item.milestone) {\n          return sprintChangeConfirmAndSave(item);\n        } else {\n          onSuccess = function() {\n            close();\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            return close();\n          };\n          return saveItem(item, onSuccess, onError);\n        }\n      };\n      sprintChangeConfirmAndSave = function(item) {\n        var message, newSprintName, oldSprintName, title;\n        oldSprintName = $scope.milestonesById[item.milestone].name;\n        newSprintName = $scope.milestonesById[$scope.relatedObjectId].name;\n        title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\");\n        message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\", {\n          issue: item.subject,\n          oldSprintName: oldSprintName,\n          newSprintName: newSprintName\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            askResponse.finish();\n            lightboxService.closeAll();\n            $scope.lightboxOpen = false;\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          return saveItem(item, onSuccess, onError);\n        });\n      };\n      saveItem = function(item, onSuccess, onError) {\n        item.setAttr($scope.relatedField, $scope.relatedObjectId);\n        return $repo.save(item, true).then(onSuccess, onError);\n      };\n      isDisabledExisting = function(item) {\n        return item && item[$scope.relatedField] === $scope.relatedObjectId;\n      };\n      $scope.isDisabledExisting = function(selectedItem) {\n        return isDisabledExisting(selectedItem);\n      };\n      $scope.addExistingToSprint = function(selectedItem) {\n        return addExistingToSprint(selectedItem);\n      };\n      submit = debounce(2000, function(event) {\n        var broadcastEvent, currentLoading, prettyDate, promise, us_position;\n        form = $el.find(\"form\").checksley();\n        us_position = null;\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target($el.find(\"#submitButton\")).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        if ($scope.mode === 'new') {\n          us_position = $scope.obj.us_position;\n          delete $scope.obj.us_position;\n          promise = $repo.create(schema.model, $scope.obj);\n          broadcastEvent = $scope.objType + \"form:new:success\";\n        } else {\n          if ($scope.obj.due_date instanceof moment) {\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n            $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\");\n          }\n          promise = $repo.save($scope.obj, true);\n          broadcastEvent = $scope.objType + \"form:edit:success\";\n        }\n        promise.then(function(data) {\n          return deleteAttachments(data).then(function() {\n            return createAttachments(data).then(function() {\n              currentLoading.finish();\n              $confirm.notify(\"success\");\n              close();\n              if (data.ref) {\n                return $rs[schema.model].getByRef(data.project, data.ref, schema.params).then(function(obj) {\n                  return $rootScope.$broadcast(broadcastEvent, obj, us_position);\n                });\n              }\n            });\n          });\n        });\n        return promise.then(null, function(response) {\n          var text;\n          currentLoading.finish();\n          form.setErrors(response);\n          if (response.status) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response.swimlane) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response._error_message) {\n            return $confirm.notify(\"error\", response._error_message);\n          }\n        });\n      });\n      checkClose = function() {\n        if (!$scope.obj.isModified()) {\n          close();\n          return $scope.$apply(function() {\n            return $scope.obj.revert();\n          });\n        } else {\n          return $confirm.ask($translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\")).then(function(result) {\n            result.finish();\n            return close();\n          });\n        }\n      };\n      close = function() {\n        lightboxService.closeAll();\n        return $scope.lightboxOpen = false;\n      };\n      docEl = angular.element(document);\n      docEl.on(\"keydown.lightbox-create-edit\", function(event) {\n        var code;\n        if ($scope.lightboxOpen) {\n          event.stopPropagation();\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 27) {\n            return checkClose();\n          }\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.find('.close').on(\"click\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return checkClose();\n      });\n      $el.on(\"click\", \".status-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        setStatus(angular.element(event.currentTarget).data(\"status-id\"));\n        $scope.$apply();\n        $scope.$broadcast(\"status:changed\", $scope.obj.status);\n        return $el.find(\".pop-status\").popover().close();\n      });\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        $scope.obj.team_requirement = !$scope.obj.team_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        $scope.obj.client_requirement = !$scope.obj.client_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".is-blocked\", function(event) {\n        $scope.obj.is_blocked = !$scope.obj.is_blocked;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".iocaine\", function(event) {\n        $scope.obj.is_iocaine = !$scope.obj.is_iocaine;\n        $scope.$apply();\n        return $scope.$broadcast(\"isiocaine:changed\", $scope.obj);\n      });\n      $scope.isTeamRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.team_requirement : void 0;\n      };\n      $scope.isClientRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.client_requirement : void 0;\n      };\n      setStatus = function(id) {\n        $scope.obj.status = id;\n        $scope.selectedStatus = _.find($scope.statusList, function(item) {\n          return item.id === id;\n        });\n        return $scope.obj.is_closed = $scope.selectedStatus.is_closed;\n      };\n      return render = function(sprint) {\n        var compiledTemplate, template, templateScope;\n        template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\");\n        templateScope = $scope.$new();\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEdit\", [\"$log\", \"$tgRepo\", \"$tgModel\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$q\", \"tgAttachmentsService\", \"$tgTemplate\", \"$compile\", CreateEditDirective]);\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelateToEpicLightboxDirective = function($rootScope, $confirm, lightboxService, $tgCurrentUserService, tgResources, $tgResources, $epicsService, tgAnalytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var existingEpicForm, filterEpics, loadProjects, newEpicForm, selectProject, us;\n      us = null;\n      $scope.projects = null;\n      $scope.projectEpics = Immutable.List();\n      $scope.loading = false;\n      $scope.selectedProject = $scope.project.id;\n      newEpicForm = $el.find(\".new-epic-form\").checksley();\n      existingEpicForm = $el.find(\".existing-epic-form\").checksley();\n      loadProjects = function() {\n        if ($scope.projects === null) {\n          return $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\");\n        }\n      };\n      filterEpics = function(selectedProjectId, filterText) {\n        return tgResources.epics.listInAllProjects({\n          is_epics_activated: true,\n          project__blocked_code: 'null',\n          project: selectedProjectId,\n          q: filterText\n        }, true).then(function(data) {\n          var excludeIds, filteredData;\n          excludeIds = [];\n          if (us.epics) {\n            excludeIds = us.epics.map(function(epic) {\n              return epic.id;\n            });\n          }\n          filteredData = data.filter(function(epic) {\n            return excludeIds.indexOf(epic.get('id')) === -1;\n          });\n          return $scope.projectEpics = filteredData;\n        });\n      };\n      selectProject = function(selectedProjectId) {\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        return filterEpics(selectedProjectId, $scope.searchEpic);\n      };\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $scope.$on(\"relate-to-epic:add\", function(ctx, item) {\n        us = item;\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        loadProjects();\n        return filterEpics($scope.selectedProject, $scope.searchEpic).then(function() {\n          return lightboxService.open($el).then(function() {\n            return $el.find('input').focus;\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.selectProject = function(selectedProjectId) {\n        return selectProject(selectedProjectId);\n      };\n      $scope.onUpdateSearchEpic = debounceLeading(300, function() {\n        $scope.selectedEpic = null;\n        return filterEpics($scope.selectedProject, $scope.searchEpic);\n      });\n      $scope.saveRelatedEpic = function(selectedEpicId, onSavedRelatedEpic) {\n        var onError, onSuccess, usId;\n        if (!existingEpicForm.validate()) {\n          return;\n        }\n        $scope.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return existingEpicForm.setErrors(data);\n        };\n        onSuccess = function(data) {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        usId = us.id;\n        return tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(onSuccess, onError);\n      };\n      return $scope.createEpic = function(selectedProjectId, epicSubject) {\n        var onCreateEpic, onError, onSuccess;\n        if (!newEpicForm.validate()) {\n          return;\n        }\n        this.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return newEpicForm.setErrors(errors);\n        };\n        onSuccess = function() {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        onCreateEpic = function(epic) {\n          var epicId, usId;\n          epicId = epic.get('id');\n          usId = us.id;\n          return tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        };\n        return $epicsService.createEpic({\n          subject: epicSubject\n        }, null, selectedProjectId).then(onCreateEpic, onError);\n      };\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbRelatetoepic\", [\"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\", \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loaded, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  Loaded = function($parse, $timeout) {\n    return {\n      restrict: 'A',\n      compile: function($element, $attrs) {\n        var fn;\n        fn = $parse($attrs['tgLoaded']);\n        return function($scope, $element) {\n          var callback;\n          callback = function() {\n            return fn($scope, {\n              $event: {\n                target: $element\n              }\n            });\n          };\n          $timeout(function() {\n            return callback();\n          });\n          return null;\n        };\n      }\n    };\n  };\n\n  module.directive(\"tgLoaded\", ['$parse', '$timeout', Loaded]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loader, LoaderDirective, module, sizeFormat, taiga, timeout;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaCommon\");\n\n  LoaderDirective = function(tgLoader, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      tgLoader.onStart(function() {\n        $(document.body).addClass(\"loader-active\");\n        return $el.addClass(\"active\");\n      });\n      return tgLoader.onEnd(function() {\n        $(document.body).removeClass(\"loader-active\");\n        return $el.removeClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective]);\n\n  Loader = function($rootscope) {\n    var autoClose, config, lastResponseDate, open, pageLoaded, requestCount, start, startLoadTime;\n    config = {\n      minTime: 300\n    };\n    open = false;\n    startLoadTime = 0;\n    requestCount = 0;\n    lastResponseDate = 0;\n    pageLoaded = function(force) {\n      var diff, endTime, timeoutValue;\n      if (force == null) {\n        force = false;\n      }\n      if (startLoadTime) {\n        timeoutValue = 0;\n        if (!force) {\n          endTime = new Date().getTime();\n          diff = endTime - startLoadTime;\n          if (diff < config.minTime) {\n            timeoutValue = config.minTime - diff;\n          }\n        }\n        timeout(timeoutValue, function() {\n          $rootscope.$broadcast(\"loader:end\");\n          open = false;\n          return window.prerenderReady = true;\n        });\n      }\n      startLoadTime = 0;\n      requestCount = 0;\n      return lastResponseDate = 0;\n    };\n    autoClose = function() {\n      var intervalAuto;\n      return intervalAuto = setInterval((function() {\n        if (lastResponseDate && requestCount === 0) {\n          pageLoaded();\n          return clearInterval(intervalAuto);\n        }\n      }), 50);\n    };\n    start = function() {\n      startLoadTime = new Date().getTime();\n      $rootscope.$broadcast(\"loader:start\");\n      return open = true;\n    };\n    return {\n      pageLoaded: pageLoaded,\n      open: function() {\n        return open;\n      },\n      start: function(auto) {\n        if (auto == null) {\n          auto = false;\n        }\n        if (!open) {\n          start();\n          if (auto) {\n            return autoClose();\n          }\n        }\n      },\n      onStart: function(fn) {\n        return $rootscope.$on(\"loader:start\", fn);\n      },\n      onEnd: function(fn) {\n        return $rootscope.$on(\"loader:end\", fn);\n      },\n      logRequest: function() {\n        return requestCount++;\n      },\n      logResponse: function() {\n        if (requestCount > 0) {\n          requestCount--;\n        }\n        return lastResponseDate = new Date().getTime();\n      }\n    };\n  };\n\n  Loader.$inject = [\"$rootScope\"];\n\n  module.factory(\"tgLoader\", Loader);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadingDirective, TgLoadingService, module,\n    slice = [].slice;\n\n  module = angular.module(\"taigaCommon\");\n\n  TgLoadingService = function($compile) {\n    var spinner;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    return function() {\n      var service;\n      service = {\n        settings: {\n          target: null,\n          scope: null,\n          classes: [],\n          timeout: 0,\n          template: null\n        },\n        target: function(target) {\n          service.settings.target = target;\n          return service;\n        },\n        scope: function(scope) {\n          service.settings.scope = scope;\n          return service;\n        },\n        template: function(template) {\n          service.settings.template = template;\n          return service;\n        },\n        removeClasses: function() {\n          var classess;\n          classess = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          service.settings.classes = classess;\n          return service;\n        },\n        timeout: function(timeout) {\n          service.settings.timeout = timeout;\n          return service;\n        },\n        isLoading: function() {\n          var target;\n          target = service.settings.target;\n          return target.hasClass('loading');\n        },\n        start: function() {\n          var target, timeoutId;\n          target = service.settings.target;\n          service.settings.classes.map(function(className) {\n            return target.removeClass(className);\n          });\n          if (!target.hasClass('loading') && !service.settings.template) {\n            service.settings.template = target.html();\n          }\n          timeoutId = setTimeout((function() {\n            if (!target.hasClass('loading')) {\n              target.addClass('loading');\n              return target.html(spinner);\n            }\n          }), service.settings.timeout);\n          service.settings.timeoutId = timeoutId;\n          return service;\n        },\n        finish: function() {\n          var removeClasses, target, timeoutId;\n          target = service.settings.target;\n          timeoutId = service.settings.timeoutId;\n          if (timeoutId) {\n            clearTimeout(timeoutId);\n            removeClasses = service.settings.classes;\n            removeClasses.map(function(className) {\n              return service.settings.target.addClass(className);\n            });\n            target.html(service.settings.template);\n            target.removeClass('loading');\n            if (service.settings.scope) {\n              $compile(target.contents())(service.settings.scope);\n            }\n          }\n          return service;\n        }\n      };\n      return service;\n    };\n  };\n\n  TgLoadingService.$inject = [\"$compile\"];\n\n  module.factory(\"$tgLoading\", TgLoadingService);\n\n  LoadingDirective = function($loading) {\n    var link;\n    link = function($scope, $el, attr) {\n      var currentLoading, template;\n      currentLoading = null;\n      template = $el.html();\n      return $scope.$watch(attr.tgLoading, (function(_this) {\n        return function(showLoading) {\n          if (showLoading) {\n            return currentLoading = $loading().target($el).timeout(100).template(template).scope($scope).start();\n          } else if (currentLoading) {\n            return currentLoading.finish();\n          }\n        };\n      })(this));\n    };\n    return {\n      priority: 99999,\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskStatusDirective, UsStatusDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaCommon\");\n\n  UsStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a US and a popover to change it.\n    - tg-us-status: The user story\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\n        a.us-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'usStatusById' and 'project'.\n     */\n    var link, template;\n    template = $template.get(\"common/popover/popover-us-status.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, render, us;\n      $ctrl = $el.controller();\n      render = function(us) {\n        var usStatusById, usStatusDom, usStatusDomParent;\n        usStatusDomParent = $el.find(\".us-status\");\n        usStatusDom = $el.find(\".us-status .us-status-bind\");\n        usStatusById = $scope.usStatusById;\n        if (usStatusById[us.status]) {\n          usStatusDom.text(usStatusById[us.status].name);\n          return usStatusDomParent.css(\"color\", usStatusById[us.status].color);\n        }\n      };\n      $el.on(\"click\", \".us-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".popover-status\", debounce(2000, function(event) {\n        var statusElement, target, us;\n        event.preventDefault();\n        event.stopPropagation();\n        statusElement = $(event.currentTarget).find('#js-status-btn');\n        target = angular.element(statusElement);\n        us = $scope.$eval($attrs.tgUsStatus);\n        us.status = target.data(\"status-id\");\n        render(us);\n        $el.find(\".pop-status\").popover().close();\n        return $scope.$apply(function() {\n          return $repo.save(us).then(function() {\n            return $scope.$eval($attrs.onUpdate);\n          });\n        });\n      }));\n      $scope.$on(\"userstories:loaded\", function() {\n        return render($scope.$eval($attrs.tgUsStatus));\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      us = $scope.$eval($attrs.tgUsStatus);\n      render(us);\n      return bindOnce($scope, \"project\", function(project) {\n        var html;\n        html = template({\n          \"statuses\": project.us_statuses,\n          \"currentStatus\": us.status\n        });\n        $el.append(html);\n        if ($scope.project.my_permissions.indexOf(\"modify_us\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective]);\n\n  RelatedTaskStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a related task and a popover to change it.\n    - tg-related-task-status: The related task\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\n        a.task-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'taskStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateTaskStatus;\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true);\n    updateTaskStatus = function($el, task, taskStatusById) {\n      var taskStatusDom, taskStatusDomParent;\n      taskStatusDomParent = $el.find(\".us-status\");\n      taskStatusDom = $el.find(\".task-status .task-status-bind\");\n      if (taskStatusById[task.status]) {\n        taskStatusDom.text(taskStatusById[task.status].name);\n        return taskStatusDomParent.css('color', taskStatusById[task.status].color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task;\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskStatus);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $el.on(\"click\", \".task-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        task.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (autoSave) {\n          return $scope.$apply(function() {\n            return $repo.save(task).then(function() {\n              $scope.$eval($attrs.onUpdate);\n              return $scope.$emit(\"related-tasks:status-changed\");\n            });\n          });\n        }\n      }));\n      $scope.$watch($attrs.tgRelatedTaskStatus, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskStatus);\n        return updateTaskStatus($el, task, $scope.taskStatusById);\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.task_statuses\n        }));\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective]);\n\n  $.fn.popover = function() {\n    var $el, close, closeAll, closePopover, isVisible, open;\n    $el = this;\n    isVisible = (function(_this) {\n      return function() {\n        var docViewBottom, docViewLeft, docViewRight, docViewTop, docViewWidth, elemBottom, elemLeft, elemRight, elemTop, elemWidth;\n        $el.css({\n          \"display\": \"block\",\n          \"visibility\": \"hidden\"\n        });\n        docViewTop = $(window).scrollTop();\n        docViewBottom = docViewTop + $(window).height();\n        docViewWidth = $(window).width();\n        docViewRight = docViewWidth;\n        docViewLeft = 0;\n        elemTop = $el.offset().top;\n        elemBottom = elemTop + $el.height();\n        elemWidth = $el.width();\n        elemLeft = $el.offset().left;\n        elemRight = $el.offset().left + elemWidth;\n        $el.css({\n          \"display\": \"none\",\n          \"visibility\": \"visible\"\n        });\n        return (elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight);\n      };\n    })(this);\n    closePopover = (function(_this) {\n      return function(onClose) {\n        if (onClose) {\n          onClose.call($el);\n        }\n        $el.fadeOut(function() {\n          return $el.removeClass(\"active\").removeClass(\"fix\");\n        });\n        return $el.off(\"popup:close\");\n      };\n    })(this);\n    closeAll = (function(_this) {\n      return function() {\n        return $(\".popover.active\").each(function() {\n          return $(this).trigger(\"popup:close\");\n        });\n      };\n    })(this);\n    open = (function(_this) {\n      return function(onClose) {\n        if ($el.hasClass(\"active\")) {\n          return close();\n        } else {\n          closeAll();\n          if (!isVisible()) {\n            $el.addClass(\"fix\");\n          }\n          $el.fadeIn(function() {\n            $el.addClass(\"active\");\n            $(document.body).off(\"popover\");\n            return $(document.body).one(\"click.popover\", function() {\n              return closeAll();\n            });\n          });\n          return $el.on(\"popup:close\", function(e) {\n            return closePopover(onClose);\n          });\n        }\n      };\n    })(this);\n    close = (function(_this) {\n      return function() {\n        return $el.trigger(\"popup:close\");\n      };\n    })(this);\n    return {\n      open: open,\n      close: close,\n      closeAll: closeAll\n    };\n  };\n\n  taiga.globalPopover = function(target, list, options, cb) {\n    var close, createSvg, elementPosition, followElement, ul, wrapper;\n    if (options == null) {\n      options = {};\n    }\n    wrapper = document.createElement('div');\n    wrapper.classList.add('popover', 'global-popover');\n    ul = document.createElement('ul');\n    createSvg = function(icon) {\n      var attrHref, svg, tgSvg, use, xlink;\n      tgSvg = document.createElement('tg-svg');\n      svg = document.createElement('svg');\n      use = document.createElement('use');\n      xlink = document.createAttribute('xlink:href');\n      xlink.value = '#' + icon;\n      attrHref = document.createAttribute('attr-href');\n      attrHref.value = '#' + icon;\n      use.setAttributeNode(xlink);\n      use.setAttributeNode(attrHref);\n      svg.classList.add('icon');\n      svg.appendChild(use);\n      tgSvg.appendChild(svg);\n      return tgSvg;\n    };\n    close = function() {\n      $(wrapper).popover().close();\n      return $(wrapper).remove();\n    };\n    followElement = function() {\n      elementPosition();\n      return requestAnimationFrame(followElement);\n    };\n    elementPosition = function() {\n      var left, rect, top, width;\n      rect = target.getBoundingClientRect();\n      top = rect.top + rect.height;\n      width = options.width || 170;\n      left = rect.right - width;\n      if (options.paddingTop) {\n        top = top + options.paddingTop;\n      }\n      if (options.paddingLeft) {\n        left = left + options.paddingLeft;\n      }\n      wrapper.style.top = top + 'px';\n      wrapper.style.left = left + 'px';\n      return wrapper.style.width = width + 'px';\n    };\n    elementPosition();\n    followElement();\n    document.addEventListener('scroll', close, true);\n    list.forEach(function(option) {\n      var button, li;\n      li = document.createElement('li');\n      button = document.createElement('button');\n      button.addEventListener('click', option.event);\n      if (option.icon) {\n        button.innerHTML = createSvg(option.icon).innerHTML;\n      }\n      button.appendChild(document.createTextNode(option.text));\n      li.appendChild(button);\n      return ul.appendChild(li);\n    });\n    wrapper.appendChild(ul);\n    document.body.appendChild(wrapper);\n    $(wrapper).popover().open(function() {\n      document.removeEventListener('scroll', close);\n      cb();\n      if (wrapper) {\n        return setTimeout(function() {\n          return $(wrapper).remove();\n        }, 2000);\n      }\n    });\n    return (function(_this) {\n      return function() {\n        return $(wrapper).popover().close();\n      };\n    })(this);\n  };\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExceptionHandlerFactory, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  ExceptionHandlerFactory = function($log, config) {\n    var ravenConfig;\n    this.config = config;\n    ravenConfig = this.config.get(\"ravenConfig\", null);\n    if (ravenConfig) {\n      $log.debug(\"Using the RavenJS exception handler.\");\n      Raven.config(ravenConfig).install();\n      return function(exception, cause) {\n        $log.error.apply($log, arguments);\n        return Raven.captureException(exception);\n      };\n    } else {\n      $log.debug(\"Using the default logging exception handler.\");\n      return function(exception, cause) {\n        return $log.error.apply($log, arguments);\n      };\n    }\n  };\n\n  module.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SectionsService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaCommon\");\n\n  SectionsService = (function(superClass) {\n    var SECTIONS;\n\n    extend(SectionsService, superClass);\n\n    SectionsService.$inject = [\"$translate\", \"tgCurrentUserService\"];\n\n    SECTIONS = {\n      1: {\n        id: 1,\n        title: 'TIMELINE',\n        path: 'timeline',\n        enabled: ''\n      },\n      2: {\n        id: 2,\n        title: 'EPICS',\n        path: 'epics',\n        enabled: 'is_epics_activated'\n      },\n      3: {\n        id: 3,\n        title: 'BACKLOG',\n        path: 'backlog',\n        enabled: 'is_backlog_activated'\n      },\n      4: {\n        id: 4,\n        title: 'KANBAN',\n        path: 'kanban',\n        enabled: 'is_kanban_activated'\n      },\n      5: {\n        id: 5,\n        title: 'ISSUES',\n        path: 'issues',\n        enabled: 'is_issues_activated'\n      },\n      6: {\n        id: 6,\n        title: 'WIKI',\n        path: 'wiki',\n        enabled: 'is_wiki_activated'\n      }\n    };\n\n    function SectionsService(translate, currentUserService) {\n      this.translate = translate;\n      this.currentUserService = currentUserService;\n      SectionsService.__super__.constructor.call(this);\n      _.map(SECTIONS, (function(_this) {\n        return function(x) {\n          return x.title = _this.translate.instant(\"PROJECT.SECTION.\" + x.title);\n        };\n      })(this));\n    }\n\n    SectionsService.prototype.list = function() {\n      return SECTIONS;\n    };\n\n    SectionsService.prototype.getPath = function(projectSlug, sectionId) {\n      var defaultHomePage, project, projects, ref, section;\n      defaultHomePage = \"timeline\";\n      projects = (ref = this.currentUserService.projects) != null ? ref.get(\"all\") : void 0;\n      if (!projects) {\n        return defaultHomePage;\n      }\n      project = projects.find(function(p) {\n        return p.get('slug') === projectSlug;\n      });\n      if (!project) {\n        return defaultHomePage;\n      }\n      if (!sectionId) {\n        sectionId = project.get('my_homepage');\n      }\n      section = _.find(SECTIONS, {\n        \"id\": sectionId\n      });\n      if (!section || (project != null ? project.get(section.enabled) : void 0) === !true) {\n        return defaultHomePage;\n      }\n      return section.path;\n    };\n\n    return SectionsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgSections\", SectionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagManagerService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagManagerService = (function(superClass) {\n    extend(TagManagerService, superClass);\n\n    TagManagerService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function TagManagerService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"tagManager\", {});\n      this.accountId = conf.accountId;\n    }\n\n    TagManagerService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Tag Manager: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectTagManager();\n      return this.initialized = true;\n    };\n\n    TagManagerService.prototype.injectTagManager = function() {\n      var fn;\n      fn = (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\n              f.parentNode.insertBefore(j,f);});\n      return fn(window, document, \"script\", \"dataLayer\", this.accountId);\n    };\n\n    return TagManagerService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgTagManager\", TagManagerService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorizeTagsBacklogDirective, LbTagLineDirective, TagsDirective, bindOnce, module, taiga, trim,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagsDirective = function() {\n    var formatter, link, parser;\n    formatter = function(v) {\n      if (_.isArray(v)) {\n        return v.join(\", \");\n      }\n      return \"\";\n    };\n    parser = function(v) {\n      var result;\n      if (!v) {\n        return [];\n      }\n      result = _(v.split(\",\")).map(function(x) {\n        return _.trim(x);\n      });\n      return result.value();\n    };\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl.$formatters.push(formatter);\n      $ctrl.$parsers.push(parser);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      require: \"ngModel\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgTags\", TagsDirective);\n\n  ColorizeTagsBacklogDirective = function($emojis) {\n    var link, template;\n    template = _.template(\"<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] !== null) { %>\\n    <div class=\\\"tag\\\" style=\\\"background: <%- tag[1] %>\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\\n<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] === null) { %>\\n    <div class=\\\"tag\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\");\n    link = function($scope, $el, $attrs, $ctrl) {\n      var render;\n      render = function(tags) {\n        var html;\n        html = template({\n          tags: tags,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        });\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.tgColorizeBacklogTags, function(tags) {\n        if (tags != null) {\n          return render(tags);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective]);\n\n  LbTagLineDirective = function($rs, $template, $compile) {\n    var COMMA_KEY, ENTER_KEY, autocomplete, link, templateTags;\n    ENTER_KEY = 13;\n    COMMA_KEY = 188;\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true);\n    autocomplete = null;\n    link = function($scope, $el, $attrs, $model) {\n      var addValue, deleteValue, hideSaveButton, renderTags, resetInput, saveInputTag, showSaveButton, withoutColors;\n      withoutColors = _.has($attrs, \"withoutColors\");\n      renderTags = function(tags, tagsColors) {\n        var color, ctx, html;\n        if (tagsColors == null) {\n          tagsColors = [];\n        }\n        color = !withoutColors ? tagsColors[t] : null;\n        ctx = {\n          tags: _.map(tags, function(t) {\n            return {\n              name: t,\n              style: color ? \"border-left: 5px solid \" + color : \"\"\n            };\n          })\n        };\n        html = $compile(templateTags(ctx))($scope);\n        return $el.find(\".tags-container\").html(html);\n      };\n      showSaveButton = function() {\n        return $el.find(\".save\").removeClass(\"hidden\");\n      };\n      hideSaveButton = function() {\n        return $el.find(\".save\").addClass(\"hidden\");\n      };\n      resetInput = function() {\n        $el.find(\"input\").val(\"\");\n        return autocomplete.close();\n      };\n      addValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        if (tags == null) {\n          tags = [];\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n        return hideSaveButton();\n      };\n      deleteValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        tags = _.pull(tags, value);\n        return $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n      };\n      saveInputTag = function() {\n        var value;\n        value = $el.find(\"input\").val();\n        addValue(value);\n        return resetInput();\n      };\n      $el.on(\"keypress\", \"input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === ENTER_KEY) {\n          event.preventDefault();\n          return saveInputTag();\n        } else if (String.fromCharCode(event.keyCode) === ',') {\n          event.preventDefault();\n          return saveInputTag();\n        } else {\n          if (target.val().length) {\n            return showSaveButton();\n          } else {\n            return hideSaveButton();\n          }\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return saveInputTag();\n      });\n      $el.on(\"click\", \".remove-tag\", function(event) {\n        var target, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        value = target.siblings(\".tag-name\").text();\n        return deleteValue(value);\n      });\n      bindOnce($scope, \"project\", function(project) {\n        var input;\n        input = $el.find(\"input\");\n        autocomplete = new Awesomplete(input[0], {\n          list: _.keys(project.tags_colors)\n        });\n        return input.on(\"awesomplete-selectcomplete\", function() {\n          addValue(input.val());\n          return input.val(\"\");\n        });\n      });\n      $scope.$watch($attrs.ngModel, function(tags) {\n        var ref, tagsColors;\n        tagsColors = ((ref = $scope.project) != null ? ref.tags_colors : void 0) || [];\n        return renderTags(tags, tagsColors);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\",\n      templateUrl: \"common/tag/lb-tag-line.html\"\n    };\n  };\n\n  module.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserPilotService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  UserPilotService = (function(superClass) {\n    var JOINED_LIMIT_DAYS;\n\n    extend(UserPilotService, superClass);\n\n    UserPilotService.$inject = [\"$rootScope\", \"$window\"];\n\n    JOINED_LIMIT_DAYS = 42;\n\n    function UserPilotService(rootScope, win) {\n      this.rootScope = rootScope;\n      this.win = win;\n      this.initialized = false;\n    }\n\n    UserPilotService.prototype.initialize = function() {\n      if (this.initialized) {\n        return;\n      }\n      this.rootScope.$on('$locationChangeSuccess', (function(_this) {\n        return function() {\n          if (_this.win.userpilot) {\n            return _this.win.userpilot.reload();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"auth:refresh\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:register\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:login\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:logout\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      return this.initialized = true;\n    };\n\n    UserPilotService.prototype.checkZendeskConditions = function(userData) {\n      var hasPaidPlan, is_new_user, joined;\n      hasPaidPlan = this.hasPaidPlan(userData);\n      joined = new Date(userData[\"date_joined\"]);\n      is_new_user = joined > this.getJoinedLimit();\n      return hasPaidPlan && is_new_user;\n    };\n\n    UserPilotService.prototype.identify = function() {\n      var userData, userInfo, userPilotCustomer, userPilotId;\n      userInfo = this.win.localStorage.getItem(\"userInfo\") || \"{}\";\n      userData = JSON.parse(userInfo);\n      if (this.win.userpilot) {\n        userPilotId = this.calculateUserPilotId(userData);\n        userPilotCustomer = this.prepareUserPilotCustomer(userData);\n        this.win.userpilot.identify(userPilotId, userPilotCustomer);\n      }\n      if (this.win.zE) {\n        if (this.checkZendeskConditions(userData)) {\n          return this.setZendeskWidgetStatus({\n            enabled: true\n          });\n        } else {\n          return this.setZendeskWidgetStatus({\n            enabled: false\n          });\n        }\n      }\n    };\n\n    UserPilotService.prototype.prepareUserPilotCustomer = function(data) {\n      if (!data[\"id\"]) {\n        return {\n          created_at: Date.now()\n        };\n      }\n      return {\n        name: data[\"full_name_display\"],\n        email: data[\"email\"],\n        created_at: Date.now(),\n        taiga_id: data[\"id\"],\n        taiga_username: data[\"username\"],\n        taiga_date_joined: data[\"date_joined\"],\n        taiga_lang: data[\"lang\"],\n        taiga_max_private_projects: data[\"max_private_projects\"],\n        taiga_max_memberships_private_projects: data[\"max_memberships_private_projects\"],\n        taiga_verified_email: data[\"verified_email\"],\n        taiga_total_private_projects: data[\"total_private_projects\"],\n        taiga_total_public_projects: data[\"total_public_projects\"],\n        taiga_roles: data[\"roles\"] && data[\"roles\"].toString()\n      };\n    };\n\n    UserPilotService.prototype.hasPaidPlan = function(data) {\n      var maxPrivateProjects;\n      maxPrivateProjects = data[\"max_private_projects\"];\n      return maxPrivateProjects !== void 0 && maxPrivateProjects !== 1;\n    };\n\n    UserPilotService.prototype.calculateUserPilotId = function(data) {\n      var joined;\n      if (!data[\"id\"]) {\n        return 2;\n      }\n      joined = new Date(data[\"date_joined\"]);\n      if ((joined > this.getJoinedLimit()) || this.hasPaidPlan(data)) {\n        return data[\"id\"];\n      }\n      return 1;\n    };\n\n    UserPilotService.prototype.getJoinedLimit = function() {\n      var limit;\n      limit = new Date;\n      limit.setDate(limit.getDate() - JOINED_LIMIT_DAYS);\n      return limit;\n    };\n\n    UserPilotService.prototype.setZendeskWidgetStatus = function(config) {\n      var supress;\n      if (config == null) {\n        config = {\n          enabled: false\n        };\n      }\n      supress = !config.enabled;\n      return this.win.zE('webWidget', 'updateSettings', {\n        webWidget: {\n          chat: {\n            suppress: supress\n          },\n          contactForm: {\n            suppress: supress\n          },\n          helpCenter: {\n            suppress: supress\n          },\n          talk: {\n            suppress: supress\n          },\n          answerBot: {\n            suppress: supress\n          }\n        }\n      });\n    };\n\n    return UserPilotService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgUserPilot\", UserPilotService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEditSprint, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  CreateEditSprint = function($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate, projectService, $timeout) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var createSprint, form, getLastSprint, hasErrors, openFn, remove, resetSprint, submit, ussToAdd;\n      hasErrors = false;\n      createSprint = true;\n      form = null;\n      $scope.newSprint = {};\n      ussToAdd = null;\n      $scope.createEditOpen = false;\n      resetSprint = function() {\n        if (form) {\n          form.reset();\n        }\n        return $scope.newSprint = {\n          project: null,\n          name: null,\n          estimated_start: null,\n          estimated_finish: null\n        };\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var broadcastEvent, currentLoading, estimated_end, estimated_start, newSprint, prettyDate, promise, submitButton, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          submitButton = $el.find(\".submit-button\");\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            hasErrors = true;\n            $el.find(\".last-sprint-name\").addClass(\"disappear\");\n            return;\n          }\n          hasErrors = false;\n          broadcastEvent = null;\n          estimated_start = $('.date-start').val();\n          estimated_end = $('.date-end').val();\n          if (createSprint) {\n            newSprint = angular.copy($scope.newSprint);\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.create(\"milestones\", newSprint);\n            broadcastEvent = \"sprintform:create:success\";\n          } else {\n            newSprint = $scope.newSprint.realClone();\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.save(newSprint);\n            broadcastEvent = \"sprintform:edit:success\";\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise.then(function(data) {\n            currentLoading.finish();\n            if (createSprint) {\n              $scope.sprintsCounter += 1;\n            }\n            $scope.sprints = _.map($scope.sprints, function(it) {\n              if (it.id === data.id) {\n                return data;\n              } else {\n                return it;\n              }\n            });\n            if (broadcastEvent === \"sprintform:create:success\" && ussToAdd) {\n              $rootscope.$broadcast(broadcastEvent, data, ussToAdd);\n            } else {\n              $rootscope.$broadcast(broadcastEvent, data);\n            }\n            lightboxService.close($el);\n            return $scope.createEditOpen = false;\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"light-error\", data._error_message);\n            } else if (data.__all__) {\n              return $confirm.notify(\"light-error\", data.__all__[0]);\n            }\n          });\n        };\n      })(this));\n      remove = function() {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\");\n        message = $scope.newSprint.name;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSuccess;\n            onSuccess = function() {\n              askResponse.finish();\n              $scope.milestonesCounter -= 1;\n              lightboxService.close($el);\n              $scope.createEditOpen = false;\n              return $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove($scope.newSprint).then(onSuccess, onError);\n          };\n        })(this));\n      };\n      getLastSprint = function() {\n        var openSprints, sortedSprints;\n        openSprints = _.filter($scope.sprints, function(sprint) {\n          return !sprint.closed;\n        });\n        sortedSprints = _.sortBy(openSprints, function(sprint) {\n          return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X');\n        });\n        return sortedSprints[sortedSprints.length - 1];\n      };\n      openFn = function(cb) {\n        return $scope.$applyAsync(function() {\n          return $timeout(function() {\n            return cb();\n          }, 0);\n        });\n      };\n      $scope.$on(\"sprintform:create\", function(event, projectId, uss) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var estimatedFinish, estimatedStart, lastSprint, lastSprintNameDom, prettyDate, text;\n          ussToAdd = uss;\n          resetSprint();\n          form = $el.find(\"form\").checksley();\n          form.reset();\n          createSprint = true;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.newSprint.project = projectId;\n          $scope.newSprint.name = null;\n          $scope.newSprint.slug = null;\n          lastSprint = getLastSprint();\n          estimatedStart = moment();\n          if (lastSprint) {\n            estimatedStart = moment(lastSprint.estimated_finish);\n          } else if ($scope.newSprint.estimated_start) {\n            estimatedStart = moment($scope.newSprint.estimated_start);\n          }\n          $scope.newSprint.estimated_start = estimatedStart.format(prettyDate);\n          estimatedFinish = moment().add(2, \"weeks\");\n          if (lastSprint) {\n            estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\");\n          } else if ($scope.newSprint.estimated_finish) {\n            estimatedFinish = moment($scope.newSprint.estimated_finish);\n          }\n          $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate);\n          lastSprintNameDom = $el.find(\".last-sprint-name\");\n          if ((lastSprint != null ? lastSprint.name : void 0) != null) {\n            text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\n              lastSprint: lastSprint.name\n            });\n            lastSprintNameDom.html(text);\n          }\n          $el.find(\".delete-sprint\").addClass(\"hidden\");\n          text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\");\n          $el.find(\".title\").text(text);\n          text = $translate.instant(\"COMMON.CREATE\");\n          $el.find(\".button-green\").text(text);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus();\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        });\n      });\n      $scope.$on(\"sprintform:edit\", function(ctx, sprint) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var editSprint, prettyDate, save;\n          resetSprint();\n          createSprint = false;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.$apply(function() {\n            $scope.newSprint = sprint.realClone();\n            $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate);\n            return $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate);\n          });\n          if (projectService.project.get('my_permissions').indexOf('delete_milestone') > -1) {\n            $el.find(\".delete-sprint\").removeClass(\"hidden\");\n          }\n          editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\");\n          $el.find(\".title\").text(editSprint);\n          save = $translate.instant(\"COMMON.SAVE\");\n          $el.find(\".button-green\").text(save);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus().select();\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        });\n      });\n      $el.on(\"keyup\", \".sprint-name\", function(event) {\n        if ($el.find(\".sprint-name\").val().length > 0 || hasErrors) {\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        } else {\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".delete-sprint\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return resetSprint();\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEditSprint\", [\"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"tgProjectService\", \"$timeout\", CreateEditSprint]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogController, BacklogDirective, BurndownBacklogGraphDirective, TgBacklogProgressBarDirective, ToggleBurndownVisibility, UsEditSelector, UsPointsDirective, UsRolePointsSelectorDirective, bindMethods, bindOnce, generateHash, groupBy, mixOf, module, scopeDefer, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  generateHash = this.taiga.generateHash;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogController = (function(superClass) {\n    extend(BacklogController, superClass);\n\n    BacklogController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"$tgLoading\", \"tgResources\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLoader\"];\n\n    BacklogController.prototype.storeCustomFiltersName = 'backlog-custom-filters';\n\n    BacklogController.prototype.storeFiltersName = 'backlog-filters';\n\n    BacklogController.prototype.backlogOrder = {};\n\n    BacklogController.prototype.milestonesOrder = {};\n\n    BacklogController.prototype.newUs = [];\n\n    BacklogController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function BacklogController(scope1, rootscope, repo, confirm, rs, params1, q, location, appMetaService, navUrls, events, analytics, translate, loading, rs2, modelTransform, errorHandlingService, storage, filterRemoteStorageService, projectService, tgLoader) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.loading = loading;\n      this.rs2 = rs2;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.tgLoader = tgLoader;\n      bindMethods(this);\n      this.backlogOrder = {};\n      this.milestonesOrder = {};\n      this.page = 1;\n      this.disablePagination = false;\n      this.firstLoadComplete = false;\n      this.translationData = {\n        q: this.filterQ\n      };\n      this.scope.userstories = [];\n      this.totalUserStories = 0;\n      this.pendingDrag = [];\n      this.scope.noSwimlaneUserStories = false;\n      this.scope.swimlanesList = Immutable.List();\n      if (this.applyStoredFilters(this.params.pslug, \"backlog-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"BACKLOG.SECTION_NAME\");\n      this.showTags = true;\n      this.activeFilters = false;\n      this.scope.showGraphPlaceholder = null;\n      this.displayVelocity = false;\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          _this.loadSwimlanes();\n          _this.firstLoadComplete = true;\n          title = _this.translate.instant(\"BACKLOG.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          _this.appMetaService.setAll(title, description);\n          if (_this.rs.userstories.getShowTags(_this.scope.projectId)) {\n            _this.showTags = true;\n            return _this.scope.$broadcast(\"showTags\", _this.showTags);\n          }\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    BacklogController.prototype.filtersReloadContent = function() {\n      return this.loadUserstories(true);\n    };\n\n    BacklogController.prototype.initializeEventHandlers = function() {\n      var load;\n      load = (function(_this) {\n        return function() {\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this);\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, els, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.newUs = _.map(els, function(it) {\n            return it.id;\n          });\n          if (position === 'top') {\n            _this.moveUsToTopOfBacklog(els).then(function() {\n              return load();\n            });\n          } else {\n            load();\n          }\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:create:success\", (function(_this) {\n        return function(e, data, ussToMove) {\n          _this.loadSprints().then(function() {\n            return _this.scope.$broadcast(\"sprintform:create:success:callback\", ussToMove);\n          });\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, el, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.newUs = [el.id];\n          if (position === 'top') {\n            _this.moveUsToTopOfBacklog(el).then(function() {\n              return load();\n            });\n          } else {\n            load();\n          }\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:edit:success\", (function(_this) {\n        return function() {\n          return _this.loadProjectStats();\n        };\n      })(this));\n      this.scope.$on(\"sprintform:remove:success\", (function(_this) {\n        return function(event, sprint) {\n          if (_this.displayVelocity) {\n            _this.toggleVelocityForecasting();\n          }\n          _this.loadSprints();\n          _this.loadProjectStats();\n          _this.loadUserstories(true);\n          if (sprint.closed) {\n            _this.loadClosedSprints();\n          }\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, data) {\n          var index;\n          index = _.findIndex(_this.scope.userstories, function(us) {\n            return us.id === data.id;\n          });\n          _this.scope.userstories[index] = data;\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"filters:update\", (function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this));\n      this.scope.$on(\"sprint:us:move\", this.moveUs);\n      this.scope.$on(\"sprint:us:moved\", (function(_this) {\n        return function() {\n          _this.resetFirstStoryIndicator();\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"backlog:load-closed-sprints\", this.loadClosedSprints);\n      return this.scope.$on(\"backlog:unload-closed-sprints\", this.unloadClosedSprints);\n    };\n\n    BacklogController.prototype.initializeSubscription = function() {\n      var routingKey1, routingKey2;\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.loadAllPaginatedUserstories();\n          return _this.loadSprints();\n        };\n      })(this));\n      routingKey2 = \"changes.project.\" + this.scope.projectId + \".milestones\";\n      return this.events.subscribe(this.scope, routingKey2, (function(_this) {\n        return function(message) {\n          _this.loadSprints();\n          _this.loadClosedSprints();\n          return _this.loadProjectStats();\n        };\n      })(this), {\n        selfNotification: true\n      });\n    };\n\n    BacklogController.prototype.toggleShowTags = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.showTags = !_this.showTags;\n          return _this.rs.userstories.storeShowTags(_this.scope.projectId, _this.showTags);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleActiveFilters = function() {\n      return this.activeFilters = !this.activeFilters;\n    };\n\n    BacklogController.prototype.toggleVelocityForecasting = function() {\n      this.displayVelocity = !this.displayVelocity;\n      if (!this.displayVelocity) {\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      } else {\n        this.calculateForecasting();\n        this.scope.visibleUserStories = _.map(this.forecastedStories, function(it) {\n          return it.ref;\n        });\n      }\n      return scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"userstories:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadProjectStats = function() {\n      return this.rs.projects.stats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totalPoints;\n          _this.scope.stats = stats;\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          if (totalPoints) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.showGraphPlaceholder = !((stats.total_points != null) && (stats.total_milestones != null));\n          _this.calculateForecasting();\n          return stats;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.setMilestonesOrder = function(sprints) {\n      var it, j, len, results, sprint;\n      results = [];\n      for (j = 0, len = sprints.length; j < len; j++) {\n        sprint = sprints[j];\n        this.milestonesOrder[sprint.id] = {};\n        results.push((function() {\n          var l, len1, ref1, results1;\n          ref1 = sprint.user_stories;\n          results1 = [];\n          for (l = 0, len1 = ref1.length; l < len1; l++) {\n            it = ref1[l];\n            results1.push(this.milestonesOrder[sprint.id][it.id] = it.sprint_order);\n          }\n          return results1;\n        }).call(this));\n      }\n      return results;\n    };\n\n    BacklogController.prototype.unloadClosedSprints = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.scope.closedSprints = [];\n          return _this.rootscope.$broadcast(\"closed-sprints:reloaded\", []);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadClosedSprints = function() {\n      var params;\n      params = {\n        closed: true\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalClosedMilestones = result.closed;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.closedSprints = sprints;\n          _this.scope.closedSprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"closed-sprints:reloaded\", sprints);\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadSwimlanes = function() {\n      if (this.scope.project.swimlanes) {\n        return this.scope.project.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.scope.swimlanesList.includes(swimlane)) {\n              return _this.scope.swimlanesList = _this.scope.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n    };\n\n    BacklogController.prototype.loadSprints = function() {\n      var params;\n      params = {\n        closed: false\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalMilestones = sprints;\n          _this.scope.totalClosedMilestones = result.closed;\n          _this.scope.totalOpenMilestones = result.open;\n          _this.scope.totalMilestones = _this.scope.totalOpenMilestones + _this.scope.totalClosedMilestones;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.sprints = sprints;\n          if (!_this.scope.closedSprints) {\n            _this.scope.closedSprints = [];\n          }\n          _this.scope.sprintsCounter = sprints.length;\n          _this.scope.sprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"sprints:loaded\", sprints);\n          _this.scope.currentSprint = _this.findCurrentSprint();\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.openSprints = function() {\n      return _.filter(this.scope.sprints, (function(_this) {\n        return function(sprint) {\n          return !sprint.closed;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadAllPaginatedUserstories = function() {\n      var page;\n      page = this.page;\n      return this.loadUserstories(true, this.scope.userstories.length).then((function(_this) {\n        return function() {\n          return _this.page = page;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadUserstories = function(resetPagination, pageSize) {\n      var params, promise;\n      if (resetPagination == null) {\n        resetPagination = false;\n      }\n      if (!this.scope.projectId) {\n        return null;\n      }\n      this.loadingUserstories = true;\n      this.disablePagination = true;\n      params = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      this.rs.userstories.storeQueryParams(this.scope.projectId, params);\n      if (resetPagination) {\n        this.page = 1;\n      }\n      params.page = this.page;\n      params.q = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      this.translationData.q = params.q;\n      promise = this.rs.userstories.listUnassigned(this.scope.projectId, params, pageSize);\n      return promise.then((function(_this) {\n        return function(result) {\n          var header, it, j, len, ref1, userstories;\n          userstories = result[0];\n          header = result[1];\n          if (resetPagination) {\n            _this.scope.userstories = [];\n          }\n          _this.scope.userstories = _this.scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"));\n          _this.resetFirstStoryIndicator();\n          _this.scope.visibleUserStories = _.map(_this.scope.userstories, function(it) {\n            return it.ref;\n          });\n          ref1 = _this.scope.userstories;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            it = ref1[j];\n            if (_this.newUs.includes(it.id)) {\n              it[\"new\"] = true;\n            }\n            _this.backlogOrder[it.id] = it.backlog_order;\n          }\n          _this.loadingUserstories = false;\n          if (header('x-pagination-next')) {\n            _this.disablePagination = false;\n            _this.page++;\n          }\n          if (header('Taiga-Info-Backlog-Total-Userstories')) {\n            _this.totalUserStories = header('Taiga-Info-Backlog-Total-Userstories');\n          }\n          if (header('Taiga-Info-Userstories-Without-Swimlane')) {\n            _this.scope.noSwimlaneUserStories = header('Taiga-Info-Userstories-Without-Swimlane');\n          }\n          _this.rootscope.$broadcast(\"backlog:userstories:loaded\");\n          scopeDefer(_this.scope, function() {\n            _this.scope.$broadcast(\"userstories:loaded\");\n            return _this.tgLoader.pageLoaded();\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadBacklog = function() {\n      return this.q.all([this.loadProjectStats(), this.loadSprints(), this.loadUserstories()]).then(this.calculateForecasting);\n    };\n\n    BacklogController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, lastLoadUserstoriesParams;\n      lastLoadUserstoriesParams = this.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        delete lastLoadUserstoriesParams['page'];\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['backlog-' + key] = lastLoadUserstoriesParams[key];\n        });\n        ParsedLastLoadUserstoriesParams['no-milestone'] = 1;\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    BacklogController.prototype.sprintTotalPoints = function(sprint) {\n      var j, len, points, ref1, us;\n      points = 0;\n      ref1 = sprint.user_stories;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        if (us.milestone === sprint.id) {\n          points += us.total_points;\n        }\n      }\n      return points;\n    };\n\n    BacklogController.prototype.calculateForecasting = function() {\n      var backlog_points_sum, current_sum, j, len, ref1, results, stats, total_points, us;\n      stats = this.scope.stats;\n      total_points = stats.total_points;\n      current_sum = stats.assigned_points;\n      backlog_points_sum = 0;\n      this.forecastedStories = [];\n      this.scope.forecastNewSprint = true;\n      if (this.scope.sprints && this.scope.sprints.length) {\n        backlog_points_sum = this.sprintTotalPoints(this.scope.sprints[0]);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          backlog_points_sum = 0;\n        } else {\n          this.scope.forecastNewSprint = false;\n        }\n      }\n      ref1 = this.scope.userstories;\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        current_sum += us.total_points;\n        backlog_points_sum += us.total_points;\n        this.forecastedStories.push(us);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          break;\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    BacklogController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_backlog_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.closedMilestones = !!project.total_closed_milestones;\n      this.scope.$emit('project:loaded', project);\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"id\");\n      this.resetFirstStoryIndicator();\n      return project;\n    };\n\n    BacklogController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      if (this.rs.userstories.getShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadBacklog().then((function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.scope.$emit(\"backlog:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleTags = function() {\n      return this.rs.userstories.storeShowTags(this.scope.projectId, this.showTags);\n    };\n\n    BacklogController.prototype.prepareBulkUpdateData = function(uses, field) {\n      if (field == null) {\n        field = \"backlog_order\";\n      }\n      return _.map(uses, function(x) {\n        return {\n          \"us_id\": x.id,\n          \"order\": x[field]\n        };\n      });\n    };\n\n    BacklogController.prototype.resetFirstStoryIndicator = function() {\n      if (this.scope.userstories.length > 0) {\n        return this.scope.first_us_in_backlog = this.scope.userstories[0].id;\n      }\n    };\n\n    BacklogController.prototype.moveUsToTopOfBacklog = function(uss) {\n      var nextUs, us;\n      if (!Array.isArray(uss)) {\n        uss = [uss];\n      }\n      us = uss[0];\n      if (this.scope.userstories.length) {\n        nextUs = this.scope.userstories[0].id;\n        return this.moveUs(\"sprint:us:move\", uss, 0, null, null, nextUs);\n      }\n      return Promise.resolve();\n    };\n\n    BacklogController.prototype.moveUs = function(ctx, usList, newUsIndex, newSprintId, previousUs, nextUs) {\n      var bulkUserstories, currentSprintId, j, key, l, len, len1, len2, m, newSprint, oldSprintId, position, project, promise, sprint, targetList, us;\n      oldSprintId = usList[0].milestone;\n      project = usList[0].project;\n      if (oldSprintId) {\n        sprint = this.scope.sprintsById[oldSprintId] || this.scope.closedSprintsById[oldSprintId];\n      }\n      if (newSprintId) {\n        newSprint = this.scope.sprintsById[newSprintId] || this.scope.closedSprintsById[newSprintId];\n      }\n      currentSprintId = newSprintId !== oldSprintId ? newSprintId : oldSprintId;\n      bulkUserstories = _.map(usList, function(it) {\n        return it.id;\n      });\n      if (ctx) {\n        this.pendingDrag.push({\n          usList: usList,\n          newUsIndex: newUsIndex,\n          newSprintId: newSprintId,\n          previousUs: previousUs,\n          nextUs: nextUs\n        });\n        if (newSprintId !== oldSprintId) {\n          if (sprint) {\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                return _.remove(sprint.user_stories, function(it) {\n                  return it.id === us.id;\n                });\n              };\n            })(this));\n          }\n          if (newSprintId === null) {\n            for (key = j = 0, len = usList.length; j < len; key = ++j) {\n              us = usList[key];\n              _.remove(sprint.user_stories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                return _this.scope.userstories.splice(newUsIndex + index, 0, us);\n              };\n            })(this));\n          } else {\n            for (l = 0, len1 = usList.length; l < len1; l++) {\n              us = usList[l];\n              _.remove(this.scope.userstories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                us.milestone = newSprintId;\n                newSprint.user_stories.splice(newUsIndex, 0, us);\n                newSprint = Object.assign(newSprint, {\n                  user_stories: newSprint.user_stories.slice()\n                });\n                return _this.scope.sprints = _this.scope.sprints.map(function(sprint) {\n                  return Object.assign(sprint);\n                });\n              };\n            })(this));\n          }\n        } else {\n          if (newSprintId) {\n            targetList = newSprint.user_stories;\n          } else {\n            targetList = this.scope.userstories;\n          }\n          for (m = 0, len2 = usList.length; m < len2; m++) {\n            us = usList[m];\n            _.remove(targetList, function(it) {\n              return it.id === us.id;\n            });\n          }\n          position = 0;\n          if (previousUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          } else if (nextUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          }\n          position++;\n          usList.forEach((function(_this) {\n            return function(us, index) {\n              return targetList.splice(position + index, 0, us);\n            };\n          })(this));\n        }\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      }\n      if (ctx && this.pendingDrag.length > 1) {\n        return;\n      }\n      promise = this.rs.userstories.bulkUpdateBacklogOrder(project, currentSprintId, previousUs, nextUs, bulkUserstories);\n      promise.then((function(_this) {\n        return function(result) {\n          var len3, n, ref1, updatedUs;\n          ref1 = result.data;\n          for (n = 0, len3 = ref1.length; n < len3; n++) {\n            updatedUs = ref1[n];\n            usList.forEach(function(us, index) {\n              if (us.id === updatedUs.id) {\n                us.milestone = updatedUs.milestone;\n                return us.backlog_order = updatedUs.backlog_order;\n              }\n            });\n          }\n          _this.pendingDrag.shift();\n          if (_this.pendingDrag.length) {\n            return _this.scope.$applyAsync(function() {\n              return _this.moveUs(null, _this.pendingDrag[0].usList, _this.pendingDrag[0].newUsIndex, _this.pendingDrag[0].newSprintId, _this.pendingDrag[0].previousUs, _this.pendingDrag[0].nextUs);\n            });\n          } else {\n            _this.rootscope.$broadcast(\"sprint:us:moved\");\n            if (!_this.events.connected) {\n              _this.loadSprints();\n              _this.loadClosedSprints();\n              _this.loadProjectStats();\n            }\n            if (_this.scope.closedSprintsById && _this.scope.closedSprintsById[oldSprintId]) {\n              return _this.rootscope.$broadcast(\"backlog:load-closed-sprints\");\n            }\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    BacklogController.prototype.updateUserStoryStatus = function() {\n      return this.generateFilters().then((function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"filters:update\");\n          _this.loadProjectStats();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.editUserStory = function(projectId, ref, $event) {\n      return this.rs.userstories.getByRef(projectId, ref).then((function(_this) {\n        return function(us) {\n          return _this.rs2.attachments.list(\"us\", us.id, projectId).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': us,\n              'attachments': attachments.toJS()\n            });\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.deleteUserStory = function(us) {\n      var message, title;\n      title = this.translate.instant(\"US.TITLE_DELETE_ACTION\", {\n        projectName: this.scope.project.name\n      });\n      message = this.translate.instant(\"US.TITLE_DELETE_MESSAGE\", {\n        subject: us.subject\n      });\n      return this.confirm.askOnDelete(title, message, '').then((function(_this) {\n        return function(askResponse) {\n          var promise;\n          _this.scope.userstories = _.without(_this.scope.userstories, us);\n          promise = _this.repo.remove(us);\n          promise.then(function() {\n            askResponse.finish();\n            return _this.q.all([_this.loadProjectStats(), _this.loadSprints(), _this.resetFirstStoryIndicator()]);\n          });\n          return promise.then(null, function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.addNewUs = function(type) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, this.scope.project.default_us_status);\n      }\n    };\n\n    BacklogController.prototype.addNewSprint = function() {\n      return this.rootscope.$broadcast(\"sprintform:create\", this.scope.projectId);\n    };\n\n    BacklogController.prototype.findCurrentSprint = function() {\n      var currentDate;\n      currentDate = new Date().getTime();\n      return _.find(this.scope.sprints, function(sprint) {\n        var end, start;\n        start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x');\n        end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x');\n        return currentDate >= start && currentDate <= end;\n      });\n    };\n\n    BacklogController.prototype.addFilterBacklog = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    BacklogController.prototype.removeFilterBacklog = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    return BacklogController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"BacklogController\", BacklogController);\n\n  BacklogDirective = function($repo, $rootscope, $translate, $rs) {\n    var doomLineTemplate, link, linkDoomLine, linkFilters, linkToolbar, openFilterInit, showHideFilter, showHideTags;\n    doomLineTemplate = _.template(\"<div class=\\\"doom-line\\\"><span><%- text %></span></div>\");\n    linkDoomLine = function($scope, $el, $attrs, $ctrl) {\n      var addDoomLineDom, getUsItems, reloadDoomLine, removeDoomlineDom;\n      reloadDoomLine = function() {\n        var current_sum, domElement, i, j, len, ref1, results, stats, total_points, us;\n        if ($scope.displayVelocity) {\n          removeDoomlineDom();\n        }\n        if (($scope.stats != null) && ($scope.stats.total_points != null) && $scope.stats.total_points !== 0 && ($scope.displayVelocity == null)) {\n          removeDoomlineDom();\n          stats = $scope.stats;\n          total_points = stats.total_points;\n          current_sum = stats.assigned_points;\n          if (!$scope.userstories) {\n            return;\n          }\n          ref1 = $scope.userstories;\n          results = [];\n          for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n            us = ref1[i];\n            current_sum += us.total_points;\n            if (current_sum > total_points) {\n              domElement = $el.find('.backlog-table-body .us-item-row')[i];\n              addDoomLineDom(domElement);\n              break;\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        }\n      };\n      removeDoomlineDom = function() {\n        return $el.find(\".doom-line\").remove();\n      };\n      addDoomLineDom = function(element) {\n        var text;\n        text = $translate.instant(\"BACKLOG.DOOMLINE\");\n        return $(element).before(doomLineTemplate({\n          \"text\": text\n        }));\n      };\n      getUsItems = function() {\n        var rowElements;\n        rowElements = $el.find('.backlog-table-body .us-item-row');\n        return _.map(rowElements, function(x) {\n          return angular.element(x);\n        });\n      };\n      $scope.$on(\"userstories:loaded\", reloadDoomLine);\n      $scope.$on(\"userstories:forecast\", removeDoomlineDom);\n      $scope.$on(\"sprint:us:moved\", reloadDoomLine);\n      return $scope.$watch(\"stats\", reloadDoomLine);\n    };\n    linkToolbar = function($scope, $el, $attrs, $ctrl) {\n      var checkSelected, getUsToMove, lastChecked, moveToCurrentSprint, moveToLatestSprint, moveUssToSprint, shiftPressed;\n      getUsToMove = function() {\n        var ussDom;\n        ussDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        return _.map(ussDom, function(item) {\n          var itemScope;\n          item = $(item).closest('.tg-scope');\n          itemScope = item.scope();\n          itemScope.us.milestone = $scope.sprints[0].id;\n          return itemScope.us;\n        });\n      };\n      moveUssToSprint = function(selectedUss, sprint) {\n        var data, extraPoints, totalExtraPoints, ussCurrent;\n        ussCurrent = _($scope.userstories);\n        $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value();\n        extraPoints = _.map(selectedUss, function(v, k) {\n          return v.total_points;\n        });\n        totalExtraPoints = _.reduce(extraPoints, function(acc, num) {\n          return acc + num;\n        });\n        sprint.user_stories = _.union(sprint.user_stories, selectedUss);\n        sprint.total_points += totalExtraPoints;\n        data = _.map(selectedUss, function(us) {\n          return {\n            us_id: us.id,\n            order: us.sprint_order\n          };\n        });\n        $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then((function(_this) {\n          return function() {\n            $ctrl.loadSprints();\n            $ctrl.loadProjectStats();\n            $ctrl.toggleVelocityForecasting();\n            return $ctrl.calculateForecasting();\n          };\n        })(this));\n        return $el.find(\".move-to-sprint\").hide();\n      };\n      moveToCurrentSprint = function(selectedUss) {\n        var sprint;\n        sprint = $scope.currentSprint ? $scope.currentSprint : $scope.sprints[0];\n        return moveUssToSprint(selectedUss, sprint);\n      };\n      moveToLatestSprint = function(selectedUss) {\n        return moveUssToSprint(selectedUss, $scope.sprints[0]);\n      };\n      $scope.$on(\"sprintform:create:success:callback\", function(e, ussToMove) {\n        if (ussToMove) {\n          return _.partial(moveToCurrentSprint, ussToMove)();\n        }\n      });\n      shiftPressed = false;\n      lastChecked = null;\n      checkSelected = function(target) {\n        var moveToSprintDom, selectedUsDom;\n        lastChecked = target.closest(\".us-item-row\");\n        target.closest('.us-item-row').toggleClass('ui-multisortable-multiple');\n        moveToSprintDom = $el.find(\".move-to-sprint\");\n        selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        if (selectedUsDom.length > 0 && $scope.sprints.length > 0) {\n          return moveToSprintDom.css('display', 'flex');\n        } else {\n          return moveToSprintDom.hide();\n        }\n      };\n      $(window).on(\"keydown.shift-pressed keyup.shift-pressed\", function(event) {\n        shiftPressed = !!event.shiftKey;\n        return true;\n      });\n      $el.on(\"change\", \".backlog-table-body input:checkbox\", function(event) {\n        var current, elements, nextAll, prevAll, target;\n        if (lastChecked && shiftPressed) {\n          elements = [];\n          current = $(event.currentTarget).closest(\".us-item-row\");\n          nextAll = lastChecked.nextAll();\n          prevAll = lastChecked.prevAll();\n          if (_.some(nextAll, function(next) {\n            return next === current[0];\n          })) {\n            elements = lastChecked.nextUntil(current);\n          } else if (_.some(prevAll, function(prev) {\n            return prev === current[0];\n          })) {\n            elements = lastChecked.prevUntil(current);\n          }\n          _.map(elements, function(elm) {\n            var input;\n            input = $(elm).find(\"input:checkbox\");\n            input.prop('checked', true);\n            return checkSelected(input);\n          });\n        }\n        target = angular.element(event.currentTarget);\n        target.closest(\".us-item-row\").toggleClass('is-checked');\n        return checkSelected(target);\n      });\n      $el.on(\"click\", \"#move-to-latest-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToLatestSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"click\", \"#move-to-current-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"change\", \"#show-tags > input\", function(event) {\n        event.preventDefault();\n        $ctrl.toggleShowTags();\n        return showHideTags($ctrl);\n      });\n      return $el.on(\"click\", \".forecasting-add-sprint\", function(event) {\n        var ussToMove, ussToMoveList;\n        ussToMoveList = $ctrl.forecastedStories;\n        if (!$scope.forecastNewSprint) {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.milestone = $scope.sprints[0].id;\n            us.order = index;\n            return us;\n          });\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        } else {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.order = index;\n            return us;\n          });\n          return $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove);\n        }\n      });\n    };\n    showHideTags = function($ctrl) {\n      var elm;\n      elm = angular.element(\"#show-tags\");\n      if ($ctrl.showTags) {\n        return elm.addClass(\"active\");\n      } else {\n        return elm.removeClass(\"active\");\n      }\n    };\n    openFilterInit = function($scope, $el, $ctrl) {\n      var sidebar;\n      sidebar = $el.find(\".backlog-filter\");\n      sidebar.addClass(\"active\");\n      return $ctrl.activeFilters = true;\n    };\n    showHideFilter = function($scope, $el, $ctrl) {\n      var filter, target;\n      filter = $el.find(\".backlog-filter\");\n      target = angular.element(\"#show-filters-button\");\n      filter.toggleClass(\"active\");\n      target.toggleClass(\"active\");\n      return $ctrl.toggleActiveFilters();\n    };\n    linkFilters = function($scope, $el, $attrs, $ctrl) {\n      $scope.filtersSearch = {};\n      return $el.on(\"click\", \"#show-filters-button\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          return showHideFilter($scope, $el, $ctrl);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs, $rootscope) {\n      var $ctrl, filters;\n      $ctrl = $el.controller();\n      linkToolbar($scope, $el, $attrs, $ctrl);\n      linkFilters($scope, $el, $attrs, $ctrl);\n      linkDoomLine($scope, $el, $attrs, $ctrl);\n      filters = $ctrl.location.search();\n      if (filters.status || filters.tags || filters.assigned_to || filters.owner) {\n        openFilterInit($scope, $el, $ctrl);\n      }\n      $scope.$on(\"showTags\", function() {\n        return showHideTags($ctrl);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $(window).off(\".shift-pressed\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective]);\n\n  UsEditSelector = function($rootscope, $tgTemplate, $compile, $translate) {\n    var link, mainTemplate;\n    mainTemplate = $tgTemplate.get(\"backlog/us-edit-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, removePopupOpenState;\n      $ctrl = $el.controller();\n      removePopupOpenState = function() {\n        $el.find(\".js-popup-button\").removeClass('popover-open');\n        return $(this).remove();\n      };\n      $el.on(\"click\", function(event) {\n        var html;\n        html = $compile(mainTemplate())($scope);\n        $el.find(\".js-popup-button\").addClass('popover-open');\n        $el.append(html);\n        $el.find(\".us-option-popup\").popover().open(function() {\n          return removePopupOpenState();\n        });\n        if (event.target.parentNode.classList.contains('first')) {\n          return $el.find(\".us-option-popup\").addClass('first');\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsEditSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsEditSelector]);\n\n  UsRolePointsSelectorDirective = function($rootscope, $template, $compile, $translate) {\n    var link, selectionTemplate;\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var removePopupOpenState;\n      removePopupOpenState = function() {\n        return $el.removeClass('popover-open');\n      };\n      bindOnce($scope, \"project\", function(project) {\n        var numberOfRoles, roles;\n        roles = _.filter(project.roles, \"computable\");\n        numberOfRoles = _.size(roles);\n        if (numberOfRoles > 1) {\n          return $el.append($compile(selectionTemplate({\n            \"roles\": roles\n          }))($scope));\n        } else {\n          $el.find(\".icon-arrow-down\").remove();\n          return $el.find(\".header-points\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        $el.find(\".popover\").popover().close();\n        return $el.find(\".header-points\").html(\"\" + roleName);\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx, roleId) {\n        var text;\n        $el.find(\".popover\").popover().close();\n        text = $translate.instant(\"COMMON.FIELDS.POINTS\");\n        return $el.find(\".header-points\").text(text);\n      });\n      $el.on(\"click\", function(event) {\n        var target;\n        target = angular.element(event.target);\n        if (target.is(\"span\") || target.is(\"div\")) {\n          event.stopPropagation();\n        }\n        $el.addClass('popover-open');\n        return $el.find(\".popover\").popover().open(function() {\n          return removePopupOpenState();\n        });\n      });\n      $el.on(\"click\", \".clear-selection\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $rootscope.$broadcast(\"uspoints:clear-selection\");\n        $el.find('.active-popover').removeClass('active-popover');\n        return target.addClass('active-popover');\n      });\n      $el.on(\"click\", \".role\", function(event) {\n        var rolScope, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        $el.find('.active-popover').removeClass('active-popover');\n        target.addClass('active-popover');\n        rolScope = target.scope();\n        return $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective]);\n\n  UsPointsDirective = function($tgEstimationsService, $repo, $tgTemplate) {\n    var link, rolesTemplate;\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, bindClickElements, estimationProcess, filteringRoleId, renderRolesSelector, selectedRoleId, updatingSelectedRoleId;\n      $ctrl = $el.controller();\n      updatingSelectedRoleId = null;\n      selectedRoleId = null;\n      filteringRoleId = null;\n      estimationProcess = null;\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = roleId;\n        return estimationProcess.render();\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = null;\n        return estimationProcess.render();\n      });\n      $scope.$watch($attrs.tgBacklogUsPoints, function(us) {\n        var roles;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          roles = estimationProcess.calculateRoles();\n          if (roles.length === 0) {\n            $el.find(\".icon-arrow-bottom\").remove();\n            $el.find(\"a.us-points\").addClass(\"not-clickable\");\n          } else if (roles.length === 1) {\n            selectedRoleId = _.keys(us.points)[0];\n          }\n          if (estimationProcess.isEditable) {\n            bindClickElements();\n          }\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return this.save(roleId, pointId).then(function() {\n              return $ctrl.loadProjectStats();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, pointId, pointObj, template, text, title, totalPoints;\n            totalPoints = this.calculateTotalPoints();\n            if ((selectedRoleId == null) || roles.length === 1) {\n              text = totalPoints;\n              title = totalPoints;\n            } else {\n              pointId = this.us.points[selectedRoleId];\n              pointObj = this.pointsById[pointId];\n              text = pointObj.name + \" / <span>\" + totalPoints + \"</span>\";\n              title = pointObj.name + \" / \" + totalPoints;\n            }\n            ctx = {\n              totalPoints: totalPoints,\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              text: text,\n              title: title\n            };\n            mainTemplate = \"common/estimation/us-estimation-total.html\";\n            template = $tgTemplate.get(mainTemplate, true);\n            html = template(ctx);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      renderRolesSelector = function() {\n        var html, roles;\n        roles = estimationProcess.calculateRoles();\n        html = rolesTemplate({\n          \"roles\": roles\n        });\n        $el.append(html);\n        return $el.find(\".pop-role\").popover().open(function() {\n          return $(this).remove();\n        });\n      };\n      bindClickElements = function() {\n        $el.on(\"click\", \".us-points\", function(event) {\n          var us;\n          event.preventDefault();\n          event.stopPropagation();\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = selectedRoleId;\n          if (selectedRoleId != null) {\n            return estimationProcess.renderPointsSelector(selectedRoleId);\n          } else {\n            return renderRolesSelector();\n          }\n        });\n        return $el.on(\"click\", \".role\", function(event) {\n          var popRolesDom, target, us;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = target.data(\"role-id\");\n          popRolesDom = $el.find(\".pop-role\");\n          popRolesDom.find(\"a\").removeClass(\"active\");\n          popRolesDom.find(\"a[data-role-id='\" + updatingSelectedRoleId + \"']\").addClass(\"active\");\n          return estimationProcess.renderPointsSelector(updatingSelectedRoleId);\n        });\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective]);\n\n  ToggleBurndownVisibility = function($storage) {\n    var hide, link, show;\n    hide = function() {\n      $(\".js-burndown-graph\").removeClass(\"shown\");\n      $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\");\n      return $(\".js-burndown-graph\").removeClass(\"open\");\n    };\n    show = function(firstLoad) {\n      $(\".js-toggle-burndown-visibility-button\").addClass(\"active\");\n      if (firstLoad) {\n        return $(\".js-burndown-graph\").addClass(\"shown\");\n      } else {\n        return $(\".js-burndown-graph\").addClass(\"open\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var firstLoad, hash, toggleGraph;\n      firstLoad = true;\n      hash = generateHash([\"is-burndown-grpahs-collapsed\"]);\n      $scope.isBurndownGraphCollapsed = $storage.get(hash) || false;\n      toggleGraph = function() {\n        if ($scope.isBurndownGraphCollapsed) {\n          hide(firstLoad);\n        } else {\n          show(firstLoad);\n        }\n        return firstLoad = false;\n      };\n      $scope.$watch(\"showGraphPlaceholder\", function() {\n        if ($scope.showGraphPlaceholder != null) {\n          $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder;\n          return toggleGraph();\n        }\n      });\n      $el.on(\"click\", \".js-toggle-burndown-visibility-button\", function() {\n        $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed;\n        $storage.set(hash, $scope.isBurndownGraphCollapsed);\n        return toggleGraph();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility]);\n\n  BurndownBacklogGraphDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var client_increment_line, colors, data, evolution_line, j, milestonesRange, optimal_line, options, ref1, results, team_increment_line, width, zero_line;\n      width = element.width();\n      element.height(width / 6);\n      milestonesRange = (function() {\n        results = [];\n        for (var j = 0, ref1 = dataToDraw.milestones.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; 0 <= ref1 ? j++ : j--){ results.push(j); }\n        return results;\n      }).apply(this);\n      data = [];\n      zero_line = _.map(dataToDraw.milestones, function(ml) {\n        return 0;\n      });\n      data.push({\n        data: _.zip(milestonesRange, zero_line),\n        lines: {\n          fillColor: \"rgba(0,0,0,0)\"\n        },\n        points: {\n          show: false\n        }\n      });\n      optimal_line = _.map(dataToDraw.milestones, function(ml) {\n        return ml.optimal;\n      });\n      data.push({\n        data: _.zip(milestonesRange, optimal_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      evolution_line = _.filter(_.map(dataToDraw.milestones, function(ml) {\n        return ml.evolution;\n      }), function(evolution) {\n        return evolution != null;\n      });\n      data.push({\n        data: _.zip(milestonesRange, evolution_line),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      client_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"] - ml[\"client-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, client_increment_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      team_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, team_increment_line),\n        lines: {\n          fillColor: \"rgba(255,160,160,0.2)\"\n        }\n      });\n      colors = [\"rgba(200,201,196,0.2)\", \"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\", \"rgba(216,222,233,1)\", \"rgba(255,160,160,1)\"];\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 20,\n            left: 5,\n            bottom: 0\n          }\n        },\n        xaxis: {\n          ticks: dataToDraw.milestones.length,\n          axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5,\n          tickFormatter: function(val, axis) {\n            return \"\";\n          }\n        },\n        yaxis: {\n          axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: colors,\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var ctx;\n            if (flotItem.seriesIndex === 1) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx);\n            } else if (flotItem.seriesIndex === 2) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.REAL\", ctx);\n            } else if (flotItem.seriesIndex === 3) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx);\n            } else {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx);\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch(\"stats\", function(value) {\n        if ($scope.stats != null) {\n          redrawChart(element, $scope.stats);\n          return $scope.$on(\"resize\", function() {\n            return redrawChart(element, $scope.stats);\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective]);\n\n  TgBacklogProgressBarDirective = function($template, $compile) {\n    var adjustPercentaje, link, render, template;\n    template = $template.get(\"backlog/progress-bar.html\", true);\n    render = function(scope, el, projectPointsPercentaje, closedPointsPercentaje) {\n      var html;\n      html = template({\n        projectPointsPercentaje: projectPointsPercentaje,\n        closedPointsPercentaje: closedPointsPercentaje\n      });\n      html = $compile(html)(scope);\n      return el.html(html);\n    };\n    adjustPercentaje = function(percentage) {\n      var adjusted;\n      adjusted = _.max([0, percentage]);\n      adjusted = _.min([100, adjusted]);\n      return Math.round(adjusted);\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgBacklogProgressBar, function(stats) {\n        var closedPoints, closedPointsPercentaje, definedPoints, projectPointsPercentaje, totalPoints;\n        if (stats != null) {\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          definedPoints = stats.defined_points;\n          closedPoints = stats.closed_points;\n          if (definedPoints > totalPoints) {\n            projectPointsPercentaje = totalPoints * 100 / definedPoints;\n            closedPointsPercentaje = closedPoints * 100 / definedPoints;\n          } else {\n            projectPointsPercentaje = 100;\n            closedPointsPercentaje = closedPoints * 100 / totalPoints;\n          }\n          projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3);\n          closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3);\n          return render($scope, $el, projectPointsPercentaje, closedPointsPercentaje);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSortableDirective, bindOnce, deleteElement, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  deleteElement = function(el) {\n    $(el).scope().$destroy();\n    $(el).off();\n    return $(el).remove();\n  };\n\n  BacklogSortableDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$scope.ctrl) {\n        console.error('BacklogSortableDirective must have access to to BacklogCtrl');\n      }\n      return bindOnce($scope, \"project\", function(project) {\n        var drake, emptyBacklog, initIsBacklog, nextUs, oldIndex, previousUs, scroll;\n        if (!(project.my_permissions.indexOf(\"modify_us\") > -1)) {\n          return;\n        }\n        initIsBacklog = false;\n        emptyBacklog = $('.js-empty-backlog');\n        previousUs = null;\n        nextUs = null;\n        oldIndex = null;\n        drake = dragula([$el[0], emptyBacklog[0], emptyBacklog[1]], {\n          copySortSource: false,\n          copy: false,\n          isContainer: function(el) {\n            return el.classList.contains('sprint-table');\n          },\n          moves: function(item) {\n            if (!$(item).hasClass('row')) {\n              return false;\n            }\n            return true;\n          }\n        });\n        drake.on('drop', function(item, target, source, sibling) {\n          var next, prev;\n          previousUs = null;\n          nextUs = null;\n          prev = $(item).prevAll('.row:not(.gu-transit)');\n          next = $(item).nextAll('.row:not(.gu-transit)');\n          previousUs = null;\n          if (prev.length && prev[0].dataset.id) {\n            previousUs = Number(prev[0].dataset.id);\n          }\n          nextUs = null;\n          if (!previousUs && next.length && next[0].dataset.id) {\n            return nextUs = Number(next[0].dataset.id);\n          }\n        });\n        drake.on('drag', function(item, container) {\n          var dragMultipleItems, firstElement, isChecked, parent, parentEl;\n          if ($scope.ctrl.displayVelocity) {\n            $scope.ctrl.toggleVelocityForecasting();\n          }\n          parent = $(item).parent();\n          initIsBacklog = parent.hasClass('backlog-table-body');\n          $(document.body).addClass(\"drag-active\");\n          isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\");\n          window.dragMultiple.start(item, container);\n          dragMultipleItems = window.dragMultiple.getElements();\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          parentEl = item.parentNode;\n          oldIndex = $(parentEl).find('tg-card').index(firstElement);\n          if (initIsBacklog) {\n            return oldIndex = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            return oldIndex = $(firstElement).index();\n          }\n        });\n        drake.on('cloned', function(item) {\n          return $(item).addClass('multiple-drag-mirror');\n        });\n        drake.on('dragend', function(item) {\n          var dragMultipleItems, firstElement, index, isBacklog, parent, ref, sameContainer, sprint, usList;\n          $('.doom-line').remove();\n          parent = $(item).parent();\n          isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog');\n          if (initIsBacklog || isBacklog) {\n            sameContainer = initIsBacklog === isBacklog;\n          } else {\n            sameContainer = parent && $(item).scope().sprint.id === parent.scope().sprint.id;\n          }\n          dragMultipleItems = window.dragMultiple.stop();\n          $(document.body).removeClass(\"drag-active\");\n          sprint = null;\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          if (isBacklog) {\n            index = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            index = $(firstElement).index();\n            sprint = (ref = parent.scope()) != null ? ref.sprint.id : void 0;\n          }\n          if (index === oldIndex && sameContainer) {\n            return;\n          }\n          if (!sameContainer) {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n            if (dragMultipleItems.length) {\n              _.each(dragMultipleItems, function(item) {\n                return deleteElement(item);\n              });\n            } else {\n              deleteElement(item);\n            }\n          } else {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n          }\n          return $scope.$applyAsync((function(_this) {\n            return function() {\n              return $scope.ctrl.moveUs(\"sprint:us:move\", usList, index, sprint, previousUs, nextUs);\n            };\n          })(this));\n        });\n        scroll = autoScroll([window], {\n          margin: 20,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSortable\", BacklogSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSprintDirective, BacklogSprintHeaderDirective, SprintDirective, ToggleExcludeClosedSprintsVisualization, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogSprintDirective = function($repo, $rootscope) {\n    var link, slideOptions, sprintTableMinHeight, toggleSprint;\n    sprintTableMinHeight = 50;\n    slideOptions = {\n      duration: 500,\n      easing: 'linear'\n    };\n    toggleSprint = (function(_this) {\n      return function($el) {\n        var sprintArrow, sprintTable;\n        sprintTable = $el.find(\".sprint-table\");\n        sprintArrow = $el.find(\".compact-sprint\");\n        sprintArrow.toggleClass('active');\n        return sprintTable.toggleClass('open');\n      };\n    })(this);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch($attrs.tgBacklogSprint, function(sprint) {\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        if (sprint.closed) {\n          return $el.addClass(\"sprint-closed\");\n        } else {\n          return toggleSprint($el);\n        }\n      });\n      $el.on(\"click\", \".sprint-name > .compact-sprint\", function(event) {\n        event.preventDefault();\n        toggleSprint($el);\n        return $el.find(\".sprint-table\").slideToggle(slideOptions);\n      });\n      $el.on(\"click\", \".edit-sprint\", function(event) {\n        var sprint;\n        event.preventDefault();\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        return $rootscope.$broadcast(\"sprintform:edit\", sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective]);\n\n  BacklogSprintHeaderDirective = function($navUrls, $template, $compile, $translate) {\n    var link, template;\n    template = $template.get(\"backlog/sprint-header.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, isVisible, prettyDate, render;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_milestone\") !== -1;\n      };\n      isVisible = function() {\n        return $scope.project.my_permissions.indexOf(\"view_milestones\") !== -1;\n      };\n      render = function(sprint) {\n        var compiledTemplate, ctx, estimatedDateRange, finish, start, taskboardUrl, templateScope;\n        taskboardUrl = $navUrls.resolve(\"project-taskboard\", {\n          project: $scope.project.slug,\n          sprint: sprint.slug\n        });\n        start = moment(sprint.estimated_start).format(prettyDate);\n        finish = moment(sprint.estimated_finish).format(prettyDate);\n        estimatedDateRange = start + \"-\" + finish;\n        ctx = {\n          name: sprint.name,\n          taskboardUrl: taskboardUrl,\n          estimatedDateRange: estimatedDateRange,\n          closedPoints: sprint.closed_points || 0,\n          totalPoints: sprint.total_points || 0,\n          isVisible: isVisible(),\n          isEditable: isEditable()\n        };\n        templateScope = $scope.$new();\n        _.assign(templateScope, ctx);\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n      $scope.$watch(\"sprint\", function(sprint) {\n        return render(sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\", BacklogSprintHeaderDirective]);\n\n  ToggleExcludeClosedSprintsVisualization = function($rootscope, $loading, $translate) {\n    var excludeClosedSprints, link;\n    excludeClosedSprints = true;\n    link = function($scope, $el, $attrs) {\n      var currentLoading, loadingElm;\n      loadingElm = $(\"<div>\");\n      $el.after(loadingElm);\n      currentLoading = null;\n      $el.on(\"click\", function(event) {\n        event.preventDefault();\n        excludeClosedSprints = !excludeClosedSprints;\n        currentLoading = $loading().target(loadingElm).start();\n        if (excludeClosedSprints) {\n          return $rootscope.$broadcast(\"backlog:unload-closed-sprints\");\n        } else {\n          return $rootscope.$broadcast(\"backlog:load-closed-sprints\");\n        }\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $scope.$on(\"closed-sprints:reloaded\", function(ctx, sprints) {\n        var key, text;\n        if (currentLoading) {\n          currentLoading.finish();\n        }\n        if (sprints.length > 0) {\n          key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\";\n        } else {\n          key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\";\n        }\n        text = $translate.instant(key);\n        return $el.find(\".text\").text(text);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\", ToggleExcludeClosedSprintsVisualization]);\n\n  SprintDirective = function(avatarService) {\n    return {\n      templateUrl: 'backlog/sprint.html',\n      scope: {\n        sprint: '=',\n        project: '='\n      }\n    };\n  };\n\n  SprintDirective.$inject = [];\n\n  module.directive(\"tgSprint\", SprintDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SprintChartDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  SprintChartDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var data, days, options, width;\n      width = element.width();\n      element.height(240);\n      days = _.map(dataToDraw, function(x) {\n        return moment.utc(x.day);\n      });\n      data = [];\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.open_points;\n        })),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.optimal_points;\n        })),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 30,\n            left: 5,\n            bottom: 5\n          }\n        },\n        xaxis: {\n          tickSize: [1, \"day\"],\n          min: days[0],\n          max: _.last(days),\n          mode: \"time\",\n          daysNames: days,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        yaxis: {\n          min: 0,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: [\"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\"],\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var formattedDate, roundedValue;\n            formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"));\n            roundedValue = Math.round(yval * 10) / 10;\n            if (flotItem.seriesIndex === 1) {\n              return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            } else {\n              return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$on(\"resize\", function() {\n        if ($scope.stats) {\n          return redrawChart(element, $scope.stats.days);\n        }\n      });\n      $scope.$on(\"taskboard:graph:toggle-visibility\", function() {\n        $el.parent().toggleClass('open');\n        return timeout(100, function() {\n          if ($scope.stats) {\n            return redrawChart(element, $scope.stats.days);\n          }\n        });\n      });\n      $scope.$watch('stats', function(value) {\n        if ($scope.stats == null) {\n          return;\n        }\n        return redrawChart(element, $scope.stats.days);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintChart\", [\"$translate\", SprintChartDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkTasksDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  CreateBulkTasksDirective = function($repo, $rs, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var submit, submitButton;\n      $scope.form = {\n        data: \"\",\n        usId: null\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, data, form, projectId, promise, sprintId, usId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          data = $scope.form.data;\n          projectId = $scope.projectId;\n          sprintId = $scope.form.sprintId;\n          usId = $scope.form.usId;\n          promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data);\n          promise.then(function(result) {\n            result = _.map(result, (function(_this) {\n              return function(x) {\n                return $model.make_model('tasks', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"taskform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function() {\n            return currentLoading.finish();\n          });\n        };\n      })(this));\n      $scope.$on(\"taskform:bulk\", function(ctx, sprintId, usId) {\n        lightboxService.open($el);\n        return $scope.form = {\n          data: \"\",\n          sprintId: sprintId,\n          usId: usId\n        };\n      });\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkTasksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardController, TaskboardDirective, TaskboardSquishColumnDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  toggleText = this.taiga.toggleText;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  TaskboardController = (function(superClass) {\n    extend(TaskboardController, superClass);\n\n    TaskboardController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"tgAppMetaService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgTaskboardTasks\", \"tgTaskboardIssues\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgLightboxFactory\", \"$timeout\", \"tgProjectService\"];\n\n    TaskboardController.prototype.excludePrefix = \"exclude_\";\n\n    TaskboardController.prototype.filterCategories = [\"status\", \"assigned_to\", \"owner\", \"role\", \"tags\"];\n\n    TaskboardController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by', 'tags'];\n\n    function TaskboardController(scope, rootscope, repo, confirm, rs1, rs2, params1, q1, appMetaService, location, navUrls, events, analytics, translate, errorHandlingService, taskboardTasksService, taskboardIssuesService, storage, filterRemoteStorageService, lightboxFactory, timeout1, projectService) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q1;\n      this.appMetaService = appMetaService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.taskboardTasksService = taskboardTasksService;\n      this.taskboardIssuesService = taskboardIssuesService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.lightboxFactory = lightboxFactory;\n      this.timeout = timeout1;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.taskboardTasksService.reset();\n      this.scope.userstories = [];\n      this.openFilter = false;\n      this.filterQ = '';\n      this.backToBacklogUrl = this.navUrls.resolve('project-backlog', {\n        project: this.projectService.project.get('slug'),\n        ref: this.params.ref\n      });\n      if (this.applyStoredFilters(this.params.pslug, \"tasks-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"TASKBOARD.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usTasks\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.usTasks;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"taskMap\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.taskMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"milestoneIssues\", (function(_this) {\n        return function() {\n          return _this.taskboardIssuesService.milestoneIssues;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"tasksByUs\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.tasksByUs;\n        };\n      })(this));\n      this.scope.issues = [];\n      this.scope.showTags = true;\n      this.scope.$watch('milestoneIssues', (function(_this) {\n        return function() {\n          if (_this.scope.milestoneIssues) {\n            return _this.scope.issues = _this.scope.milestoneIssues.toJS().map(function(milestoneIssue) {\n              return _this.taskboardIssuesService.issuesRaw.find(function(rawIssue) {\n                return milestoneIssue.model.id === rawIssue.id;\n              });\n            });\n          } else {\n            return _this.scope.issues = [];\n          }\n        };\n      })(this));\n    }\n\n    TaskboardController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    TaskboardController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    TaskboardController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      if (this.zoomLevel === Number(zoomLevel)) {\n        return null;\n      }\n      this.isFirstLoad = !this.zoomLevel;\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 1 && previousZoomLevel <= 1) {\n        this.zoomLoading = true;\n        return this.q.all([this.loadTasks(), this.loadIssues()]).then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.getQueryParams();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.generateFilters = function() {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, \"tasks-filters\");\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.milestone = this.scope.sprintId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.tasks.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters')]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype._setMeta = function() {\n      var description, prettyDate, title;\n      prettyDate = this.translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      title = this.translate.instant(\"TASKBOARD.PAGE_TITLE\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name\n      });\n      description = this.translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name,\n        startDate: moment(this.scope.sprint.estimated_start).format(prettyDate),\n        endDate: moment(this.scope.sprint.estimated_finish).format(prettyDate),\n        completedPercentage: this.scope.stats.completedPercentage || \"0\",\n        completedPoints: this.scope.stats.completedPointsSum || \"--\",\n        totalPoints: this.scope.stats.totalPointsSum || \"--\",\n        openTasks: this.scope.stats.openTasks || \"--\",\n        totalTasks: this.scope.stats.total_tasks || \"--\"\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskboardController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"taskform:bulk:success\", (function(_this) {\n        return function(event, tasks) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(tasks);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:new:success\", (function(_this) {\n        return function(event, task) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(task);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:edit:success\", (function(_this) {\n        return function(event, task) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.replaceModel(task);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function(event, issue) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n          return _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"issueform:add:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:edit:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.replaceModel(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:deleted\", (function(_this) {\n        return function(event, task) {\n          return _this.loadTasks();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:issue:deleted\", (function(_this) {\n        return function(event, issue) {\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:move\", this.taskMove);\n      this.scope.$on(\"assigned-to:added\", this.onAssignedToChanged);\n      return this.scope.$on(\"taskboard:items:move\", (function(_this) {\n        return function(event, itemsMoved) {\n          if (itemsMoved.uss) {\n            return _this.firstLoad();\n          } else {\n            if (itemsMoved.tasks) {\n              _this.loadTasks();\n            }\n            if (itemsMoved.issues) {\n              return _this.loadIssues();\n            }\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.onAssignedToChanged = function(ctx, userid, model) {\n      if (model.getName() === 'tasks') {\n        model.assigned_to = userid;\n        this.taskboardTasksService.replaceModel(model);\n        this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadTasks();\n            }\n          };\n        })(this));\n      }\n      if (model.getName() === 'issues') {\n        model.assigned_to = userid;\n        this.taskboardIssuesService.replaceModel(model);\n        return this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadIssues();\n            }\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.initializeSubscription = function() {\n      var routingKey, routingKey1;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".tasks\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadTaskboard();\n        };\n      })(this)));\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      return this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.refreshTagsColors();\n          _this.loadSprintStats();\n          return _this.loadSprint();\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadProject = function() {\n      return this.rs.projects.get(this.scope.projectId).then((function(_this) {\n        return function(project) {\n          if (!project.is_backlog_activated) {\n            _this.errorHandlingService.permissionDenied();\n          }\n          _this.scope.project = project;\n          _this.scope.pointsList = _.sortBy(project.points, \"order\");\n          _this.scope.pointsById = groupBy(project.points, function(e) {\n            return e.id;\n          });\n          _this.scope.roleById = groupBy(project.roles, function(e) {\n            return e.id;\n          });\n          _this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n          _this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n          _this.scope.usStatusById = groupBy(project.us_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.issueStatusById = groupBy(project.issue_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.$emit('project:loaded', project);\n          _this.fillUsersAndRoles(project.members, project.roles);\n          return project;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprintStats = function() {\n      return this.rs.sprints.stats(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(stats) {\n          var completedPointsSum, remainingPointsSum, remainingTasks, totalPointsSum;\n          totalPointsSum = _.reduce(_.values(stats.total_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          completedPointsSum = _.reduce(_.values(stats.completed_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          remainingPointsSum = totalPointsSum - completedPointsSum;\n          remainingTasks = stats.total_tasks - stats.completed_tasks;\n          _this.scope.stats = stats;\n          _this.scope.stats.totalPointsSum = totalPointsSum;\n          _this.scope.stats.completedPointsSum = completedPointsSum;\n          _this.scope.stats.remainingPointsSum = remainingPointsSum;\n          _this.scope.stats.remainingTasks = remainingTasks;\n          if (stats.totalPointsSum) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.completedPointsSum / stats.totalPointsSum);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.stats.openTasks = stats.total_tasks - stats.completed_tasks;\n          return stats;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprint = function() {\n      return this.rs.sprints.get(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(sprint) {\n          _this.scope.sprint = sprint;\n          _this.scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          _this.taskboardTasksService.setUserstories(_this.scope.userstories);\n          _this.rootscope.$broadcast(\"taskboard:userstories:loaded\", _this.scope.userstories);\n          return sprint;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadIssues = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      return this.rs.issues.listInProject(this.scope.projectId, this.scope.sprintId, params).then((function(_this) {\n        return function(issues) {\n          _this.taskboardIssuesService.init(_this.scope.project, _this.scope.usersById, _this.scope.issueStatusById);\n          _this.taskboardIssuesService.set(issues);\n          return _this.initIssues = true;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTasks = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return this.rs.tasks.list(this.scope.projectId, this.scope.sprintId, null, params).then((function(_this) {\n        return function(tasks) {\n          _this.notFoundTasks = false;\n          if (!tasks.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(locationParams).length)) {\n            _this.notFoundTasks = true;\n          }\n          _this.taskboardTasksService.init(_this.scope.project, _this.scope.usersById);\n          return _this.taskboardTasksService.set(tasks);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTaskboard = function() {\n      return this.q.all([\n        this.refreshTagsColors(), this.loadSprintStats(), this.loadSprint().then((function(_this) {\n          return function() {\n            _this.loadTasks();\n            return _this.loadIssues();\n          };\n        })(this))\n      ]);\n    };\n\n    TaskboardController.prototype.loadInitialData = function() {\n      var params, promise;\n      this.initialLoad = false;\n      this.initIssues = false;\n      params = {\n        pslug: this.params.pslug,\n        sslug: this.params.sslug\n      };\n      promise = this.repo.resolve(params).then((function(_this) {\n        return function(data) {\n          _this.scope.projectId = data.project;\n          _this.scope.sprintId = data.milestone;\n          _this.initializeSubscription();\n          return data;\n        };\n      })(this));\n      return promise.then((function(_this) {\n        return function() {\n          return _this.loadProject();\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.rs.issues.getSprintShowTags(_this.scope.projectId) === false) {\n            _this.scope.showTags = false;\n          }\n          return _this.loadTaskboard().then(function() {\n            _this.timeout(function() {\n              return _this.initialLoad = true;\n            }, 0, false);\n            return _this.setRolePoints();\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.toggleTags = function(tags) {\n      return this.rs.issues.storeSprintShowTags(this.scope.projectId, tags);\n    };\n\n    TaskboardController.prototype.showPlaceHolder = function(statusId, usId) {\n      if (!this.taskboardTasksService.tasksRaw.length) {\n        if (this.scope.taskStatusList[0].id === statusId && (!this.scope.userstories.length || this.scope.userstories[0].id === usId)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.editTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-edit', true);\n      this.taskboardTasksService.replace(task);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingTask) {\n          return _this.rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'task',\n              'obj': editingTask,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            task = task.set('loading-edit', false);\n            return _this.taskboardTasksService.replace(task);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.editIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-edit', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingIssue) {\n          return _this.rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'issue',\n              'obj': editingIssue,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            return issue = issue.set('loading-edit', false);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-delete', true);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingTask) {\n          var message, title;\n          task = task.set('loading-delete', false);\n          title = _this.translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          message = deletingTask.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingTask);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:task:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.ACTION_DELETE\");\n          message = deletingIssue.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingIssue);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:issue:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.removeIssueFromSprint = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(removingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: _this.scope.sprint.name\n          });\n          return _this.confirm.ask(title, null, message).then(function(askResponse) {\n            var promise;\n            removingIssue.milestone = null;\n            promise = _this.repo.save(removingIssue);\n            promise.then(function() {\n              _this.taskboardIssuesService.remove(removingIssue);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.taskMove = function(ctx, task, oldStatusId, usId, statusId, order) {\n      var moveUpdateData, options, params, promise;\n      this.scope.movingTask = true;\n      task = this.taskboardTasksService.getTaskModel(task.get('id'));\n      moveUpdateData = this.taskboardTasksService.move(task.id, usId, statusId, order);\n      params = {\n        status__is_archived: false,\n        include_attachments: true\n      };\n      options = {\n        headers: {\n          \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\n        }\n      };\n      return promise = this.repo.save(task, true, params, options, true).then((function(_this) {\n        return function(result) {\n          var headers;\n          if (result[0] && result[0].user_story) {\n            _this.reloadUserStory(result[0].user_story);\n          }\n          _this.scope.movingTask = false;\n          headers = result[1];\n          if (headers && headers['taiga-info-order-updated']) {\n            order = JSON.parse(headers['taiga-info-order-updated']);\n            _this.taskboardTasksService.assignOrders(order);\n          }\n          _this.loadSprintStats();\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.loadTasks();\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.reloadUserStory = function(userStoryId) {\n      return this.rs.userstories.get(this.scope.project.id, userStoryId).then((function(_this) {\n        return function(us) {\n          return _this.scope.userstories = _.map(_this.scope.userstories, function(x) {\n            if (x.id === us.id) {\n              return us;\n            } else {\n              return x;\n            }\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.addNewTask = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'task',\n            'project': this.scope.project,\n            'sprintId': this.scope.sprintId,\n            'usId': us != null ? us.id : void 0\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"taskform:bulk\", this.scope.sprintId, us != null ? us.id : void 0);\n      }\n    };\n\n    TaskboardController.prototype.addNewIssue = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new-or-existing\", {\n            objType: 'issue',\n            project: this.scope.project,\n            sprintId: this.scope.sprintId,\n            relatedField: 'milestone',\n            relatedObjectId: this.scope.sprintId,\n            targetName: this.scope.sprint.name\n          });\n        case \"standard\":\n          return this.rootscope.$broadcast(\"taskform:new\", this.scope.sprintId, us != null ? us.id : void 0);\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"issueform:bulk\", this.scope.projectId, this.scope.sprintId);\n      }\n    };\n\n    TaskboardController.prototype.toggleFold = function(id, modelName) {\n      if (modelName === 'issues') {\n        return this.taskboardIssuesService.toggleFold(id);\n      } else if (modelName === 'tasks') {\n        return this.taskboardTasksService.toggleFold(id);\n      }\n    };\n\n    TaskboardController.prototype.openUsersSelection = function(item) {\n      var onClose;\n      onClose = (function(_this) {\n        return function(assignedUsers) {\n          var userId;\n          userId = assignedUsers.pop() || null;\n          if (item.getName() === 'tasks') {\n            item.assigned_to = userId;\n            _this.taskboardTasksService.replaceModel(item);\n            _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadTasks();\n              }\n            });\n          }\n          if (item.getName() === 'issues') {\n            item.assigned_to = userId;\n            _this.taskboardIssuesService.replaceModel(item);\n            return _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadIssues();\n              }\n            });\n          }\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": [item.assigned_to],\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"single\": true,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    TaskboardController.prototype.changeTaskAssignedTo = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTaskModel(id);\n      return this.openUsersSelection(task);\n    };\n\n    TaskboardController.prototype.changeIssueAssignedTo = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssueModel(id);\n      return this.openUsersSelection(issue);\n    };\n\n    TaskboardController.prototype.setRolePoints = function() {\n      var computableRoles, getPoint, getRole, pointsByRole;\n      computableRoles = _.filter(this.scope.project.roles, \"computable\");\n      getRole = (function(_this) {\n        return function(roleId) {\n          roleId = parseInt(roleId, 10);\n          return _.find(computableRoles, function(role) {\n            return role.id === roleId;\n          });\n        };\n      })(this);\n      getPoint = (function(_this) {\n        return function(pointId) {\n          var poitnId;\n          poitnId = parseInt(pointId, 10);\n          return _.find(_this.scope.project.points, function(point) {\n            return point.id === pointId;\n          });\n        };\n      })(this);\n      pointsByRole = _.reduce(this.scope.userstories, (function(_this) {\n        return function(result, us, key) {\n          _.forOwn(us.points, function(pointId, roleId) {\n            var point, role;\n            role = getRole(roleId);\n            point = getPoint(pointId) || {\n              value: 0\n            };\n            if (role) {\n              if (!result[role.id]) {\n                result[role.id] = role;\n                result[role.id].points = 0;\n              }\n              return result[role.id].points += point.value;\n            }\n          });\n          return result;\n        };\n      })(this), {});\n      return this.scope.pointsByRole = Object.keys(pointsByRole).map(function(key) {\n        return pointsByRole[key];\n      });\n    };\n\n    TaskboardController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return TaskboardController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"TaskboardController\", TaskboardController);\n\n  TaskboardDirective = function($rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, tableBodyDom;\n      $ctrl = $el.controller();\n      $el.on(\"click\", \".toggle-analytics-visibility\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        target.toggleClass('active');\n        return $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\");\n      });\n      tableBodyDom = $el.find('[data-js=\"taskboard-table-hscroll\"]');\n      tableBodyDom.on(\"scroll\", function(event) {\n        var tableHeaderDom, target;\n        target = angular.element(event.currentTarget);\n        tableHeaderDom = $el.find(\".taskboard-table-inner\");\n        return tableHeaderDom.css(\"left\", -1 * target.scrollLeft());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective]);\n\n  TaskboardSquishColumnDirective = function(rs) {\n    var avatarWidth, firstLoad, gridGap, horizontalPadding, link, maxColumnWidth, maxRows, minWidth, zoom0ColumnWidth;\n    gridGap = 5;\n    horizontalPadding = 32;\n    avatarWidth = 30;\n    maxColumnWidth = 292;\n    zoom0ColumnWidth = 182;\n    minWidth = avatarWidth + horizontalPadding;\n    maxRows = 3;\n    firstLoad = false;\n    link = function($scope, $el, $attrs) {\n      var $foldStatusArchived, getCeilWidth, recalculateStatusColumnWidth, recalculateTaskboardWidth, setStatusColumnWidth;\n      $scope.$watch(\"ctrl.zoom\", (function(_this) {\n        return function() {\n          if (firstLoad) {\n            return recalculateTaskboardWidth();\n          }\n        };\n      })(this));\n      $scope.$on(\"sprint:task:moved\", (function(_this) {\n        return function() {\n          return recalculateTaskboardWidth();\n        };\n      })(this));\n      $scope.$watch(\"usTasks\", function() {\n        if ($scope.project) {\n          $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id);\n          $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId);\n          return recalculateTaskboardWidth();\n        }\n      });\n      $scope.foldStatus = function(status) {\n        $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id];\n        rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded);\n        return recalculateTaskboardWidth();\n      };\n      $foldStatusArchived = function(status) {\n        return $scope.foldStatus(status);\n      };\n      $scope.foldUs = function(rowId) {\n        $scope.usFolded[rowId] = !!!$scope.usFolded[rowId];\n        rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded);\n        return recalculateTaskboardWidth();\n      };\n      getCeilWidth = (function(_this) {\n        return function(usId, statusId) {\n          var columns, isStatusFolded, isUSFolded, tasks, width;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          isUSFolded = !!$scope.usFolded[usId];\n          if (usId) {\n            tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size;\n          } else {\n            tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size;\n          }\n          if (tasks && (isUSFolded || isStatusFolded)) {\n            if (isUSFolded) {\n              columns = Math.ceil(tasks / maxRows);\n              width = avatarWidth * columns + ((columns - 1) * gridGap) + horizontalPadding;\n            } else if (isStatusFolded) {\n              width = avatarWidth;\n            }\n          } else {\n            width = 0;\n          }\n          return width;\n        };\n      })(this);\n      setStatusColumnWidth = (function(_this) {\n        return function(statusId, width) {\n          var column;\n          column = $el.find(\".squish-status-\" + statusId);\n          if (width < minWidth) {\n            width = minWidth;\n          }\n          column.css('max-width', width);\n          return width;\n        };\n      })(this);\n      recalculateStatusColumnWidth = (function(_this) {\n        return function(statusId) {\n          var folded, initialWidth, isStatusFolded, statusFoldedWidth;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          initialWidth = 0;\n          if (isStatusFolded) {\n            initialWidth = avatarWidth;\n          } else {\n            initialWidth = maxColumnWidth;\n            if (Number($scope.ctrl.zoomLevel) === 0) {\n              initialWidth = zoom0ColumnWidth;\n            }\n          }\n          folded = !!$scope.statusesFolded[statusId];\n          statusFoldedWidth = getCeilWidth(null, statusId);\n          if (statusFoldedWidth < initialWidth) {\n            statusFoldedWidth = initialWidth;\n          }\n          _.forEach($scope.userstories, function(us) {\n            var isUSFolded, width;\n            isUSFolded = !!$scope.usFolded[us.id];\n            width = getCeilWidth(us.id, statusId);\n            if (width > statusFoldedWidth) {\n              return statusFoldedWidth = width;\n            }\n          });\n          return setStatusColumnWidth(statusId, statusFoldedWidth);\n        };\n      })(this);\n      return recalculateTaskboardWidth = (function(_this) {\n        return function() {\n          var total;\n          total = _.reduce($scope.taskStatusList, function(acc, status) {\n            return acc + recalculateStatusColumnWidth(status.id) + 5;\n          }, 0);\n          $el.find('.taskboard-table-inner').css(\"width\", maxColumnWidth + total);\n          if (!firstLoad) {\n            requestAnimationFrame(function() {\n              return $el.addClass('animations');\n            });\n          }\n          firstLoad = true;\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaBacklog\");\n\n  TaskboardSortableDirective = function($repo, $rs, $rootscope, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      return unwatch = $scope.$watch(\"usTasks\", function(usTasks) {\n        var containers, deleteElement, drake, filterError, initialContainer, itemEl, newParentScope, oldParentScope, scroll, tdom;\n        if (!usTasks || !usTasks.size) {\n          return;\n        }\n        unwatch();\n        if (!($scope.project.my_permissions.indexOf(\"modify_task\") > -1)) {\n          return;\n        }\n        oldParentScope = null;\n        newParentScope = null;\n        itemEl = null;\n        tdom = $el;\n        filterError = function() {\n          var text;\n          text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\");\n          return $tgConfirm.notify(\"error\", text);\n        };\n        deleteElement = function(itemEl) {\n          itemEl.off();\n          return itemEl.remove();\n        };\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        drake = dragula(containers, {\n          copySortSource: false,\n          copy: false,\n          accepts: function(el, target) {\n            return !$(target).hasClass('taskboard-row-title-box');\n          },\n          moves: function(item) {\n            return $(item).is('tg-card');\n          }\n        });\n        initialContainer = null;\n        drake.on('shadow', function(item) {\n          return $(item).removeClass('folded-dragging');\n        });\n        drake.on('over', function(item, container) {\n          if (!initialContainer) {\n            return initialContainer = container;\n          } else if (container !== initialContainer) {\n            return $(container).addClass('target-drop');\n          }\n        });\n        drake.on('out', function(item, container) {\n          if (container !== initialContainer) {\n            return $(container).removeClass('target-drop');\n          }\n        });\n        drake.on('drag', function(item) {\n          oldParentScope = $(item).parent().scope();\n          if ($(item).width() === 30) {\n            $(item).addClass('folded-dragging');\n          }\n          if ($el.hasClass(\"active-filters\")) {\n            filterError();\n            setTimeout((function() {\n              return drake.cancel(true);\n            }), 0);\n            return false;\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemIndex, itemTask, newStatusId, newUsId, oldStatusId, oldUsId, parentEl;\n          parentEl = $(item).parent();\n          itemEl = $(item);\n          itemTask = $scope.taskMap.get(Number(item.dataset.id));\n          itemIndex = itemEl.index();\n          newParentScope = parentEl.scope();\n          oldUsId = oldParentScope.us ? oldParentScope.us.id : null;\n          oldStatusId = oldParentScope.st.id;\n          newUsId = newParentScope.us ? newParentScope.us.id : null;\n          newStatusId = newParentScope.st.id;\n          if (initialContainer !== parentEl) {\n            $(parentEl).addClass('new');\n            $(parentEl).one('animationend', function() {\n              return $(parentEl).removeClass('new');\n            });\n          }\n          if (newStatusId !== oldStatusId || newUsId !== oldUsId) {\n            deleteElement(itemEl);\n          }\n          return $scope.$apply(function() {\n            return $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex);\n          });\n        });\n        scroll = autoScroll([$('.taskboard-table-body')[0]], {\n          margin: 100,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$translate\", TaskboardSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardIssuesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardIssuesService = (function(superClass) {\n    extend(TaskboardIssuesService, superClass);\n\n    TaskboardIssuesService.$inject = [];\n\n    function TaskboardIssuesService() {\n      this.reset();\n    }\n\n    TaskboardIssuesService.prototype.reset = function() {\n      this.foldStatusChanged = {};\n      return this.issuesRaw = [];\n    };\n\n    TaskboardIssuesService.prototype.init = function(project, usersById, issueStatusById) {\n      this.issueStatusById = issueStatusById;\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardIssuesService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.toggleFold = function(issueId) {\n      this.foldStatusChanged[issueId] = !this.foldStatusChanged[issueId];\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.add = function(issue) {\n      this.issuesRaw = this.issuesRaw.concat(issue);\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.remove = function(issue) {\n      var item, key, ref;\n      ref = this.issuesRaw;\n      for (key in ref) {\n        item = ref[key];\n        if (issue.id === item.id) {\n          this.issuesRaw.splice(key, 1);\n          this.refresh();\n          return;\n        }\n      }\n    };\n\n    TaskboardIssuesService.prototype.set = function(issues) {\n      this.issuesRaw = issues;\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.getIssue = function(id) {\n      return this.milestoneIssues.find(function(issue) {\n        return issue.get('id') === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.getIssueModel = function(id) {\n      return _.find(this.issuesRaw, function(issue) {\n        return issue.id === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.replaceModel = function(issue) {\n      this.issuesRaw = _.map(this.issuesRaw, function(item) {\n        if (issue.id === item.id) {\n          return issue;\n        } else {\n          return item;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.refresh = function() {\n      var i, issue, issueModel, issues, len, ref;\n      issues = [];\n      ref = this.issuesRaw;\n      for (i = 0, len = ref.length; i < len; i++) {\n        issueModel = ref[i];\n        issue = {};\n        issue.foldStatusChanged = this.foldStatusChanged[issueModel.id];\n        issue.model = issueModel.getAttrs();\n        issue.modelName = issueModel.getName();\n        issue.id = issueModel.id;\n        issue.status = this.issueStatusById[issueModel.status];\n        issue.images = _.filter(issue.model.attachments, function(it) {\n          return !!it.thumbnail_card_url;\n        });\n        issue.assigned_to = this.usersById[issueModel.assigned_to];\n        issue.colorized_tags = _.map(issue.model.tags, function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        });\n        issues.push(issue);\n      }\n      return this.milestoneIssues = Immutable.fromJS(issues);\n    };\n\n    return TaskboardIssuesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardTasksService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardTasksService = (function(superClass) {\n    extend(TaskboardTasksService, superClass);\n\n    TaskboardTasksService.$inject = [];\n\n    function TaskboardTasksService() {\n      this.reset();\n    }\n\n    TaskboardTasksService.prototype.reset = function() {\n      this.tasksRaw = [];\n      this.foldStatusChanged = {};\n      this.usTasks = Immutable.Map();\n      this.tasksByUs = Immutable.Map();\n      return this.taskMap = Immutable.Map();\n    };\n\n    TaskboardTasksService.prototype.init = function(project, usersById) {\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardTasksService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.toggleFold = function(taskId) {\n      this.foldStatusChanged[taskId] = !this.foldStatusChanged[taskId];\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.add = function(task) {\n      this.tasksRaw = this.tasksRaw.concat(task);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.set = function(tasks) {\n      this.tasksRaw = tasks;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.setUserstories = function(userstories) {\n      return this.userstories = userstories;\n    };\n\n    TaskboardTasksService.prototype.refreshRawOrder = function() {\n      var i, len, ref, results, task;\n      this.order = {};\n      ref = this.tasksRaw;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        task = ref[i];\n        results.push(this.order[task.id] = task.taskboard_order);\n      }\n      return results;\n    };\n\n    TaskboardTasksService.prototype.assignOrders = function(order) {\n      order = _.invert(order);\n      this.order = _.assign(this.order, order);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.getTask = function(id) {\n      return this.taskMap.get(id);\n    };\n\n    TaskboardTasksService.prototype.replace = function(task) {\n      return this.taskMap = this.taskMap.set(task.get('id'), task);\n    };\n\n    TaskboardTasksService.prototype.getTaskModel = function(id) {\n      return _.find(this.tasksRaw, function(task) {\n        return task.id === id;\n      });\n    };\n\n    TaskboardTasksService.prototype.replaceModel = function(task) {\n      this.tasksRaw = _.map(this.tasksRaw, function(it) {\n        if (task.id === it.id) {\n          return task;\n        } else {\n          return it;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.move = function(id, usId, statusId, index) {\n      var afterDestination, beforeDestination, i, it, j, key, len, len1, previous, previousWithTheSameOrder, setOrders, taksWithoutMoved, task, taskByUsStatus;\n      task = this.getTaskModel(id);\n      taskByUsStatus = _.filter(this.tasksRaw, (function(_this) {\n        return function(task) {\n          return task.status === statusId && task.user_story === usId;\n        };\n      })(this));\n      taskByUsStatus = _.sortBy(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      taksWithoutMoved = _.filter(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return it.id !== id;\n        };\n      })(this));\n      beforeDestination = _.slice(taksWithoutMoved, 0, index);\n      afterDestination = _.slice(taksWithoutMoved, index);\n      setOrders = {};\n      previous = beforeDestination[beforeDestination.length - 1];\n      previousWithTheSameOrder = _.filter(beforeDestination, (function(_this) {\n        return function(it) {\n          return _this.order[it.id] === _this.order[previous.id];\n        };\n      })(this));\n      if (previousWithTheSameOrder.length > 1) {\n        for (i = 0, len = previousWithTheSameOrder.length; i < len; i++) {\n          it = previousWithTheSameOrder[i];\n          setOrders[it.id] = this.order[it.id];\n        }\n      }\n      if (!previous) {\n        this.order[task.id] = 0;\n      } else if (previous) {\n        this.order[task.id] = this.order[previous.id] + 1;\n      }\n      for (key = j = 0, len1 = afterDestination.length; j < len1; key = ++j) {\n        it = afterDestination[key];\n        this.order[it.id] = this.order[task.id] + key + 1;\n      }\n      task.status = statusId;\n      task.user_story = usId;\n      task.taskboard_order = this.order[task.id];\n      this.refresh();\n      return {\n        \"task_id\": task.id,\n        \"order\": this.order[task.id],\n        \"set_orders\": setOrders\n      };\n    };\n\n    TaskboardTasksService.prototype.refresh = function() {\n      var i, j, k, len, len1, len2, model, ref, status, task, taskModel, taskStatusList, tasks, us, usTasks;\n      if (!this.project) {\n        return;\n      }\n      this.tasksRaw = _.sortBy(this.tasksRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      tasks = this.tasksRaw;\n      taskStatusList = _.sortBy(this.project.task_statuses, \"order\");\n      usTasks = {};\n      ref = _.union(this.userstories, [\n        {\n          id: null\n        }\n      ]);\n      for (i = 0, len = ref.length; i < len; i++) {\n        us = ref[i];\n        usTasks[us.id] = {};\n        for (j = 0, len1 = taskStatusList.length; j < len1; j++) {\n          status = taskStatusList[j];\n          usTasks[us.id][status.id] = [];\n        }\n      }\n      for (k = 0, len2 = tasks.length; k < len2; k++) {\n        taskModel = tasks[k];\n        if ((usTasks[taskModel.user_story] != null) && (usTasks[taskModel.user_story][taskModel.status] != null)) {\n          task = {};\n          if (!this.tasksByUs.get(taskModel.user_story)) {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, Immutable.fromJS([taskModel.id]));\n          } else {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, this.tasksByUs.get(taskModel.user_story).push(taskModel.id));\n          }\n          model = taskModel.getAttrs();\n          task.foldStatusChanged = this.foldStatusChanged[taskModel.id];\n          task.model = model;\n          task.images = _.filter(model.attachments, function(it) {\n            return !!it.thumbnail_card_url;\n          });\n          task.id = taskModel.id;\n          task.assigned_to = this.usersById[taskModel.assigned_to];\n          task.colorized_tags = _.map(task.model.tags, (function(_this) {\n            return function(tag) {\n              return {\n                name: tag[0],\n                color: tag[1]\n              };\n            };\n          })(this));\n          this.taskMap = this.taskMap.set(task.id, Immutable.fromJS(task));\n          usTasks[taskModel.user_story][taskModel.status].push(task.id);\n        }\n      }\n      return this.usTasks = Immutable.fromJS(usTasks);\n    };\n\n    return TaskboardTasksService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanUserstoriesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  KanbanUserstoriesService = (function(superClass) {\n    extend(KanbanUserstoriesService, superClass);\n\n    KanbanUserstoriesService.$inject = [\"$translate\"];\n\n    function KanbanUserstoriesService(translate) {\n      this.translate = translate;\n      this.reset();\n    }\n\n    KanbanUserstoriesService.prototype.reset = function(resetSwimlanesList, resetArchivedStatus, resetHideStatud) {\n      if (resetSwimlanesList == null) {\n        resetSwimlanesList = true;\n      }\n      if (resetArchivedStatus == null) {\n        resetArchivedStatus = true;\n      }\n      if (resetHideStatud == null) {\n        resetHideStatud = true;\n      }\n      this.userstoriesRaw = [];\n      this.swimlanes = [];\n      this.foldStatusChanged = {};\n      this.usByStatus = Immutable.Map();\n      this.usMap = Immutable.Map();\n      this.usByStatusSwimlanes = Immutable.Map();\n      if (resetHideStatud) {\n        this.statusHide = [];\n      }\n      if (resetArchivedStatus) {\n        this.archivedStatus = [];\n      }\n      if (resetSwimlanesList) {\n        return this.swimlanesList = Immutable.List();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.init = function(project, swimlanes, usersById) {\n      this.project = project;\n      this.swimlanes = swimlanes;\n      return this.usersById = usersById;\n    };\n\n    KanbanUserstoriesService.prototype.resetFolds = function() {\n      return this.foldStatusChanged = {};\n    };\n\n    KanbanUserstoriesService.prototype.toggleFold = function(usId) {\n      this.foldStatusChanged[usId] = !this.foldStatusChanged[usId];\n      return this.refreshUserStory(usId);\n    };\n\n    KanbanUserstoriesService.prototype.set = function(userstories) {\n      this.userstoriesRaw = userstories;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    KanbanUserstoriesService.prototype.initUsByStatusList = function(userstories) {\n      var key, results, status, usModel;\n      results = [];\n      for (key in userstories) {\n        usModel = userstories[key];\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          results.push(this.usByStatus = this.usByStatus.set(status, Immutable.List()));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    KanbanUserstoriesService.prototype.remove = function(usModel) {\n      var status;\n      this.userstoriesRaw = this.userstoriesRaw.filter((function(_this) {\n        return function(it) {\n          return it.id !== usModel.id;\n        };\n      })(this));\n      delete this.order[usModel.id];\n      status = String(usModel.status);\n      this.usMap = this.usMap[\"delete\"](usModel.id);\n      this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).filter((function(_this) {\n        return function(id) {\n          return id !== usModel.id;\n        };\n      })(this)));\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.add = function(usList) {\n      var key, status, us, usModel;\n      if (!Array.isArray(usList)) {\n        usList = [usList];\n      }\n      usList = _.sortBy(usList, ['kanban_order']);\n      this.userstoriesRaw = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return !usList.find(function(it) {\n            return it.id === us.id;\n          });\n        };\n      })(this));\n      this.userstoriesRaw = this.userstoriesRaw.concat(usList);\n      this.userstoriesRaw = this.userstoriesRaw.map((function(_this) {\n        return function(us) {\n          return us;\n        };\n      })(this));\n      this.refreshRawOrder();\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      for (key in usList) {\n        usModel = usList[key];\n        us = this.retrieveUserStoryData(usModel);\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          this.usByStatus = this.usByStatus.set(status, Immutable.List());\n        }\n        if (!this.usMap.get(usModel.id)) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n          this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).filter((function(_this) {\n            return function(id) {\n              return id !== usModel.id;\n            };\n          })(this)).push(usModel.id));\n        }\n      }\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.addArchivedStatus = function(statusId) {\n      return this.archivedStatus.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      var status, us;\n      us = this.usMap.get(usId);\n      status = us != null ? us.getIn(['model', 'status']) : void 0;\n      return this.archivedStatus.indexOf(status) !== -1 && this.statusHide.indexOf(status) !== -1;\n    };\n\n    KanbanUserstoriesService.prototype.hideStatus = function(statusId) {\n      this.deleteStatus(statusId);\n      return this.statusHide.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.showStatus = function(statusId) {\n      return _.remove(this.statusHide, function(it) {\n        return it === statusId;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.getStatus = function(statusId, swimlaneId) {\n      return _.filter(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return it.status === statusId && (!swimlaneId || it.swimlane === swimlaneId);\n        };\n      })(this));\n    };\n\n    KanbanUserstoriesService.prototype.deleteStatus = function(statusId) {\n      var toDelete;\n      toDelete = _.filter(this.userstoriesRaw, function(us) {\n        return us.status === statusId;\n      });\n      toDelete = _.map(function(it) {\n        return it.id;\n      });\n      return this.archived = _.difference(this.archived, toDelete);\n    };\n\n    KanbanUserstoriesService.prototype.refreshRawOrder = function() {\n      var i, it, len, ref, results;\n      this.order = {};\n      if (this.userstoriesRaw) {\n        ref = this.userstoriesRaw;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          it = ref[i];\n          results.push(this.order[it.id] = it.kanban_order);\n        }\n        return results;\n      }\n    };\n\n    KanbanUserstoriesService.prototype.assignOrders = function(order) {\n      this.order = _.assign(this.order, order);\n      return this.refresh(false);\n    };\n\n    KanbanUserstoriesService.prototype.move = function(usList, statusId, swimlaneId, index, previousCard, nextCard) {\n      var afterDestination, i, initialLength, j, key, len, len1, previousUsIndex, previousUsOrder, us, usByStatus, usByStatusWithoutMoved, usId, usModel;\n      usByStatus = this.getStatus(statusId, swimlaneId);\n      usByStatus = _.sortBy(usByStatus, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      if (previousCard) {\n        previousUsOrder = this.order[previousCard] + 1;\n        previousUsIndex = (usByStatus.findIndex((function(_this) {\n          return function(it) {\n            return it.id === previousCard;\n          };\n        })(this))) + 1;\n      } else {\n        previousUsOrder = 0;\n        previousUsIndex = 0;\n      }\n      usByStatusWithoutMoved = _.filter(usByStatus, function(listIt) {\n        return !_.find(usList, function(moveIt) {\n          return listIt.id === moveIt;\n        });\n      });\n      afterDestination = _.slice(usByStatusWithoutMoved, previousUsIndex);\n      initialLength = usList.length + 1;\n      for (key = i = 0, len = afterDestination.length; i < len; key = ++i) {\n        usModel = afterDestination[key];\n        this.order[usModel.id] = previousUsOrder + initialLength + key;\n      }\n      for (key = j = 0, len1 = usList.length; j < len1; key = ++j) {\n        usId = usList[key];\n        usModel = this.getUsModel(usId);\n        usModel.status = statusId;\n        usModel.swimlane = swimlaneId;\n        this.order[usModel.id] = previousUsOrder + key;\n        us = this.retrieveUserStoryData(usModel);\n        this.usMap = this.usMap.set(us.id, Immutable.fromJS(us));\n      }\n      this.refresh(false);\n      return {\n        statusId: statusId,\n        swimlaneId: swimlaneId,\n        afterUserstoryId: previousCard,\n        beforeUserstoryId: nextCard,\n        bulkUserstories: usList\n      };\n    };\n\n    KanbanUserstoriesService.prototype.moveToEnd = function(id, statusId) {\n      var us;\n      us = this.getUsModel(id);\n      this.order[us.id] = -1;\n      us.status = statusId;\n      us.kanban_order = this.order[us.id];\n      this.refresh(false);\n      return {\n        \"us_id\": us.id,\n        \"order\": -1\n      };\n    };\n\n    KanbanUserstoriesService.prototype.replace = function(us) {\n      return this.usMap = this.usMap.set(us.get('id'), us);\n    };\n\n    KanbanUserstoriesService.prototype.replaceModel = function(usModel) {\n      var us;\n      this.userstoriesRaw = _.map(this.userstoriesRaw, function(usItem) {\n        if (usModel.id === usItem.id) {\n          return usModel;\n        } else {\n          return usItem;\n        }\n      });\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.getUs = function(id) {\n      return this.usMap.get(id);\n    };\n\n    KanbanUserstoriesService.prototype.getUsModel = function(id) {\n      return _.find(this.userstoriesRaw, function(us) {\n        return us.id === id;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.refreshUserStory = function(usId) {\n      var us, usModel;\n      usModel = this.getUsModel(usId);\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usId, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.retrieveUserStoryData = function(usModel) {\n      var model, us;\n      us = {};\n      model = usModel.getAttrs();\n      us.foldStatusChanged = this.foldStatusChanged[usModel.id];\n      us.model = model;\n      us.images = _.filter(model.attachments, function(it) {\n        return !!it.thumbnail_card_url;\n      });\n      us.id = usModel.id;\n      us.swimlane = usModel.swimlane;\n      us.assigned_to = this.usersById[usModel.assigned_to];\n      us.assigned_users = [];\n      usModel.assigned_users.forEach((function(_this) {\n        return function(assignedUserId) {\n          var assignedUserData;\n          assignedUserData = _this.usersById[assignedUserId];\n          if (assignedUserData) {\n            return us.assigned_users.push(assignedUserData);\n          }\n        };\n      })(this));\n      us.assigned_users_preview = us.assigned_users.slice(0, 3);\n      us.colorized_tags = _.map(us.model.tags, (function(_this) {\n        return function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        };\n      })(this));\n      return us;\n    };\n\n    KanbanUserstoriesService.prototype.refresh = function(refreshUsMap, refreshSwimlanes) {\n      var collection, key, ref, us, usModel;\n      if (refreshUsMap == null) {\n        refreshUsMap = true;\n      }\n      if (refreshSwimlanes == null) {\n        refreshSwimlanes = true;\n      }\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      collection = {};\n      ref = this.userstoriesRaw;\n      for (key in ref) {\n        usModel = ref[key];\n        us = this.retrieveUserStoryData(usModel);\n        if (!collection[usModel.status]) {\n          collection[usModel.status] = [];\n        }\n        collection[usModel.status] = collection[usModel.status].filter((function(_this) {\n          return function(id) {\n            return id !== usModel.id;\n          };\n        })(this));\n        collection[usModel.status].push(usModel.id);\n        if (refreshUsMap) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n        }\n      }\n      this.usByStatus = Immutable.fromJS(collection);\n      if (refreshSwimlanes) {\n        return this.refreshSwimlanes();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.refreshSwimlanes = function() {\n      var emptySwimlane, emptySwimlaneExists, userstoriesNoSwimlane;\n      if (!this.swimlanes || !this.swimlanes.length) {\n        return;\n      }\n      this.swimlanesList = Immutable.List();\n      this.usByStatusSwimlanes = Immutable.Map();\n      userstoriesNoSwimlane = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return us.swimlane === null;\n        };\n      })(this));\n      emptySwimlaneExists = this.swimlanesList.filter((function(_this) {\n        return function(swimlane) {\n          return swimlane.id === null;\n        };\n      })(this));\n      if (userstoriesNoSwimlane.length && !emptySwimlaneExists.size) {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n        emptySwimlane = {\n          id: -1,\n          kanban_order: 1,\n          name: this.translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n        };\n        this.swimlanesList = this.swimlanesList.insert(0, emptySwimlane);\n      } else {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n      return this.swimlanesList.forEach((function(_this) {\n        return function(swimlane) {\n          var swimlaneUsByStatus;\n          swimlaneUsByStatus = Immutable.Map();\n          _this.usByStatus.forEach(function(usList, statusId) {\n            var usListSwimlanes;\n            usListSwimlanes = usList.filter(function(usId) {\n              var swimlaneId, us;\n              us = _this.usMap.get(usId);\n              swimlaneId = swimlane.id === -1 ? null : swimlane.id;\n              return us.getIn(['model', 'swimlane']) === swimlaneId;\n            });\n            return swimlaneUsByStatus = swimlaneUsByStatus.set(Number(statusId), usListSwimlanes);\n          });\n          return _this.usByStatusSwimlanes = _this.usByStatusSwimlanes.set(swimlane.id, swimlaneUsByStatus);\n        };\n      })(this));\n    };\n\n    return KanbanUserstoriesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardActionsDirective, CardAssignedToDirective, CardDataDirective, CardSvgTemplate, KanbanArchivedShowStatusHeaderDirective, KanbanArchivedStatusIntroDirective, KanbanController, KanbanDirective, KanbanSquishColumnDirective, KanbanSwimlaneDirective, KanbanTaskboardColumnDirective, KanbanWipLimitDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanController = (function(superClass) {\n    extend(KanbanController, superClass);\n\n    KanbanController.prototype.excludeFilters = [\"status\"];\n\n    KanbanController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgModel\", \"tgKanbanUserstories\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLightboxFactory\", \"tgLoader\", \"$timeout\"];\n\n    KanbanController.prototype.storeCustomFiltersName = 'kanban-custom-filters';\n\n    KanbanController.prototype.storeFiltersName = 'kanban-filters';\n\n    KanbanController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function KanbanController(scope, rootscope, repo, confirm, rs1, rs2, params1, q, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, model1, kanbanUserstoriesService1, storage, filterRemoteStorageService, projectService1, lightboxFactory, tgLoader, timeout1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.model = model1;\n      this.kanbanUserstoriesService = kanbanUserstoriesService1;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService1;\n      this.lightboxFactory = lightboxFactory;\n      this.tgLoader = tgLoader;\n      this.timeout = timeout1;\n      this.renderUserStories = bind(this.renderUserStories, this);\n      this.changeUsAssignedUsers = bind(this.changeUsAssignedUsers, this);\n      bindMethods(this);\n      this.kanbanUserstoriesService.reset();\n      this.openFilter = false;\n      this.selectedUss = {};\n      this.movedUs = [];\n      this.foldedSwimlane = Immutable.Map();\n      this.isFirstLoad = true;\n      this.renderBatching = true;\n      this.isLightboxOpened = false;\n      this.isRefreshNeeded = false;\n      if (this.applyStoredFilters(this.params.pslug, \"kanban-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"KANBAN.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usByStatus\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatus;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usMap\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usByStatusSwimlanes\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatusSwimlanes;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"swimlanesList\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.swimlanesList;\n        };\n      })(this));\n    }\n\n    KanbanController.prototype.cleanSelectedUss = function() {\n      var key, results;\n      results = [];\n      for (key in this.selectedUss) {\n        results.push(this.selectedUss[key] = false);\n      }\n      return results;\n    };\n\n    KanbanController.prototype.toggleSelectedUs = function(usId) {\n      return this.selectedUss[usId] = !this.selectedUss[usId];\n    };\n\n    KanbanController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"KANBAN.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    KanbanController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      zoomLevel = Number(zoomLevel);\n      if (this.zoomLevel === zoomLevel) {\n        return null;\n      }\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 2 && previousZoomLevel <= 2) {\n        this.zoomLoading = true;\n        return this.loadUserstories().then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.filtersReloadContent = debounceLeading(100, function() {\n      return this.loadUserstories().then((function(_this) {\n        return function(result) {\n          if (!result) {\n            return;\n          }\n          if (_this.scope.swimlanesList.size && !result.length) {\n            return _this.foldedSwimlane = _this.foldedSwimlane.set(_this.scope.swimlanesList.first().id.toString(), false);\n          }\n        };\n      })(this));\n    });\n\n    KanbanController.prototype.moveToTopDropdown = function(us) {\n      return this.moveUsToTop(us.toJS().model);\n    };\n\n    KanbanController.prototype.moveUsToTop = function(uss) {\n      var nextUsId, us, userstories;\n      if (!Array.isArray(uss)) {\n        uss = [uss];\n      }\n      us = uss[0];\n      nextUsId = null;\n      userstories = [];\n      this.movedUs.push(us.id);\n      this.timeout((function(_this) {\n        return function() {\n          return _this.movedUs = [];\n        };\n      })(this), 1000, false);\n      if (us.swimlane) {\n        userstories = this.scope.usByStatusSwimlanes.getIn([us.swimlane, us.status]);\n      } else {\n        userstories = this.scope.usByStatus.get(us.status.toString());\n      }\n      if (userstories && userstories.size) {\n        nextUsId = userstories.get(0);\n      }\n      if (nextUsId) {\n        return this.moveUs(null, uss, us.status, us.swimlane, 0, null, nextUsId);\n      }\n    };\n\n    KanbanController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, us, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(us);\n            _this.scope.$broadcast(\"redraw:wip\");\n            if (position === 'top') {\n              return _this.moveUsToTop(us);\n            }\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, uss, position) {\n          if (position == null) {\n            position = 'bottom';\n          }\n          _this.confirm.notify(\"success\");\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(uss);\n            _this.scope.$broadcast(\"redraw:wip\");\n            if (position === 'top') {\n              return _this.moveUsToTop(uss);\n            }\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, us) {\n          return _this.refreshTagsColors().then(function() {\n            var lastUsId, newOrder, oldStatus, status;\n            oldStatus = _this.kanbanUserstoriesService.getUsModel(us.id).status;\n            if (oldStatus !== us.status) {\n              status = _this.scope.usByStatus.get(us.status.toString());\n              if (status) {\n                lastUsId = status.last();\n                newOrder = _this.scope.usMap.get(lastUsId).getIn(['model', 'kanban_order']) + 1;\n                us.kanban_order = newOrder;\n              }\n            }\n            _this.kanbanUserstoriesService.replaceModel(us);\n            _this.kanbanUserstoriesService.refreshRawOrder();\n            return _this.kanbanUserstoriesService.refresh(false);\n          });\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:deleted\", (function(_this) {\n        return function(event, us) {\n          return _this.kanbanUserstoriesService.remove(us);\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:move\", this.moveUs);\n      this.scope.$on(\"kanban:show-userstories-for-status\", this.loadUserStoriesForStatus);\n      this.scope.$on(\"kanban:hide-userstories-for-status\", this.hideUserStoriesForStatus);\n      this.scope.$on(\"lightbox:opened\", (function(_this) {\n        return function() {\n          return _this.isLightboxOpened = true;\n        };\n      })(this));\n      return this.scope.$on(\"lightbox:closed\", (function(_this) {\n        return function() {\n          _this.isLightboxOpened = false;\n          if (_this.isRefreshNeeded) {\n            _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            return _this.isRefreshNeeded = false;\n          }\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged = function() {\n      this.tgLoader.start();\n      return this.projectService.fetchProject().then((function(_this) {\n        return function() {\n          return _this.loadInitialData();\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.initializeSubscription = function() {\n      var randomTimeout, routingKeyProject, routingKeyUserstories;\n      randomTimeout = taiga.randomInt(700, 1000);\n      routingKeyUserstories = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKeyUserstories, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          return _this.eventsLoadUserstories(message);\n        };\n      })(this)));\n      routingKeyProject = \"changes.project.\" + this.scope.projectId + \".projects\";\n      return this.events.subscribe(this.scope, routingKeyProject, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          var ref;\n          if ((ref = message.matches) === \"projects.swimlane\" || ref === \"projects.swimlaneuserstorystatus\" || ref === \"projects.userstorystatus\") {\n            if (_this.isLightboxOpened) {\n              return _this.isRefreshNeeded = true;\n            } else {\n              return _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            }\n          }\n        };\n      })(this)));\n    };\n\n    KanbanController.prototype.addNewUs = function(type, statusId) {\n      var swimlane;\n      swimlane = null;\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project,\n            'statusId': statusId,\n            'swimlane': swimlane\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, statusId, swimlane);\n      }\n    };\n\n    KanbanController.prototype.editUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-edit', true);\n      this.kanbanUserstoriesService.replace(us);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingUserStory) {\n          _this.rs2.attachments.list(\"us\", us.get('id'), us.getIn(['model', 'project'])).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': editingUserStory,\n              'statusList': _this.scope.usStatusList,\n              'attachments': attachments.toJS()\n            });\n          });\n          us = us.set('loading-edit', false);\n          return _this.kanbanUserstoriesService.replace(us);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.deleteUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-delete', true);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingUserStory) {\n          var message, title;\n          us = us.set('loading-delete', false);\n          title = _this.translate.instant(\"US.TITLE_DELETE_ACTION\");\n          message = deletingUserStory.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingUserStory);\n            promise.then(function() {\n              var model;\n              model = us.toJS().model;\n              _this.scope.$broadcast(\"kanban:us:deleted\", model);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.showPlaceHolder = function(statusId, swimlaneId) {\n      var firstStatus, firstSwimlane;\n      firstStatus = this.scope.usStatusList[0].id === statusId && !this.kanbanUserstoriesService.userstoriesRaw.length;\n      if (swimlaneId) {\n        firstSwimlane = this.scope.swimlanesList.first().id === swimlaneId;\n        return firstStatus && firstSwimlane;\n      }\n      return firstStatus;\n    };\n\n    KanbanController.prototype.toggleFold = function(id) {\n      return this.kanbanUserstoriesService.toggleFold(id);\n    };\n\n    KanbanController.prototype.toggleSwimlane = function(id) {\n      this.foldedSwimlane = this.foldedSwimlane.set(id.toString(), !this.foldedSwimlane.get(id.toString()));\n      this.rs.kanban.storeSwimlanesModes(this.scope.projectId, this.foldedSwimlane.toJS());\n      return this.timeout((function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"redraw:wip\");\n        };\n      })(this), 100, false);\n    };\n\n    KanbanController.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      return this.kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId);\n    };\n\n    KanbanController.prototype.changeUsAssignedUsers = function(id) {\n      var item, onClose;\n      item = this.kanbanUserstoriesService.getUsModel(id);\n      onClose = (function(_this) {\n        return function(assignedUsersIds) {\n          var ref;\n          item.assigned_users = assignedUsersIds;\n          if ((ref = item.assigned_to, indexOf.call(assignedUsersIds, ref) < 0) && assignedUsersIds.length > 0) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          if (assignedUsersIds.length === 0) {\n            item.assigned_to = null;\n          }\n          _this.kanbanUserstoriesService.replaceModel(item);\n          return _this.repo.save(item).then(function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_users') || _this.isFilterDataTypeSelected('role')) {\n              return _this.filtersReloadContent();\n            }\n          });\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    KanbanController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.renderBatch = function(clean) {\n      var newUs;\n      if (clean == null) {\n        clean = false;\n      }\n      this.renderInProgress = true;\n      newUs = _.take(this.queue, this.batchSize);\n      this.rendered = _.concat(this.rendered, newUs);\n      this.queue = _.drop(this.queue, this.batchSize);\n      if (clean) {\n        this.kanbanUserstoriesService.set(newUs);\n        this.batchTimings = [200, 100, 50];\n      } else {\n        this.kanbanUserstoriesService.add(newUs);\n      }\n      if (this.queue.length > 0) {\n        timeout = this.batchTimings.shift() || 20;\n        return this.timeout(this.renderBatch, timeout);\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            _this.rootscope.$broadcast(\"kanban:userstories:loaded\", _this.rendered);\n            _this.scope.$broadcast(\"userstories:loaded\", _this.rendered);\n            _this.renderInProgress = false;\n            return _this.timeout(function() {\n              return _this.scope.$broadcast(\"redraw:wip\");\n            }, 100, false);\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.renderUserStories = function(userstories) {\n      var userstoriesMap;\n      userstories = _.sortBy(userstories, 'kanban_order');\n      this.kanbanUserstoriesService.initUsByStatusList(userstories);\n      if (this.renderBatching) {\n        userstoriesMap = _.groupBy(userstories, 'status');\n        this.rendered = [];\n        this.queue = [];\n        this.batchSize = 0;\n        while (this.queue.length < userstories.length) {\n          _.each(this.scope.project.us_statuses, (function(_this) {\n            return function(x) {\n              var ref;\n              if (((ref = userstoriesMap[x.id]) != null ? ref.length : void 0) > 0) {\n                _this.queue = _.concat(_this.queue, _.take(userstoriesMap[x.id], 10));\n                return userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 10);\n              }\n            };\n          })(this));\n          if (!this.batchSize) {\n            this.batchSize = 100;\n          }\n        }\n        return this.renderBatch(true);\n      } else {\n        return this.kanbanUserstoriesService.set(userstories);\n      }\n    };\n\n    KanbanController.prototype.loadUserstoriesParams = function() {\n      var locationParams, params;\n      params = {\n        status__is_archived: false\n      };\n      if (this.zoomLevel >= 2) {\n        params.include_attachments = 1;\n        params.include_tasks = 1;\n      }\n      locationParams = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return params;\n    };\n\n    KanbanController.prototype.eventsLoadUserstories = function(data) {\n      var eventUserstories, modifiedUs, params;\n      eventUserstories = [];\n      if (!Array.isArray(data.pk)) {\n        eventUserstories = [data.pk];\n      } else {\n        eventUserstories = data.pk;\n      }\n      modifiedUs = eventUserstories.filter((function(_this) {\n        return function(us) {\n          return !!_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n            return raw.id === us;\n          });\n        };\n      })(this));\n      params = this.loadUserstoriesParams();\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          var newUss;\n          newUss = userstories.filter(function(us) {\n            return !_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n              return raw.id === us.id;\n            });\n          });\n          userstories.filter(function(us) {\n            return modifiedUs.includes(us.id);\n          }).forEach(function(us) {\n            _this.kanbanUserstoriesService.replaceModel(us);\n            return _this.kanbanUserstoriesService.refreshRawOrder();\n          });\n          if (newUss.length) {\n            _this.kanbanUserstoriesService.add(newUss);\n          }\n          return _this.kanbanUserstoriesService.refresh(false);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadUserstories = function() {\n      var archivedPromises, lastSearch, loadPromises, openArchived, params, promise;\n      params = this.loadUserstoriesParams();\n      this.lastSearch = this.filterQ;\n      lastSearch = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      loadPromises = [this.rs.userstories.listAll(this.scope.projectId, params), this.loadSwimlanes()];\n      archivedPromises = [];\n      openArchived = _.difference(this.kanbanUserstoriesService.archivedStatus, this.kanbanUserstoriesService.statusHide);\n      if (openArchived.length) {\n        archivedPromises = openArchived.map((function(_this) {\n          return function(archivedStatusId) {\n            return _this.loadUserStoriesForStatus({}, archivedStatusId);\n          };\n        })(this));\n      }\n      loadPromises = loadPromises.concat(archivedPromises);\n      promise = this.q.all(loadPromises).then((function(_this) {\n        return function(result) {\n          var swimlanes, userstories;\n          if (lastSearch !== _this.lastSearch) {\n            return;\n          }\n          _this.kanbanUserstoriesService.reset(false, false, false);\n          userstories = result[0];\n          swimlanes = result[1];\n          if (result.length > 2) {\n            result.slice(2).forEach(function(archivedRedult) {\n              return userstories = userstories.concat(archivedRedult);\n            });\n          }\n          _this.notFoundUserstories = false;\n          if (!userstories.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(_this.location.search()).length)) {\n            _this.notFoundUserstories = true;\n          }\n          _this.kanbanUserstoriesService.init(_this.scope.project, swimlanes, _this.scope.usersById);\n          _this.tgLoader.pageLoaded();\n          _this.renderUserStories(userstories);\n          return userstories;\n        };\n      })(this));\n      return promise;\n    };\n\n    KanbanController.prototype.loadUserStoriesForStatus = function(ctx, statusId) {\n      var filteredStatus, params;\n      filteredStatus = this.location.search().status;\n      if (filteredStatus) {\n        filteredStatus = filteredStatus.split(\",\").map(function(it) {\n          return parseInt(it, 10);\n        });\n        if (filteredStatus.indexOf(statusId) === -1) {\n          return;\n        }\n      }\n      params = {\n        status: statusId,\n        include_attachments: true,\n        include_tasks: true\n      };\n      if (this.filterQ) {\n        params.q = this.filterQ;\n      }\n      params = _.merge(params, this.location.search());\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          _this.waitEmptyQuote(function() {\n            return _this.scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories);\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.waitEmptyQuote = function(cb) {\n      if (this.queue.length > 0) {\n        return requestAnimationFrame((function(_this) {\n          return function() {\n            return _this.waitEmptyQuote(cb);\n          };\n        })(this));\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            return cb();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.hideUserStoriesForStatus = function(ctx, statusId) {\n      return this.scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId);\n    };\n\n    KanbanController.prototype.loadKanban = function() {\n      return this.q.all([this.refreshTagsColors(), this.loadUserstories()]);\n    };\n\n    KanbanController.prototype.loadSwimlanes = function() {\n      return this.rs.swimlanes.list(this.scope.projectId).then((function(_this) {\n        return function(swimlanes) {\n          _this.scope.swimlanes = swimlanes;\n          _this.scope.swimlanesStatuses = {};\n          _this.scope.swimlanes.forEach(function(swimlane) {\n            return _this.scope.swimlanesStatuses[swimlane.id] = swimlane.statuses;\n          });\n          _this.scope.swimlanesStatuses[-1] = _this.scope.project.us_statuses;\n          return _this.scope.swimlanes;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_kanban_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.projectId = project.id;\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.usCardVisibility = {};\n      this.scope.$emit(\"project:loaded\", project);\n      return project;\n    };\n\n    KanbanController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.foldedSwimlane = Immutable.fromJS(this.rs.kanban.getSwimlanesModes(project.id));\n      this.initialLoad = false;\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.loadKanban().then((function(_this) {\n        return function() {\n          return _this.timeout(function() {\n            return _this.initialLoad = true;\n          }, 0, true);\n        };\n      })(this));\n      return this.generateFilters();\n    };\n\n    KanbanController.prototype.moveUs = function(ctx, usList, newStatusId, newSwimlaneId, index, previousCard, nextCard) {\n      var apiNewSwimlaneId, data, promise;\n      this.cleanSelectedUss();\n      usList = _.map(usList, (function(_this) {\n        return function(us) {\n          return _this.kanbanUserstoriesService.getUsModel(us.id);\n        };\n      })(this));\n      this.rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, newSwimlaneId, index);\n      apiNewSwimlaneId = newSwimlaneId;\n      if (newSwimlaneId === -1) {\n        apiNewSwimlaneId = null;\n      }\n      data = this.kanbanUserstoriesService.move(usList.map((function(_this) {\n        return function(it) {\n          return it.id;\n        };\n      })(this)), newStatusId, apiNewSwimlaneId, index, previousCard, nextCard);\n      promise = this.rs.userstories.bulkUpdateKanbanOrder(this.scope.projectId, newStatusId, apiNewSwimlaneId, data.afterUserstoryId, data.beforeUserstoryId, data.bulkUserstories);\n      return promise.then((function(_this) {\n        return function() {\n          _this.scope.$broadcast(\"redraw:wip\");\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    return KanbanController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"KanbanController\", KanbanController);\n\n  KanbanDirective = function($repo, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _tableBody, board, watchKanbanSize;\n      watchKanbanSize = (function(_this) {\n        return function() {\n          var columnMargin, columns, kanbanStyles, resizeCb, resizeObserver;\n          columns = $el.find(\".task-colum-name\");\n          kanbanStyles = getComputedStyle($el[0]);\n          columnMargin = Number(kanbanStyles.getPropertyValue('--kanban-column-margin').trim().replace('px', '').split(' ')[1]);\n          resizeCb = function(entries) {\n            var width;\n            width = columns.toArray().reduce(function(acc, column) {\n              if (document.body.contains(column)) {\n                return acc + column.offsetWidth + columnMargin;\n              }\n              resizeObserver.unobserve(column);\n              return acc;\n            }, 0);\n            if (width > 0) {\n              return document.body.style.setProperty('--kanban-width', (width - columnMargin) + 'px');\n            }\n          };\n          resizeObserver = new ResizeObserver(resizeCb);\n          return columns.each(function(index, column) {\n            return resizeObserver.observe(column);\n          });\n        };\n      })(this);\n      board = initBoard();\n      board.events((function(_this) {\n        return function(event, entries) {\n          var visibleEntries;\n          if (event === 'SHOW_CARD') {\n            visibleEntries = entries.filter(function(entry) {\n              return entry.visible && !$scope.usCardVisibility[entry.id];\n            });\n            if (visibleEntries.length) {\n              $scope.$evalAsync(function() {\n                return visibleEntries.forEach(function(entry) {\n                  return $scope.usCardVisibility[entry.id] = true;\n                });\n              });\n            }\n          }\n        };\n      })(this));\n      $scope.taskColumnLoaded = function(event, status, swimlane) {\n        var column;\n        column = event.target[0];\n        return board.addSwimlane(column, status, swimlane);\n      };\n      $scope.cardLoaded = function(event, status, swimlane) {\n        return board.addCard(event.target[0], status, swimlane);\n      };\n      _tableBody = null;\n      $scope.isTableLoaded = false;\n      $scope.kanbanTableLoaded = function(event, swimlaneId) {\n        var tableBody, tableHeaderDom;\n        $scope.$evalAsync((function(_this) {\n          return function() {\n            if (swimlaneId) {\n              $scope.openSwimlane(swimlaneId);\n            }\n            return $scope.isTableLoaded = true;\n          };\n        })(this));\n        tableBody = event.target;\n        _tableBody = tableBody;\n        tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\");\n        tableBody.on(\"scroll\", function(event) {\n          var scroll;\n          scroll = -1 * event.currentTarget.scrollLeft;\n          return tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        });\n        watchKanbanSize();\n      };\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (_tableBody) {\n          return _tableBody.off();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective]);\n\n  KanbanArchivedShowStatusHeaderDirective = function($rootscope, $translate, kanbanUserstoriesService) {\n    var link, showArchivedText;\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\");\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch('ctrl.initialLoad', (function(_this) {\n        return function(initialLoad) {\n          var status;\n          if (!initialLoad) {\n            return;\n          }\n          unwatch();\n          status = $scope.$eval($attrs.tgKanbanArchivedShowStatusHeader);\n          kanbanUserstoriesService.addArchivedStatus(status.id);\n          kanbanUserstoriesService.hideStatus(status.id);\n          return $el.on(\"click\", function(event) {\n            return $scope.$apply(function() {\n              if (kanbanUserstoriesService.statusHide.includes(status.id)) {\n                $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id);\n                return kanbanUserstoriesService.showStatus(status.id);\n              }\n            });\n          });\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedShowStatusHeader\", [\"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedShowStatusHeaderDirective]);\n\n  KanbanArchivedStatusIntroDirective = function($translate, kanbanUserstoriesService) {\n    var link, userStories;\n    userStories = [];\n    link = function($scope, $el, $attrs) {\n      var status;\n      status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro);\n      $scope.$on(\"kanban:shown-userstories-for-status\", function(ctx, statusId, userStoriesLoaded) {\n        if (statusId === status.id) {\n          kanbanUserstoriesService.deleteStatus(statusId);\n          return kanbanUserstoriesService.add(userStoriesLoaded);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective]);\n\n  KanbanSquishColumnDirective = function(rs, projectService, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      $scope.foldStatus = function(status) {\n        if (!$scope.folds) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n        }\n        $scope.unfold = null;\n        $scope.folds[status.id] = !!!$scope.folds[status.id];\n        if (!$scope.folds[status.id]) {\n          $scope.unfold = status.id;\n        }\n        rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds);\n        if (kanbanUserstoriesService.archivedStatus.includes(status.id) && !kanbanUserstoriesService.statusHide.includes(status.id)) {\n          kanbanUserstoriesService.hideStatus(status.id);\n        }\n      };\n      return unwatch = $scope.$watch('ctrl.initialLoad', function(load) {\n        var archivedFolds, i, len, ref, status;\n        if (load && ((ref = $scope.usByStatus) != null ? ref.size : void 0)) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n          archivedFolds = $scope.usStatusList.filter(function(status) {\n            return status.is_archived;\n          });\n          for (i = 0, len = archivedFolds.length; i < len; i++) {\n            status = archivedFolds[i];\n            $scope.folds[status.id] = true;\n          }\n          return unwatch();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", \"tgKanbanUserstories\", KanbanSquishColumnDirective]);\n\n  KanbanWipLimitDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var redrawWipLimit, status;\n      status = $scope.$eval($attrs.tgKanbanWipLimit);\n      redrawWipLimit = (function(_this) {\n        return function() {\n          return $timeout(function() {\n            var cards, element, wipLimitClass;\n            cards = $el.find(\"tg-card\");\n            wipLimitClass = '';\n            element = null;\n            if (cards.length + 1 === status.wip_limit) {\n              wipLimitClass = 'one-left';\n              element = cards[cards.length - 1];\n            } else if (cards.length === status.wip_limit) {\n              wipLimitClass = 'reached';\n              element = cards[cards.length - 1];\n            } else if (cards.length > status.wip_limit) {\n              wipLimitClass = 'exceeded';\n              element = cards[status.wip_limit - 1];\n            }\n            $el.find(\".kanban-wip-limit\").remove();\n            if (element) {\n              return angular.element(element).after(\"<div class='kanban-wip-limit \" + wipLimitClass + \"'><span>WIP Limit</span></div>\");\n            }\n          }, 0, false);\n        };\n      })(this);\n      if (status && !status.is_archived) {\n        $scope.$on(\"redraw:wip\", redrawWipLimit);\n        $scope.$on(\"kanban:us:move\", redrawWipLimit);\n        $scope.$on(\"usform:new:success\", redrawWipLimit);\n        $scope.$on(\"usform:bulk:success\", redrawWipLimit);\n      }\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective]);\n\n  CardSvgTemplate = \"<tg-svg>\\n    <svg class=\\\"icon <%- svgIcon %>\\\" style=\\\"fill: <%- svgFill %>\\\">\\n        <use xlink:href=\\\"#<%- svgIcon %>\\\" attr-href=\\\"#<%- svgIcon %>\\\">\\n            <% if(svgTitle) { %>\\n            <title><%- svgTitle %></title>\\n            <% } %>\\n        </use>\\n    </svg>\\n</tg-svg>\";\n\n  CardAssignedToDirective = function($template, $translate, avatarService, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-assigned-to.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || [vm.item.get('assigned_to')]).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          },\n          loading: \"<img\\n    class='loading-spinner'\\n    src='/\" + window._version + \"/svg/spinner-circle.svg'\\n    alt='loading...'\\n/>\"\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            return $el.find('.card-user-avatar').on('click', function(event) {\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickAssignedTo({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardAssignedTo\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", CardAssignedToDirective]);\n\n  CardDataDirective = function($template, $translate, avatarService, projectService, dueDateService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-data.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || []).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          } else {\n            return console.error('invalid assigned_users', vm.item.get('assigned_users').toJS());\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          emptyTask: function() {\n            var tasks;\n            tasks = vm.item.getIn(['model', 'tasks']);\n            return !tasks || !tasks.size;\n          },\n          dueDateColor: function() {\n            return dueDateService.color({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          dueDateTitle: function() {\n            return dueDateService.title({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          totalAttachments: function() {\n            if (vm.type === 'task') {\n              return vm.item.getIn(['model', 'attachments']).size;\n            } else {\n              return vm.item.getIn(['model', 'total_attachments']);\n            }\n          },\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            return $el.html(html);\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardData\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", \"tgDueDateService\", CardDataDirective]);\n\n  CardActionsDirective = function($template, $translate, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-actions.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        return template({\n          vm: vm,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange, openPopup, removePopupOpenState;\n        initializeZoom = false;\n        openPopup = false;\n        removePopupOpenState = function() {\n          openPopup = false;\n          return $el.find(\".js-popup-button\").removeClass('popover-open');\n        };\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            openPopup = false;\n            return $el.find('.js-popup-button').on('click', function(event) {\n              var actions;\n              if (openPopup) {\n                return;\n              }\n              openPopup = true;\n              $(event.currentTarget).addClass('popover-open');\n              actions = [];\n              if (projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.EDIT'),\n                  icon: 'icon-edit',\n                  event: function() {\n                    return $scope.vm.onClickEdit({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                }, {\n                  text: $translate.instant('COMMON.CARD.ASSIGN_TO'),\n                  icon: 'icon-assign-to',\n                  event: function() {\n                    return $scope.vm.onClickAssignedTo({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              if (projectService.project.get('my_permissions').includes($scope.vm.getDeletePermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.DELETE'),\n                  icon: 'icon-trash',\n                  event: function() {\n                    return $scope.vm.onClickDelete({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              if (projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey()) && !$scope.vm.isFirst) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.MOVE_TO_TOP'),\n                  icon: 'icon-move-to-top',\n                  event: function() {\n                    return $scope.vm.onClickMoveToTop($scope.vm.item);\n                  }\n                });\n              }\n              return taiga.globalPopover(event.currentTarget, actions, {}, function() {\n                return removePopupOpenState();\n              });\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardActions\", [\"$tgTemplate\", \"$translate\", \"tgProjectService\", CardActionsDirective]);\n\n  KanbanSwimlaneDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addSwimlane, className, ctrl, currentSwimlane, tableHeaderDom;\n      tableHeaderDom = [];\n      addSwimlane = null;\n      ctrl = $scope.$parent.ctrl;\n      if (!ctrl) {\n        throw new Error('KanbanSwimlaneDirective ctrl not found');\n      }\n      $el.on(\"scroll\", function(event) {\n        var scroll;\n        if (!tableHeaderDom.length) {\n          tableHeaderDom = $el.find(\".kanban-swimlane-title\");\n        }\n        if (!addSwimlane) {\n          addSwimlane = $el.find(\".kanban-swimlane-add\");\n        }\n        scroll = event.currentTarget.scrollLeft;\n        tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        return addSwimlane.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n      });\n      currentSwimlane = null;\n      className = 'pending-to-open';\n      $scope.mouseleaveSwimlane = (function(_this) {\n        return function(event) {\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n            return currentSwimlane = null;\n          }\n        };\n      })(this);\n      $scope.mouseoverSwimlane = (function(_this) {\n        return function(event, swimlaneId) {\n          var isDragging, swimlane, timeoutId;\n          if (currentSwimlane && currentSwimlane.id === swimlaneId) {\n            return;\n          }\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n          }\n          swimlane = event.currentTarget;\n          if (swimlane.classList.contains('folded')) {\n            isDragging = !!document.querySelectorAll('tg-card.gu-mirror').length;\n            if (!isDragging) {\n              return;\n            }\n            swimlane.classList.add(className);\n            timeoutId = $timeout(function() {\n              swimlane.classList.remove(className);\n              return ctrl.toggleSwimlane(swimlaneId);\n            }, 1000);\n            return currentSwimlane = {\n              id: swimlaneId,\n              timeoutId: timeoutId,\n              el: swimlane\n            };\n          }\n        };\n      })(this);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSwimlane\", ['$timeout', KanbanSwimlaneDirective]);\n\n  KanbanTaskboardColumnDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $el.on(\"scroll\", function(event) {\n        var scroll, taskCounterDom;\n        scroll = event.currentTarget.scrollTop;\n        taskCounterDom = $el.find(\".kanban-task-counter\");\n        return taskCounterDom.css(\"transform\", \"translateY(\" + scroll + \"px)\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanTaskboardColumn\", [KanbanTaskboardColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanSortableDirective = function($repo, $rs, $rootscope, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var drake, init, oldIndex, unwatch;\n      drake = null;\n      oldIndex = null;\n      $scope.openSwimlane = (function(_this) {\n        return function(id) {\n          var containers;\n          containers = _.map($('.kanban-swimlane[data-swimlane=\"' + id + '\"] .taskboard-column'), function(item) {\n            return item;\n          });\n          return init(containers);\n        };\n      })(this);\n      init = (function(_this) {\n        return function(containers) {\n          var deleteElement, initialContainer, itemEl, newParentScope, nextCard, previousCard, scroll, tdom;\n          if (!($scope.project.my_permissions.indexOf(\"modify_us\") > -1)) {\n            return;\n          }\n          if (drake) {\n            containers.forEach(function(container) {\n              return drake.containers.push(container);\n            });\n            return;\n          }\n          newParentScope = null;\n          itemEl = null;\n          tdom = $el;\n          deleteElement = function(itemEl) {\n            itemEl.off();\n            return itemEl.remove();\n          };\n          drake = dragula(containers, {\n            copySortSource: false,\n            copy: false,\n            moves: function(item) {\n              return $(item).is('tg-card');\n            }\n          });\n          initialContainer = null;\n          drake.on('over', function(item, container) {\n            if (!initialContainer) {\n              return initialContainer = container;\n            } else if (container !== initialContainer) {\n              return $(container).addClass('target-drop');\n            }\n          });\n          drake.on('out', function(item, container) {\n            if (container !== initialContainer) {\n              return $(container).removeClass('target-drop');\n            }\n          });\n          drake.on('drag', function(item) {\n            var dragMultipleItems, firstElement, parentEl;\n            dragMultipleItems = window.dragMultiple.getElements();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElement = dragMultipleItems[0];\n            parentEl = item.parentNode;\n            oldIndex = $(parentEl).find('tg-card').index(firstElement);\n            initialContainer = null;\n            return window.dragMultiple.start(item, containers);\n          });\n          drake.on('cloned', function(item, dropTarget) {\n            return $(item).addClass('multiple-drag-mirror');\n          });\n          previousCard = null;\n          nextCard = null;\n          drake.on('drop', function(item, target, source, sibling) {\n            var next, prev;\n            previousCard = null;\n            nextCard = null;\n            prev = $(item).prevAll('tg-card:not(.gu-transit)');\n            next = $(item).nextAll('tg-card:not(.gu-transit)');\n            previousCard = null;\n            if (prev.length && prev[0].dataset.id) {\n              previousCard = Number(prev[0].dataset.id);\n            }\n            nextCard = null;\n            if (!previousCard && next.length && next[0].dataset.id) {\n              return nextCard = Number(next[0].dataset.id);\n            }\n          });\n          drake.on('dragend', function(item, target, source, sibling) {\n            var dragMultipleItems, finalUsList, firstElement, firstElementId, index, newStatus, newSwimlane, parentEl, usList;\n            parentEl = item.parentNode;\n            dragMultipleItems = window.dragMultiple.stop();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElementId = dragMultipleItems[0].dataset.id;\n            firstElement = dragMultipleItems[0];\n            index = $(parentEl).find('tg-card').index(firstElement);\n            newStatus = Number(parentEl.dataset.status);\n            newSwimlane = Number(parentEl.dataset.swimlane);\n            if (index === oldIndex && initialContainer === parentEl) {\n              return;\n            }\n            if (initialContainer !== parentEl) {\n              $(parentEl).addClass('new');\n              $(parentEl).one('animationend', function() {\n                return $(parentEl).removeClass('new');\n              });\n            }\n            usList = _.map(dragMultipleItems, function(item) {\n              return kanbanUserstoriesService.usMap.get(Number(item.dataset.id));\n            });\n            finalUsList = _.map(usList, function(item) {\n              return {\n                id: item.get('id'),\n                oldStatusId: item.getIn(['model', 'status']),\n                oldSwimlaneId: item.getIn(['model', 'swimlane'])\n              };\n            });\n            return $scope.$apply(function() {\n              _.each(usList, (function(_this) {\n                return function(item, key) {\n                  var oldStatus, oldSwimlaneId, sameContainer;\n                  oldStatus = item.getIn(['model', 'status']);\n                  oldSwimlaneId = item.getIn(['model', 'swimlane']) || -1;\n                  sameContainer = newStatus === oldStatus && newSwimlane === oldSwimlaneId;\n                  if (!sameContainer) {\n                    itemEl = $(dragMultipleItems[key]);\n                    return deleteElement(itemEl);\n                  }\n                };\n              })(this));\n              return $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, newSwimlane, index, previousCard, nextCard);\n            });\n          });\n          return scroll = autoScroll(containers, {\n            margin: 100,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        };\n      })(this);\n      unwatch = $scope.$watch(\"isTableLoaded\", function(tableLoaded) {\n        var containers, isSwimlane;\n        if (!tableLoaded) {\n          return;\n        }\n        isSwimlane = $('.swimlane').length;\n        if (isSwimlane) {\n          return;\n        }\n        unwatch();\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        return init(containers);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (drake) {\n          return drake.destroy();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"tgKanbanUserstories\", KanbanSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicDetailController, EpicStatusButtonDirective, EpicStatusDisplayDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEpics\");\n\n  EpicDetailController = (function(superClass) {\n    extend(EpicDetailController, superClass);\n\n    EpicDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function EpicDetailController(scope, rootscope, repo, confirm, rs, rs2, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.rs2 = rs2;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.epicRef = this.params.epicref;\n      this.scope.sectionName = this.translate.instant(\"EPIC.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    EpicDetailController.prototype._setMeta = function() {\n      var description, ref, title;\n      title = this.translate.instant(\"EPIC.PAGE_TITLE\", {\n        epicRef: \"#\" + this.scope.epic.ref,\n        epicSubject: this.scope.epic.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\n        epicStatus: ((ref = this.scope.statusById[this.scope.epic.status]) != null ? ref.name : void 0) || \"--\",\n        epicDescription: angular.element(this.scope.epic.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    EpicDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('epic', this.scope.epicId, this.scope.projectId);\n    };\n\n    EpicDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1);\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadEpic();\n        };\n      })(this));\n      return this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-epics\", ctx);\n    };\n\n    EpicDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.immutableProject = this.projectService.project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.epic_statuses;\n      this.scope.statusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    EpicDetailController.prototype.loadEpic = function() {\n      return this.rs.epics.getByRef(this.scope.projectId, this.params.epicref).then((function(_this) {\n        return function(epic) {\n          var ctx, ref, ref1;\n          _this.scope.epic = epic;\n          _this.scope.immutableEpic = Immutable.fromJS(epic._attrs);\n          _this.scope.epicId = epic.id;\n          _this.scope.commentModel = epic;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'epic');\n          if (((ref = _this.scope.epic.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.epic.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadUserstories = function() {\n      return this.rs2.userstories.listInEpic(this.scope.epicId).then((function(_this) {\n        return function(data) {\n          return _this.scope.userstories = data;\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadEpic().then((function(_this) {\n        return function() {\n          return _this.loadUserstories();\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    EpicDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.upvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.downvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    EpicDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.watch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.unwatch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onSelectColor = function(color) {\n      var onSelectColorError, onSelectColorSuccess, transform;\n      onSelectColorSuccess = (function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.confirm.notify('success');\n        };\n      })(this);\n      onSelectColorError = (function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      transform = this.modelTransform.save(function(epic) {\n        epic.color = color;\n        return epic;\n      });\n      return transform.then(onSelectColorSuccess, onSelectColorError);\n    };\n\n    return EpicDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"EpicDetailController\", EpicDetailController);\n\n  EpicStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(epic) {\n        var html, status;\n        status = $scope.statusById[epic.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(epic) {\n        if (epic != null) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective]);\n\n  EpicStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_epic\") !== -1;\n      };\n      render = (function(_this) {\n        return function(epic) {\n          var html, status;\n          status = $scope.statusById[epic.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(epic) {\n          epic.status = status;\n          return epic;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var epic;\n        epic = $model.$modelValue;\n        if (epic) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignSprintToIssueButtonDirective, IssueDetailController, IssuePriorityButtonDirective, IssueSeverityButtonDirective, IssueStatusButtonDirective, IssueStatusDisplayDirective, IssueTypeButtonDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, normalizeString, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssueDetailController = (function(superClass) {\n    extend(IssueDetailController, superClass);\n\n    IssueDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function IssueDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.issueRef = this.params.issueref;\n      this.scope.sectionName = this.translate.instant(\"ISSUES.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    IssueDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, ref3, title;\n      title = this.translate.instant(\"ISSUE.PAGE_TITLE\", {\n        issueRef: \"#\" + this.scope.issue.ref,\n        issueSubject: this.scope.issue.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\n        issueStatus: ((ref = this.scope.statusById[this.scope.issue.status]) != null ? ref.name : void 0) || \"--\",\n        issueType: ((ref1 = this.scope.typeById[this.scope.issue.type]) != null ? ref1.name : void 0) || \"--\",\n        issueSeverity: ((ref2 = this.scope.severityById[this.scope.issue.severity]) != null ? ref2.name : void 0) || \"--\",\n        issuePriority: ((ref3 = this.scope.priorityById[this.scope.issue.priority]) != null ? ref3.name : void 0) || \"--\",\n        issueDescription: angular.element(this.scope.issue.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    IssueDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('issue', this.scope.issueId, this.scope.projectId);\n    };\n\n    IssueDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1);\n        };\n      })(this));\n      this.scope.$on(\"promote-issue-to-us:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1);\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"assign-sprint-to-issue:success\", (function(_this) {\n        return function(ctx, milestoneId) {\n          _this.scope.issue.milestone = milestoneId;\n          _this.rootscope.$broadcast(\"object:updated\");\n          if (milestoneId) {\n            return _this.loadSprint();\n          } else {\n            return _this.scope.sprint = null;\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      if (this.scope.project.is_issues_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-issues\", ctx);\n      } else {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      }\n    };\n\n    IssueDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.issue_statuses;\n      this.scope.statusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.typeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      this.scope.typeList = _.sortBy(project.issue_types, \"order\");\n      this.scope.severityList = project.severities;\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = project.priorities;\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssueDetailController.prototype.loadIssue = function() {\n      return this.rs.issues.getByRef(this.scope.projectId, this.params.issueref).then((function(_this) {\n        return function(issue) {\n          var ctx, ref, ref1;\n          _this.scope.issue = issue;\n          _this.scope.issueId = issue.id;\n          _this.scope.commentModel = issue;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'issue');\n          if (((ref = _this.scope.issue.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.issue.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.loadSprint = function() {\n      if (this.scope.issue.milestone) {\n        return this.rs.sprints.get(this.scope.issue.project, this.scope.issue.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    IssueDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadIssue().then((function(_this) {\n        return function() {\n          if (_this.scope.project.my_permissions.indexOf(\"view_milestones\") !== -1) {\n            return _this.loadSprint();\n          }\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    IssueDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.upvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.downvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    IssueDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.watch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.unwatch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    return IssueDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"IssueDetailController\", IssueDetailController);\n\n  IssueStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issue) {\n        var html, status;\n        status = $scope.statusById[issue.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(issue) {\n        if (issue != null) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective]);\n\n  IssueStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = (function(_this) {\n        return function(issue) {\n          var html, status;\n          status = $scope.statusById[issue.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          html = $compile(html)($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(statusId) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.status = statusId;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective]);\n\n  IssueTypeButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-type-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, type;\n        type = $scope.typeById[issue.type];\n        html = template({\n          type: type,\n          typees: $scope.typeList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(type) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.type = type;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.type = type;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".type-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-type\").popover().open();\n      });\n      $el.on(\"click\", \".type\", function(event) {\n        var target, type;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        type = target.data(\"type-id\");\n        return save(type);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.type : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective]);\n\n  IssueSeverityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-severity-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, severity;\n        severity = $scope.severityById[issue.severity];\n        html = template({\n          severity: severity,\n          severityes: $scope.severityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(severity) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.severity = severity;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.severity = severity;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".severity-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-severity\").popover().open();\n      });\n      $el.on(\"click\", \".severity\", function(event) {\n        var severity, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        severity = target.data(\"severity-id\");\n        return save(severity);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.severity : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective]);\n\n  IssuePriorityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-priority-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, priority;\n        priority = $scope.priorityById[issue.priority];\n        html = template({\n          priority: priority,\n          priorityes: $scope.priorityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(priority) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.priority = priority;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.priority = priority;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".priority-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-priority\").popover().open();\n      });\n      $el.on(\"click\", \".priority\", function(event) {\n        var priority, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        priority = target.data(\"priority-id\");\n        return save(priority);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.priority : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective]);\n\n  AssignSprintToIssueButtonDirective = function($rootscope, $rs, $repo, $loading, $translate, lightboxService, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var avaliableMilestones, existsMilestone, issue;\n      avaliableMilestones = [];\n      issue = null;\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        if (item.milestone) {\n          $el.find('.assign-issue-button.button-unset').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-set').addClass('is-active');\n        } else {\n          $el.find('.assign-issue-button.button-set').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-unset').addClass('is-active');\n        }\n      });\n      $el.on(\"click\", \".assign-issue-button.button-unset\", function(event) {\n        var title;\n        event.preventDefault();\n        event.stopPropagation();\n        title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\");\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          $scope.milestones = data.milestones;\n          $scope.selectedSprint = issue.milestone;\n          avaliableMilestones = angular.copy($scope.milestones);\n          return lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"));\n        });\n      });\n      $el.on(\"click\", \".assign-issue-button.button-set\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          var currentSprint, message, title;\n          currentSprint = _.find(data.milestones, {\n            \"id\": issue.milestone\n          });\n          title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: currentSprint.name\n          });\n          return $confirm.ask(title, null, message).then(function(askResponse) {\n            var onError, onSuccess, transform;\n            onSuccess = function() {\n              $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null);\n              askResponse.finish();\n              return lightboxService.close($el);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            transform = $modelTransform.save(function(issue) {\n              issue.setAttr('milestone', null);\n              return issue;\n            });\n            return transform.then(onSuccess, onError);\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      existsMilestone = function(needle, haystack) {\n        haystack = normalizeString(haystack.toUpperCase());\n        needle = normalizeString(needle.toUpperCase());\n        return _.includes(haystack, needle);\n      };\n      $scope.filterMilestones = function(filterText) {\n        return $scope.milestones = avaliableMilestones.filter(function(milestone) {\n          return existsMilestone(filterText, milestone.name);\n        });\n      };\n      return $scope.saveIssueToSprint = function(selectedSprint, event) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($(event.currentTarget)).start();\n        issue.setAttr('milestone', selectedSprint.id);\n        transform = $modelTransform.save(function(item) {\n          issue.setAttr('milestone', selectedSprint.id);\n          return item;\n        });\n        return transform.then(function() {\n          currentLoading.finish();\n          lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"));\n          return $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id);\n        });\n      };\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      templateUrl: \"issue/assign-sprint-to-issue-button.html\"\n    };\n  };\n\n  module.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\", \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\", \"$tgConfirm\", AssignSprintToIssueButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkIssuesDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaIssues\");\n\n  CreateBulkIssuesDirective = function($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, submit, submitButton;\n      form = null;\n      $scope.$on(\"issueform:bulk\", function(ctx, projectId, milestoneId, status) {\n        if (form) {\n          form.reset();\n        }\n        lightboxService.open($el);\n        return $scope[\"new\"] = {\n          projectId: projectId,\n          milestoneId: milestoneId,\n          bulk: \"\"\n        };\n      });\n      submit = debounce(2000, function(event) {\n        var currentLoading, data, milestoneId, projectId, promise;\n        event.preventDefault();\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target(submitButton).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        data = $scope[\"new\"].bulk;\n        projectId = $scope[\"new\"].projectId;\n        milestoneId = $scope[\"new\"].milestoneId;\n        promise = $rs.issues.bulkCreate(projectId, milestoneId, data);\n        promise.then(function(result) {\n          result = _.map(result.data, function(x) {\n            return $model.make_model('issues', x);\n          });\n          currentLoading.finish();\n          $rootscope.$broadcast(\"issueform:new:success\", result);\n          lightboxService.close($el);\n          return $confirm.notify(\"success\");\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      });\n      submitButton = $el.find(\"button[type='submit']\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssueAssignedToInlineEditionDirective, IssueStatusInlineEditionDirective, IssuesController, IssuesOrderingDirective, IssuesPaginationDirective, bindMethods, bindOnce, debounceLeading, groupBy, joinStr, mixOf, module, startswith, taiga, toString, trim,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssuesController = (function(superClass) {\n    extend(IssuesController, superClass);\n\n    IssuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgUrls\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgUserActivityService\"];\n\n    IssuesController.prototype.filtersHashSuffix = \"issues-filters\";\n\n    IssuesController.prototype.myFiltersHashSuffix = \"issues-my-filters\";\n\n    IssuesController.prototype.excludePrefix = \"exclude_\";\n\n    IssuesController.prototype.filterCategories = [\"tags\", \"status\", \"type\", \"severity\", \"priority\", \"assigned_to\", \"owner\", \"role\"];\n\n    IssuesController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_status', 'status', 'exclude_type', 'type', 'exclude_severity', 'severity', 'exclude_priority', 'priority', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by'];\n\n    function IssuesController(scope, rootscope, repo, confirm, rs, urls, params1, q1, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, storage, filterRemoteStorageService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.urls = urls;\n      this.params = params1;\n      this.q = q1;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.loadIssues = bind(this.loadIssues, this);\n      bindMethods(this);\n      this.showTags = true;\n      this.scope.sectionName = this.translate.instant(\"PROJECT.SECTION.ISSUES\");\n      this.voting = false;\n      this.openFilter = false;\n      if (this.applyStoredFilters(this.params.pslug, this.filtersHashSuffix, this.validQueryParams)) {\n        return;\n      }\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ISSUES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1);\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"assigned-to:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role') || _this.isOrderedBy('assigned_to') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n      this.scope.$on(\"status:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status') || _this.isOrderedBy('status') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n    }\n\n    IssuesController.prototype.toggleShowTags = function() {\n      return this.rs.issues.storeIssuesShowTags(this.scope.projectId, this.showTags);\n    };\n\n    IssuesController.prototype.isOrderedBy = function(fieldName) {\n      var pattern;\n      pattern = new RegExp(\"-*\" + fieldName);\n      return pattern.test(this.location.search().order_by);\n    };\n\n    IssuesController.prototype.changeQ = function(q) {\n      this.unselectFilter(\"page\");\n      this.replaceFilter(\"q\", q);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(\"page\");\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.addFilter = function(newFilter) {\n      this.unselectFilter(\"page\");\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.selectCustomFilter = function(customFilter) {\n      var orderBy;\n      orderBy = this.location.search().order_by;\n      if (orderBy) {\n        customFilter.filter.order_by = orderBy;\n      }\n      this.unselectFilter(\"page\");\n      this.replaceAllFilters(customFilter.filter);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, j, len, ref;\n      ref = this.selectedFilters;\n      for (j = 0, len = ref.length; j < len; j++) {\n        filter = ref[j];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    IssuesController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, j, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    IssuesController.prototype.generateFilters = function() {\n      var excludeKey, j, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, this.filtersHashSuffix);\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.q = urlfilters.q;\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.issues.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, k, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.type = _.map(data.types, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.severity = _.map(data.severities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.priority = _.map(data.priorities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (k = 0, len1 = ref1.length; k < len1; k++) {\n            key = ref1[k];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filterQ = loadFilters.q;\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\n              dataType: \"type\",\n              content: dataCollection.type\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\n              dataType: \"severity\",\n              content: dataCollection.severity\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\n              dataType: \"priority\",\n              content: dataCollection.priority\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.initializeSubscription = function() {\n      var routingKey;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      return this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n    };\n\n    IssuesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_issues_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.severityList = _.sortBy(project.severities, \"order\");\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = _.sortBy(project.priorities, \"order\");\n      this.scope.issueTypes = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueTypeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssuesController.prototype.loadIssuesRequests = 0;\n\n    IssuesController.prototype.loadIssues = function() {\n      var params, promise;\n      params = this.location.search();\n      promise = this.rs.issues.list(this.scope.projectId, params);\n      this.loadIssuesRequests += 1;\n      promise.index = this.loadIssuesRequests;\n      promise.then((function(_this) {\n        return function(data) {\n          if (promise.index === _this.loadIssuesRequests) {\n            _this.scope.issues = data.models;\n            _this.scope.page = data.current;\n            _this.scope.count = data.count;\n            _this.scope.paginatedBy = data.paginatedBy;\n          }\n          return data;\n        };\n      })(this));\n      return promise;\n    };\n\n    IssuesController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.generateFilters();\n      if (this.rs.issues.getIssuesShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadIssues();\n    };\n\n    IssuesController.prototype.addNewIssue = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"genericform:new\", {\n        'objType': 'issue',\n        'project': project\n      });\n    };\n\n    IssuesController.prototype.addIssuesInBulk = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"issueform:bulk\", project.id);\n    };\n\n    IssuesController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return IssuesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"IssuesController\", IssuesController);\n\n  IssuesPaginationDirective = function($log, $location, $template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"issue/issue-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".issues-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        $pagEl.show();\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        return $pagEl.html(html);\n      };\n      $scope.$watch(\"issues\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".issues-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      $el.on(\"click\", \".issues-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      return $el.on(\"click\", \".issues-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadIssues();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesPagination\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesPaginationDirective]);\n\n  IssuesOrderingDirective = function($log, $location, $template, $compile) {\n    var link, linkOrdering;\n    linkOrdering = function($scope, $el, $attrs, $ctrl) {\n      var colHeadElement, currentOrder, icon, svg;\n      currentOrder = $ctrl.getIssuesOrderBy();\n      if (currentOrder) {\n        icon = startswith(currentOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n        colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(currentOrder, \"-\")) + \"']\");\n        svg = colHeadElement.find('svg');\n        svg.addClass(icon);\n        $compile(colHeadElement.contents())($scope);\n      }\n      return $el.on(\"click\", \".row.title > div:not(.skip-order)\", function(event) {\n        var finalOrder, newOrder, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        currentOrder = $ctrl.getIssuesOrderBy();\n        newOrder = target.data(\"fieldname\");\n        if (newOrder === 'total_voters' && currentOrder !== \"-total_voters\") {\n          currentOrder = \"total_voters\";\n        }\n        finalOrder = currentOrder === newOrder ? \"-\" + newOrder : newOrder;\n        return $scope.$apply(function() {\n          var urlfilters;\n          $ctrl.replaceFilter(\"order_by\", finalOrder);\n          if ($ctrl.filtersHashSuffix) {\n            urlfilters = $ctrl.getQueryParams();\n            $ctrl.storeFilters($ctrl.params.pslug, urlfilters, $ctrl.filtersHashSuffix);\n          }\n          return $ctrl.loadIssues().then(function() {\n            $el.find('.row.title svg').removeClass();\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(finalOrder, \"-\")) + \"']\");\n            icon = startswith(finalOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n            colHeadElement.find('svg').addClass(icon);\n            return $compile(target.contents())($scope);\n          });\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkOrdering($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesOrdering\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesOrderingDirective]);\n\n  IssueStatusInlineEditionDirective = function($repo, $template, $rootscope) {\n\n    /*\n    Print the status of an Issue and a popover to change it.\n    - tg-issue-status-inline-edition: The issue\n    \n    Example:\n    \n      div.status(tg-issue-status-inline-edition=\"issue\")\n        a.issue-status(href=\"\")\n    \n    NOTE: This directive need 'issueStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateIssueStatus;\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true);\n    updateIssueStatus = function($el, issue, issueStatusById) {\n      var issueStatusDom, issueStatusDomParent, status;\n      issueStatusDomParent = $el.find(\".issue-status\");\n      issueStatusDom = $el.find(\".issue-status .issue-status-bind\");\n      status = issueStatusById[issue.status];\n      if (status) {\n        issueStatusDom.text(status.name);\n        issueStatusDom.prop(\"title\", status.name);\n        return issueStatusDomParent.css('color', status.color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue;\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueStatusInlineEdition);\n      $el.on(\"click\", \".issue-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var attachments, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        issue.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        attachments = issue.attachments;\n        return $scope.$apply(function() {\n          return $repo.save(issue).then(function(response) {\n            issue.attachments = attachments;\n            issue._isModified = false;\n            issue._attrs = _.extend(issue.getAttrs(), issue);\n            issue._modifiedAttrs = {};\n            return $rootscope.$broadcast(\"status:changed\", response);\n          });\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.issue_statuses\n        }));\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueStatusInlineEdition, (function(_this) {\n        return function(val) {\n          return updateIssueStatus($el, val, $scope.issueStatusById);\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\", IssueStatusInlineEditionDirective]);\n\n  IssueAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue, updateIssue;\n      updateIssue = function(issue) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n          imgurl: \"/\" + window._version + \"/images/unnamed.png\"\n        };\n        member = $scope.usersById[issue.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = null;\n        if (member) {\n          ctx.name = member.full_name_display;\n          ctx.bg = avatar.bg;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".issue-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition);\n      updateIssue(issue);\n      $el.on(\"click\", \".issue-assignedto\", function(event) {\n        var onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            var attachments;\n            issue.assigned_to = assignedUsers.pop() || null;\n            attachments = issue.attachments;\n            return $repo.save(issue).then(function() {\n              issue.attachments = attachments;\n              issue._isModified = false;\n              issue._attrs = _.extend(issue.getAttrs(), issue);\n              issue._modifiedAttrs = {};\n              updateIssue(issue);\n              return $rootscope.$broadcast(\"assigned-to:changed\", issue);\n            });\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [issue.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueAssignedToInlineEdition, function(val) {\n        return updateIssue(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UsClientRequirementButtonDirective, UsStatusButtonDirective, UsStatusDisplayDirective, UsTeamRequirementButtonDirective, UserStoryDetailController, bindMethods, bindOnce, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaUserStories\");\n\n  UserStoryDetailController = (function(superClass) {\n    extend(UserStoryDetailController, superClass);\n\n    UserStoryDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgConfig\", \"tgProjectService\", \"tgWysiwygService\", \"tgAttachmentsFullService\", \"$tgModel\", \"$sce\"];\n\n    function UserStoryDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, configService, projectService, wysiwigService, attachmentsFullService, tgmodel, sce) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.configService = configService;\n      this.projectService = projectService;\n      this.wysiwigService = wysiwigService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.tgmodel = tgmodel;\n      this.sce = sce;\n      bindMethods(this);\n      this.scope.usRef = this.params.usref;\n      this.scope.sectionName = this.translate.instant(\"US.SECTION_NAME\");\n      this.scope.tribeEnabled = this.configService.config.tribeHost;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserStoryDetailController.prototype._setMeta = function() {\n      var closedTasks, description, descriptionHtml, progressPercentage, ref, title, totalTasks;\n      totalTasks = this.scope.tasks.length;\n      closedTasks = _.filter(this.scope.tasks, (function(_this) {\n        return function(t) {\n          return _this.scope.taskStatusById[t.status].is_closed;\n        };\n      })(this)).length;\n      progressPercentage = totalTasks > 0 ? Math.round(100 * closedTasks / totalTasks) : 0;\n      title = this.translate.instant(\"US.PAGE_TITLE\", {\n        userStoryRef: \"#\" + this.scope.us.ref,\n        userStorySubject: this.scope.us.subject,\n        projectName: this.scope.project.name\n      });\n      descriptionHtml = this.sce.getTrustedHtml(this.wysiwigService.getHTML(this.scope.us.description) || \"\");\n      description = this.translate.instant(\"US.PAGE_DESCRIPTION\", {\n        userStoryStatus: ((ref = this.scope.statusById[this.scope.us.status]) != null ? ref.name : void 0) || \"--\",\n        userStoryPoints: this.scope.us.total_points,\n        userStoryDescription: angular.element(descriptionHtml).text(),\n        userStoryClosedTasks: closedTasks,\n        userStoryTotalTasks: totalTasks,\n        userStoryProgressPercentage: progressPercentage\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    UserStoryDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('us', this.scope.usId, this.scope.projectId);\n    };\n\n    UserStoryDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.relateToEpic = (function(_this) {\n        return function(us) {\n          return _this.scope.$broadcast(\"relate-to-epic:add\", us);\n        };\n      })(this);\n      this.scope.$on(\"related-tasks:update\", (function(_this) {\n        return function() {\n          var allClosed;\n          _this.loadTasks();\n          _this.scope.tasks = _.clone(_this.scope.tasks, false);\n          allClosed = _.every(_this.scope.tasks, function(task) {\n            return task.is_closed;\n          });\n          if (_this.scope.us.is_closed !== allClosed) {\n            return _this.loadUs();\n          }\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1);\n        };\n      })(this));\n      this.scope.$on(\"task:reorder\", (function(_this) {\n        return function(event, task, newIndex) {\n          return _this.reorderTask(task, newIndex);\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadUs();\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.params[\"kanban-status\"] && this.scope.project.is_kanban_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-kanban\", ctx);\n      } else {\n        if (this.scope.project.is_backlog_activated) {\n          if (this.scope.us.milestone) {\n            ctx.sprint = this.scope.sprint.slug;\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n          } else {\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-backlog\", ctx);\n          }\n        }\n      }\n    };\n\n    UserStoryDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.us_statuses;\n      this.scope.statusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(this.scope.pointsList, function(e) {\n        return e.id;\n      });\n      return project;\n    };\n\n    UserStoryDetailController.prototype.loadUs = function() {\n      var backlogHttpParams, kanbanHttpParams, kanbanStaus, locationSearch, milestone, noMilestone;\n      kanbanHttpParams = {};\n      locationSearch = this.location.search();\n      backlogHttpParams = _.pick(locationSearch, \"milestone\", \"no-milestone\");\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('kanban-')) {\n          return kanbanHttpParams[key.replace('kanban-', '')] = locationSearch[key];\n        }\n      });\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('backlog-')) {\n          return backlogHttpParams[key.replace('backlog-', '')] = locationSearch[key];\n        }\n      });\n      milestone = backlogHttpParams.milestone;\n      if (milestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: milestone,\n          order_by: \"sprint_order\"\n        }));\n      }\n      noMilestone = backlogHttpParams[\"no-milestone\"];\n      if (noMilestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: \"null\",\n          order_by: \"backlog_order\"\n        }));\n      }\n      kanbanStaus = kanbanHttpParams[\"status\"];\n      if (kanbanStaus) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(kanbanHttpParams, {\n          order_by: \"kanban_order\"\n        }));\n      }\n      return this.rs.userstories.getByRef(this.scope.projectId, this.params.usref).then((function(_this) {\n        return function(us) {\n          _this.rootscope.$broadcast(\"userstory:loaded\", us);\n          _this.scope.us = us;\n          _this.scope.usId = us.id;\n          _this.scope.commentModel = us;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: us._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'us');\n          return us;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadSprint = function() {\n      if (this.scope.us.milestone) {\n        return this.rs.sprints.get(this.scope.us.project, this.scope.us.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    UserStoryDetailController.prototype.loadTasks = function() {\n      return this.rs.tasks.list(this.scope.projectId, null, this.scope.usId).then((function(_this) {\n        return function(tasks) {\n          _this.scope.tasks = tasks;\n          return tasks;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadUs().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadTasks()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    UserStoryDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.upvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.downvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    UserStoryDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.watch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.unwatch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onTribeInfo = function() {\n      var image, publishDesc, publishTitle, text;\n      publishTitle = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\");\n      image = $('<img />').attr({\n        'src': \"/\" + window._version + \"/images/monster-fight.png\",\n        'alt': this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n      });\n      text = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\");\n      publishDesc = $('<div></div>').append(image).append(text);\n      return this.confirm.success(publishTitle, publishDesc);\n    };\n\n    UserStoryDetailController.prototype.reorderTask = function(task, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this.scope.tasks.forEach(function(it) {\n        return orderList[it.id] = it.us_order;\n      });\n      withoutMoved = this.scope.tasks.filter(function(it) {\n        return it.id !== task.id;\n      });\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination[beforeDestination.length - 1];\n      newOrder = !previous ? 0 : previous.us_order + 1;\n      orderList[task.id] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter(function(it) {\n        return it.us_order === previous.us_order;\n      });\n      setOrders = _.fromPairs(previousWithTheSameOrder.map(function(it) {\n        return [it.id, it.us_order];\n      }));\n      afterDestination.forEach(function(it) {\n        return orderList[it.id] = it.us_order + 1;\n      });\n      this.scope.tasks = _.map(this.scope.tasks, function(it) {\n        it.us_order = orderList[it.id];\n        return it;\n      });\n      this.scope.tasks = _.sortBy(this.scope.tasks, \"us_order\");\n      data = {\n        us_order: newOrder,\n        version: task.version\n      };\n      return this.rs.tasks.reorder(task.id, data, setOrders).then((function(_this) {\n        return function(newTask) {\n          newTask = _this.tgmodel.make_model(\"tasks\", newTask);\n          _this.scope.tasks = _.map(_this.scope.tasks, function(it) {\n            if (it.id === newTask.id) {\n              return newTask;\n            } else {\n              return it;\n            }\n          });\n          return _this.rootscope.$broadcast(\"related-tasks:reordered\");\n        };\n      })(this));\n    };\n\n    return UserStoryDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserStoryDetailController\", UserStoryDetailController);\n\n  UsStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(us) {\n        var html, status;\n        status = $scope.statusById[us.status];\n        html = template({\n          is_closed: us.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(us) {\n        if (us != null) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective]);\n\n  UsStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = (function(_this) {\n        return function(us) {\n          var html, status;\n          status = $scope.statusById[us.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          $el.html(html);\n          return $compile($el.contents())($scope);\n        };\n      })(this);\n      save = (function(_this) {\n        return function(status) {\n          var currentLoading, onError, onSuccess, transform;\n          $el.find(\".pop-status\").popover().close();\n          currentLoading = $loading().target($el.find('.js-edit-status')).start();\n          transform = $modelTransform.save(function(us) {\n            us.status = status;\n            return us;\n          });\n          onSuccess = function() {\n            $rootScope.$broadcast(\"object:updated\");\n            return currentLoading.finish();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return currentLoading.finish();\n          };\n          return transform.then(onSuccess, onError);\n        };\n      })(this);\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var status, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        status = target.data(\"status-id\");\n        return save(status);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsStatusButtonDirective]);\n\n  UsTeamRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-team-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.team_requirement\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(team_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.team_requirement = team_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        var team_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        team_requirement = !$model.$modelValue.team_requirement;\n        return save(team_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.team_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective]);\n\n  UsClientRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-client-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.client_requirement\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(client_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.client_requirement = client_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        var client_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        client_requirement = !$model.$modelValue.client_requirement;\n        return save(client_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.client_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsClientRequirementButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskDetailController, TaskIsIocaineButtonDirective, TaskStatusButtonDirective, TaskStatusDisplayDirective, bindMethods, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaTasks\");\n\n  TaskDetailController = (function(superClass) {\n    extend(TaskDetailController, superClass);\n\n    TaskDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function TaskDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.taskRef = this.params.taskref;\n      this.scope.sectionName = this.translate.instant(\"TASK.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TaskDetailController.prototype._setMeta = function() {\n      var description, ref1, title;\n      title = this.translate.instant(\"TASK.PAGE_TITLE\", {\n        taskRef: \"#\" + this.scope.task.ref,\n        taskSubject: this.scope.task.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"TASK.PAGE_DESCRIPTION\", {\n        taskStatus: ((ref1 = this.scope.statusById[this.scope.task.status]) != null ? ref1.name : void 0) || \"--\",\n        taskDescription: angular.element(this.scope.task.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('task', this.scope.taskId, this.scope.projectId);\n    };\n\n    TaskDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"promote-task-to-us:success\", (function(_this) {\n        return function(e, ref) {\n          var ctx;\n          _this.analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1);\n          ctx = {\n            project: _this.scope.project.slug,\n            ref: ref\n          };\n          return _this.location.path(_this.navUrls.resolve(\"project-userstories-detail\", ctx));\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1);\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadTask();\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.scope.project.is_backlog_activated) {\n        if (this.scope.task.milestone) {\n          ctx.sprint = this.scope.sprint.slug;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n        } else if (this.scope.task.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      } else if (this.scope.project.is_kanban_activated) {\n        if (this.scope.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      }\n    };\n\n    TaskDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.task_statuses;\n      this.scope.statusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    TaskDetailController.prototype.loadTask = function() {\n      return this.rs.tasks.getByRef(this.scope.projectId, this.params.taskref).then((function(_this) {\n        return function(task) {\n          var ctx, ref1, ref2;\n          _this.scope.task = task;\n          _this.scope.taskId = task.id;\n          _this.scope.commentModel = task;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: task._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'task');\n          if (((ref1 = _this.scope.task.neighbors.previous) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          if (((ref2 = _this.scope.task.neighbors.next) != null ? ref2.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.next.ref\n            };\n            _this.scope.nextUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          return task;\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.loadSprint = function() {\n      if (this.scope.task.milestone) {\n        return this.rs.sprints.get(this.scope.task.project, this.scope.task.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadUserStory = function() {\n      if (this.scope.task.user_story) {\n        return this.rs.userstories.get(this.scope.task.project, this.scope.task.user_story).then((function(_this) {\n          return function(us) {\n            _this.scope.us = us;\n            return us;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadTask().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadUserStory()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    TaskDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.upvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.downvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    TaskDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.watch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.unwatch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    return TaskDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TaskDetailController\", TaskDetailController);\n\n  TaskStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(task) {\n        var html, status;\n        status = $scope.statusById[task.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(task) {\n        if (task != null) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective]);\n\n  TaskStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = (function(_this) {\n        return function(task) {\n          var html, status;\n          status = $scope.statusById[task.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(task) {\n          task.status = status;\n          return task;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.status : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective]);\n\n  TaskIsIocaineButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) {\n    var link, template;\n    template = $template.get(\"issue/iocaine-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = function(task) {\n        var ctx, html;\n        if (!isEditable() && !task.is_iocaine) {\n          $el.html(\"\");\n          return;\n        }\n        ctx = {\n          isIocaine: task.is_iocaine,\n          isEditable: isEditable()\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(is_iocaine) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find('label')).start();\n        transform = $modelTransform.save(function(task) {\n          task.is_iocaine = is_iocaine;\n          return task;\n        });\n        transform.then(function() {\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return currentLoading.finish();\n        });\n      };\n      $el.on(\"click\", \".is-iocaine\", function(event) {\n        var is_iocaine;\n        if (!isEditable()) {\n          return;\n        }\n        is_iocaine = !$model.$modelValue.is_iocaine;\n        return save(is_iocaine);\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.is_iocaine : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LeaveProjectDirective, TeamController, TeamFiltersDirective, TeamMemberCurrentUserDirective, TeamMemberStatsDirective, TeamMembersDirective, membersFilter, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaTeam\");\n\n  TeamController = (function(superClass) {\n    extend(TeamController, superClass);\n\n    TeamController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$location\", \"$tgNavUrls\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function TeamController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, auth, translate, projectService, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"TEAM.SECTION_NAME\";\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"TEAM.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TeamController.prototype.setRole = function(role) {\n      if (role) {\n        return this.scope.filtersRole = role;\n      } else {\n        return this.scope.filtersRole = null;\n      }\n    };\n\n    TeamController.prototype.loadMembers = function() {\n      var i, len, member, ref, user;\n      user = this.auth.getUser();\n      this.scope.totals = {};\n      ref = this.scope.activeUsers;\n      for (i = 0, len = ref.length; i < len; i++) {\n        member = ref[i];\n        this.scope.totals[member.id] = 0;\n      }\n      this.scope.currentUser = _.find(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n      return this.scope.memberships = _.reject(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n    };\n\n    TeamController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issuesEnabled = project.is_issues_activated;\n      this.scope.tasksEnabled = project.is_kanban_activated || project.is_backlog_activated;\n      this.scope.wikiEnabled = project.is_wiki_activated;\n      this.scope.owner = project.owner.id;\n      return project;\n    };\n\n    TeamController.prototype.loadMemberStats = function() {\n      return this.rs.projects.memberStats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totals;\n          totals = {};\n          _.forEach(_this.scope.totals, function(total, userId) {\n            var vals;\n            vals = _.map(stats, function(memberStats, statsKey) {\n              return memberStats[userId];\n            });\n            total = _.reduce(vals, function(sum, el) {\n              return sum + el;\n            });\n            return _this.scope.totals[userId] = total;\n          });\n          _this.scope.stats = _this._processStats(stats);\n          return _this.scope.stats.totals = _this.scope.totals;\n        };\n      })(this));\n    };\n\n    TeamController.prototype._processStat = function(stat) {\n      var key, max, min, singleStat, value;\n      max = _.max(_.toArray(stat));\n      min = _.min(_.toArray(stat));\n      singleStat = Object();\n      for (key in stat) {\n        if (!hasProp.call(stat, key)) continue;\n        value = stat[key];\n        if (value === min) {\n          singleStat[key] = 0.1;\n        } else if (value === max) {\n          singleStat[key] = 1;\n        } else {\n          singleStat[key] = (value * 0.5) / max;\n        }\n      }\n      return singleStat;\n    };\n\n    TeamController.prototype._processStats = function(stats) {\n      var key, value;\n      for (key in stats) {\n        value = stats[key];\n        stats[key] = this._processStat(value);\n      }\n      return stats;\n    };\n\n    TeamController.prototype.loadInitialData = function() {\n      var project, userRoles;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.loadMembers();\n      userRoles = _.map(this.scope.users, function(user) {\n        return user.role;\n      });\n      this.scope.roles = _.filter(this.scope.roles, function(role) {\n        return userRoles.indexOf(role.id) !== -1;\n      });\n      return this.loadMemberStats();\n    };\n\n    return TeamController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TeamController\", TeamController);\n\n  TeamFiltersDirective = function() {\n    return {\n      templateUrl: \"team/team-filter.html\"\n    };\n  };\n\n  module.directive(\"tgTeamFilters\", [TeamFiltersDirective]);\n\n  TeamMemberStatsDirective = function() {\n    return {\n      templateUrl: \"team/team-member-stats.html\",\n      scope: {\n        stats: \"=\",\n        userId: \"=user\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective);\n\n  TeamMemberCurrentUserDirective = function() {\n    return {\n      templateUrl: \"team/team-member-current-user.html\",\n      scope: {\n        project: \"=project\",\n        currentUser: \"=currentuser\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective);\n\n  TeamMembersDirective = function() {\n    var template;\n    template = \"team/team-members.html\";\n    return {\n      templateUrl: template,\n      scope: {\n        memberships: \"=\",\n        filtersQ: \"=filtersq\",\n        filtersRole: \"=filtersrole\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMembers\", TeamMembersDirective);\n\n  LeaveProjectDirective = function($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var leaveConfirm;\n      leaveConfirm = function() {\n        var confirm_leave_project_text, leave_project_text;\n        leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\");\n        confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\");\n        return $confirm.ask(leave_project_text, confirm_leave_project_text).then((function(_this) {\n          return function(response) {\n            var promise;\n            promise = $rs.projects.leave($scope.project.id);\n            promise.then(function() {\n              return currentUserService.loadProjects().then(function() {\n                response.finish();\n                $confirm.notify(\"success\");\n                return $location.path($navurls.resolve(\"home\"));\n              });\n            });\n            return promise.then(null, function(response) {\n              response.finish();\n              return $confirm.notify('error', response.data._error_message);\n            });\n          };\n        })(this));\n      };\n      return $scope.leave = function() {\n        if ($scope.project.owner.id === $scope.user.id) {\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: true,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      };\n    };\n    return {\n      scope: {\n        user: \"=\",\n        project: \"=\"\n      },\n      templateUrl: \"team/leave-project.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\", LeaveProjectDirective]);\n\n  membersFilter = function() {\n    return function(members, filtersQ, filtersRole) {\n      return _.filter(members, function(m) {\n        return (!filtersRole || m.role === filtersRole.id) && (!filtersQ || m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0);\n      });\n    };\n  };\n\n  module.filter('membersFilter', membersFilter);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiDetailController, WikiSummaryDirective, WikiWysiwyg, bindOnce, debounce, groupBy, mixOf, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiDetailController = (function(superClass) {\n    extend(WikiDetailController, superClass);\n\n    WikiDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$filter\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function WikiDetailController(scope, rootscope, repo, model, confirm, rs, params, q, location, filter, log, appMetaService, navUrls, analytics, translate, errorHandlingService, projectService, attachmentsFullService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.filter = filter;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService1;\n      this.moveLink = bind(this.moveLink, this);\n      this.loadWiki = bind(this.loadWiki, this);\n      this.scope.$on(\"wiki:links:move\", this.moveLink);\n      this.scope.$on(\"wikipage:add\", this.loadWiki);\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, title;\n      title = this.translate.instant(\"WIKI.PAGE_TITLE\", {\n        wikiPageName: this.scope.wikiSlug,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\n        wikiPageContent: angular.element(((ref = this.scope.wiki) != null ? ref.html : void 0) || \"\").text(),\n        totalEditions: ((ref1 = this.scope.wiki) != null ? ref1.editions : void 0) || 0,\n        lastModifiedDate: moment((ref2 = this.scope.wiki) != null ? ref2.modified_date : void 0).format(this.translate.instant(\"WIKI.DATETIME\"))\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    WikiDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('wikipage', this.scope.wikiId, this.scope.projectId);\n    };\n\n    WikiDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiDetailController.prototype.loadWiki = function() {\n      var promise;\n      promise = this.rs.wiki.getBySlug(this.scope.projectId, this.params.slug);\n      promise.then((function(_this) {\n        return function(wiki) {\n          _this.scope.wiki = wiki;\n          _this.scope.wikiId = wiki.id;\n          _this.loadAttachments();\n          return _this.scope.wiki;\n        };\n      })(this));\n      return promise.then(null, (function(_this) {\n        return function(xhr) {\n          var data;\n          _this.scope.wikiId = null;\n          _this.scope.attachmentsReady = true;\n          if (_this.scope.project.my_permissions.indexOf(\"add_wiki_page\") === -1) {\n            return null;\n          }\n          data = {\n            project: _this.scope.projectId,\n            slug: _this.scope.wikiSlug,\n            content: \"\"\n          };\n          _this.scope.wiki = _this.model.make_model(\"wiki\", data);\n          return _this.scope.wiki;\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWiki()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiDetailController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    WikiDetailController.prototype[\"delete\"] = function() {\n      var message, title;\n      title = this.translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\");\n      message = this.scope.wikiSlug;\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            var ctx;\n            askResponse.finish();\n            ctx = {\n              project: _this.scope.projectSlug\n            };\n            _this.location.path(_this.navUrls.resolve(\"project-wiki\", ctx));\n            _this.confirm.notify(\"success\");\n            return _this.loadWiki();\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          };\n          return _this.repo.remove(_this.scope.wiki).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.moveLink = function(ctx, item, itemIndex) {\n      var r, values;\n      values = this.scope.wikiLinks;\n      r = values.indexOf(item);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, item);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values);\n    };\n\n    return WikiDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiDetailController\", WikiDetailController);\n\n  WikiSummaryDirective = function($log, $template, $compile, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"wiki/wiki-summary.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var render;\n      render = function(wiki) {\n        var avatar, ctx, html, user;\n        if ($scope.usersById == null) {\n          $log.error(\"WikiSummaryDirective requires userById set in scope.\");\n        } else {\n          user = $scope.usersById[wiki.last_modifier];\n        }\n        avatar = avatarService.getAvatar(user);\n        if (user === void 0) {\n          user = {\n            name: \"unknown\",\n            avatar: avatar\n          };\n        } else {\n          user = {\n            name: user.full_name_display,\n            avatar: avatar\n          };\n        }\n        ctx = {\n          totalEditions: wiki.editions,\n          lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\")),\n          user: user\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(wikiPage) {\n        if (!wikiPage) {\n          return;\n        }\n        return render(wikiPage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgAvatarService\", WikiSummaryDirective]);\n\n  WikiWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $qqueue, $repo, $analytics, activityService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $scope.editableDescription = false;\n      $scope.saveDescription = $qqueue.bindAdd(function(description, cb) {\n        var onError, onSuccess, promise;\n        onSuccess = function(wikiPage) {\n          if ($scope.item.id == null) {\n            $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1);\n            $scope.$emit(\"wikipage:add\");\n            $scope.editableDescription = $scope.project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n          }\n          activityService.fetchEntries(true);\n          return $confirm.notify(\"success\");\n        };\n        onError = function() {\n          return $confirm.notify(\"error\");\n        };\n        $scope.item.content = description;\n        if ($scope.item.id != null) {\n          promise = $repo.save($scope.item).then(onSuccess, onError);\n        } else {\n          promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError);\n        }\n        return promise[\"finally\"](cb);\n      });\n      $scope.uploadFiles = function(file, cb) {\n        attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\";\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        if ($scope.item.id != null) {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n        } else {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"add_wiki_page\") !== -1;\n        }\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription\\\"\\n        html-read-mode=\\\"true\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        project=\\\"project\\\"\\n        storage-key='storageKey'\\n        content='item.content'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.content.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.content\\\"></div>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && !item.content.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  module.directive(\"tgWikiWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\", WikiWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiNavDirective, bindOnce, groupBy, mixOf, module, taiga;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiNavDirective = function($tgrepo, $log, $location, $confirm, $analytics, $loading, $template, $compile, $translate) {\n    var link, linkWikiLinks, template;\n    template = $template.get(\"wiki/wiki-nav.html\", true);\n    linkWikiLinks = function($scope, $el, $attrs) {\n      var $ctrl, addWikiLinkPermission, drake, render;\n      $ctrl = $el.controller();\n      if ($attrs.ngModel == null) {\n        return $log.error(\"WikiNavDirective: no ng-model attr is defined\");\n      }\n      addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n      drake = null;\n      render = function(wikiLinks) {\n        var deleteWikiLinkPermission, html, itemEl, scroll, tdom;\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n        deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1;\n        html = template({\n          wikiLinks: wikiLinks,\n          projectSlug: $scope.projectSlug,\n          addWikiLinkPermission: addWikiLinkPermission,\n          deleteWikiLinkPermission: deleteWikiLinkPermission\n        });\n        html = $compile(html)($scope);\n        $el.off();\n        if (addWikiLinkPermission && drake) {\n          drake.destroy();\n        }\n        $el.html(html);\n        if (addWikiLinkPermission) {\n          itemEl = null;\n          tdom = $el.find(\".sortable\");\n          drake = dragula([tdom[0]], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: tdom[0],\n            moves: function(item) {\n              return $(item).is('li');\n            }\n          });\n          drake.on('dragend', function(item) {\n            var itemIndex;\n            itemEl = $(item);\n            item = itemEl.scope().link;\n            itemIndex = itemEl.index();\n            return $scope.$emit(\"wiki:links:move\", item, itemIndex);\n          });\n          scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        }\n        $el.on(\"click\", \".add-button\", function(event) {\n          event.preventDefault();\n          $el.find(\".new\").removeClass(\"hidden\");\n          $el.find(\".new input\").focus();\n          return $el.find(\".add-button\").hide();\n        });\n        $el.on(\"click\", \".js-delete-link\", function(event) {\n          var linkId, message, target, title;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          linkId = target.parents('.wiki-link').data('id');\n          title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\");\n          message = $scope.wikiLinks[linkId].title;\n          return $confirm.askOnDelete(title, message).then((function(_this) {\n            return function(askResponse) {\n              var promise;\n              promise = $tgrepo.remove($scope.wikiLinks[linkId]);\n              promise.then(function() {\n                promise = $ctrl.loadWikiLinks();\n                promise.then(function() {\n                  askResponse.finish();\n                  return render($scope.wikiLinks);\n                });\n                return promise.then(null, function() {\n                  return askResponse.finish();\n                });\n              });\n              return promise.then(null, function() {\n                askResponse.finish(false);\n                return $confirm.notify(\"error\");\n              });\n            };\n          })(this));\n        });\n        return $el.on(\"keyup\", \".new input\", function(event) {\n          var currentLoading, newLink, promise, target;\n          event.preventDefault();\n          if (event.keyCode === 13) {\n            target = angular.element(event.currentTarget);\n            newLink = target.val();\n            currentLoading = $loading().target($el.find(\".new\")).start();\n            promise = $tgrepo.create(\"wiki-links\", {\n              project: $scope.projectId,\n              title: newLink\n            });\n            promise.then(function() {\n              var loadPromise;\n              $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1);\n              loadPromise = $ctrl.loadWikiLinks();\n              loadPromise.then(function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return render($scope.wikiLinks);\n              });\n              return loadPromise.then(null, function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return $confirm.notify(\"error\", \"Error loading wiki links\");\n              });\n            });\n            return promise.then(null, function(error) {\n              var ref;\n              currentLoading.finish();\n              $el.find(\".new input\").val(newLink);\n              $el.find(\".new input\").focus().select();\n              if ((error != null ? (ref = error.__all__) != null ? ref[0] : void 0 : void 0) != null) {\n                return $confirm.notify(\"error\", \"The link already exists\");\n              } else {\n                return $confirm.notify(\"error\");\n              }\n            });\n          } else if (event.keyCode === 27) {\n            target = angular.element(event.currentTarget);\n            $el.find(\".new\").addClass(\"hidden\");\n            $el.find(\".new input\").val('');\n            return $el.find(\".add-button\").show();\n          }\n        });\n      };\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    link = function($scope, $el, $attrs) {\n      linkWikiLinks($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\", \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiPagesListController, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiPagesListController = (function(superClass) {\n    extend(WikiPagesListController, superClass);\n\n    WikiPagesListController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgNavUrls\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WikiPagesListController(scope, rootscope, repo, model, confirm, rs, params, q, navUrls, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.navUrls = navUrls;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiPagesListController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiPagesListController.prototype.loadWikiPages = function() {\n      var promise;\n      return promise = this.rs.wiki.list(this.scope.projectId).then((function(_this) {\n        return function(wikipages) {\n          return _this.scope.wikipages = wikipages;\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWikiPages()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiPagesListController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    return WikiPagesListController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiPagesListController\", WikiPagesListController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ChangeOwnerLightboxController, ChangeOwnerLightboxDirective, LbRequestOwnershipDirective, LightboxAddMembersWarningMessageDirective, TransferProjectStartSuccessDirective, debounce, module, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaKanban\");\n\n  LightboxAddMembersWarningMessageDirective = function() {\n    return {\n      templateUrl: \"admin/memberships-warning-message.html\",\n      scope: {\n        project: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective]);\n\n  LbRequestOwnershipDirective = function(lightboxService, rs, confirmService, $translate) {\n    return {\n      link: function(scope, el) {\n        lightboxService.open(el);\n        return scope.request = function() {\n          scope.loading = true;\n          return rs.projects.transferRequest(scope.projectId).then(function() {\n            scope.loading = false;\n            lightboxService.close(el);\n            return confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"));\n          });\n        };\n      },\n      templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgLbRequestOwnership', [\"lightboxService\", \"tgResources\", \"$tgConfirm\", \"$translate\", LbRequestOwnershipDirective]);\n\n  ChangeOwnerLightboxController = (function() {\n    function ChangeOwnerLightboxController(rs1, lightboxService1, confirm, translate) {\n      this.rs = rs1;\n      this.lightboxService = lightboxService1;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.users = [];\n      this.q = \"\";\n      this.commentOpen = false;\n    }\n\n    ChangeOwnerLightboxController.prototype.limit = 3;\n\n    ChangeOwnerLightboxController.prototype.filterUsers = function(user) {\n      var text, username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = this.q.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    ChangeOwnerLightboxController.prototype.getUsers = function() {\n      var users;\n      if (!this.users.length && !this.q.length) {\n        users = this.activeUsers;\n      } else {\n        users = this.users;\n      }\n      users = _.reject(users, {\n        \"id\": this.currentOwnerId\n      });\n      users = _.reject(users, {\n        \"selected\": true\n      });\n      this.totalUsers = _.size(users);\n      return users.slice(0, this.limit);\n    };\n\n    ChangeOwnerLightboxController.prototype.userSearch = function() {\n      this.users = this.activeUsers;\n      this.selected = _.find(this.users, {\n        \"selected\": true\n      });\n      if (this.q) {\n        return this.users = _.filter(this.users, this.filterUsers.bind(this));\n      }\n    };\n\n    ChangeOwnerLightboxController.prototype.selectUser = function(user) {\n      this.activeUsers = _.map(this.activeUsers, function(user) {\n        user.selected = false;\n        return user;\n      });\n      user.selected = true;\n      return this.userSearch();\n    };\n\n    ChangeOwnerLightboxController.prototype.submit = function() {\n      this.loading = true;\n      return this.rs.projects.transferStart(this.projectId, this.selected.id, this.comment).then((function(_this) {\n        return function() {\n          var desc, title;\n          _this.loading = false;\n          _this.lightboxService.closeAll();\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\");\n          desc = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\");\n          return _this.confirm.success(title, desc, {\n            type: \"svg\",\n            name: \"icon-speak-up\"\n          });\n        };\n      })(this));\n    };\n\n    return ChangeOwnerLightboxController;\n\n  })();\n\n  ChangeOwnerLightboxController.$inject = [\"tgResources\", \"lightboxService\", \"$tgConfirm\", \"$translate\"];\n\n  module.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController);\n\n  ChangeOwnerLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $template, $compile) {\n    var link;\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: true,\n      controller: \"ChangeOwnerLightbox\",\n      controllerAs: \"vm\",\n      bindToController: {\n        currentOwnerId: \"=\",\n        projectId: \"=\",\n        activeUsers: \"=\"\n      },\n      templateUrl: \"common/lightbox/lightbox-change-owner.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective]);\n\n  TransferProjectStartSuccessDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el) {\n      scope.close = function() {\n        return lightboxService.close(el);\n      };\n      return lightboxService.open(el);\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MembershipsController, MembershipsDirective, MembershipsRowActionsDirective, MembershipsRowAdminCheckboxDirective, MembershipsRowAvatarDirective, MembershipsRowRoleSelectorDirective, NoMoreMembershipsExplanationDirective, bindMethods, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  MembershipsController = (function(superClass) {\n    extend(MembershipsController, superClass);\n\n    MembershipsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAnalytics\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgLightboxFactory\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function MembershipsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, analytics, appMetaService, translate, auth, lightboxFactory1, errorHandlingService, projectService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.auth = auth;\n      this.lightboxFactory = lightboxFactory1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      bindMethods(this);\n      this.scope.project = {};\n      this.scope.filters = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"membersform:new:success\", (function(_this) {\n        return function() {\n          _this.loadInitialData();\n          return _this.analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1);\n        };\n      })(this));\n    }\n\n    MembershipsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.canAddUsers = project.max_memberships === null || project.max_memberships > project.total_memberships;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    MembershipsController.prototype.loadMembers = function() {\n      var httpFilters;\n      httpFilters = this.getUrlFilters();\n      return this.rs.memberships.list(this.scope.projectId, httpFilters).then((function(_this) {\n        return function(data) {\n          _this.scope.memberships = _.filter(data.models, function(membership) {\n            return membership.user === null || membership.is_user_active;\n          });\n          _.map(_this.scope.memberships, function(member) {\n            if (member.is_owner) {\n              return _this.scope.projectOwnerEmail = member.user_email;\n            }\n          });\n          _this.scope.page = data.current;\n          _this.scope.count = data.count;\n          _this.scope.paginatedBy = data.paginatedBy;\n          return data;\n        };\n      })(this));\n    };\n\n    MembershipsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.q.all([this.loadMembers(), this.auth.refresh()]);\n    };\n\n    MembershipsController.prototype.getUrlFilters = function() {\n      var filters;\n      filters = _.pick(this.location.search(), \"page\");\n      if (!filters.page) {\n        filters.page = 1;\n      }\n      return filters;\n    };\n\n    MembershipsController.prototype.addNewMembers = function() {\n      return this.lightboxFactory.create('tg-lb-add-members', {\n        \"class\": \"lightbox lightbox-add-member\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.scope.project\n      });\n    };\n\n    MembershipsController.prototype.showLimitUsersWarningMessage = function() {\n      var icon, message, title;\n      title = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\");\n      message = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\n        members: this.scope.project.max_memberships\n      });\n      icon = \"/\" + window._version + \"/svg/icons/team-question.svg\";\n      return this.confirm.success(title, message, {\n        name: icon,\n        type: \"img\"\n      });\n    };\n\n    return MembershipsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"MembershipsController\", MembershipsController);\n\n  MembershipsDirective = function($template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"admin/admin-membership-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".memberships-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        $pagEl.html(html);\n        return $pagEl.show();\n      };\n      $scope.$watch(\"memberships\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".memberships-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      $el.on(\"click\", \".memberships-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      return $el.on(\"click\", \".memberships-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadMembers();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective]);\n\n  MembershipsRowAvatarDirective = function($log, $template, $translate, $compile, avatarService) {\n    var link, template;\n    template = $template.get(\"admin/memberships-row-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      var member, pending, render;\n      pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\");\n      render = function(member) {\n        var avatar, ctx, html;\n        avatar = avatarService.getAvatar(member);\n        ctx = {\n          full_name: member.full_name ? member.full_name : \"\",\n          email: member.user_email ? member.user_email : member.email,\n          imgurl: avatar.url,\n          bg: avatar.bg,\n          pending: !member.is_user_active ? pending : \"\",\n          isOwner: member.is_owner\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowAvatar == null) {\n        return $log.error(\"MembershipsRowAvatarDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAvatar);\n      render(member);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective]);\n\n  MembershipsRowAdminCheckboxDirective = function($log, $repo, $confirm, $template, $compile) {\n    var link, template;\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true);\n    link = function($scope, $el, $attrs) {\n      var html, member, render;\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      if ($attrs.tgMembershipsRowAdminCheckbox == null) {\n        return $log.error(\"MembershipsRowAdminCheckboxDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox);\n      if (member.is_owner) {\n        $el.find(\".js-check\").remove();\n        return;\n      }\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          inputId: \"is-admin-\" + member.id\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $el.on(\"click\", \":checkbox\", (function(_this) {\n        return function(event) {\n          var onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function(data) {\n            member.revert();\n            $el.find(\":checkbox\").prop(\"checked\", member.is_admin);\n            return $confirm.notify(\"error\", data.is_admin[0]);\n          };\n          target = angular.element(event.currentTarget);\n          member.is_admin = target.prop(\"checked\");\n          return $repo.save(member).then(onSuccess, onError);\n        };\n      })(this));\n      html = render(member);\n      if (member.is_admin) {\n        return $el.find(\":checkbox\").prop(\"checked\", true);\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective]);\n\n  MembershipsRowRoleSelectorDirective = function($log, $repo, $confirm) {\n    var link, template;\n    template = _.template(\"<select>\\n    <% _.each(roleList, function(role) { %>\\n    <option value=\\\"<%- role.id %>\\\" <% if(selectedRole === role.id){ %>selected=\\\"selected\\\"<% } %>>\\n        <%- role.name %>\\n    </option>\\n    <% }); %>\\n</select>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, html, member, render;\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          roleList: $scope.project.roles,\n          selectedRole: member.role\n        };\n        html = template(ctx);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowRoleSelector == null) {\n        return $log.error(\"MembershipsRowRoleSelectorDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowRoleSelector);\n      html = render(member);\n      $el.on(\"change\", \"select\", (function(_this) {\n        return function(event) {\n          var newRole, onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          target = angular.element(event.currentTarget);\n          newRole = parseInt(target.val(), 10);\n          if (member.role !== newRole) {\n            member.role = newRole;\n            return $repo.save(member).then(onSuccess, onError);\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", MembershipsRowRoleSelectorDirective]);\n\n  MembershipsRowActionsDirective = function($log, $repo, $rs, $confirm, $compile, $translate, $location, $navUrls, lightboxFactory, projectService) {\n    var activedTemplate, link, pendingTemplate;\n    activedTemplate = \"<div class=\\\"active\\\"\\n     translate=\\\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\\\">\\n</div>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    pendingTemplate = \"<a class=\\\"resend js-resend\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\\\"\\n   translate=\\\"ADMIN.MEMBERSHIP.RESEND\\\">\\n</a>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    link = function($scope, $el, $attrs) {\n      var $ctrl, leaveConfirm, member, render;\n      render = function(member) {\n        var html;\n        if (member.user) {\n          html = $compile(activedTemplate)($scope);\n        } else {\n          html = $compile(pendingTemplate)($scope);\n        }\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowActions == null) {\n        return $log.error(\"MembershipsRowActionsDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowActions);\n      render(member);\n      $el.on(\"click\", \".js-resend\", function(event) {\n        var onError, onSuccess;\n        event.preventDefault();\n        onSuccess = function() {\n          var text;\n          text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\n            email: $scope.member.email\n          });\n          return $confirm.notify(\"success\", text);\n        };\n        onError = function() {\n          var text;\n          text = $translate.instant(\"ADMIM.MEMBERSHIP.ERROR_SEND_INVITATION\");\n          return $confirm.notify(\"error\", text);\n        };\n        return $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError);\n      });\n      leaveConfirm = function() {\n        var defaultMsg, message, title;\n        title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\");\n        defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {\n          email: member.email\n        });\n        message = member.user ? member.full_name : defaultMsg;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish();\n              if (member.user !== $scope.user.id) {\n                if ($scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy) {\n                  $ctrl.selectFilter(\"page\", $scope.page - 1);\n                }\n                projectService.fetchProject().then(function() {\n                  return $ctrl.loadInitialData();\n                });\n              } else {\n                $location.path($navUrls.resolve(\"home\"));\n              }\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"success\", text, null, 5000);\n            };\n          })(this);\n          onError = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish(false);\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"error\", text);\n            };\n          })(this);\n          return $repo.remove(member).then(onSuccess, onError);\n        });\n      };\n      $el.on(\"click\", \".delete\", function(event) {\n        var isCurrentUser;\n        event.preventDefault();\n        if ($scope.project.owner.id === member.user) {\n          isCurrentUser = $scope.user.id === member.user;\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: isCurrentUser,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\", \"tgProjectService\", MembershipsRowActionsDirective]);\n\n  NoMoreMembershipsExplanationDirective = function() {\n    return {\n      templateUrl: \"admin/no-more-memberships-explanation.html\",\n      scope: {\n        project: \"=\",\n        ownerEmail: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminNavigationDirective, module;\n\n  AdminNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgAdminNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#adminmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaAdmin\");\n\n  module.directive(\"tgAdminNavigation\", AdminNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminProjectChangeOwnerDirective, AdminProjectRequestOwnershipDirective, AdminProjectRestrictionsDirective, CsvEpicDirective, CsvExporterController, CsvExporterEpicsController, CsvExporterIssuesController, CsvExporterTasksController, CsvExporterUserstoriesController, CsvIssueDirective, CsvTaskDirective, CsvUsDirective, ProjectDefaultValuesDirective, ProjectExportDirective, ProjectLogoDirective, ProjectLogoModelDirective, ProjectModulesDirective, ProjectProfileController, ProjectProfileDirective, bindOnce, debounce, groupBy, joinStr, mixOf, module, scopeDefer, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectProfileController = (function(superClass) {\n    extend(ProjectProfileController, superClass);\n\n    ProjectProfileController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgCurrentUserService\", \"tgErrorHandlingService\", \"tgProjectService\", \"$tgModel\"];\n\n    function ProjectProfileController(scope1, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, tgAuth, currentUserService1, errorHandlingService, projectService1, model1) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.tgAuth = tgAuth;\n      this.currentUserService = currentUserService1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.model = model1;\n      this.scope.project = {};\n      this.scope.projectTags = [];\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          _this.appMetaService.setAll(title, description);\n          return _this.fillUsersAndRoles(_this.scope.project.members, _this.scope.project.roles);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:loaded\", (function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n    }\n\n    ProjectProfileController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\");\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n      this.scope.issueTypesList = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.prioritiesList = _.sortBy(project.priorities, \"order\");\n      this.scope.severitiesList = _.sortBy(project.severities, \"order\");\n      scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$emit('project:loaded', project);\n        };\n      })(this));\n      this.scope.projectTags = _.map(this.scope.project.tags, (function(_this) {\n        return function(it) {\n          return [it, _this.scope.project.tags_colors[it]];\n        };\n      })(this));\n      return project;\n    };\n\n    ProjectProfileController.prototype.loadInitialData = function() {\n      this.loadProject();\n      this.scope.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects().valid;\n      return this.tgAuth.refresh();\n    };\n\n    ProjectProfileController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.project);\n    };\n\n    ProjectProfileController.prototype.addTag = function(name, color) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      tags.push(name);\n      this.scope.projectTags.push([name, null]);\n      return this.scope.project.tags = tags;\n    };\n\n    ProjectProfileController.prototype.deleteTag = function(tag) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      _.pull(tags, tag[0]);\n      _.remove(this.scope.projectTags, (function(_this) {\n        return function(it) {\n          return it[0] === tag[0];\n        };\n      })(this));\n      return this.scope.project.tags = tags;\n    };\n\n    return ProjectProfileController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectProfileController\", ProjectProfileController);\n\n  ProjectProfileDirective = function($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, form, submit, submitButton;\n      $ctrl = $el.controller();\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, privacyChanged, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          privacyChanged = $scope.project.isAttributeModified(\"is_private\");\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            var newUrl;\n            currentLoading.finish();\n            if (privacyChanged && $scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-public-to-private\", \"Change project privacy from public to private\", 1);\n            } else if (privacyChanged && !$scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-private-to-public\", \"Change project privacy from private to public\", 1);\n            }\n            $confirm.notify(\"success\");\n            newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\n              project: $scope.project.slug\n            });\n            $location.path(newUrl);\n            projectService.fetchProject().then((function(_this) {\n              return function() {\n                return $ctrl.loadInitialData();\n              };\n            })(this));\n            return currentUserService.loadProjects();\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\", \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\", ProjectProfileDirective]);\n\n  ProjectDefaultValuesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $rootScope.$broadcast(\"admin:project-default-values:updated\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectDefaultValuesDirective]);\n\n  ProjectModulesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = (function(_this) {\n        return function() {\n          var form, promise;\n          form = $el.find(\"form\").checksley();\n          form.initializeFields();\n          form.reset();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            $scope.$emit(\"project:loaded\", $scope.project);\n            $rootScope.$broadcast(\"admin:project-modules:updated\");\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this);\n      $el.on(\"change\", \".module-activation.module-direct-active input\", function(event) {\n        event.preventDefault();\n        return $scope.$applyAsync(submit);\n      });\n      $el.on(\"submit\", \"form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"keydown\", \".videoconference-attributes input\", function(e) {\n        return e.which !== 32;\n      });\n      $scope.$watch(\"project.videoconferences\", function(newVal, oldVal) {\n        if ((newVal != null) && (oldVal != null) && newVal !== oldVal) {\n          return $scope.project.videoconferences_extra_data = \"\";\n        }\n      });\n      $scope.$watch(\"isVideoconferenceActivated\", function(newValue, oldValue) {\n        if (newValue === false) {\n          $scope.project.videoconferences = null;\n          $scope.project.videoconferences_extra_data = \"\";\n          if (oldValue === true) {\n            return submit();\n          }\n        }\n      });\n      return $scope.$watch(\"project\", function(project) {\n        if (project.videoconferences != null) {\n          return $scope.isVideoconferenceActivated = true;\n        } else {\n          return $scope.isVideoconferenceActivated = false;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectModulesDirective]);\n\n  ProjectExportDirective = function($window, $rs, $confirm, $translate, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var asyn_message, buttonsEl, dump_ready_text, hideButtons, hideResult, hideSpinner, loading_msg, loading_title, resultEl, resultMessageEl, resultTitleEl, setAsyncMessage, setAsyncTitle, setLoadingMessage, setLoadingTitle, setSyncMessage, setSyncTitle, showButtons, showErrorMode, showExportResultAsyncMode, showExportResultSyncMode, showLoadingMode, showResult, showSpinner, spinnerEl, syn_message;\n      buttonsEl = $el.find(\".admin-project-export-buttons\");\n      showButtons = function() {\n        return buttonsEl.removeClass(\"hidden\");\n      };\n      hideButtons = function() {\n        return buttonsEl.addClass(\"hidden\");\n      };\n      resultEl = $el.find(\".admin-project-export-result\");\n      showResult = function() {\n        return resultEl.removeClass(\"hidden\");\n      };\n      hideResult = function() {\n        return resultEl.addClass(\"hidden\");\n      };\n      spinnerEl = $el.find(\".spin\");\n      showSpinner = function() {\n        return spinnerEl.removeClass(\"hidden\");\n      };\n      hideSpinner = function() {\n        return spinnerEl.addClass(\"hidden\");\n      };\n      resultTitleEl = $el.find(\".result-title\");\n      loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\");\n      loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\");\n      dump_ready_text = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"));\n      };\n      asyn_message = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"));\n      };\n      syn_message = function(url) {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\n          url: url\n        }));\n      };\n      setLoadingTitle = function() {\n        return resultTitleEl.html(loading_title);\n      };\n      setAsyncTitle = function() {\n        return resultTitleEl.html(loading_msg);\n      };\n      setSyncTitle = function() {\n        return resultTitleEl.html(dump_ready_text);\n      };\n      resultMessageEl = $el.find(\".result-message \");\n      setLoadingMessage = function() {\n        return resultMessageEl.html(loading_msg);\n      };\n      setAsyncMessage = function() {\n        return resultMessageEl.html(asyn_message);\n      };\n      setSyncMessage = function(url) {\n        return resultMessageEl.html(syn_message(url));\n      };\n      showLoadingMode = function() {\n        showSpinner();\n        setLoadingTitle();\n        setLoadingMessage();\n        hideButtons();\n        return showResult();\n      };\n      showExportResultAsyncMode = function() {\n        hideSpinner();\n        setAsyncTitle();\n        return setAsyncMessage();\n      };\n      showExportResultSyncMode = function(url) {\n        hideSpinner();\n        setSyncTitle();\n        return setSyncMessage(url);\n      };\n      showErrorMode = function() {\n        hideSpinner();\n        hideResult();\n        return showButtons();\n      };\n      return $el.on(\"click\", \".button-export\", debounce(2000, (function(_this) {\n        return function(event) {\n          var onError, onSuccess;\n          event.preventDefault();\n          onSuccess = function(result) {\n            var dumpUrl;\n            $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1);\n            if (result.status === 202) {\n              return showExportResultAsyncMode();\n            } else {\n              dumpUrl = result.data.url;\n              showExportResultSyncMode(dumpUrl);\n              return $window.open(dumpUrl, \"_blank\");\n            }\n          };\n          onError = function(result) {\n            var errorMsg, ref;\n            showErrorMode();\n            errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\n                message: result.data._error_message\n              });\n            }\n            return $confirm.notify(\"error\", errorMsg);\n          };\n          showLoadingMode();\n          return $rs.projects[\"export\"]($scope.projectId).then(onSuccess, onError);\n        };\n      })(this)));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\", \"$tgAnalytics\", ProjectExportDirective]);\n\n  CsvExporterController = (function(superClass) {\n    extend(CsvExporterController, superClass);\n\n    CsvExporterController.$inject = [\"$scope\", \"$rootScope\", \"$tgUrls\", \"$tgConfirm\", \"$tgResources\", \"$translate\"];\n\n    function CsvExporterController(scope1, rootscope, urls, confirm, rs, translate) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.urls = urls;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.translate = translate;\n      this._deleteUuid = bind(this._deleteUuid, this);\n      this._generateUuid = bind(this._generateUuid, this);\n      this.setCsvUuid = bind(this.setCsvUuid, this);\n      this.rootscope.$on(\"project:loaded\", this.setCsvUuid);\n      this.scope.$watch(\"csvUuid\", (function(_this) {\n        return function(value) {\n          if (value) {\n            return _this.scope.csvUrl = _this.urls.resolveAbsolute(_this.type + \"-csv\", value);\n          } else {\n            return _this.scope.csvUrl = \"\";\n          }\n        };\n      })(this));\n    }\n\n    CsvExporterController.prototype.setCsvUuid = function() {\n      return this.scope.csvUuid = this.scope.project[this.type + \"_csv_uuid\"];\n    };\n\n    CsvExporterController.prototype._generateUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"regenerate_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype._deleteUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"delete_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype.regenerateUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._generateUuid);\n      } else {\n        return this._generateUuid();\n      }\n    };\n\n    CsvExporterController.prototype.deleteUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._deleteUuid);\n      } else {\n        return this._deleteUuid();\n      }\n    };\n\n    return CsvExporterController;\n\n  })(taiga.Controller);\n\n  CsvExporterEpicsController = (function(superClass) {\n    extend(CsvExporterEpicsController, superClass);\n\n    function CsvExporterEpicsController() {\n      return CsvExporterEpicsController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterEpicsController.prototype.type = \"epics\";\n\n    return CsvExporterEpicsController;\n\n  })(CsvExporterController);\n\n  CsvExporterUserstoriesController = (function(superClass) {\n    extend(CsvExporterUserstoriesController, superClass);\n\n    function CsvExporterUserstoriesController() {\n      return CsvExporterUserstoriesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterUserstoriesController.prototype.type = \"userstories\";\n\n    return CsvExporterUserstoriesController;\n\n  })(CsvExporterController);\n\n  CsvExporterTasksController = (function(superClass) {\n    extend(CsvExporterTasksController, superClass);\n\n    function CsvExporterTasksController() {\n      return CsvExporterTasksController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterTasksController.prototype.type = \"tasks\";\n\n    return CsvExporterTasksController;\n\n  })(CsvExporterController);\n\n  CsvExporterIssuesController = (function(superClass) {\n    extend(CsvExporterIssuesController, superClass);\n\n    function CsvExporterIssuesController() {\n      return CsvExporterIssuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterIssuesController.prototype.type = \"issues\";\n\n    return CsvExporterIssuesController;\n\n  })(CsvExporterController);\n\n  module.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController);\n\n  module.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController);\n\n  module.controller(\"CsvExporterTasksController\", CsvExporterTasksController);\n\n  module.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController);\n\n  CsvEpicDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\";\n    };\n    return {\n      controller: \"CsvExporterEpicsController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective]);\n\n  CsvUsDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\";\n    };\n    return {\n      controller: \"CsvExporterUserstoriesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective]);\n\n  CsvTaskDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\";\n    };\n    return {\n      controller: \"CsvExporterTasksController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective]);\n\n  CsvIssueDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\";\n    };\n    return {\n      controller: \"CsvExporterIssuesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective]);\n\n  ProjectLogoDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").addClass(\"active\");\n      };\n      onSuccess = function(response) {\n        var project;\n        project = $model.make_model(\"projects\", response.data);\n        $scope.project = project;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-logo\", function() {\n        return $el.find(\"#logo-field\").click();\n      });\n      $el.on(\"change\", \"#logo-field\", function(event) {\n        if ($scope.logoAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-default-logo\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective]);\n\n  ProjectLogoModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgProjectLogoModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective]);\n\n  AdminProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        \"project\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective]);\n\n  AdminProjectRequestOwnershipDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.requestOwnership = function() {\n          if (scope.canRequest) {\n            return lightboxFactory.create(\"tg-lb-request-ownership\", {\n              \"class\": \"lightbox lightbox-request-ownership\"\n            }, {\n              projectId: scope.projectId\n            });\n          }\n        };\n      },\n      scope: {\n        \"canRequest\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective]);\n\n  AdminProjectChangeOwnerDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.changeOwner = function() {\n          return lightboxFactory.create(\"tg-lb-change-owner\", {\n            \"class\": \"lightbox lightbox-select-user\",\n            \"project-id\": \"projectId\",\n            \"active-users\": \"activeUsers\",\n            \"current-owner-id\": \"currentOwnerId\"\n          }, {\n            projectId: scope.projectId,\n            activeUsers: scope.activeUsers,\n            currentOwnerId: scope.owner.id,\n            members: scope.members\n          });\n        };\n      },\n      scope: {\n        \"activeUsers\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\",\n        \"members\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-change-owner.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, ProjectCustomAttributesController, ProjectCustomAttributesDirective, ProjectDueDatesValues, ProjectDueDatesValuesController, ProjectSwimlanesSingle, ProjectSwimlanesValue, ProjectSwimlanesValuesController, ProjectSwimlanesWipDirective, ProjectTagsController, ProjectTagsDirective, ProjectValuesController, ProjectValuesDirective, ProjectValuesSectionController, RICHTEXT_TYPE, SortableSwimlanes, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindOnce, debounce, defaultColor, getDefaulColorList, groupBy, joinStr, mixOf, module, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  getDefaulColorList = this.taiga.getDefaulColorList;\n\n  defaultColor = '#A9AABC';\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectValuesSectionController = (function(superClass) {\n    extend(ProjectValuesSectionController, superClass);\n\n    ProjectValuesSectionController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function ProjectValuesSectionController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, errorHandlingService, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.project = {};\n      this.scope.$on(\"project:load\", (function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            return _this.loadProject();\n          });\n        };\n      })(this));\n      this.loadInitialData();\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n    }\n\n    ProjectValuesSectionController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    ProjectValuesSectionController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return promise;\n    };\n\n    return ProjectValuesSectionController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController);\n\n  ProjectValuesController = (function(superClass) {\n    extend(ProjectValuesController, superClass);\n\n    ProjectValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    function ProjectValuesController(scope, rootscope, repo, confirm, rs) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.moveValue = bind(this.moveValue, this);\n      this.loadValues = bind(this.loadValues, this);\n      this.scope.$on(\"admin:project-values:move\", this.moveValue);\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadValues();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.values = values;\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectValuesController.prototype.moveValue = function(ctx, itemValue, itemIndex) {\n      var r, values;\n      values = this.scope.values;\n      r = values.indexOf(itemValue);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, itemValue);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"admin:project-values:updated\");\n        };\n      })(this));\n    };\n\n    return ProjectValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectValuesController\", ProjectValuesController);\n\n  ProjectSwimlanesValuesController = (function(superClass) {\n    extend(ProjectSwimlanesValuesController, superClass);\n\n    ProjectSwimlanesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgProjectService\"];\n\n    function ProjectSwimlanesValuesController(scope, rootscope, repo, translate, confirm, rs, projectService1) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.projectService = projectService1;\n      this.removeSwimlane = bind(this.removeSwimlane, this);\n      this.loadSwimlanes = bind(this.loadSwimlanes, this);\n      this.filterArchivedSwimlaneStatus = bind(this.filterArchivedSwimlaneStatus, this);\n      this.filterArchivedProjectStatuses = bind(this.filterArchivedProjectStatuses, this);\n      this.updatedSwimlanePosition = bind(this.updatedSwimlanePosition, this);\n      this.setDefaultSwimlane = bind(this.setDefaultSwimlane, this);\n      this.updateSwimlane = bind(this.updateSwimlane, this);\n      this.addSwimlane = bind(this.addSwimlane, this);\n      this.scope.$on(\"swimlane:load\", (function(_this) {\n        return function() {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadSwimlanes();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectSwimlanesValuesController.prototype.addSwimlane = function() {\n      var promise;\n      promise = this.rs[this.scope.resource].create(this.scope.projectId, this.scope.swimlane.name);\n      promise.success((function(_this) {\n        return function(values) {\n          _this.scope.swimlaneAdded();\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n      return promise.error((function(_this) {\n        return function() {\n          _this.confirm.notify('light-error', _this.translate.instant(\"ADMIN.PROJECT_KANBAN_OPTIONS.ACTION_ADD_SWIMLANE\"));\n          return _this.scope.hideSwimlaneForm();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updateSwimlane = function(swimlane, name) {\n      return this.rs[this.scope.resource].edit(swimlane.id, name).then((function(_this) {\n        return function(values) {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.setDefaultSwimlane = function(swimlane) {\n      return this.rs.projects.patch_default_swimlane(this.scope.projectId, swimlane.id).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updatedSwimlanePosition = function(swimlane, position) {\n      var newSwimlanesOrder, prevSwimlane, swimlanesOrderArrayFiltered;\n      prevSwimlane = this.scope.values.find(function(value) {\n        return value.id === swimlane.id;\n      });\n      if (prevSwimlane.order === position) {\n        return;\n      }\n      swimlanesOrderArrayFiltered = this.scope.values.filter((function(_this) {\n        return function(value, index) {\n          return value.id !== swimlane.id;\n        };\n      })(this));\n      swimlanesOrderArrayFiltered.splice(position, 0, swimlane);\n      newSwimlanesOrder = swimlanesOrderArrayFiltered.map((function(_this) {\n        return function(swimlane, index) {\n          return [swimlane.id, index];\n        };\n      })(this));\n      return this.rs[this.scope.resource].bulkUpdateOrder(this.scope.projectId, newSwimlanesOrder).then((function(_this) {\n        return function(values) {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedProjectStatuses = function() {\n      return this.scope.project.us_statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedSwimlaneStatus = function(swimlane) {\n      return swimlane.statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.loadSwimlanes = function() {\n      return this.rs[this.scope.resource].list(this.scope.projectId).then((function(_this) {\n        return function(values) {\n          return _this.scope.values = values;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.removeSwimlane = function(swimlaneId, moveTo) {\n      return this.rs[this.scope.resource][\"delete\"](swimlaneId, moveTo).then((function(_this) {\n        return function() {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    return ProjectSwimlanesValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectSwimlanesValuesController\", ProjectSwimlanesValuesController);\n\n  ProjectSwimlanesValue = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.isFormVisible = false;\n      $scope.isNewSwimlane = false;\n      $scope.swimlane = {\n        name: ''\n      };\n      $scope.swimlaneAdded = function() {\n        $scope.swimlane = {\n          name: ''\n        };\n        $scope.isNewSwimlane = true;\n        $scope.isFormVisible = false;\n        return setTimeout(function() {\n          $scope.isNewSwimlane = false;\n          return $scope.$apply();\n        }, 10000);\n      };\n      $scope.displaySwimlaneForm = function() {\n        $scope.isFormVisible = true;\n        return $timeout(function() {\n          return $el.find(\"#admin-swimlanes-form-input\").focus();\n        });\n      };\n      $scope.hideSwimlaneForm = function() {\n        $scope.isFormVisible = false;\n        return $scope.swimlane = {\n          name: ''\n        };\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesValues\", [\"$timeout\", ProjectSwimlanesValue]);\n\n  ProjectSwimlanesSingle = function($translate, $confirm, $animate) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.displaySwimlaneSingleForm = false;\n      $scope.swimlaneSingleForm = {\n        name: ''\n      };\n      $scope.updateSwimlane = function(swimlane) {\n        $scope.displaySwimlaneSingleForm = false;\n        return $ctrl.updateSwimlane(swimlane, $scope.swimlaneSingleForm.name);\n      };\n      $scope.setDefaultSwimlane = function(swimlane) {\n        return $ctrl.setDefaultSwimlane(swimlane);\n      };\n      $scope.getDefaultTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DEFAULT_SWIMLANE\");\n        } else {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SET_DEFAULT_SWIMLANE\");\n        }\n      };\n      $scope.removeSwimlaneTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DISABLE_DELETE_SWIMLANE\");\n        }\n      };\n      $scope.editSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = true;\n      };\n      $scope.cancelEditSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = false;\n      };\n      return $scope.removeSwimlaneDialog = (function(_this) {\n        return function(event, swimlane) {\n          var choices, replacement, subtitle, title;\n          title = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.TITLE_ACTION_DELETE_SWIMLANE\");\n          $animate.on(\"leave\", $el[0], function(element, phase) {\n            if (phase === \"close\") {\n              $animate.off(\"leave\", $el[0]);\n              return $ctrl.scope.$evalAsync((function(_this) {\n                return function() {\n                  return $ctrl.scope.deletingSwimlane = false;\n                };\n              })(this));\n            }\n          });\n          if ($scope.values.length > 1) {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_OPTIONS\", {\n              swimlane: swimlane.name\n            });\n            replacement = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_REPLACEMENT\");\n            choices = {};\n            _.each($scope.values, function(option) {\n              if (swimlane.id !== option.id) {\n                return choices[option.id] = option.name;\n              }\n            });\n            return $confirm.askChoice(title, subtitle, choices, replacement).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id, response.selected);\n              return response.finish();\n            });\n          } else {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_LAST\");\n            return $confirm.askDelete(title, subtitle).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id);\n              return response.finish();\n            });\n          }\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesSingle\", [\"$translate\", \"$tgConfirm\", \"$animate\", ProjectSwimlanesSingle]);\n\n  SortableSwimlanes = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      var drake, itemEl, tdom;\n      $ctrl = $el.controller();\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemValue, newIndex;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        newIndex = itemEl.index();\n        return $scope.$apply(function() {\n          return $ctrl.updatedSwimlanePosition(itemValue, newIndex);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSortableSwimlanes\", [SortableSwimlanes]);\n\n  ProjectDueDatesValuesController = (function(superClass) {\n    extend(ProjectDueDatesValuesController, superClass);\n\n    function ProjectDueDatesValuesController() {\n      this.displayValues = bind(this.displayValues, this);\n      this.createDefaultValues = bind(this.createDefaultValues, this);\n      this.loadValues = bind(this.loadValues, this);\n      return ProjectDueDatesValuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    ProjectDueDatesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    ProjectDueDatesValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          } else {\n            _this.createDefaultValues();\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.createDefaultValues = function() {\n      if (this.rs[this.scope.resource].createDefaultValues == null) {\n        return;\n      }\n      return this.rs[this.scope.resource].createDefaultValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(response) {\n          var values;\n          _this.rootscope.$broadcast(\"admin:project-values:updated\");\n          values = response.data;\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.displayValues = function(values) {\n      _.each(values, function(value, index) {\n        value.days_to_due_abs = value.days_to_due !== null ? Math.abs(value.days_to_due) : null;\n        return value.sign = value.days_to_due >= 0 ? 1 : -1;\n      });\n      return this.scope.values = values;\n    };\n\n    return ProjectDueDatesValuesController;\n\n  })(ProjectValuesController);\n\n  module.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController);\n\n  ProjectValuesDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var link, linkDragAndDrop, linkValue;\n    linkDragAndDrop = function($scope, $el, $attrs) {\n      var drake, itemEl, newParentScope, oldParentScope, scroll, tdom;\n      oldParentScope = null;\n      newParentScope = null;\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemIndex, itemValue;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        itemIndex = itemEl.index();\n        return $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    linkValue = function($scope, $el, $attrs) {\n      var $ctrl, cancel, goToBottomList, initializeNewValue, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"is_closed\": false,\n          \"is_archived\": false\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_\" + (objName.toUpperCase()) + \".ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, promise, value;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        value = formEl.scope().value;\n        if (!value.color) {\n          value.color = defaultColor;\n        }\n        promise = $repo.save(value);\n        promise.then(function() {\n          var row;\n          row = target.parents(\".row.table-main\");\n          row.addClass(\"hidden\");\n          row.siblings(\".visualization\").removeClass('hidden');\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return projectService.fetchProject();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        if (!$scope.newValue.color) {\n          $scope.newValue.color = defaultColor;\n        }\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          $scope.values.push(data);\n          $scope.maxValueOrder = data.order;\n          initializeNewValue();\n          return $rootscope.$broadcast(\"admin:project-values:updated\");\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, value;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          value.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").removeClass('hidden');\n        return goToBottomList(true);\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      return $el.on(\"click\", \".delete-value\", function(event) {\n        var choices, formEl, subtitle, target, text, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        choices = {};\n        _.each($scope.values, function(option) {\n          if (value.id !== option.id) {\n            return choices[option.id] = option.name;\n          }\n        });\n        subtitle = value.name;\n        if (_.keys(choices).length === 0) {\n          return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"));\n        }\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\");\n        text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\");\n        return $confirm.askChoice(title, subtitle, choices, text).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value, {\n            \"moveTo\": response.selected\n          }).then(onSucces, onError);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      linkDragAndDrop($scope, $el, $attrs);\n      linkValue($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective]);\n\n  ProjectDueDatesValues = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var linkDueDateStatusValue, parentDirective;\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService);\n    linkDueDateStatusValue = function($scope, $el, $attrs, $ctrl) {\n      var _setDaysToDue, _valueFromEventTarget, initializeNewValue, saveNewValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"days_to_due\": 0,\n          \"sign\": 1\n        };\n      };\n      initializeNewValue();\n      _setDaysToDue = function(value) {\n        return value.days_to_due = value.days_to_due_abs * value.sign;\n      };\n      _valueFromEventTarget = function(event) {\n        var formEl, row, target;\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        if (!formEl.scope().value) {\n          return formEl.scope().newValue;\n        } else {\n          return formEl.scope().value;\n        }\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          data.sign = $scope.newValue.sign;\n          data.days_to_due_abs = $scope.newValue.days_to_due_abs;\n          $scope.values.push(data);\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return initializeNewValue();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      $el.on(\"input\", \".days-to-due-abs\", function(event) {\n        var value;\n        event.preventDefault();\n        value = _valueFromEventTarget(event);\n        return $scope.$apply(function() {\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".days-to-due-sign\", function(event) {\n        var currentValue, value;\n        event.preventDefault();\n        currentValue = Number(angular.element(event.currentTarget).parent().find('input').val());\n        value = _valueFromEventTarget(event);\n        if (currentValue === value.sign) {\n          return;\n        }\n        return $scope.$apply(function() {\n          value.sign = value.sign * -1;\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".add-new-due-date\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        var formEl, subtitle, target, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\");\n        subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\", {\n          due_date_status_name: value.name\n        });\n        return $confirm.askDelete(title, subtitle).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value).then(onSucces, onError);\n        });\n      });\n    };\n    return {\n      link: function($scope, $el, $attrs) {\n        parentDirective.link($scope, $el, $attrs);\n        return linkDueDateStatusValue($scope, $el, $attrs);\n      }\n    };\n  };\n\n  module.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues]);\n\n  TEXT_TYPE = \"text\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  RICHTEXT_TYPE = \"richtext\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  ProjectCustomAttributesController = (function(superClass) {\n    extend(ProjectCustomAttributesController, superClass);\n\n    ProjectCustomAttributesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function ProjectCustomAttributesController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, translate, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService1;\n      this.moveCustomAttributes = bind(this.moveCustomAttributes, this);\n      this.deleteCustomAttribute = bind(this.deleteCustomAttribute, this);\n      this.saveCustomAttribute = bind(this.saveCustomAttribute, this);\n      this.createCustomAttribute = bind(this.createCustomAttribute, this);\n      this.loadCustomAttributes = bind(this.loadCustomAttributes, this);\n      this._onCustomAttributesModified = bind(this._onCustomAttributesModified, this);\n      this.scope.TYPE_CHOICES = TYPE_CHOICES;\n      this.scope.project = this.projectService.project.toJS();\n      this.scope.projectId = this.scope.project.id;\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n      this.scope.init = (function(_this) {\n        return function(type) {\n          _this.scope.type = type;\n          return _this.loadCustomAttributes();\n        };\n      })(this);\n    }\n\n    ProjectCustomAttributesController.prototype._parseAttributesExtra = function() {\n      return this.scope.customAttributes = _.map(this.scope.customAttributes, (function(_this) {\n        return function(x) {\n          return _this._parseAttributeExtra(x);\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype._parseAttributeExtra = function(attr) {\n      if (attr.type === 'dropdown' && !attr.extra) {\n        attr.extra = [''];\n      }\n      return attr;\n    };\n\n    ProjectCustomAttributesController.prototype._onCustomAttributesModified = function() {\n      return this.rootscope.$broadcast(\"admin:project-custom-attributes:updated\");\n    };\n\n    ProjectCustomAttributesController.prototype.loadCustomAttributes = function() {\n      return this.rs.customAttributes[this.scope.type].list(this.scope.projectId).then((function(_this) {\n        return function(customAttributes) {\n          var ref;\n          _this.scope.customAttributes = customAttributes;\n          _this.scope.maxOrder = (ref = _.maxBy(customAttributes, \"order\")) != null ? ref.order : void 0;\n          _this._parseAttributesExtra();\n          return customAttributes;\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.createCustomAttribute = function(attrValues) {\n      return this.repo.create(\"custom-attributes/\" + this.scope.type, attrValues).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.saveCustomAttribute = function(attrModel) {\n      return this.repo.save(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.deleteCustomAttribute = function(attrModel) {\n      return this.repo.remove(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.moveCustomAttributes = function(attrModel, newIndex) {\n      var customAttributes, r;\n      customAttributes = this.scope.customAttributes;\n      r = customAttributes.indexOf(attrModel);\n      customAttributes.splice(r, 1);\n      customAttributes.splice(newIndex, 0, attrModel);\n      _.each(customAttributes, function(val, idx) {\n        return val.order = idx;\n      });\n      return this.repo.saveAll(customAttributes).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    return ProjectCustomAttributesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController);\n\n  ProjectCustomAttributesDirective = function($log, $confirm, animationFrame, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, _manageExtraFormEvent, _manageFormEvent, addExtraOption, cancelCreate, cancelUpdate, create, deleteCustomAttribute, hideAddButton, hideCancelButton, hideCreateForm, hideEditForm, hideExtra, initAttrType, initDraggable, removeExtraOption, resetNewAttr, revertChangesInCustomAttribute, showAddButton, showCancelButton, showCreateForm, showEditForm, showExtra, update;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.isExtraVisible = {};\n      _manageFormEvent = function(event, callback) {\n        var formEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        return callback(formEl);\n      };\n      initDraggable = function() {\n        var drake, el, i, len, results, sortableChildren, sortableEl;\n        sortableEl = $el.find(\".js-sortable\");\n        drake = dragula([sortableEl[0]], {\n          direction: 'vertical',\n          copySortSource: false,\n          copy: false,\n          mirrorContainer: sortableEl[0],\n          moves: function(item, source, handle) {\n            var childItem;\n            childItem = $(handle).closest('.js-child-sortable');\n            if (childItem[0]) {\n              return false;\n            }\n            return $(item).is('div[tg-bind-scope]');\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemAttr, itemEl, itemIndex;\n          itemEl = $(item);\n          itemAttr = itemEl.scope().attr;\n          itemIndex = itemEl.index();\n          return $ctrl.moveCustomAttributes(itemAttr, itemIndex);\n        });\n        sortableChildren = $el.find(\".js-child-sortable\");\n        results = [];\n        for (i = 0, len = sortableChildren.length; i < len; i++) {\n          el = sortableChildren[i];\n          drake[el] = dragula([el], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el,\n            moves: function(item) {\n              return $(item).is('div[tg-bind-scope]');\n            }\n          });\n          results.push(drake[el].on('dragend', function(item) {\n            var attrExtra, itemEl, sourceIndex, targetIndex, value;\n            itemEl = $(item);\n            attrExtra = itemEl.scope().attr.extra;\n            sourceIndex = itemEl.scope().$index;\n            targetIndex = itemEl.index();\n            value = attrExtra[sourceIndex];\n            attrExtra.splice(sourceIndex, 1);\n            attrExtra.splice(targetIndex, 0, value);\n            itemEl.scope().attr.setAttr('extra', attrExtra);\n            return $ctrl.saveCustomAttribute(itemEl.scope().attr).then(function() {\n              return $confirm.notify(\"success\");\n            });\n          }));\n        }\n        return results;\n      };\n      showCreateForm = function() {\n        $el.find(\".js-new-custom-field\").removeClass(\"hidden\");\n        return $el.find(\".js-new-custom-field input:visible\").first().focus();\n      };\n      hideCreateForm = function() {\n        return $el.find(\".js-new-custom-field\").addClass(\"hidden\");\n      };\n      showAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").addClass(\"hidden\");\n      };\n      showCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\");\n      };\n      resetNewAttr = function() {\n        return $scope.newAttr = {};\n      };\n      create = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideCreateForm();\n          resetNewAttr();\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = $scope.newAttr;\n        attr.project = $scope.projectId;\n        attr.order = $scope.maxOrder ? $scope.maxOrder + 1 : 1;\n        return $ctrl.createCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelCreate = function() {\n        hideCreateForm();\n        return resetNewAttr();\n      };\n      initAttrType = function(formEl) {\n        var attr, ref;\n        attr = formEl.scope().newAttr ? formEl.scope().newAttr : formEl.scope().attr;\n        if (attr.type !== \"dropdown\") {\n          return;\n        }\n        if ((ref = attr.extra) != null ? ref.length : void 0) {\n          return;\n        }\n        attr.extra = [''];\n        if (attr.id) {\n          return showEditForm(formEl);\n        } else {\n          showExtra(-1);\n          return formEl.scope().$apply();\n        }\n      };\n      $scope.$watch(\"customAttributes\", function(customAttributes) {\n        if (!customAttributes) {\n          return;\n        }\n        if (customAttributes.length === 0) {\n          hideCancelButton();\n          hideAddButton();\n          return showCreateForm();\n        } else {\n          hideCreateForm();\n          showAddButton();\n          showCancelButton();\n          return initDraggable();\n        }\n      });\n      $el.on(\"change\", \".custom-field-type select\", function(event) {\n        return _manageFormEvent(event, initAttrType);\n      });\n      $el.on(\"click\", \".js-add-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showCreateForm);\n      });\n      $el.on(\"click\", \".js-create-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, create);\n      }));\n      $el.on(\"click\", \".js-cancel-new-custom-field-button\", function(event) {\n        event.preventDefault();\n        return cancelCreate();\n      });\n      $el.on(\"keyup\", \".js-new-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      showEditForm = function(formEl) {\n        formEl.find(\".js-view-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field input:visible\").first().focus().select();\n        formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\");\n        formEl.find(\".custom-extra-actions\").removeClass(\"hidden\");\n        showExtra(formEl.scope().attr.id);\n        return $scope.$apply();\n      };\n      update = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideEditForm(formEl);\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = formEl.scope().attr;\n        attr.setAttr('extra', attr.extra);\n        return $ctrl.saveCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelUpdate = function(formEl) {\n        hideEditForm(formEl);\n        return revertChangesInCustomAttribute(formEl);\n      };\n      hideEditForm = function(formEl) {\n        formEl.find(\".js-edit-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\");\n        return formEl.find(\".custom-extra-actions\").addClass(\"hidden\");\n      };\n      revertChangesInCustomAttribute = function(formEl) {\n        return $scope.$apply(function() {\n          return formEl.scope().attr.revert();\n        });\n      };\n      $el.on(\"click\", \".js-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showEditForm);\n      });\n      $el.on(\"click\", \".js-update-custom-field-button\", debounce(1000, function(event) {\n        return _manageFormEvent(event, update);\n      }));\n      $el.on(\"click\", \".js-cancel-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, cancelUpdate);\n      });\n      $el.on(\"keyup\", \".js-edit-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      deleteCustomAttribute = function(formEl) {\n        var attr, message, text, title;\n        attr = formEl.scope().attr;\n        message = attr.name;\n        title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\");\n        text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\");\n        return $confirm.askDelete(title, text, message).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadCustomAttributes()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\", null, \"We have not been able to delete '\" + message + \"'.\");\n          };\n          return $ctrl.deleteCustomAttribute(attr).then(onSucces, onError);\n        });\n      };\n      $el.on(\"click\", \".js-delete-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, deleteCustomAttribute);\n      }));\n      $scope.toggleExtraVisible = function(index) {\n        if (!$scope.isExtraVisible[index]) {\n          return showExtra(index);\n        } else {\n          return hideExtra(index);\n        }\n      };\n      showExtra = function(index) {\n        return $scope.isExtraVisible[index] = true;\n      };\n      hideExtra = function(index) {\n        return $scope.isExtraVisible[index] = false;\n      };\n      _manageExtraFormEvent = function(event, callback) {\n        var formEl, formExtraEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        formExtraEl = angular.element(event.currentTarget).closest(\".js-form\");\n        return callback(formEl, formExtraEl);\n      };\n      addExtraOption = function(formEl, formExtraEl) {\n        var attrExtra, formScope, ref;\n        formScope = formEl.scope();\n        attrExtra = ((ref = formScope.newAttr) != null ? ref.extra : void 0) ? formScope.newAttr.extra : formScope.attr.extra;\n        attrExtra.push(\"\");\n        formScope.$apply();\n        formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\");\n        return formEl.find(\".js-edit-custom-field-extra input\").last().focus();\n      };\n      removeExtraOption = function(formEl, formExtraEl) {\n        var attrExtra;\n        attrExtra = formEl.scope().attr.extra;\n        attrExtra.splice(formExtraEl.scope().$index, 1);\n        return formExtraEl.scope().$apply();\n      };\n      $el.on(\"keyup\", \".js-edit-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      $el.on(\"keyup\", \".js-new-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      $el.on(\"click\", \".js-add-option-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, addExtraOption);\n      }));\n      return $el.on(\"click\", \".js-delete-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, removeExtraOption);\n      }));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\", ProjectCustomAttributesDirective]);\n\n  ProjectTagsController = (function(superClass) {\n    extend(ProjectTagsController, superClass);\n\n    ProjectTagsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgModel\", \"tgProjectService\"];\n\n    function ProjectTagsController(scope, rootscope, repo, confirm, rs, model, projectService1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.model = model;\n      this.projectService = projectService1;\n      this.mixingClass = bind(this.mixingClass, this);\n      this.cancelMixingTags = bind(this.cancelMixingTags, this);\n      this.confirmMixingTags = bind(this.confirmMixingTags, this);\n      this.toggleMixingFromTags = bind(this.toggleMixingFromTags, this);\n      this.startMixingTags = bind(this.startMixingTags, this);\n      this.deleteTag = bind(this.deleteTag, this);\n      this.editTag = bind(this.editTag, this);\n      this.createTag = bind(this.createTag, this);\n      this.filterAndSortTags = bind(this.filterAndSortTags, this);\n      this.loadTags = bind(this.loadTags, this);\n      this.loading = true;\n      this.loadTags();\n    }\n\n    ProjectTagsController.prototype.loadTags = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.projects.tagsColors(project.id).then((function(_this) {\n        return function(tags) {\n          _this.scope.projectTagsAll = _.map(tags.getAttrs(), function(color, name) {\n            return _this.model.make_model('tag', {\n              name: name,\n              color: color\n            });\n          });\n          _this.filterAndSortTags();\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.filterAndSortTags = function() {\n      this.scope.projectTags = _.sortBy(this.scope.projectTagsAll, function(it) {\n        return it.name.toLowerCase();\n      });\n      return this.scope.projectTags = _.filter(this.scope.projectTags, (function(_this) {\n        return function(tag) {\n          return tag.name.indexOf(_this.scope.tagsFilter.name) !== -1;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.createTag = function(tag, color) {\n      return this.rs.projects.createTag(this.scope.projectId, tag, color);\n    };\n\n    ProjectTagsController.prototype.editTag = function(from_tag, to_tag, color) {\n      if (from_tag === to_tag) {\n        to_tag = null;\n      }\n      return this.rs.projects.editTag(this.scope.projectId, from_tag, to_tag, color);\n    };\n\n    ProjectTagsController.prototype.deleteTag = function(tag) {\n      this.scope.loadingDelete = true;\n      return this.rs.projects.deleteTag(this.scope.projectId, tag)[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingDelete = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.startMixingTags = function(tag) {\n      return this.scope.mixingTags.toTag = tag.name;\n    };\n\n    ProjectTagsController.prototype.toggleMixingFromTags = function(tag) {\n      var index;\n      if (tag.name !== this.scope.mixingTags.toTag) {\n        index = this.scope.mixingTags.fromTags.indexOf(tag.name);\n        if (index === -1) {\n          return this.scope.mixingTags.fromTags.push(tag.name);\n        } else {\n          return this.scope.mixingTags.fromTags.splice(index, 1);\n        }\n      }\n    };\n\n    ProjectTagsController.prototype.confirmMixingTags = function() {\n      var fromTags, toTag;\n      toTag = this.scope.mixingTags.toTag;\n      fromTags = this.scope.mixingTags.fromTags;\n      this.scope.loadingMixing = true;\n      return this.rs.projects.mixTags(this.scope.projectId, toTag, fromTags).then((function(_this) {\n        return function() {\n          _this.cancelMixingTags();\n          return _this.loadTags();\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingMixing = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.cancelMixingTags = function() {\n      this.scope.mixingTags.toTag = null;\n      return this.scope.mixingTags.fromTags = [];\n    };\n\n    ProjectTagsController.prototype.mixingClass = function(tag) {\n      if (this.scope.mixingTags.toTag !== null) {\n        if (tag.name === this.scope.mixingTags.toTag) {\n          return \"mixing-tags-to\";\n        } else if (this.scope.mixingTags.fromTags.indexOf(tag.name) !== -1) {\n          return \"mixing-tags-from\";\n        }\n      }\n    };\n\n    return ProjectTagsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectTagsController\", ProjectTagsController);\n\n  ProjectTagsDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, $window, cancel, goToBottomList, initializeMixingTags, initializeNewValue, initializeTagsFilter, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $window = $(window);\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"tag\": \"\",\n          \"color\": \"\"\n        };\n      };\n      initializeTagsFilter = function() {\n        return $scope.tagsFilter = {\n          \"name\": \"\"\n        };\n      };\n      initializeMixingTags = function() {\n        return $scope.mixingTags = {\n          \"toTag\": null,\n          \"fromTags\": []\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTagsFilter();\n      initializeMixingTags();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, originalTag, promise, tag;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        tag = formEl.scope().tag;\n        originalTag = tag.clone();\n        originalTag.revert();\n        $scope.loadingEdit = true;\n        promise = $ctrl.editTag(originalTag.name, tag.name, tag.color);\n        promise.then(function() {\n          return $ctrl.loadTags().then(function() {\n            var row;\n            row = target.parents(\".row.table-main\");\n            row.addClass(\"hidden\");\n            $scope.loadingEdit = false;\n            $rootscope.$broadcast('tags:updated');\n            return row.siblings(\".visualization\").removeClass('hidden');\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingEdit = false;\n          return form.setErrors(response.data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        formEl = target;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.loadingCreate = true;\n        promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color);\n        promise.then(function(data) {\n          return $ctrl.loadTags().then(function() {\n            $scope.loadingCreate = false;\n            target.addClass(\"hidden\");\n            $rootscope.$broadcast('tags:updated');\n            return initializeNewValue();\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingCreate = false;\n          return form.setErrors(response.data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, tag;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          tag.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $scope.$watch(\"tagsFilter.name\", function(tagsFilter) {\n        return $ctrl.filterAndSortTags();\n      });\n      $window.on(\"keyup\", function(event) {\n        if (event.keyCode === 27) {\n          return $scope.$apply(function() {\n            return initializeMixingTags();\n          });\n        }\n      });\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        return $el.find(\".new-value\").removeClass('hidden');\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".mix-tags\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.startMixingTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-row\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.toggleMixingFromTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-confirm\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.confirmMixingTags();\n        });\n      });\n      $el.on(\"click\", \".mixing-cancel\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.cancelMixingTags();\n        });\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"keyup\", \".status-name input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === 13) {\n          return saveValue(target);\n        } else if (event.keyCode === 27) {\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      $el.on(\"click\", \".delete-tag\", function(event) {\n        var formEl, tag, target, title;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\");\n        return $confirm.askOnDelete(title, tag.name).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadTags()[\"finally\"](function() {\n              $rootscope.$broadcast('tags:updated');\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $ctrl.deleteTag(tag.name).then(onSucces, onError);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $window.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", ProjectTagsDirective]);\n\n  ProjectSwimlanesWipDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.wipClosed = false;\n      return $scope.toggleWipVisibility = function() {\n        return $scope.wipClosed = !$scope.wipClosed;\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesWip\", ProjectSwimlanesWipDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EditRoleDirective, NewRoleDirective, RolePermissionsDirective, RolesController, RolesDirective, bindMethods, bindOnce, debounce, mixOf, module, publicPermissions, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  publicPermissions = ['view_epics', 'view_milestones', 'view_us', 'view_tasks', 'view_issues', 'view_wiki_pages', 'view_wiki_links'];\n\n  RolesController = (function(superClass) {\n    extend(RolesController, superClass);\n\n    RolesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgModel\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function RolesController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, model, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.model = model;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this._disableComputable = bind(this._disableComputable, this);\n      this._enableComputable = bind(this._enableComputable, this);\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.MENU.PERMISSIONS\";\n      this.scope.project = {};\n      this.scope.anyComputableRole = true;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    RolesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.anyComputableRole = _.some(_.map(project.roles, function(point) {\n        return point.computable;\n      }));\n      return project;\n    };\n\n    RolesController.prototype.loadRoles = function() {\n      return this.rs.roles.list(this.scope.projectId).then((function(_this) {\n        return function(roles) {\n          var public_permission;\n          roles = roles.map(function(role) {\n            role.external_user = false;\n            return role;\n          });\n          public_permission = {\n            \"name\": _this.translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\n            \"permissions\": _this.scope.project.public_permissions,\n            \"external_user\": true\n          };\n          roles.push(public_permission);\n          _this.scope.roles = roles;\n          _this.scope.role = _this.scope.roles[0];\n          if (!_this.scope.project.is_private) {\n            publicPermissions.forEach(function(permission) {\n              if (!_this.scope.role.permissions.includes(permission)) {\n                return _this.scope.role.permissions.push(permission);\n              }\n            });\n          }\n          return roles;\n        };\n      })(this));\n    };\n\n    RolesController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadRoles();\n    };\n\n    RolesController.prototype.forceLoadProject = function() {\n      return this.rootscope.$broadcast(\"admin:project-roles:updated\");\n    };\n\n    RolesController.prototype.setRole = function(role) {\n      this.scope.role = role;\n      return this.scope.$broadcast(\"role:changed\", this.scope.role);\n    };\n\n    RolesController.prototype[\"delete\"] = function() {\n      var choices, i, len, ref, replacement, role, subtitle, title, warning;\n      choices = {};\n      ref = this.scope.roles;\n      for (i = 0, len = ref.length; i < len; i++) {\n        role = ref[i];\n        if (role.id !== this.scope.role.id) {\n          choices[role.id] = role.name;\n        }\n      }\n      if (_.keys(choices).length === 0) {\n        return this.confirm.error(this.translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"));\n      }\n      title = this.translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\");\n      subtitle = this.scope.role.name;\n      replacement = this.translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\");\n      warning = this.translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\");\n      return this.confirm.askChoice(title, subtitle, choices, replacement, warning).then((function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            _this.forceLoadProject();\n            return _this.loadRoles()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return _this.confirm.notify('error');\n          };\n          return _this.repo.remove(_this.scope.role, {\n            moveTo: response.selected\n          }).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    RolesController.prototype._enableComputable = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"success\");\n          return _this.forceLoadProject();\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.scope.role.revert();\n        };\n      })(this);\n      return this.repo.save(this.scope.role).then(onSuccess, onError);\n    };\n\n    RolesController.prototype._disableComputable = function() {\n      var askOnError, askOnSuccess, subtitle, title;\n      askOnSuccess = (function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            response.finish();\n            _this.confirm.notify(\"success\");\n            return _this.forceLoadProject();\n          };\n          onError = function() {\n            response.finish();\n            _this.confirm.notify(\"error\");\n            return _this.scope.role.revert();\n          };\n          return _this.repo.save(_this.scope.role).then(onSuccess, onError);\n        };\n      })(this);\n      askOnError = (function(_this) {\n        return function(response) {\n          return _this.scope.role.revert();\n        };\n      })(this);\n      title = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\");\n      subtitle = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\n        roleName: this.scope.role.name\n      });\n      return this.confirm.ask(title, subtitle, \"\").then(askOnSuccess, askOnError);\n    };\n\n    RolesController.prototype.toggleComputable = debounce(2000, function() {\n      if (!this.scope.role.computable) {\n        return this._disableComputable();\n      } else {\n        return this._enableComputable();\n      }\n    });\n\n    return RolesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"RolesController\", RolesController);\n\n  EditRoleDirective = function($repo, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, toggleView;\n      toggleView = function() {\n        $el.find('.total').toggle();\n        return $el.find('.edit-role').toggle();\n      };\n      submit = function() {\n        var promise;\n        $scope.role.name = $el.find(\"input\").val();\n        promise = $repo.save($scope.role);\n        promise.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        promise.then(null, function(data) {\n          return $confirm.notify(\"error\");\n        });\n        return toggleView();\n      };\n      $el.on(\"click\", \".edit-value\", function() {\n        toggleView();\n        $el.find(\"input\").focus();\n        return $el.find(\"input\").val($scope.role.name);\n      });\n      $el.on(\"click\", \"a.save\", submit);\n      $el.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return submit();\n        } else if (event.keyCode === 27) {\n          return toggleView();\n        }\n      });\n      $scope.$on(\"role:changed\", function() {\n        if ($el.find('.edit-role').is(\":visible\")) {\n          return toggleView();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective]);\n\n  RolesDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRoles\", RolesDirective);\n\n  NewRoleDirective = function($tgrepo, $confirm) {\n    var DEFAULT_PERMISSIONS, link;\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"];\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $el.on(\"click\", \"button.add-button\", function(event) {\n        event.preventDefault();\n        $el.find(\".new\").removeClass(\"hidden\");\n        $el.find(\".new\").focus();\n        return $el.find(\".add-button\").hide();\n      });\n      return $el.on(\"keyup\", \".new\", function(event) {\n        var newRole, onError, onSuccess, target;\n        event.preventDefault();\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          newRole = {\n            project: $scope.projectId,\n            name: target.val(),\n            permissions: DEFAULT_PERMISSIONS,\n            order: _.maxBy($scope.roles, function(r) {\n              return r.order;\n            }).order + 1,\n            computable: false\n          };\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          onSuccess = function(role) {\n            var insertPosition;\n            insertPosition = $scope.roles.length - 1;\n            $scope.roles.splice(insertPosition, 0, role);\n            $ctrl.setRole(role);\n            $el.find(\".add-button\").show();\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $tgrepo.create(\"roles\", newRole).then(onSuccess, onError);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          return $el.find(\".add-button\").show();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective]);\n\n  RolePermissionsDirective = function($rootscope, $repo, $confirm, $compile) {\n    var baseTemplate, categoryTemplate, link, resumeTemplate;\n    resumeTemplate = _.template(\"<div class=\\\"resume-title\\\" translate=\\\"<%- category.name %>\\\"></div>\\n<div class=\\\"summary-role\\\">\\n    <div class=\\\"count\\\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\\n    <% _.each(category.permissions, function(permission) { %>\\n        <div class=\\\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\\\"\\n             title=\\\"{{ '<%- permission.name %>' | translate }}\\\"></div>\\n    <% }) %>\\n</div>\\n<tg-svg svg-icon=\\\"icon-arrow-right\\\"></tg-svg>\");\n    categoryTemplate = _.template(\"<div class=\\\"category-config\\\" data-id=\\\"<%- index %>\\\">\\n    <div class=\\\"resume\\\">\\n    </div>\\n    <div class=\\\"category-items\\\">\\n        <div class=\\\"items-container\\\">\\n        <% _.each(category.permissions, function(permission) { %>\\n            <div class=\\\"category-item\\\" data-id=\\\"<%- permission.key %>\\\">\\n                <span translate=\\\"<%- permission.name %>\\\"></span>\\n                <div class=\\\"check\\\">\\n                    <input type=\\\"checkbox\\\"\\n                           <% if(!permission.editable) { %> disabled=\\\"disabled\\\" <% } %>\\n                           <% if(permission.active) { %> checked=\\\"checked\\\" <% } %>/>\\n                    <div></div>\\n                    <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n                    <span class=\\\"check-text check-no\\\" translate=\\\"COMMON.NO\\\"></span>\\n                </div>\\n            </div>\\n        <% }) %>\\n        </div>\\n    </div>\\n</div>\");\n    baseTemplate = _.template(\"<div class=\\\"category-config-list\\\"></div>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, generateCategoriesFromRole, renderCategory, renderPermissions, renderResume;\n      $ctrl = $el.controller();\n      generateCategoriesFromRole = function(role) {\n        var categories, epicPermissions, isPermissionEditable, issuePermissions, milestonePermissions, setActivePermissions, setActivePermissionsPerCategory, taskPermissions, userStoryPermissions, wikiPermissions;\n        setActivePermissions = function(permissions) {\n          return _.map(permissions, function(x) {\n            var ref;\n            return _.extend({}, x, {\n              active: (ref = x[\"key\"], indexOf.call(role.permissions, ref) >= 0)\n            });\n          });\n        };\n        isPermissionEditable = function(permission, role, project) {\n          if (role.external_user && !project.is_private && permission.key.indexOf(\"view_\") === 0) {\n            return false;\n          } else {\n            return true;\n          }\n        };\n        setActivePermissionsPerCategory = function(category) {\n          return _.map(category, function(cat) {\n            cat.permissions = cat.permissions.map(function(permission) {\n              permission.editable = isPermissionEditable(permission, role, $scope.project);\n              return permission;\n            });\n            return _.extend({}, cat, {\n              activePermissions: _.filter(cat[\"permissions\"], \"active\").length\n            });\n          });\n        };\n        categories = [];\n        epicPermissions = [\n          {\n            key: \"view_epics\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"\n          }, {\n            key: \"add_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"\n          }, {\n            key: \"modify_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"\n          }, {\n            key: \"comment_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"\n          }, {\n            key: \"delete_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\",\n          permissions: setActivePermissions(epicPermissions)\n        });\n        milestonePermissions = [\n          {\n            key: \"view_milestones\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"\n          }, {\n            key: \"add_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"\n          }, {\n            key: \"modify_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"\n          }, {\n            key: \"delete_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\n          permissions: setActivePermissions(milestonePermissions)\n        });\n        userStoryPermissions = [\n          {\n            key: \"view_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"\n          }, {\n            key: \"add_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"\n          }, {\n            key: \"modify_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"\n          }, {\n            key: \"comment_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"\n          }, {\n            key: \"delete_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\n          permissions: setActivePermissions(userStoryPermissions)\n        });\n        taskPermissions = [\n          {\n            key: \"view_tasks\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"\n          }, {\n            key: \"add_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"\n          }, {\n            key: \"modify_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"\n          }, {\n            key: \"comment_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"\n          }, {\n            key: \"delete_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\",\n          permissions: setActivePermissions(taskPermissions)\n        });\n        issuePermissions = [\n          {\n            key: \"view_issues\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"\n          }, {\n            key: \"add_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"\n          }, {\n            key: \"modify_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"\n          }, {\n            key: \"comment_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"\n          }, {\n            key: \"delete_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\n          permissions: setActivePermissions(issuePermissions)\n        });\n        wikiPermissions = [\n          {\n            key: \"view_wiki_pages\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"\n          }, {\n            key: \"modify_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"\n          }, {\n            key: \"delete_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"\n          }, {\n            key: \"delete_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"\n          }, {\n            key: \"view_wiki_links\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\n          permissions: setActivePermissions(wikiPermissions)\n        });\n        return setActivePermissionsPerCategory(categories);\n      };\n      renderResume = function(element, category) {\n        return element.find(\".resume\").html($compile(resumeTemplate({\n          category: category\n        }))($scope));\n      };\n      renderCategory = function(category, index) {\n        var html;\n        html = categoryTemplate({\n          category: category,\n          index: index\n        });\n        html = angular.element(html);\n        renderResume(html, category);\n        return $compile(html)($scope);\n      };\n      renderPermissions = function() {\n        var html;\n        $el.off();\n        html = baseTemplate();\n        _.each(generateCategoriesFromRole($scope.role), function(category, index) {\n          if (!$scope.project.is_private) {\n            category.permissions.forEach((function(_this) {\n              return function(permission) {\n                if (publicPermissions.includes(permission.key)) {\n                  return permission.editable = false;\n                }\n              };\n            })(this));\n          }\n          return html = angular.element(html).append(renderCategory(category, index));\n        });\n        $el.html(html);\n        $el.on(\"click\", \".resume\", function(event) {\n          var target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          target.toggleClass(\"open-drawer\");\n          return target.next().toggleClass(\"open\");\n        });\n        return $el.on(\"change\", \".category-item input\", function(event) {\n          var getActivePermissions, onError, onSuccess, target;\n          getActivePermissions = function() {\n            var activePermissions;\n            activePermissions = _.filter($el.find(\".category-item input\"), function(t) {\n              return angular.element(t).is(\":checked\");\n            });\n            activePermissions = _.sortBy(_.map(activePermissions, function(t) {\n              var permission;\n              return permission = angular.element(t).parents(\".category-item\").data(\"id\");\n            }));\n            if (activePermissions.length) {\n              activePermissions.push(\"view_project\");\n            }\n            return activePermissions;\n          };\n          target = angular.element(event.currentTarget);\n          $scope.role.permissions = getActivePermissions();\n          onSuccess = function() {\n            var categories, categoryId;\n            categories = generateCategoriesFromRole($scope.role);\n            categoryId = target.parents(\".category-config\").data(\"id\");\n            renderResume(target.parents(\".category-config\"), categories[categoryId]);\n            $rootscope.$broadcast(\"projects:reload\");\n            $confirm.notify(\"success\");\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            target.prop(\"checked\", !target.prop(\"checked\"));\n            return $scope.role.permissions = getActivePermissions();\n          };\n          if ($scope.role.external_user) {\n            $scope.project.public_permissions = $scope.role.permissions;\n            $scope.project.anon_permissions = $scope.role.permissions.filter(function(permission) {\n              return permission.indexOf(\"view_\") === 0;\n            });\n            return $repo.save($scope.project).then(onSuccess, onError);\n          } else {\n            return $repo.save($scope.role).then(onSuccess, onError);\n          }\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.$on(\"role:changed\", function() {\n        return renderPermissions();\n      });\n      return bindOnce($scope, $attrs.ngModel, renderPermissions);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\", RolePermissionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BitbucketController, BitbucketWebhooksDirective, GithubController, GithubWebhooksDirective, GitlabController, GitlabWebhooksDirective, GogsController, GogsWebhooksDirective, NewWebhookDirective, SelectInputText, ValidOriginIpsDirective, WebhookDirective, WebhooksController, bindMethods, debounce, mixOf, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounce = this.taiga.debounce;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaAdmin\");\n\n  WebhooksController = (function(superClass) {\n    extend(WebhooksController, superClass);\n\n    WebhooksController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WebhooksController(scope, repo, rs, params, location, navUrls, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\";\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"webhooks:reload\", this.loadWebhooks);\n    }\n\n    WebhooksController.prototype.loadWebhooks = function() {\n      return this.rs.webhooks.list(this.scope.projectId).then((function(_this) {\n        return function(webhooks) {\n          return _this.scope.webhooks = webhooks;\n        };\n      })(this));\n    };\n\n    WebhooksController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WebhooksController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadWebhooks();\n    };\n\n    return WebhooksController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"WebhooksController\", WebhooksController);\n\n  WebhookDirective = function($rs, $repo, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var cancel, openHistory, save, showEditMode, showVisualizationMode, updateLogs, updateShowHideHistoryText, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      updateLogs = function() {\n        var prettyDate;\n        prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\");\n        return $rs.webhooklogs.list(webhook.id).then((function(_this) {\n          return function(webhooklogs) {\n            var i, len, log, ref;\n            for (i = 0, len = webhooklogs.length; i < len; i++) {\n              log = webhooklogs[i];\n              log.validStatus = (200 <= (ref = log.status) && ref < 300);\n              log.prettySentHeaders = _.map(_.toPairs(log.request_headers), function(arg) {\n                var header, value;\n                header = arg[0], value = arg[1];\n                return header + \": \" + value;\n              }).join(\"\\n\");\n              log.prettySentData = JSON.stringify(log.request_data);\n              log.prettyDate = moment(log.created).format(prettyDate);\n            }\n            webhook.logs_counter = webhooklogs.length;\n            webhook.logs = webhooklogs;\n            return updateShowHideHistoryText();\n          };\n        })(this));\n      };\n      updateShowHideHistoryText = function() {\n        var historyElement, text, textElement, title;\n        textElement = $el.find(\".toggle-history\");\n        historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\");\n        if (historyElement.hasClass(\"open\")) {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\");\n        } else {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\");\n        }\n        textElement.text(text);\n        return textElement.prop(\"title\", title);\n      };\n      showVisualizationMode = function() {\n        $el.find(\".edition-mode\").addClass(\"hidden\");\n        return $el.find(\".visualization-mode\").removeClass(\"hidden\");\n      };\n      showEditMode = function() {\n        $el.find(\".visualization-mode\").addClass(\"hidden\");\n        return $el.find(\".edition-mode\").removeClass(\"hidden\");\n      };\n      openHistory = function() {\n        return $el.find(\".webhooks-history\").addClass(\"open\");\n      };\n      cancel = function() {\n        showVisualizationMode();\n        return $scope.$apply(function() {\n          return webhook.revert();\n        });\n      };\n      save = debounce(2000, function(target) {\n        var form, promise;\n        form = target.parents(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        promise = $repo.save(webhook);\n        promise.then((function(_this) {\n          return function() {\n            return showVisualizationMode();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      $el.on(\"click\", \".test-webhook\", function() {\n        openHistory();\n        return $rs.webhooks.test(webhook.id).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".edit-webhook\", function() {\n        return showEditMode();\n      });\n      $el.on(\"click\", \".cancel-existing\", function() {\n        return cancel();\n      });\n      $el.on(\"click\", \".edit-existing\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return save(target);\n      });\n      $el.on(\"keyup\", \".edition-mode input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          return save(target);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".delete-webhook\", function() {\n        var message, title;\n        title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\");\n        message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {\n          name: webhook.name\n        });\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSucces;\n            onSucces = function() {\n              askResponse.finish();\n              return $scope.$emit(\"webhooks:reload\");\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove(webhook).then(onSucces, onError);\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".toggle-history\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if ((webhook.logs == null) || webhook.logs.length === 0) {\n          return updateLogs().then(function() {\n            return timeout(0, function() {\n              $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n              return updateShowHideHistoryText();\n            });\n          });\n        } else {\n          $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n          return $scope.$apply(function() {\n            return updateShowHideHistoryText();\n          });\n        }\n      });\n      $el.on(\"click\", \".history-single\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        target.toggleClass(\"history-single-open\");\n        return target.siblings(\".history-single-response\").toggleClass(\"open\");\n      });\n      return $el.on(\"click\", \".resend-request\", function(event) {\n        var log, target;\n        target = angular.element(event.currentTarget);\n        log = target.data(\"log\");\n        return $rs.webhooklogs.resend(log).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", WebhookDirective]);\n\n  NewWebhookDirective = function($rs, $repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addWebhookDOMNode, formDOMNode, initializeNewValue, save, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      formDOMNode = $el.find(\".new-webhook-form\");\n      addWebhookDOMNode = $el.find(\".add-webhook\");\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"url\": \"\",\n          \"key\": \"\"\n        };\n      };\n      initializeNewValue();\n      $scope.$watch(\"webhooks\", function(webhooks) {\n        if (webhooks != null) {\n          if (webhooks.length === 0) {\n            formDOMNode.removeClass(\"hidden\");\n            addWebhookDOMNode.addClass(\"hidden\");\n            return formDOMNode.find(\"input\")[0].focus();\n          } else {\n            formDOMNode.addClass(\"hidden\");\n            return addWebhookDOMNode.removeClass(\"hidden\");\n          }\n        }\n      });\n      save = debounce(2000, function() {\n        var form, promise;\n        form = formDOMNode.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        promise = $repo.create(\"webhooks\", $scope.newValue);\n        promise.then((function(_this) {\n          return function() {\n            $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1);\n            $scope.$emit(\"webhooks:reload\");\n            return initializeNewValue();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      formDOMNode.on(\"click\", \".add-new\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      formDOMNode.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return save();\n        }\n      });\n      formDOMNode.on(\"click\", \".cancel-new\", function(event) {\n        return $scope.$apply(function() {\n          initializeNewValue();\n          if ($scope.webhooks.length >= 1) {\n            return formDOMNode.addClass(\"hidden\");\n          }\n        });\n      });\n      return addWebhookDOMNode.on(\"click\", function(event) {\n        formDOMNode.removeClass(\"hidden\");\n        return formDOMNode.find(\"input\")[0].focus();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective]);\n\n  GithubController = (function(superClass) {\n    extend(GithubController, superClass);\n\n    GithubController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GithubController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITHUB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GithubController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"github\").then((function(_this) {\n        return function(github) {\n          return _this.scope.github = github;\n        };\n      })(this));\n    };\n\n    GithubController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GithubController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return this.loadModules();\n    };\n\n    return GithubController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GithubController\", GithubController);\n\n  GitlabController = (function(superClass) {\n    extend(GitlabController, superClass);\n\n    GitlabController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GitlabController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITLAB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    GitlabController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gitlab\").then((function(_this) {\n        return function(gitlab) {\n          return _this.scope.gitlab = gitlab;\n        };\n      })(this));\n    };\n\n    GitlabController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GitlabController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GitlabController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GitlabController\", GitlabController);\n\n  BitbucketController = (function(superClass) {\n    extend(BitbucketController, superClass);\n\n    BitbucketController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function BitbucketController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    BitbucketController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"bitbucket\").then((function(_this) {\n        return function(bitbucket) {\n          return _this.scope.bitbucket = bitbucket;\n        };\n      })(this));\n    };\n\n    BitbucketController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    BitbucketController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return BitbucketController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"BitbucketController\", BitbucketController);\n\n  SelectInputText = function($translate, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.on(\"click\", \".select-input-content\", function() {\n        var source;\n        source = $el.find(\"input\");\n        if (!source.val()) {\n          return;\n        }\n        source.select();\n        document.execCommand('copy');\n        return $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText]);\n\n  GithubWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.github, \"github\");\n          promise.then(function() {\n            $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1);\n            currentLoading.finish();\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective]);\n\n  GitlabWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gitlab, \"gitlab\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective]);\n\n  BitbucketWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\");\n          promise.then(function() {\n            $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective]);\n\n  ValidOriginIpsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ngModel) {\n      return $ngModel.$parsers.push(function(value) {\n        value = $.trim(value);\n        if (value === \"\") {\n          return [];\n        }\n        return value.split(\",\");\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgValidOriginIps\", ValidOriginIpsDirective);\n\n  GogsController = (function(superClass) {\n    extend(GogsController, superClass);\n\n    GogsController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GogsController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GOGS.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GogsController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gogs\").then((function(_this) {\n        return function(gogs) {\n          return _this.scope.gogs = gogs;\n        };\n      })(this));\n    };\n\n    GogsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GogsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GogsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  GogsWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gogs, \"gogs\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $el.on(\"click\", \".submit-button\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.controller(\"GogsController\", GogsController);\n\n  module.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteProjectDirective, bindOnce, debounce, module, taiga, timeout;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaProject\");\n\n  DeleteProjectDirective = function($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var projectToDelete, submit;\n      projectToDelete = null;\n      $scope.$on(\"deletelightbox:new\", function(ctx, project) {\n        lightboxService.open($el);\n        return projectToDelete = project;\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var promise;\n        tgLoader.start();\n        lightboxService.close($el);\n        promise = $repo.remove(projectToDelete);\n        promise.then(function(data) {\n          $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1);\n          tgLoader.pageLoaded();\n          $rootscope.$broadcast(\"projects:reload\");\n          $location.path($navUrls.resolve(\"home\"));\n          $confirm.notify(\"success\");\n          return currentUserService.loadProjects();\n        });\n        return promise.then(null, function() {\n          $confirm.notify(\"error\");\n          return lightboxService.close($el);\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      return $el.on(\"click\", \".js-confirm\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\", \"$tgAnalytics\", DeleteProjectDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindHtmlDirective, BindOnceAltDirective, BindOnceBindDirective, BindOnceHrefDirective, BindOnceHtmlDirective, BindOnceRefDirective, BindOnceSrcDirective, BindOnceTitleDirective, BindTitleDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  BindOnceBindDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoBind, function(val) {\n        return $el.text(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHtml, function(val) {\n        return $el.html(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceRefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoRef, function(val) {\n        return $el.html(\"#\" + val + \" \");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceSrcDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoSrc, function(val) {\n        return $el.attr(\"src\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHrefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHref, function(val) {\n        return $el.attr(\"href\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceAltDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoAlt, function(val) {\n        return $el.attr(\"alt\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoTitle, function(val) {\n        return $el.attr(\"title\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgTitleHtml, function(val) {\n        if (val != null) {\n          return $el.attr(\"title\", val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgBindHtml, function(val) {\n        if (val != null) {\n          return $el.html(val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.directive(\"tgBoBind\", BindOnceBindDirective);\n\n  module.directive(\"tgBoHtml\", BindOnceHtmlDirective);\n\n  module.directive(\"tgBoRef\", BindOnceRefDirective);\n\n  module.directive(\"tgBoSrc\", BindOnceSrcDirective);\n\n  module.directive(\"tgBoHref\", BindOnceHrefDirective);\n\n  module.directive(\"tgBoAlt\", BindOnceAltDirective);\n\n  module.directive(\"tgBoTitle\", BindOnceTitleDirective);\n\n  module.directive(\"tgBindTitle\", BindTitleDirective);\n\n  module.directive(\"tgBindHtml\", BindHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfigurationService, module;\n\n  ConfigurationService = (function() {\n    function ConfigurationService() {\n      this.config = window.taigaConfig;\n    }\n\n    ConfigurationService.prototype.get = function(key, defaultValue) {\n      if (defaultValue == null) {\n        defaultValue = null;\n      }\n      if (_.has(this.config, key)) {\n        return this.config[key];\n      }\n      return defaultValue;\n    };\n\n    return ConfigurationService;\n\n  })();\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgConfig\", ConfigurationService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContribController, ContribUserSettingsController, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaBase\");\n\n  ContribController = (function(superClass) {\n    extend(ContribController, superClass);\n\n    ContribController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function ContribController(rootScope, scope, params, repo, rs, confirm, projectService, errorHandlingService) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.adminPlugins, {\n        \"slug\": this.params.plugin\n      }));\n      this.scope.projectSlug = this.params.pslug;\n      this.loadInitialData();\n    }\n\n    ContribController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.$broadcast('project:loaded', project);\n      return project;\n    };\n\n    ContribController.prototype.loadInitialData = function() {\n      return this.loadProject();\n    };\n\n    return ContribController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribController\", ContribController);\n\n  ContribUserSettingsController = (function(superClass) {\n    extend(ContribUserSettingsController, superClass);\n\n    ContribUserSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\"];\n\n    function ContribUserSettingsController(rootScope, scope, params) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.userSettingsPlugins, {\n        \"slug\": this.params.plugin\n      }));\n    }\n\n    return ContribUserSettingsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribUserSettingsController\", ContribUserSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersStorageService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  FiltersStorageService = (function(superClass) {\n    extend(FiltersStorageService, superClass);\n\n    FiltersStorageService.$inject = [\"$tgStorage\", \"$routeParams\"];\n\n    function FiltersStorageService(storage, params) {\n      this.storage = storage;\n      this.params = params;\n    }\n\n    FiltersStorageService.prototype.generateHash = function(components) {\n      if (components == null) {\n        components = [];\n      }\n      components = _.map(components, function(x) {\n        return JSON.stringify(x);\n      });\n      return hex_sha1(components.join(\":\"));\n    };\n\n    return FiltersStorageService;\n\n  })(taiga.Service);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HttpService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  HttpService = (function(superClass) {\n    extend(HttpService, superClass);\n\n    HttpService.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"];\n\n    function HttpService(http, q, tgLoader, storage, rootScope, cacheFactory, translate) {\n      this.http = http;\n      this.q = q;\n      this.tgLoader = tgLoader;\n      this.storage = storage;\n      this.rootScope = rootScope;\n      this.cacheFactory = cacheFactory;\n      this.translate = translate;\n      HttpService.__super__.constructor.call(this);\n      this.cache = this.cacheFactory(\"httpget\");\n    }\n\n    HttpService.prototype.headers = function() {\n      var headers, lang, token;\n      headers = {};\n      token = this.storage.get('token');\n      if (token) {\n        headers[\"Authorization\"] = \"Bearer \" + token;\n      }\n      lang = this.translate.preferredLanguage();\n      if (lang) {\n        headers[\"Accept-Language\"] = lang;\n      }\n      return headers;\n    };\n\n    HttpService.prototype.request = function(options) {\n      options.headers = _.assign({}, options.headers || {}, this.headers());\n      return this.http(options);\n    };\n\n    HttpService.prototype.get = function(url, params, options) {\n      options = _.assign({\n        method: \"GET\",\n        url: url\n      }, options);\n      if (params) {\n        options.params = params;\n      }\n      options.cache = this.cache;\n      return this.request(options)[\"finally\"]((function(_this) {\n        return function(data) {\n          return _this.cache.removeAll();\n        };\n      })(this));\n    };\n\n    HttpService.prototype.post = function(url, data, params, options) {\n      options = _.assign({\n        method: \"POST\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      options.responseType = 'text';\n      return this.request(options);\n    };\n\n    HttpService.prototype.put = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PUT\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype.patch = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PATCH\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype[\"delete\"] = function(url, data, params, options) {\n      options = _.assign({\n        method: \"DELETE\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    return HttpService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgHttp\", HttpService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadElementDirective, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBase\");\n\n  LoadElementDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch($parse($attrs.tgLoadElement), function(val) {\n        var el, legacyObj;\n        if (val) {\n          legacyObj = $parse($attrs.tgLoadElement)($scope);\n          el = $el[0];\n          el.component = legacyObj.component;\n          if (legacyObj.params) {\n            el.params = legacyObj.params;\n          }\n          if (legacyObj.events) {\n            return el.events = legacyObj.events;\n          }\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return unwatch();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoadElement\", ['$parse', LoadElementDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var locationFactory, module;\n\n  locationFactory = function($location, $route, $rootscope) {\n    $location.noreload = function(scope) {\n      var lastRoute, un;\n      lastRoute = $route.current;\n      un = scope.$on(\"$locationChangeSuccess\", function() {\n        $route.current = lastRoute;\n        return un();\n      });\n      return $location;\n    };\n    $location.isInCurrentRouteParams = function(name, value) {\n      var params;\n      params = $location.search() || {};\n      return params[name] === value;\n    };\n    return $location;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Model, ModelService, module, provider, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  Model = (function() {\n    function Model(name, data, dataTypes) {\n      this._attrs = data;\n      this._name = name;\n      this._dataTypes = dataTypes;\n      this.setAttrs(data);\n      this.initialize();\n    }\n\n    Model.prototype.realClone = function() {\n      var attrs, instance;\n      attrs = _.cloneDeep(this._attrs);\n      instance = new Model(this._name, attrs, this._dataTypes);\n      instance._modifiedAttrs = _.cloneDeep(this._modifiedAttrs);\n      instance._isModified = _.cloneDeep(this._isModified);\n      return instance;\n    };\n\n    Model.prototype.clone = function() {\n      var instance;\n      instance = new Model(this._name, this._attrs, this._dataTypes);\n      instance._modifiedAttrs = this._modifiedAttrs;\n      instance._isModified = this._isModified;\n      return instance;\n    };\n\n    Model.prototype.applyCasts = function() {\n      var attrName, castMethod, castName, ref, results;\n      ref = this._dataTypes;\n      results = [];\n      for (attrName in ref) {\n        castName = ref[attrName];\n        castMethod = service.casts[castName];\n        if (!castMethod) {\n          continue;\n        }\n        results.push(this._attrs[attrName] = castMethod(this._attrs[attrName]));\n      }\n      return results;\n    };\n\n    Model.prototype.getIdAttrName = function() {\n      return \"id\";\n    };\n\n    Model.prototype.getName = function() {\n      return this._name;\n    };\n\n    Model.prototype.getAttrs = function(patch) {\n      if (patch == null) {\n        patch = false;\n      }\n      if (this._attrs.version != null) {\n        this._modifiedAttrs.version = this._attrs.version;\n      }\n      if (patch) {\n        return _.extend({}, this._modifiedAttrs);\n      }\n      return _.extend({}, this._attrs, this._modifiedAttrs);\n    };\n\n    Model.prototype.setAttrs = function(attrs) {\n      this._attrs = attrs;\n      this._modifiedAttrs = {};\n      this.applyCasts();\n      return this._isModified = false;\n    };\n\n    Model.prototype.setAttr = function(name, value) {\n      this._modifiedAttrs[name] = value;\n      return this._isModified = true;\n    };\n\n    Model.prototype.initialize = function() {\n      var getter, self, setter;\n      self = this;\n      getter = function(name) {\n        return function() {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            return self[name];\n          }\n          if (indexOf.call(_.keys(self._modifiedAttrs), name) < 0) {\n            return self._attrs[name];\n          }\n          return self._modifiedAttrs[name];\n        };\n      };\n      setter = function(name) {\n        return function(value) {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            self[name] = value;\n            return;\n          }\n          if (self._attrs[name] !== value) {\n            self._modifiedAttrs[name] = value;\n            self._isModified = true;\n          } else {\n            delete self._modifiedAttrs[name];\n          }\n        };\n      };\n      return _.each(this._attrs, function(value, name) {\n        var options;\n        options = {\n          get: getter(name),\n          set: setter(name),\n          enumerable: true,\n          configurable: true\n        };\n        return Object.defineProperty(self, name, options);\n      });\n    };\n\n    Model.prototype.serialize = function() {\n      var data;\n      data = {\n        \"data\": _.clone(this._attrs),\n        \"name\": this._name\n      };\n      return JSON.stringify(data);\n    };\n\n    Model.prototype.isModified = function() {\n      return this._isModified;\n    };\n\n    Model.prototype.isAttributeModified = function(attribute) {\n      return this._modifiedAttrs[attribute] != null;\n    };\n\n    Model.prototype.markSaved = function() {\n      this._isModified = false;\n      this._attrs = this.getAttrs();\n      return this._modifiedAttrs = {};\n    };\n\n    Model.prototype.revert = function() {\n      this._modifiedAttrs = {};\n      return this._isModified = false;\n    };\n\n    Model.desSerialize = function(sdata) {\n      var ddata, model;\n      ddata = JSON.parse(sdata);\n      model = new Model(ddata.url, ddata.data);\n      return model;\n    };\n\n    return Model;\n\n  })();\n\n  taiga = this.taiga;\n\n  ModelService = (function(superClass) {\n    extend(ModelService, superClass);\n\n    ModelService.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"];\n\n    function ModelService(q, urls, storage, http) {\n      this.q = q;\n      this.urls = urls;\n      this.storage = storage;\n      this.http = http;\n      ModelService.__super__.constructor.call(this);\n    }\n\n    return ModelService;\n\n  })(taiga.Service);\n\n  provider = function($q, $http, $gmUrls, $gmStorage) {\n    var service;\n    service = {};\n    service.make_model = function(name, data, cls, dataTypes) {\n      if (cls == null) {\n        cls = Model;\n      }\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      return new cls(name, data, dataTypes);\n    };\n    service.cls = Model;\n    service.casts = {\n      int: function(value) {\n        return parseInt(value, 10);\n      },\n      float: function(value) {\n        return parseFloat(value, 10);\n      }\n    };\n    return service;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationUrlsDirective, NavigationUrlsService, bindOnce, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\");\n\n  NavigationUrlsService = (function(superClass) {\n    extend(NavigationUrlsService, superClass);\n\n    function NavigationUrlsService() {\n      this.urls = {};\n    }\n\n    NavigationUrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge({}, this.urls, urls || {});\n    };\n\n    NavigationUrlsService.prototype.formatUrl = function(url, ctx) {\n      var replacer;\n      if (ctx == null) {\n        ctx = {};\n      }\n      replacer = function(match) {\n        match = trim(match, \":\");\n        return ctx[match] || \"undefined\";\n      };\n      return url.replace(/(:\\w+)/g, replacer);\n    };\n\n    NavigationUrlsService.prototype.resolve = function(name, ctx) {\n      var url;\n      url = this.urls[name];\n      if (!url) {\n        return \"\";\n      }\n      if (ctx) {\n        return this.formatUrl(url, ctx);\n      }\n      return url;\n    };\n\n    return NavigationUrlsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgNavUrls\", NavigationUrlsService);\n\n  NavigationUrlsDirective = function($navurls, $auth, $q, $location, lightboxService, tgSections) {\n    var bindOnceP, link, parseNav;\n    bindOnceP = function($scope, attr) {\n      var defered;\n      defered = $q.defer();\n      bindOnce($scope, attr, function(v) {\n        return defered.resolve(v);\n      });\n      return defered.promise;\n    };\n    parseNav = function(data, $scope) {\n      var index, name, obj, params, promises, ref, result, values;\n      ref = _.map(data.split(\":\"), trim), name = ref[0], params = ref[1];\n      if (params) {\n        result = params.split(/(\\w+)=/);\n        result = _.filter(result, function(str) {\n          return str.length;\n        });\n        result = _.map(result, function(str) {\n          return trim(str.replace(/,$/g, ''));\n        });\n        params = [];\n        index = 0;\n        while (index < result.length) {\n          obj = {};\n          obj[result[index]] = result[index + 1];\n          params.push(obj);\n          index = index + 2;\n        }\n      } else {\n        params = [];\n      }\n      values = _.map(params, function(param) {\n        return _.values(param)[0];\n      });\n      promises = _.map(values, function(x) {\n        return bindOnceP($scope, x);\n      });\n      return Promise.all(promises).then(function() {\n        var i, key, len, options, param, value;\n        options = {};\n        for (i = 0, len = params.length; i < len; i++) {\n          param = params[i];\n          key = Object.keys(param)[0];\n          value = param[key];\n          options[key] = $scope.$eval(value);\n        }\n        return [name, options];\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      if ($el.is(\"a\")) {\n        $el.attr(\"href\", \"#\");\n      }\n      $el.on(\"pointerenter\", function(event) {\n        var target;\n        target = $(event.currentTarget);\n        if (!target.data(\"fullUrl\") || $attrs.tgNavGetParams !== target.data(\"params\")) {\n          return parseNav($attrs.tgNav, $scope).then(function(result) {\n            var fullUrl, getURLParams, getURLParamsStr, name, options, path, url, user;\n            name = result[0], options = result[1];\n            user = $auth.getUser();\n            if (user) {\n              options.user = user.username;\n            }\n            if (name === 'project') {\n              path = tgSections.getPath(options['project'], options['section']);\n              name = name + \"-\" + path;\n            }\n            url = $navurls.resolve(name);\n            fullUrl = $navurls.formatUrl(url, options);\n            if ($attrs.tgNavGetParams) {\n              getURLParams = JSON.parse($attrs.tgNavGetParams);\n              getURLParamsStr = $.param(getURLParams);\n              fullUrl = fullUrl + \"?\" + getURLParamsStr;\n              target.data(\"params\", $attrs.tgNavGetParams);\n            }\n            target.data(\"fullUrl\", fullUrl);\n            if (target.is(\"a\")) {\n              target.attr(\"href\", fullUrl);\n            }\n            return $el.on(\"click\", function(event) {\n              if (event.metaKey || event.ctrlKey) {\n                return;\n              }\n              event.preventDefault();\n              target = $(event.currentTarget);\n              if (target.hasClass('noclick')) {\n                return;\n              }\n              fullUrl = target.data(\"fullUrl\");\n              switch (event.which) {\n                case 1:\n                  $location.url(fullUrl);\n                  $scope.$apply();\n                  break;\n                case 2:\n                  window.open(fullUrl);\n              }\n              return lightboxService.closeAll();\n            });\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNav\", [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RepositoryService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  RepositoryService = (function(superClass) {\n    extend(RepositoryService, superClass);\n\n    RepositoryService.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"];\n\n    function RepositoryService(q, model1, storage, http, urls) {\n      this.q = q;\n      this.model = model1;\n      this.storage = storage;\n      this.http = http;\n      this.urls = urls;\n      RepositoryService.__super__.constructor.call(this);\n    }\n\n    RepositoryService.prototype.resolveUrlForModel = function(model) {\n      var idAttrName;\n      idAttrName = model.getIdAttrName();\n      return (this.urls.resolve(model.getName())) + \"/\" + model[idAttrName];\n    };\n\n    RepositoryService.prototype.resolveUrlForAttributeModel = function(model) {\n      return this.urls.resolve(model.getName(), model.parent);\n    };\n\n    RepositoryService.prototype.create = function(name, data, dataTypes, extraParams) {\n      var defered, promise, url;\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      defered = this.q.defer();\n      url = this.urls.resolve(name);\n      promise = this.http.post(url, JSON.stringify(data), extraParams);\n      promise.success((function(_this) {\n        return function(_data, _status) {\n          return defered.resolve(_this.model.make_model(name, _data, null, dataTypes));\n        };\n      })(this));\n      promise.error((function(_this) {\n        return function(data, status) {\n          return defered.reject(data);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.remove = function(model, params) {\n      var defered, promise, url;\n      if (params == null) {\n        params = {};\n      }\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http[\"delete\"](url, {}, params);\n      promise.success(function(data, status) {\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(model);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAll = function(models, patch) {\n      var promises;\n      if (patch == null) {\n        patch = true;\n      }\n      promises = _.map(models, (function(_this) {\n        return function(x) {\n          return _this.save(x, true);\n        };\n      })(this));\n      return this.q.all(promises);\n    };\n\n    RepositoryService.prototype.save = function(model, patch, params, options, returnHeaders) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      if (params == null) {\n        params = {};\n      }\n      if (returnHeaders == null) {\n        returnHeaders = false;\n      }\n      defered = this.q.defer();\n      if (!model.isModified() && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForModel(model);\n      data = JSON.stringify(model.getAttrs(patch));\n      if (patch) {\n        promise = this.http.patch(url, data, params, options);\n      } else {\n        promise = this.http.put(url, data, params, options);\n      }\n      promise.success((function(_this) {\n        return function(data, status, headers, response) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          if (returnHeaders) {\n            return defered.resolve([model, headers()]);\n          } else {\n            return defered.resolve(model);\n          }\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAttribute = function(model, attribute, patch) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      defered = this.q.defer();\n      if (!(model != null ? model.isModified() : void 0) && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForAttributeModel(model);\n      data = {};\n      data[attribute] = model.getAttrs();\n      if (patch) {\n        promise = this.http.patch(url, data);\n      } else {\n        promise = this.http.put(url, data);\n      }\n      promise.success((function(_this) {\n        return function(data, status) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          return defered.resolve(model);\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.refresh = function(model) {\n      var defered, promise, url;\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http.get(url);\n      promise.success(function(data, status) {\n        model._modifiedAttrs = {};\n        model._attrs = data;\n        model._isModified = false;\n        model.applyCasts();\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.queryMany = function(name, params, options, headers) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      if (headers == null) {\n        headers = false;\n      }\n      url = this.urls.resolve(name);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var result;\n          result = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          if (headers) {\n            return [result, data.headers];\n          }\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneAttribute = function(name, id, attribute, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name, id);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var model;\n          model = _this.model.make_model(name, data.data[attribute]);\n          model.parent = id;\n          return model;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOne = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return _this.model.make_model(name, data.data);\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryPaginated = function(name, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.models = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOnePaginatedRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.data = data.data;\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.resolve = function(options) {\n      var cache, params;\n      params = {};\n      if (options.pslug != null) {\n        params.project = options.pslug;\n      }\n      if (options.usref != null) {\n        params.us = options.usref;\n      }\n      if (options.taskref != null) {\n        params.task = options.taskref;\n      }\n      if (options.issueref != null) {\n        params.issue = options.issueref;\n      }\n      if (options.sslug != null) {\n        params.milestone = options.sslug;\n      }\n      if (options.wikipage != null) {\n        params.wikipage = options.wikipage;\n      }\n      if (options.ref != null) {\n        params.ref = options.ref;\n      }\n      cache = !(options.wikipage || options.sslug);\n      return this.queryOneRaw(\"resolver\", null, params, {\n        cache: cache\n      });\n    };\n\n    return RepositoryService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgRepo\", RepositoryService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StorageService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  StorageService = (function(superClass) {\n    extend(StorageService, superClass);\n\n    StorageService.$inject = [\"$rootScope\"];\n\n    function StorageService($rootScope) {\n      StorageService.__super__.constructor.call(this);\n    }\n\n    StorageService.prototype.get = function(key, _default) {\n      var e, serializedValue;\n      serializedValue = localStorage.getItem(key);\n      if (serializedValue === null) {\n        return _default || null;\n      }\n      try {\n        return JSON.parse(serializedValue);\n      } catch (error) {\n        e = error;\n        return null;\n      }\n    };\n\n    StorageService.prototype.set = function(key, val) {\n      if (_.isObject(key)) {\n        return _.each(key, (function(_this) {\n          return function(val, key) {\n            return _this.set(key, val);\n          };\n        })(this));\n      } else {\n        return localStorage.setItem(key, JSON.stringify(val));\n      }\n    };\n\n    StorageService.prototype.contains = function(key) {\n      var value;\n      value = this.get(key);\n      return value !== null;\n    };\n\n    StorageService.prototype.remove = function(key) {\n      return localStorage.removeItem(key);\n    };\n\n    StorageService.prototype.clear = function() {\n      return localStorage.clear();\n    };\n\n    return StorageService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgStorage\", StorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UrlsService, format, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  format = function(fmt, obj) {\n    obj = _.clone(obj);\n    return fmt.replace(/%s/g, function(match) {\n      return String(obj.shift());\n    });\n  };\n\n  taiga = this.taiga;\n\n  UrlsService = (function(superClass) {\n    extend(UrlsService, superClass);\n\n    UrlsService.$inject = [\"$tgConfig\"];\n\n    function UrlsService(config) {\n      this.config = config;\n      this.urls = {};\n      this.mainUrl = this.config.get(\"api\");\n    }\n\n    UrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge(this.urls, urls);\n    };\n\n    UrlsService.prototype.resolve = function() {\n      var args, name, url;\n      args = _.toArray(arguments);\n      if (args.length === 0) {\n        throw Error(\"wrong arguments to setUrls\");\n      }\n      name = args.slice(0, 1)[0];\n      url = format(this.urls[name], args.slice(1));\n      return format(\"%s/%s\", [_.trimEnd(this.mainUrl, \"/\"), _.trimStart(url, \"/\")]);\n    };\n\n    UrlsService.prototype.resolveAbsolute = function() {\n      var url;\n      url = this.resolve.apply(this, arguments);\n      if (/^https?:\\/\\//i.test(url)) {\n        return url;\n      }\n      if (/^\\//.test(url)) {\n        return window.location.protocol + \"//\" + window.location.host + url;\n      }\n      return window.location.protocol + \"//\" + window.location.host + \"/\" + url;\n    };\n\n    return UrlsService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service('$tgUrls', UrlsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var _get, service;\n    _get = function(objectId, resource) {\n      return $repo.queryOne(resource, objectId);\n    };\n    service = {\n      epic: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/epic\");\n        }\n      },\n      userstory: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/userstory\");\n        }\n      },\n      task: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/task\");\n        }\n      },\n      issue: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributesValues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var _list, service;\n    _list = function(projectId, resource) {\n      return $repo.queryMany(resource, {\n        project: projectId\n      });\n    };\n    service = {\n      epic: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/epic\");\n        }\n      },\n      userstory: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/userstory\");\n        }\n      },\n      task: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/task\");\n        }\n      },\n      issue: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"epics-queryparams\";\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"epics\", \"by_ref\", params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.upvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-upvote\", epicId);\n      return $http.post(url);\n    };\n    service.downvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-downvote\", epicId);\n      return $http.post(url);\n    };\n    service.watch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-watch\", epicId);\n      return $http.post(url);\n    };\n    service.unwatch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-unwatch\", epicId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.epics = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(contentType, objectId, entryType) {\n      return $repo.queryOneRaw(\"history/\" + contentType, objectId, {\n        type: entryType\n      });\n    };\n    service.editComment = function(type, objectId, activityId, comment) {\n      var commentData, params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/edit_comment\";\n      params = {\n        id: activityId\n      };\n      commentData = {\n        comment: comment\n      };\n      return $http.post(url, commentData, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.getCommentHistory = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/comment_versions\";\n      params = {\n        id: activityId\n      };\n      return $http.get(url, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.deleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/delete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.undeleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/undelete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.history = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.get = function(token) {\n      return $repo.queryOne(\"invitations\", token);\n    };\n    return function(instance) {\n      return instance.invitations = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashIssuesShowTags, hashSprintShowTags, hashSuffix, service;\n    service = {};\n    hashSuffix = \"issues-queryparams\";\n    hashSprintShowTags = \"taskboard-issues\";\n    hashIssuesShowTags = \"issues-list\";\n    service.get = function(projectId, issueId) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      return $repo.queryOne(\"issues\", issueId, params);\n    };\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"issues\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"issues\", filters);\n    };\n    service.list = function(projectId, filters, options) {\n      var params;\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryPaginated(\"issues\", params, options);\n    };\n    service.listInProject = function(projectId, sprintId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      params = _.merge(params, {\n        project: projectId\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"issues\", params);\n    };\n    service.bulkCreate = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-issues\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.upvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-upvote\", issueId);\n      return $http.post(url);\n    };\n    service.downvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-downvote\", issueId);\n      return $http.post(url);\n    };\n    service.watch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-watch\", issueId);\n      return $http.post(url);\n    };\n    service.unwatch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-unwatch\", issueId);\n      return $http.post(url);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/issues_stats\");\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"issues-filters\", null, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-issue-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.promoteToUserStory = function(issueId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-issue-to-us\", issueId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    service.storeIssuesShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getIssuesShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    service.storeSprintShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSprintShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.issues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($storage) {\n    var hashSuffixStatusColumnModes, hashSuffixStatusViewModes, hashSuffixSwimlanesModes, service;\n    service = {};\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\";\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\";\n    hashSuffixSwimlanesModes = \"kanban-swimlanesmodels\";\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeSwimlanesModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSwimlanesModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    return function(instance) {\n      return instance.kanban = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {\n      list: function() {\n        return $repo.queryMany(\"locales\");\n      }\n    };\n    return function(instance) {\n      return instance.locales = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.render = function(projectId, content) {\n      var params, url;\n      if ((content == null) || content === \"\") {\n        content = ' ';\n      }\n      params = {\n        project_id: projectId,\n        content: content\n      };\n      url = $urls.resolve(\"wiki\");\n      return $http.post(url + \"/render\", params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.mdrender = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"memberships\", id);\n    };\n    service.list = function(projectId, filters, enablePagination) {\n      var options, params;\n      if (enablePagination == null) {\n        enablePagination = true;\n      }\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      if (enablePagination) {\n        return $repo.queryPaginated(\"memberships\", params);\n      }\n      return $repo.queryMany(\"memberships\", params, options = {\n        enablePagination: enablePagination\n      });\n    };\n    service.listByUser = function(userId, filters) {\n      var params;\n      params = {\n        user: userId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryPaginated(\"memberships\", params);\n    };\n    service.resendInvitation = function(id) {\n      var url;\n      url = $urls.resolve(\"memberships\");\n      return $http.post(url + \"/\" + id + \"/resend_invitation\", {});\n    };\n    service.bulkCreateMemberships = function(projectId, data, invitation_extra_text) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-memberships\");\n      params = {\n        project_id: projectId,\n        bulk_memberships: data,\n        invitation_extra_text: invitation_extra_text\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.memberships = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.list = function(projectId, module) {\n      return $repo.queryOneAttribute(\"project-modules\", projectId, module);\n    };\n    return function(instance) {\n      return instance.modules = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"notify-policies\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"notify-policies\", params);\n    };\n    return function(instance) {\n      return instance.notifyPolicies = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $auth, $q, $translate) {\n    var service;\n    service = {};\n    service.get = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId);\n    };\n    service.getBySlug = function(projectSlug) {\n      return $repo.queryOne(\"projects\", \"by_slug?slug=\" + projectSlug);\n    };\n    service.list = function(filters) {\n      var params;\n      params = {\n        \"order_by\": \"user_order\"\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.listByMember = function(memberId) {\n      var params;\n      params = {\n        \"member\": memberId,\n        \"order_by\": \"user_order\"\n      };\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.templates = function() {\n      return $repo.queryMany(\"project-templates\");\n    };\n    service.usersList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"users\", params);\n    };\n    service.rolesList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"roles\", params);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/stats\");\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = $urls.resolve(\"bulk-update-projects-order\");\n      return $http.post(url, bulkData);\n    };\n    service.regenerate_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.patch_default_swimlane = function(projectId, swimlaneId) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId;\n      data = {\n        default_swimlane: swimlaneId\n      };\n      return $http.patch(url, data);\n    };\n    service.delete_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.leave = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/leave\";\n      return $http.post(url);\n    };\n    service.memberStats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/member_stats\");\n    };\n    service.tagsColors = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId + \"/tags_colors\");\n    };\n    service.deleteTag = function(projectId, tag) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tag\";\n      return $http.post(url, {\n        tag: tag\n      });\n    };\n    service.createTag = function(projectId, tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/create_tag\";\n      data = {};\n      data.tag = tag;\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.editTag = function(projectId, from_tag, to_tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/edit_tag\";\n      data = {};\n      data.from_tag = from_tag;\n      if (to_tag) {\n        data.to_tag = to_tag;\n      }\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.mixTags = function(projectId, to_tag, from_tags) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/mix_tags\";\n      return $http.post(url, {\n        to_tag: to_tag,\n        from_tags: from_tags\n      });\n    };\n    service[\"export\"] = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"exporter\")) + \"/\" + projectId;\n      return $http.get(url);\n    };\n    service[\"import\"] = function(file, statusUpdater) {\n      var complete, data, defered, errorMsg, failed, maxFileSize, response, uploadComplete, uploadFailed, uploadProgress, xhr;\n      defered = $q.defer();\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\n          fileName: file.name,\n          fileSize: sizeFormat(file.size),\n          maxFileSize: sizeFormat(maxFileSize)\n        });\n        response = {\n          status: 413,\n          data: {\n            _error_message: errorMsg\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          var message, percent;\n          percent = Math.round((evt.loaded / evt.total) * 100);\n          message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\n            uploadedSize: sizeFormat(evt.loaded),\n            totalSize: sizeFormat(evt.total)\n          });\n          return statusUpdater(\"in-progress\", null, message, percent);\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"done\", $translate.instant(\"PROJECT.IMPORT.TITLE\"), $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"));\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"error\");\n        };\n      })(this);\n      complete = (function(_this) {\n        return function(evt) {\n          var ref;\n          response = {};\n          try {\n            response.data = JSON.parse(evt.target.responseText);\n          } catch (error) {\n            response.data = {};\n          }\n          response.status = evt.target.status;\n          if (evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')) {\n            response.headers = {\n              isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') === 'True',\n              memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\n            };\n          }\n          if ((ref = response.status) === 201 || ref === 202) {\n            defered.resolve(response);\n          }\n          return defered.reject(response);\n        };\n      })(this);\n      failed = (function(_this) {\n        return function(evt) {\n          return defered.reject(\"fail\");\n        };\n      })(this);\n      data = new FormData();\n      data.append('dump', file);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.upload.addEventListener(\"load\", uploadComplete, false);\n      xhr.upload.addEventListener(\"error\", uploadFailed, false);\n      xhr.upload.addEventListener(\"abort\", uploadFailed, false);\n      xhr.addEventListener(\"load\", complete, false);\n      xhr.addEventListener(\"error\", failed, false);\n      xhr.open(\"POST\", $urls.resolve(\"importer\"));\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + ($auth.getToken()));\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    service.changeLogo = function(projectId, file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('logo', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/change_logo\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeLogo = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/remove_logo\";\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.projects = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\", \"$q\", \"$translate\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"roles\", id);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"roles\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.roles = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http, $q) {\n    var service;\n    service = {};\n    service[\"do\"] = function(projectId, term) {\n      var deferredAbort, params, request, url;\n      deferredAbort = $q.defer();\n      url = $urls.resolve(\"search\");\n      params = {\n        url: url,\n        method: \"GET\",\n        timeout: deferredAbort.promise,\n        cancelable: true,\n        params: {\n          project: projectId,\n          text: term,\n          get_all: false\n        }\n      };\n      request = $http.request(params).then(function(data) {\n        return data.data;\n      });\n      request.abort = function() {\n        return deferredAbort.resolve();\n      };\n      request[\"finally\"] = function() {\n        request.abort = angular.noop;\n        return deferredAbort = request = null;\n      };\n      return request;\n    };\n    return function(instance) {\n      return instance.search = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $model, $storage, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(projectId, sprintId) {\n      return $repo.queryOne(\"milestones\", sprintId).then(function(sprint) {\n        var uses;\n        uses = sprint.user_stories;\n        uses = _.map(uses, function(u) {\n          return $model.make_model(\"userstories\", u);\n        });\n        sprint._attrs.user_stories = uses;\n        return sprint;\n      });\n    };\n    service.stats = function(projectId, sprintId) {\n      return $repo.queryOneRaw(\"milestones\", sprintId + \"/stats\");\n    };\n    service.list = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"milestones\", params, {}, true).then((function(_this) {\n        return function(result) {\n          var headers, i, len, m, milestones, uses;\n          milestones = result[0];\n          headers = result[1];\n          for (i = 0, len = milestones.length; i < len; i++) {\n            m = milestones[i];\n            uses = m.user_stories;\n            uses = _.map(uses, function(u) {\n              return $model.make_model(\"userstories\", u);\n            });\n            m._attrs.user_stories = uses;\n          }\n          return {\n            milestones: milestones,\n            closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\n            open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\n          };\n        };\n      })(this));\n    };\n    service.moveUserStoriesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveTasksMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveIssuesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.sprints = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSprintsResourcesProvider\", [\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"swimlanes\", params);\n    };\n    service.create = function(projectId, name, order) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      params = {\n        project: projectId,\n        name: name\n      };\n      if (order) {\n        params.order = order;\n      }\n      return $http.post(url, params);\n    };\n    service.edit = function(swimlaneId, name) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        name: name\n      };\n      return $http.patch(url, params);\n    };\n    service.bulkUpdateOrder = function(project, swimlanesOrder) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/bulk_update_order\";\n      params = {\n        project: project,\n        bulk_swimlanes: swimlanesOrder\n      };\n      return $http.post(url, params);\n    };\n    service.wipLimitUpdate = function(swimlaneId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"swimlane-userstory-statuses\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service[\"delete\"] = function(swimlaneId, moveTo) {\n      var url;\n      url = $urls.resolve(\"swimlanes\");\n      if (moveTo) {\n        url = url + \"/\" + swimlaneId + \"?moveTo=\" + moveTo;\n      } else {\n        url = url + \"/\" + swimlaneId;\n      }\n      return $http[\"delete\"](url);\n    };\n    return function(instance) {\n      return instance.swimlanes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSwimlanesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, hashSuffixStatusColumnModes, hashSuffixUsRowModes, service;\n    service = {};\n    hashSuffix = \"tasks-queryparams\";\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\";\n    hashSuffixUsRowModes = \"tasks-usrowmodels\";\n    service.get = function(projectId, taskId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", taskId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"tasks\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"task-filters\", null, params);\n    };\n    service.list = function(projectId, sprintId, userStoryId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      if (userStoryId == null) {\n        userStoryId = null;\n      }\n      params = _.merge(params, {\n        project: projectId,\n        order_by: 'us_order'\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      if (userStoryId) {\n        params.user_story = userStoryId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"tasks\", params);\n    };\n    service.bulkCreate = function(projectId, sprintId, usId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-tasks\");\n      params = {\n        project_id: projectId,\n        milestone_id: sprintId,\n        us_id: usId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params).then(function(result) {\n        return result.data;\n      });\n    };\n    service.upvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-upvote\", taskId);\n      return $http.post(url);\n    };\n    service.downvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-downvote\", taskId);\n      return $http.post(url);\n    };\n    service.watch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-watch\", taskId);\n      return $http.post(url);\n    };\n    service.unwatch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-unwatch\", taskId);\n      return $http.post(url);\n    };\n    service.bulkUpdateTaskTaskboardOrder = function(projectId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-taskboard-order\");\n      params = {\n        project_id: projectId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = $urls.resolve(\"tasks\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return $http.patch(url, data, null, options).then(function(result) {\n        return result.data;\n      });\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeUsRowModes = function(projectId, sprintId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getUsRowModes = function(projectId, sprintId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.promoteToUserStory = function(taskId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-task-to-us\", taskId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.tasks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"user-project-settings\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"user-project-settings\", params);\n    };\n    return function(instance) {\n      return instance.userProjectSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $q) {\n    var service;\n    service = {};\n    service.changeAvatar = function(file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('avatar', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"users\")) + \"/change_avatar\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeAvatar = function() {\n      var url;\n      url = ($urls.resolve(\"users\")) + \"/remove_avatar\";\n      return $http.post(url);\n    };\n    service.changePassword = function(currentPassword, newPassword) {\n      var data, url;\n      url = ($urls.resolve(\"users\")) + \"/change_password\";\n      data = {\n        current_password: currentPassword,\n        password: newPassword\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.userSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($http, $urls) {\n    var service;\n    service = {};\n    service.contacts = function(userId, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = $urls.resolve(\"user-contacts\", userId);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return $http.get(url, {}, httpOptions).then(function(result) {\n        return result.data;\n      });\n    };\n    return function(instance) {\n      return instance.users = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, hashShowTags, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  hashShowTags = 'backlog-tags';\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"userstories-queryparams\";\n    service.get = function(projectId, usId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", usId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"userstories\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"userstories-filters\", null, params);\n    };\n    service.listUnassigned = function(projectId, filters, pageSize) {\n      var params;\n      params = {\n        \"project\": projectId,\n        \"milestone\": \"null\"\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", _.extend(params, {\n        page_size: pageSize\n      }), {\n        enablePagination: true\n      }, true);\n    };\n    service.listAll = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", params);\n    };\n    service.bulkCreate = function(projectId, status, bulk, swimlane) {\n      var data, url;\n      data = {\n        project_id: projectId,\n        status_id: status,\n        bulk_stories: bulk,\n        swimlane_id: swimlane\n      };\n      url = $urls.resolve(\"bulk-create-us\");\n      return $http.post(url, data);\n    };\n    service.upvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-upvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.downvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-downvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.watch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-watch\", userStoryId);\n      return $http.post(url);\n    };\n    service.unwatch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-unwatch\", userStoryId);\n      return $http.post(url);\n    };\n    service.bulkUpdateBacklogOrder = function(projectId, milestoneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-backlog-order\");\n      params = {\n        project_id: projectId,\n        bulk_userstories: bulkUserstories\n      };\n      if (milestoneId) {\n        params.milestone_id = milestoneId;\n      }\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateKanbanOrder = function(projectId, statusId, swimlaneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-kanban-order\");\n      params = {\n        project_id: projectId,\n        status_id: statusId,\n        bulk_userstories: bulkUserstories\n      };\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      if (swimlaneId) {\n        params.swimlane_id = swimlaneId;\n      }\n      return $http.post(url, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.editStatus = function(statusId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"userstory-statuses\");\n      url = url + \"/\" + statusId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.userstories = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(webhookId) {\n      var params;\n      params = {\n        webhook: webhookId\n      };\n      return $repo.queryMany(\"webhooklogs\", params);\n    };\n    service.resend = function(webhooklogId) {\n      var url;\n      url = $urls.resolve(\"webhooklogs-resend\", webhooklogId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooklogs = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"webhooks\", params);\n    };\n    service.test = function(webhookId) {\n      var url;\n      url = $urls.resolve(\"webhooks-test\", webhookId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(wikiId) {\n      return $repo.queryOne(\"wiki\", wikiId);\n    };\n    service.getBySlug = function(projectId, slug) {\n      return $repo.queryOne(\"wiki\", \"by_slug?project=\" + projectId + \"&slug=\" + slug);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"wiki\", {\n        project: projectId\n      });\n    };\n    service.listLinks = function(projectId) {\n      return $repo.queryMany(\"wiki-links\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.wiki = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserChangePasswordController, UserChangePasswordDirective, debounce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserChangePasswordController = (function(superClass) {\n    extend(UserChangePasswordController, superClass);\n\n    UserChangePasswordController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\"];\n\n    function UserChangePasswordController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, translate) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.scope.sectionName = this.translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\");\n      this.scope.user = this.auth.getUser();\n    }\n\n    return UserChangePasswordController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserChangePasswordController\", UserChangePasswordController);\n\n  UserChangePasswordDirective = function($rs, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, ctrl) {\n      var form, submit, submitButton;\n      form = new checksley.Form($el.find(\"form\"));\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          if ($scope.newPassword1 !== $scope.newPassword2) {\n            $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"));\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1);\n          promise.then(function() {\n            currentLoading.finish();\n            return $confirm.notify('success');\n          });\n          return promise.then(null, function(response) {\n            currentLoading.finish();\n            return $confirm.notify('error', response.data._error_message);\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteUserDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  DeleteUserDirective = function($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, submitButton;\n      $scope.$on(\"deletelightbox:new\", function(ctx, user) {\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var currentLoading, promise;\n        currentLoading = $loading().target(submitButton).start();\n        promise = $repo.remove($scope.user);\n        promise.then(function(data) {\n          currentLoading.finish();\n          lightboxService.close($el);\n          $auth.logout();\n          return $location.path($navUrls.resolve(\"login\"));\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return console.log(\"FAIL\");\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $el.on(\"click\", \".js-confirm\", debounce(2000, function(event) {\n        event.preventDefault();\n        return submit();\n      }));\n      return submitButton = $el.find(\".js-confirm\");\n    };\n    return {\n      link: link,\n      templateUrl: \"user/lightbox/lightbox-delete-account.html\"\n    };\n  };\n\n  module.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"lightboxService\", \"$tgLoading\", DeleteUserDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserLiveNotificationsController, UserLiveNotificationsDirective, UserLiveNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserLiveNotificationsController = (function(superClass) {\n    extend(UserLiveNotificationsController, superClass);\n\n    UserLiveNotificationsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"tgErrorHandlingService\"];\n\n    function UserLiveNotificationsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserLiveNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserLiveNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController);\n\n  UserLiveNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective);\n\n  UserLiveNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.live_notify_level;\n          policy.live_notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserLiveNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaAvatarModelDirective, UserAvatarDirective, UserProfileDirective, UserSettingsController, debounce, mixOf, module, sizeFormat, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  debounce = this.taiga.debounce;\n\n  UserSettingsController = (function(superClass) {\n    extend(UserSettingsController, superClass);\n\n    UserSettingsController.$inject = [\"$scope\", \"$rootScope\", \"$tgConfig\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\", \"tgErrorHandlingService\", \"$window\"];\n\n    function UserSettingsController(scope, rootscope, config, repo, confirm, rs, params, q, location, navUrls, auth, translate, errorHandlingService, window1) {\n      var maxFileSize, promise, text;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.config = config;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.window = window1;\n      this.scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\";\n      this.scope.project = {};\n      this.scope.user = this.auth.getUser();\n      if (!this.scope.user) {\n        this.errorHandlingService.permissionDenied();\n      } else {\n        this.scope.lang = this.getLan();\n        this.scope.theme = this.getTheme();\n      }\n      maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize) {\n        text = this.translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\n          \"maxFileSize\": sizeFormat(maxFileSize)\n        });\n        this.scope.maxFileSizeMsg = text;\n      }\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserSettingsController.prototype.loadInitialData = function() {\n      var compiledThemes;\n      compiledThemes = window._taigaAvailableThemes;\n      this.scope.availableThemes = this.config.get(\"themes\", []).filter((function(_this) {\n        return function(theme) {\n          return compiledThemes.includes(theme);\n        };\n      })(this));\n      return this.rs.locales.list().then((function(_this) {\n        return function(locales) {\n          _this.scope.locales = locales;\n          return locales;\n        };\n      })(this));\n    };\n\n    UserSettingsController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.user);\n    };\n\n    UserSettingsController.prototype.getLan = function() {\n      return this.scope.user.lang || this.translate.preferredLanguage();\n    };\n\n    UserSettingsController.prototype.getTheme = function() {\n      var compiledThemes, theme;\n      compiledThemes = window._taigaAvailableThemes;\n      theme = this.scope.user.theme || this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!compiledThemes.includes(theme)) {\n        theme = \"taiga\";\n      }\n      return theme;\n    };\n\n    UserSettingsController.prototype.exportProfile = function() {\n      var onError, onSuccess;\n      onSuccess = function(result) {\n        var dumpUrl;\n        dumpUrl = result.data.url;\n        return this.window.open(dumpUrl, \"_blank\");\n      };\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.exportProfile().then(onSuccess, onError);\n    };\n\n    UserSettingsController.prototype.verifyEmail = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function(result) {\n          var text;\n          text = _this.translate.instant(\"USER_PROFILE.VERIFY_EMAIL_SUCCESS\");\n          return _this.confirm.notify(\"success\", text);\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.sendVerificationEmail().then(onSuccess, onError);\n    };\n\n    return UserSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserSettingsController\", UserSettingsController);\n\n  UserProfileDirective = function($confirm, $auth, $repo, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var changeEmail, form, onError, onSuccess;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          changeEmail = $scope.user.isAttributeModified(\"email\");\n          $scope.user.lang = $scope.lang;\n          $scope.user.theme = $scope.theme;\n          onSuccess = function(data) {\n            var text;\n            $auth.setUser(data);\n            if (changeEmail) {\n              text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\");\n              return $confirm.success(text);\n            } else {\n              return $confirm.notify('success');\n            }\n          };\n          onError = function(data) {\n            form.setErrors(data);\n            return $confirm.notify('error', data._error_message);\n          };\n          return $repo.save($scope.user).then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective]);\n\n  UserAvatarDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").removeClass(\"hidden\");\n      };\n      onSuccess = function(response) {\n        var user;\n        user = $model.make_model(\"users\", response.data);\n        $auth.setUser(user);\n        $scope.user = user;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-avatar\", function(e) {\n        e.preventDefault();\n        return $el.find(\"#avatar-field\").click();\n      });\n      $el.on(\"change\", \"#avatar-field\", function(event) {\n        if ($scope.avatarAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-gravatar\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.userSettings.removeAvatar().then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective]);\n\n  TaigaAvatarModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgAvatarModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserSettingsNavigationDirective, module;\n\n  UserSettingsNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgUserSettingsNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#usersettingsmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaUserSettings\");\n\n  module.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserNotificationsController, UserNotificationsDirective, UserNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserNotificationsController = (function(superClass) {\n    extend(UserNotificationsController, superClass);\n\n    UserNotificationsController.$inject = [\"$scope\", \"$tgConfirm\", \"$tgResources\", \"$tgAuth\", \"$tgConfig\", \"tgResources\", \"tgCurrentUserService\", \"$translate\"];\n\n    function UserNotificationsController(scope, confirm, rs, auth, config, resources, currentUserService, translate) {\n      var promise;\n      this.scope = scope;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.auth = auth;\n      this.config = config;\n      this.resources = resources;\n      this.currentUserService = currentUserService;\n      this.translate = translate;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.isSaas = this.config.get(\"isSaas\");\n      this.onPremiseSubscribed = false;\n      this.loadPremise = false;\n    }\n\n    UserNotificationsController.prototype.subscribed = function() {\n      this.loadPremise = true;\n      return this.resources.onPremise.subscribeOnPremiseNewsletter({\n        \"email\": this.currentUserService.getUser().get('email'),\n        \"full_name\": this.currentUserService.getUser().get('full_name'),\n        \"origin_form\": 'Newsletter sign-up settings'\n      }).then((function(_this) {\n        return function() {\n          var text;\n          text = _this.translate.instant(\"PROJECT.NEWSLETTER_OPENING.SAVED_PREFERENCE\");\n          _this.confirm.notify(\"success\", \"Your preferences have been save successfully\");\n          _this.onPremiseSubscribed = true;\n          _this.loadPremise = false;\n          return _this.resources.user.getUserStorage('dont_ask_premise_newsletter').then(function(storageState) {\n            return _this.resources.user.setUserStorage('dont_ask_premise_newsletter', true);\n          })[\"catch\"](function(storageError) {\n            if (storageError.status = 404) {\n              return _this.resources.user.createUserStorage('dont_ask_premise_newsletter', false);\n            }\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this.confirm.notify(\"light-error\", \"\");\n          return _this.loadPremise = false;\n        };\n      })(this));\n    };\n\n    UserNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserNotificationsController\", UserNotificationsController);\n\n  UserNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotifications\", UserNotificationsDirective);\n\n  UserNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.notify_level;\n          policy.notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserProjectSettingsController, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserProjectSettingsController = (function(superClass) {\n    extend(UserProjectSettingsController, superClass);\n\n    UserProjectSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$tgSections\", \"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"tgCurrentUserService\"];\n\n    function UserProjectSettingsController(rootScope, scope, tgSections, rs, repo, confirm, currentUserService) {\n      var promise;\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.tgSections = tgSections;\n      this.rs = rs;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.currentUserService = currentUserService;\n      this.scope.sections = this.tgSections.list();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserProjectSettingsController.prototype.loadInitialData = function() {\n      return this.rs.userProjectSettings.list().then((function(_this) {\n        return function(userProjectSettings) {\n          return _this.scope.userProjectSettings = userProjectSettings;\n        };\n      })(this));\n    };\n\n    UserProjectSettingsController.prototype.updateCustomHomePage = function(projectSettings) {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.currentUserService.loadProjects();\n          _this.rootScope.$broadcast(\"dropdown-project-list:updated\");\n          return _this.confirm.notify(\"success\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.repo.save(projectSettings).then(onSuccess, onError);\n    };\n\n    UserProjectSettingsController.prototype.filteredSections = function(projectSettings) {\n      return _.filter(this.scope.sections, function(section) {\n        var ref;\n        return ref = section.id, indexOf.call(projectSettings.allowed_sections, ref) >= 0;\n      });\n    };\n\n    return UserProjectSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserProjectSettingsController\", UserProjectSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserWebNotificationsController, UserWebNotificationsDirective, UserWebNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserWebNotificationsController = (function(superClass) {\n    extend(UserWebNotificationsController, superClass);\n\n    UserWebNotificationsController.$inject = [\"$scope\", \"$tgResources\", \"$tgAuth\"];\n\n    function UserWebNotificationsController(scope, rs, auth) {\n      var promise;\n      this.scope = scope;\n      this.rs = rs;\n      this.auth = auth;\n      this.scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserWebNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserWebNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserWebNotificationsController\", UserWebNotificationsController);\n\n  UserWebNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective);\n\n  UserWebNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"check\\\" data-index=\\\"<%- index %>\\\">\\n      <input type=\\\"checkbox\\\"\\n        <% if(notifyPolicy.web_notify_level) { %> checked=\\\"checked\\\" <% } %>\\n        name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-<%- notifyPolicy.id %>\\\"/>\\n      <div></div>\\n      <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n      <span class=\\\"check-text check-no\\\"\\\" translate=\\\"COMMON.NO\\\"></span>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"click\", \".check\", function(event) {\n          var onError, onSuccess, policy, policyIndex, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          policy.web_notify_level = !policy.web_notify_level;\n          onSuccess = function() {\n            $confirm.notify(\"success\");\n            return target.find(\"input\").prop(\"checked\", policy.web_notify_level);\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaComponents\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaDiscover\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaExternalApps\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaHome\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNavigationBar\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNotifications\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProfile\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaProjects\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaResources2\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaUserTimeline\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUtils\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaWikiHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimatedCounter;\n\n  AnimatedCounter = function() {\n    var link, template;\n    template = \"<div\\n    ng-class=\\\"{'wip-amount': data.wip, 'limit-over': data.count > data.wip}\\\"\\n    class=\\\"animated-counter-inner\\\">\\n    <div class=\\\"counter-translator\\\">\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextUp.current || 0 }}</span><span ng-if=\\\"nextUp.wip\\\"> / {{ nextUp.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ renderCount.current || 0 }}</span><span ng-if=\\\"renderCount.wip\\\"> / {{ renderCount.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextDown.current || 0 }}</span><span ng-if=\\\"nextDown.wip\\\"> / {{ nextDown.wip }}</span>\\n        </div>\\n    </div>\\n</div>\";\n    link = function($scope, $el, $attrs) {\n      var counter, initialLoad, lastCount, renderData, transitionEnd, unwatch;\n      transitionEnd = function(event) {\n        return $scope.$evalAsync((function(_this) {\n          return function() {\n            if ($scope.nextUp !== void 0) {\n              $scope.renderCount = $scope.nextUp;\n            } else {\n              $scope.renderCount = $scope.nextDown;\n            }\n            return $(counter).removeClass('inc dec');\n          };\n        })(this));\n      };\n      counter = $el.find('.counter-translator');\n      counter.on('transitionend', transitionEnd);\n      initialLoad = false;\n      lastCount = void 0;\n      unwatch = $scope.$on('kanban:userstories:loaded', function() {\n        initialLoad = true;\n        return unwatch();\n      });\n      renderData = function(data) {\n        var getCounter;\n        getCounter = (function(_this) {\n          return function(num) {\n            return {\n              current: num,\n              wip: data.wip\n            };\n          };\n        })(this);\n        $scope.nextUp = void 0;\n        $scope.nextDown = void 0;\n        if (!$scope.data || $scope.data.count === void 0) {\n          lastCount = 0;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        } else if (lastCount === $scope.data.count) {\n          return;\n        } else if (!initialLoad || lastCount === void 0) {\n          lastCount = $scope.data.count;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        }\n        if ($scope.data.count > lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextUp = getCounter($scope.data.count);\n        } else if ($scope.data.count < lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextDown = getCounter($scope.data.count);\n        }\n        if ($scope.nextUp !== void 0 || $scope.nextDown !== void 0) {\n          counter.removeClass('inc dec');\n          return $scope.$evalAsync((function(_this) {\n            return function() {\n              if ($scope.nextUp !== void 0) {\n                return counter.addClass('inc');\n              } else if ($scope.nextDown !== void 0) {\n                return counter.addClass('dec');\n              }\n            };\n          })(this));\n        }\n      };\n      $scope.$watch('disabled', function(disabled) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData($scope.data);\n      });\n      $scope.$watch('data', function(data) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData(data);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return counter.off();\n      });\n    };\n    return {\n      link: link,\n      template: template,\n      scope: {\n        data: '<',\n        disabled: '<'\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAnimatedCounter\", [AnimatedCounter]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToInlineDirective;\n\n  AssignedToInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attr, $model) {\n      var isEditable, renderUser, renderUserList;\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attr.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      renderUserList = function(text) {\n        var selectedId, users, visibleUsers;\n        selectedId = $model.$modelValue.assigned_to;\n        users = $userListService.searchUsers(text);\n        if (selectedId) {\n          users = _.reject(users, {\n            \"id\": selectedId\n          });\n        }\n        visibleUsers = _.slice(users, 0, 5);\n        visibleUsers = _.map(visibleUsers, function(user) {\n          return user.avatar = avatarService.getAvatar(user);\n        });\n        $scope.users = _.slice(users, 0, 5);\n        return $scope.showMore = users.length > 5;\n      };\n      renderUser = function(assignedObject) {\n        var assigned_to_extra_info;\n        if (assignedObject != null ? assignedObject.assigned_to : void 0) {\n          $scope.selected = assignedObject.assigned_to;\n          assigned_to_extra_info = $scope.usersById[$scope.selected];\n          $scope.fullName = assigned_to_extra_info != null ? assigned_to_extra_info.full_name_display : void 0;\n          $scope.isUnassigned = false;\n          $scope.avatar = avatarService.getAvatar(assigned_to_extra_info);\n          $scope.bg = $scope.avatar.bg;\n          $scope.isIocaine = assignedObject != null ? assignedObject.is_iocaine : void 0;\n        } else {\n          $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\");\n          $scope.isUnassigned = true;\n          $scope.avatar = avatarService.getAvatar(null);\n          $scope.bg = null;\n          $scope.isIocaine = false;\n        }\n        $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated());\n        return $scope.isEditable = isEditable();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = \"\";\n        renderUserList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.selfAssign = function() {\n        $model.$modelValue.assigned_to = $currentUserService.getUser().get('id');\n        return renderUser($model.$modelValue);\n      };\n      $scope.unassign = function() {\n        $model.$modelValue.assigned_to = null;\n        return renderUser();\n      };\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUserList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        $model.$modelValue.assigned_to = target.data(\"user-id\");\n        renderUser($model.$modelValue);\n        return $scope.$apply();\n      });\n      $scope.$watch($attr.ngModel, function(instance) {\n        return renderUser(instance);\n      });\n      $scope.$on(\"isiocaine:changed\", function(ctx, instance) {\n        return renderUser(instance);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-to-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersInlineDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var applyToModel, currentAssignedIds, currentAssignedTo, isAssigned, renderUsers, renderUsersList;\n      currentAssignedIds = [];\n      currentAssignedTo = null;\n      isAssigned = function() {\n        return currentAssignedIds.length > 0;\n      };\n      renderUsersList = function(text) {\n        var selected, users, visible;\n        users = $userListService.searchUsers(text);\n        selected = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) >= 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return selected.push(user);\n          }\n        });\n        visible = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) < 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return visible.push(user);\n          }\n        });\n        $scope.selected = _.slice(selected, 0, 5);\n        if ($scope.selected.length < 5) {\n          $scope.users = _.slice(visible, 0, 5 - $scope.selected.length);\n        } else {\n          $scope.users = [];\n        }\n        return $scope.showMore = users.length > 5;\n      };\n      renderUsers = function() {\n        var assignedUsers;\n        assignedUsers = _.map(currentAssignedIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        assignedUsers = _.filter(assignedUsers, function(it) {\n          return !!it;\n        });\n        $scope.hiddenUsers = currentAssignedIds.length > 3 ? currentAssignedIds.length - 3 : 0;\n        $scope.assignedUsers = _.slice(assignedUsers, 0, 3);\n        return $scope.isAssigned = isAssigned();\n      };\n      applyToModel = function() {\n        _.map(currentAssignedIds, function(userId) {\n          if (!$scope.usersById[userId]) {\n            return currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1);\n          }\n        });\n        if (currentAssignedIds.length === 0) {\n          currentAssignedTo = null;\n        } else if (currentAssignedIds.indexOf(currentAssignedTo) === -1 || !currentAssignedTo) {\n          currentAssignedTo = currentAssignedIds[0];\n        }\n        if (!$model.$modelValue.assigned_users) {\n          $model.$modelValue.assigned_users = currentAssignedIds;\n        } else {\n          $model.$modelValue.setAttr('assigned_users', currentAssignedIds);\n        }\n        return $model.$modelValue.assigned_to = currentAssignedTo;\n      };\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = null;\n        renderUsersList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.assign = function(user) {\n        currentAssignedIds.push(user.id);\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.selfAssign = function() {\n        currentAssignedIds.push($currentUserService.getUser().get('id'));\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.unassign = function(user) {\n        var index;\n        index = currentAssignedIds.indexOf(user.id);\n        currentAssignedIds.splice(index, 1);\n        renderUsers();\n        return applyToModel();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUsersList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $scope.$watch($attrs.ngModel, function(item) {\n        var assigned_to;\n        if (item == null) {\n          return;\n        }\n        currentAssignedIds = [];\n        assigned_to = null;\n        if (item.assigned_users != null) {\n          currentAssignedIds = item.assigned_users;\n        }\n        assigned_to = item.assigned_to;\n        return renderUsers();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentLinkDirective;\n\n  AttachmentLinkDirective = function($parse, attachmentsPreviewService, lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attachment;\n      attachment = $parse(attrs.tgAttachmentLink)(scope);\n      el.on(\"click\", function(event) {\n        if (taiga.isImage(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return scope.$apply(function() {\n            lightboxService.open($('tg-attachments-preview'));\n            return attachmentsPreviewService.fileId = attachment.getIn(['file', 'id']);\n          });\n        } else if (taiga.isPdf(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return window.open(attachment.getIn(['file', 'url']));\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentLinkDirective.$inject = [\"$parse\", \"tgAttachmentsPreviewService\", \"lightboxService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentGalleryDirective;\n\n  AttachmentGalleryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment-gallery.html\",\n      link: link\n    };\n  };\n\n  AttachmentGalleryDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentController;\n\n  AttachmentController = (function() {\n    AttachmentController.$inject = ['tgAttachmentsService', '$translate'];\n\n    function AttachmentController(attachmentsService, translate) {\n      this.attachmentsService = attachmentsService;\n      this.translate = translate;\n      this.form = {};\n      this.form.description = this.attachment.getIn(['file', 'description']);\n      this.form.is_deprecated = this.attachment.get(['file', 'is_deprecated']);\n      this.title = this.translate.instant(\"ATTACHMENT.TITLE\", {\n        fileName: this.attachment.get('name'),\n        date: moment(this.attachment.get('created_date')).format(this.translate.instant(\"ATTACHMENT.DATE\"))\n      });\n    }\n\n    AttachmentController.prototype.editMode = function(mode) {\n      var attachment;\n      attachment = this.attachment.set('editable', mode);\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    AttachmentController.prototype[\"delete\"] = function() {\n      return this.onDelete({\n        attachment: this.attachment\n      });\n    };\n\n    AttachmentController.prototype.save = function() {\n      var attachment;\n      attachment = this.attachment.set('loading', true);\n      this.onUpdate({\n        attachment: attachment\n      });\n      attachment = this.attachment.merge({\n        editable: false,\n        loading: false\n      });\n      attachment = attachment.mergeIn(['file'], {\n        description: this.form.description,\n        is_deprecated: !!this.form.is_deprecated\n      });\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    return AttachmentController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Attachment', AttachmentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentDirective;\n\n  AttachmentDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment.html\",\n      link: link\n    };\n  };\n\n  AttachmentDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsDropDirective;\n\n  AttachmentsDropDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgAttachmentsDrop);\n      el.on('dragover', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.add('attachment-dragover');\n        return false;\n      });\n      el.on('dragleave', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        return false;\n      });\n      el.on('drop', function(e) {\n        var dataTransfer;\n        e.stopPropagation();\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer);\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: dataTransfer.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentsDropDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullController, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsFullController = (function() {\n    AttachmentsFullController.$inject = [\"$translate\", \"$tgConfirm\", \"$tgConfig\", \"$tgStorage\", \"tgAttachmentsFullService\", \"tgProjectService\", \"tgAttachmentsPreviewService\"];\n\n    function AttachmentsFullController(translate, confirm, config, storage, attachmentsFullService, projectService, attachmentsPreviewService) {\n      this.translate = translate;\n      this.confirm = confirm;\n      this.config = config;\n      this.storage = storage;\n      this.attachmentsFullService = attachmentsFullService;\n      this.projectService = projectService;\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      this.mode = this.storage.get('attachment-mode', 'list');\n      this.maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (this.maxFileSize) {\n        this.maxFileSize = sizeFormat(this.maxFileSize);\n      }\n      this.maxFileSizeMsg = this.maxFileSize ? this.translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {\n        maxFileSize: this.maxFileSize\n      }) : \"\";\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullController.prototype.uploadingAttachments = function() {\n      return this.attachmentsFullService.uploadingAttachments;\n    };\n\n    AttachmentsFullController.prototype.addAttachment = function(file) {\n      var editable;\n      editable = this.mode === 'list';\n      return this.attachmentsFullService.addAttachment(this.projectId, this.objId, this.type, file, editable);\n    };\n\n    AttachmentsFullController.prototype.setMode = function(mode) {\n      this.mode = mode;\n      return this.storage.set('attachment-mode', mode);\n    };\n\n    AttachmentsFullController.prototype.toggleDeprecatedsVisible = function() {\n      return this.attachmentsFullService.toggleDeprecatedsVisible();\n    };\n\n    AttachmentsFullController.prototype.addAttachments = function(files) {\n      return _.forEach(files, (function(_this) {\n        return function(file) {\n          return _this.addAttachment(file);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments(this.type, this.objId, this.projectId);\n    };\n\n    AttachmentsFullController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      var message, title;\n      this.attachmentsPreviewService.fileId = null;\n      title = this.translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\");\n      message = this.translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\n        fileName: toDeleteAttachment.getIn(['file', 'name'])\n      });\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onError = function() {\n            message = _this.translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            return askResponse.finish();\n          };\n          return _this.attachmentsFullService.deleteAttachment(toDeleteAttachment, _this.type).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.reorderAttachment = function(attachment, newIndex) {\n      return this.attachmentsFullService.reorderAttachment(this.objId, this.type, attachment, newIndex);\n    };\n\n    AttachmentsFullController.prototype.updateAttachment = function(toUpdateAttachment) {\n      return this.attachmentsFullService.updateAttachment(toUpdateAttachment, this.type);\n    };\n\n    AttachmentsFullController.prototype._isEditable = function() {\n      if (this.projectService.project) {\n        return this.projectService.hasPermission(this.editPermission);\n      }\n      return false;\n    };\n\n    AttachmentsFullController.prototype.showAttachments = function() {\n      return this._isEditable() || this.attachmentsFullService.attachments.size;\n    };\n\n    return AttachmentsFullController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  AttachmentsFullDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        type: \"@\",\n        objId: \"=\",\n        projectId: \"=\",\n        editPermission: \"@\"\n      },\n      controller: \"AttachmentsFull\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-full/attachments-full.html\",\n      link: link\n    };\n  };\n\n  AttachmentsFullDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsFullService = (function(superClass) {\n    extend(AttachmentsFullService, superClass);\n\n    AttachmentsFullService.$inject = [\"tgAttachmentsService\", \"$rootScope\", \"$q\"];\n\n    function AttachmentsFullService(attachmentsService, rootScope, q) {\n      this.attachmentsService = attachmentsService;\n      this.rootScope = rootScope;\n      this.q = q;\n      this._attachments = Immutable.List();\n      this._deprecatedsCount = 0;\n      this._attachmentsVisible = Immutable.List();\n      this._deprecatedsVisible = false;\n      this.uploadingAttachments = [];\n      this.types = this.attachmentsService.types;\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this._attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this._deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this._attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this._deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullService.prototype.toggleDeprecatedsVisible = function() {\n      this._deprecatedsVisible = !this._deprecatedsVisible;\n      return this.regenerate();\n    };\n\n    AttachmentsFullService.prototype.regenerate = function() {\n      this._deprecatedsCount = this._attachments.count(function(it) {\n        return it.getIn(['file', 'is_deprecated']);\n      });\n      if (this._deprecatedsVisible) {\n        return this._attachmentsVisible = this._attachments;\n      } else {\n        return this._attachmentsVisible = this._attachments.filter(function(it) {\n          return !it.getIn(['file', 'is_deprecated']);\n        });\n      }\n    };\n\n    AttachmentsFullService.prototype.addAttachment = function(projectId, objId, type, file, editable, comment) {\n      if (editable == null) {\n        editable = true;\n      }\n      if (comment == null) {\n        comment = false;\n      }\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          var promise;\n          if (_this.attachmentsService.validate(file)) {\n            _this.uploadingAttachments.push(file);\n            promise = _this.attachmentsService.upload(file, objId, projectId, type, comment);\n            return promise.then(function(file) {\n              var attachment;\n              _this.uploadingAttachments = _this.uploadingAttachments.filter(function(uploading) {\n                return uploading.name !== file.get('name');\n              });\n              attachment = Immutable.Map();\n              attachment = attachment.merge({\n                file: file,\n                editable: editable,\n                loading: false,\n                from_comment: comment\n              });\n              _this._attachments = _this._attachments.push(attachment);\n              _this.regenerate();\n              _this.rootScope.$broadcast(\"attachment:create\");\n              return resolve(attachment);\n            });\n          } else {\n            return reject(new Error(file));\n          }\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.loadAttachments = function(type, objId, projectId) {\n      return this.attachmentsService.list(type, objId, projectId).then((function(_this) {\n        return function(files) {\n          _this._attachments = files.map(function(file) {\n            var attachment;\n            attachment = Immutable.Map();\n            return attachment.merge({\n              loading: false,\n              editable: false,\n              file: file\n            });\n          });\n          _this.rootScope.$broadcast(\"attachments:loaded\", _this._attachments);\n          return _this.regenerate();\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.deleteAttachment = function(toDeleteAttachment, type) {\n      var onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this._attachments = _this._attachments.filter(function(attachment) {\n            return attachment !== toDeleteAttachment;\n          });\n          return _this.regenerate();\n        };\n      })(this);\n      return this.attachmentsService[\"delete\"](type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess);\n    };\n\n    AttachmentsFullService.prototype.reorderAttachment = function(objectId, type, attachment, newIndex) {\n      var afterAttachmentId, attachments, oldIndex, previousAttachment;\n      oldIndex = this.attachments.findIndex(function(it) {\n        return it === attachment;\n      });\n      attachments = this.attachments.remove(oldIndex);\n      attachments = attachments.splice(newIndex, 0, attachment);\n      attachments = attachments.map(function(x, i) {\n        return x.setIn(['file', 'order'], i + 1);\n      });\n      this._attachments = attachments;\n      this.regenerate();\n      afterAttachmentId = null;\n      if (newIndex > 0) {\n        previousAttachment = this.attachments.get(newIndex - 1);\n        afterAttachmentId = previousAttachment.getIn(['file', 'id']);\n      }\n      return this.attachmentsService.bulkUpdateOrder(objectId, type, afterAttachmentId, [attachment.getIn(['file', 'id'])]);\n    };\n\n    AttachmentsFullService.prototype.updateAttachment = function(toUpdateAttachment, type) {\n      var index, oldAttachment, patch;\n      index = this._attachments.findIndex(function(attachment) {\n        return attachment.getIn(['file', 'id']) === toUpdateAttachment.getIn(['file', 'id']);\n      });\n      oldAttachment = this._attachments.get(index);\n      patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'));\n      if (toUpdateAttachment.get('loading')) {\n        return this.setAttachments(index, toUpdateAttachment);\n      } else {\n        if (_.isEmpty(patch)) {\n          return this.setAttachments(index, toUpdateAttachment);\n        } else {\n          return this.attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then((function(_this) {\n            return function() {\n              return _this.setAttachments(index, toUpdateAttachment);\n            };\n          })(this));\n        }\n      }\n    };\n\n    AttachmentsFullService.prototype.setAttachments = function(index, toUpdateAttachment) {\n      this._attachments = this._attachments.set(index, toUpdateAttachment);\n      return this.regenerate();\n    };\n\n    return AttachmentsFullService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewController;\n\n  AttachmentsPreviewController = (function() {\n    AttachmentsPreviewController.$inject = [\"tgAttachmentsPreviewService\"];\n\n    function AttachmentsPreviewController(attachmentsPreviewService) {\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      taiga.defineImmutableProperty(this, \"current\", (function(_this) {\n        return function() {\n          if (!_this.attachmentsPreviewService.fileId) {\n            return null;\n          }\n          return _this.getCurrent();\n        };\n      })(this));\n    }\n\n    AttachmentsPreviewController.prototype.hasPagination = function() {\n      var images;\n      images = this.attachments.filter((function(_this) {\n        return function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        };\n      })(this));\n      return images.size > 1;\n    };\n\n    AttachmentsPreviewController.prototype.getCurrent = function() {\n      var attachment, file;\n      attachment = this.attachments.find((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n      if (!attachment) {\n        return null;\n      }\n      file = attachment.get('file');\n      return file;\n    };\n\n    AttachmentsPreviewController.prototype.getIndex = function() {\n      return this.attachments.findIndex((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n    };\n\n    AttachmentsPreviewController.prototype.next = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(attachmentIndex + 1).find(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.find(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    AttachmentsPreviewController.prototype.previous = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(0, attachmentIndex).findLast(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.findLast(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    return AttachmentsPreviewController;\n\n  })();\n\n  angular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentPreviewLightboxDirective;\n\n  AttachmentPreviewLightboxDirective = function(lightboxService, attachmentsPreviewService) {\n    var link;\n    link = function($scope, el, attrs, ctrl) {\n      $(document.body).on(\"keydown.image-preview\", function(e) {\n        if (attachmentsPreviewService.fileId) {\n          if (e.keyCode === 39) {\n            ctrl.next();\n          } else if (e.keyCode === 37) {\n            ctrl.previous();\n          }\n        }\n        return $scope.$digest();\n      });\n      return $scope.$on('$destroy', function() {\n        return $(document.body).off('.image-preview');\n      });\n    };\n    return {\n      scope: {},\n      controller: 'AttachmentsPreview',\n      templateUrl: 'components/attachments-preview/attachments-preview.html',\n      link: link,\n      controllerAs: \"vm\",\n      bindToController: {\n        attachments: \"=\"\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\"lightboxService\", \"tgAttachmentsPreviewService\", AttachmentPreviewLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsPreviewService = (function(superClass) {\n    extend(AttachmentsPreviewService, superClass);\n\n    AttachmentsPreviewService.$inject = [];\n\n    function AttachmentsPreviewService() {}\n\n    return AttachmentsPreviewService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleController;\n\n  AttachmentsSimpleController = (function() {\n    AttachmentsSimpleController.$inject = [\"tgAttachmentsService\"];\n\n    function AttachmentsSimpleController(attachmentsService) {\n      this.attachmentsService = attachmentsService;\n    }\n\n    AttachmentsSimpleController.prototype.addAttachment = function(file) {\n      var attachment;\n      attachment = Immutable.fromJS({\n        file: file,\n        name: file.name,\n        size: file.size\n      });\n      if (this.attachmentsService.validate(file)) {\n        this.attachments = this.attachments.push(attachment);\n        if (this.onAdd) {\n          return this.onAdd({\n            attachment: attachment\n          });\n        }\n      }\n    };\n\n    AttachmentsSimpleController.prototype.addAttachments = function(files) {\n      return _.forEach(files, this.addAttachment.bind(this));\n    };\n\n    AttachmentsSimpleController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      this.attachments = this.attachments.filter(function(attachment) {\n        return attachment !== toDeleteAttachment;\n      });\n      if (this.onDelete) {\n        return this.onDelete({\n          attachment: toDeleteAttachment\n        });\n      }\n    };\n\n    return AttachmentsSimpleController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleDirective;\n\n  AttachmentsSimpleDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        attachments: \"=\",\n        onAdd: \"&\",\n        onDelete: \"&\"\n      },\n      controller: \"AttachmentsSimple\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-simple/attachments-simple.html\",\n      link: link\n    };\n  };\n\n  AttachmentsSimpleDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentSortableDirective;\n\n  AttachmentSortableDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      callback = $parse(attrs.tgAttachmentsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div[tg-bind-scope]');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var attachment, newIndex;\n        item = $(item);\n        attachment = item.scope().attachment;\n        newIndex = item.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            attachment: attachment,\n            index: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentSortableDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AutoSelectDirective;\n\n  AutoSelectDirective = function($timeout) {\n    return {\n      link: function(scope, elm) {\n        return $timeout(function() {\n          return elm[0].select();\n        });\n      }\n    };\n  };\n\n  AutoSelectDirective.$inject = ['$timeout'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarDirective;\n\n  AvatarDirective = function(avatarService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attributeName;\n      if (attrs.tgAvatarBig) {\n        attributeName = 'avatarBig';\n      } else {\n        attributeName = 'avatar';\n      }\n      return scope.$watch(attributeName, function(user) {\n        var avatar;\n        avatar = avatarService.getAvatar(user, attributeName);\n        el.attr('src', avatar.url);\n        el.attr('title', \"\" + avatar.fullName);\n        el.attr('alt', \"\" + avatar.fullName);\n        return el.css('background', avatar.bg || \"\");\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        avatar: \"=tgAvatar\",\n        avatarBig: \"=tgAvatarBig\"\n      }\n    };\n  };\n\n  AvatarDirective.$inject = ['tgAvatarService'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective);\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BelongToEpicsDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  BelongToEpicsDirective = function($translate, $confirm, $rs, $rs2, lightboxService) {\n    var link, templateUrl;\n    link = function(scope, el, attrs) {\n      var updateEpics;\n      scope.$watch('epics', function(epics) {\n        return updateEpics(epics);\n      });\n      scope.$on(\"related-epics:changed\", function(ctx, userStory) {\n        return $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then(function(us) {\n          scope.item.epics = us.epics;\n          return updateEpics(us.epics);\n        });\n      });\n      scope.removeEpicRelationship = function(epic) {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n        message = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n          epicSubject: epic.get('subject')\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var epicId, onError, onSuccess, usId;\n          onSuccess = function() {\n            askResponse.finish();\n            return scope.$broadcast(\"related-epics:changed\", scope.item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          epicId = epic.get('id');\n          usId = scope.item.id;\n          return $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        });\n      };\n      return updateEpics = function(epics) {\n        scope.epicsLength = 0;\n        scope.immutable_epics = [];\n        if (epics && !epics.isIterable) {\n          scope.epicsLength = epics.length;\n          return scope.immutable_epics = Immutable.fromJS(epics);\n        }\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\";\n      }\n      return \"components/belong-to-epics/belong-to-epics-pill.html\";\n    };\n    return {\n      link: link,\n      scope: {\n        epics: '=',\n        item: \"=\"\n      },\n      templateUrl: templateUrl\n    };\n  };\n\n  module.directive(\"tgBelongToEpics\", [\"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\", BelongToEpicsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindCode;\n\n  BindCode = function($sce, $parse, $compile, wysiwygService) {\n    return {\n      restrict: 'A',\n      compile: function(tElement, tAttrs) {\n        var render, tgBindWysiwygHtmlGetter, tgBindWysiwygHtmlWatch;\n        tgBindWysiwygHtmlGetter = $parse(tAttrs.tgBindWysiwygHtml);\n        tgBindWysiwygHtmlWatch = $parse(tAttrs.tgBindWysiwygHtml, function(value) {\n          return (value || '').toString();\n        });\n        $compile.$$addBindingClass(tElement);\n        render = (function(_this) {\n          return function(element, html) {\n            var anchor;\n            window._extraValidHtmlElments = {\n              input: true\n            };\n            window._extraValidAttrs = {\n              checked: true\n            };\n            element.html($sce.getTrustedHtml(html) || '');\n            element[0].querySelectorAll('pre code').forEach(function(block) {\n              var blockClasses, language, match, matchResult, resultHighlight;\n              blockClasses = block.className + ' ';\n              blockClasses += block.parentNode ? block.parentNode.className : '';\n              match = /\\blang(?:uage)?-([\\w-]+)\\b/i.exec(blockClasses);\n              matchResult = 'plaintext';\n              if (match && match.length) {\n                matchResult = match[1];\n              }\n              language = hljs.getLanguage(matchResult);\n              if (language) {\n                return resultHighlight = hljs.highlightBlock(block);\n              } else {\n                return ljs.load((\"/\" + window._version + \"/highlightjs-languages/\") + matchResult + \".min.js\", function() {\n                  return hljs.highlightBlock(block);\n                });\n              }\n            });\n            anchor = element[0].querySelectorAll('a[href^=\"#\"]');\n            return anchor.forEach(function(link) {\n              return link.addEventListener('click', function(e) {\n                var node;\n                e.preventDefault();\n                node = document.querySelector(link.getAttribute('href'));\n                if (node) {\n                  return node.scrollIntoView();\n                }\n              });\n            });\n          };\n        })(this);\n        return function(scope, element, attr) {\n          $compile.$$addBindingInfo(element, attr.tgBindWysiwygHtml);\n          return scope.$watch(tgBindWysiwygHtmlWatch, function() {\n            var html;\n            html = wysiwygService.getHTML(tgBindWysiwygHtmlGetter(scope));\n            wysiwygService.refreshAttachmentURL(html).then((function(_this) {\n              return function(html) {\n                return render(element, html);\n              };\n            })(this));\n            return render(element, html);\n          });\n        };\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgBindWysiwygHtml\", [\"$sce\", \"$parse\", \"$compile\", \"tgWysiwygService\", BindCode]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BoardZoomDirective;\n\n  BoardZoomDirective = function() {\n    return {\n      scope: {\n        levels: \"=\",\n        value: \"=\"\n      },\n      templateUrl: 'components/board-zoom/board-zoom.html'\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardSlideshowController;\n\n  CardSlideshowController = (function() {\n    CardSlideshowController.$inject = [];\n\n    function CardSlideshowController() {\n      this.index = 0;\n    }\n\n    CardSlideshowController.prototype.next = function() {\n      this.index++;\n      if (this.index >= this.images.size) {\n        return this.index = 0;\n      }\n    };\n\n    CardSlideshowController.prototype.previous = function() {\n      this.index--;\n      if (this.index < 0) {\n        return this.index = this.images.size - 1;\n      }\n    };\n\n    return CardSlideshowController;\n\n  })();\n\n  angular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardSlideshowDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardSlideshowDirective = function() {\n    return {\n      controller: \"CardSlideshow\",\n      templateUrl: \"components/card-slideshow/card-slideshow.html\",\n      bindToController: true,\n      controllerAs: \"vm\",\n      scope: {\n        images: \"=\"\n      }\n    };\n  };\n\n  module.directive('tgCardSlideshow', cardSlideshowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardController;\n\n  CardController = (function() {\n    CardController.$inject = [\"$scope\"];\n\n    function CardController(scope1) {\n      this.scope = scope1;\n    }\n\n    CardController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, ctrl, lastLoadUserstoriesParams;\n      ctrl = taiga.findScope(this.scope, function(scope) {\n        if (scope && scope.ctrl) {\n          return scope.ctrl;\n        }\n        return false;\n      });\n      lastLoadUserstoriesParams = ctrl.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        lastLoadUserstoriesParams['status'] = this.scope.vm.item.getIn(['model', 'status']);\n        lastLoadUserstoriesParams['swimlane'] = this.scope.vm.item.getIn(['model', 'swimlane']);\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        if (ctrl.scope.swimlanesList.size && !lastLoadUserstoriesParams['swimlane']) {\n          lastLoadUserstoriesParams.swimlane = \"null\";\n        }\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['kanban-' + key] = lastLoadUserstoriesParams[key];\n        });\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    CardController.prototype.visible = function(name) {\n      return this.zoom.indexOf(name) !== -1;\n    };\n\n    CardController.prototype.hasTasks = function() {\n      var tasks;\n      tasks = this.item.getIn(['model', 'tasks']);\n      return tasks && tasks.size > 0;\n    };\n\n    CardController.prototype.getTagColor = function(color) {\n      if (color) {\n        return color;\n      }\n      return \"#A9AABC\";\n    };\n\n    CardController.prototype.hasMultipleAssignedUsers = function() {\n      var assignedUsers;\n      assignedUsers = this.item.getIn(['model', 'assigned_users']);\n      return assignedUsers && assignedUsers.size > 1;\n    };\n\n    CardController.prototype.hasVisibleAttachments = function() {\n      return this.item.get('images').size > 0;\n    };\n\n    CardController.prototype.toggleFold = function() {\n      return this.onToggleFold({\n        id: this.item.get('id')\n      });\n    };\n\n    CardController.prototype.getClosedTasks = function() {\n      return this.item.getIn(['model', 'tasks']).filter(function(task) {\n        return task.get('is_closed');\n      });\n    };\n\n    CardController.prototype.closedTasksPercent = function() {\n      return this.getClosedTasks().size * 100 / this.item.getIn(['model', 'tasks']).size;\n    };\n\n    CardController.prototype.getModifyPermisionKey = function() {\n      if (this.type === 'task') {\n        return 'modify_task';\n      } else {\n        return 'modify_us';\n      }\n    };\n\n    CardController.prototype.getDeletePermisionKey = function() {\n      if (this.type === 'task') {\n        return 'delete_task';\n      } else {\n        return 'delete_us';\n      }\n    };\n\n    CardController.prototype._setVisibility = function() {\n      var visibility;\n      visibility = {\n        related: this.visible('related_tasks'),\n        slides: this.visible('attachments')\n      };\n      if (!_.isUndefined(this.item.get('foldStatusChanged')) && this.visible('unfold')) {\n        if (this.zoomLevel === 2) {\n          visibility.related = this.item.get('foldStatusChanged');\n          visibility.slides = this.item.get('foldStatusChanged');\n        } else {\n          visibility.related = !this.item.get('foldStatusChanged');\n          visibility.slides = !this.item.get('foldStatusChanged');\n        }\n      }\n      if (!this.item.getIn(['model', 'tasks']) || !this.item.getIn(['model', 'tasks']).size) {\n        visibility.related = false;\n      }\n      if (!this.item.get('images') || !this.item.get('images').size) {\n        visibility.slides = false;\n      }\n      return visibility;\n    };\n\n    CardController.prototype.isRelatedTasksVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.related;\n    };\n\n    CardController.prototype.isSlideshowVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.slides;\n    };\n\n    CardController.prototype.getNavKey = function() {\n      if (this.type === 'task') {\n        return 'project-tasks-detail';\n      } else if (this.type === 'issue') {\n        return 'project-issues-detail';\n      } else {\n        return 'project-userstories-detail';\n      }\n    };\n\n    return CardController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Card', CardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardDirective = function() {\n    return {\n      controller: \"Card\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/card/card.html\",\n      bindToController: {\n        onToggleFold: \"&\",\n        onClickAssignedTo: \"&\",\n        onClickEdit: \"&\",\n        onClickRemove: \"&\",\n        onClickDelete: \"&\",\n        onClickMoveToTop: \"&\",\n        project: \"<\",\n        item: \"<\",\n        zoom: \"<\",\n        zoomLevel: \"<\",\n        archived: \"<\",\n        inViewPort: \"<\",\n        folded: \"<\",\n        type: \"@\",\n        isFirst: \"<\"\n      }\n    };\n  };\n\n  module.directive('tgCard', cardDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ClickInputFile;\n\n  ClickInputFile = function() {\n    return {\n      link: function(scope, el) {\n        el.on('click', function(e) {\n          var inputFile;\n          if (!$(e.target).is('input')) {\n            e.preventDefault();\n            inputFile = el.find('input[type=\"file\"]');\n            inputFile.val('');\n            return inputFile.trigger('click');\n          }\n        });\n        return scope.$on(\"$destroy\", function() {\n          return el.off();\n        });\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgClickInputFile\", [ClickInputFile]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorController, getDefaulColorList, taiga;\n\n  taiga = this.taiga;\n\n  getDefaulColorList = taiga.getDefaulColorList;\n\n  ColorSelectorController = (function() {\n    ColorSelectorController.$inject = [\"tgProjectService\"];\n\n    function ColorSelectorController(projectService) {\n      this.projectService = projectService;\n      this.colorList = getDefaulColorList();\n      this.checkIsColorRequired();\n      this.displayColorList = false;\n    }\n\n    ColorSelectorController.prototype.userCanChangeColor = function() {\n      if (!this.requiredPerm) {\n        return true;\n      }\n      return this.projectService.hasPermission(this.requiredPerm);\n    };\n\n    ColorSelectorController.prototype.checkIsColorRequired = function() {\n      if (!this.isColorRequired) {\n        return this.colorList = _.dropRight(this.colorList);\n      }\n    };\n\n    ColorSelectorController.prototype.setColor = function(color) {\n      this.color = color;\n      return this.customColor = color;\n    };\n\n    ColorSelectorController.prototype.resetColor = function() {\n      if (this.isColorRequired && !this.color) {\n        return this.color = this.initColor;\n      }\n    };\n\n    ColorSelectorController.prototype.toggleColorList = function() {\n      this.displayColorList = !this.displayColorList;\n      this.customColor = this.color;\n      return this.resetColor();\n    };\n\n    ColorSelectorController.prototype.onSelectDropdownColor = function(color) {\n      this.color = color;\n      this.onSelectColor({\n        color: color\n      });\n      return this.toggleColorList();\n    };\n\n    ColorSelectorController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        if (this.customColor || !this.isColorRequired) {\n          this.onSelectDropdownColor(this.customColor);\n        }\n        return event.preventDefault();\n      }\n    };\n\n    return ColorSelectorController;\n\n  })();\n\n  angular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  ColorSelectorDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var _timeout, cancel, close;\n      _timeout = null;\n      cancel = function() {\n        $timeout.cancel(_timeout);\n        return _timeout = null;\n      };\n      close = function() {\n        if (_timeout) {\n          return;\n        }\n        return _timeout = $timeout((function() {\n          ctrl.displayColorList = false;\n          return ctrl.resetColor();\n        }), 400);\n      };\n      el.find('.color-selector').mouseenter(cancel).mouseleave(close);\n      el.find('.color-selector-dropdown').mouseenter(cancel).mouseleave(close);\n      return scope.$watch('vm.initColor', function(color) {\n        return ctrl.setColor(color);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/color-selector/color-selector.html\",\n      controller: \"ColorSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        isColorRequired: \"=\",\n        onSelectColor: \"&\",\n        initColor: \"=\",\n        requiredPerm: \"@\"\n      },\n      scope: {}\n    };\n  };\n\n  ColorSelectorDirective.$inject = [\"$timeout\"];\n\n  angular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderController, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderController = (function() {\n    DetailHeaderController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\", \"$tgNavUrls\", \"$window\"];\n\n    function DetailHeaderController(rootScope, confirm, modelTransform, navUrls, window) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.navUrls = navUrls;\n      this.window = window;\n      this.editMode = false;\n      this.loadingSubject = false;\n      this.originalSubject = this.item.subject;\n      this.objType = {\n        'tasks': 'task',\n        'issues': 'issue',\n        'userstories': 'us'\n      }[this.item._name];\n    }\n\n    DetailHeaderController.prototype._checkPermissions = function() {\n      return this.permissions = {\n        canEdit: _.includes(this.project.my_permissions, this.requiredPerm)\n      };\n    };\n\n    DetailHeaderController.prototype.cancelEdit = function() {\n      this.editMode = false;\n      return this.item.subject = this.originalSubject;\n    };\n\n    DetailHeaderController.prototype.editSubject = function(value) {\n      var selection;\n      selection = this.window.getSelection();\n      if (selection.type !== \"Range\") {\n        if (value) {\n          this.editMode = true;\n        }\n        if (!value) {\n          return this.editMode = false;\n        }\n      }\n    };\n\n    DetailHeaderController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        this.saveSubject();\n      }\n      if (event.which === 27) {\n        this.item.subject = this.originalSubject;\n        return this.editSubject(false);\n      }\n    };\n\n    DetailHeaderController.prototype.saveSubject = function() {\n      var item, onEditSubjectError, onEditSubjectSuccess, transform;\n      onEditSubjectSuccess = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.confirm.notify('success');\n          return _this.originalSubject = _this.item.subject;\n        };\n      })(this);\n      onEditSubjectError = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      this.editMode = false;\n      this.loadingSubject = true;\n      item = this.item;\n      transform = this.modelTransform.save(function(item) {\n        return item;\n      });\n      return transform.then(onEditSubjectSuccess, onEditSubjectError);\n    };\n\n    return DetailHeaderController;\n\n  })();\n\n  module.controller(\"DetailHeaderCtrl\", DetailHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderDirective = function($tgWysiwygService) {\n    var link;\n    this.$inject = [];\n    link = function(scope, el, attrs, ctrl) {\n      scope.blocked_html_note = '';\n      scope.$watch(\"vm.item.blocked_note\", function(blocked_note) {\n        var html_note;\n        html_note = $tgWysiwygService.getHTML(blocked_note);\n        return scope.blocked_html_note = html_note;\n      });\n      return ctrl._checkPermissions();\n    };\n    return {\n      link: link,\n      controller: \"DetailHeaderCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\",\n        project: \"=\",\n        sectionName: \"=\",\n        requiredPerm: \"@\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/header/detail-header.html\"\n    };\n  };\n\n  module.directive(\"tgDetailHeader\", [\"tgWysiwygService\", DetailHeaderDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavController, module;\n\n  module = angular.module(\"taigaBase\");\n\n  DetailNavController = (function() {\n    DetailNavController.$inject = [\"$tgNavUrls\"];\n\n    function DetailNavController(navUrls) {\n      this.navUrls = navUrls;\n      return;\n    }\n\n    DetailNavController.prototype._checkNav = function() {\n      var ctx, ref, ref1;\n      if (((ref = this.item.neighbors.previous) != null ? ref.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.previous.ref\n        };\n        this.previousUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n      if (((ref1 = this.item.neighbors.next) != null ? ref1.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.next.ref\n        };\n        return this.nextUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n    };\n\n    return DetailNavController;\n\n  })();\n\n  module.controller(\"DetailNavCtrl\", DetailNavController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailNavDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.item\", function(value) {\n        if (!value) {\n          return;\n        }\n        return ctrl._checkNav();\n      });\n    };\n    return {\n      link: link,\n      controller: \"DetailNavCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/nav/detail-nav.html\"\n    };\n  };\n\n  module.directive(\"tgDetailNav\", DetailNavDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateController;\n\n  DueDateController = (function() {\n    DueDateController.$inject = [\"tgDueDateService\", \"tgLightboxFactory\"];\n\n    function DueDateController(dueDateService, tgLightboxFactory) {\n      this.dueDateService = dueDateService;\n      this.tgLightboxFactory = tgLightboxFactory;\n    }\n\n    DueDateController.prototype.visible = function() {\n      return this.dueDateService.visible(this._getScope());\n    };\n\n    DueDateController.prototype.disabled = function() {\n      return this.dueDateService.disabled(this._getScope());\n    };\n\n    DueDateController.prototype.color = function() {\n      return this.dueDateService.color(this._getScope());\n    };\n\n    DueDateController.prototype.title = function() {\n      return this.dueDateService.title(this._getScope());\n    };\n\n    DueDateController.prototype.setDueDate = function() {\n      if (this.disabled()) {\n        return;\n      }\n      return this.tgLightboxFactory.create(\"tg-lb-set-due-date\", {\n        \"class\": \"lightbox lightbox-set-due-date\"\n      }, {\n        \"object\": this.item,\n        \"notAutoSave\": this.notAutoSave\n      });\n    };\n\n    DueDateController.prototype._getScope = function() {\n      return {\n        dueDate: this.dueDate,\n        isClosed: this.isClosed,\n        item: this.item,\n        objType: this.objType,\n        format: this.format,\n        notAutoSave: this.notAutoSave\n      };\n    };\n\n    return DueDateController;\n\n  })();\n\n  angular.module('taigaComponents').controller('DueDateCtrl', DueDateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDatePopoverDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDatePopoverDirective = function($translate, datePickerConfigService) {\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var datePickerConfig;\n        scope.open = false;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: el.find('.due-date-button')[0],\n          container: el.find('.date-picker-container')[0],\n          bound: true,\n          onClose: function() {\n            scope.open = false;\n            return scope.$apply();\n          },\n          onSelect: function() {\n            return ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n          }\n        });\n        el.picker = new Pikaday(datePickerConfig);\n        el.on(\"click\", \".due-date-button\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (scope.open) {\n            el.picker.hide();\n            return;\n          }\n          if (!el.picker.getDate() && ctrl.dueDate) {\n            el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'));\n          }\n          el.picker.show();\n          scope.open = true;\n          return scope.$apply();\n        });\n        el.on(\"click\", \".date-picker-clean\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          ctrl.dueDate = null;\n          el.picker.setDate(ctrl.dueDate);\n          scope.open = false;\n          el.picker.hide();\n          return scope.$apply();\n        });\n        return scope.$on(\"status:changed\", function(ctx, status) {\n          return ctrl.isClosed = ctrl.item.is_closed;\n        });\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"components/due-date/due-date-popover.html\",\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDateDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDateDirective = function($translate, datePickerConfigService) {\n    var templateUrl;\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/due-date/due-date-\" + attrs.format + \".html\";\n      }\n      return \"components/due-date/due-date-icon.html\";\n    };\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var renderDatePicker;\n        renderDatePicker = function() {\n          var datePickerConfig, prettyDate;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          if (ctrl.dueDate) {\n            ctrl.dueDate = moment(ctrl.dueDate, prettyDate);\n          }\n          el.on(\"click\", \".date-picker-popover-trigger\", function(event) {\n            if (ctrl.disabled()) {\n              return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            return el.find(\".date-picker-popover\").popover().open();\n          });\n          el.on(\"click\", \".date-picker-clean\", function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            ctrl.dueDate = null;\n            scope.$apply();\n            return el.find(\".date-picker-popover\").popover().close();\n          });\n          datePickerConfig = datePickerConfigService.get();\n          _.merge(datePickerConfig, {\n            field: el.find('input.due-date')[0],\n            container: el.find('.date-picker-container')[0],\n            bound: false,\n            onSelect: function() {\n              ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n              el.find(\".date-picker-popover\").popover().close();\n              return scope.$apply();\n            }\n          });\n          return el.picker = new Pikaday(datePickerConfig);\n        };\n        if (attrs.format === 'button-popover') {\n          return renderDatePicker();\n        }\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: templateUrl,\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateService, taiga;\n\n  taiga = this.taiga;\n\n  DueDateService = (function() {\n    DueDateService.$inject = [\"$translate\", \"tgProjectService\"];\n\n    function DueDateService(translate, projectService) {\n      this.translate = translate;\n      this.projectService = projectService;\n      this.defaultConfig = [\n        {\n          \"color\": \"#93C45D\",\n          \"name\": \"normal due\",\n          \"days_to_due\": null,\n          \"by_default\": true\n        }, {\n          \"color\": \"#EA7B4B\",\n          \"name\": \"due soon\",\n          \"days_to_due\": 14,\n          \"by_default\": false\n        }, {\n          \"color\": \"#E44057\",\n          \"name\": \"past due\",\n          \"days_to_due\": 0,\n          \"by_default\": false\n        }\n      ];\n    }\n\n    DueDateService.prototype.visible = function(options) {\n      return options.format === 'button' || (options.dueDate != null);\n    };\n\n    DueDateService.prototype.disabled = function(options) {\n      return options.isClosed;\n    };\n\n    DueDateService.prototype.color = function(options) {\n      var ref;\n      return ((ref = this.getStatus(options)) != null ? ref.color : void 0) || null;\n    };\n\n    DueDateService.prototype.title = function(options) {\n      if (options.dueDate) {\n        return this._formatTitle(options);\n      } else if (options.format === 'button') {\n        return this.translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE');\n      }\n      return '';\n    };\n\n    DueDateService.prototype.getStatus = function(options) {\n      var config, project;\n      if (!options.dueDate) {\n        return null;\n      }\n      project = this.projectService.project.toJS();\n      config = project[options.objType + \"_duedates\"];\n      if (!config) {\n        config = this.defaultConfig;\n      }\n      return this._getAppearance(options, config);\n    };\n\n    DueDateService.prototype._getDefaultAppearance = function(config) {\n      var defaultAppearance;\n      defaultAppearance = null;\n      _.map(config, function(it) {\n        if (it.by_default === true) {\n          return defaultAppearance = it;\n        }\n      });\n      return defaultAppearance;\n    };\n\n    DueDateService.prototype._getAppearance = function(options, config) {\n      var currentAppearance, dueDate, now;\n      currentAppearance = this._getDefaultAppearance(config);\n      config = _.sortBy(config, function(o) {\n        return -o.days_to_due;\n      });\n      dueDate = moment(options.dueDate);\n      now = moment();\n      _.map(config, function(appearance) {\n        var limitDate;\n        if (appearance.days_to_due === null) {\n          return;\n        }\n        limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"));\n        if (now >= limitDate) {\n          return currentAppearance = appearance;\n        }\n      });\n      return currentAppearance;\n    };\n\n    DueDateService.prototype._formatTitle = function(options) {\n      var formatedDate, prettyDate, status;\n      prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      formatedDate = moment(options.dueDate).format(prettyDate);\n      status = this.getStatus(options);\n      if (status != null ? status.name : void 0) {\n        return formatedDate + \" (\" + status.name + \")\";\n      }\n      return formatedDate;\n    };\n\n    return DueDateService;\n\n  })();\n\n  taiga.DueDateService = DueDateService;\n\n  angular.module(\"taigaCommon\").service(\"tgDueDateService\", DueDateService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FileChangeDirective;\n\n  FileChangeDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgFileChange);\n      el.on('change', function(event) {\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: event.currentTarget.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      restrict: \"A\",\n      link: link\n    };\n  };\n\n  FileChangeDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterRemoteStorageService, generateHash,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  generateHash = taiga.generateHash;\n\n  FilterRemoteStorageService = (function(superClass) {\n    extend(FilterRemoteStorageService, superClass);\n\n    FilterRemoteStorageService.$inject = [\"$q\", \"$tgUrls\", \"$tgHttp\"];\n\n    function FilterRemoteStorageService(q, urls, http) {\n      this.q = q;\n      this.urls = urls;\n      this.http = http;\n    }\n\n    FilterRemoteStorageService.prototype.storeFilters = function(projectId, myFilters, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      if (_.isEmpty(myFilters)) {\n        promise = this.http[\"delete\"](url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function() {\n          return deferred.resolve();\n        });\n        promise.then(null, function() {\n          return deferred.reject();\n        });\n      } else {\n        promise = this.http.put(url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function(data) {\n          return deferred.resolve();\n        });\n        promise.then(null, (function(_this) {\n          return function(data) {\n            var innerPromise;\n            innerPromise = _this.http.post(\"\" + url, {\n              key: hash,\n              value: myFilters\n            });\n            innerPromise.then(function() {\n              return deferred.resolve();\n            });\n            return innerPromise.then(null, function() {\n              return deferred.reject();\n            });\n          };\n        })(this));\n      }\n      return deferred.promise;\n    };\n\n    FilterRemoteStorageService.prototype.getFilters = function(projectId, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      promise = this.http.get(url + \"/\" + hash);\n      promise.then(function(data) {\n        return deferred.resolve(data.data.value);\n      });\n      promise.then(null, function(data) {\n        return deferred.resolve({});\n      });\n      return deferred.promise;\n    };\n\n    return FilterRemoteStorageService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterSlideDownDirective;\n\n  FilterSlideDownDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var filter;\n      filter = $('tg-filter');\n      return scope.$watch(attrs.ngIf, function(value) {\n        var contentHeight, wrapperHeight;\n        if (value) {\n          filter.find('.filter-list').hide();\n          wrapperHeight = filter.height();\n          contentHeight = 0;\n          filter.children().each(function() {\n            return contentHeight += $(this).outerHeight(true);\n          });\n          return $(el.context.nextSibling).css({\n            \"display\": \"block\"\n          });\n        }\n      });\n    };\n    return {\n      priority: 900,\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterController;\n\n  FilterController = (function() {\n    FilterController.$inject = ['$translate'];\n\n    FilterController.activeCustomFilter = null;\n\n    FilterController.repeatedFilterError = false;\n\n    FilterController.lengthZeroError = false;\n\n    function FilterController(translate) {\n      this.translate = translate;\n      this.opened = null;\n      this.filterModeOptions = [\"include\", \"exclude\"];\n      this.filterModeLabels = {\n        \"include\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\n        \"exclude\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\")\n      };\n      this.filterMode = 'include';\n      this.customFilterForm = false;\n      this.customFilterName = '';\n      this.$onChanges = function(changes) {\n        if (changes.selectedFilters) {\n          this.getIncludedFilters();\n          return this.getExcludedFilters();\n        }\n      };\n      this.includedFilters = this.getIncludedFilters();\n      this.excludedFilters = this.getExcludedFilters();\n    }\n\n    FilterController.prototype.toggleFilterCategory = function(filterName) {\n      if (this.opened === filterName) {\n        return this.opened = null;\n      } else {\n        return this.opened = filterName;\n      }\n    };\n\n    FilterController.prototype.isOpen = function(filterName) {\n      return this.opened === filterName;\n    };\n\n    FilterController.prototype.openCustomFilter = function() {\n      this.customFilterForm = true;\n      this.lengthZeroError = false;\n      return this.repeatedFilterError = false;\n    };\n\n    FilterController.prototype.saveCustomFilter = function() {\n      if (this.customFilterName.length > 0 && !this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        this.lengthZeroError = false;\n        this.repeatedFilterError = false;\n        this.onSaveCustomFilter({\n          name: this.customFilterName\n        });\n        this.customFilterForm = false;\n        this.opened = 'custom-filter';\n        this.customFilterName = '';\n      }\n      if (this.customFilterName.length === 0) {\n        this.lengthZeroError = true;\n      } else {\n        this.lengthZeroError = false;\n      }\n      if (!this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        return this.repeatedFilterError = false;\n      } else {\n        return this.repeatedFilterError = true;\n      }\n    };\n\n    FilterController.prototype.unselectFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectFilter = function(filterCategory, filter) {\n      filter = {\n        category: filterCategory,\n        filter: filter,\n        mode: this.filterMode\n      };\n      this.activeCustomFilter = null;\n      return this.onAddFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.removeCustomFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectCustomFilter = function(filter) {\n      this.activeCustomFilter = filter.id;\n      return this.onSelectCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.getIncludedFilters = function() {\n      return this.includedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'include';\n      });\n    };\n\n    FilterController.prototype.getExcludedFilters = function() {\n      return this.excludedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'exclude';\n      });\n    };\n\n    FilterController.prototype.isFilterSelected = function(filterCategory, filter) {\n      return !!_.find(this.selectedFilters, function(it) {\n        return filter.id === it.id && filterCategory.dataType === it.dataType;\n      });\n    };\n\n    return FilterController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Filter', FilterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterDirective;\n\n  FilterDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var taskboard, watchTaskboardHeight;\n      watchTaskboardHeight = (function(_this) {\n        return function(taskboard) {\n          var resizeObserver;\n          resizeObserver = new ResizeObserver(function() {\n            var currentMax, maxSize;\n            maxSize = null;\n            currentMax = Number(el[0].style.getPropertyValue('--filter-list-max-height').replace('px', ''));\n            if (scope.vm.opened) {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight + currentMax;\n            } else {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight;\n            }\n            if (maxSize < 100) {\n              maxSize = 100;\n            } else if (maxSize > 380) {\n              maxSize = 380;\n            }\n            el[0].style.setProperty('--filter-list-max-height', maxSize + \"px\");\n            return resizeObserver.unobserve(el[0]);\n          });\n          return resizeObserver.observe(taskboard);\n        };\n      })(this);\n      attrs.$observe(\"open\", function(open) {\n        open = scope.$eval(open);\n        if (open) {\n          return el.addClass('open');\n        } else {\n          return el.removeClass('open');\n        }\n      });\n      taskboard = $('.js-taskboard-manager');\n      if (taskboard.length) {\n        return watchTaskboardHeight(taskboard[0]);\n      }\n    };\n    return {\n      scope: {\n        onChangeQ: \"&\",\n        onAddFilter: \"&\",\n        onSelectCustomFilter: \"&\",\n        onRemoveFilter: \"&\",\n        onRemoveCustomFilter: \"&\",\n        onSaveCustomFilter: \"&\",\n        customFilters: \"<\",\n        filters: \"<\",\n        customFilters: \"<\",\n        selectedFilters: \"<\"\n      },\n      bindToController: true,\n      controller: \"Filter\",\n      controllerAs: \"vm\",\n      templateUrl: 'components/filter/filter.html',\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InputSearchComponent;\n\n  InputSearchComponent = {\n    bindings: {\n      q: '<',\n      change: '&'\n    },\n    template: \"<input\\n    type=\\\"search\\\"\\n    placeholder=\\\"{{'COMMON.FILTERS.INPUT_PLACEHOLDER' | translate}}\\\"\\n    ng-model=\\\"$ctrl.searchText\\\"\\n    ng-change=\\\"$ctrl.onChange($ctrl.searchText)\\\" />\\n<tg-svg svg-icon=\\\"icon-search\\\"></tg-svg>\",\n    controller: function() {\n      this.searchText = '';\n      this.dirty = false;\n      this.$onChanges = function(changes) {\n        if (changes.q && !this.dirty) {\n          return this.searchText = this.q;\n        }\n      };\n      this.onChange = (function(_this) {\n        return function(text) {\n          _this.dirty = true;\n          return _this.change({\n            q: text\n          });\n        };\n      })(this);\n    }\n  };\n\n  angular.module(\"taigaComponents\").component(\"tgInputSearch\", InputSearchComponent);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssuesTableController;\n\n  IssuesTableController = (function() {\n    function IssuesTableController() {}\n\n    IssuesTableController.prototype.edit = function(issue) {\n      return this.onEditIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype.toggleTags = function() {\n      return this.onToggleTags({\n        tags: this.showTags\n      });\n    };\n\n    IssuesTableController.prototype.detach = function(issue) {\n      return this.onDetachIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype[\"delete\"] = function(issue) {\n      return this.onDeleteIssue({\n        id: issue.id\n      });\n    };\n\n    return IssuesTableController;\n\n  })();\n\n  angular.module('taigaComponents').controller('IssuesTable', IssuesTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var issuesTableDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  issuesTableDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.issueOptions = null;\n      scope.displayOptions = function(id) {\n        var timeout;\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.issueOptions = id;\n      };\n      return scope.hideOptions = function() {\n        var timeout;\n        return timeout = $timeout((function() {\n          return scope.issueOptions = null;\n        }), 200);\n      };\n    };\n    return {\n      controller: \"IssuesTable\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"components/issues-table/issues-table.html\",\n      bindToController: {\n        issues: \"<\",\n        showTags: \"=\",\n        onLoadIssues: '&',\n        onAddIssuesInBulk: '&',\n        onAddNewIssue: '&',\n        sprintIssues: '<',\n        onDeleteIssue: '&',\n        onEditIssue: '&',\n        onDetachIssue: '&',\n        onToggleTags: '&'\n      },\n      scope: true,\n      link: link\n    };\n  };\n\n  module.directive('tgIssuesTable', ['$timeout', issuesTableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideDirective, taiga;\n\n  taiga = this.taiga;\n\n  JoyRideDirective = function($rootScope, currentUserService, joyRideService, $location, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var initJoyrRide, intro, unsuscribe;\n      unsuscribe = null;\n      intro = introJs();\n      intro.oncomplete(function() {\n        return $('html,body').scrollTop(0);\n      });\n      intro.onexit(function() {\n        return currentUserService.disableJoyRide();\n      });\n      initJoyrRide = function(next, config) {\n        if (!config[next.joyride]) {\n          return;\n        }\n        intro.setOptions({\n          exitOnEsc: false,\n          exitOnOverlayClick: false,\n          showStepNumbers: false,\n          nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\n          prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\n          skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\n          doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\n          disableInteraction: true\n        });\n        intro.setOption('steps', joyRideService.get(next.joyride));\n        return intro.start();\n      };\n      return $rootScope.$on('$routeChangeSuccess', function(event, next) {\n        if (!next.joyride || !currentUserService.isAuthenticated()) {\n          intro.exit();\n          if (unsuscribe) {\n            unsuscribe();\n          }\n          return;\n        }\n        intro.oncomplete(function() {\n          return currentUserService.disableJoyRide(next.joyride);\n        });\n        if (next.loader) {\n          return unsuscribe = $rootScope.$on('loader:end', function() {\n            currentUserService.loadJoyRideConfig().then(function(config) {\n              return initJoyrRide(next, config);\n            });\n            return unsuscribe();\n          });\n        } else {\n          return currentUserService.loadJoyRideConfig().then(function(config) {\n            return initJoyrRide(next, config);\n          });\n        }\n      });\n    };\n    return {\n      scope: {},\n      link: link\n    };\n  };\n\n  JoyRideDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgJoyRideService\", \"$location\", \"$translate\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JoyRideService = (function(superClass) {\n    extend(JoyRideService, superClass);\n\n    JoyRideService.$inject = ['$translate', 'tgCheckPermissionsService'];\n\n    function JoyRideService(translate, checkPermissionsService) {\n      this.translate = translate;\n      this.checkPermissionsService = checkPermissionsService;\n    }\n\n    JoyRideService.prototype.getConfig = function() {\n      return {\n        dashboard: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.project-list > section:not(.ng-hide)',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\n                }\n              }, {\n                element: '.working-on-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\n                }\n              }, {\n                element: '.watching-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')]\n                }\n              }\n            ];\n            if (!$('.project-list .create-project-button').is(':hidden')) {\n              steps.push({\n                element: '.project-list .create-project-button',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        backlog: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.summary',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'), _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')]\n                }\n              }, {\n                element: '.backlog-table-empty',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\n                }\n              }, {\n                element: '.sprints',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.new-us',\n                position: 'rigth',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        kanban: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.kanban-table-inner',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\n                }\n              }, {\n                element: '.card-placeholder',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.add-action',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this)\n      };\n    };\n\n    JoyRideService.prototype.get = function(name) {\n      var joyRide, joyRides;\n      joyRides = this.getConfig();\n      joyRide = joyRides[name].call(this);\n      return _.map(joyRide, function(item) {\n        var html;\n        html = \"\";\n        if (item.joyride.title) {\n          html += \"<h3>\" + item.joyride.title + \"</h3>\";\n        }\n        if (_.isArray(item.joyride.text)) {\n          _.forEach(item.joyride.text, function(text) {\n            return html += \"<p>\" + text + \"</p>\";\n          });\n        } else {\n          html += \"<p>\" + item.joyride.text + \"</p>\";\n        }\n        item.intro = html;\n        return item;\n      });\n    };\n\n    return JoyRideService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanBoardZoomDirective;\n\n  KanbanBoardZoomDirective = function(storage, projectService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"kanban_zoom\", 1);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\", \"card-data\", \"assigned_to_extended\"], [\"tags\", \"extra_info\", \"unfold\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        if (zoomIndex > 3) {\n          zoomIndex = 3;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"kanban_zoom\")) !== zoomIndex) {\n          storage.set(\"kanban_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n    levels=\\\"levels\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectUserDirective, truncate;\n\n  truncate = taiga.truncate;\n\n  SelectUserDirective = function($rootScope, $repo, $translate, lightboxService, lightboxKeyboardNavigationService, avatarService, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var closeLightbox, confirmSelection, getFilteredUsers, roles, users;\n      users = [];\n      roles = [];\n      lightboxService.open($el);\n      getFilteredUsers = function(text) {\n        var _filterRows, available, collection, selected;\n        if (text == null) {\n          text = \"\";\n        }\n        selected = _.compact(_.sortBy(_.filter(users, function(x) {\n          return _.includes($scope.currentUsers, x.id);\n        }), 'name'));\n        _filterRows = function(text, row) {\n          var name;\n          if (row.type === 'user' && _.find(selected, ['id', row.id])) {\n            return false;\n          }\n          name = row.name.toUpperCase();\n          text = text.toUpperCase();\n          return _.includes(name, text);\n        };\n        collection = _.union(users, _.filter(roles, (function(_this) {\n          return function(role) {\n            var difference;\n            difference = _.difference(role.userIds, _.map(selected, 'id'));\n            return difference.length > 0;\n          };\n        })(this)));\n        available = _.sortBy(_.filter(collection, _.partial(_filterRows, text)), 'name');\n        if (!text) {\n          $scope.selected = selected;\n          return $scope.collection = _.union(selected, available);\n        } else {\n          $scope.selected = [];\n          return $scope.collection = available;\n        }\n      };\n      closeLightbox = function() {\n        lightboxKeyboardNavigationService.stop();\n        return lightboxService.close($el);\n      };\n      $scope.$on(\"watcher:add\", function(ctx, item) {\n        $scope.item = item;\n        getFilteredUsers();\n        return lightboxService.open($el).then(function() {\n          $el.find(\"input\").focus();\n          return lightboxKeyboardNavigationService.init($el);\n        });\n      });\n      $scope.$watch(\"activeUsers\", function(activeUsers) {\n        var project;\n        if (!activeUsers) {\n          return;\n        }\n        users = _.map(activeUsers, function(user) {\n          return {\n            id: user.id,\n            type: 'user',\n            name: user.full_name_display,\n            avatar: avatarService.getAvatar(user)\n          };\n        });\n        if ($scope.single) {\n          return;\n        }\n        project = projectService.project.toJS();\n        return roles = _.map(project.roles, function(role) {\n          var roleUsers, suffix;\n          roleUsers = _.filter(activeUsers, {\n            'role': role.id\n          });\n          suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\");\n          return {\n            id: role.id,\n            type: 'role',\n            name: suffix + \": \" + role.name,\n            avatar: null,\n            userIds: _.map(roleUsers, 'id'),\n            userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\n          };\n        });\n      });\n      $scope.$watch(\"currentUsers\", function(currentUsers) {\n        if (!currentUsers) {\n          return;\n        }\n        return getFilteredUsers();\n      });\n      $scope.$watch(\"searchText\", function(searchingText) {\n        getFilteredUsers(searchingText);\n        return $el.find(\"input\").focus();\n      });\n      $scope.removeItem = function(user, $event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        $event.currentTarget.remove();\n        $scope.searchText = null;\n        _.pull($scope.currentUsers, user.id);\n        return getFilteredUsers();\n      };\n      $scope.addItem = function(item) {\n        if (item.type === 'user') {\n          if ($scope.currentUsers.includes(item.id)) {\n            return;\n          }\n          if ($scope.single) {\n            $scope.currentUsers = [item.id];\n            confirmSelection();\n            return;\n          }\n          $scope.currentUsers.push(item.id);\n        }\n        if (item.type === 'role') {\n          $scope.currentUsers = _.union($scope.currentUsers, item.userIds);\n        }\n        $scope.searchText = null;\n        return getFilteredUsers();\n      };\n      $scope.clearSearch = function() {\n        return $scope.searchText = '';\n      };\n      confirmSelection = function() {\n        $scope.loading = true;\n        $scope.onClose($scope.currentUsers);\n        closeLightbox();\n        return $scope.loading = false;\n      };\n      $el.on(\"click\", \".lb-select-user-confirm\", function(event) {\n        if ($scope.loading) {\n          return;\n        }\n        event.preventDefault();\n        return confirmSelection();\n      });\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        closeLightbox();\n        return $scope.$apply(function() {\n          return $scope.searchText = null;\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      templateUrl: \"components/lb-select-user/lb-select-user.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  SelectUserDirective.$inject = [\"$rootScope\", \"$tgRepo\", \"$translate\", \"lightboxService\", \"lightboxKeyboardNavigationService\", \"tgAvatarService\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementDirective;\n\n  LiveAnnouncementDirective = function(liveAnnouncementService) {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      restrict: \"AE\",\n      scope: {},\n      controllerAs: 'vm',\n      controller: function() {\n        this.close = function() {\n          return liveAnnouncementService.open = false;\n        };\n        return Object.defineProperties(this, {\n          open: {\n            get: function() {\n              return liveAnnouncementService.open;\n            }\n          },\n          title: {\n            get: function() {\n              return liveAnnouncementService.title;\n            }\n          },\n          desc: {\n            get: function() {\n              return liveAnnouncementService.desc;\n            }\n          }\n        });\n      },\n      link: link,\n      templateUrl: \"components/live-announcement/live-announcement.html\"\n    };\n  };\n\n  LiveAnnouncementDirective.$inject = [\"tgLiveAnnouncementService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  LiveAnnouncementService = (function(superClass) {\n    extend(LiveAnnouncementService, superClass);\n\n    function LiveAnnouncementService() {\n      this.open = false;\n      this.title = \"\";\n      this.desc = \"\";\n    }\n\n    LiveAnnouncementService.prototype.show = function(title, desc) {\n      this.open = true;\n      this.title = title;\n      return this.desc = desc;\n    };\n\n    return LiveAnnouncementService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintLightboxController, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  MoveToSprintLightboxController = (function() {\n    MoveToSprintLightboxController.$inject = ['$rootScope', '$scope', '$tgResources', 'tgProjectService', '$translate', 'lightboxService', '$tgConfirm', '$q'];\n\n    function MoveToSprintLightboxController(rootScope, scope, rs, projectService, translate, lightboxService, confirm, q) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.rs = rs;\n      this.projectService = projectService;\n      this.translate = translate;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.q = q;\n      this.projectId = this.projectService.project.get('id');\n      this.loading = false;\n      this.someSelected = false;\n      this.selectedSprintId = null;\n      this.typesSelected = {\n        uss: false,\n        tasks: false,\n        issues: false\n      };\n      this.itemsToMove = {};\n      this._loadSprints();\n      this.scope.$watch(\"vm.openItems\", (function(_this) {\n        return function(openItems) {\n          if (!openItems) {\n            return;\n          }\n          return _this._init(openItems);\n        };\n      })(this));\n    }\n\n    MoveToSprintLightboxController.prototype._init = function(openItems) {\n      var ref, ref1, ref2;\n      this.hasManyItemTypes = _.size(this.openItems) > 1;\n      this.ussCount = parseInt((ref = openItems.uss) != null ? ref.length : void 0);\n      this.updateSelected('uss', this.ussCount > 0);\n      this.tasksCount = parseInt((ref1 = openItems.tasks) != null ? ref1.length : void 0);\n      this.updateSelected('tasks', this.tasksCount > 0);\n      this.issuesCount = parseInt((ref2 = openItems.issues) != null ? ref2.length : void 0);\n      return this.updateSelected('issues', this.issuesCount > 0);\n    };\n\n    MoveToSprintLightboxController.prototype._loadSprints = function() {\n      return this.rs.sprints.list(this.projectId, {\n        closed: false\n      }).then((function(_this) {\n        return function(data) {\n          return _this.sprints = _.filter(data.milestones, function(x) {\n            return x.id !== _this.sprint.id;\n          });\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.updateSelected = function(itemType, value) {\n      this.typesSelected[itemType] = value;\n      this.someSelected = _.some(this.typesSelected);\n      if (value === true) {\n        return this.itemsToMove[itemType] = this.openItems[itemType];\n      } else if (this.itemsToMove[itemType]) {\n        return delete this.itemsToMove[itemType];\n      }\n    };\n\n    MoveToSprintLightboxController.prototype.submit = function() {\n      var itemsNotMoved;\n      itemsNotMoved = {};\n      _.map(this.openItems, (function(_this) {\n        return function(itemsList, itemsType) {\n          if (!_this.itemsToMove[itemsType]) {\n            return itemsNotMoved[itemsType] = true;\n          }\n        };\n      })(this));\n      this.loading = true;\n      return this.moveItems().then((function(_this) {\n        return function() {\n          _this.rootScope.$broadcast(\"taskboard:items:move\", _this.typesSelected);\n          _this.lightboxService.closeAll();\n          _this.loading = false;\n          if (_.size(itemsNotMoved) > 0) {\n            return _this.displayWarning(itemsNotMoved);\n          }\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.moveItems = function() {\n      var promises;\n      promises = [];\n      if (this.itemsToMove.uss) {\n        promises.push(this.rs.sprints.moveUserStoriesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.uss));\n      }\n      if (this.itemsToMove.tasks) {\n        promises.push(this.rs.sprints.moveTasksMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.tasks));\n      }\n      if (this.itemsToMove.issues) {\n        promises.push(this.rs.sprints.moveIssuesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.issues));\n      }\n      return this.q.all(promises);\n    };\n\n    MoveToSprintLightboxController.prototype.displayWarning = function(itemsNotMoved) {\n      var action, desc, ref, title, totalItemsMoved;\n      action = this.translate.instant('COMMON.I_GET_IT');\n      if (_.size(itemsNotMoved) === 1 && itemsNotMoved.issues === true) {\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED');\n      } else {\n        totalItemsMoved = 0;\n        _.map(this.itemsToMove, function(itemsList, itemsType) {\n          return totalItemsMoved += itemsList.length;\n        });\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE', {\n          total: totalItemsMoved\n        }, 'messageformat');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN', {\n          sprintName: (ref = this.sprint) != null ? ref.name : void 0\n        });\n      }\n      return this.confirm.success(title, desc, null, action);\n    };\n\n    return MoveToSprintLightboxController;\n\n  })();\n\n  module.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintLightboxDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintLightboxDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        openItems: \"=\",\n        sprint: \"=\"\n      },\n      templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\",\n      controller: \"MoveToSprintLbCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  moveToSprintLightboxDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintController, taiga;\n\n  taiga = this.taiga;\n\n  MoveToSprintController = (function() {\n    MoveToSprintController.$inject = ['$scope', 'tgLightboxFactory', 'tgProjectService'];\n\n    function MoveToSprintController(scope, lightboxFactory, projectService) {\n      this.scope = scope;\n      this.lightboxFactory = lightboxFactory;\n      this.projectService = projectService;\n      this.permissions = this.projectService.project.get('my_permissions');\n      this.hasOpenItems = false;\n      this.disabled = false;\n      this.openItems = {\n        uss: [],\n        tasks: [],\n        issues: []\n      };\n      this.scope.$watch(\"vm.uss\", (function(_this) {\n        return function() {\n          return _this.getOpenUss();\n        };\n      })(this));\n      this.scope.$watch(\"vm.unnasignedTasks\", (function(_this) {\n        return function() {\n          return _this.getOpenStorylessTasks();\n        };\n      })(this));\n      this.scope.$watch(\"vm.issues\", (function(_this) {\n        return function() {\n          return _this.getOpenIssues();\n        };\n      })(this));\n    }\n\n    MoveToSprintController.prototype.checkOpenItems = function() {\n      return _.some(Object.keys(this.openItems), (function(_this) {\n        return function(x) {\n          return _this.openItems[x].length > 0;\n        };\n      })(this));\n    };\n\n    MoveToSprintController.prototype.openLightbox = function() {\n      var openItems;\n      if (this.disabled === !true && this.hasOpenItems) {\n        openItems = {};\n        _.map(this.openItems, function(itemsList, itemsType) {\n          if (itemsList.length) {\n            return openItems[itemsType] = itemsList;\n          }\n        });\n        return this.lightboxFactory.create('tg-lb-move-to-sprint', {\n          \"class\": \"lightbox lightbox-move-to-sprint\",\n          \"sprint\": \"sprint\",\n          \"open-items\": \"openItems\"\n        }, {\n          sprint: this.sprint,\n          openItems: openItems\n        });\n      }\n    };\n\n    MoveToSprintController.prototype.getOpenUss = function() {\n      if (!this.uss || this.permissions.indexOf(\"modify_us\") === -1) {\n        return;\n      }\n      this.openItems.uss = [];\n      this.uss.map((function(_this) {\n        return function(us) {\n          if (us.is_closed === false) {\n            return _this.openItems.uss.push({\n              us_id: us.id,\n              order: us.sprint_order\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenStorylessTasks = function() {\n      if (!this.unnasignedTasks || this.permissions.indexOf(\"modify_task\") === -1) {\n        return;\n      }\n      this.openItems.tasks = [];\n      this.unnasignedTasks.map((function(_this) {\n        return function(column) {\n          return column.map(function(taskId) {\n            var task;\n            task = _this.taskMap.get(taskId);\n            if (task.get('model').get('is_closed') === false) {\n              return _this.openItems.tasks.push({\n                task_id: task.get('model').get('id'),\n                order: task.get('model').get('taskboard_order')\n              });\n            }\n          });\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenIssues = function() {\n      if (!this.issues || this.permissions.indexOf(\"modify_issue\") === -1) {\n        return;\n      }\n      this.openItems.issues = [];\n      this.issues.map((function(_this) {\n        return function(issue) {\n          if (issue.get('status').get('is_closed') === false) {\n            return _this.openItems.issues.push({\n              issue_id: issue.get('id')\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    return MoveToSprintController;\n\n  })();\n\n  angular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintDirective = function(taskboardTasksService) {\n    return {\n      controller: \"MoveToSprintCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: 'components/move-to-sprint/move-to-sprint.html',\n      scope: {\n        sprint: '=',\n        uss: '=',\n        unnasignedTasks: '=',\n        issues: '=',\n        disabled: '=',\n        taskMap: '='\n      }\n    };\n  };\n\n  moveToSprintDirective.$inject = ['tgTaskboardTasks'];\n\n  module.directive('tgMoveToSprint', [moveToSprintDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoBigSrcDirective;\n\n  ProjectLogoBigSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_big_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoBigSrc\"\n      }\n    };\n  };\n\n  ProjectLogoBigSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoSmallSrcDirective;\n\n  ProjectLogoSmallSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_small_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoSmallSrc\"\n      }\n    };\n  };\n\n  ProjectLogoSmallSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuController;\n\n  ProjectMenuController = (function() {\n    ProjectMenuController.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n    function ProjectMenuController(projectService, lightboxFactory) {\n      this.projectService = projectService;\n      this.lightboxFactory = lightboxFactory;\n      this.project = null;\n      this.menu = Immutable.Map();\n    }\n\n    ProjectMenuController.prototype.show = function() {\n      var ref;\n      this.project = this.projectService.project;\n      this.sprints = (ref = this.project.get('milestones')) != null ? ref.toJS() : void 0;\n      this.active = this._getActiveSection();\n      this.projectMenu = {\n        component: 'tg-project-navigation',\n        params: {\n          project: this.projectService.project.toJS()\n        },\n        events: {\n          search: (function(_this) {\n            return function() {\n              return _this.search();\n            };\n          })(this)\n        }\n      };\n      this._setVideoConference();\n      return this._setMenuPermissions();\n    };\n\n    ProjectMenuController.prototype.hide = function() {\n      this.project = null;\n      return this.menu = {};\n    };\n\n    ProjectMenuController.prototype.search = function() {\n      return this.lightboxFactory.create(\"tg-search-box\", {\n        \"class\": \"lightbox lightbox-search\"\n      });\n    };\n\n    ProjectMenuController.prototype._setVideoConference = function() {\n      var videoconferenceUrl;\n      videoconferenceUrl = this._videoConferenceUrl();\n      if (videoconferenceUrl) {\n        return this.project = this.project.set(\"videoconferenceUrl\", videoconferenceUrl);\n      }\n    };\n\n    ProjectMenuController.prototype._setMenuPermissions = function() {\n      this.menu = Immutable.Map({\n        epics: false,\n        backlog: false,\n        kanban: false,\n        issues: false,\n        wiki: false\n      });\n      if (this.project.get(\"is_epics_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_epics\") !== -1) {\n        this.menu = this.menu.set(\"epics\", true);\n      }\n      if (this.project.get(\"is_backlog_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"backlog\", true);\n      }\n      if (this.project.get(\"is_kanban_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"kanban\", true);\n      }\n      if (this.project.get(\"is_issues_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_issues\") !== -1) {\n        this.menu = this.menu.set(\"issues\", true);\n      }\n      if (this.project.get(\"is_wiki_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") !== -1) {\n        return this.menu = this.menu.set(\"wiki\", true);\n      }\n    };\n\n    ProjectMenuController.prototype._getActiveSection = function() {\n      var indexBacklog, indexKanban, oldSectionName, sectionName, sectionsBreadcrumb;\n      sectionName = this.projectService.section;\n      sectionsBreadcrumb = this.projectService.sectionsBreadcrumb;\n      indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\");\n      indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\");\n      if (indexBacklog !== -1 || indexKanban !== -1) {\n        if (indexKanban === -1 || indexBacklog > indexKanban) {\n          oldSectionName = \"backlog\";\n        } else {\n          oldSectionName = \"kanban\";\n        }\n      }\n      if (sectionName === \"backlog-kanban\") {\n        if (oldSectionName === \"backlog\" || oldSectionName === \"kanban\") {\n          sectionName = oldSectionName;\n        } else if (this.project.get(\"is_backlog_activated\") && !this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"backlog\";\n        } else if (!this.project.get(\"is_backlog_activated\") && this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"kanban\";\n        }\n      }\n      return sectionName;\n    };\n\n    ProjectMenuController.prototype._videoConferenceUrl = function() {\n      var baseUrl, url;\n      if (this.project.get(\"videoconferences\") === \"whereby-com\") {\n        baseUrl = \"https://whereby.com/\";\n      } else if (this.project.get(\"videoconferences\") === \"talky\") {\n        baseUrl = \"https://talky.io/\";\n      } else if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        baseUrl = \"https://meet.jit.si/\";\n      } else if (this.project.get(\"videoconferences\") === \"custom\") {\n        return this.project.get(\"videoconferences_extra_data\");\n      } else {\n        return \"\";\n      }\n      if (this.project.get(\"videoconferences_extra_data\")) {\n        url = this.project.get(\"slug\") + \"-\" + taiga.slugify(this.project.get(\"videoconferences_extra_data\"));\n      } else {\n        url = this.project.get(\"slug\");\n      }\n      if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        url = url.replace(/-/g, \"\");\n      }\n      return baseUrl + url;\n    };\n\n    return ProjectMenuController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuDirective, taiga;\n\n  taiga = this.taiga;\n\n  ProjectMenuDirective = function(projectService, lightboxFactory) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var fixed, projectChange, topBarHeight;\n      projectChange = function() {\n        if (projectService.project) {\n          return ctrl.show();\n        } else {\n          return ctrl.hide();\n        }\n      };\n      scope.$watch((function() {\n        return projectService.project;\n      }), projectChange);\n      fixed = false;\n      topBarHeight = 48;\n      return window.addEventListener(\"scroll\", function() {\n        var position;\n        position = $(window).scrollTop();\n        if (position > topBarHeight && fixed === false) {\n          el.find('.sticky-project-menu').addClass('unblock');\n          return fixed = true;\n        } else if (position === 0 && fixed === true) {\n          el.find('.sticky-project-menu').removeClass('unblock');\n          return fixed = false;\n        }\n      });\n    };\n    return {\n      scope: {},\n      controller: \"ProjectMenu\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/project-menu/project-menu.html\",\n      link: link\n    };\n  };\n\n  ProjectMenuDirective.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PromoteToUsButtonDirective;\n\n  PromoteToUsButtonDirective = function($rootScope, $rs, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var itemType, save;\n      itemType = null;\n      save = function(item, askResponse) {\n        var data, onError, onSuccess;\n        data = {\n          project: item.project\n        };\n        onSuccess = function(response) {\n          askResponse.finish();\n          $confirm.notify(\"success\");\n          return $rootScope.$broadcast(\"promote-\" + itemType + \"-to-us:success\", response.data[0]);\n        };\n        onError = function() {\n          askResponse.finish();\n          return $confirm.notify(\"error\");\n        };\n        return $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".promote-button\", function(event) {\n        var ctx, item, message, subtitle, title;\n        event.preventDefault();\n        item = $model.$modelValue;\n        itemType = _.get({\n          tasks: 'task',\n          issues: 'issue'\n        }, item._name);\n        ctx = \"COMMON.CONFIRM_PROMOTE.\" + (itemType.toUpperCase());\n        title = $translate.instant(ctx + \".TITLE\");\n        message = $translate.instant(ctx + \".MESSAGE\");\n        subtitle = item.subject;\n        return $confirm.ask(title, subtitle, message).then(function(response) {\n          return save(item, response);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      require: \"ngModel\",\n      templateUrl: \"components/promote-to-us/promote-to-us.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\", [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var groupBy, module, normalizeString, searchListDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  normalizeString = this.taiga.normalizeString;\n\n  groupBy = this.taiga.groupBy;\n\n  searchListDirective = function($translate) {\n    var link;\n    link = function(scope, el, attrs, model) {\n      var avaliableItems, filtering, isContainedIn, itemsById, parseString, resetAll, resetSelected;\n      scope.templateUrl = \"components/search-list/search-list-\" + scope.itemType + \"-choice.html\";\n      scope.currentSelected = null;\n      filtering = false;\n      avaliableItems = [];\n      itemsById = {};\n      if (scope.itemType === 'issue') {\n        scope.milestonesById = groupBy(scope.project.milestones, function(e) {\n          return e.id;\n        });\n      }\n      if (scope.filterClosed) {\n        scope.showClosed = false;\n        if (scope.itemType === 'sprint') {\n          scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\");\n          scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\");\n        }\n      }\n      el.on(\"click\", \".choice\", function(event) {\n        var choiceId, ref, value;\n        choiceId = parseInt($(event.currentTarget).data(\"choice-id\"));\n        value = ((ref = attrs.ngModel) != null ? ref.id : void 0) !== choiceId ? itemsById[choiceId] : null;\n        model.$setViewValue(value);\n        scope.currentSelected = value;\n        return scope.$apply();\n      });\n      isContainedIn = function(needle, haystack) {\n        return _.includes(parseString(haystack), parseString(needle));\n      };\n      parseString = function(value) {\n        if (typeof value !== 'string') {\n          value = value.toString();\n        }\n        return normalizeString(value.toUpperCase());\n      };\n      resetSelected = function() {\n        scope.currentSelected = null;\n        return model.$setViewValue(null);\n      };\n      resetAll = function() {\n        resetSelected();\n        scope.searchText = '';\n        avaliableItems = angular.copy(scope.items);\n        return itemsById = groupBy(avaliableItems, function(x) {\n          return x.id;\n        });\n      };\n      scope.isVisible = function(item) {\n        var ref;\n        if (!scope.filterClosed || scope.showClosed) {\n          return true;\n        }\n        if (scope.itemType === 'sprint' && (item.closed || item.is_closed)) {\n          if (((ref = scope.currentSelected) != null ? ref.id : void 0) === item.id) {\n            resetSelected();\n          }\n          return false;\n        }\n        return true;\n      };\n      scope.toggleShowClosed = function(item) {\n        return scope.showClosed = !scope.showClosed;\n      };\n      scope.filterItems = function(searchText) {\n        scope.filtering = true;\n        scope.items = _.filter(avaliableItems, function(item) {\n          var itemAttrs;\n          itemAttrs = item.getAttrs();\n          if (Array.isArray(scope.filterBy)) {\n            return _.some(scope.filterBy, function(attr) {\n              return isContainedIn(searchText, itemAttrs[attr]);\n            });\n          } else {\n            return isContainedIn(searchText, itemAttrs[scope.filterBy]);\n          }\n        });\n        if (!_.find(scope.items, scope.currentSelected)) {\n          return resetSelected();\n        }\n      };\n      return scope.$watch('items', function(items) {\n        if (!scope.filtering && items) {\n          return resetAll();\n        }\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/search-list/search-list.html\",\n      require: \"ngModel\",\n      scope: {\n        label: '@',\n        placeholder: '@',\n        project: '=',\n        filterBy: '=',\n        items: '=',\n        itemType: '@',\n        filterClosed: '=',\n        itemDisabled: '='\n      }\n    };\n  };\n\n  module.directive('tgSearchList', ['$translate', searchListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SwimlaneSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  SwimlaneSelector = function($timeout, $translate) {\n    var link;\n    link = function(scope, el, attrs) {\n      var getCurrentSwimlane, getSelectedSwimlane, mount;\n      scope.displaySelector = false;\n      scope.selectedSwimlane = null;\n      timeout = null;\n      mount = function() {\n        return getCurrentSwimlane();\n      };\n      getCurrentSwimlane = function() {\n        var filteredSwimlanes;\n        if (scope.userStory.id) {\n          if (scope.userStory.swimlane) {\n            filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n              return swimlane.id === scope.userStory.swimlane;\n            });\n            scope.currentSwimlane = filteredSwimlanes.get(0);\n          } else {\n            scope.currentSwimlane = null;\n          }\n        } else {\n          filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n            return swimlane.id === scope.defaultSwimlaneId;\n          });\n          scope.currentSwimlane = filteredSwimlanes.get(0);\n        }\n        return getSelectedSwimlane();\n      };\n      getSelectedSwimlane = function() {\n        if (scope.userStory.id) {\n          if (scope.currentSwimlane) {\n            return scope.selectedSwimlane = scope.currentSwimlane.id;\n          } else {\n            return scope.selectedSwimlane = null;\n          }\n        } else {\n          return scope.selectedSwimlane = scope.currentSwimlane.id;\n        }\n      };\n      scope.displayOptions = function() {\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.displaySelector = true;\n      };\n      scope.hideOptions = function() {\n        return timeout = $timeout((function() {\n          return scope.displaySelector = false;\n        }), 100);\n      };\n      scope.selectSwimlane = function(swimlane) {\n        if (swimlane === 'noSwimlane') {\n          swimlane = {\n            id: null,\n            kanban_order: 1,\n            name: $translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n          };\n          scope.ngModel = swimlane.id;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        } else {\n          scope.ngModel = swimlane.id !== -1 ? swimlane.id : null;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        }\n        return getSelectedSwimlane();\n      };\n      scope.$watch('userStory', function(userStory) {\n        return getCurrentSwimlane();\n      });\n      return mount();\n    };\n    return {\n      link: link,\n      templateUrl: \"components/swimlane-selector/swimlane-selector.html\",\n      scope: {\n        swimlanes: '<',\n        defaultSwimlaneId: '<',\n        userStory: '<',\n        hasUnclassifiedStories: '<',\n        ngModel: '='\n      },\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgSwimlaneSelector\", ['$timeout', \"$translate\", SwimlaneSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagOptionDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagOptionDirective = function() {\n    var dispatch, link, select, stop;\n    select = function(selected) {\n      var containerHeight, diff, selectedPosition;\n      selected.addClass('selected');\n      selectedPosition = selected.position().top + selected.outerHeight();\n      containerHeight = selected.parent().outerHeight();\n      if (selectedPosition > containerHeight) {\n        diff = selectedPosition - containerHeight;\n        return selected.parent().scrollTop(selected.parent().scrollTop() + diff);\n      } else if (selected.position().top < 0) {\n        return selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top);\n      }\n    };\n    dispatch = function(el, code, scope) {\n      var activeElement, next, prev;\n      activeElement = el.find(\".selected\");\n      if (code === 40) {\n        if (!activeElement.length) {\n          return select(el.find('li:first'));\n        } else {\n          next = activeElement.next('li');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return select(next);\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return select(el.find('li:last'));\n        } else {\n          prev = activeElement.prev('li');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return select(prev);\n          }\n        }\n      }\n    };\n    stop = function() {\n      return $(document).off(\".tags-keyboard-navigation\");\n    };\n    link = function(scope, el) {\n      stop();\n      $(el).parent().on(\"keydown.tags-keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38) {\n            event.preventDefault();\n            return dispatch(el, code, scope);\n          }\n        };\n      })(this));\n      return scope.$on(\"$destroy\", stop);\n    };\n    return {\n      link: link,\n      templateUrl: \"components/tags/tag-dropdown/tag-dropdown.html\",\n      scope: {\n        onSelectTag: \"&\",\n        colorArray: \"=\",\n        tag: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgTagsDropdown\", TagOptionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonController = (function() {\n    TagLineCommonController.$inject = [\"tgTagLineService\"];\n\n    function TagLineCommonController(tagLineService) {\n      this.tagLineService = tagLineService;\n      this.disableColorSelection = false;\n      this.newTag = {\n        name: \"\",\n        color: null\n      };\n      this.colorArray = [];\n      this.addTag = false;\n    }\n\n    TagLineCommonController.prototype.checkPermissions = function() {\n      var hasPermissions;\n      hasPermissions = this.tagLineService.checkPermissions(this.project.my_permissions, this.permissions);\n      return hasPermissions;\n    };\n\n    TagLineCommonController.prototype._createColorsArray = function(projectTagColors) {\n      return this.colorArray = this.tagLineService.createColorsArray(projectTagColors);\n    };\n\n    TagLineCommonController.prototype.displayTagInput = function() {\n      return this.addTag = true;\n    };\n\n    TagLineCommonController.prototype.addNewTag = function(name, color) {\n      this.newTag.name = \"\";\n      this.newTag.color = null;\n      if (!name.length) {\n        return;\n      }\n      if (this.disableColorSelection) {\n        if (name.length) {\n          return this.onAddTag({\n            name: name,\n            color: color\n          });\n        }\n      } else {\n        if (this.project.tags_colors[name]) {\n          color = this.project.tags_colors[name];\n        }\n        return this.onAddTag({\n          name: name,\n          color: color\n        });\n      }\n    };\n\n    TagLineCommonController.prototype.selectColor = function(color) {\n      return this.newTag.color = color;\n    };\n\n    return TagLineCommonController;\n\n  })();\n\n  module.controller(\"TagLineCommonCtrl\", TagLineCommonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      var unwatch;\n      if (!_.isUndefined(attr.disableColorSelection)) {\n        ctrl.disableColorSelection = true;\n      }\n      unwatch = scope.$watch(\"vm.project\", function(project) {\n        if (!project || !Object.keys(project).length) {\n          return;\n        }\n        unwatch();\n        if (!ctrl.disableColorSelection) {\n          return ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors);\n        }\n      });\n      return el.on(\"keydown\", \".tag-input\", function(event) {\n        var tagName;\n        if (event.keyCode === 27) {\n          ctrl.addTag = false;\n          ctrl.newTag.name = \"\";\n          ctrl.newTag.color = \"\";\n          event.stopPropagation();\n        } else if (event.keyCode === 13) {\n          event.preventDefault();\n          if (el.find('.tags-dropdown .selected').length) {\n            tagName = $('.tags-dropdown .selected .tags-dropdown-name').text();\n            ctrl.addNewTag(tagName, null);\n          } else {\n            ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color);\n          }\n        }\n        return scope.$apply();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        permissions: \"@\",\n        loadingAddTag: \"=\",\n        loadingRemoveTag: \"=\",\n        tags: \"=\",\n        project: \"=\",\n        onAddTag: \"&\",\n        onDeleteTag: \"&\"\n      },\n      templateUrl: \"components/tags/tag-line-common/tag-line-common.html\",\n      controller: \"TagLineCommonCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLineCommon\", TagLineCommonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineController = (function() {\n    TagLineController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\"];\n\n    function TagLineController(rootScope, confirm, modelTransform) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.loadingAddTag = false;\n    }\n\n    TagLineController.prototype.onDeleteTag = function(tag) {\n      var onDeleteTagError, onDeleteTagSuccess, tagName, transform;\n      this.loadingRemoveTag = tag[0];\n      onDeleteTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.loadingRemoveTag = false;\n          return item;\n        };\n      })(this);\n      onDeleteTagError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.loadingRemoveTag = false;\n        };\n      })(this);\n      tagName = trim(tag[0].toLowerCase());\n      transform = this.modelTransform.save(function(item) {\n        var itemtags;\n        itemtags = _.clone(item.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === tagName;\n        });\n        item.tags = itemtags;\n        return item;\n      });\n      return transform.then(onDeleteTagSuccess, onDeleteTagError);\n    };\n\n    TagLineController.prototype.onAddTag = function(tag, color) {\n      var onAddTagError, onAddTagSuccess, transform;\n      this.loadingAddTag = true;\n      onAddTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.rootScope.$broadcast(\"tags:updated\");\n          _this.addTag = false;\n          _this.loadingAddTag = false;\n          return item;\n        };\n      })(this);\n      onAddTagError = (function(_this) {\n        return function() {\n          _this.loadingAddTag = false;\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      transform = this.modelTransform.save((function(_this) {\n        return function(item) {\n          var itemtags, value;\n          value = trim(tag.toLowerCase());\n          itemtags = _.clone(item.tags);\n          itemtags.push([tag, color]);\n          item.tags = itemtags;\n          return item;\n        };\n      })(this));\n      return transform.then(onAddTagSuccess, onAddTagError);\n    };\n\n    return TagLineController;\n\n  })();\n\n  module.controller(\"TagLineCtrl\", TagLineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineDirective = function() {\n    return {\n      scope: {\n        item: \"=\",\n        permissions: \"@\",\n        project: \"=\"\n      },\n      templateUrl: \"components/tags/tag-line-detail/tag-line-detail.html\",\n      controller: \"TagLineCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLine\", TagLineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module('taigaCommon');\n\n  TagLineService = (function(superClass) {\n    extend(TagLineService, superClass);\n\n    TagLineService.$inject = [];\n\n    function TagLineService() {}\n\n    TagLineService.prototype.checkPermissions = function(myPermissions, projectPermissions) {\n      return _.includes(myPermissions, projectPermissions);\n    };\n\n    TagLineService.prototype.createColorsArray = function(projectTagColors) {\n      return _.map(projectTagColors, function(index, value) {\n        return [value, index];\n      });\n    };\n\n    return TagLineService;\n\n  })(taiga.Service);\n\n  module.service(\"tgTagLineService\", TagLineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagDirective = function() {\n    return {\n      templateUrl: \"components/tags/tag/tag.html\",\n      scope: {\n        tag: \"<\",\n        loadingRemoveTag: \"<\",\n        onDeleteTag: \"&\",\n        hasPermissions: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgTag\", TagDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardZoomDirective;\n\n  TaskboardZoomDirective = function(storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"taskboard_zoom\", 2);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\"], [\"tags\", \"extra_info\", \"unfold\", \"card-data\", \"assigned_to_extended\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"taskboard_zoom\")) !== zoomIndex) {\n          storage.set(\"taskboard_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    levels=\\\"levels\\\"\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TasksSortableDirective;\n\n  TasksSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_task\")) {\n        return;\n      }\n      callback = $parse(attrs.tgTasksSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.single-related-task.js-related-task');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, task;\n        itemEl = $(item);\n        task = itemEl.scope().task;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            task: task,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  TasksSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TermsOfServiceAndPrivacyPolicyNoticeDirective;\n\n  TermsOfServiceAndPrivacyPolicyNoticeDirective = function($config) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\");\n      scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\");\n      scope.target = false;\n      if (!scope.privacyPolicyUrl || !scope.termsOfServiceUrl) {\n        scope.target = true;\n      }\n      return el.on(\"change\", \"input[name='accepted_terms']\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        scope.target = target.is(\":checked\");\n        return scope.$apply();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      link: link,\n      scope: {\n        target: \"=\"\n      },\n      templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\"$tgConfig\", TermsOfServiceAndPrivacyPolicyNoticeDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToDirective;\n\n  AssignedToDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, isEditable, isIocaine, isSelfAssigned, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      isIocaine = function(item) {\n        return item != null ? item.is_iocaine : void 0;\n      };\n      isSelfAssigned = function() {\n        return $scope.assignedUser && $scope.assignedUser.id === currentUserId;\n      };\n      save = function(userId) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_to = userId;\n          return item;\n        });\n        transform.then(function(item) {\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n        return transform;\n      };\n      render = function(item) {\n        $scope.assignedUser = $scope.usersById[item != null ? item.assigned_to : void 0];\n        $scope.isEditable = isEditable();\n        $scope.isIocaine = isIocaine(item);\n        return $scope.isSelfAssigned = isSelfAssigned();\n      };\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\");\n        return $confirm.ask(title).then(function(response) {\n          response.finish();\n          return save(null);\n        });\n      });\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers.pop() || null);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [item.assigned_to],\n          \"activeUsers\": this.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $scope.selfAssign = function() {\n        return save(currentUserId);\n      };\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/ticket-assigned/assigned-to.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, deleteAssignedUser, isEditable, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      $scope.visibleAssignedUsersCount = 4;\n      $scope.displayHidden = false;\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      save = function(assignedUsersIds, assignedToUser) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_users = assignedUsersIds;\n          if (assignedToUser) {\n            item.assigned_to = assignedToUser;\n          } else if (!assignedUsersIds.length) {\n            item.assigned_to = null;\n          } else if (!_.includes(assignedUsersIds, item.assigned_to)) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          return item;\n        });\n        transform.then(function() {\n          var result;\n          return result = $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": item.assigned_users,\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.openAssignedUsers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var assignedUserId, message, target, title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        assignedUserId = target.data(\"user-id\");\n        title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\");\n        message = $scope.usersById[assignedUserId].full_name_display;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var assignedUserIds;\n          askResponse.finish();\n          assignedUserIds = _.clone($model.$modelValue.assigned_users, false);\n          assignedUserIds = _.pull(assignedUserIds, assignedUserId);\n          return deleteAssignedUser(assignedUserIds);\n        });\n      });\n      $scope.selfAssign = function() {\n        var assignedUsers;\n        if (!isEditable()) {\n          return;\n        }\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(currentUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, currentUserId);\n      };\n      deleteAssignedUser = function(assignedUserIds) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          var ref1;\n          item.assigned_users = assignedUserIds;\n          if ((ref1 = item.assigned_to, indexOf.call(assignedUserIds, ref1) < 0) && assignedUserIds.length > 0) {\n            item.assigned_to = assignedUserIds[0];\n          }\n          if (assignedUserIds.length === 0) {\n            item.assigned_to = null;\n          }\n          return item;\n        });\n        transform.then(function() {\n          var item;\n          item = $modelTransform.getObj();\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          item.revert();\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      render = function(assignedUserIds) {\n        var assignedUsers;\n        assignedUsers = _.map(assignedUserIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        $scope.assignedUsers = _.compact(assignedUsers);\n        $scope.selfAssigned = _.includes(assignedUserIds, currentUserId);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.$on(\"assigned-user:deleted\", function(ctx, assignedUserId) {\n        var assignedUsersIds;\n        assignedUsersIds = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsersIds = _.pull(assignedUsersIds, assignedUserId);\n        assignedUsersIds = _.uniq(assignedUsersIds);\n        return deleteAssignedUser(assignedUsersIds);\n      });\n      $scope.$on(\"assigned-user:added\", function(ctx, assignedUserId) {\n        var assignedUsers;\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(assignedUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, assignedUserId);\n      });\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item.assigned_users);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      templateUrl: \"components/ticket-assigned/assigned-users.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TicketWatchersController;\n\n  TicketWatchersController = (function() {\n    TicketWatchersController.$inject = [\"tgCurrentUserService\", \"$rootScope\", \"tgLightboxFactory\", \"$translate\", \"$tgQueueModelTransformation\"];\n\n    function TicketWatchersController(currentUserService, rootScope, lightboxFactory, translate, modelTransform) {\n      this.currentUserService = currentUserService;\n      this.rootScope = rootScope;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    TicketWatchersController.prototype.openWatchers = function() {\n      var onClose;\n      onClose = (function(_this) {\n        return function(watchersIds) {\n          return _this.save(watchersIds);\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": this.item.watchers,\n        \"activeUsers\": this.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.WATCHERS.ADD\")\n      });\n    };\n\n    TicketWatchersController.prototype.getPerms = function() {\n      var name, perms;\n      if (!this.item) {\n        return \"\";\n      }\n      name = this.item._name;\n      perms = {\n        userstories: 'modify_us',\n        issues: 'modify_issue',\n        tasks: 'modify_task',\n        epics: 'modify_epic'\n      };\n      return perms[name];\n    };\n\n    TicketWatchersController.prototype.watch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._watch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.unwatch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._unwatch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.deleteWatcher = function(watcherId) {\n      var watchersIds;\n      watchersIds = _.filter(this.item.watchers, (function(_this) {\n        return function(x) {\n          return x !== watcherId;\n        };\n      })(this));\n      return this.save(watchersIds);\n    };\n\n    TicketWatchersController.prototype.save = function(watchersIds) {\n      var transform;\n      this.loading = true;\n      transform = this.modelTransform.save(function(item) {\n        item.watchers = watchersIds;\n        return item;\n      });\n      transform.then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return transform[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    TicketWatchersController.prototype._watch = function() {\n      return this.onWatch();\n    };\n\n    TicketWatchersController.prototype._unwatch = function() {\n      return this.onUnwatch();\n    };\n\n    return TicketWatchersController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchersDirective;\n\n  WatchersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var isEditable, render;\n      $scope.visibleWatchersCount = 4;\n      $scope.displayHidden = false;\n      $scope.isAuthenticated = !!$currentUserService.getUser();\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      render = function() {\n        var ref, watchers, watchersIds;\n        watchersIds = _.clone((ref = $scope.vm.item) != null ? ref.watchers : void 0, false);\n        watchers = _.map(watchersIds, function(watcherId) {\n          return $scope.usersById[watcherId];\n        });\n        watchers = _.filter(watchers, function(it) {\n          return !!it;\n        });\n        $scope.vm.watchers = _.compact(watchers);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.vm.openWatchers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var message, target, title, watcherId;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        watcherId = target.data(\"watcher-id\");\n        title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\");\n        message = $scope.usersById[watcherId].full_name_display;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            askResponse.finish();\n            return $scope.vm.deleteWatcher(watcherId);\n          };\n        })(this));\n      });\n      $scope.$on(\"watcher:added\", function(ctx, watcherId) {\n        var watchersIds;\n        watchersIds = _.clone($scope.item.watchers, false);\n        watchersIds.push(watcherId);\n        watchersIds = _.uniq(watchers);\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$on(\"watchers:selected\", function(ctx, watchersIds) {\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$watch(\"vm.item\", function(item) {\n        if (!item) {\n          return;\n        }\n        return render();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      controller: \"TicketWatchersController\",\n      bindToController: {\n        item: \"=\",\n        onWatch: \"=\",\n        onUnwatch: \"=\",\n        activeUsers: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\n      link: link\n    };\n  };\n\n  WatchersDirective.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, timeout, tipsDirective;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaComponents\");\n\n  tipsDirective = function(tgLoader, $translate) {\n    var link, randomInt, tips;\n    tips = [\n      {\n        contentType: \"icon\",\n        icon: \"icon-project\",\n        message: \"PROJECTS_ORDER\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-upvote\",\n        message: \"VOTING\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-attach\",\n        message: \"ISSUES_TO_SPRINT\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-clock\",\n        message: \"DUE_DATE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-iocaine\",\n        message: \"IOCAIN\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-blocked-project\",\n        message: \"BLOCKED\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-promote\",\n        message: \"PROMOTE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-bulk\",\n        message: \"BULK\"\n      }, {\n        contentType: \"range\",\n        message: \"ZOOM\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-settings\",\n        message: \"CUSTOM_FIELDS\"\n      }, {\n        contentType: \"arrows\",\n        message: \"SLIDE_ARROWS\"\n      }\n    ];\n    randomInt = function(size) {\n      return Math.floor(Math.random() * size) + 1;\n    };\n    link = function(scope, el, attrs) {\n      var loadTip, waitingTimeout;\n      scope.tipLoaded = false;\n      waitingTimeout = null;\n      tgLoader.onStart(function() {\n        return waitingTimeout = timeout(1000, function() {\n          return loadTip();\n        });\n      });\n      tgLoader.onEnd(function() {\n        clearTimeout(waitingTimeout);\n        return scope.tipLoaded = false;\n      });\n      return loadTip = function() {\n        var tip;\n        scope.tipLoaded = true;\n        tip = tips[randomInt(tips.length - 1)];\n        return scope.tip = {\n          contentType: tip.contentType,\n          message: \"TIPS.TIP_\" + tip.message,\n          icon: tip.icon,\n          color: \"tip-color-\" + (randomInt(5))\n        };\n      };\n    };\n    return {\n      link: link,\n      scope: true,\n      templateUrl: \"components/tips/tip.html\"\n    };\n  };\n\n  module.directive('tgTips', ['tgLoader', '$translate', tipsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeButtonDirective;\n\n  TribeButtonDirective = function(configService, locationService) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.url = (locationService.protocol()) + \"://\" + (locationService.host());\n      if (locationService.protocol() === \"http\" && locationService.port() !== 80) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      } else if (locationService.protocol() === \"https\" && locationService.port() !== 443) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      }\n    };\n    return {\n      scope: {\n        usId: \"=\",\n        projectSlug: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/tribe-button/tribe-button.html\",\n      link: link\n    };\n  };\n\n  TribeButtonDirective.$inject = [\"$tgConfig\", \"$tgLocation\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeLinkedDirective;\n\n  TribeLinkedDirective = function(configService) {\n    var directive, link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.show = function() {\n        return scope.vm.open = true;\n      };\n      return scope.vm.hide = function(event) {\n        return scope.vm.open = false;\n      };\n    };\n    directive = {\n      templateUrl: \"components/tribe-button/tribe-linked.html\",\n      scope: {\n        gigTitle: \"=\",\n        gigId: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  TribeLinkedDirective.$inject = [\"$tgConfig\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonController;\n\n  VoteButtonController = (function() {\n    VoteButtonController.$inject = [\"tgCurrentUserService\"];\n\n    function VoteButtonController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    VoteButtonController.prototype.toggleVote = function() {\n      var promise;\n      this.loading = true;\n      if (!this.item.is_voter) {\n        promise = this.onUpvote();\n      } else {\n        promise = this.onDownvote();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    return VoteButtonController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonDirective;\n\n  VoteButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"VoteButton\",\n      bindToController: {\n        item: \"=\",\n        onUpvote: \"=\",\n        onDownvote: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/vote-button/vote-button.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectSwimlanesWipLimitController;\n\n  ProjectSwimlanesWipLimitController = (function() {\n    ProjectSwimlanesWipLimitController.$inject = [\"$scope\", \"$rootScope\", \"$tgResources\"];\n\n    function ProjectSwimlanesWipLimitController(scope, rootscope, rs) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.rs = rs;\n      this.new_wip_limit = this.status.wip_limit;\n    }\n\n    ProjectSwimlanesWipLimitController.prototype.submitSwimlaneNewStatus = function() {\n      this.scope.displayWipLimitSelector = false;\n      if (!!this.status.swimlane_userstory_status_id) {\n        return this.rs.swimlanes.wipLimitUpdate(this.status.swimlane_userstory_status_id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"swimlane:load\");\n          };\n        })(this));\n      } else {\n        return this.rs.userstories.editStatus(this.status.id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"project:load\");\n          };\n        })(this));\n      }\n    };\n\n    return ProjectSwimlanesWipLimitController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectSwimlanesWipLimit\", ProjectSwimlanesWipLimitController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WipLimitSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  WipLimitSelector = function($timeout) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.displayWipLimitSelector = false;\n      return scope.toggleWipSelectorVisibility = function() {\n        return scope.displayWipLimitSelector = !scope.displayWipLimitSelector;\n      };\n    };\n    return {\n      link: link,\n      scope: {},\n      templateUrl: \"components/wip-limit-selector/wip-limit-selector.html\",\n      controller: \"ProjectSwimlanesWipLimit\",\n      bindToController: {\n        status: '='\n      },\n      controllerAs: \"vm\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgWipLimitSelector\", [WipLimitSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentEditWysiwyg;\n\n  CommentEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.uploadFiles = function(file, cb) {\n        var object, projectId;\n        projectId = parseInt($scope.vm.projectId, 10);\n        object = parseInt($scope.vm.object, 10);\n        if (!projectId) {\n          projectId = parseInt($scope.vm.project.id, 10);\n        }\n        return attachmentsFullService.addAttachment(projectId, object, attachmentsFullService.types[$scope.vm.name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        editonly\\n        required\\n        project=\\\"vm.project\\\"\\n        content='vm.comment.comment'\\n        on-save=\\\"vm.saveComment(text, cb)\\\"\\n        on-cancel=\\\"vm.onEditMode({commentId: vm.comment.id})\\\"\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentWysiwyg;\n\n  CommentWysiwyg = function($modelTransform, $rootscope, attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveComment = function(description, cb) {\n        var transform;\n        $scope.content = '';\n        $scope.vm.type.comment = description;\n        transform = $modelTransform.save(function(item) {});\n        transform.then(function() {\n          if ($scope.vm.onAddComment) {\n            $scope.vm.onAddComment();\n          }\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.onChange = function(markdown) {\n        return $scope.vm.type.comment = markdown;\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.vm.project.id, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.content = '';\n      return $scope.$watch(\"vm.type\", function(value) {\n        if (!value) {\n          return;\n        }\n        return $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        required\\n        not-persist\\n        project=\\\"vm.project\\\"\\n        placeholder=\\\"'COMMENTS.TYPE_NEW_COMMENT '| translate\\\"\\n        storage-key='storageKey'\\n        content='content'\\n        on-save='saveComment(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"tgAttachmentsFullService\", CommentWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CustomFieldEditWysiwyg;\n\n  CustomFieldEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      return $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.ctrl.objectId.toString(), types[$scope.ctrl.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<tg-wysiwyg\\n    class=\\\"custom-field\\\"\\n    editonly=\\\"!!customAttributeValue.value.length\\\"\\n    project=\\\"project\\\"\\n    content='customAttributeValue.value'\\n    on-save=\\\"saveCustomRichText(text, cb)\\\"\\n    on-cancel=\\\"cancelCustomRichText()\\\"\\n    on-upload-file='uploadFiles'>\\n</tg-wysiwyg>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ItemWysiwyg;\n\n  ItemWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveDescription = function(description, cb) {\n        var transform;\n        transform = $modelTransform.save(function(item) {\n          item.description = description;\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, types[$attrs.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type;\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        return $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) !== -1;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription && project\\\"\\n        html-read-mode=\\\"true\\\"\\n        project=\\\"project\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        storage-key='storageKey'\\n        content='item.description'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.description.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.description\\\"></div>\\n\\n    <div\\n        class=\\\"wysiwyg no-description\\\"\\n        ng-if=\\\"!editableDescription && !item.description.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgItemWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$translate\", ItemWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Wysiwyg, taiga;\n\n  taiga = this.taiga;\n\n  Wysiwyg = function($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, analytics, $location, $attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var change, clean, create, discardLocalStorage, editorLinks, getCurrentContent, isDraft, isEditOnly, isOutdated, linksEvents, localSave, notPersist, pageAttachments, saveEnd, setHtmlEditor, textEditor, throttleChange, unwatchContent, updateMarkdownWithCurrentHtml;\n      isEditOnly = !!$attrs.$attr.editonly;\n      notPersist = !!$attrs.$attr.notPersist;\n      if ($scope.editonly !== void 0) {\n        isEditOnly = $scope.editonly;\n      }\n      $scope.required = !!$attrs.$attr.required;\n      $scope.editMode = isEditOnly || false;\n      $scope.mode = localStorage.getItem('editor-mode') || 'html';\n      if ($scope.mode !== 'html' && $scope.mode !== 'markdown') {\n        $scope.mode = 'html';\n      }\n      $scope.markdown = '';\n      $scope.html = '';\n      textEditor = null;\n      pageAttachments = $attachmentsFullService.attachments.toJS();\n      editorLinks = [];\n      linksEvents = function() {\n        $el.on('mousedown', '.js-wysiwyg-html', (function(_this) {\n          return function(e) {\n            if (e.target.tagName !== 'A' && e.target.parentElement.tagName !== 'A') {\n              return $scope.$applyAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          };\n        })(this));\n        editorLinks = textEditor.querySelectorAll('a[target=\"_blank\"]:not(.link-event)');\n        if (editorLinks.length) {\n          return editorLinks.forEach((function(_this) {\n            return function(link) {\n              link.classList.add('link-event');\n              link.addEventListener('mousedown', function(e) {\n                if (!$scope.editMode) {\n                  e.preventDefault();\n                  return e.stopPropagation();\n                }\n              });\n              return link.addEventListener('click', function(e) {\n                if (!$scope.editMode) {\n                  return window.open(e.currentTarget.getAttribute('href'), '_blank');\n                }\n              });\n            };\n          })(this));\n        }\n      };\n      unwatchContent = $scope.$watch('content', function(content) {\n        var unwatchLoader;\n        if (!_.isUndefined(content)) {\n          $scope.outdated = isOutdated();\n          if (($scope.markdown.length || content.length) && $scope.markdown === content) {\n            return;\n          }\n          content = getCurrentContent();\n          $scope.markdown = content;\n          if (tgLoader.open()) {\n            unwatchLoader = tgLoader.onEnd(function() {\n              return $scope.$evalAsync(function() {\n                create(content);\n                return unwatchLoader();\n              });\n            });\n          } else {\n            create(content);\n          }\n          return unwatchContent();\n        }\n      });\n      create = (function(_this) {\n        return function(text) {\n          if (textEditor) {\n            return;\n          }\n          textEditor = document.createElement('tg-text-editor');\n          textEditor.projectId = $scope.project.id;\n          textEditor.projectSlug = $scope.project.slug;\n          textEditor.placeholder = $scope.placeholder;\n          setHtmlEditor(text);\n          textEditor.mode = $scope.mode;\n          textEditor.lan = $translate.preferredLanguage();\n          textEditor.uploadFunction = $scope.onUploadFile;\n          textEditor.members = $scope.project.members.map(function(member) {\n            return Object.assign(member, {\n              fullNameDisplay: member.full_name_display\n            });\n          });\n          $scope.$applyAsync(function() {\n            return linksEvents();\n          });\n          if (isDraft()) {\n            $scope.setEditMode(true);\n          }\n          textEditor.addEventListener('modeChanged', function(event) {\n            return $scope.$evalAsync(function() {\n              $scope.mode = event.detail;\n              $scope.setEditMode(true);\n              return localStorage.setItem('editor-mode', $scope.mode);\n            });\n          });\n          textEditor.addEventListener('focusChanged', function(event) {\n            if (event.detail) {\n              return $scope.$evalAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          });\n          textEditor.addEventListener('changed', function(event) {\n            if ($scope.mode === 'html') {\n              $scope.html = event.detail;\n            } else {\n              $scope.markdown = event.detail;\n            }\n            return throttleChange();\n          });\n          return $el.find('.editor-wrapper')[0].appendChild(textEditor);\n        };\n      })(this);\n      setHtmlEditor = function(markdown) {\n        return wysiwygService.refreshAttachmentURLFromMarkdown(markdown).then((function(_this) {\n          return function(markdown) {\n            return textEditor.markdown = markdown;\n          };\n        })(this));\n      };\n      $scope.setEditMode = function(editMode) {\n        $scope.editMode = editMode;\n        if (editMode) {\n          return textEditor.mode = $scope.mode;\n        } else {\n          return textEditor.mode = 'html';\n        }\n      };\n      $scope.save = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        setHtmlEditor($scope.markdown);\n        if ($scope.required && !$scope.markdown.length) {\n          return;\n        }\n        $scope.saving = true;\n        $scope.outdated = false;\n        $scope.onSave({\n          text: $scope.markdown,\n          cb: saveEnd\n        });\n        linksEvents();\n      };\n      $scope.cancel = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        } else {\n          $scope.markdown = $scope.content;\n          setHtmlEditor($scope.content || '');\n        }\n        discardLocalStorage();\n        $scope.outdated = false;\n        $scope.onCancel();\n        linksEvents();\n      };\n      clean = function() {\n        $scope.markdown = '';\n        return setHtmlEditor('');\n      };\n      saveEnd = function() {\n        $scope.saving = false;\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        }\n        discardLocalStorage();\n        return analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1);\n      };\n      isOutdated = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store && store.version && store.version !== $scope.version) {\n          return true;\n        }\n        return false;\n      };\n      isDraft = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return true;\n        }\n        return false;\n      };\n      getCurrentContent = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return store.text;\n        }\n        return $scope.content;\n      };\n      discardLocalStorage = function() {\n        return $storage.remove($scope.storageKey);\n      };\n      $scope.cancelWithConfirmation = function() {\n        var message, title;\n        if ($scope.content === $scope.markdown) {\n          $scope.cancel();\n          if (document.activeElement.blur) {\n            document.activeElement.blur();\n          }\n          document.body.click();\n          return null;\n        }\n        title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\");\n        message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\");\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          $scope.cancel();\n          return askResponse.finish();\n        });\n      };\n      updateMarkdownWithCurrentHtml = function() {\n        return $scope.markdown = wysiwygService.getMarkdown($scope.html);\n      };\n      localSave = function(markdown) {\n        var store;\n        if ($scope.storageKey) {\n          store = {};\n          store.version = $scope.version || 0;\n          store.text = markdown;\n          return $storage.set($scope.storageKey, store);\n        }\n      };\n      change = function() {\n        if (!$scope.editMode) {\n          return;\n        }\n        if ($scope.mode === 'html') {\n          updateMarkdownWithCurrentHtml();\n        }\n        localSave($scope.markdown);\n        return $scope.onChange({\n          markdown: $scope.markdown\n        });\n      };\n      return throttleChange = _.throttle(change, 200);\n    };\n    return {\n      templateUrl: \"common/components/wysiwyg-toolbar.html\",\n      scope: {\n        htmlReadMode: '<',\n        editonly: '<',\n        project: '<',\n        placeholder: '<',\n        version: '<',\n        storageKey: '<',\n        content: '<',\n        onCancel: '&',\n        onSave: '&',\n        onUploadFile: '<',\n        onChange: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\"$translate\", \"$tgConfirm\", \"$tgStorage\", \"tgWysiwygService\", \"animationFrame\", \"tgLoader\", \"$tgAnalytics\", \"$location\", \"tgAttachmentsFullService\", Wysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WysiwygService;\n\n  WysiwygService = (function() {\n    WysiwygService.$inject = [\"tgProjectService\", \"tgAttachmentsFullService\", \"tgAttachmentsService\", \"$sce\"];\n\n    function WysiwygService(projectService, attachmentsFullService, attachmentsService, sce) {\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.attachmentsService = attachmentsService;\n      this.sce = sce;\n      this.projectDataConversion = {};\n      this.cache = {};\n    }\n\n    WysiwygService.prototype.getMarkdown = function(html) {\n      var projectId;\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toMarkdown(html);\n    };\n\n    WysiwygService.prototype.getHTML = function(text) {\n      var projectId;\n      if (!text || !text.length) {\n        return \"\";\n      }\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toHtml(text);\n    };\n\n    WysiwygService.prototype.getAttachmentData = function(tokens) {\n      return this.attachmentsService.get(tokens[0], tokens[1]).then((function(_this) {\n        return function(response) {\n          return response.data.url;\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.getCachedAttachment = function(tokens) {\n      var attachment, attachmentId, attachments, cache_key, cached_result;\n      attachmentId = parseInt(tokens[1], 10);\n      attachments = this.attachmentsFullService.attachments.toJS();\n      attachment = attachments.find((function(_this) {\n        return function(attachment) {\n          return attachment.file.id === attachmentId;\n        };\n      })(this));\n      if (attachment) {\n        return Promise.resolve(attachment.file.url);\n      } else {\n        cache_key = tokens[0] + tokens[1];\n        cached_result = this.cache[cache_key];\n        if (cached_result) {\n          return Promise.resolve(cached_result);\n        } else {\n          return this.getAttachmentData(tokens).then((function(_this) {\n            return function(url) {\n              _this.cache[cache_key] = url;\n              return url;\n            };\n          })(this));\n        }\n      }\n    };\n\n    WysiwygService.prototype.refreshAttachmentURLFromMarkdown = function(markdown) {\n      var html;\n      html = this.getHTML(markdown);\n      return this.refreshAttachmentURL(html).then((function(_this) {\n        return function(html) {\n          return _this.getMarkdown(html);\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.refreshAttachmentURL = function(html) {\n      var el, images, links, promises, regex;\n      el = document.createElement('html');\n      window._extraValidHtmlElments = {\n        input: true\n      };\n      window._extraValidAttrs = {\n        checked: true\n      };\n      el.innerHTML = this.sce.getTrustedHtml(html) || '';\n      regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/;\n      links = {\n        \"elements\": el.querySelectorAll('a'),\n        \"attr\": \"href\"\n      };\n      images = {\n        \"elements\": el.querySelectorAll('img'),\n        \"attr\": \"src\"\n      };\n      promises = [];\n      _.map([links, images], (function(_this) {\n        return function(tag) {\n          return _.map(tag.elements, function(e) {\n            var match, promise, tokens;\n            if (e.getAttribute(tag.attr) && e.getAttribute(tag.attr).indexOf('#_taiga-refresh=') !== -1) {\n              match = e.getAttribute(tag.attr).match(regex);\n              if (match && match.length === 2) {\n                tokens = match[1].split(\":\");\n                promise = _this.getCachedAttachment(tokens).then(function(url) {\n                  return e.setAttribute(tag.attr, url);\n                })[\"catch\"](function() {\n                  return console.warn('attachment ref not found', e.getAttribute(tag.attr));\n                });\n                return promises.push(promise);\n              }\n            }\n          });\n        };\n      })(this));\n      return Promise.all(promises).then(function() {\n        return el.innerHTML;\n      });\n    };\n\n    return WysiwygService;\n\n  })();\n\n  angular.module(\"taigaComponents\").service(\"tgWysiwygService\", WysiwygService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByController;\n\n  DiscoverHomeOrderByController = (function() {\n    DiscoverHomeOrderByController.$inject = ['$translate'];\n\n    function DiscoverHomeOrderByController(translate) {\n      this.translate = translate;\n      this.is_open = false;\n      this.texts = {\n        week: this.translate.instant('DISCOVER.FILTERS.WEEK'),\n        month: this.translate.instant('DISCOVER.FILTERS.MONTH'),\n        year: this.translate.instant('DISCOVER.FILTERS.YEAR'),\n        all: this.translate.instant('DISCOVER.FILTERS.ALL_TIME')\n      };\n    }\n\n    DiscoverHomeOrderByController.prototype.currentText = function() {\n      return this.texts[this.currentOrderBy];\n    };\n\n    DiscoverHomeOrderByController.prototype.open = function() {\n      return this.is_open = true;\n    };\n\n    DiscoverHomeOrderByController.prototype.close = function() {\n      return this.is_open = false;\n    };\n\n    DiscoverHomeOrderByController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      this.is_open = false;\n      return this.onChange({\n        orderBy: this.currentOrderBy\n      });\n    };\n\n    return DiscoverHomeOrderByController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByDirective;\n\n  DiscoverHomeOrderByDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverHomeOrderBy\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\n      scope: {\n        currentOrderBy: \"=orderBy\",\n        onChange: \"&\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverHomeOrderByDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarController;\n\n  DiscoverSearchBarController = (function() {\n    DiscoverSearchBarController.$inject = ['tgDiscoverProjectsService'];\n\n    function DiscoverSearchBarController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.projectsCount;\n        };\n      })(this));\n      this.discoverProjectsService.fetchStats();\n    }\n\n    DiscoverSearchBarController.prototype.selectFilter = function(filter) {\n      return this.onChange({\n        filter: filter,\n        q: this.q\n      });\n    };\n\n    DiscoverSearchBarController.prototype.submitFilter = function() {\n      return this.onChange({\n        filter: this.filter,\n        q: this.q\n      });\n    };\n\n    return DiscoverSearchBarController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarDirective;\n\n  DiscoverSearchBarDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      controller: \"DiscoverSearchBar\",\n      controllerAs: \"vm\",\n      templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\n      bindToController: true,\n      scope: {\n        q: \"=\",\n        filter: \"=\",\n        onChange: \"&\"\n      },\n      compile: function(element, attrs) {\n        if (!attrs.q) {\n          return attrs.q = '';\n        }\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchBarDirective.$inject = [];\n\n  angular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderController;\n\n  DiscoverSearchListHeaderController = (function() {\n    DiscoverSearchListHeaderController.$inject = [];\n\n    function DiscoverSearchListHeaderController() {\n      this.like_is_open = this.orderBy.indexOf('-total_fans') === 0;\n      this.activity_is_open = this.orderBy.indexOf('-total_activity') === 0;\n    }\n\n    DiscoverSearchListHeaderController.prototype.openLike = function() {\n      this.like_is_open = true;\n      this.activity_is_open = false;\n      return this.setOrderBy('-total_fans_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.openActivity = function() {\n      this.activity_is_open = true;\n      this.like_is_open = false;\n      return this.setOrderBy('-total_activity_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.setOrderBy = function(type) {\n      if (type == null) {\n        type = '';\n      }\n      if (!type) {\n        this.like_is_open = false;\n        this.activity_is_open = false;\n      }\n      return this.onChange({\n        orderBy: type\n      });\n    };\n\n    return DiscoverSearchListHeaderController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderDirective;\n\n  DiscoverSearchListHeaderDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverSearchListHeader\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\n      scope: {\n        onChange: \"&\",\n        orderBy: \"=\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchListHeaderDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsController;\n\n  FeaturedProjectsController = (function() {\n    FeaturedProjectsController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function FeaturedProjectsController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.featured;\n        };\n      })(this));\n      this.discoverProjectsService.fetchFeatured();\n    }\n\n    return FeaturedProjectsController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsDirective;\n\n  FeaturedProjectsDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"FeaturedProjects\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/featured-projects/featured-projects.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  FeaturedProjectsDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HighlightedDirective;\n\n  HighlightedDirective = function() {\n    return {\n      templateUrl: \"discover/components/highlighted/highlighted.html\",\n      scope: {\n        loading: \"=\",\n        highlighted: \"=\",\n        orderBy: \"=\"\n      }\n    };\n  };\n\n  HighlightedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveController;\n\n  MostActiveController = (function() {\n    MostActiveController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostActiveController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostActive;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostActiveController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostActive({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostActiveController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostActiveController.prototype.getOrderBy = function(type) {\n      if (this.currentOrderBy === 'all') {\n        return '-total_activity';\n      } else {\n        return '-total_activity_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostActiveController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveDirective;\n\n  MostActiveDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostActive\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-active/most-active.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostActiveDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedController;\n\n  MostLikedController = (function() {\n    MostLikedController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostLikedController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostLiked;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostLikedController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostLiked({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostLikedController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostLikedController.prototype.getOrderBy = function() {\n      if (this.currentOrderBy === 'all') {\n        return '-total_fans';\n      } else {\n        return '-total_fans_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostLikedController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedDirective;\n\n  MostLikedDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostLiked\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-liked/most-liked.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostLikedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeController;\n\n  DiscoverHomeController = (function() {\n    DiscoverHomeController.$inject = ['$tgLocation', '$tgNavUrls', 'tgAppMetaService', '$translate'];\n\n    function DiscoverHomeController(location, navUrls, appMetaService, translate) {\n      var description, title;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      title = this.translate.instant(\"DISCOVER.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n    }\n\n    DiscoverHomeController.prototype.onSubmit = function(q) {\n      var url;\n      url = this.navUrls.resolve('discover-search');\n      return this.location.search('text', q).path(url);\n    };\n\n    return DiscoverHomeController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchController;\n\n  DiscoverSearchController = (function() {\n    DiscoverSearchController.$inject = ['$routeParams', 'tgDiscoverProjectsService', '$route', '$tgLocation', '$tgAnalytics', 'tgAppMetaService', '$translate'];\n\n    function DiscoverSearchController(routeParams, discoverProjectsService, route, location, analytics, appMetaService, translate) {\n      var description, title;\n      this.routeParams = routeParams;\n      this.discoverProjectsService = discoverProjectsService;\n      this.route = route;\n      this.location = location;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.page = 1;\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.nextSearchPage;\n        };\n      })(this));\n      this.q = this.routeParams.text;\n      this.filter = this.routeParams.filter || 'all';\n      this.orderBy = this.routeParams['order_by'] || '';\n      this.loadingGlobal = false;\n      this.loadingList = false;\n      this.loadingPagination = false;\n      title = this.translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n    }\n\n    DiscoverSearchController.prototype.fetch = function() {\n      this.page = 1;\n      this.discoverProjectsService.resetSearchList();\n      return this.search();\n    };\n\n    DiscoverSearchController.prototype.fetchByGlobalSearch = function() {\n      if (this.loadingGlobal) {\n        return;\n      }\n      this.loadingGlobal = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingGlobal = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.fetchByOrderBy = function() {\n      if (this.loadingList) {\n        return;\n      }\n      this.loadingList = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingList = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.showMore = function() {\n      if (this.loadingPagination) {\n        return;\n      }\n      this.loadingPagination = true;\n      this.page++;\n      return this.search().then((function(_this) {\n        return function() {\n          return _this.loadingPagination = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.search = function() {\n      var filter, params;\n      filter = this.getFilter();\n      params = {\n        page: this.page,\n        q: this.q,\n        order_by: this.orderBy\n      };\n      _.assign(params, filter);\n      return this.discoverProjectsService.fetchSearch(params);\n    };\n\n    DiscoverSearchController.prototype.getFilter = function() {\n      if (this.filter === 'people') {\n        return {\n          is_looking_for_people: true\n        };\n      } else if (this.filter === 'scrum') {\n        return {\n          is_backlog_activated: true\n        };\n      } else if (this.filter === 'kanban') {\n        return {\n          is_kanban_activated: true\n        };\n      }\n      return {};\n    };\n\n    DiscoverSearchController.prototype.onChangeFilter = function(filter, q) {\n      this.filter = filter;\n      this.q = q;\n      this.route.updateParams({\n        filter: this.filter,\n        text: this.q\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByGlobalSearch();\n    };\n\n    DiscoverSearchController.prototype.onChangeOrder = function(orderBy) {\n      this.orderBy = orderBy;\n      this.route.updateParams({\n        order_by: orderBy\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByOrderBy();\n    };\n\n    return DiscoverSearchController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchDirective;\n\n  DiscoverSearchDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  DiscoverSearchDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverProjectsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  DiscoverProjectsService = (function(superClass) {\n    var _discoverParams;\n\n    extend(DiscoverProjectsService, superClass);\n\n    DiscoverProjectsService.$inject = [\"tgResources\", \"tgProjectsService\"];\n\n    _discoverParams = {\n      discover_mode: true\n    };\n\n    function DiscoverProjectsService(rs, projectsService) {\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this._mostLiked = Immutable.List();\n      this._mostActive = Immutable.List();\n      this._featured = Immutable.List();\n      this._searchResult = Immutable.List();\n      this._projectsCount = 0;\n      this.decorate = this.projectsService._decorate.bind(this.projectsService);\n      taiga.defineImmutableProperty(this, \"mostLiked\", (function(_this) {\n        return function() {\n          return _this._mostLiked;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"mostActive\", (function(_this) {\n        return function() {\n          return _this._mostActive;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this._featured;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this._searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this._nextSearchPage;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsCount\", (function(_this) {\n        return function() {\n          return _this._projectsCount;\n        };\n      })(this));\n    }\n\n    DiscoverProjectsService.prototype.fetchMostLiked = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostLiked = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchMostActive = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostActive = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchFeatured = function() {\n      var _params;\n      _params = _.extend({}, _discoverParams);\n      _params.is_featured = true;\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._featured = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.resetSearchList = function() {\n      return this._searchResult = Immutable.List();\n    };\n\n    DiscoverProjectsService.prototype.fetchStats = function() {\n      return this.rs.stats.discover().then((function(_this) {\n        return function(discover) {\n          return _this._projectsCount = discover.getIn(['projects', 'total']);\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchSearch = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params).then((function(_this) {\n        return function(result) {\n          var projects;\n          _this._nextSearchPage = !!result.headers('X-Pagination-Next');\n          projects = Immutable.fromJS(result.data);\n          projects = projects.map(_this.decorate);\n          return _this._searchResult = _this._searchResult.concat(projects);\n        };\n      })(this));\n    };\n\n    return DiscoverProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicController, getRandomDefaultColor, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = taiga.trim;\n\n  getRandomDefaultColor = taiga.getRandomDefaultColor;\n\n  CreateEpicController = (function() {\n    CreateEpicController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"$tgAnalytics\"];\n\n    function CreateEpicController(confirm, projectService, epicsService, analytics) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.analytics = analytics;\n      this.project = this.projectService.project.toJS();\n      this.newEpic = {\n        color: getRandomDefaultColor(),\n        status: this.project.default_epic_status,\n        tags: []\n      };\n      this.attachments = Immutable.List();\n      this.loading = false;\n    }\n\n    CreateEpicController.prototype.createEpic = function() {\n      if (!this.validateForm()) {\n        return;\n      }\n      this.loading = true;\n      return this.epicsService.createEpic(this.newEpic, this.attachments).then((function(_this) {\n        return function(response) {\n          _this.analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1);\n          _this.onCreateEpic();\n          return _this.loading = false;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          _this.setFormErrors(response.data);\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this));\n    };\n\n    CreateEpicController.prototype.selectColor = function(color) {\n      return this.newEpic.color = color;\n    };\n\n    CreateEpicController.prototype.addTag = function(name, color) {\n      name = trim(name.toLowerCase());\n      if (!_.find(this.newEpic.tags, function(it) {\n        return it[0] === name;\n      })) {\n        return this.newEpic.tags.push([name, color]);\n      }\n    };\n\n    CreateEpicController.prototype.deleteTag = function(tag) {\n      return _.remove(this.newEpic.tags, function(it) {\n        return it[0] === tag[0];\n      });\n    };\n\n    CreateEpicController.prototype.addAttachment = function(attachment) {\n      return this.attachments.push(attachment);\n    };\n\n    return CreateEpicController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicDirective;\n\n  CreateEpicDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var form;\n      form = el.find(\"form\").checksley();\n      ctrl.validateForm = (function(_this) {\n        return function() {\n          return form.validate();\n        };\n      })(this);\n      return ctrl.setFormErrors = (function(_this) {\n        return function(errors) {\n          return form.setErrors(errors);\n        };\n      })(this);\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/create-epic/create-epic.html\",\n      controller: \"CreateEpicCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        onCreateEpic: '&'\n      },\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowController;\n\n  EpicRowController = (function() {\n    EpicRowController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\"];\n\n    function EpicRowController(confirm, projectService, epicsService) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.displayUserStories = false;\n      this.displayAssignedTo = false;\n      this.displayStatusList = false;\n      this.loadingStatus = false;\n      this.project = this.projectService.project.toJS();\n      this._calculateProgressBar();\n    }\n\n    EpicRowController.prototype._calculateProgressBar = function() {\n      var progress, total;\n      if (this.epic.getIn(['status_extra_info', 'is_closed']) === true) {\n        return this.percentage = \"100%\";\n      } else {\n        progress = this.epic.getIn(['user_stories_counts', 'progress']);\n        total = this.epic.getIn(['user_stories_counts', 'total']);\n        if (total === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (progress * 100 / total) + \"%\";\n        }\n      }\n    };\n\n    EpicRowController.prototype.canEditEpics = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    EpicRowController.prototype.toggleUserStoryList = function() {\n      if (!this.displayUserStories) {\n        return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n          return function(userStories) {\n            _this.epicStories = userStories;\n            return _this.displayUserStories = true;\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function() {\n            return _this.confirm.notify('error');\n          };\n        })(this));\n      } else {\n        return this.displayUserStories = false;\n      }\n    };\n\n    EpicRowController.prototype.updateStatus = function(statusId) {\n      this.displayStatusList = false;\n      this.loadingStatus = true;\n      return this.epicsService.updateEpicStatus(this.epic, statusId)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loadingStatus = false;\n        };\n      })(this));\n    };\n\n    EpicRowController.prototype.updateAssignedTo = function(member) {\n      this.assignLoader = true;\n      return this.epicsService.updateEpicAssignedTo(this.epic, (member != null ? member.id : void 0) || null)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.assignLoader = false;\n        };\n      })(this));\n    };\n\n    return EpicRowController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowDirective;\n\n  EpicRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epic-row/epic-row.html\",\n      controller: \"EpicRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        epic: '=',\n        options: '='\n      }\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsDashboardController, taiga;\n\n  taiga = this.taiga;\n\n  EpicsDashboardController = (function() {\n    EpicsDashboardController.$inject = [\"$routeParams\", \"tgErrorHandlingService\", \"tgLightboxFactory\", \"lightboxService\", \"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"tgAppMetaService\", \"$translate\"];\n\n    function EpicsDashboardController(params, errorHandlingService, lightboxFactory, lightboxService, confirm, projectService, epicsService, appMetaService, translate) {\n      this.params = params;\n      this.errorHandlingService = errorHandlingService;\n      this.lightboxFactory = lightboxFactory;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.sectionName = \"EPICS.SECTION_NAME\";\n      taiga.defineImmutableProperty(this, 'project', (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    EpicsDashboardController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\"),\n        projectDescription: this.project.get(\"description\")\n      };\n      return {\n        title: this.translate.instant(\"EPICS.PAGE_TITLE\", ctx),\n        description: this.translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\n      };\n    };\n\n    EpicsDashboardController.prototype.loadInitialData = function() {\n      this.epicsService.clear();\n      return this.projectService.setProjectBySlug(this.params.pslug).then((function(_this) {\n        return function() {\n          if (!_this.projectService.isEpicsDashboardEnabled()) {\n            return _this.errorHandlingService.notFound();\n          }\n          if (!_this.projectService.hasPermission(\"view_epics\")) {\n            return _this.errorHandlingService.permissionDenied();\n          }\n          return _this.epicsService.fetchEpics();\n        };\n      })(this));\n    };\n\n    EpicsDashboardController.prototype.canCreateEpics = function() {\n      return this.projectService.hasPermission(\"add_epic\");\n    };\n\n    EpicsDashboardController.prototype.onCreateEpic = function() {\n      var onCreateEpic;\n      onCreateEpic = (function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.confirm.notify(\"success\");\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-create-epic', {\n        \"class\": \"lightbox lightbox-create-epic open\",\n        \"on-create-epic\": \"onCreateEpic()\"\n      }, {\n        \"onCreateEpic\": onCreateEpic.bind(this)\n      });\n    };\n\n    return EpicsDashboardController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsSortableDirective;\n\n  EpicsSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgEpicsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.epics-table-body-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var epic, itemEl, newIndex;\n        itemEl = $(item);\n        epic = itemEl.scope().epic;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            epic: epic,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  EpicsSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableController, generateHash, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  EpicsTableController = (function() {\n    EpicsTableController.$inject = [\"$tgConfirm\", \"tgEpicsService\", \"$timeout\", \"$tgStorage\", \"tgProjectService\"];\n\n    function EpicsTableController(confirm, epicsService, timeout, storage, projectService) {\n      this.confirm = confirm;\n      this.epicsService = epicsService;\n      this.timeout = timeout;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.hash = generateHash([this.projectService.project.get('id'), 'epics']);\n      this.displayOptions = false;\n      this.displayVotes = true;\n      this.options = this.storage.get(this.hash, {\n        votes: true,\n        name: true,\n        project: true,\n        sprint: true,\n        assigned: true,\n        status: true,\n        progress: true,\n        closed: true,\n        closed_us: true\n      });\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disabledEpicsPagination', (function(_this) {\n        return function() {\n          return _this.epicsService._disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingEpics', (function(_this) {\n        return function() {\n          return _this.epicsService._loadingEpics;\n        };\n      })(this));\n    }\n\n    EpicsTableController.prototype.toggleEpicTableOptions = function() {\n      return this.displayOptions = !this.displayOptions;\n    };\n\n    EpicsTableController.prototype.reorderEpic = function(epic, newIndex) {\n      if (epic.get('epics_order') === newIndex) {\n        return null;\n      }\n      return this.epicsService.reorderEpic(epic, newIndex).then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    EpicsTableController.prototype.nextPage = function() {\n      return this.epicsService.nextPage();\n    };\n\n    EpicsTableController.prototype.hoverEpicTableOption = function() {\n      if (this.timer) {\n        return this.timeout.cancel(this.timer);\n      }\n    };\n\n    EpicsTableController.prototype.hideEpicTableOption = function() {\n      return this.timer = this.timeout(((function(_this) {\n        return function() {\n          return _this.displayOptions = false;\n        };\n      })(this)), 400);\n    };\n\n    EpicsTableController.prototype.updateViewOptions = function() {\n      return this.storage.set(this.hash, this.options);\n    };\n\n    return EpicsTableController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableDirective;\n\n  EpicsTableDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epics-table/epics-table.html\",\n      controller: \"EpicsTableCtrl\",\n      controllerAs: \"vm\",\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  StoryRowController = (function() {\n    StoryRowController.$inject = [];\n\n    function StoryRowController() {\n      this._calculateProgressBar();\n    }\n\n    StoryRowController.prototype._calculateProgressBar = function() {\n      var totalTasks, totalTasksCompleted;\n      if (this.story.get('is_closed') === true) {\n        return this.percentage = \"100%\";\n      } else {\n        totalTasks = this.story.get('tasks').size;\n        totalTasksCompleted = this.story.get('tasks').filter(function(it) {\n          return it.get(\"is_closed\");\n        }).size;\n        if (totalTasks === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (totalTasksCompleted * 100 / totalTasks) + \"%\";\n        }\n      }\n    };\n\n    return StoryRowController;\n\n  })();\n\n  module.controller(\"StoryRowCtrl\", StoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  StoryRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/story-row/story-row.html\",\n      controller: \"StoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        story: '=',\n        options: '='\n      }\n    };\n  };\n\n  module.directive(\"tgStoryRow\", StoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsService, taiga;\n\n  taiga = this.taiga;\n\n  EpicsService = (function() {\n    EpicsService.$inject = ['tgProjectService', 'tgAttachmentsService', 'tgResources', 'tgXhrErrorService', '$q'];\n\n    function EpicsService(projectService, attachmentsService, resources, xhrError, q) {\n      this.projectService = projectService;\n      this.attachmentsService = attachmentsService;\n      this.resources = resources;\n      this.xhrError = xhrError;\n      this.q = q;\n      this.clear();\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this._epics;\n        };\n      })(this));\n    }\n\n    EpicsService.prototype.clear = function() {\n      this._loadingEpics = false;\n      this._disablePagination = false;\n      this._page = 1;\n      return this._epics = Immutable.List();\n    };\n\n    EpicsService.prototype.fetchEpics = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      this._loadingEpics = true;\n      this._disablePagination = true;\n      return this.resources.epics.list(this.projectService.project.get('id'), this._page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this._epics = result.list;\n          } else {\n            _this._epics = _this._epics.concat(result.list);\n          }\n          _this._loadingEpics = false;\n          return _this._disablePagination = !result.headers('x-pagination-next');\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.nextPage = function() {\n      this._page++;\n      return this.fetchEpics();\n    };\n\n    EpicsService.prototype.listRelatedUserStories = function(epic) {\n      return this.resources.userstories.listInEpic(epic.get('id'));\n    };\n\n    EpicsService.prototype.createEpic = function(epicData, attachments, projectId) {\n      if (projectId) {\n        epicData.project = projectId;\n      } else {\n        epicData.project = this.projectService.project.get('id');\n      }\n      return this.resources.epics.post(epicData).then((function(_this) {\n        return function(epic) {\n          var promises;\n          if (!attachments) {\n            return epic;\n          } else {\n            promises = _.map(attachments.toJS(), function(attachment) {\n              return _this.attachmentsService.upload(attachment.file, epic.get('id'), epic.get('project'), 'epic');\n            });\n            return _this.q.all(promises).then(_this.fetchEpics.bind(_this, true));\n          }\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderEpic = function(epic, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this._epics.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order');\n      });\n      withoutMoved = this.epics.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== epic.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epics_order') + 1;\n      orderList[epic.get('id')] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epics_order') === previous.get('epics_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epics_order')];\n        };\n      })(this)).toJS());\n      afterDestination.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order') + 1;\n      });\n      this._epics = this._epics.map(function(it) {\n        return it.set('epics_order', orderList[it.get('id')]);\n      });\n      this._epics = this._epics.sortBy(function(it) {\n        return it.get('epics_order');\n      });\n      data = {\n        epics_order: newOrder,\n        version: epic.get('version')\n      };\n      return this.resources.epics.reorder(epic.get('id'), data, setOrders).then((function(_this) {\n        return function(newEpic) {\n          return _this._epics = _this._epics.map(function(it) {\n            if (it.get('id') === newEpic.get('id')) {\n              return newEpic;\n            }\n            return it;\n          });\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderRelatedUserstory = function(epic, epicUserstories, userstory, newIndex) {\n      var beforeDestination, data, epicId, newOrder, previous, previousWithTheSameOrder, setOrders, userstoryId, withoutMoved;\n      withoutMoved = epicUserstories.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== userstory.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epic_order') + 1;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epic_order') === previous.get('epic_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epic_order')];\n        };\n      })(this)).toJS());\n      data = {\n        order: newOrder\n      };\n      epicId = epic.get('id');\n      userstoryId = userstory.get('id');\n      return this.resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders).then((function(_this) {\n        return function() {\n          return _this.listRelatedUserStories(epic);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.replaceEpic = function(epic) {\n      return this._epics = this._epics.map(function(it) {\n        if (it.get('id') === epic.get('id')) {\n          return epic;\n        }\n        return it;\n      });\n    };\n\n    EpicsService.prototype.updateEpicStatus = function(epic, statusId) {\n      var data;\n      data = {\n        status: statusId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    EpicsService.prototype.updateEpicAssignedTo = function(epic, userId) {\n      var data;\n      data = {\n        assigned_to: userId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    return EpicsService;\n\n  })();\n\n  angular.module('taigaEpics').service('tgEpicsService', EpicsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserStoriesController = (function() {\n    RelatedUserStoriesController.$inject = [\"tgProjectService\", \"tgEpicsService\"];\n\n    function RelatedUserStoriesController(projectService, epicsService) {\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.sectionName = \"Epics\";\n      this.showCreateRelatedUserstoriesLightbox = false;\n    }\n\n    RelatedUserStoriesController.prototype.showRelatedUserStoriesSection = function() {\n      var ref;\n      return this.projectService.hasPermission(\"view_epics\") || ((ref = this.userstories) != null ? ref.length : void 0) > 0;\n    };\n\n    RelatedUserStoriesController.prototype.userCanSort = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    RelatedUserStoriesController.prototype.loadRelatedUserstories = function() {\n      return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    RelatedUserStoriesController.prototype.reorderRelatedUserstory = function(us, newIndex) {\n      return this.epicsService.reorderRelatedUserstory(this.epic, this.userstories, us, newIndex).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    return RelatedUserStoriesController;\n\n  })();\n\n  module.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoriesCreateController = (function() {\n    RelatedUserstoriesCreateController.$inject = [\"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\", \"$tgAnalytics\"];\n\n    function RelatedUserstoriesCreateController(currentUserService, rs, confirm, analytics) {\n      this.currentUserService = currentUserService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.analytics = analytics;\n      this.projects = null;\n      this.projectUserstories = Immutable.List();\n      this.loading = false;\n    }\n\n    RelatedUserstoriesCreateController.prototype.loadProjects = function() {\n      if (this.projects === null) {\n        return this.projects = this.currentUserService.projects.get(\"unblocked\");\n      }\n    };\n\n    RelatedUserstoriesCreateController.prototype.filterUss = function(selectedProjectId, filterText) {\n      var promise;\n      promise = this.rs.userstories.listInAllProjects({\n        project: selectedProjectId,\n        q: filterText\n      }, true).then((function(_this) {\n        return function(data) {\n          var excludeIds, filteredData;\n          excludeIds = _this.epicUserstories.map(function(us) {\n            return us.get('id');\n          });\n          filteredData = data.filter(function(us) {\n            return excludeIds.indexOf(us.get('id')) === -1;\n          });\n          return _this.projectUserstories = filteredData;\n        };\n      })(this));\n      return promise;\n    };\n\n    RelatedUserstoriesCreateController.prototype.saveRelatedUserStory = function(selectedUserstoryId, onSavedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateExistingUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setExistingUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onSavedRelatedUserstory) {\n            onSavedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError);\n    };\n\n    RelatedUserstoriesCreateController.prototype.bulkCreateRelatedUserStories = function(selectedProjectId, userstoriesText, onCreatedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateNewUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setNewUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onCreatedRelatedUserstory) {\n            onCreatedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError);\n    };\n\n    return RelatedUserstoriesCreateController;\n\n  })();\n\n  module.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateDirective, debounceLeading, module;\n\n  module = angular.module('taigaEpics');\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelatedUserstoriesCreateDirective = function(lightboxService1) {\n    var link;\n    this.lightboxService = lightboxService1;\n    link = function(scope, el, attrs, ctrl) {\n      var existingUserstoryForm, newUserstoryForm;\n      newUserstoryForm = el.find(\".new-user-story-form\").checksley();\n      existingUserstoryForm = el.find(\".existing-user-story-form\").checksley();\n      ctrl.validateNewUserstoryForm = (function(_this) {\n        return function() {\n          return newUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setNewUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return newUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      ctrl.validateExistingUserstoryForm = (function(_this) {\n        return function() {\n          return existingUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setExistingUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return existingUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      scope.showLightbox = function(selectedProjectId) {\n        ctrl.loadProjects();\n        return scope.selectProject(selectedProjectId).then((function(_this) {\n          return function() {\n            return lightboxService.open(el.find(\".lightbox-create-related-user-stories\"));\n          };\n        })(this));\n      };\n      scope.closeLightbox = function() {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        scope.relatedUserstoriesText = \"\";\n        return lightboxService.close(el.find(\".lightbox-create-related-user-stories\"));\n      };\n      scope.$watch('vm.project', function(project) {\n        if (project != null) {\n          return scope.selectedProject = project.get('id');\n        }\n      });\n      scope.selectProject = function(selectedProjectId) {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        return ctrl.filterUss(selectedProjectId, scope.searchUserstory);\n      };\n      return scope.onUpdateSearchUserstory = debounceLeading(300, function() {\n        scope.selectedUserstory = null;\n        return ctrl.filterUss(scope.selectedProject, scope.searchUserstory);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\n      controller: \"RelatedUserstoriesCreateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        showCreateRelatedUserstoriesLightbox: \"=\",\n        project: \"=\",\n        epic: \"=\",\n        epicUserstories: \"=\",\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoriesCreateDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesSortableDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoriesSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgRelatedUserstoriesSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('tg-related-userstory-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, us;\n        itemEl = $(item);\n        us = itemEl.scope().us;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            us: us,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  RelatedUserstoriesSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  module.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserStoriesDirective = function() {\n    return {\n      templateUrl: \"epics/related-userstories/related-userstories.html\",\n      controller: \"RelatedUserStoriesCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstories: '=',\n        project: '=',\n        epic: '='\n      }\n    };\n  };\n\n  RelatedUserStoriesDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoryRowController = (function() {\n    RelatedUserstoryRowController.$inject = [\"tgAvatarService\", \"$translate\", \"$tgConfirm\", \"tgResources\"];\n\n    function RelatedUserstoryRowController(avatarService, translate, confirm, rs) {\n      this.avatarService = avatarService;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n    }\n\n    RelatedUserstoryRowController.prototype.setAvatarData = function() {\n      var member;\n      member = this.userstory.get('assigned_to_extra_info');\n      return this.avatar = this.avatarService.getAvatar(member);\n    };\n\n    RelatedUserstoryRowController.prototype.getAssignedToFullNameDisplay = function() {\n      if (this.userstory.get('assigned_to')) {\n        return this.userstory.getIn(['assigned_to_extra_info', 'full_name_display']);\n      }\n      return this.translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\");\n    };\n\n    RelatedUserstoryRowController.prototype.onDeleteRelatedUserstory = function() {\n      var message, title;\n      title = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n      message = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n        epicSubject: this.epic.get('subject')\n      });\n      return this.confirm.ask(title, null, message).then((function(_this) {\n        return function(askResponse) {\n          var epicId, onError, onSuccess, userstoryId;\n          onError = function() {\n            message = _this.translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            _this.loadRelatedUserstories();\n            return askResponse.finish();\n          };\n          epicId = _this.epic.get('id');\n          userstoryId = _this.userstory.get('id');\n          return _this.rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    return RelatedUserstoryRowController;\n\n  })();\n\n  module.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoryRowDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.setAvatarData();\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\n      controller: \"RelatedUserstoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstory: '=',\n        epic: '=',\n        project: '=',\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoryRowDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppController, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ExternalAppController = (function(superClass) {\n    extend(ExternalAppController, superClass);\n\n    ExternalAppController.$inject = [\"$routeParams\", \"tgExternalAppsService\", \"$window\", \"tgCurrentUserService\", \"$location\", \"$tgNavUrls\", \"tgXhrErrorService\", \"tgLoader\"];\n\n    function ExternalAppController(routeParams, externalAppsService, window, currentUserService, location, navUrls, xhrError, loader) {\n      var loginUrl, nextUrl;\n      this.routeParams = routeParams;\n      this.externalAppsService = externalAppsService;\n      this.window = window;\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.xhrError = xhrError;\n      this.loader = loader;\n      this.createApplicationToken = bind(this.createApplicationToken, this);\n      this._getApplicationToken = bind(this._getApplicationToken, this);\n      this._redirect = bind(this._redirect, this);\n      this.loader.start(false);\n      this._applicationId = this.routeParams.application;\n      this._state = this.routeParams.state;\n      this._getApplicationToken();\n      this._user = this.currentUserService.getUser();\n      this._application = null;\n      nextUrl = encodeURIComponent(this.location.url());\n      loginUrl = this.navUrls.resolve(\"login\");\n      this.loginWithAnotherUserUrl = loginUrl + \"?next=\" + nextUrl + \"&force_login=1\";\n      taiga.defineImmutableProperty(this, \"user\", (function(_this) {\n        return function() {\n          return _this._user;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"application\", (function(_this) {\n        return function() {\n          return _this._application;\n        };\n      })(this));\n    }\n\n    ExternalAppController.prototype._redirect = function(applicationToken) {\n      var nextUrl;\n      nextUrl = applicationToken.get(\"next_url\");\n      return this.window.open(nextUrl, \"_self\");\n    };\n\n    ExternalAppController.prototype._getApplicationToken = function() {\n      return this.externalAppsService.getApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          _this._application = data.get(\"application\");\n          if (data.get(\"auth_code\")) {\n            return _this._redirect(data);\n          } else {\n            return _this.loader.pageLoaded();\n          }\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          _this.loader.pageLoaded();\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    ExternalAppController.prototype.cancel = function() {\n      return this.window.history.back();\n    };\n\n    ExternalAppController.prototype.createApplicationToken = function() {\n      return this.externalAppsService.authorizeApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          return _this._redirect(data);\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    return ExternalAppController;\n\n  })(taiga.Controller);\n\n  angular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppsService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ExternalAppsService = (function(superClass) {\n    extend(ExternalAppsService, superClass);\n\n    ExternalAppsService.$inject = [\"tgResources\"];\n\n    function ExternalAppsService(rs) {\n      this.rs = rs;\n    }\n\n    ExternalAppsService.prototype.getApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.getApplicationToken(applicationId, state);\n    };\n\n    ExternalAppsService.prototype.authorizeApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.authorizeApplicationToken(applicationId, state);\n    };\n\n    return ExternalAppsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  FeedbackService = (function(superClass) {\n    extend(FeedbackService, superClass);\n\n    FeedbackService.$inject = [\"tgLightboxFactory\"];\n\n    function FeedbackService(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    FeedbackService.prototype.sendFeedback = function() {\n      return this.lightboxFactory.create(\"tg-lb-feedback\", {\n        \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\n      });\n    };\n\n    return FeedbackService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivityService, taiga;\n\n  taiga = this.taiga;\n\n  ActivityService = (function() {\n    ActivityService.$inject = ['tgResources', 'tgXhrErrorService'];\n\n    function ActivityService(rs, xhrError) {\n      this.rs = rs;\n      this.xhrError = xhrError;\n      this._contentType = null;\n      this._objectId = null;\n      this.clear();\n    }\n\n    ActivityService.prototype.clear = function() {\n      this.page = 1;\n      this.loadingEntries = false;\n      this.disablePagination = false;\n      this.entries = Immutable.List();\n      return this.count = null;\n    };\n\n    ActivityService.prototype.fetchEntries = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      if (reset) {\n        this.page = 1;\n      }\n      this.loadingEntries = true;\n      this.disablePagination = true;\n      if (!this._contentType || !this._objectId) {\n        return;\n      }\n      return this.rs.history.getHistory('activity', this._contentType, this._objectId, this.page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this.entries = result.list;\n          } else {\n            _this.entries = _this.entries.concat(result.list);\n          }\n          _this.loadingEntries = false;\n          _this.disablePagination = !result.headers('x-pagination-next');\n          _this.count = result.headers('x-pagination-count');\n          return _this.entries;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(_this.entries);\n        };\n      })(this));\n    };\n\n    ActivityService.prototype.nextPage = function(historyType) {\n      if (historyType == null) {\n        historyType = 'comment';\n      }\n      this.page++;\n      return this.fetchEntries();\n    };\n\n    ActivityService.prototype.init = function(contentType, objectId) {\n      this._contentType = contentType;\n      this._objectId = objectId;\n      return this.clear();\n    };\n\n    return ActivityService;\n\n  })();\n\n  angular.module('taigaHistory').service('tgActivityService', ActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentController = (function() {\n    CommentController.$inject = [\"tgCurrentUserService\", \"tgCheckPermissionsService\", \"tgLightboxFactory\"];\n\n    function CommentController(currentUserService, permissionService, lightboxFactory) {\n      this.currentUserService = currentUserService;\n      this.permissionService = permissionService;\n      this.lightboxFactory = lightboxFactory;\n      this.hiddenDeletedComment = true;\n    }\n\n    CommentController.prototype.showDeletedComment = function() {\n      return this.hiddenDeletedComment = false;\n    };\n\n    CommentController.prototype.hideDeletedComment = function() {\n      return this.hiddenDeletedComment = true;\n    };\n\n    CommentController.prototype.checkCancelComment = function(event) {\n      if (event.keyCode === 27) {\n        return this.onEditMode({\n          commentId: this.comment.id\n        });\n      }\n    };\n\n    CommentController.prototype.canEditDeleteComment = function() {\n      if (this.currentUserService.getUser()) {\n        this.user = this.currentUserService.getUser();\n        return this.user.get('id') === this.comment.user.pk || this.permissionService.check('modify_project');\n      }\n    };\n\n    CommentController.prototype.saveComment = function(text, cb) {\n      return this.onEditComment({\n        commentId: this.comment.id,\n        commentData: text,\n        callback: cb\n      });\n    };\n\n    CommentController.prototype.displayCommentHistory = function() {\n      return this.lightboxFactory.create('tg-lb-display-historic', {\n        \"class\": \"lightbox lightbox-display-historic\",\n        \"comment\": \"comment\",\n        \"name\": \"name\",\n        \"object\": \"object\"\n      }, {\n        \"comment\": this.comment,\n        \"name\": this.name,\n        \"object\": this.object\n      });\n    };\n\n    return CommentController;\n\n  })();\n\n  module.controller(\"CommentCtrl\", CommentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentDirective = function() {\n    return {\n      scope: {\n        name: \"@\",\n        projectId: \"@\",\n        object: \"@\",\n        comment: \"<\",\n        type: \"<\",\n        loading: \"<\",\n        editing: \"<\",\n        deleting: \"<\",\n        objectId: \"<\",\n        editMode: \"<\",\n        project: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onEditComment: \"&\"\n      },\n      templateUrl: \"history/comments/comment.html\",\n      bindToController: true,\n      controller: 'CommentCtrl',\n      controllerAs: \"vm\"\n    };\n  };\n\n  module.directive(\"tgComment\", CommentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentsController = (function() {\n    CommentsController.$inject = [];\n\n    function CommentsController() {}\n\n    CommentsController.prototype.initializePermissions = function() {\n      return this.canAddCommentPermission = 'comment_' + this.name;\n    };\n\n    return CommentsController;\n\n  })();\n\n  module.controller(\"CommentsCtrl\", CommentsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentsDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initializePermissions();\n    };\n    return {\n      scope: {\n        type: \"<\",\n        name: \"@\",\n        object: \"@\",\n        comments: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onAddComment: \"&\",\n        onEditComment: \"&\",\n        editMode: \"<\",\n        loading: \"<\",\n        deleting: \"<\",\n        editing: \"<\",\n        project: \"=\",\n        reverse: \"=\"\n      },\n      templateUrl: \"history/comments/comments.html\",\n      bindToController: true,\n      controller: 'CommentsCtrl',\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgComments\", CommentsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  LightboxDisplayHistoricController = (function() {\n    LightboxDisplayHistoricController.$inject = [\"$tgResources\"];\n\n    function LightboxDisplayHistoricController(rs) {\n      this.rs = rs;\n    }\n\n    LightboxDisplayHistoricController.prototype._loadHistoric = function() {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.object;\n      activityId = this.comment.id;\n      return this.rs.history.getCommentHistory(type, objectId, activityId).then((function(_this) {\n        return function(data) {\n          return _this.commentHistoryEntries = data;\n        };\n      })(this));\n    };\n\n    return LightboxDisplayHistoricController;\n\n  })();\n\n  module.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricDirective;\n\n  LightboxDisplayHistoricDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._loadHistoric();\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        name: '=',\n        object: '=',\n        comment: '='\n      },\n      templateUrl: \"history/history-lightbox/comment-history-lightbox.html\",\n      controller: \"LightboxDisplayHistoricCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  LightboxDisplayHistoricDirective.$inject = [\"lightboxService\"];\n\n  angular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryEntryDirective;\n\n  HistoryEntryDirective = function() {\n    return {\n      scope: {\n        entry: \"<\"\n      },\n      templateUrl: \"history/history-lightbox/history-entry.html\"\n    };\n  };\n\n  angular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryTabsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryTabsDirective = function() {\n    return {\n      templateUrl: \"history/history-tabs/history-tabs.html\",\n      scope: {\n        showCommentTab: \"&\",\n        showActivityTab: \"&\",\n        onActiveComments: \"&\",\n        onActiveActivities: \"&\",\n        onOrderComments: \"&\",\n        activeTab: \"<\",\n        commentsNum: \"<\",\n        activitiesNum: \"<\",\n        onReverse: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgHistoryTabs\", HistoryTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  HistorySectionController = (function() {\n    HistorySectionController.$inject = [\"$tgResources\", \"$tgRepo\", \"$tgStorage\", \"tgProjectService\", \"tgActivityService\", \"tgWysiwygService\"];\n\n    function HistorySectionController(rs, repo, storage, projectService, activityService, wysiwygService) {\n      this.rs = rs;\n      this.repo = repo;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.activityService = activityService;\n      this.wysiwygService = wysiwygService;\n      this.editing = null;\n      this.deleting = null;\n      this.editMode = {};\n      this.viewComments = true;\n      this.reverse = this.storage.get(\"orderComments\");\n      taiga.defineImmutableProperty(this, 'disabledActivityPagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingActivity', (function(_this) {\n        return function() {\n          return _this.activityService.loading;\n        };\n      })(this));\n    }\n\n    HistorySectionController.prototype._loadHistory = function() {\n      this._loadComments();\n      return this._loadActivity();\n    };\n\n    HistorySectionController.prototype._loadActivity = function() {\n      this.activityService.init(this.name, this.id);\n      return this.activityService.fetchEntries().then((function(_this) {\n        return function(response) {\n          _this.activitiesNum = _this.activityService.count;\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype._loadComments = function() {\n      return this.rs.history.get(this.name, this.id, 'comment').then((function(_this) {\n        return function(comments) {\n          _this.comments = _.filter(comments, function(item) {\n            return item.comment !== \"\";\n          });\n          if (_this.reverse) {\n            _this.comments - _.reverse(_this.comments);\n          }\n          return _this.commentsNum = _this.comments.length;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.nextActivityPage = function() {\n      return this.activityService.nextPage().then((function(_this) {\n        return function(response) {\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.showHistorySection = function() {\n      return this.showCommentTab() || this.showActivityTab();\n    };\n\n    HistorySectionController.prototype.showCommentTab = function() {\n      return this.commentsNum > 0 || this.projectService.hasPermission(\"comment_\" + this.name);\n    };\n\n    HistorySectionController.prototype.showActivityTab = function() {\n      return this.activitiesNum > 0;\n    };\n\n    HistorySectionController.prototype.toggleEditMode = function(commentId) {\n      return this.editMode[commentId] = !this.editMode[commentId];\n    };\n\n    HistorySectionController.prototype.onActiveHistoryTab = function(active) {\n      return this.viewComments = active;\n    };\n\n    HistorySectionController.prototype.deleteComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.deleting = commentId;\n      return this.rs.history.deleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.deleting = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.editComment = function(commentId, comment) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.editComment(type, objectId, activityId, comment).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          _this.toggleEditMode(commentId);\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.restoreDeletedComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.undeleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.addComment = function() {\n      this.editMode = {};\n      this.editing = null;\n      return this._loadComments();\n    };\n\n    HistorySectionController.prototype.onOrderComments = function() {\n      this.reverse = !this.reverse;\n      this.storage.set(\"orderComments\", this.reverse);\n      return this._loadComments();\n    };\n\n    return HistorySectionController;\n\n  })();\n\n  module.controller(\"HistorySection\", HistorySectionController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionDirective, bindOnce, module;\n\n  module = angular.module('taigaHistory');\n\n  bindOnce = this.taiga.bindOnce;\n\n  HistorySectionDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      scope.$on(\"object:updated\", function() {\n        return ctrl._loadActivity();\n      });\n      return scope.$watch('vm.id', function(value) {\n        return ctrl._loadHistory();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"history/history.html\",\n      controller: \"HistorySection\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: \"=\",\n        name: \"@\",\n        id: \"=\",\n        project: \"=\"\n      }\n    };\n  };\n\n  HistorySectionDirective.$inject = [];\n\n  module.directive(\"tgHistorySection\", HistorySectionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivitiesDiffController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  ActivitiesDiffController = (function() {\n    ActivitiesDiffController.$inject = [];\n\n    function ActivitiesDiffController() {}\n\n    ActivitiesDiffController.prototype.diffTags = function() {\n      var diff;\n      if (this.type === 'tags') {\n        this.diffRemoveTags = _.difference(this.diff[0], this.diff[1]).toString();\n        return this.diffAddTags = _.difference(this.diff[1], this.diff[0]).toString();\n      } else if (this.type === 'promoted_to') {\n        diff = _.difference(this.diff[1], this.diff[0]);\n        return this.promotedTo = _.filter(this.model.generated_user_stories, (function(_this) {\n          return function(x) {\n            return _.includes(diff, x.id);\n          };\n        })(this));\n      }\n    };\n\n    return ActivitiesDiffController;\n\n  })();\n\n  module.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDiffDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDiffDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.diffTags();\n    };\n    return {\n      scope: {\n        model: \"<\",\n        type: \"<\",\n        diff: \"<\"\n      },\n      templateUrl: \"history/history/history-diff.html\",\n      controller: \"ActivitiesDiffCtrl\",\n      controllerAs: 'vm',\n      bindToController: true,\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistoryDiff\", HistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      scope: {\n        activities: \"<\",\n        model: \"<\"\n      },\n      templateUrl: \"history/history/history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistory\", HistoryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DutyDirective;\n\n  DutyDirective = function(navurls, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.duty = scope.duty;\n      scope.vm.type = scope.type;\n      scope.vm.isHidden = scope.isHidden;\n      scope.vm.getDutyType = function() {\n        if (scope.vm.duty) {\n          if (scope.vm.duty.get('_name') === \"epics\") {\n            return $translate.instant(\"COMMON.EPIC\");\n          }\n          if (scope.vm.duty.get('_name') === \"userstories\") {\n            return $translate.instant(\"COMMON.USER_STORY\");\n          }\n          if (scope.vm.duty.get('_name') === \"tasks\") {\n            return $translate.instant(\"COMMON.TASK\");\n          }\n          if (scope.vm.duty.get('_name') === \"issues\") {\n            return $translate.instant(\"COMMON.ISSUE\");\n          }\n        }\n      };\n      return el.on(\"click\", \".button-hide\", function(event) {\n        event.preventDefault();\n        el.remove();\n        return scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type);\n      });\n    };\n    return {\n      templateUrl: \"home/duties/duty.html\",\n      scope: {\n        \"duty\": \"=tgDuty\",\n        \"isHidden\": \"=\",\n        \"type\": \"@\"\n      },\n      link: link\n    };\n  };\n\n  DutyDirective.$inject = [\"$tgNavUrls\", \"$translate\"];\n\n  angular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeController;\n\n  HomeController = (function() {\n    HomeController.$inject = [\"tgCurrentUserService\", \"$location\", \"$tgNavUrls\"];\n\n    function HomeController(currentUserService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      if (!this.currentUserService.getUser()) {\n        this.location.path(this.navUrls.resolve(\"discover\"));\n      }\n    }\n\n    return HomeController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"Home\", HomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  HomeService = (function(superClass) {\n    extend(HomeService, superClass);\n\n    HomeService.$inject = [\"$tgNavUrls\", \"tgResources\", \"tgProjectsService\", \"$q\"];\n\n    function HomeService(navurls, rs, projectsService, q) {\n      this.navurls = navurls;\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this.q = q;\n    }\n\n    HomeService.prototype._attachProjectInfoToWorkInProgress = function(workInProgress, projectsById) {\n      var _attachProjectInfoToDuty, _duties, _getValidDutiesAndAttachProjectInfo, assignedTo, watching;\n      _attachProjectInfoToDuty = (function(_this) {\n        return function(duty, objType) {\n          var ctx, project, url;\n          project = projectsById.get(String(duty.get('project')));\n          ctx = {\n            project: project.get('slug'),\n            ref: duty.get('ref')\n          };\n          url = _this.navurls.resolve(\"project-\" + objType + \"-detail\", ctx);\n          duty = duty.set('url', url);\n          duty = duty.set('project', project);\n          duty = duty.set(\"_name\", objType);\n          return duty;\n        };\n      })(this);\n      _getValidDutiesAndAttachProjectInfo = function(duties, dutyType) {\n        duties = duties.filter(function(duty) {\n          return projectsById.get(String(duty.get('project')));\n        });\n        duties = duties.map(function(duty) {\n          return _attachProjectInfoToDuty(duty, dutyType);\n        });\n        return duties;\n      };\n      assignedTo = workInProgress.get(\"assignedTo\");\n      if (assignedTo.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\");\n        assignedTo = assignedTo.set(\"epics\", _duties);\n      }\n      if (assignedTo.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\");\n        assignedTo = assignedTo.set(\"userStories\", _duties);\n      }\n      if (assignedTo.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\");\n        assignedTo = assignedTo.set(\"tasks\", _duties);\n      }\n      if (assignedTo.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\");\n        assignedTo = assignedTo.set(\"issues\", _duties);\n      }\n      watching = workInProgress.get(\"watching\");\n      if (watching.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\");\n        watching = watching.set(\"epics\", _duties);\n      }\n      if (watching.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\");\n        watching = watching.set(\"userStories\", _duties);\n      }\n      if (watching.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\");\n        watching = watching.set(\"tasks\", _duties);\n      }\n      if (watching.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\");\n        watching = watching.set(\"issues\", _duties);\n      }\n      workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n      return workInProgress = workInProgress.set(\"watching\", watching);\n    };\n\n    HomeService.prototype.getWorkInProgress = function(userId) {\n      var assignedEpicsPromise, assignedIssuesPromise, assignedTasksPromise, assignedTo, assignedUserStoriesPromise, params_epics, params_issues, params_tasks, params_uss, projectsById, projectsPromise, watching, watchingEpicsPromise, watchingIssuesPromise, watchingTasksPromise, watchingUserStoriesPromise, workInProgress;\n      projectsById = Immutable.Map();\n      projectsPromise = this.projectsService.getListProjectsByUserId(userId).then(function(projects) {\n        return projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n          return p.id;\n        }));\n      });\n      assignedTo = Immutable.Map();\n      params_epics = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_uss = {\n        is_closed: false,\n        assigned_users: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      assignedEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return assignedTo = assignedTo.set(\"epics\", epics);\n      });\n      assignedUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return assignedTo = assignedTo.set(\"userStories\", userstories);\n      });\n      assignedTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return assignedTo = assignedTo.set(\"tasks\", tasks);\n      });\n      assignedIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return assignedTo = assignedTo.set(\"issues\", issues);\n      });\n      params_epics = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_uss = {\n        is_closed: false,\n        watchers: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      watching = Immutable.Map();\n      watchingEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return watching = watching.set(\"epics\", epics);\n      });\n      watchingUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return watching = watching.set(\"userStories\", userstories);\n      });\n      watchingTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return watching = watching.set(\"tasks\", tasks);\n      });\n      watchingIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return watching = watching.set(\"issues\", issues);\n      });\n      workInProgress = Immutable.Map();\n      return this.q.all([projectsPromise, assignedEpicsPromise, watchingEpicsPromise, assignedUserStoriesPromise, watchingUserStoriesPromise, assignedTasksPromise, watchingTasksPromise, assignedIssuesPromise, watchingIssuesPromise]).then((function(_this) {\n        return function() {\n          workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n          workInProgress = workInProgress.set(\"watching\", watching);\n          workInProgress = _this._attachProjectInfoToWorkInProgress(workInProgress, projectsById);\n          return workInProgress;\n        };\n      })(this));\n    };\n\n    return HomeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaHome\").service(\"tgHomeService\", HomeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeProjectListDirective;\n\n  HomeProjectListDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      return taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n    };\n    directive = {\n      templateUrl: \"home/projects/home-project-list.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  HomeProjectListDirective.$inject = [\"tgCurrentUserService\"];\n\n  angular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnController;\n\n  WorkingOnController = (function() {\n    WorkingOnController.$inject = [\"tgHomeService\"];\n\n    function WorkingOnController(homeService) {\n      this.homeService = homeService;\n      this.assignedTo = Immutable.Map();\n      this.hiddenAssignedTo = [];\n      this.showHiddenAssignedTo = false;\n      this.watching = Immutable.Map();\n      this.showHiddenWatching = false;\n    }\n\n    WorkingOnController.prototype._setAssignedTo = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"assignedTo\").get(\"epics\");\n      userStories = workInProgress.get(\"assignedTo\").get(\"userStories\");\n      tasks = workInProgress.get(\"assignedTo\").get(\"tasks\");\n      issues = workInProgress.get(\"assignedTo\").get(\"issues\");\n      this.assignedTo = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.assignedTo.size > 0) {\n        return this.assignedTo = this.assignedTo.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype._setWatching = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"watching\").get(\"epics\");\n      userStories = workInProgress.get(\"watching\").get(\"userStories\");\n      tasks = workInProgress.get(\"watching\").get(\"tasks\");\n      issues = workInProgress.get(\"watching\").get(\"issues\");\n      this.watching = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.watching.size > 0) {\n        return this.watching = this.watching.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype.getWorkInProgress = function(userId) {\n      return this.homeService.getWorkInProgress(userId).then((function(_this) {\n        return function(workInProgress) {\n          _this._setAssignedTo(workInProgress);\n          return _this._setWatching(workInProgress);\n        };\n      })(this));\n    };\n\n    return WorkingOnController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnDirective, generateHash, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  WorkingOnDirective = function(homeService, currentUserService, storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getHiddenDuties, getShowHiddenDuties, i, len, slot, slots, toggleDutyHidden, updateHiddenDuties, updateShowHiddenDuties, user, userId;\n      updateShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.showHiddenDuties[slot]);\n      };\n      getShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.get(hash) || false;\n      };\n      updateHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.hiddenDuties[slot]);\n      };\n      getHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.get(hash) || [];\n      };\n      toggleDutyHidden = function(duty, slot) {\n        var ref;\n        if (ref = duty.get('id'), indexOf.call(scope.hiddenDuties[slot], ref) >= 0) {\n          scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1);\n        } else {\n          scope.hiddenDuties[slot].push(duty.get('id'));\n        }\n        updateHiddenDuties(slot);\n        return scope.$apply();\n      };\n      user = currentUserService.getUser();\n      if (!user) {\n        return;\n      }\n      userId = user.get(\"id\");\n      ctrl.getWorkInProgress(userId);\n      slots = ['working-on', 'watching'];\n      scope.hiddenDuties = {};\n      scope.showHiddenDuties = {};\n      scope.toggleShowHiddenDuties = function(slot) {\n        if (!(indexOf.call(slots, slot) >= 0)) {\n          return console.error(\"Invalid duties slot `\" + slot + \"`\");\n        }\n        scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot];\n        return updateShowHiddenDuties(slot);\n      };\n      for (i = 0, len = slots.length; i < len; i++) {\n        slot = slots[i];\n        scope.hiddenDuties[slot] = getHiddenDuties(slot);\n        scope.showHiddenDuties[slot] = getShowHiddenDuties(slot);\n      }\n      return scope.$on(\"duty:toggle-hidden\", (function(_this) {\n        return function(event, duty, slot) {\n          if (!(indexOf.call(slots, slot) >= 0)) {\n            return console.error(\"Invalid duties slot `\" + slot + \"`\");\n          }\n          return toggleDutyHidden(duty, slot);\n        };\n      })(this));\n    };\n    return {\n      controller: \"WorkingOn\",\n      controllerAs: \"vm\",\n      templateUrl: \"home/working-on/working-on.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  WorkingOnDirective.$inject = [\"tgHomeService\", \"tgCurrentUserService\", \"$tgStorage\"];\n\n  angular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormController, taiga;\n\n  taiga = this.taiga;\n\n  InviteMembersFormController = (function() {\n    InviteMembersFormController.$inject = [\"tgProjectService\", \"$tgResources\", \"lightboxService\", \"$tgConfirm\", \"$rootScope\"];\n\n    function InviteMembersFormController(projectService, rs, lightboxService, confirm, rootScope) {\n      this.projectService = projectService;\n      this.rs = rs;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.rootScope = rootScope;\n      this.project = this.projectService.project;\n      this.roles = this.projectService.project.get('roles');\n      this.rolesValues = {};\n      this.loading = false;\n      this.defaultMaxInvites = 4;\n    }\n\n    InviteMembersFormController.prototype._areRolesValidated = function() {\n      return Object.defineProperty(this, 'areRolesValidated', {\n        get: (function(_this) {\n          return function() {\n            var roleIds;\n            roleIds = _.filter(_.values(_this.rolesValues), function(it) {\n              return it;\n            });\n            return roleIds.length === _this.contactsToInvite.size + _this.emailsToInvite.size;\n          };\n        })(this)\n      });\n    };\n\n    InviteMembersFormController.prototype._checkLimitMemberships = function() {\n      var pendingMembersCount;\n      if (this.project.get('max_memberships') === null) {\n        this.membersLimit = this.defaultMaxInvites;\n      } else {\n        pendingMembersCount = Math.max(this.project.get('max_memberships') - this.project.get('total_memberships'), 0);\n        this.membersLimit = Math.min(pendingMembersCount, this.defaultMaxInvites);\n      }\n      return this.showWarningMessage = this.membersLimit < this.defaultMaxInvites;\n    };\n\n    InviteMembersFormController.prototype.sendInvites = function() {\n      this.setInvitedContacts = [];\n      _.forEach(this.rolesValues, (function(_this) {\n        return function(key, value) {\n          return _this.setInvitedContacts.push({\n            'role_id': key,\n            'username': value\n          });\n        };\n      })(this));\n      this.loading = true;\n      return this.rs.memberships.bulkCreateMemberships(this.project.get('id'), this.setInvitedContacts, this.inviteContactsMessage).then((function(_this) {\n        return function(response) {\n          return _this.projectService.fetchProject().then(function() {\n            _this.loading = false;\n            _this.lightboxService.closeAll();\n            _this.rootScope.$broadcast(\"membersform:new:success\");\n            return _this.confirm.notify('success');\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          } else if (response.data.__all__) {\n            return _this.confirm.notify(\"error\", response.data.__all__[0]);\n          }\n        };\n      })(this));\n    };\n\n    return InviteMembersFormController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormDirective;\n\n  InviteMembersFormDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._areRolesValidated();\n      return ctrl._checkLimitMemberships();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/invite-members-form/invite-members-form.html\",\n      controller: \"InviteMembersFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contactsToInvite: '<',\n        emailsToInvite: '=',\n        onDisplayContactList: '&',\n        onRemoveInvitedContact: '&',\n        onRemoveInvitedEmail: '&',\n        onSendInvites: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  AddMembersController = (function() {\n    AddMembersController.$inject = [\"tgUserService\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function AddMembersController(userService, currentUserService, projectService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n      this.contactsToInvite = Immutable.List();\n      this.emailsToInvite = Immutable.List();\n      this.contacts = Immutable.List();\n      this.displayContactList = false;\n    }\n\n    AddMembersController.prototype._getContacts = function() {\n      var excludeProjectId, userId;\n      userId = this.currentUserService.getUser().get(\"id\");\n      excludeProjectId = this.projectService.project.get(\"id\");\n      return this.userService.getContacts(userId, excludeProjectId).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype._filterContacts = function(invited) {\n      return this.contacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.get('id');\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype.inviteSuggested = function(contact) {\n      this.contactsToInvite = this.contactsToInvite.push(contact);\n      this._filterContacts(contact);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeContact = function(invited) {\n      this.contactsToInvite = this.contactsToInvite.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.id;\n        };\n      })(this));\n      invited = Immutable.fromJS(invited);\n      this.contacts = this.contacts.push(invited);\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.inviteEmail = function(email) {\n      var emailData;\n      emailData = Immutable.Map({\n        'email': email\n      });\n      this.emailsToInvite = this.emailsToInvite.push(emailData);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeEmail = function(invited) {\n      this.emailsToInvite = this.emailsToInvite.filter((function(_this) {\n        return function(email) {\n          return email.get('email') !== invited.email;\n        };\n      })(this));\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.testEmptyContacts = function() {\n      if (this.emailsToInvite.size + this.contactsToInvite.size === 0) {\n        return this.displayContactList = false;\n      }\n    };\n\n    return AddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxAddMembersDirective;\n\n  LightboxAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      return ctrl._getContacts();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/lightbox-add-members.html\",\n      controller: \"AddMembersCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  SuggestAddMembersController = (function() {\n    SuggestAddMembersController.$inject = [];\n\n    function SuggestAddMembersController() {\n      this.contactQuery = \"\";\n    }\n\n    SuggestAddMembersController.prototype.isEmail = function() {\n      return taiga.isEmail(this.contactQuery);\n    };\n\n    SuggestAddMembersController.prototype.filterContacts = function() {\n      return this.filteredContacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('full_name_display').toLowerCase().includes(_this.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(_this.contactQuery.toLowerCase());\n        };\n      })(this)).slice(0, 12);\n    };\n\n    SuggestAddMembersController.prototype.setInvited = function(contact) {\n      return this.onInviteSuggested({\n        'contact': contact\n      });\n    };\n\n    return SuggestAddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersDirective;\n\n  SuggestAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.contacts\", (function(_this) {\n        return function(contacts) {\n          if (contacts) {\n            return ctrl.filterContacts();\n          }\n        };\n      })(this));\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/suggest-add-members/suggest-add-members.html\",\n      controller: \"SuggestAddMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contacts: '=',\n        onInviteSuggested: '&',\n        onInviteEmail: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownNotificationsDirective, timeout;\n\n  timeout = this.taiga.timeout;\n\n  DropdownNotificationsDirective = function($rootScope, notificationsService, currentUserService) {\n    var directive, link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $scope.notificationsList = [];\n      $scope.loading = false;\n      $scope.$on(\"notifications:loaded\", function(event, total) {\n        $scope.loading = false;\n        if ($scope.total !== void 0 && total > $scope.total) {\n          $scope.newEvent = true;\n          timeout(100, function() {\n            $scope.total = total;\n            return $scope.$apply();\n          });\n          return timeout(2000, function() {\n            return $scope.newEvent = false;\n          });\n        } else {\n          return $scope.total = total;\n        }\n      });\n      $scope.$on(\"notifications:loading\", function() {\n        return $scope.loading = true;\n      });\n      return $scope.setAllAsRead = function() {\n        return notificationsService.setNotificationsAsRead().then(function() {\n          return $rootScope.$emit(\"notifications:dismiss-all\");\n        });\n      };\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\", \"tgCurrentUserService\", DropdownNotificationsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownProjectListDirective;\n\n  DropdownProjectListDirective = function(rootScope, currentUserService, projectsService, projectService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var updateLinks;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"currentProject\", function() {\n        if (projectService.project) {\n          return projectService.project.get('id');\n        }\n        return null;\n      });\n      scope.vm.newProject = function() {\n        return projectsService.newProject();\n      };\n      updateLinks = function() {\n        return el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\");\n      };\n      return rootScope.$on(\"dropdown-project-list:updated\", updateLinks);\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownProjectListDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgProjectsService\", \"tgProjectService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownUserDirective;\n\n  DropdownUserDirective = function(authService, configService, locationService, navUrlsService, $rootScope) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\");\n      scope.vm.customSupportUrl = configService.get(\"supportUrl\");\n      taiga.defineImmutableProperty(scope.vm, \"user\", function() {\n        return authService.userData;\n      });\n      scope.vm.logout = function() {\n        authService.logout();\n        locationService.url(navUrlsService.resolve(\"discover\"));\n        return locationService.search({});\n      };\n      return scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {\n        userMenu: true\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownUserDirective.$inject = [\"$tgAuth\", \"$tgConfig\", \"$tgLocation\", \"$tgNavUrls\", \"$rootScope\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarDirective;\n\n  NavigationBarDirective = function(currentUserService, navigationBarService, locationService, navUrlsService, config, feedbackService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var attempts, loadUserPilot, userPilotInterval;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", function() {\n        return currentUserService.isAuthenticated();\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", function() {\n        return navigationBarService.isEnabledHeader();\n      });\n      scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      scope.vm.customSupportUrl = config.get(\"supportUrl\");\n      scope.vm.isFeedbackEnabled = config.get(\"feedbackEnabled\");\n      loadUserPilot = (function(_this) {\n        return function() {\n          var userPilotIframe;\n          userPilotIframe = document.querySelector('#userpilot-resource-centre-frame');\n          if (userPilotIframe) {\n            return scope.$applyAsync(function() {\n              var userPilotIframeDocument, widget;\n              userPilotIframeDocument = userPilotIframe.contentWindow.document.body;\n              widget = userPilotIframeDocument.querySelector('#widget-title');\n              if (widget) {\n                scope.vm.userPilotTitle = widget.innerText;\n                return clearInterval(userPilotInterval);\n              }\n            });\n          }\n        };\n      })(this);\n      attempts = 10;\n      if (window.TAIGA_USER_PILOT_TOKEN) {\n        scope.vm.userPilotTitle = 'Help center';\n        scope.vm.userpilotEnabled = true;\n        userPilotInterval = setInterval((function(_this) {\n          return function() {\n            loadUserPilot();\n            attempts--;\n            if (!attempts) {\n              return clearInterval(userPilotInterval);\n            }\n          };\n        })(this), 1000);\n      }\n      scope.vm.login = function() {\n        var nextUrl;\n        nextUrl = encodeURIComponent(locationService.url());\n        locationService.url(navUrlsService.resolve(\"login\"));\n        return locationService.search({\n          next: nextUrl\n        });\n      };\n      scope.vm.sendFeedback = function() {\n        return feedbackService.sendFeedback();\n      };\n      window._taigaSendFeedback = scope.vm.sendFeedback;\n      return scope.$on(\"$routeChangeSuccess\", function() {\n        var path;\n        scope.vm.active = null;\n        path = locationService.path();\n        switch (path) {\n          case \"/\":\n            return scope.vm.active = 'dashboard';\n          case \"/discover\":\n            return scope.vm.active = 'discover';\n          case \"/notifications\":\n            return scope.vm.active = 'notifications';\n          case \"/projects/\":\n            return scope.vm.active = 'projects';\n          default:\n            if (path.startsWith('/project')) {\n              return scope.vm.active = 'project';\n            }\n        }\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/navigation-bar.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  NavigationBarDirective.$inject = [\"tgCurrentUserService\", \"tgNavigationBarService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"tgFeedbackService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NavigationBarService = (function(superClass) {\n    extend(NavigationBarService, superClass);\n\n    function NavigationBarService() {\n      this.disableHeader();\n    }\n\n    NavigationBarService.prototype.enableHeader = function() {\n      return this.enabledHeader = true;\n    };\n\n    NavigationBarService.prototype.disableHeader = function() {\n      return this.enabledHeader = false;\n    };\n\n    NavigationBarService.prototype.isEnabledHeader = function() {\n      return this.enabledHeader;\n    };\n\n    return NavigationBarService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsListDirective;\n\n  NotificationsListDirective = function() {\n    return {\n      templateUrl: \"notifications/notifications-list/notifications-list.html\",\n      controller: \"Notifications\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        infiniteScrollContainer: \"@\",\n        infiniteScrollDistance: \"=\",\n        infiniteScrollDisabled: \"=\",\n        onlyUnread: \"=onlyUnread\"\n      }\n    };\n  };\n\n  angular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsController, debounceLeading, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  NotificationsController = (function(superClass) {\n    extend(NotificationsController, superClass);\n\n    NotificationsController.$inject = [\"$rootScope\", \"$scope\", \"tgNotificationsService\", \"tgCurrentUserService\", \"$tgEvents\", \"$location\", \"$window\"];\n\n    function NotificationsController(rootScope, scope, notificationsService, currentUserService, events, location, window) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.notificationsService = notificationsService;\n      this.currentUserService = currentUserService;\n      this.events = events;\n      this.location = location;\n      this.window = window;\n      this.total = 0;\n      this.user = this.currentUserService.getUser();\n      this.scrollDisabled = false;\n      this.initList();\n      this.loadNotifications();\n      this.rootScope.$on(\"notifications:dismiss\", (function(_this) {\n        return function(event) {\n          if (_this.onlyUnread) {\n            return _this.reloadList();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:new\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:dismiss-all\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n    }\n\n    NotificationsController.prototype.initList = function() {\n      this.notificationsList = Immutable.List();\n      if (this.user) {\n        this.list = this.notificationsService.getNotificationsList(this.user.get(\"id\"), this.onlyUnread != null);\n      }\n      return this.loading = this.list == null;\n    };\n\n    NotificationsController.prototype.reloadList = function() {\n      this.initList();\n      return this.loadNotifications();\n    };\n\n    NotificationsController.prototype.loadNotifications = function() {\n      this.scrollDisabled = true;\n      this.loading = true;\n      this.scope.$emit(\"notifications:loading\");\n      return this.list.next().then((function(_this) {\n        return function(response) {\n          _this.notificationsList = _this.notificationsList.concat(response.get(\"items\"));\n          if (!_this.infiniteScrollDisabled && response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          _this.total = response.get(\"total\");\n          _this.scope.$emit(\"notifications:loaded\", _this.total);\n          _this.loading = false;\n          return _this.notificationsList;\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAsRead = function(notification, url) {\n      return this.notificationsService.setNotificationAsRead(notification.get(\"id\")).then((function(_this) {\n        return function() {\n          if (_this.location.$$url === url) {\n            _this.window.location.reload();\n          } else {\n            _this.location.path(url);\n          }\n          return _this.rootScope.$broadcast(\"notifications:dismiss\");\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAllAsRead = function() {\n      return this.notificationsService.setNotificationsAsRead().then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"notifications:dismiss-all\");\n        };\n      })(this));\n    };\n\n    return NotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  NotificationsService = (function(superClass) {\n    var _notificationTypes, _params;\n\n    extend(NotificationsService, superClass);\n\n    NotificationsService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"$translate\", \"$tgNavUrls\", \"$tgSections\"];\n\n    _notificationTypes = [\n      {\n        check: function(notification) {\n          return notification.get('event_type') === 1;\n        },\n        key: 'EVENTS.ASSIGNED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 2;\n        },\n        key: 'EVENTS.MENTIONED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 3;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_WATCHER',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 4;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_MEMBER',\n        translate_params: ['username']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 5;\n        },\n        key: 'EVENTS.COMMENTED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 6;\n        },\n        key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\n        translate_params: ['username', 'obj_name']\n      }\n    ];\n\n    _params = {\n      username: function(notification) {\n        var title_attr, url, user;\n        user = notification.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = this.navUrls.resolve('user-profile', {\n            username: notification.getIn(['data', 'user', 'username'])\n          });\n          return this._getLink(notification, url, user.get('name'), 'user-link', title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      project_name: function(notification) {\n        var url;\n        url = this.navUrls.resolve('project', {\n          project: notification.getIn(['data', 'project', 'slug'])\n        });\n        return this._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link');\n      },\n      obj_name: function(notification) {\n        var obj, text, url;\n        obj = this._getNotificationObject(notification);\n        url = this._getDetailObjUrl(notification, obj.get('content_type'));\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(notification, url, text, 'object-link');\n      }\n    };\n\n    function NotificationsService(rs, userTimelinePaginationSequenceService, translate, navUrls, tgSections) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.translate = translate;\n      this.navUrls = navUrls;\n      this.tgSections = tgSections;\n    }\n\n    NotificationsService.prototype.getNotificationsList = function(userId, onlyUnread) {\n      var config, total;\n      total = 0;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getNotifications(userId, page, onlyUnread).then(function(response) {\n            return response;\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addNotificationAttributes(obj);\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    NotificationsService.prototype.setNotificationAsRead = function(notificationId) {\n      return this.rs.users.setNotificationAsRead(notificationId);\n    };\n\n    NotificationsService.prototype.setNotificationsAsRead = function() {\n      return this.rs.users.setNotificationsAsRead();\n    };\n\n    NotificationsService.prototype._getNotificationObject = function(notification) {\n      if (notification.get('data').get('obj')) {\n        return notification.get('data').get('obj');\n      }\n    };\n\n    NotificationsService.prototype._getType = function(notification) {\n      return _.find(_notificationTypes, function(obj) {\n        return obj.check(notification);\n      });\n    };\n\n    NotificationsService.prototype._addNotificationAttributes = function(notification) {\n      var event_type, projectSectionPath, projectSlug, projectUrl, title, type;\n      event_type = notification.get('event_type');\n      type = this._getType(notification);\n      title = this._getTitle(notification, event_type, type);\n      notification = notification.set('title_html', title);\n      projectSlug = notification.getIn(['data', 'project', 'slug']);\n      projectSectionPath = this.tgSections.getPath(projectSlug);\n      projectUrl = this.navUrls.resolve(\"project-\" + projectSectionPath, {\n        project: projectSlug\n      });\n      notification = notification.set('projectUrl', projectUrl);\n      notification = notification.set('obj', this._getNotificationObject(notification));\n      return notification;\n    };\n\n    NotificationsService.prototype._translateTitleParams = function(param, notification, event) {\n      return _params[param].call(this, notification, event);\n    };\n\n    NotificationsService.prototype._getDetailObjUrl = function(notification, contentType) {\n      var url, urlMapping;\n      urlMapping = {\n        \"issue\": \"project-issues-detail\",\n        \"task\": \"project-tasks-detail\",\n        \"userstory\": \"project-userstories-detail\"\n      };\n      url = this.navUrls.resolve(urlMapping[contentType], {\n        project: notification.getIn(['data', 'project', 'slug']),\n        ref: notification.getIn(['data', 'obj', 'ref'])\n      });\n      return url;\n    };\n\n    NotificationsService.prototype._getLink = function(notification, url, text, css, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a href=\"\">').attr('title', title).attr('class', css).attr('ng-click', \"vm.setAsRead(notification, \\\"\" + url + \"\\\")\").append(span).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getParams = function(notification, event_type, notification_type) {\n      var params;\n      params = {};\n      notification_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, notification, event_type);\n        };\n      })(this));\n      return params;\n    };\n\n    NotificationsService.prototype._getTitle = function(notification, event_type, notification_type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(notification, event_type, notification_type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(notification_type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return NotificationsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarController;\n\n  ProfileBarController = (function() {\n    ProfileBarController.$inject = [\"tgUserService\"];\n\n    function ProfileBarController(userService) {\n      this.userService = userService;\n      this.loadStats();\n    }\n\n    ProfileBarController.prototype.loadStats = function() {\n      return this.userService.getStats(this.user.get(\"id\")).then((function(_this) {\n        return function(stats) {\n          return _this.stats = stats;\n        };\n      })(this));\n    };\n\n    return ProfileBarController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarDirective;\n\n  ProfileBarDirective = function() {\n    return {\n      templateUrl: \"profile/profile-bar/profile-bar.html\",\n      controller: \"ProfileBar\",\n      controllerAs: \"vm\",\n      scope: {\n        user: \"=user\",\n        isCurrentUser: \"=iscurrentuser\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsController;\n\n  ProfileContactsController = (function() {\n    ProfileContactsController.$inject = [\"tgUserService\", \"tgCurrentUserService\"];\n\n    function ProfileContactsController(userService, currentUserService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.currentUser = this.currentUserService.getUser();\n      this.isCurrentUser = false;\n      if (this.currentUser && this.currentUser.get(\"id\") === this.user.get(\"id\")) {\n        this.isCurrentUser = true;\n      }\n    }\n\n    ProfileContactsController.prototype.loadContacts = function() {\n      return this.userService.getContacts(this.user.get(\"id\")).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    return ProfileContactsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileContacts\", ProfileContactsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsDirective;\n\n  ProfileContactsDirective = function() {\n    var link;\n    link = function(scope, elm, attrs, ctrl) {\n      return ctrl.loadContacts();\n    };\n    return {\n      templateUrl: \"profile/profile-contacts/profile-contacts.html\",\n      scope: {\n        user: \"=\"\n      },\n      controllerAs: \"vm\",\n      controller: \"ProfileContacts\",\n      link: link,\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavItemDirective;\n\n  FavItemDirective = function() {\n    var link, templateUrl;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.vm = {\n        item: scope.item\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.itemType === \"project\") {\n        return \"profile/profile-favs/items/project.html\";\n      } else {\n        return \"profile/profile-favs/items/ticket.html\";\n      }\n    };\n    return {\n      scope: {\n        \"item\": \"=tgFavItem\"\n      },\n      link: link,\n      templateUrl: templateUrl\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavsBaseController, ProfileLikedController, ProfileVotedController, ProfileWatchedController, debounceLeading,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  FavsBaseController = (function() {\n    function FavsBaseController() {\n      this._init();\n    }\n\n    FavsBaseController.prototype._init = function() {\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = true;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._resetList();\n      this.q = null;\n      return this.type = null;\n    };\n\n    FavsBaseController.prototype._resetList = function() {\n      this.items = Immutable.List();\n      this.scrollDisabled = false;\n      return this._page = 1;\n    };\n\n    FavsBaseController.prototype._enableLoadingSpinner = function() {\n      return this.isLoading = true;\n    };\n\n    FavsBaseController.prototype._disableLoadingSpinner = function() {\n      return this.isLoading = false;\n    };\n\n    FavsBaseController.prototype._enableScroll = function() {\n      return this.scrollDisabled = false;\n    };\n\n    FavsBaseController.prototype._disableScroll = function() {\n      return this.scrollDisabled = true;\n    };\n\n    FavsBaseController.prototype._checkIfHasMorePages = function(hasNext) {\n      if (hasNext) {\n        this._page += 1;\n        return this._enableScroll();\n      } else {\n        return this._disableScroll();\n      }\n    };\n\n    FavsBaseController.prototype._checkIfHasNoResults = function() {\n      return this.hasNoResults = this.items.size === 0;\n    };\n\n    FavsBaseController.prototype.loadItems = function() {\n      this._enableLoadingSpinner();\n      this._disableScroll();\n      return this._getItems(this.user.get(\"id\"), this._page, this.type, this.q).then((function(_this) {\n        return function(response) {\n          _this.items = _this.items.concat(response.get(\"data\"));\n          _this._checkIfHasMorePages(response.get(\"next\"));\n          _this._checkIfHasNoResults();\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this));\n    };\n\n    FavsBaseController.prototype.filterByTextQuery = debounceLeading(500, function() {\n      this._resetList();\n      return this.loadItems();\n    });\n\n    FavsBaseController.prototype.showAll = function() {\n      if (this.type !== null) {\n        this.type = null;\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showProjectsOnly = function() {\n      if (this.type !== \"project\") {\n        this.type = \"project\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showEpicsOnly = function() {\n      if (this.type !== \"epic\") {\n        this.type = \"epic\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showUserStoriesOnly = function() {\n      if (this.type !== \"userstory\") {\n        this.type = \"userstory\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showTasksOnly = function() {\n      if (this.type !== \"task\") {\n        this.type = \"task\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showIssuesOnly = function() {\n      if (this.type !== \"issue\") {\n        this.type = \"issue\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    return FavsBaseController;\n\n  })();\n\n  ProfileLikedController = (function(superClass) {\n    extend(ProfileLikedController, superClass);\n\n    ProfileLikedController.$inject = [\"tgUserService\"];\n\n    function ProfileLikedController(userService) {\n      this.userService = userService;\n      ProfileLikedController.__super__.constructor.call(this);\n      this.tabName = 'likes';\n      this.enableFilterByAll = false;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = false;\n      this.enableFilterByUserStories = false;\n      this.enableFilterByTasks = false;\n      this.enableFilterByIssues = false;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getLiked;\n    }\n\n    return ProfileLikedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileLiked\", ProfileLikedController);\n\n  ProfileVotedController = (function(superClass) {\n    extend(ProfileVotedController, superClass);\n\n    ProfileVotedController.$inject = [\"tgUserService\"];\n\n    function ProfileVotedController(userService) {\n      this.userService = userService;\n      ProfileVotedController.__super__.constructor.call(this);\n      this.tabName = 'upvotes';\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getVoted;\n    }\n\n    return ProfileVotedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileVoted\", ProfileVotedController);\n\n  ProfileWatchedController = (function(superClass) {\n    extend(ProfileWatchedController, superClass);\n\n    ProfileWatchedController.$inject = [\"tgUserService\"];\n\n    function ProfileWatchedController(userService) {\n      this.userService = userService;\n      ProfileWatchedController.__super__.constructor.call(this);\n      this.tabName = 'watchers';\n      this._getItems = this.userService.getWatched;\n    }\n\n    return ProfileWatchedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileWatched\", ProfileWatchedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileLikedDirective, ProfileVotedDirective, ProfileWatchedDirective, base;\n\n  base = {\n    scope: {},\n    bindToController: {\n      user: \"=\",\n      type: \"@\",\n      q: \"@\",\n      scrollDisabled: \"@\",\n      isLoading: \"@\",\n      hasNoResults: \"@\"\n    },\n    controller: null,\n    controllerAs: \"vm\",\n    templateUrl: \"profile/profile-favs/profile-favs.html\"\n  };\n\n  ProfileLikedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileLiked\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective);\n\n  ProfileVotedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileVoted\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective);\n\n  ProfileWatchedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileWatched\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = (function() {\n    ProfileHints.prototype.HINTS = [\n      {\n        url: \"https://resources.taiga.io/extend/import-export-projects/\"\n      }, {\n        url: \"https://resources.taiga.io/features/customisation/#tier-4-custom-fields-and-due-dates\"\n      }, {}, {}\n    ];\n\n    function ProfileHints(translate) {\n      var hintKey;\n      this.translate = translate;\n      hintKey = Math.floor(Math.random() * this.HINTS.length) + 1;\n      this.hint = this.HINTS[hintKey - 1];\n      this.hint.linkText = this.hint.linkText || 'HINTS.LINK';\n      this.hint.title = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TITLE\");\n      this.hint.text = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TEXT\");\n    }\n\n    return ProfileHints;\n\n  })();\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = function($translate) {\n    return {\n      scope: {},\n      controller: \"ProfileHints\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-hints/profile-hints.html\"\n    };\n  };\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsController;\n\n  ProfileProjectsController = (function() {\n    ProfileProjectsController.$inject = [\"tgProjectsService\", \"tgUserService\"];\n\n    function ProfileProjectsController(projectsService, userService) {\n      this.projectsService = projectsService;\n      this.userService = userService;\n    }\n\n    ProfileProjectsController.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this.user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.userService.attachUserContactsToProjects(_this.user.get(\"id\"), projects);\n        };\n      })(this)).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    return ProfileProjectsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileProjects\", ProfileProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsDirective;\n\n  ProfileProjectsDirective = function() {\n    var link;\n    link = function(scope, elm, attr, ctrl) {\n      return ctrl.loadProjects();\n    };\n    return {\n      templateUrl: \"profile/profile-projects/profile-projects.html\",\n      scope: {\n        user: \"=\"\n      },\n      link: link,\n      bindToController: true,\n      controllerAs: \"vm\",\n      controller: \"ProfileProjects\"\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabDirective;\n\n  ProfileTabDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl, transclude) {\n      scope.tab = {};\n      attrs.$observe(\"tgProfileTab\", function(name) {\n        return scope.tab.name = name;\n      });\n      attrs.$observe(\"tabTitle\", function(title) {\n        return scope.tab.title = title;\n      });\n      scope.tab.icon = attrs.tabIcon;\n      scope.tab.active = !!attrs.tabActive;\n      if (scope.$eval(attrs.tabDisabled) !== true) {\n        return ctrl.addTab(scope.tab);\n      }\n    };\n    return {\n      templateUrl: \"profile/profile-tab/profile-tab.html\",\n      scope: {},\n      require: \"^tgProfileTabs\",\n      link: link,\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTab\", ProfileTabDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsController;\n\n  ProfileTabsController = (function() {\n    function ProfileTabsController() {\n      this.tabs = [];\n    }\n\n    ProfileTabsController.prototype.addTab = function(tab) {\n      return this.tabs.push(tab);\n    };\n\n    ProfileTabsController.prototype.toggleTab = function(tab) {\n      _.map(this.tabs, function(tab) {\n        return tab.active = false;\n      });\n      return tab.active = true;\n    };\n\n    return ProfileTabsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileTabs\", ProfileTabsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsDirective;\n\n  ProfileTabsDirective = function() {\n    return {\n      scope: {},\n      controller: \"ProfileTabs\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-tabs/profile-tabs.html\",\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTabs\", ProfileTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileController;\n\n  ProfileController = (function() {\n    ProfileController.$inject = [\"tgAppMetaService\", \"tgCurrentUserService\", \"$routeParams\", \"tgUserService\", \"tgXhrErrorService\", \"$translate\"];\n\n    function ProfileController(appMetaService, currentUserService, routeParams, userService, xhrError, translate) {\n      this.appMetaService = appMetaService;\n      this.currentUserService = currentUserService;\n      this.routeParams = routeParams;\n      this.userService = userService;\n      this.xhrError = xhrError;\n      this.translate = translate;\n      this.isCurrentUser = false;\n      if (this.routeParams.slug) {\n        this.userService.getUserByUserName(this.routeParams.slug).then((function(_this) {\n          return function(user) {\n            if (!user.get('is_active')) {\n              return _this.xhrError.notFound();\n            } else {\n              _this.user = user;\n              _this.isCurrentUser = false;\n              _this._setMeta(_this.user);\n              return user;\n            }\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(xhr) {\n            return _this.xhrError.response(xhr);\n          };\n        })(this));\n      } else {\n        this.user = this.currentUserService.getUser();\n        this.isCurrentUser = true;\n        this._setMeta(this.user);\n      }\n    }\n\n    ProfileController.prototype._setMeta = function(user) {\n      var ctx, description, title;\n      ctx = {\n        userFullName: user.get(\"full_name_display\"),\n        userUsername: user.get(\"username\")\n      };\n      title = this.translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx);\n      description = user.get(\"bio\");\n      return this.appMetaService.setAll(title, description);\n    };\n\n    return ProfileController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"Profile\", ProfileController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockedProjectExplanationDirective;\n\n  BlockedProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/project/blocked-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonController;\n\n  ContactProjectButtonController = (function() {\n    ContactProjectButtonController.$inject = ['tgLightboxFactory'];\n\n    function ContactProjectButtonController(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    ContactProjectButtonController.prototype.launchContactForm = function() {\n      return this.lightboxFactory.create('tg-lb-contact-project', {\n        \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.project\n      });\n    };\n\n    return ContactProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonDirective;\n\n  ContactProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"ContactProjectButtonCtrl\",\n      bindToController: {\n        project: '=',\n        layout: '@'\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/contact-project-button/contact-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbController;\n\n  ContactProjectLbController = (function() {\n    ContactProjectLbController.$inject = [\"lightboxService\", \"tgResources\", \"$tgConfirm\"];\n\n    function ContactProjectLbController(lightboxService, rs, confirm) {\n      this.lightboxService = lightboxService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.contact = {};\n    }\n\n    ContactProjectLbController.prototype.contactProject = function() {\n      var message, project, promise;\n      project = this.project.get('id');\n      message = this.contact.message;\n      promise = this.rs.projects.contactProject(project, message);\n      this.sendingFeedback = true;\n      return promise.then((function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.sendingFeedback = false;\n          return _this.confirm.notify(\"success\");\n        };\n      })(this));\n    };\n\n    return ContactProjectLbController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbDirective;\n\n  ContactProjectLbDirective = function(lightboxService) {\n    var link;\n    this.inject = ['lightboxService'];\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      controller: \"ContactProjectLbCtrl\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonController;\n\n  LikeProjectButtonController = (function() {\n    LikeProjectButtonController.$inject = [\"$tgConfirm\", \"tgLikeProjectButtonService\"];\n\n    function LikeProjectButtonController(confirm, likeButtonService) {\n      this.confirm = confirm;\n      this.likeButtonService = likeButtonService;\n      this.isMouseOver = false;\n      this.loading = false;\n    }\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsOver = function() {\n      return this.isMouseOver = true;\n    };\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsLeave = function() {\n      return this.isMouseOver = false;\n    };\n\n    LikeProjectButtonController.prototype.toggleLike = function() {\n      var promise;\n      this.loading = true;\n      if (!this.project.get(\"is_fan\")) {\n        promise = this._like();\n      } else {\n        promise = this._unlike();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    LikeProjectButtonController.prototype._like = function() {\n      return this.likeButtonService.like(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.showTextWhenMouseIsLeave();\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    LikeProjectButtonController.prototype._unlike = function() {\n      return this.likeButtonService.unlike(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonDirective;\n\n  LikeProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"LikeProjectButton\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/like-project-button/like-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  LikeProjectButtonService = (function(superClass) {\n    extend(LikeProjectButtonService, superClass);\n\n    LikeProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function LikeProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    LikeProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    LikeProjectButtonService.prototype._updateProjects = function(projectId, isFan) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, function(project) {\n        var totalFans;\n        totalFans = project.get(\"total_fans\");\n        if (isFan) {\n          totalFans++;\n        } else {\n          totalFans--;\n        }\n        return project.merge({\n          is_fan: isFan,\n          total_fans: totalFans\n        });\n      });\n      return this.currentUserService.setProjects(projects);\n    };\n\n    LikeProjectButtonService.prototype._updateCurrentProject = function(isFan) {\n      var project, totalFans;\n      totalFans = this.projectService.project.get(\"total_fans\");\n      if (isFan) {\n        totalFans++;\n      } else {\n        totalFans--;\n      }\n      project = this.projectService.project.merge({\n        is_fan: isFan,\n        total_fans: totalFans\n      });\n      return this.projectService.setProject(project);\n    };\n\n    LikeProjectButtonService.prototype.like = function(projectId) {\n      return this.rs.projects.likeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, true);\n          return _this._updateCurrentProject(true);\n        };\n      })(this));\n    };\n\n    LikeProjectButtonService.prototype.unlike = function(projectId) {\n      return this.rs.projects.unlikeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, false);\n          return _this._updateCurrentProject(false);\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SortProjectsDirective;\n\n  SortProjectsDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var drake, itemEl, scroll;\n      itemEl = null;\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).hasClass('list-itemtype-project');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var i, index, len, project, sortData, sorted_project_ids, value;\n        itemEl = $(item);\n        project = itemEl.scope().project;\n        index = itemEl.index();\n        sorted_project_ids = _.map(scope.projects.toJS(), function(p) {\n          return p.id;\n        });\n        sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"));\n        sorted_project_ids.splice(index, 0, project.get('id'));\n        sortData = [];\n        for (index = i = 0, len = sorted_project_ids.length; i < len; index = ++i) {\n          value = sorted_project_ids[index];\n          sortData.push({\n            \"project_id\": value,\n            \"order\": index\n          });\n        }\n        return currentUserService.bulkUpdateProjectsOrder(sortData);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    directive = {\n      scope: {\n        projects: \"=tgSortProjects\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonController;\n\n  WatchProjectButtonController = (function() {\n    WatchProjectButtonController.$inject = [\"$tgConfirm\", \"tgWatchProjectButtonService\"];\n\n    function WatchProjectButtonController(confirm, watchButtonService) {\n      this.confirm = confirm;\n      this.watchButtonService = watchButtonService;\n      this.showWatchOptions = false;\n      this.loading = false;\n    }\n\n    WatchProjectButtonController.prototype.toggleWatcherOptions = function() {\n      return this.showWatchOptions = !this.showWatchOptions;\n    };\n\n    WatchProjectButtonController.prototype.closeWatcherOptions = function() {\n      return this.showWatchOptions = false;\n    };\n\n    WatchProjectButtonController.prototype.watch = function(notifyLevel) {\n      if (notifyLevel === this.project.get('notify_level')) {\n        return;\n      }\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.watch(this.project.get('id'), notifyLevel)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    WatchProjectButtonController.prototype.unwatch = function() {\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.unwatch(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonDirective;\n\n  WatchProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"WatchProjectButton\",\n      bindToController: {\n        project: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/watch-project-button/watch-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  WatchProjectButtonService = (function(superClass) {\n    extend(WatchProjectButtonService, superClass);\n\n    WatchProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function WatchProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    WatchProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    WatchProjectButtonService.prototype._updateProjects = function(projectId, notifyLevel, isWatcher) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, (function(_this) {\n        return function(project) {\n          var totalWatchers;\n          totalWatchers = project.get('total_watchers');\n          if (!_this.projectService.project.get('is_watcher') && isWatcher) {\n            totalWatchers++;\n          } else if (_this.projectService.project.get('is_watcher') && !isWatcher) {\n            totalWatchers--;\n          }\n          return project.merge({\n            is_watcher: isWatcher,\n            total_watchers: totalWatchers,\n            notify_level: notifyLevel\n          });\n        };\n      })(this));\n      return this.currentUserService.setProjects(projects);\n    };\n\n    WatchProjectButtonService.prototype._updateCurrentProject = function(notifyLevel, isWatcher) {\n      var project, totalWatchers;\n      totalWatchers = this.projectService.project.get(\"total_watchers\");\n      if (!this.projectService.project.get('is_watcher') && isWatcher) {\n        totalWatchers++;\n      } else if (this.projectService.project.get('is_watcher') && !isWatcher) {\n        totalWatchers--;\n      }\n      project = this.projectService.project.merge({\n        is_watcher: isWatcher,\n        notify_level: notifyLevel,\n        total_watchers: totalWatchers\n      });\n      return this.projectService.setProject(project);\n    };\n\n    WatchProjectButtonService.prototype.watch = function(projectId, notifyLevel) {\n      return this.rs.projects.watchProject(projectId, notifyLevel).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, notifyLevel, true);\n          return _this._updateCurrentProject(notifyLevel, true);\n        };\n      })(this));\n    };\n\n    WatchProjectButtonService.prototype.unwatch = function(projectId) {\n      return this.rs.projects.unwatchProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, null, false);\n          return _this._updateCurrentProject(null, false);\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormController;\n\n  AsanaImportProjectFormController = (function() {\n    AsanaImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function AsanaImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Asana\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"scrum\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    AsanaImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    AsanaImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    AsanaImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    AsanaImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return AsanaImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormDirective;\n\n  AsanaImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\n      controller: \"AsanaImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  AsanaImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportController;\n\n  AsanaImportController = (function() {\n    AsanaImportController.$inject = ['tgAsanaImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function AsanaImportController(asanaImportService, confirm, translate, importProjectService) {\n      this.asanaImportService = asanaImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-asana';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    AsanaImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-asana';\n      return this.asanaImportService.fetchProjects();\n    };\n\n    AsanaImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-asana';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.asanaImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-asana';\n    };\n\n    AsanaImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-asana';\n    };\n\n    AsanaImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.asanaImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return AsanaImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportDirective;\n\n  AsanaImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/asana-import/asana-import.html\",\n      controller: \"AsanaImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  AsanaImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AsanaImportService = (function(superClass) {\n    extend(AsanaImportService, superClass);\n\n    AsanaImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function AsanaImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    AsanaImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    AsanaImportService.prototype.fetchProjects = function() {\n      return this.resources.asanaImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.asanaImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.asanaImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    AsanaImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.asanaImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.asanaImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return AsanaImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreatetProjectFormController;\n\n  CreatetProjectFormController = (function() {\n    CreatetProjectFormController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$projectUrl\", \"$location\", \"$tgNavUrls\", \"$tgAnalytics\"];\n\n    function CreatetProjectFormController(currentUserService, projectsService, projectUrl, location, navUrls, analytics) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.projectUrl = projectUrl;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.errorList = [];\n      this.projectForm = {\n        is_private: false\n      };\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n      if (this.type === 'scrum') {\n        this.projectForm.creation_template = 1;\n      } else {\n        this.projectForm.creation_template = 2;\n      }\n    }\n\n    CreatetProjectFormController.prototype.submit = function() {\n      this.errorList = [];\n      if (!this.projectForm.name) {\n        this.errorList.push('name');\n      }\n      if (!this.projectForm.description) {\n        this.errorList.push('description');\n      }\n      if (this.errorList.length === 0) {\n        this.formSubmitLoading = true;\n        return this.projectsService.create(this.projectForm).then((function(_this) {\n          return function(project) {\n            _this.analytics.trackEvent(\"project\", \"create\", \"project creation\", {\n              slug: project.get('slug'),\n              id: project.get('id')\n            });\n            _this.location.url(_this.projectUrl.get(project));\n            return _this.currentUserService.loadProjects();\n          };\n        })(this));\n      }\n    };\n\n    CreatetProjectFormController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    CreatetProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    CreatetProjectFormController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    return CreatetProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectFormDirective;\n\n  CreateProjectFormDirective = function() {\n    return {\n      templateUrl: \"projects/create/create-project-form/create-project-form.html\",\n      controller: \"CreateProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectMembersRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectMembersRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        limitMembersPrivateProject: '=',\n        limitMembersPublicProject: '='\n      },\n      templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        canCreatePrivateProjects: '=',\n        canCreatePublicProjects: '='\n      },\n      templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectController;\n\n  CreateProjectController = (function() {\n    CreateProjectController.$inject = [\"tgAppMetaService\", \"$translate\", \"tgProjectService\", \"$tgAuth\", \"tgLightboxFactory\", \"tgResources\", \"$tgConfig\"];\n\n    function CreateProjectController(appMetaService, translate, projectService, authService, lightboxFactory, rs, config) {\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.authService = authService;\n      this.lightboxFactory = lightboxFactory;\n      this.rs = rs;\n      this.config = config;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n      this.authService.refresh();\n      this.displayScrumDesc = false;\n      this.dontAsk = false;\n      if (!this.config.get(\"isSaas\")) {\n        this.rs.user.getUserStorage('dont_ask_premise_newsletter').then((function(_this) {\n          return function(storageState) {\n            _this.dontAsk = storageState;\n            return _this.displayOnPremise();\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(storageError) {\n            if (storageError.status = 404) {\n              _this.rs.user.createUserStorage('dont_ask_premise_newsletter', false);\n              _this.dontAsk = false;\n              return _this.displayOnPremise();\n            }\n          };\n        })(this));\n      }\n    }\n\n    CreateProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    CreateProjectController.prototype.displayOnPremise = function() {\n      if (!this.dontAsk) {\n        return this.lightboxFactory.create(\"tg-newsletter-email-lightbox\", {\n          \"class\": \"lightbox newsletter-email\"\n        });\n      }\n    };\n\n    CreateProjectController.prototype.displayHelp = function(type, $event) {\n      $event.stopPropagation();\n      $event.preventDefault();\n      if (type === 'scrum') {\n        this.displayScrumDesc = !this.displayScrumDesc;\n      }\n      if (type === 'kanban') {\n        return this.displayKanbanDesc = !this.displayKanbanDesc;\n      }\n    };\n\n    return CreateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectController;\n\n  DuplicateProjectController = (function() {\n    DuplicateProjectController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$tgLocation\", \"$tgNavUrls\"];\n\n    function DuplicateProjectController(currentUserService, projectsService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.user = this.currentUserService.getUser();\n      this.members = Immutable.List();\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n      this.projectForm = {\n        is_private: false\n      };\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    DuplicateProjectController.prototype.refreshReferenceProject = function(slug) {\n      return this.projectsService.getProjectBySlug(slug).then((function(_this) {\n        return function(project) {\n          _this.referenceProject = project;\n          _this.members = project.get('members').filter(function(it) {\n            return it.get('id') !== _this.user.get('id');\n          });\n          _this.invitedMembers = _this.members.map(function(it) {\n            return it.get('id');\n          });\n          return _this.checkUsersLimit();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.toggleInvitedMember = function(member) {\n      if (this.invitedMembers.includes(member)) {\n        this.invitedMembers = this.invitedMembers.filter(function(it) {\n          return it !== member;\n        });\n      } else {\n        this.invitedMembers = this.invitedMembers.push(member);\n      }\n      return this.checkUsersLimit();\n    };\n\n    DuplicateProjectController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.invitedMembers.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.invitedMembers.size + 1);\n    };\n\n    DuplicateProjectController.prototype.submit = function() {\n      var data, projectId;\n      projectId = this.referenceProject.get('id');\n      data = this.projectForm;\n      data.users = this.invitedMembers;\n      this.formSubmitLoading = true;\n      return this.projectsService.duplicate(projectId, data).then((function(_this) {\n        return function(newProject) {\n          _this.formSubmitLoading = false;\n          _this.location.path(_this.navUrls.resolve(\"project\", {\n            project: newProject.data.slug\n          }));\n          return _this.currentUserService.loadProjects();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid && this.limitMembersPrivateProject.valid;\n      } else {\n        return this.canCreatePublicProjects.valid && this.limitMembersPublicProject.valid;\n      }\n    };\n\n    DuplicateProjectController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    DuplicateProjectController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    return DuplicateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectDirective;\n\n  DuplicateProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/duplicate/duplicate-project.html\",\n      controller: \"DuplicateProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  DuplicateProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormController;\n\n  GithubImportProjectFormController = (function() {\n    GithubImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function GithubImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Github\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"kanban\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    GithubImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    GithubImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    GithubImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    GithubImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return GithubImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormDirective;\n\n  GithubImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\n      controller: \"GithubImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  GithubImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportController;\n\n  GithubImportController = (function() {\n    GithubImportController.$inject = ['tgGithubImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function GithubImportController(githubImportService, confirm, translate, importProjectService) {\n      this.githubImportService = githubImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-github';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.githubImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.githubImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    GithubImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-github';\n      return this.githubImportService.fetchProjects();\n    };\n\n    GithubImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-github';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.githubImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-github';\n    };\n\n    GithubImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-github';\n    };\n\n    GithubImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.githubImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return GithubImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportDirective;\n\n  GithubImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/github-import/github-import.html\",\n      controller: \"GithubImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  GithubImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  GithubImportService = (function(superClass) {\n    extend(GithubImportService, superClass);\n\n    GithubImportService.$inject = ['tgResources', '$q'];\n\n    function GithubImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    GithubImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    GithubImportService.prototype.fetchProjects = function() {\n      return this.resources.githubImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.githubImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.githubImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    GithubImportService.prototype.getAuthUrl = function(callbackUri) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.githubImporter.getAuthUrl(callbackUri).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.githubImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return GithubImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersController;\n\n  ImportProjectMembersController = (function() {\n    ImportProjectMembersController.$inject = ['tgCurrentUserService', 'tgUserService'];\n\n    function ImportProjectMembersController(currentUserService, userService) {\n      this.currentUserService = currentUserService;\n      this.userService = userService;\n      this.selectImportUserLightbox = false;\n      this.warningImportUsers = false;\n      this.displayEmailSelector = true;\n      this.cancelledUsers = Immutable.List();\n      this.selectedUsers = Immutable.List();\n      this.selectableUsers = Immutable.List();\n      this.userContacts = Immutable.List();\n    }\n\n    ImportProjectMembersController.prototype.fetchUser = function() {\n      this.currentUser = this.currentUserService.getUser();\n      return this.userService.getContacts(this.currentUser.get('id')).then((function(_this) {\n        return function(userContacts) {\n          _this.userContacts = userContacts;\n          return _this.refreshSelectableUsers();\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.searchUser = function(user) {\n      this.selectImportUserLightbox = true;\n      return this.searchingUser = user;\n    };\n\n    ImportProjectMembersController.prototype.beforeSubmitUsers = function() {\n      if (this.selectedUsers.size !== this.members.size) {\n        return this.warningImportUsers = true;\n      } else {\n        return this.submit();\n      }\n    };\n\n    ImportProjectMembersController.prototype.confirmUser = function(externalUser, taigaUser) {\n      var user;\n      this.selectImportUserLightbox = false;\n      user = Immutable.Map();\n      user = user.set('user', externalUser);\n      user = user.set('taigaUser', taigaUser);\n      this.selectedUsers = this.selectedUsers.push(user);\n      this.discardSuggestedUser(externalUser);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.unselectUser = function(user) {\n      var index;\n      index = this.selectedUsers.findIndex(function(it) {\n        return it.getIn(['user', 'id']) === user.get('id');\n      });\n      this.selectedUsers = this.selectedUsers[\"delete\"](index);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.discardSuggestedUser = function(member) {\n      return this.cancelledUsers = this.cancelledUsers.push(member.get('id'));\n    };\n\n    ImportProjectMembersController.prototype.getSelectedMember = function(member) {\n      return this.selectedUsers.find(function(it) {\n        return it.getIn(['user', 'id']) === member.get('id');\n      });\n    };\n\n    ImportProjectMembersController.prototype.isMemberSelected = function(member) {\n      return !!this.getSelectedMember(member);\n    };\n\n    ImportProjectMembersController.prototype.getUser = function(user) {\n      var userSelected;\n      userSelected = this.getSelectedMember(user);\n      if (userSelected) {\n        return userSelected.get('taigaUser');\n      } else {\n        return null;\n      }\n    };\n\n    ImportProjectMembersController.prototype.submit = function() {\n      var users;\n      this.warningImportUsers = false;\n      users = Immutable.Map();\n      this.selectedUsers.map(function(it) {\n        var id;\n        id = '';\n        if (_.isString(it.get('taigaUser'))) {\n          id = it.get('taigaUser');\n        } else {\n          id = it.getIn(['taigaUser', 'id']);\n        }\n        return users = users.set(it.getIn(['user', 'id']), id);\n      });\n      return this.onSubmit({\n        users: users\n      });\n    };\n\n    ImportProjectMembersController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size + 1);\n    };\n\n    ImportProjectMembersController.prototype.showSuggestedMatch = function(member) {\n      return member.get('user') && this.cancelledUsers.indexOf(member.get('id')) === -1 && !this.isMemberSelected(member);\n    };\n\n    ImportProjectMembersController.prototype.getDistinctSelectedTaigaUsers = function() {\n      var ids, users;\n      ids = [];\n      users = this.selectedUsers.filter(function(it) {\n        var id;\n        id = it.getIn(['taigaUser', 'id']);\n        if (ids.indexOf(id) === -1) {\n          ids.push(id);\n          return true;\n        }\n        return false;\n      });\n      return users.filter((function(_this) {\n        return function(it) {\n          return it.getIn(['taigaUser', 'id']) !== _this.currentUser.get('id');\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.refreshSelectableUsers = function() {\n      var users;\n      this.importMoreUsersDisabled = this.isImportMoreUsersDisabled();\n      if (this.importMoreUsersDisabled) {\n        users = this.getDistinctSelectedTaigaUsers();\n        this.selectableUsers = users.map(function(it) {\n          return it.get('taigaUser');\n        });\n        this.displayEmailSelector = false;\n      } else {\n        this.selectableUsers = this.userContacts;\n        this.displayEmailSelector = true;\n      }\n      return this.selectableUsers = this.selectableUsers.push(this.currentUser);\n    };\n\n    ImportProjectMembersController.prototype.isImportMoreUsersDisabled = function() {\n      var total, users;\n      users = this.getDistinctSelectedTaigaUsers();\n      total = users.size + 2;\n      if (this.project.get('is_private')) {\n        return !this.currentUserService.canAddMembersPrivateProject(total).valid;\n      } else {\n        return !this.currentUserService.canAddMembersPublicProject(total).valid;\n      }\n    };\n\n    return ImportProjectMembersController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersDirective;\n\n  ImportProjectMembersDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        ctrl.fetchUser();\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/import-project-members/import-project-members.html\",\n      controller: \"ImportProjectMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSubmit: '&',\n        platform: '@',\n        logo: '@',\n        onCancel: '&'\n      }\n    };\n  };\n\n  ImportProjectMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorController;\n\n  ImportProjectSelectorController = (function() {\n    function ImportProjectSelectorController() {}\n\n    ImportProjectSelectorController.prototype.selectProject = function(project) {\n      return this.onSelectProject({\n        project: Immutable.fromJS(project)\n      });\n    };\n\n    return ImportProjectSelectorController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorDirective;\n\n  ImportProjectSelectorDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-project-selector/import-project-selector.html\",\n      controller: \"ImportProjectSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        projects: '<',\n        onCancel: '&',\n        onSelectProject: '&',\n        logo: '@',\n        noProjectsMsg: '@',\n        search: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaController;\n\n  ImportTaigaController = (function() {\n    ImportTaigaController.$inject = ['$tgConfirm', '$tgResources', 'tgImportProjectService', '$translate', '$tgAnalytics'];\n\n    function ImportTaigaController(confirm, rs, importProjectService, translate, analytics) {\n      this.confirm = confirm;\n      this.rs = rs;\n      this.importProjectService = importProjectService;\n      this.translate = translate;\n      this.analytics = analytics;\n    }\n\n    ImportTaigaController.prototype.importTaiga = function(files) {\n      var file, loader, promise;\n      this.analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1);\n      file = files[0];\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.rs.projects[\"import\"](file, loader.update);\n      this.importProjectService.importPromise(promise)[\"finally\"](function() {\n        return loader.stop();\n      });\n    };\n\n    return ImportTaigaController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaDirective;\n\n  ImportTaigaDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-taiga/import-taiga.html\",\n      controller: \"ImportTaigaCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LbImportErrorDirective;\n\n  LbImportErrorDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      lightboxService.open(el);\n      return scope.close = function() {\n        lightboxService.close(el);\n      };\n    };\n    return {\n      templateUrl: \"projects/create/import/import-project-error-lb.html\",\n      link: link\n    };\n  };\n\n  LbImportErrorDirective.$inject = [\"lightboxService\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectController;\n\n  ImportProjectController = (function() {\n    ImportProjectController.$inject = ['tgTrelloImportService', 'tgJiraImportService', 'tgGithubImportService', 'tgAsanaImportService', '$location', '$window', '$routeParams', '$tgNavUrls', '$tgConfig', '$tgConfirm', '$tgAnalytics'];\n\n    function ImportProjectController(trelloService, jiraService, githubService, asanaService, location, window, routeParams, tgNavUrls, config, confirm, analytics) {\n      this.trelloService = trelloService;\n      this.jiraService = jiraService;\n      this.githubService = githubService;\n      this.asanaService = asanaService;\n      this.location = location;\n      this.window = window;\n      this.routeParams = routeParams;\n      this.tgNavUrls = tgNavUrls;\n      this.config = config;\n      this.confirm = confirm;\n      this.analytics = analytics;\n    }\n\n    ImportProjectController.prototype.start = function() {\n      var asanaOauthToken, githubOauthToken, jiraOauthToken, jiraOauthVerifier, locationSearch, trelloOauthToken;\n      this.token = null;\n      this.from = this.routeParams.platform;\n      locationSearch = this.location.search();\n      if (this.from) {\n        this.analytics.trackEvent(\"import\", this.from, \"Start import from \" + this.from, 1);\n      }\n      if (this.from === \"asana\") {\n        asanaOauthToken = locationSearch.code;\n        if (locationSearch.code) {\n          asanaOauthToken = locationSearch.code;\n          return this.asanaService.authorize(asanaOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: encodeURIComponent(JSON.stringify(token))\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = JSON.parse(decodeURIComponent(locationSearch.token));\n          this.asanaService.setToken(this.token);\n        }\n      }\n      if (this.from === 'trello') {\n        if (locationSearch.oauth_verifier) {\n          trelloOauthToken = locationSearch.oauth_verifier;\n          return this.trelloService.authorize(trelloOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.trelloService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"github\") {\n        if (locationSearch.code) {\n          githubOauthToken = locationSearch.code;\n          return this.githubService.authorize(githubOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.githubService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"jira\") {\n        jiraOauthToken = locationSearch.oauth_token;\n        if (jiraOauthToken) {\n          jiraOauthVerifier = locationSearch.oauth_verifier;\n          return this.jiraService.authorize(jiraOauthVerifier).then(((function(_this) {\n            return function(data) {\n              return _this.location.search({\n                token: data.token,\n                url: data.url\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = locationSearch.token;\n          return this.jiraService.setToken(locationSearch.token, locationSearch.url);\n        }\n      }\n    };\n\n    ImportProjectController.prototype.select = function(from) {\n      var callbackUri;\n      if (from === \"trello\") {\n        return this.trelloService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"jira\") {\n        return this.jiraService.getAuthUrl(this.jiraUrl).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this), (function(_this) {\n          return function(err) {\n            return _this.confirm.notify('error', err);\n          };\n        })(this));\n      } else if (from === \"github\") {\n        callbackUri = this.location.absUrl() + \"/github\";\n        return this.githubService.getAuthUrl(callbackUri).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"asana\") {\n        return this.asanaService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else {\n        return this.from = from;\n      }\n    };\n\n    ImportProjectController.prototype.unfoldOptions = function(options) {\n      return this.unfoldedOptions = options;\n    };\n\n    ImportProjectController.prototype.isActiveImporter = function(importer) {\n      switch (importer) {\n        case \"asana\":\n          return this.config.get('enableAsanaImporter');\n        case \"github\":\n          return this.config.get('enableGithubImporter');\n        case \"jira\":\n          return this.config.get('enableJiraImporter');\n        case \"trello\":\n          return this.config.get('enableTrelloImporter');\n        default:\n          return false;\n      }\n    };\n\n    ImportProjectController.prototype.cancelCurrentImport = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project-import'));\n    };\n\n    ImportProjectController.prototype.backToCreate = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project'));\n    };\n\n    return ImportProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectDirective;\n\n  ImportProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      return ctrl.start();\n    };\n    return {\n      link: link,\n      templateUrl: \"projects/create/import/import-project.html\",\n      controller: \"ImportProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancelImport: '&'\n      }\n    };\n  };\n\n  ImportProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ImportProjectService = (function(superClass) {\n    extend(ImportProjectService, superClass);\n\n    ImportProjectService.$inject = ['tgCurrentUserService', '$tgAuth', 'tgLightboxFactory', '$translate', '$tgConfirm', '$location', '$tgNavUrls'];\n\n    function ImportProjectService(currentUserService, tgAuth, lightboxFactory, translate, confirm, location, tgNavUrls) {\n      this.currentUserService = currentUserService;\n      this.tgAuth = tgAuth;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.location = location;\n      this.tgNavUrls = tgNavUrls;\n    }\n\n    ImportProjectService.prototype.importPromise = function(promise) {\n      return promise.then(this.importSuccess.bind(this), this.importError.bind(this));\n    };\n\n    ImportProjectService.prototype.importSuccess = function(result) {\n      var promise;\n      promise = this.currentUserService.loadProjects();\n      promise.then((function(_this) {\n        return function() {\n          var ctx, message, msg, title;\n          if (result.status === 202) {\n            title = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE');\n            message = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE');\n            _this.location.path(_this.tgNavUrls.resolve('home'));\n            return _this.confirm.success(title, message);\n          } else {\n            ctx = {\n              project: result.data.slug\n            };\n            _this.location.path(_this.tgNavUrls.resolve('project-admin-project-profile-details', ctx));\n            msg = _this.translate.instant('PROJECT.IMPORT.SYNC_SUCCESS');\n            return _this.confirm.notify('success', msg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.importError = function(result) {\n      var promise;\n      promise = this.tgAuth.refresh();\n      promise.then((function(_this) {\n        return function() {\n          var errorMsg, ref, restrictionError;\n          restrictionError = _this.getRestrictionError(result);\n          if (restrictionError) {\n            return _this.lightboxFactory.create('tg-lb-import-error', {\n              \"class\": 'lightbox lightbox-import-error'\n            }, restrictionError);\n          } else {\n            errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {\n                error_message: result.data._error_message\n              });\n            }\n            return _this.confirm.notify(\"error\", errorMsg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.getRestrictionError = function(result) {\n      var errorKey, maxMemberships, membersError, privateError, publicError, user;\n      if (result.headers) {\n        errorKey = '';\n        user = this.currentUserService.getUser();\n        maxMemberships = null;\n        if (result.headers.isPrivate) {\n          privateError = !this.currentUserService.canCreatePrivateProjects().valid;\n          if (user.get('max_memberships_private_projects') !== null && result.headers.memberships >= user.get('max_memberships_private_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (privateError && membersError) {\n            errorKey = 'private-space-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          } else if (privateError) {\n            errorKey = 'private-space';\n          } else if (membersError) {\n            errorKey = 'private-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          }\n        } else {\n          publicError = !this.currentUserService.canCreatePublicProjects().valid;\n          if (user.get('max_memberships_public_projects') !== null && result.headers.memberships >= user.get('max_memberships_public_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (publicError && membersError) {\n            errorKey = 'public-space-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          } else if (publicError) {\n            errorKey = 'public-space';\n          } else if (membersError) {\n            errorKey = 'public-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          }\n        }\n        if (!errorKey) {\n          return false;\n        }\n        return {\n          key: errorKey,\n          values: {\n            max_memberships: maxMemberships,\n            members: result.headers.memberships\n          }\n        };\n      } else {\n        return false;\n      }\n    };\n\n    return ImportProjectService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersController;\n\n  InviteMembersController = (function() {\n    function InviteMembersController() {}\n\n    InviteMembersController.$inject = [];\n\n    InviteMembersController.prototype.isDisabled = function(id) {\n      return this.invitedMembers.indexOf(id) === -1;\n    };\n\n    return InviteMembersController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersDirective;\n\n  InviteMembersDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/invite-members/invite-members.html\",\n      controller: \"InviteMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        invitedMembers: '<',\n        members: '<',\n        onToggleInvitedMember: '&'\n      }\n    };\n  };\n\n  InviteMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SingleMemberDirective;\n\n  SingleMemberDirective = function() {\n    return {\n      templateUrl: \"projects/create/invite-members/single-member/single-member.html\",\n      scope: {\n        disabled: \"<\",\n        avatar: \"=\"\n      }\n    };\n  };\n\n  SingleMemberDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormController;\n\n  JiraImportProjectFormController = (function() {\n    JiraImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function JiraImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (this.projectForm.importer_type === \"agile\") {\n        this.projectForm.project_type = null;\n      } else {\n        this.projectForm.project_type = \"scrum\";\n      }\n      this.projectForm.create_subissues = true;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    JiraImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    JiraImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    JiraImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    JiraImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return JiraImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormDirective;\n\n  JiraImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\n      controller: \"JiraImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  JiraImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportController;\n\n  JiraImportController = (function() {\n    JiraImportController.$inject = ['tgJiraImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function JiraImportController(jiraImportService, confirm, translate, importProjectService) {\n      this.jiraImportService = jiraImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-jira';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    JiraImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-jira';\n      return this.jiraImportService.fetchProjects();\n    };\n\n    JiraImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-jira';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.jiraImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-jira';\n    };\n\n    JiraImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-jira';\n    };\n\n    JiraImportController.prototype.startImport = function(users) {\n      var loader, projectType, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      projectType = this.project.get('project_type');\n      if (projectType === \"issues\" && this.project.get('create_subissues')) {\n        projectType = \"issues-with-subissues\";\n      }\n      promise = this.jiraImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), projectType, this.project.get('importer_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return JiraImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportDirective;\n\n  JiraImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/jira-import/jira-import.html\",\n      controller: \"JiraImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  JiraImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JiraImportService = (function(superClass) {\n    extend(JiraImportService, superClass);\n\n    JiraImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function JiraImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    JiraImportService.prototype.setToken = function(token, url) {\n      this.token = token;\n      return this.url = url;\n    };\n\n    JiraImportService.prototype.fetchProjects = function() {\n      return this.resources.jiraImporter.listProjects(this.url, this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.jiraImporter.listUsers(this.url, this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      return this.resources.jiraImporter.importProject(this.url, this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType);\n    };\n\n    JiraImportService.prototype.getAuthUrl = function(url) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.getAuthUrl(url).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          }, function(err) {\n            return reject(err.data._error_message);\n          });\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.authorize = function(oauth_verifier) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.authorize(oauth_verifier).then((function(response) {\n            _this.token = response.data.token;\n            _this.url = response.data.url;\n            return resolve(response.data);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return JiraImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NewsletterEmailLightboxDirective;\n\n  NewsletterEmailLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $storageService, $rs, $currentUserService, $rs2, $confirm) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      scope.dontAsk = false;\n      scope.preference = false;\n      scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n      scope.closeLightbox = function() {\n        return lightboxService.close(el);\n      };\n      return scope.setEmail = function() {\n        if (scope.preference) {\n          return $rs2.onPremise.subscribeOnPremiseNewsletter({\n            \"email\": $currentUserService.getUser().get('email'),\n            \"full_name\": $currentUserService.getUser().get('full_name'),\n            \"origin_form\": 'Newsletter sign-up create'\n          }).then((function(_this) {\n            return function() {\n              $rs.user.setUserStorage('dont_ask_premise_newsletter', true);\n              return scope.closeLightbox();\n            };\n          })(this))[\"catch\"]((function(_this) {\n            return function() {\n              return $confirm.notify(\"light-error\", \"\");\n            };\n          })(this));\n        } else {\n          $rs.user.setUserStorage('dont_ask_premise_newsletter', scope.dontAsk);\n          return scope.closeLightbox();\n        }\n      };\n    };\n    return {\n      scope: {\n        visible: '<',\n        openNewsletter: '<',\n        onClose: '&',\n        onSelectUser: '&'\n      },\n      templateUrl: 'projects/create/newsletter-email-lightbox/newsletter-email-lightbox.html',\n      link: link\n    };\n  };\n\n  NewsletterEmailLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService', \"$tgStorage\", \"tgResources\", \"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgNewsletterEmailLightbox\", NewsletterEmailLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxCtrl;\n\n  SelectImportUserLightboxCtrl = (function() {\n    SelectImportUserLightboxCtrl.$inject = [];\n\n    function SelectImportUserLightboxCtrl() {}\n\n    SelectImportUserLightboxCtrl.prototype.start = function() {\n      this.mode = 'search';\n      return this.invalid = false;\n    };\n\n    SelectImportUserLightboxCtrl.prototype.assignUser = function() {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: this.userEmail\n      });\n    };\n\n    SelectImportUserLightboxCtrl.prototype.selectUser = function(taigaUser) {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: Immutable.fromJS(taigaUser)\n      });\n    };\n\n    return SelectImportUserLightboxCtrl;\n\n  })();\n\n  angular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxDirective;\n\n  SelectImportUserLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n    };\n    return {\n      controller: \"SelectImportUserLightboxCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        user: '<',\n        visible: '<',\n        onClose: '&',\n        onSelectUser: '&',\n        selectableUsers: '<',\n        isPrivate: '<',\n        limitMembersPrivateProject: '<',\n        limitMembersPublicProject: '<',\n        displayEmailSelector: '<'\n      },\n      templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html',\n      link: link\n    };\n  };\n\n  SelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormController;\n\n  TrelloImportProjectFormController = (function() {\n    TrelloImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function TrelloImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Trello\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    TrelloImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    TrelloImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    TrelloImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    TrelloImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return TrelloImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormDirective;\n\n  TrelloImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\n      controller: \"TrelloImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  TrelloImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportController;\n\n  TrelloImportController = (function() {\n    TrelloImportController.$inject = ['tgTrelloImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function TrelloImportController(trelloImportService, confirm, translate, importProjectService) {\n      this.trelloImportService = trelloImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    TrelloImportController.prototype.startProjectSelector = function() {\n      return this.trelloImportService.fetchProjects().then((function(_this) {\n        return function() {\n          return _this.step = 'project-select-trello';\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-trello';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.trelloImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-trello';\n    };\n\n    TrelloImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-trello';\n    };\n\n    TrelloImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.trelloImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return TrelloImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportDirective;\n\n  TrelloImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/trello-import/trello-import.html\",\n      controller: \"TrelloImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  TrelloImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  TrelloImportService = (function(superClass) {\n    extend(TrelloImportService, superClass);\n\n    TrelloImportService.$inject = ['tgResources', '$q'];\n\n    function TrelloImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    TrelloImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    TrelloImportService.prototype.fetchProjects = function() {\n      return this.resources.trelloImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.trelloImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      return this.resources.trelloImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate);\n    };\n\n    TrelloImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.trelloImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.authorize = function(verifyCode) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.trelloImporter.authorize(verifyCode).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return TrelloImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WarningUserImportDirective;\n\n  WarningUserImportDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    return {\n      link: function(scope, el, attr) {\n        return scope.$watch('visible', function(visible) {\n          if (visible && !el.hasClass('open')) {\n            return lightboxService.open(el, scope.onClose).then(function() {\n              el.find('input').focus();\n              return lightboxKeyboardNavigationService.init(el);\n            });\n          } else if (!visible && el.hasClass('open')) {\n            return lightboxService.close(el);\n          }\n        });\n      },\n      templateUrl: \"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\n      scope: {\n        visible: '<',\n        onClose: '&',\n        onConfirm: '&'\n      }\n    };\n  };\n\n  WarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsListingController;\n\n  ProjectsListingController = (function() {\n    ProjectsListingController.$inject = [\"tgCurrentUserService\"];\n\n    function ProjectsListingController(currentUserService) {\n      this.currentUserService = currentUserService;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n    }\n\n    return ProjectsListingController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectRouterController;\n\n  ProjectRouterController = (function() {\n    ProjectRouterController.$inject = [\"$routeParams\", \"$location\", \"tgProjectService\", \"$tgResources\", \"$tgSections\"];\n\n    function ProjectRouterController(routeParams, location, projectService, rs, tgSections) {\n      this.routeParams = routeParams;\n      this.location = location;\n      this.projectService = projectService;\n      this.rs = rs;\n      this.tgSections = tgSections;\n      this.getProjectHomepage().then((function(_this) {\n        return function(section) {\n          if (section) {\n            return _this.location.url(\"project/\" + _this.routeParams.pslug + \"/\" + section);\n          } else {\n            return _this.gotoDefaultProjectHomepage();\n          }\n        };\n      })(this)).then(null, function() {\n        return this.gotoDefaultProjectHomepage();\n      });\n    }\n\n    ProjectRouterController.prototype.gotoDefaultProjectHomepage = function() {\n      return this.location.url(\"project/\" + this.routeParams.pslug + \"/timeline\");\n    };\n\n    ProjectRouterController.prototype.getProjectHomepage = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.userProjectSettings.list({\n        project: project.id\n      }).then((function(_this) {\n        return function(userProjectSettings) {\n          var settings;\n          settings = _.find(userProjectSettings, {\n            \"project\": project.id\n          });\n          if (!settings) {\n            return;\n          }\n          return _this.tgSections.getPath(project.slug, settings.homepage);\n        };\n      })(this));\n    };\n\n    return ProjectRouterController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectController;\n\n  ProjectController = (function() {\n    ProjectController.$inject = [\"$routeParams\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"$tgConfig\", \"$tgNavUrls\", \"$location\"];\n\n    function ProjectController(routeParams, appMetaService, auth, translate, projectService, config, navUrls, location) {\n      var nextUrl;\n      this.routeParams = routeParams;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.config = config;\n      this.navUrls = navUrls;\n      this.location = location;\n      this.user = this.auth.userData;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"members\", (function(_this) {\n        return function() {\n          return _this.projectService.activeMembers;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"isAuthenticated\", (function(_this) {\n        return function() {\n          return !!_this.user;\n        };\n      })(this));\n      nextUrl = this.location.url();\n      this.registerUrl = (this.navUrls.resolve(\"register\")) + \"?next=\" + nextUrl;\n      this.loginUrl = (this.navUrls.resolve(\"login\")) + \"?next=\" + nextUrl;\n      this.publicRegisterEnabled = this.config.get(\"publicRegisterEnabled\");\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    ProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    return ProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"Project\", ProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsService, groupBy, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  ProjectsService = (function(superClass) {\n    extend(ProjectsService, superClass);\n\n    ProjectsService.$inject = [\"tgResources\", \"$projectUrl\"];\n\n    function ProjectsService(rs, projectUrl) {\n      this.rs = rs;\n      this.projectUrl = projectUrl;\n    }\n\n    ProjectsService.prototype.create = function(data) {\n      return this.rs.projects.create(data);\n    };\n\n    ProjectsService.prototype.duplicate = function(projectId, data) {\n      return this.rs.projects.duplicate(projectId, data);\n    };\n\n    ProjectsService.prototype.getProjectBySlug = function(projectSlug) {\n      return this.rs.projects.getProjectBySlug(projectSlug).then((function(_this) {\n        return function(project) {\n          return _this._decorate(project);\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getProjectStats = function(projectId) {\n      return this.rs.projects.getProjectStats(projectId);\n    };\n\n    ProjectsService.prototype.getProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getListProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getListProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype._decorate = function(project) {\n      var url;\n      url = this.projectUrl.get(project.toJS());\n      project = project.set(\"url\", url);\n      return project;\n    };\n\n    ProjectsService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.rs.projects.bulkUpdateOrder(sortData);\n    };\n\n    ProjectsService.prototype.transferValidateToken = function(projectId, token) {\n      return this.rs.projects.transferValidateToken(projectId, token);\n    };\n\n    ProjectsService.prototype.transferAccept = function(projectId, token, reason) {\n      return this.rs.projects.transferAccept(projectId, token, reason);\n    };\n\n    ProjectsService.prototype.transferReject = function(projectId, token, reason) {\n      return this.rs.projects.transferReject(projectId, token, reason);\n    };\n\n    return ProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CantOwnProjectExplanationDirective;\n\n  CantOwnProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProject, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProject = (function() {\n    TransferProject.$inject = [\"$routeParams\", \"tgProjectsService\", \"tgProjectService\", \"$location\", \"$tgAuth\", \"tgCurrentUserService\", \"$tgNavUrls\", \"$translate\", \"$tgConfirm\", \"tgErrorHandlingService\"];\n\n    function TransferProject(routeParams, projectsService, projectService, location, authService, currentUserService, navUrls, translate, confirmService, errorHandlingService) {\n      this.routeParams = routeParams;\n      this.projectsService = projectsService;\n      this.projectService = projectService;\n      this.location = location;\n      this.authService = authService;\n      this.currentUserService = currentUserService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.confirmService = confirmService;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    TransferProject.prototype.initialize = function() {\n      this.projectId = this.project.get(\"id\");\n      this.token = this.routeParams.token;\n      this.showAddComment = false;\n      return this._refreshUserData();\n    };\n\n    TransferProject.prototype._validateToken = function() {\n      return this.projectsService.transferValidateToken(this.projectId, this.token).then(null, (function(_this) {\n        return function(data, status) {\n          return _this.errorHandlingService.notfound();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._refreshUserData = function() {\n      return this.authService.refresh().then((function(_this) {\n        return function() {\n          _this._validateToken();\n          _this._setProjectData();\n          return _this._checkOwnerData();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._setProjectData = function() {\n      return this.canBeOwnedByUser = this.currentUserService.canOwnProject(this.project);\n    };\n\n    TransferProject.prototype._checkOwnerData = function() {\n      var currentUser, maxMemberships;\n      currentUser = this.currentUserService.getUser();\n      if (this.project.get('is_private')) {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE';\n        this.maxProjects = currentUser.get('max_private_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_private_projects');\n        maxMemberships = currentUser.get('max_memberships_private_projects');\n      } else {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC';\n        this.maxProjects = currentUser.get('max_public_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_public_projects');\n        maxMemberships = currentUser.get('max_memberships_public_projects');\n      }\n      return this.validNumberOfMemberships = maxMemberships === null || this.project.get('total_memberships') <= maxMemberships;\n    };\n\n    TransferProject.prototype.transferAccept = function(token, reason) {\n      this.loadingAccept = true;\n      return this.projectsService.transferAccept(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            var newUrl;\n            newUrl = _this.navUrls.resolve(\"project-admin-project-profile-details\", {\n              project: _this.project.get(\"slug\")\n            });\n            _this.loadingAccept = false;\n            _this.location.path(newUrl);\n            _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000);\n          });\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.transferReject = function(token, reason) {\n      this.loadingReject = true;\n      return this.projectsService.transferReject(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          var newUrl;\n          newUrl = _this.navUrls.resolve(\"home\", {\n            project: _this.project.get(\"slug\")\n          });\n          _this.loadingReject = false;\n          _this.location.path(newUrl);\n          _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000);\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.addComment = function() {\n      return this.showAddComment = true;\n    };\n\n    TransferProject.prototype.hideComment = function() {\n      this.showAddComment = false;\n      return this.reason = '';\n    };\n\n    return TransferProject;\n\n  })();\n\n  module.controller(\"TransferProjectController\", TransferProject);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProjectDirective, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProjectDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initialize();\n    };\n    return {\n      link: link,\n      scope: {},\n      bindToController: {\n        project: \"=\"\n      },\n      templateUrl: \"projects/transfer/transfer-project.html\",\n      controller: 'TransferProjectController',\n      controllerAs: 'vm'\n    };\n  };\n\n  module.directive('tgTransferProject', TransferProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  Resource = function(urlsService, http, config, $rootScope, $q, storage) {\n    var service;\n    service = {};\n    service.list = function(type, objectId, projectId) {\n      var httpOptions, params, url, urlname;\n      urlname = \"attachments/\" + type;\n      params = {\n        object_id: objectId,\n        project: projectId\n      };\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      url = urlsService.resolve(urlname);\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.get = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.get(url);\n    };\n    service[\"delete\"] = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http[\"delete\"](url);\n    };\n    service.patch = function(type, id, patch) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.patch(url, patch);\n    };\n    service.bulkAttachments = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + \"/bulk_update_order\";\n      return http.post(url, {\n        object_id: objectId,\n        after_attachment_id: afterAttachmentId,\n        bulk_attachments: bulkAttachments\n      });\n    };\n    service.create = function(type, projectId, objectId, file, from_comment) {\n      var data, defered, maxFileSize, response, token, uploadComplete, uploadFailed, uploadProgress, url, urlname, xhr;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname);\n      defered = $q.defer();\n      if (file === void 0) {\n        defered.reject(null);\n        return defered.promise;\n      }\n      maxFileSize = config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"in-progress\";\n            file.size = sizeFormat(evt.total);\n            file.progressMessage = \"upload \" + (sizeFormat(evt.loaded)) + \" of \" + (sizeFormat(evt.total));\n            return file.progressPercent = \"\" + (Math.round((evt.loaded / evt.total) * 100));\n          });\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            var attachment, ref, status;\n            file.status = \"done\";\n            status = evt.target.status;\n            try {\n              attachment = JSON.parse(evt.target.responseText);\n            } catch (error) {\n              attachment = {};\n            }\n            if (status >= 200 && status < 400) {\n              attachment = Immutable.fromJS(attachment);\n              return defered.resolve(attachment);\n            } else {\n              response = {\n                status: status,\n                data: {\n                  _error_message: (ref = data['attached_file']) != null ? ref[0] : void 0\n                }\n              };\n              return defered.reject(response);\n            }\n          });\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"error\";\n            return defered.reject(\"fail\");\n          });\n        };\n      })(this);\n      data = new FormData();\n      data.append(\"project\", projectId);\n      data.append(\"object_id\", objectId);\n      data.append(\"attached_file\", file);\n      data.append(\"from_comment\", from_comment);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.addEventListener(\"load\", uploadComplete, false);\n      xhr.addEventListener(\"error\", uploadFailed, false);\n      token = storage.get('token');\n      xhr.open(\"POST\", url);\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    return function() {\n      return {\n        \"attachments\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\", \"$rootScope\", \"$q\", \"$tgStorage\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgAttachmentsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"epics\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.list = function(projectId, page) {\n      var params, url;\n      if (page == null) {\n        page = 0;\n      }\n      url = urlsService.resolve(\"epics\");\n      params = {\n        project: projectId,\n        page: page\n      };\n      return http.get(url, params).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    service.patch = function(id, patch) {\n      var url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      return http.patch(url, patch).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.post = function(params) {\n      var url;\n      url = urlsService.resolve(\"epics\");\n      return http.post(url, params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.addRelatedUserstory = function(epicId, userstoryId) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId);\n      params = {\n        user_story: userstoryId,\n        epic: epicId\n      };\n      return http.post(url, params);\n    };\n    service.reorderRelatedUserstory = function(epicId, userstoryId, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options);\n    };\n    service.bulkCreateRelatedUserStories = function(epicId, projectId, bulk_userstories) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId);\n      params = {\n        bulk_userstories: bulk_userstories,\n        project_id: projectId\n      };\n      return http.post(url, params);\n    };\n    service.deleteRelatedUserstory = function(epicId, userstoryId) {\n      var url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      return http[\"delete\"](url);\n    };\n    return function() {\n      return {\n        \"epics\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgEpicsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getApplicationToken = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"applications\");\n      url = url + \"/\" + applicationId + \"/token?state=\" + state;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.authorizeApplicationToken = function(applicationId, state) {\n      var data, url;\n      url = urlsService.resolve(\"application-tokens\");\n      url = url + \"/authorize\";\n      data = {\n        \"state\": state,\n        \"application\": applicationId\n      };\n      return http.post(url, data).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"externalapps\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgExternalAppsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getHistory = function(historyType, contentType, objectId, page) {\n      var url;\n      url = urlsService.resolve(\"history/\" + contentType);\n      return http.get(url + \"/\" + objectId, {\n        page: page,\n        type: historyType\n      }).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    return function() {\n      return {\n        \"history\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgHistory\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaResource, GithubResource, JiraResource, TrelloResource, module, taiga;\n\n  taiga = this.taiga;\n\n  TrelloResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(url) {\n      url = urlsService.resolve(\"importers-trello-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(verifyCode) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-authorize\");\n      return http.post(url, {\n        code: verifyCode\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      var data, url;\n      url = urlsService.resolve(\"importers-trello-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: \"kanban\"\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"trelloImporter\": service\n      };\n    };\n  };\n\n  TrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  JiraResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(jira_url) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url;\n      return http.get(url);\n    };\n    service.authorize = function(oauth_verifier) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-authorize\");\n      return http.post(url, {\n        oauth_verifier: oauth_verifier\n      });\n    };\n    service.listProjects = function(jira_url, token) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-projects\");\n      return http.post(url, {\n        url: jira_url,\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(jira_url, token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-users\");\n      return http.post(url, {\n        url: jira_url,\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      var data, projectTemplate, url;\n      url = urlsService.resolve(\"importers-jira-import-project\");\n      projectTemplate = \"kanban\";\n      if (projectType !== \"kanban\") {\n        projectTemplate = \"scrum\";\n      }\n      data = {\n        url: jira_url,\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        project_type: projectType,\n        importer_type: importerType,\n        template: projectTemplate\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"jiraImporter\": service\n      };\n    };\n  };\n\n  JiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  GithubResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(callbackUri) {\n      var url;\n      url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri;\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-github-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-github-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"githubImporter\": service\n      };\n    };\n  };\n\n  GithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  AsanaResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function() {\n      var url;\n      url = urlsService.resolve(\"importers-asana-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-asana-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"asanaImporter\": service\n      };\n    };\n  };\n\n  AsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTrelloImportResource\", TrelloResource);\n\n  module.factory(\"tgJiraImportResource\", JiraResource);\n\n  module.factory(\"tgGithubImportResource\", GithubResource);\n\n  module.factory(\"tgAsanaImportResource\", AsanaResource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"issues\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"issues\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgIssuesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, config) {\n    var service;\n    service = {};\n    service.subscribeOnPremiseNewsletter = function(requestParams) {\n      var params;\n      params = {\n        url: config.get(\"newsletterSubscriberUrl\") + \"/subscribe/\",\n        method: \"POST\",\n        cancelable: true,\n        data: requestParams\n      };\n      return http.request(params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"onPremise\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgOnPremiseResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, pagination;\n\n  pagination = function() {};\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.create = function(data) {\n      var url;\n      url = urlsService.resolve('projects');\n      return http.post(url, JSON.stringify(data)).then((function(_this) {\n        return function(result) {\n          return Immutable.fromJS(result.data);\n        };\n      })(this));\n    };\n    service.duplicate = function(projectId, data) {\n      var members, params, url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId + \"/duplicate\";\n      members = data.users.map((function(_this) {\n        return function(member) {\n          return {\n            \"id\": member\n          };\n        };\n      })(this));\n      params = {\n        \"name\": data.name,\n        \"description\": data.description,\n        \"is_private\": data.is_private,\n        \"users\": members\n      };\n      return http.post(url, params);\n    };\n    service.getProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (params == null) {\n        params = {};\n      }\n      if (pagination == null) {\n        pagination = true;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-lazy-pagination\": true\n          }\n        };\n      }\n      return http.get(url, params, httpOptions);\n    };\n    service.getProjectBySlug = function(projectSlug) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/by_slug?slug=\" + projectSlug;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\"\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getListProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\",\n        \"slight\": true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectStats = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = urlsService.resolve(\"bulk-update-projects-order\");\n      return http.post(url, bulkData);\n    };\n    service.getTimeline = function(projectId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-project\");\n      url = url + \"/\" + projectId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.likeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-like\", projectId);\n      return http.post(url);\n    };\n    service.unlikeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unlike\", projectId);\n      return http.post(url);\n    };\n    service.watchProject = function(projectId, notifyLevel) {\n      var data, url;\n      data = {\n        notify_level: notifyLevel,\n        live_notify_level: notifyLevel\n      };\n      url = urlsService.resolve(\"project-watch\", projectId);\n      return http.post(url, data);\n    };\n    service.unwatchProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unwatch\", projectId);\n      return http.post(url);\n    };\n    service.contactProject = function(projectId, message) {\n      var params, url;\n      params = {\n        project: projectId,\n        comment: message\n      };\n      url = urlsService.resolve(\"project-contact\");\n      return http.post(url, params);\n    };\n    service.transferValidateToken = function(projectId, token) {\n      var data, url;\n      data = {\n        token: token\n      };\n      url = urlsService.resolve(\"project-transfer-validate-token\", projectId);\n      return http.post(url, data);\n    };\n    service.transferAccept = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-accept\", projectId);\n      return http.post(url, data);\n    };\n    service.transferReject = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-reject\", projectId);\n      return http.post(url, data);\n    };\n    service.transferRequest = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-transfer-request\", projectId);\n      return http.post(url);\n    };\n    service.transferStart = function(projectId, userId, reason) {\n      var data, url;\n      data = {\n        user: userId,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-start\", projectId);\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"projects\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgProjectsResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resources, services;\n\n  services = [\"tgProjectsResources\", \"tgUserResources\", \"tgUsersResources\", \"tgUserstoriesResource\", \"tgTasksResource\", \"tgIssuesResource\", \"tgExternalAppsResource\", \"tgAttachmentsResource\", \"tgStatsResource\", \"tgHistory\", \"tgEpicsResource\", \"tgTrelloImportResource\", \"tgJiraImportResource\", \"tgGithubImportResource\", \"tgAsanaImportResource\", \"tgOnPremiseResource\"];\n\n  Resources = function($injector) {\n    var i, j, len, len1, ref, service, serviceFn, serviceName, serviceProperty;\n    for (i = 0, len = services.length; i < len; i++) {\n      serviceName = services[i];\n      serviceFn = $injector.get(serviceName);\n      service = $injector.invoke(serviceFn);\n      ref = Object.keys(service);\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        serviceProperty = ref[j];\n        if (this[serviceProperty]) {\n          console.warn(\"repeated resource \" + serviceProperty);\n        }\n        this[serviceProperty] = service[serviceProperty];\n      }\n    }\n    return this;\n  };\n\n  Resources.$inject = [\"$injector\"];\n\n  angular.module(\"taigaResources2\").service(\"tgResources\", Resources);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.discover = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"stats-discover\");\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"stats\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgStatsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"tasks\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"tasks\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTasksResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserStorage = function(key) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-storage\");\n      if (key) {\n        url += '/' + key;\n      }\n      httpOptions = {};\n      return http.get(url, {}).then(function(response) {\n        return response.data.value;\n      });\n    };\n    service.setUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\") + '/' + key;\n      params = {\n        key: key,\n        value: value\n      };\n      return http.put(url, params);\n    };\n    service.createUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\");\n      params = {\n        key: key,\n        value: value\n      };\n      return http.post(url, params);\n    };\n    return function() {\n      return {\n        \"user\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserByUsername = function(username) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"by_username\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        username: username\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getStats = function(userId) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-stats\", userId);\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, {}, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getContacts = function(userId, excludeProjectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"user-contacts\", userId);\n      params = {};\n      if (excludeProjectId != null) {\n        params.exclude_project = excludeProjectId;\n      }\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getLiked = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-liked\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      params.only_relevant = true;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getVoted = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-voted\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getWatched = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-watched\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getProfileTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page\n      };\n      url = urlsService.resolve(\"timeline-profile\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getUserTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-user\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getNotifications = function(userId, page, onlyUnread) {\n      var params, url;\n      params = {\n        page: page\n      };\n      if (onlyUnread) {\n        params['only_unread'] = true;\n      }\n      url = urlsService.resolve(\"notifications\");\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        var paginateResponse;\n        result = Immutable.fromJS(result);\n        paginateResponse = Immutable.Map({\n          \"data\": result.get(\"data\").get(\"objects\"),\n          \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n          \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n          \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n          \"count\": result.get(\"headers\")(\"x-pagination-count\"),\n          \"total\": result.get(\"data\").get(\"total\")\n        });\n        return paginateResponse;\n      });\n    };\n    service.setNotificationAsRead = function(notificationId) {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/\" + notificationId + \"/set-as-read\";\n      return http.patch(url).then(function(result) {\n        return result;\n      });\n    };\n    service.setNotificationsAsRead = function() {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/set-as-read\";\n      return http.post(url).then(function(result) {\n        return result;\n      });\n    };\n    return function() {\n      return {\n        \"users\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUsersResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (pagination == null) {\n        pagination = false;\n      }\n      url = urlsService.resolve(\"userstories\");\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-disable-pagination\": \"1\"\n          }\n        };\n      }\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listAllInProject = function(projectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        project: projectId\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listInEpic = function(epicIid) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        epic: epicIid,\n        order_by: 'epic_order',\n        include_tasks: true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"userstories\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserstoriesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AppMetaService, taiga, truncate;\n\n  taiga = this.taiga;\n\n  truncate = taiga.truncate;\n\n  AppMetaService = (function() {\n    AppMetaService.$inject = [\"$rootScope\"];\n\n    function AppMetaService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    AppMetaService.prototype._set = function(key, value) {\n      var meta;\n      if (!key) {\n        return;\n      }\n      if (key === \"title\") {\n        meta = $(\"head title\");\n        if (meta.length === 0) {\n          meta = $(\"<title></title>\");\n          $(\"head\").append(meta);\n        }\n        return meta.html(value || \"\");\n      } else if (key.indexOf(\"og:\") === 0) {\n        meta = $(\"head meta[property='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta property='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      } else {\n        meta = $(\"head meta[name='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta name='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      }\n    };\n\n    AppMetaService.prototype.setTitle = function(title) {\n      return this._set('title', title);\n    };\n\n    AppMetaService.prototype.setDescription = function(description) {\n      return this._set(\"description\", truncate(description, 250));\n    };\n\n    AppMetaService.prototype.setTwitterMetas = function(title, description) {\n      this._set(\"twitter:card\", \"summary\");\n      this._set(\"twitter:site\", \"@taigaio\");\n      this._set(\"twitter:title\", title);\n      this._set(\"twitter:description\", truncate(description, 300));\n      return this._set(\"twitter:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n    };\n\n    AppMetaService.prototype.setOpenGraphMetas = function(title, description) {\n      this._set(\"og:type\", \"object\");\n      this._set(\"og:site_name\", \"Taiga - Love your projects\");\n      this._set(\"og:title\", title);\n      this._set(\"og:description\", truncate(description, 300));\n      this._set(\"og:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n      return this._set(\"og:url\", window.location.href);\n    };\n\n    AppMetaService.prototype.setAll = function(title, description) {\n      this.setTitle(title);\n      this.setDescription(description);\n      this.setTwitterMetas(title, description);\n      return this.setOpenGraphMetas(title, description);\n    };\n\n    AppMetaService.prototype.addMobileViewport = function() {\n      return $(\"head\").append(\"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\");\n    };\n\n    AppMetaService.prototype.removeMobileViewport = function() {\n      return $(\"head meta[name=\\\"viewport\\\"]\").remove();\n    };\n\n    AppMetaService.prototype.setfn = function(fn) {\n      if (this.listener) {\n        this._listener();\n      }\n      return this._listener = this.rootScope.$watchCollection(fn, (function(_this) {\n        return function(metas) {\n          if (metas) {\n            _this.setAll(metas.title, metas.description);\n            return _this._listener();\n          }\n        };\n      })(this));\n    };\n\n    return AppMetaService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsService, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsService = (function() {\n    AttachmentsService.$inject = [\"$tgConfirm\", \"$tgConfig\", \"$translate\", \"tgResources\"];\n\n    function AttachmentsService(confirm, config, translate, rs) {\n      this.confirm = confirm;\n      this.config = config;\n      this.translate = translate;\n      this.rs = rs;\n      this.types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\",\n        wiki: \"wiki\",\n        wikipage: \"wiki\"\n      };\n      this.maxFileSize = this.getMaxFileSize();\n      if (this.maxFileSize) {\n        this.maxFileSizeFormated = sizeFormat(this.maxFileSize);\n      }\n    }\n\n    AttachmentsService.prototype.sizeError = function(file) {\n      var message;\n      message = this.translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\n        fileName: file.name,\n        fileSize: sizeFormat(file.size),\n        maxFileSize: this.maxFileSizeFormated\n      });\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.validate = function(file) {\n      if (this.maxFileSize && file.size > this.maxFileSize) {\n        this.sizeError(file);\n        return false;\n      }\n      return true;\n    };\n\n    AttachmentsService.prototype.getMaxFileSize = function() {\n      return this.config.get(\"maxUploadFileSize\", null);\n    };\n\n    AttachmentsService.prototype.list = function(type, objId, projectId) {\n      return this.rs.attachments.list(type, objId, projectId).then((function(_this) {\n        return function(attachments) {\n          return attachments.sortBy(function(attachment) {\n            return attachment.get('order');\n          });\n        };\n      })(this));\n    };\n\n    AttachmentsService.prototype.get = function(type, id) {\n      return this.rs.attachments.get(this.types[type], id);\n    };\n\n    AttachmentsService.prototype[\"delete\"] = function(type, id) {\n      return this.rs.attachments[\"delete\"](type, id);\n    };\n\n    AttachmentsService.prototype.saveError = function(file, data) {\n      var message;\n      message = \"\";\n      if (file) {\n        message = this.translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\n          fileName: file.name,\n          errorMessage: data.data._error_message\n        });\n      }\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.upload = function(file, objId, projectId, type, from_comment) {\n      var promise;\n      if (from_comment == null) {\n        from_comment = false;\n      }\n      promise = this.rs.attachments.create(type, projectId, objId, file, from_comment);\n      promise.then(null, this.saveError.bind(this, file));\n      return promise;\n    };\n\n    AttachmentsService.prototype.bulkUpdateOrder = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var promise;\n      promise = this.rs.attachments.bulkAttachments(objectId, type, afterAttachmentId, bulkAttachments);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    AttachmentsService.prototype.patch = function(id, type, patch) {\n      var promise;\n      promise = this.rs.attachments.patch(type, id, patch);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    return AttachmentsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  AvatarService = (function() {\n    function AvatarService(config) {\n      var COLORS, IMAGES;\n      this.config = config;\n      IMAGES = [\"/\" + window._version + \"/images/user-avatars/user-avatar-01.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-02.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-03.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-04.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-05.png\"];\n      COLORS = [\"rgba( 178, 176, 204, 1 )\", \"rgba( 183, 203, 131, 1 )\", \"rgba( 210, 198, 139, 1 )\", \"rgba( 214, 161, 212, 1 )\", \"rgba( 247, 154, 154, 1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    AvatarService.prototype.getDefault = function(key) {\n      var idx, logo;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    AvatarService.prototype.getUnnamed = function() {\n      return {\n        url: \"/\" + window._version + \"/images/unnamed.png\",\n        username: ''\n      };\n    };\n\n    AvatarService.prototype.getAvatar = function(user, type) {\n      var avatarParamName, fullName, gravatar, logo, logoUrl, photo, root, username;\n      if (!user) {\n        return this.getUnnamed();\n      }\n      avatarParamName = 'photo';\n      if (type === 'avatarBig') {\n        avatarParamName = 'big_photo';\n      }\n      photo = null;\n      if (user instanceof Immutable.Map) {\n        gravatar = user.get('gravatar_id');\n        photo = user.get(avatarParamName);\n        username = \"@\" + (user.get('username'));\n        fullName = user.get('full_name_display');\n      } else {\n        gravatar = user.gravatar_id;\n        photo = user[avatarParamName];\n        username = \"@\" + user.username;\n        fullName = user.full_name_display;\n      }\n      if (!gravatar) {\n        return this.getUnnamed();\n      }\n      if (photo) {\n        return {\n          url: photo,\n          username: username,\n          fullName: fullName\n        };\n      } else if (location.host.indexOf('localhost') !== -1 || !this.config.get(\"gravatar\", true)) {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        return {\n          url: root + logo.src,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      } else {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        logoUrl = encodeURIComponent(root + logo.src);\n        return {\n          url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      }\n    };\n\n    return AvatarService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CheckPermissionsService, taiga;\n\n  taiga = this.taiga;\n\n  CheckPermissionsService = (function() {\n    CheckPermissionsService.$inject = [\"tgProjectService\"];\n\n    function CheckPermissionsService(projectService) {\n      this.projectService = projectService;\n    }\n\n    CheckPermissionsService.prototype.check = function(permission) {\n      if (!this.projectService.project) {\n        return false;\n      }\n      return this.projectService.project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    return CheckPermissionsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CurrentUserService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  CurrentUserService = (function() {\n    CurrentUserService.$inject = [\"tgProjectsService\", \"$tgStorage\", \"tgResources\", \"$q\"];\n\n    function CurrentUserService(projectsService, storageService, rs, q) {\n      this.projectsService = projectsService;\n      this.storageService = storageService;\n      this.rs = rs;\n      this.q = q;\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      this._joyride = null;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this._projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsById\", (function(_this) {\n        return function() {\n          return _this._projectsById;\n        };\n      })(this));\n    }\n\n    CurrentUserService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    CurrentUserService.prototype.getUser = function() {\n      var userData;\n      if (!this._user) {\n        userData = this.storageService.get(\"userInfo\");\n        if (userData) {\n          userData = Immutable.fromJS(userData);\n          this.setUser(userData);\n        }\n      }\n      return this._user;\n    };\n\n    CurrentUserService.prototype.removeUser = function() {\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      return this._joyride = null;\n    };\n\n    CurrentUserService.prototype.setUser = function(user) {\n      this._user = user;\n      return this._loadUserInfo();\n    };\n\n    CurrentUserService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.projectsService.bulkUpdateProjectsOrder(sortData).then((function(_this) {\n        return function() {\n          return _this.loadProjects();\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this._user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjectsList = function() {\n      return this.projectsService.getListProjectsByUserId(this._user.get(\"id\"), null).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.disableJoyRide = function(section) {\n      if (!this.isAuthenticated()) {\n        return;\n      }\n      if (section) {\n        this._joyride[section] = false;\n      } else {\n        this._joyride = {\n          backlog: false,\n          kanban: false,\n          dashboard: false\n        };\n      }\n      return this.rs.user.setUserStorage('joyride', this._joyride);\n    };\n\n    CurrentUserService.prototype.loadJoyRideConfig = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          if (_this._joyride !== null) {\n            resolve(_this._joyride);\n            return;\n          }\n          return _this.rs.user.getUserStorage('joyride').then(function(config) {\n            _this._joyride = config;\n            return resolve(_this._joyride);\n          })[\"catch\"](function() {\n            _this._joyride = {\n              backlog: true,\n              kanban: true,\n              dashboard: true\n            };\n            _this.rs.user.createUserStorage('joyride', _this._joyride);\n            return resolve(_this._joyride);\n          });\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype._loadUserInfo = function() {\n      return this.q.all([this.loadProjectsList()]);\n    };\n\n    CurrentUserService.prototype.setProjects = function(projects) {\n      this._projects = this._projects.set(\"all\", projects);\n      this._projects = this._projects.set(\"recents\", projects.slice(0, 4));\n      this._projects = this._projects.set(\"unblocked\", projects.filter(function(project) {\n        return project.toJS().blocked_code === null;\n      }));\n      this._projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n        return p.id;\n      }));\n      return this.projects;\n    };\n\n    CurrentUserService.prototype.canCreatePrivateProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user.get('max_private_projects') !== null && user.get('total_private_projects') >= user.get('max_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_private_projects',\n          type: 'private_project',\n          current: user.get('total_private_projects'),\n          max: user.get('max_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canCreatePublicProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user && user.get('max_public_projects') !== null && user.get('total_public_projects') >= user.get('max_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_public_projects',\n          type: 'public_project',\n          current: user.get('total_public_projects'),\n          max: user.get('max_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPublicProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_public_projects') !== null && totalMembers > user.get('max_memberships_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_public_projects',\n          type: 'public_project',\n          current: totalMembers,\n          max: user.get('max_memberships_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPrivateProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_private_projects') !== null && totalMembers > user.get('max_memberships_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_private_projects',\n          type: 'private_project',\n          current: totalMembers,\n          max: user.get('max_memberships_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canOwnProject = function(project) {\n      var membersResult, result, user;\n      user = this.getUser();\n      if (project.get('is_private')) {\n        result = this.canCreatePrivateProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPrivateProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      } else {\n        result = this.canCreatePublicProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPublicProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      }\n      return {\n        valid: true\n      };\n    };\n\n    return CurrentUserService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ErrorHandlingService, taiga;\n\n  taiga = this.taiga;\n\n  ErrorHandlingService = (function() {\n    ErrorHandlingService.$inject = [\"$rootScope\"];\n\n    function ErrorHandlingService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    ErrorHandlingService.prototype.init = function() {\n      return this.rootScope.errorHandling = {};\n    };\n\n    ErrorHandlingService.prototype.notfound = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.notfound = true;\n    };\n\n    ErrorHandlingService.prototype.error = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.error = true;\n    };\n\n    ErrorHandlingService.prototype.permissionDenied = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.permissionDenied = true;\n    };\n\n    ErrorHandlingService.prototype.block = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.blocked = true;\n    };\n\n    return ErrorHandlingService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxFactory;\n\n  LightboxFactory = (function() {\n    LightboxFactory.$inject = [\"$rootScope\", \"$compile\"];\n\n    function LightboxFactory(rootScope, compile) {\n      this.rootScope = rootScope;\n      this.compile = compile;\n    }\n\n    LightboxFactory.prototype.create = function(name, attrs, scopeAttrs) {\n      var elm, html, scope;\n      scope = this.rootScope.$new();\n      scope = _.merge(scope, scopeAttrs);\n      elm = $(\"<div>\").attr(name, true).attr(\"tg-bind-scope\", true);\n      if (attrs) {\n        elm.attr(attrs);\n      }\n      elm.addClass(\"remove-on-close\");\n      html = this.compile(elm)(scope);\n      $(document.body).append(html);\n    };\n\n    return LightboxFactory;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PaginateResponse;\n\n  PaginateResponse = function() {\n    return function(result) {\n      var paginateResponse;\n      paginateResponse = Immutable.Map({\n        \"data\": result.get(\"data\"),\n        \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n        \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n        \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n        \"count\": result.get(\"headers\")(\"x-pagination-count\")\n      });\n      return paginateResponse;\n    };\n  };\n\n  angular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  ProjectLogoService = (function() {\n    function ProjectLogoService() {\n      var COLORS, IMAGES;\n      IMAGES = [\"/\" + window._version + \"/images/project-logos/project-logo-01.png\", \"/\" + window._version + \"/images/project-logos/project-logo-02.png\", \"/\" + window._version + \"/images/project-logos/project-logo-03.png\", \"/\" + window._version + \"/images/project-logos/project-logo-04.png\", \"/\" + window._version + \"/images/project-logos/project-logo-05.png\"];\n      COLORS = [\"rgba( 153,  214, 220, 1 )\", \"rgba( 213,  156,  156, 1 )\", \"rgba( 214, 161, 212,  1 )\", \"rgba( 164, 162, 219, 1 )\", \"rgba( 152, 224, 168,  1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    ProjectLogoService.prototype.getDefaultProjectLogo = function(slug, id) {\n      var idx, key, logo;\n      key = slug + \"-\" + id;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    return ProjectLogoService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectService, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  ProjectService = (function() {\n    ProjectService.$inject = [\"$rootScope\", \"tgProjectsService\", \"tgXhrErrorService\", \"tgUserActivityService\", \"$interval\", \"$q\"];\n\n    function ProjectService(rootScope, projectsService, xhrError, userActivityService, interval, q) {\n      this.rootScope = rootScope;\n      this.projectsService = projectsService;\n      this.xhrError = xhrError;\n      this.userActivityService = userActivityService;\n      this.interval = interval;\n      this.q = q;\n      this.manageProjectSignal = bind(this.manageProjectSignal, this);\n      this._project = null;\n      this._section = null;\n      this._sectionsBreadcrumb = Immutable.List();\n      this._activeMembers = Immutable.List();\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this._project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"section\", (function(_this) {\n        return function() {\n          return _this._section;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"sectionsBreadcrumb\", (function(_this) {\n        return function() {\n          return _this._sectionsBreadcrumb;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"activeMembers\", (function(_this) {\n        return function() {\n          return _this._activeMembers;\n        };\n      })(this));\n      if (!window.localStorage.e2e) {\n        this.autoRefresh();\n      }\n      this.watchSignals();\n    }\n\n    ProjectService.prototype.watchSignals = function() {\n      var fetchRequiredSignals, i, len, results, signal;\n      fetchRequiredSignals = [\"admin:project-modules:updated\", \"admin:project-roles:updated\", \"admin:project-default-values:updated\", \"admin:project-values:updated\", \"admin:project-values:move\", \"admin:project-custom-attributes:updated\", \"sprintform:create:success\", \"sprintform:edit:success\", \"sprintform:remove:success\", \"tags:updated\"];\n      results = [];\n      for (i = 0, len = fetchRequiredSignals.length; i < len; i++) {\n        signal = fetchRequiredSignals[i];\n        results.push(this.rootScope.$on(signal, this.manageProjectSignal));\n      }\n      return results;\n    };\n\n    ProjectService.prototype.manageProjectSignal = function(ctx) {\n      return this.fetchProject();\n    };\n\n    ProjectService.prototype.cleanProject = function() {\n      this._project = null;\n      this._activeMembers = Immutable.List();\n      this._section = null;\n      return this._sectionsBreadcrumb = Immutable.List();\n    };\n\n    ProjectService.prototype.autoRefresh = function() {\n      var intervalId;\n      intervalId = this.interval((function(_this) {\n        return function() {\n          return _this.fetchProject();\n        };\n      })(this), 60 * 10 * 1000);\n      this.userActivityService.onInactive((function(_this) {\n        return function() {\n          return _this.interval.cancel(intervalId);\n        };\n      })(this));\n      return this.userActivityService.onActive((function(_this) {\n        return function() {\n          _this.fetchProject();\n          return _this.autoRefresh();\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.setSection = function(section) {\n      this._section = section;\n      if (section) {\n        return this._sectionsBreadcrumb = this._sectionsBreadcrumb.push(this._section);\n      } else {\n        return this._sectionsBreadcrumb = Immutable.List();\n      }\n    };\n\n    ProjectService.prototype.setProject = function(project) {\n      this._project = project;\n      return this._activeMembers = this._project.get('members').filter(function(member) {\n        return member.get('is_active');\n      });\n    };\n\n    ProjectService.prototype.setProjectBySlug = function(pslug) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          if (!_this.project || _this.project.get('slug') !== pslug) {\n            return _this.projectsService.getProjectBySlug(pslug).then(function(project) {\n              _this.setProject(project);\n              return resolve();\n            })[\"catch\"](function(xhr) {\n              return _this.xhrError.response(xhr);\n            });\n          } else {\n            return resolve();\n          }\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.fetchProject = function() {\n      var pslug;\n      if (!this.project) {\n        return;\n      }\n      pslug = this.project.get('slug');\n      return this.projectsService.getProjectBySlug(pslug).then((function(_this) {\n        return function(project) {\n          return _this.setProject(project);\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.hasPermission = function(permission) {\n      return this._project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    ProjectService.prototype.isEpicsDashboardEnabled = function() {\n      return this._project.get(\"is_epics_activated\");\n    };\n\n    return ProjectService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ThemeService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ThemeService = (function(superClass) {\n    extend(ThemeService, superClass);\n\n    function ThemeService() {\n      return ThemeService.__super__.constructor.apply(this, arguments);\n    }\n\n    ThemeService.prototype.use = function(themeName) {\n      var stylesheetEl;\n      stylesheetEl = $(\"link[rel='stylesheet']:first\");\n      if (stylesheetEl.length === 0) {\n        stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\");\n        $(\"head\").append(stylesheetEl);\n      }\n      return stylesheetEl.attr(\"href\", \"/\" + window._version + \"/styles/theme-\" + themeName + \".css\");\n    };\n\n    return ThemeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserActivityService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  UserActivityService = (function() {\n    UserActivityService.$inject = ['$timeout'];\n\n    UserActivityService.prototype.idleTimeout = 60 * 5 * 1000;\n\n    function UserActivityService(timeout) {\n      this.timeout = timeout;\n      if (window.localStorage.e2e) {\n        return null;\n      }\n      window.addEventListener('mousemove', this.resetTimer.bind(this), false);\n      window.addEventListener('mousedown', this.resetTimer.bind(this), false);\n      window.addEventListener('keypress', this.resetTimer.bind(this), false);\n      window.addEventListener('mousewheel', this.resetTimer.bind(this), false);\n      window.addEventListener('touchmove', this.resetTimer.bind(this), false);\n      this.subscriptionsActive = [];\n      this.subscriptionsInactive = [];\n      this.isActive = true;\n      this.startTimer();\n    }\n\n    UserActivityService.prototype.startTimer = function() {\n      return this.timerId = this.timeout(this._fireInactive.bind(this), this.idleTimeout);\n    };\n\n    UserActivityService.prototype.resetTimer = function() {\n      if (!this.isActive) {\n        this._fireActive();\n      }\n      this.timeout.cancel(this.timerId);\n      this.startTimer();\n      return this.isActive = true;\n    };\n\n    UserActivityService.prototype.onActive = function(cb) {\n      this.subscriptionsActive.push(cb);\n      return this._unSubscriptionsActive.bind(this, cb);\n    };\n\n    UserActivityService.prototype.onInactive = function(cb) {\n      this.subscriptionsInactive.push(cb);\n      return this._unSubscriptionsInactive.bind(this, cb);\n    };\n\n    UserActivityService.prototype._fireActive = function() {\n      return this.subscriptionsActive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._fireInactive = function() {\n      this.isActive = false;\n      return this.subscriptionsInactive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsActive = function(cb) {\n      return this.subscriptionsActive = this.subscriptionsActive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsInactive = function(cb) {\n      return this.subscriptionsInactive = this.subscriptionsInactive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    return UserActivityService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserListService, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  normalizeString = this.taiga.normalizeString;\n\n  UserListService = (function() {\n    UserListService.$inject = [\"tgCurrentUserService\", \"tgProjectService\"];\n\n    function UserListService(currentUserService, projectService) {\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    UserListService.prototype.filterUsers = function(text, user) {\n      var username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = text.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    UserListService.prototype.searchUsers = function(text, excludedUser) {\n      var users;\n      this.currentUser = this.currentUserService.getUser();\n      users = _.clone(this.projectService.activeMembers.toJS(), true);\n      if (excludedUser) {\n        users = _.reject(users, {\n          \"id\": excludedUser.id\n        });\n      }\n      users = _.sortBy(users, (function(_this) {\n        return function(o) {\n          var ref;\n          if (o.id === ((ref = _this.currentUser) != null ? ref.get('id') : void 0)) {\n            return 0;\n          } else {\n            return o.id;\n          }\n        };\n      })(this));\n      if (text != null) {\n        users = _.filter(users, _.partial(this.filterUsers, text));\n      }\n      return users;\n    };\n\n    return UserListService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserService, bindMethods, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = taiga.bindMethods;\n\n  UserService = (function(superClass) {\n    extend(UserService, superClass);\n\n    UserService.$inject = [\"tgResources\"];\n\n    function UserService(rs) {\n      this.rs = rs;\n      bindMethods(this);\n    }\n\n    UserService.prototype.getUserByUserName = function(username) {\n      return this.rs.users.getUserByUsername(username);\n    };\n\n    UserService.prototype.getContacts = function(userId, excludeProjectId) {\n      return this.rs.users.getContacts(userId, excludeProjectId);\n    };\n\n    UserService.prototype.getLiked = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getLiked(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getVoted = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getVoted(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getWatched = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getWatched(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getStats = function(userId) {\n      return this.rs.users.getStats(userId);\n    };\n\n    UserService.prototype.attachUserContactsToProjects = function(userId, projects) {\n      return this.getContacts(userId).then(function(contacts) {\n        projects = projects.map(function(project) {\n          var contactsFiltered;\n          contactsFiltered = contacts.filter(function(contact) {\n            var contactId;\n            contactId = contact.get(\"id\");\n            return project.get('members').indexOf(contactId) !== -1;\n          });\n          project = project.set(\"contacts\", contactsFiltered);\n          return project;\n        });\n        return projects;\n      });\n    };\n\n    return UserService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgUserService\", UserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var xhrError,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  xhrError = (function(superClass) {\n    extend(xhrError, superClass);\n\n    xhrError.$inject = [\"$q\", \"tgErrorHandlingService\"];\n\n    function xhrError(q, errorHandlingService) {\n      this.q = q;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    xhrError.prototype.notFound = function() {\n      return this.errorHandlingService.notfound();\n    };\n\n    xhrError.prototype.permissionDenied = function() {\n      return this.errorHandlingService.permissionDenied();\n    };\n\n    xhrError.prototype.response = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.notFound();\n        } else if (xhr.status === 403) {\n          this.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return xhrError;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineAttachmentDirective;\n\n  UserTimelineAttachmentDirective = function(template, $compile) {\n    var isImage, link, validFileExtensions;\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"];\n    isImage = function(url) {\n      url = url.toLowerCase();\n      return _.some(validFileExtensions, function(extension) {\n        return url.indexOf(extension, url - extension.length) !== -1;\n      });\n    };\n    link = function(scope, el) {\n      var is_image, templateHtml;\n      is_image = isImage(scope.attachment.get('url'));\n      if (is_image) {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\");\n      } else {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\");\n      }\n      el.html(templateHtml);\n      $compile(el.contents())(scope);\n      return el.find(\"img\").error(function() {\n        return this.remove();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        attachment: \"=tgUserTimelineAttachment\"\n      }\n    };\n  };\n\n  UserTimelineAttachmentDirective.$inject = [\"$tgTemplate\", \"$compile\"];\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemTitle, unslugify;\n\n  unslugify = this.taiga.unslugify;\n\n  UserTimelineItemTitle = (function() {\n    UserTimelineItemTitle.$inject = [\"$translate\", \"$sce\"];\n\n    UserTimelineItemTitle.prototype._fieldTranslationKey = {\n      'status': 'COMMON.FIELDS.STATUS',\n      'subject': 'COMMON.FIELDS.SUBJECT',\n      'description_diff': 'COMMON.FIELDS.DESCRIPTION',\n      'points': 'COMMON.FIELDS.POINTS',\n      'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\n      'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\n      'severity': 'ISSUES.FIELDS.SEVERITY',\n      'priority': 'ISSUES.FIELDS.PRIORITY',\n      'type': 'ISSUES.FIELDS.TYPE',\n      'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\n      'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\n      'color': 'COMMON.FIELDS.COLOR',\n      'due_date': 'COMMON.FIELDS.DUE_DATE',\n      'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\n      'milestone': 'COMMON.FIELDS.SPRINT'\n    };\n\n    UserTimelineItemTitle.prototype._params = {\n      username: function(timeline, event) {\n        var title_attr, url, user;\n        user = timeline.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\";\n          return this._getLink(url, user.get('name'), title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      field_name: function(timeline, event) {\n        var field_name;\n        field_name = timeline.getIn(['data', 'value_diff', 'key']);\n        return this.translate.instant(this._fieldTranslationKey[field_name]);\n      },\n      project_name: function(timeline, event) {\n        var url;\n        url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\";\n        return this._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]));\n      },\n      new_value: function(timeline, event) {\n        var new_value, prettyDate, value;\n        if (_.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())) {\n          value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1);\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_to') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          }\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_users') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          } else if (timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'due_date') {\n            if (value) {\n              prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n              value = moment(value, \"YYYY-MM-DD\").format(prettyDate);\n            } else {\n              value = this.translate.instant('ACTIVITY.VALUES.NOT_SET');\n            }\n          }\n          new_value = value;\n        } else {\n          new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1);\n        }\n        return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML');\n      },\n      sprint_name: function(timeline, event) {\n        var url;\n        url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\";\n        return this._getLink(url, timeline.getIn(['data', 'milestone', 'name']));\n      },\n      us_name: function(timeline, event) {\n        var event_us, obj, text, url;\n        obj = this._getTimelineObj(timeline, event).get('userstory');\n        event_us = {\n          obj: 'parent_userstory'\n        };\n        url = this._getDetailObjUrl(event_us);\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      related_us_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"userstory\"]);\n        url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      epic_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"epic\"]);\n        url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      obj_name: function(timeline, event) {\n        var obj, text, url;\n        obj = this._getTimelineObj(timeline, event);\n        url = this._getDetailObjUrl(event);\n        if (event.obj === 'wikipage') {\n          text = unslugify(obj.get('slug'));\n        } else if (event.obj === 'milestone') {\n          text = obj.get('name');\n        } else {\n          text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        }\n        return this._getLink(url, text);\n      },\n      role_name: function(timeline, event) {\n        return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first());\n      }\n    };\n\n    function UserTimelineItemTitle(translate, sce) {\n      this.translate = translate;\n      this.sce = sce;\n    }\n\n    UserTimelineItemTitle.prototype._translateTitleParams = function(param, timeline, event) {\n      return this._params[param].call(this, timeline, event);\n    };\n\n    UserTimelineItemTitle.prototype._getTimelineObj = function(timeline, event) {\n      return timeline.getIn(['data', event.obj]);\n    };\n\n    UserTimelineItemTitle.prototype._getDetailObjUrl = function(event) {\n      var url;\n      url = {\n        \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\n        \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\n        \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\n        \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\n      };\n      return url[event.obj][0] + url[event.obj][1];\n    };\n\n    UserTimelineItemTitle.prototype._getLink = function(url, text, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a>').attr('tg-nav', url).append(span).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getParams = function(timeline, event, timeline_type) {\n      var params;\n      params = {};\n      timeline_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, timeline, event);\n        };\n      })(this));\n      return params;\n    };\n\n    UserTimelineItemTitle.prototype.getTitle = function(timeline, event, type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(timeline, event, type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return UserTimelineItemTitle;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineType, timelineType;\n\n  timelineType = function(timeline, event) {\n    var types;\n    types = [\n      {\n        check: function(timeline, event) {\n          return event.obj === 'membership';\n        },\n        key: 'TIMELINE.NEW_MEMBER',\n        translate_params: ['project_name'],\n        member: function(timeline) {\n          return Immutable.Map({\n            user: timeline.getIn(['data', 'user']),\n            role: timeline.getIn(['data', 'role'])\n          });\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'project' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_PROJECT',\n        translate_params: ['username', 'project_name'],\n        description: function(timeline) {\n          return timeline.getIn(['data', 'project', 'description']);\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'attachments';\n        },\n        key: 'TIMELINE.UPLOAD_ATTACHMENT',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.US_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'create';\n        },\n        key: 'TIMELINE.ISSUE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'create';\n        },\n        key: 'TIMELINE.WIKI_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED_WITH_US',\n        translate_params: ['username', 'project_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'create';\n        },\n        key: 'TIMELINE.MILESTONE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'relateduserstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\n        translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.NEW_COMMENT_US',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'issue';\n        },\n        key: 'TIMELINE.NEW_COMMENT_ISSUE',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'task';\n        },\n        key: 'TIMELINE.NEW_COMMENT_TASK',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'epic';\n        },\n        key: 'TIMELINE.NEW_COMMENT_EPIC',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) && event.type === 'change';\n        },\n        key: 'TIMELINE.US_MOVED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) === null;\n          }\n          return false;\n        },\n        key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.US_ADDED_MILESTONE',\n        translate_params: ['username', 'obj_name', 'sprint_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === true;\n          }\n          return false;\n        },\n        key: 'TIMELINE.BLOCKED',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          if (timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])) {\n            text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1);\n            return $($.parseHTML(text)).text();\n          } else {\n            return false;\n          }\n        }\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === false;\n          }\n          return false;\n        },\n        key: 'TIMELINE.UNBLOCKED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'change';\n        },\n        key: 'TIMELINE.MILESTONE_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'change';\n        },\n        key: 'TIMELINE.WIKI_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'points';\n        },\n        key: 'TIMELINE.US_UPDATED_POINTS',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.US_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change';\n        },\n        key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.EPIC_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'color';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'user' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_USER',\n        translate_params: ['username']\n      }\n    ];\n    return _.find(types, function(obj) {\n      return obj.check(timeline, event);\n    });\n  };\n\n  UserTimelineType = (function() {\n    function UserTimelineType() {}\n\n    UserTimelineType.prototype.getType = function(timeline, event) {\n      return timelineType(timeline, event);\n    };\n\n    return UserTimelineType;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemType\", UserTimelineType);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemDirective;\n\n  UserTimelineItemDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\",\n      scope: {\n        timeline: \"=tgUserTimelineItem\"\n      }\n    };\n  };\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineItem\", UserTimelineItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelinePaginationSequence;\n\n  UserTimelinePaginationSequence = function() {\n    var obj;\n    obj = {};\n    obj.generate = function(config) {\n      var getContent, items, next, page;\n      page = 1;\n      items = Immutable.List();\n      config.minItems = config.minItems || 20;\n      next = function() {\n        items = Immutable.List();\n        return getContent();\n      };\n      getContent = function() {\n        return config.fetch(page).then(function(response) {\n          var data, pagination;\n          page++;\n          data = response.get(\"data\");\n          if (config.filter) {\n            data = config.filter(data);\n          }\n          if (config.map && data) {\n            data = data.map(config.map);\n          }\n          items = items.concat(data);\n          if (items.size < config.minItems && response.get(\"next\")) {\n            return getContent();\n          }\n          pagination = Immutable.Map({\n            items: items,\n            total: response.get(\"total\"),\n            next: response.get(\"next\")\n          });\n          return pagination;\n        });\n      };\n      return {\n        next: function() {\n          return next();\n        }\n      };\n    };\n    return obj;\n  };\n\n  angular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineController, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  UserTimelineController = (function(superClass) {\n    extend(UserTimelineController, superClass);\n\n    UserTimelineController.$inject = [\"tgUserTimelineService\"];\n\n    function UserTimelineController(userTimelineService) {\n      this.userTimelineService = userTimelineService;\n      this.timelineList = Immutable.List();\n      this.scrollDisabled = false;\n      this.timeline = null;\n      if (this.projectId) {\n        this.timeline = this.userTimelineService.getProjectTimeline(this.projectId);\n      } else if (this.currentUser) {\n        this.timeline = this.userTimelineService.getProfileTimeline(this.user.get(\"id\"));\n      } else {\n        this.timeline = this.userTimelineService.getUserTimeline(this.user.get(\"id\"));\n      }\n      this.loadTimeline();\n    }\n\n    UserTimelineController.prototype.loadTimeline = function() {\n      this.scrollDisabled = true;\n      return this.timeline.next().then((function(_this) {\n        return function(response) {\n          _this.timelineList = _this.timelineList.concat(response.get(\"items\"));\n          if (response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          return _this.timelineList;\n        };\n      })(this));\n    };\n\n    return UserTimelineController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaUserTimeline\").controller(\"UserTimeline\", UserTimelineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineDirective;\n\n  UserTimelineDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\n      controller: \"UserTimeline\",\n      controllerAs: \"vm\",\n      scope: {\n        projectId: \"=projectid\",\n        user: \"=\",\n        currentUser: \"=\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  UserTimelineService = (function(superClass) {\n    extend(UserTimelineService, superClass);\n\n    UserTimelineService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"tgUserTimelineItemType\", \"tgUserTimelineItemTitle\"];\n\n    function UserTimelineService(rs, userTimelinePaginationSequenceService, userTimelineItemType, userTimelineItemTitle) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.userTimelineItemType = userTimelineItemType;\n      this.userTimelineItemTitle = userTimelineItemTitle;\n    }\n\n    UserTimelineService.prototype._valid_fields = ['status', 'subject', 'description_diff', 'assigned_users', 'assigned_to', 'points', 'severity', 'priority', 'type', 'attachments', 'is_iocaine', 'content_diff', 'name', 'estimated_finish', 'estimated_start', 'blocked', 'moveInBacklog', 'milestone', 'color', 'due_date', 'due_date_reason'];\n\n    UserTimelineService.prototype._invalid = [\n      {\n        check: function(timeline) {\n          var fieldKey, value_diff;\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff) {\n            fieldKey = value_diff.get('key');\n            if (this._valid_fields.indexOf(fieldKey) === -1) {\n              return true;\n            } else if (fieldKey === 'attachments' && value_diff.get('value').get('new').size === 0) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          return event[2] === 'change' && value_diff === void 0;\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[2] === 'delete';\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[1] === 'project' && event[2] === 'change';\n        }\n      }, {\n        check: function(timeline) {\n          return !!timeline.get(\"data\").get(\"comment_deleted\");\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff && event[1] === \"task\" && event[2] === \"change\" && value_diff.get(\"key\") === \"milestone\") {\n            return timeline.get(\"data\").get(\"value_diff\").get(\"value\");\n          }\n          return false;\n        }\n      }\n    ];\n\n    UserTimelineService.prototype._isInValidTimeline = function(timeline) {\n      return _.some(this._invalid, (function(_this) {\n        return function(invalid) {\n          return invalid.check.call(_this, timeline);\n        };\n      })(this));\n    };\n\n    UserTimelineService.prototype._parseEventType = function(event_type) {\n      event_type = event_type.split(\".\");\n      return {\n        section: event_type[0],\n        obj: event_type[1],\n        type: event_type[2]\n      };\n    };\n\n    UserTimelineService.prototype._getTimelineObject = function(timeline, event) {\n      if (timeline.get('data').get(event.obj)) {\n        return timeline.get('data').get(event.obj);\n      }\n    };\n\n    UserTimelineService.prototype._attachExtraInfoToTimelineEntry = function(timeline, event, type) {\n      var title;\n      title = this.userTimelineItemTitle.getTitle(timeline, event, type);\n      timeline = timeline.set('title_html', title);\n      timeline = timeline.set('obj', this._getTimelineObject(timeline, event));\n      if (type.description) {\n        timeline = timeline.set('description', type.description(timeline));\n      }\n      if (type.member) {\n        timeline = timeline.set('member', type.member(timeline));\n      }\n      if (timeline.getIn(['data', 'value_diff', 'key']) === 'attachments' && timeline.hasIn(['data', 'value_diff', 'value', 'new'])) {\n        timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']));\n      }\n      return timeline;\n    };\n\n    UserTimelineService.prototype._parseTimeline = function(response) {\n      var newdata;\n      newdata = Immutable.List();\n      response.get('data').forEach((function(_this) {\n        return function(item) {\n          var data, event, newItem, values_diff;\n          event = _this._parseEventType(item.get('event_type'));\n          data = item.get('data');\n          values_diff = data.get('values_diff');\n          if (values_diff && values_diff.count()) {\n            if (values_diff.has('is_blocked')) {\n              values_diff = Immutable.Map({\n                'blocked': values_diff\n              });\n            }\n            if (values_diff.has('milestone')) {\n              if (event.obj === 'userstory') {\n                values_diff = Immutable.Map({\n                  'moveInBacklog': values_diff\n                });\n              } else {\n                values_diff = values_diff.deleteIn(['values_diff', 'milestone']);\n              }\n            } else if (event.obj === 'milestone') {\n              values_diff = Immutable.Map({\n                'milestone': values_diff\n              });\n            }\n            return values_diff.forEach(function(value, key) {\n              var newItem, obj;\n              obj = Immutable.Map({\n                key: key,\n                value: value\n              });\n              newItem = item.setIn(['data', 'value_diff'], obj);\n              newItem = newItem.deleteIn(['data', 'values_diff']);\n              return newdata = newdata.push(newItem);\n            });\n          } else {\n            newItem = item.deleteIn(['data', 'values_diff']);\n            return newdata = newdata.push(newItem);\n          }\n        };\n      })(this));\n      return response.set('data', newdata);\n    };\n\n    UserTimelineService.prototype._addEntyAttributes = function(item) {\n      var event, type;\n      event = this._parseEventType(item.get('event_type'));\n      type = this.userTimelineItemType.getType(item, event);\n      return this._attachExtraInfoToTimelineEntry(item, event, type);\n    };\n\n    UserTimelineService.prototype.getProfileTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getProfileTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getUserTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getUserTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getProjectTimeline = function(projectId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.projects.getTimeline(projectId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    return UserTimelineService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IsolateClickDirective;\n\n  IsolateClickDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {\n      return el.on('click', (function(_this) {\n        return function(e) {\n          return e.stopPropagation();\n        };\n      })(this));\n    };\n    return {\n      link: link\n    };\n  };\n\n  angular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDiffDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDiffDirective = function() {\n    return {\n      templateUrl: \"wiki/history/wiki-history-diff.html\",\n      scope: {\n        key: \"<\",\n        diff: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryEntryDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryEntryDirective = function() {\n    var link;\n    link = function(scope, el, attr) {\n      return scope.singleHistoryEntry = scope.historyEntry.toJS();\n    };\n    return {\n      link: link,\n      templateUrl: \"wiki/history/wiki-history-entry.html\",\n      scope: {\n        historyEntry: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryController, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaWikiHistory\");\n\n  WikiHistoryController = (function() {\n    WikiHistoryController.$inject = [\"tgActivityService\"];\n\n    function WikiHistoryController(activityService) {\n      this.activityService = activityService;\n      taiga.defineImmutableProperty(this, 'historyEntries', (function(_this) {\n        return function() {\n          return _this.activityService.entries;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disablePagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      this.toggle = false;\n    }\n\n    WikiHistoryController.prototype.initializeHistory = function(wikiId) {\n      if (wikiId) {\n        this.activityService.init('wiki', wikiId);\n      }\n      return this.loadHistory();\n    };\n\n    WikiHistoryController.prototype.loadHistory = function() {\n      return this.activityService.fetchEntries();\n    };\n\n    WikiHistoryController.prototype.nextPage = function() {\n      return this.activityService.nextPage();\n    };\n\n    return WikiHistoryController;\n\n  })();\n\n  module.controller(\"WikiHistoryCtrl\", WikiHistoryController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return bindOnce(scope, 'vm.wikiId', function(value) {\n        return ctrl.initializeHistory(value);\n      });\n    };\n    return {\n      scope: {},\n      bindToController: {\n        wikiId: \"<\"\n      },\n      controller: \"WikiHistoryCtrl\",\n      controllerAs: \"vm\",\n      templateUrl: \"wiki/history/wiki-history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiHistory\", WikiHistoryDirective);\n\n}).call(this);\n\n//# sourceMappingURL=maps/app.js.map\n"],"names":["configure","i18nInit","init","pluginsWithModule","taiga","this","emojis","window","taigaContribPlugins","generateHash","components","_","map","x","JSON","stringify","hex_sha1","join","generateUniqueSessionIdentifier","date","Date","getTime","randomNumber","Math","floor","random","sessionId","$routeProvider","$locationProvider","$httpProvider","$provide","$tgEventsProvider","$compileProvider","$translateProvider","$translatePartialLoaderProvider","$animateProvider","$logProvider","originalWhen","userInfo","classNameFilter","when","path","route","resolve","angular","extend","languageLoad","$q","$translate","deferred","defer","then","promise","projectLoaded","projectService","$route","setSection","ref","current","$$route","section","params","pslug","setProjectBySlug","cleanProject","call","templateUrl","controller","controllerAs","loader","title","description","joyride","reloadOnSearch","access","requiresLogin","template","redirectTo","disableHeader","taigaConfig","publicRegisterEnabled","mobileViewport","otherwise","html5Mode","enabled","requireBase","defaultHeaders","Content-Type","Accept-Language","defaultLanguage","X-Session-Id","defaults","headers","patch","post","put","get","useApplyAsync","setSessionId","authHttpIntercept","$location","$navUrls","$lightboxService","errorHandlingService","$injector","urls","storage","retry","inProgress","responseError","response","config","url","includes","reject","status","cancelable","closeAll","error","indexOf","Promise","apiUrl","request","$http","refreshTokenReponse","responseRefresh","set","data","auth_token","refresh","Authorization","result","errorToken","nextUrl","search","remove","force_next","location","href","err","refreshToken","factory","interceptors","push","loaderIntercept","loaderService","logRequest","requestError","rejection","logResponse","versionCheckHttpIntercept","version","element","injector","invoke","$confirm","versionErrorMsg","instant","notify","blockingIntercept","redirectToBlockedPage","block","blocked_code","debugInfoEnabled","debugInfo","localStorage","parse","preferedLangCode","lang","addPart","useLoader","urlTemplate","_version","useSanitizeValueStrategy","addInterpolation","preferredLanguage","useMissingTranslationHandlerLog","fallbackLanguage","decorators","getDecorators","each","decorator","provider","debugEnabled","debug","console","info","moment","locale","document","querySelector","setAttribute","ljs","load","messages","defaultMessage","type","email","urlstrict","number","digits","dateIso","alphanum","phone","notnull","notblank","required","regexp","min","max","range","minlength","maxlength","rangelength","mincheck","maxcheck","rangecheck","equalto","linewidth","pikaday","checksley","updateMessages","$log","$rootscope","$auth","$events","$analytics","$tagManager","$userPilot","appMetaService","navigationBarService","lightboxService","$tgConfig","un","$on","validators","val","width","lines","nl2br","split","every","line","length","prettyDate","isValid","RegExp","test","updateValidators","contribPlugins","adminPlugins","filter","authPlugins","userSettingsPlugins","e","ctx","language","rtlLanguages","isRTL","translations","translationTable","getTranslationTable","lan","setupConnection","isAuthenticated","getUser","initialize","identify","event","getLightboxOpen","preventDefault","next","start","project","setAll","addMobileViewport","removeMobileViewport","enableHeader","module","value","plugin","pluginsModules","modules","concat","run","TaigaBase","TaigaService","child","parent","key","hasProp","ctor","constructor","prototype","__super__","hasOwnProperty","bind","fn","me","apply","arguments","TaigaController","onInitialDataError","xhr","notfound","permissionDenied","q","Base","Service","Controller","DEFAULT_COLOR_LIST","findScope","getDefaulColorList","getMatches","getRandomDefaultColor","isEmail","isImage","isPdf","normalizeString","randomInt","item","i","l","slice","addClass","el","className","classList","add","str","replace","bindMethods","object","dependencies","keys","methods","forIn","isFunction","bindAll","bindOnce","scope","attr","continuation","delBind","$eval","$watch","mixOf","Mixed","base","method","mixins","name","trim","char","slugify","toString","toLowerCase","unslugify","capitalize","toggleText","texts","nextTextPosition","text","groupBy","coll","pred","len","timeout","wait","setTimeout","cancelTimeout","timeoutVar","clearTimeout","scopeDefer","func","$apply","isNumber","isString","isPlainObject","isUndefined","joinStr","debounce","leading","trailing","debounceLeading","startswith","str1","str2","startsWith","truncate","maxLength","suffix","out","String","substring","lastIndexOf","sizeFormat","input","precision","units","isNaN","parseFloat","isFinite","log","pow","toFixed","stripTags","exception","pattern","replaceTags","tags","defineImmutableProperty","obj","Object","defineProperty","fn_result","isObject","size","mixin","removeKeys","chain","flatten","reduce","cartesianProduct","reduceRight","a","b","y","match","oldImmutable","newImmutable","pathObj","forEach","newValue","toJS","sample","clone","string","regex","index","matches","exec","end","interval","normalizedString","$scope","condition","$parent","PageMixin","FiltersMixin","UsFiltersMixin","fillUsersAndRoles","users","roles","computableRoles","activeUsers","user","is_active","sortBy","activeUsersById","id","usersById","members","uniq","loadUsersAndRoles","_this","all","rs","projects","usersList","projectId","rolesList","results","excludePrefix","selectFilter","mode","existing","compact","isInCurrentRouteParams","noreload","replaceFilter","replaceAllFilters","filters","unselectFilter","parsedValues","newValues","isEmpty","applyStoredFilters","projectSlug","validKeys","getFilters","pick","storeFilters","filtersHashSuffix","ns","hash","formatSelectedFilters","list","urlIds","selectedFilters","selectedIds","it","invalidTags","find","sit","invalidAppliedTags","dataType","validAppliedTags","color","filterCategories","excludeFilters","changeQ","filterQ","filtersReloadContent","removeFilter","generateFilters","addFilter","newFilter","category","selectCustomFilter","customFilter","saveCustomFilter","excludeKey","urlfilters","filterRemoteStorageService","storeCustomFiltersName","userFilters","removeCustomFilter","isFilterDataTypeSelected","filterDataType","milestone","loadFilters","storeFiltersName","userstories","filtersData","j","len1","ref1","selected","customFiltersRaw","dataCollection","statuses","tagsWithAtLeastOneElement","tag","count","assigned_users","full_name","assigned_to","role","owner","owners","epic","epics","subject","translate","content","hideEmpty","totalTaggedElements","customFilters","forOwn","$translateMissingTranslationHandlerLog","translationId","$inject","displayName","LoginPage","currentUserService","$routeParams","decodeURIComponent","clear","removeToken","AuthService","rootscope","model","http","config1","userpilot","currentUserService1","themeService","analytics","userModel","_currentTheme","_getUserTheme","setUserdata","userData","Immutable","fromJS","getAttrs","setUser","setUserId","ref2","compiledThemes","_taigaAvailableThemes","defaultTheme","theme","_setTheme","newTheme","use","_setLocales","make_model","auth","setRefreshToken","token","getRefreshToken","setToken","getToken","$broadcast","login","logout","removeUser","register","getInvitation","invitations","acceptInvitiationWithNewUser","forgotPassword","changePasswordFromRecovery","changeEmail","cancelAccount","exportProfile","sendVerificationEmail","service","PublicRegisterMessageDirective","$config","templates","restrict","encodeURIComponent","directive","LoginDirective","$window","link","$el","$attrs","onError","onSuccess","submit","form","Form","defaultLoginEnabled","trackEvent","onKeyUp","currentTarget","iscapsLockActivated","validate","username","password","loginFormType","on","prerenderReady","off","RegisterDirective","onErrorSubmit","onSuccessSubmit","onlyOneErrorElement","_error_message","setErrors","RegisterOptionsDirective","ForgotPasswordDirective","message","success","ChangePasswordFromRecoveryDirective","$params","tokenInParams","InvitationDirective","loginForm","onErrorSubmitLogin","onErrorSubmitRegister","onSuccessSubmitLogin","onSuccessSubmitRegister","registerForm","submitLogin","invitation","dataLogin","project_slug","project_name","invitation_token","dataRegister","submitRegister","VerifyEmailDirective","$repo","$model","email_token","queryOne","ChangeEmailDirective","CancelAccountDirective","cancel_token","TaigaMainDirective","onresize","home","not-found","permission-denied","discover","discover-search","forgot-password","change-password","change-email","verified-email","cancel-account","create-project","create-project-scrum","create-project-kanban","create-project-duplicate","create-project-import","create-project-import-platform","profile","user-profile","blocked-project","project-detail-ref","project-backlog","project-taskboard","project-kanban","project-issues","project-epics","project-search","project-timeline","project-epics-detail","project-userstories-detail","project-tasks-detail","project-issues-detail","project-wiki","project-wiki-list","project-wiki-page","project-team","project-admin-home","project-admin-project-profile-details","project-admin-project-profile-default-values","project-admin-project-profile-modules","project-admin-project-profile-export","project-admin-project-profile-reports","project-admin-project-values-status","project-admin-project-values-points","project-admin-project-values-priorities","project-admin-project-values-severities","project-admin-project-values-types","project-admin-project-values-custom-fields","project-admin-project-values-tags","project-admin-project-values-due-dates","project-admin-project-values-kanban-power-ups","project-admin-memberships","project-admin-roles","project-admin-third-parties-webhooks","project-admin-third-parties-github","project-admin-third-parties-gitlab","project-admin-third-parties-bitbucket","project-admin-third-parties-gogs","project-admin-contrib","user-settings-user-profile","user-settings-user-change-password","user-settings-user-avatar","user-settings-user-project-settings","user-settings-mail-notifications","user-settings-live-notifications","user-settings-web-notifications","user-settings-contrib","notifications","$navurls","update","ToggleCommentDirective","QueueModelTransformation","qqueue1","repo","model1","qqueue","DataPickerConfig","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","firstDay","parseInt","format","SelectedText","$document","getSelection","selection","createRange","CheckPermissionDirective","render","permission","removeClass","unObserve","unwatch","tgCheckPermission","$observe","ClassPermissionDirective","unbindWatcher","checkPermissions","negation","my_permissions","tgClassPermissionWatchAction","classes","AnimationFrame","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","performAnimation","time","tail","shift","ProjectUrl","slug","is_backlog_activated","is_kanban_activated","is_wiki_activated","is_issues_activated","Qqueue","lastPromise","bindAdd","args","setObject","scope1","prop","attrs","cloneDeep","_attrs","_name","getObj","save","transformation","defered","comment","modified","omit","_modifiedAttrs","assign","Template","$templateCache","lodash","tmp","Capslock","Svg","svgIcon","svgTitle","svgTitleTranslate","svgTitleTranslateValues","svgFill","Autofocus","$timeout","$parse","$element","ngShow","focus","spinner","preload","src","onLoad","image","Image","onload","transclude","show","prepend","hide","DetailController","navurls","issue","task","us","wikipage","EventsService","win","liveAnnouncementService1","rootScope","liveAnnouncementService","processMessage","EventsProvider","subscriptions","connected","pendingMessages","missedHeartbeats","heartbeatInterval","WebSocket","loc","scheme","stopExistingConnection","protocol","trimStart","host","ws","addEventListener","onOpen","onMessage","onClose","removeEventListener","stopHeartBeatMessages","close","subscribe","desc","$digest","liveNotifications","userId","notification","Notification","icon","body","onshow","onclick","open","requestPermission","webNotifications","routingKey","startHeartBeatMessages","maxMissedHeartbeats","heartbeatIntervalTime","setInterval","Error","sendMessage","cmd","error1","clearInterval","processHeartBeatPongMessage","serialize","msg","send","subscription","routing_key","callback","options","unsubscribe","reconnectTryInterval","$get","$win","$conf","$rootScope","FeedbackDirective","$loading","feedbackService","currentLoading","target","submitButton","create","feedback","finish","openLightbox","RelatedTaskRowDirective","$compile","$template","$emojis","templateView","templateEdit","saveTask","renderEdit","childScope","$destroy","$new","html","keyCode","$modelValue","renderView","perms","modify_task","delete_task","emojify","replaceEmojiNameByHtmlImgs","escape","select","askOnDelete","askResponse","$emit","ngModel","require","RelatedTaskCreateFormDirective","$tgmodel","newTask","createTask","default_task_status","openNewRelatedTask","reset","RelatedTaskCreateButtonDirective","RelatedTasksDirective","$rs","loadTasks","tasks","usId","_isVisible","reorderTask","newIndex","showAddTaks","showRelatedTasks","RelatedTaskAssignedToInlineEditionDirective","avatarService","$lightboxFactory","updateRelatedTask","member","avatar","getAvatar","imgurl","bg","full_name_display","tgRelatedTaskAssignedToInlineEdition","autoSave","notAutoSave","stopPropagation","assignedUsers","pop","class","currentUsers","single","lbTitle","unbind","ResourcesService","initResources","initUrls","auth-register","by_username","users-password-recovery","users-change-password-from-recovery","users-change-password","users-change-email","users-cancel-account","users-export","user-stats","user-liked","user-voted","user-watched","user-contacts","user-me","user-send-verification-email","permissions","notify-policies","user-project-settings","user-storage","memberships","bulk-create-memberships","resolver","project-templates","project-modules","bulk-update-projects-order","project-like","project-unlike","project-watch","project-unwatch","project-contact","project-transfer-validate-token","project-transfer-accept","project-transfer-reject","project-transfer-request","project-transfer-start","epic-statuses","userstory-statuses","userstory-due-dates","userstory-due-dates-create-default","points","task-statuses","task-due-dates","task-due-dates-create-default","issue-statuses","issue-due-dates","issue-due-dates-create-default","issue-types","priorities","severities","milestones","move-userstories-to-milestone","move-tasks-to-milestone","move-issues-to-milestone","epic-upvote","epic-downvote","epic-watch","epic-unwatch","epic-related-userstories","epic-related-userstories-bulk-create","bulk-create-us","bulk-update-us-backlog-order","bulk-update-us-milestone","bulk-update-us-miles-order","bulk-update-us-kanban-order","userstories-filters","userstory-upvote","userstory-downvote","userstory-watch","userstory-unwatch","bulk-create-tasks","bulk-update-task-taskboard-order","bulk-update-task-milestone","task-upvote","task-downvote","task-watch","task-unwatch","task-filters","promote-task-to-us","issues","bulk-create-issues","bulk-update-issue-milestone","issues-filters","issue-upvote","issue-downvote","issue-watch","issue-unwatch","promote-issue-to-us","swimlanes","swimlane-userstory-statuses","wiki","wiki-restore","wiki-links","history/epic","history/us","history/issue","history/task","history/wiki","attachments/epic","attachments/us","attachments/issue","attachments/task","attachments/wiki_page","attachments/wikipage","custom-attributes/epic","custom-attributes/userstory","custom-attributes/task","custom-attributes/issue","custom-attributes-values/epic","custom-attributes-values/userstory","custom-attributes-values/task","custom-attributes-values/issue","webhooks","webhooks-test","webhooklogs","webhooklogs-resend","epics-csv","userstories-csv","tasks-csv","issues-csv","timeline-profile","timeline-user","timeline-project","exporter","importer","locales","applications","application-tokens","stats-discover","importers-trello-auth-url","importers-trello-authorize","importers-trello-list-projects","importers-trello-list-users","importers-trello-import-project","importers-jira-auth-url","importers-jira-authorize","importers-jira-list-projects","importers-jira-list-users","importers-jira-import-project","importers-github-auth-url","importers-github-authorize","importers-github-list-projects","importers-github-list-users","importers-github-import-project","importers-asana-auth-url","importers-asana-authorize","importers-asana-list-projects","importers-asana-list-users","importers-asana-import-project","$urls","providers","toArray","SearchController","navUrls","projectService1","sectionName","loadInitialData","projectName","projectDescription","searchTerm","t","loadSearchData","searchResults","term","loadProject","epicStatusById","epic_statuses","issueStatusById","issue_statuses","taskStatusById","task_statuses","severityById","priorityById","usStatusById","us_statuses","loading","_loadSearchData","_promise","abort","SearchBoxDirective","reload","SearchDirective","$templatecache","$routeparams","linkTable","$ctrl","applyAutoTab","activeSectionName","tabsDom","currentSearchResults","getActiveSection","maxVal","selectedSection","renderFilterTabs","markSectionTabActive","wikipages","renderTableContent","oldElements","children","oldScope","parseHTML","activeSection","trackPage","sectionData","searchText","AnalyticsService","doc","initialized","conf","accountId","pageEvent","trackRoutes","ignoreFirstPageLoad","injectAnalytics","ga","getUrl","uuid","s","o","g","r","m","createElement","getElementsByTagName","async","parentNode","insertBefore","page","action","label","ecViewPlan","plan","plan_id","quantity","position","ecClickPlan","ecListPlans","arg","plans","ecAddToCart","plan_name","plan_price","price","ecConfirmChange","step","ecPurchase","revenue","BindScope","jQuery","CompileHtmlDirective","tgCompileHtml","oldValue","contents","DateRangeDirective","renderRange","first","second","startDate","endDate","tgDateRange","valFirst","valSecond","DateSelectorDirective","datePickerConfigService","datePickerConfig","merge","field","picker","Pikaday","destroy","setDate","SprintProgressBarDirective","renderProgress","percentage","visual_percentage","hasClass","css","tgSprintProgressbar","sprint","closedPoints","closed_points","totalPoints","total_points","round","CreatedByDisplayDirective","owner_extra_info","created_date","UserDisplayDirective","tgUserId","BlockButtonDirective","isEditable","DeleteButtonDirective","onDeleteGoToUrl","onDeleteTitle","subtitle","ListItemEpicStatusDirective","tgListitemEpicStatus","ListItemUsStatusDirective","tgListitemUsStatus","ListItemTaskStatusDirective","tgListitemTaskStatus","ListItemAssignedtoDirective","tgListitemAssignedto","ListItemIssueStatusDirective","tgListitemIssueStatus","ListItemTypeDirective","issueTypeById","domNode","tgListitemType","ListItemPriorityDirective","priority","tgListitemPriority","ListItemSeverityDirective","severity","tgListitemSeverity","TgProgressBarDirective","tgProgressBar","TgMainTitleDirective","i18nSectionName","ConfirmService","NOTIFICATION_MSG","light-error","ask","lightboxSelector","currentWidth","ok","onEsc","askDelete","lightbox","askChoice","choices","replacement","warning","choicesField","append","detailImage","svgContainer","useSVG","$","createElementNS","setAttributeNS","appendChild","spin","stop","percent","selector","tsem","one","CHECKBOX_TYPE","CustomAttributesValuesController","DATE_TYPE","DROPDOWN_TYPE","NUMBER_TYPE","confirm","objectId","customAttributes","customAttributesValues","loadCustomAttributesValues","getAttributeValue","attribute","attributeValue","attributes_values","updateAttributeValue","attributesValues","CustomAttributesValuesDirective","$templates","$storage","collapsedHash","$ctrls","collapsed","toggleCollapse","requiredEditionPerm","CustomAttributeValueDirective","$selectedText","wysiwygService","setFocusAndSelectOnInputField","edit","editable","attributeHtml","getHTML","extra","onSelect","selectedDate","saveCustomRichText","markdown","cancelCustomRichText","formControl","checked","tgCustomAttributeValue","customAttributeValue","EmojisService","replaceEmojiNameByImgs","replaceImgsByEmojiName","getEmojiByName","getEmojiById","searchByName","emojisById","keyBy","emojisByName","emojiId","regexImgs","emojiIds","emoji","escapeRegExp","LbUsEstimationDirective","$tgEstimationsService","estimationProcess","onSelectedPointForRole","roleId","pointId","$setViewValue","calculateTotalPoints","calculateRoles","UsEstimationDirective","$modelTransform","$watchCollection","EstimationsService","$qqueue","EstimationProcess","pointsTemplate","$el1","us1","project1","bindClickEvents","pointsById","revert","values","v","k","notNullValues","acc","num","pointObj","renderPointsSelector","siblings","popover","point","horizontalList","some","horizontal","closest","offset","top","height","clientHeight","defaultFilter","defaultValue","yesNoFilter","momentFormat","momentFromNow","without_suffix","fromNow","toMutableFilter","toMutable","js","memoizedMutable","memoize","List","byRefFilter","$filterFilter","cleanRef","substr","darkerFilter","luminosity","c","newColor","markdownToHTML","wysiwigService","inArray","$filter","arrayFilter","listItem","textToHTML","superClass","LightboxService","LightboxKeyboardNavigationService","ignoreEsc","lightboxContent","not","firstField","activeElement","blur","which","$applyAsync","docEl","removeAttr","lightboxEl","dispatch","code","trigger","prev","LightboxDirective","$attr","visible","LightboxClose","elm","BlockLightboxDirective","$tgrepo","unblock","finishCallback","transform","is_blocked","blocked_note","BlockingMessageInputDirective","ngmodel","watch","CreateBulkUserstoriesDirective","getCurrentStatus","displayStatusSelector","currentStatus","statusId","toggleStatus","displayStatus","hideStatus","setStatus","swimlaneId","bulk","us_position","swimlane","default_swimlane","bulkCreate","swimlane_id","parents","LightboxLeaveProjectWarningDirective","SetDueDateDirective","due_date","new_due_date","unit","due_date_reason","CreateEditDirective","attachmentsService","checkClose","createAttachments","deleteAttachments","getSchema","isDisabledExisting","mount","resetAttachments","saveItem","sprintChangeConfirmAndSave","schema","attachmentsToAdd","attachmentsToDelete","schemas","objName","include_attachments","include_tasks","translationID","translationIDPlural","statusList","initialData","default_us_status","is_archived","sprintId","user_story","typeById","issue_types","typeList","severityList","priorityList","milestonesById","default_priority","default_severity","default_issue_status","default_issue_type","setMode","getOrCreate","existingFilterText","listInAllProjects","existingItems","copy","objType","attachments","lightboxOpen","addAttachment","attachment","deleteAttachment","addTag","projectTags","tags_colors","itemtags","deleteTag","pull","promises","upload","file","addExistingToSprint","oldSprintName","newSprintName","relatedObjectId","setAttr","relatedField","broadcastEvent","isLoading","getByRef","isModified","team_requirement","client_requirement","is_iocaine","isTeamRequirement","isClientRequirement","selectedStatus","is_closed","templateScope","compiledTemplate","RelateToEpicLightboxDirective","$tgCurrentUserService","tgResources","$tgResources","$epicsService","tgAnalytics","existingEpicForm","filterEpics","loadProjects","newEpicForm","selectProject","projectEpics","selectedProject","selectedProjectId","filterText","is_epics_activated","project__blocked_code","excludeIds","filteredData","selectedEpic","searchEpic","onUpdateSearchEpic","saveRelatedEpic","selectedEpicId","onSavedRelatedEpic","addRelatedUserstory","createEpic","epicSubject","onCreateEpic","errors","epicId","Loaded","compile","$event","LoaderDirective","tgLoader","onStart","onEnd","Loader","minTime","startLoadTime","requestCount","lastResponseDate","pageLoaded","force","timeoutValue","diff","autoClose","intervalAuto","auto","TgLoadingService","settings","removeClasses","classess","timeoutId","LoadingDirective","tgLoading","showLoading","UsStatusDirective","usStatusDomParent","usStatusDom","statusElement","tgUsStatus","onUpdate","RelatedTaskStatusDirective","selectionTemplate","updateTaskStatus","taskStatusDomParent","taskStatusDom","tgRelatedTaskStatus","isVisible","docViewBottom","docViewRight","docViewTop","elemBottom","elemLeft","elemTop","elemWidth","display","visibility","scrollTop","left","elemRight","closePopover","fadeOut","fadeIn","globalPopover","cb","createSvg","elementPosition","followElement","ul","wrapper","attrHref","tgSvg","svg","xlink","createAttribute","setAttributeNode","rect","getBoundingClientRect","right","paddingTop","paddingLeft","style","option","li","button","innerHTML","createTextNode","ExceptionHandlerFactory","ravenConfig","Raven","install","cause","captureException","SECTIONS","SectionsService","1","2","3","4","5","6","getPath","sectionId","defaultHomePage","p","TagManagerService","injectTagManager","w","d","gtm.start","f","dl","TagsDirective","formatter","isArray","parser","$formatters","$parsers","ColorizeTagsBacklogDirective","tgColorizeBacklogTags","LbTagLineDirective","templateTags","autocomplete","withoutColors","has","renderTags","tagsColors","showSaveButton","hideSaveButton","resetInput","addValue","deleteValue","saveInputTag","fromCharCode","Awesomplete","UserPilotService","checkZendeskConditions","hasPaidPlan","is_new_user","getJoinedLimit","userPilotId","getItem","calculateUserPilotId","userPilotCustomer","prepareUserPilotCustomer","zE","setZendeskWidgetStatus","created_at","now","taiga_id","taiga_username","taiga_date_joined","taiga_lang","taiga_max_private_projects","taiga_max_memberships_private_projects","taiga_verified_email","taiga_total_private_projects","taiga_total_public_projects","taiga_roles","maxPrivateProjects","limit","getDate","supress","webWidget","chat","suppress","contactForm","helpCenter","talk","answerBot","CreateEditSprint","getLastSprint","openFn","resetSprint","ussToAdd","hasErrors","createSprint","newSprint","createEditOpen","estimated_start","estimated_finish","estimated_end","realClone","sprintsCounter","sprints","__all__","milestonesCounter","openSprints","closed","sortedSprints","uss","estimatedStart","lastSprint","estimatedFinish","lastSprintNameDom","editSprint","BacklogController","params1","events","rs2","modelTransform","backlogOrder","milestonesOrder","disablePagination","firstLoadComplete","translationData","totalUserStories","pendingDrag","noSwimlaneUserStories","swimlanesList","validQueryParams","showTags","activeFilters","showGraphPlaceholder","displayVelocity","initializeEventHandlers","loadSwimlanes","getShowTags","newUs","loadUserstories","loadProjectStats","els","moveUsToTopOfBacklog","ussToMove","loadSprints","toggleVelocityForecasting","loadClosedSprints","findIndex","moveUs","resetFirstStoryIndicator","unloadClosedSprints","initializeSubscription","routingKey1","loadAllPaginatedUserstories","routingKey2","selfNotification","toggleShowTags","storeShowTags","toggleActiveFilters","calculateForecasting","visibleUserStories","forecastedStories","stats","defined_points","completedPercentage","total_milestones","setMilestonesOrder","user_stories","results1","sprint_order","closedSprints","totalClosedMilestones","closedSprintsById","totalMilestones","totalOpenMilestones","sprintsById","currentSprint","findCurrentSprint","resetPagination","pageSize","loadingUserstories","storeQueryParams","lastLoadUserstoriesParams","listUnassigned","header","backlog_order","loadBacklog","getLinkParams","ParsedLastLoadUserstoriesParams","pickBy","identity","sprintTotalPoints","backlog_points_sum","assigned_points","forecastNewSprint","speed","closedMilestones","total_closed_milestones","usStatusList","toggleTags","prepareBulkUpdateData","uses","us_id","order","first_us_in_backlog","nextUs","Array","usList","newUsIndex","newSprintId","previousUs","currentSprintId","len2","targetList","oldSprintId","bulkUserstories","splice","bulkUpdateBacklogOrder","updatedUs","n","len3","updateUserStoryStatus","editUserStory","deleteUserStory","without","addNewUs","addNewSprint","currentDate","addFilterBacklog","removeFilterBacklog","BacklogDirective","doomLineTemplate","linkDoomLine","reloadDoomLine","current_sum","domElement","removeDoomlineDom","addDoomLineDom","before","linkToolbar","checkSelected","lastChecked","shiftPressed","getUsToMove","ussDom","itemScope","moveUssToSprint","selectedUss","ussCurrent","extraPoints","totalExtraPoints","union","bulkUpdateMilestone","moveToCurrentSprint","moveToLatestSprint","partial","toggleClass","moveToSprintDom","shiftKey","elements","nextAll","prevAll","nextUntil","prevUntil","showHideTags","ussToMoveList","openFilterInit","showHideFilter","linkFilters","filtersSearch","UsEditSelector","$tgTemplate","mainTemplate","removePopupOpenState","contains","UsRolePointsSelectorDirective","roleName","is","UsPointsDirective","rolesTemplate","bindClickElements","renderRolesSelector","updatingSelectedRoleId","selectedRoleId","tgBacklogUsPoints","popRolesDom","ToggleBurndownVisibility","firstLoad","toggleGraph","isBurndownGraphCollapsed","BurndownBacklogGraphDirective","redrawChart","dataToDraw","milestonesRange","zero_line","ml","zip","fillColor","optimal_line","optimal","evolution_line","evolution","client_increment_line","team_increment_line","colors","grid","borderWidth","bottom","borderColor","hoverable","margin","xaxis","ticks","axisLabel","axisLabelUseCanvas","axisLabelFontSizePixels","axisLabelFontFamily","axisLabelPadding","tickFormatter","axis","yaxis","series","shadowSize","fill","radius","lineWidth","tooltip","tooltipOpts","xval","yval","flotItem","seriesIndex","sprintName","abs","empty","plot","TgBacklogProgressBarDirective","projectPointsPercentaje","closedPointsPercentaje","adjustPercentaje","adjusted","tgBacklogProgressBar","definedPoints","deleteElement","BacklogSortableDirective","ctrl","drake","initIsBacklog","oldIndex","emptyBacklog","dragula","copySortSource","isContainer","moves","source","sibling","dataset","Number","container","dragMultiple","firstElement","dragMultipleItems","getElements","parentEl","isBacklog","sameContainer","autoScroll","pixels","scrollWhenOutside","down","dragging","BacklogSprintDirective","slideOptions","duration","easing","toggleSprint","sprintTable","tgBacklogSprint","slideToggle","BacklogSprintHeaderDirective","taskboardUrl","estimatedDateRange","ToggleExcludeClosedSprintsVisualization","excludeClosedSprints","loadingElm","after","SprintDirective","SprintChartDirective","days","utc","day","unshift","open_points","optimal_points","tickSize","last","daysNames","formattedDate","roundedValue","CreateBulkTasksDirective","TaskboardController","rs1","q1","taskboardTasksService","taskboardIssuesService","lightboxFactory","timeout1","openFilter","backToBacklogUrl","usTasks","taskMap","milestoneIssues","tasksByUs","milestoneIssue","issuesRaw","rawIssue","getQueryParams","_setMeta","setZoom","zoomLevel","zoom","previousZoomLevel","isFirstLoad","resetFolds","zoomLoading","loadIssues","completedPoints","completedPointsSum","totalPointsSum","openTasks","totalTasks","total_tasks","refreshTagsColors","replaceModel","taskMove","onAssignedToChanged","itemsMoved","userid","getName","loadTaskboard","loadSprintStats","loadSprint","pointsList","roleById","taskStatusList","res","completed_points","remainingPointsSum","remainingTasks","completed_tasks","setUserstories","locationParams","listInProject","initIssues","notFoundTasks","initialLoad","sslug","getSprintShowTags","setRolePoints","storeSprintShowTags","showPlaceHolder","tasksRaw","editTask","getTask","getIn","editingTask","editIssue","getIssue","editingIssue","deleteTask","deletingTask","deleteIssue","deletingIssue","removeIssueFromSprint","removingIssue","oldStatusId","movingTask","getTaskModel","moveUpdateData","move","status__is_archived","set-orders","set_orders","reloadUserStory","assignOrders","userStoryId","addNewTask","addNewIssue","targetName","toggleFold","modelName","openUsersSelection","changeTaskAssignedTo","changeIssueAssignedTo","getIssueModel","getPoint","pointsByRole","getRole","getIssuesOrderBy","order_by","TaskboardDirective","scrollLeft","TaskboardSquishColumnDirective","getCeilWidth","recalculateStatusColumnWidth","recalculateTaskboardWidth","setStatusColumnWidth","statusesFolded","getStatusColumnModes","usFolded","getUsRowModes","foldStatus","storeStatusColumnModes","foldUs","rowId","storeUsRowModes","isStatusFolded","isUSFolded","columns","ceil","avatarWidth","statusFoldedWidth","initialWidth","total","TaskboardSortableDirective","filterError","initialContainer","itemEl","newParentScope","oldParentScope","$tgConfirm","containers","accepts","cancel","itemIndex","itemTask","newStatusId","newUsId","oldUsId","st","TaskboardIssuesService","foldStatusChanged","issueId","issueModel","images","thumbnail_card_url","colorized_tags","TaskboardTasksService","Map","taskId","refreshRawOrder","taskboard_order","invert","afterDestination","previous","previousWithTheSameOrder","setOrders","taksWithoutMoved","taskByUsStatus","beforeDestination","task_id","taskModel","KanbanUserstoriesService","resetSwimlanesList","resetArchivedStatus","resetHideStatud","userstoriesRaw","usByStatus","usMap","usByStatusSwimlanes","statusHide","archivedStatus","refreshUserStory","initUsByStatusList","usModel","refreshSwimlanes","retrieveUserStoryData","addArchivedStatus","isUsInArchivedHiddenStatus","deleteStatus","showStatus","getStatus","toDelete","archived","difference","kanban_order","previousCard","nextCard","initialLength","previousUsIndex","previousUsOrder","usByStatusWithoutMoved","listIt","moveIt","getUsModel","afterUserstoryId","beforeUserstoryId","moveToEnd","usItem","getUs","assignedUserId","assignedUserData","assigned_users_preview","refreshUsMap","collection","emptySwimlaneExists","userstoriesNoSwimlane","emptySwimlane","insert","swimlaneUsByStatus","usListSwimlanes","CardSvgTemplate","KanbanController","kanbanUserstoriesService1","kanbanUserstoriesService","renderUserStories","changeUsAssignedUsers","movedUs","foldedSwimlane","renderBatching","isLightboxOpened","isRefreshNeeded","cleanSelectedUss","toggleSelectedUs","moveToTopDropdown","moveUsToTop","nextUsId","lastUsId","newOrder","loadUserStoriesForStatus","hideUserStoriesForStatus","refreshAfterSwimlanesOrUserstoryStatusesHaveChanged","fetchProject","randomTimeout","routingKeyUserstories","eventsLoadUserstories","routingKeyProject","editUs","editingUserStory","deleteUs","deletingUserStory","firstStatus","firstSwimlane","toggleSwimlane","kanban","storeSwimlanesModes","assignedUsersIds","renderBatch","clean","renderInProgress","take","queue","batchSize","rendered","drop","batchTimings","userstoriesMap","loadUserstoriesParams","modifiedUs","eventUserstories","pk","raw","listAll","newUss","archivedPromises","lastSearch","loadPromises","openArchived","archivedStatusId","archivedRedult","notFoundUserstories","filteredStatus","waitEmptyQuote","loadKanban","swimlanesStatuses","usCardVisibility","getSwimlanesModes","newSwimlaneId","apiNewSwimlaneId","bulkUpdateKanbanOrder","KanbanDirective","_tableBody","watchKanbanSize","kanbanStyles","getComputedStyle","columnMargin","getPropertyValue","resizeObserver","ResizeObserver","entries","column","offsetWidth","unobserve","setProperty","observe","board","initBoard","visibleEntries","entry","$evalAsync","taskColumnLoaded","addSwimlane","cardLoaded","addCard","isTableLoaded","kanbanTableLoaded","tableHeaderDom","openSwimlane","tableBody","scroll","KanbanArchivedShowStatusHeaderDirective","tgKanbanArchivedShowStatusHeader","KanbanArchivedStatusIntroDirective","tgKanbanArchivedStatusIntro","userStoriesLoaded","KanbanSquishColumnDirective","folds","unfold","archivedFolds","KanbanWipLimitDirective","tgKanbanWipLimit","redrawWipLimit","cards","wipLimitClass","wip_limit","CardAssignedToDirective","svgTemplate","vm","avatars","checkPermission","svgData","initializeZoom","onChange","ctrlKey","metaKey","onClickAssignedTo","CardDataDirective","dueDateService","emptyTask","dueDateColor","dueDate","isClosed","dueDateTitle","totalAttachments","CardActionsDirective","openPopup","actions","getModifyPermisionKey","onClickEdit","getDeletePermisionKey","onClickDelete","isFirst","onClickMoveToTop","KanbanSwimlaneDirective","currentSwimlane","mouseleaveSwimlane","mouseoverSwimlane","querySelectorAll","KanbanTaskboardColumnDirective","KanbanSortableDirective","dropTarget","finalUsList","newStatus","newSwimlane","oldSwimlaneId","oldStatus","tableLoaded","EpicDetailController","attachmentsFullService","epicRef","epicref","attachmentsReady","initializeOnDeleteGoToUrl","epicStatus","statusById","epicDescription","description_html","loadAttachments","loadEpic","immutableProject","immutableEpic","commentModel","neighbors","previousUrl","listInEpic","onUpvote","upvote","onDownvote","downvote","onWatch","onUnwatch","onSelectColor","onSelectColorSuccess","onSelectColorError","EpicStatusDisplayDirective","EpicStatusButtonDirective","IssueDetailController","issueRef","issueref","issueSubject","issueStatus","issueType","issueSeverity","issuePriority","ref3","issueDescription","loadIssue","milestoneId","IssueStatusDisplayDirective","IssueStatusButtonDirective","IssueTypeButtonDirective","typees","IssueSeverityButtonDirective","severityes","IssuePriorityButtonDirective","priorityes","AssignSprintToIssueButtonDirective","existsMilestone","avaliableMilestones","selectedSprint","needle","haystack","toUpperCase","filterMilestones","saveIssueToSprint","CreateBulkIssuesDirective","IssuesController","voting","isOrderedBy","myFiltersHashSuffix","storeIssuesShowTags","fieldName","orderBy","types","issueStatusList","issueTypes","loadIssuesRequests","models","paginatedBy","getIssuesShowTags","addIssuesInBulk","IssuesPaginationDirective","linkPagination","$pagEl","getNumPages","numPages","renderPagination","cpage","pages","showPrevious","showNext","pagenum","IssuesOrderingDirective","linkOrdering","colHeadElement","currentOrder","finalOrder","IssueStatusInlineEditionDirective","updateIssueStatus","issueStatusDomParent","issueStatusDom","tgIssueStatusInlineEdition","_isModified","IssueAssignedToInlineEditionDirective","updateIssue","tgIssueAssignedToInlineEdition","UserStoryDetailController","configService","tgmodel","sce","usRef","usref","tribeEnabled","tribeHost","closedTasks","progressPercentage","userStoryRef","userStorySubject","descriptionHtml","getTrustedHtml","userStoryStatus","userStoryPoints","userStoryDescription","userStoryClosedTasks","userStoryTotalTasks","userStoryProgressPercentage","relateToEpic","allClosed","loadUs","kanbanHttpParams","locationSearch","backlogHttpParams","legacyChannel","onTribeInfo","publishTitle","alt","publishDesc","withoutMoved","orderList","us_order","fromPairs","reorder","UsStatusDisplayDirective","UsStatusButtonDirective","UsTeamRequirementButtonDirective","canEdit","isRequired","UsClientRequirementButtonDirective","TaskDetailController","taskRef","taskref","taskSubject","taskStatus","taskDescription","loadTask","loadUserStory","TaskStatusDisplayDirective","TaskStatusButtonDirective","TaskIsIocaineButtonDirective","isIocaine","TeamController","setRole","filtersRole","loadMembers","totals","currentUser","issuesEnabled","tasksEnabled","wikiEnabled","loadMemberStats","memberStats","vals","statsKey","sum","_processStats","_processStat","stat","singleStat","userRoles","TeamFiltersDirective","TeamMemberStatsDirective","TeamMemberCurrentUserDirective","TeamMembersDirective","filtersQ","LeaveProjectDirective","leaveConfirm","leave_project_text","confirm_leave_project_text","leave","isCurrentUser","membersFilter","WikiDetailController","attachmentsFullService1","moveLink","loadWiki","wikiSlug","linksVisible","wikiPageName","wikiPageContent","totalEditions","editions","lastModifiedDate","modified_date","wikiId","getBySlug","loadWikiLinks","listLinks","wikiLinks","checkLinksPerms","saveAll","WikiSummaryDirective","last_modifier","wikiPage","WikiWysiwyg","activityService","editableDescription","saveDescription","fetchEntries","uploadFiles","default","storageKey","WikiNavDirective","linkWikiLinks","addWikiLinkPermission","tdom","deleteWikiLinkPermission","direction","mirrorContainer","linkId","newLink","loadPromise","WikiPagesListController","loadWikiPages","TransferProjectStartSuccessDirective","ChangeOwnerLightboxController","lightboxService1","commentOpen","LightboxAddMembersWarningMessageDirective","LbRequestOwnershipDirective","confirmService","transferRequest","filterUsers","getUsers","currentOwnerId","totalUsers","userSearch","selectUser","transferStart","ChangeOwnerLightboxDirective","lightboxKeyboardNavigationService","bindToController","MembershipsController","lightboxFactory1","i_am_admin","canAddUsers","max_memberships","total_memberships","httpFilters","getUrlFilters","membership","is_user_active","is_owner","projectOwnerEmail","user_email","addNewMembers","showLimitUsersWarningMessage","MembershipsDirective","MembershipsRowAvatarDirective","pending","isOwner","tgMembershipsRowAvatar","MembershipsRowAdminCheckboxDirective","tgMembershipsRowAdminCheckbox","inputId","is_admin","MembershipsRowRoleSelectorDirective","roleList","selectedRole","tgMembershipsRowRoleSelector","newRole","MembershipsRowActionsDirective","tgMembershipsRowActions","resendInvitation","defaultMsg","NoMoreMembershipsExplanationDirective","ownerEmail","AdminNavigationDirective","tgAdminNavigation","ProjectProfileDirective","ProjectProfileController","tgAuth","CsvExporterController","_deleteUuid","_generateUuid","setCsvUuid","csvUrl","resolveAbsolute","CsvExporterEpicsController","CsvExporterUserstoriesController","CsvExporterTasksController","CsvExporterIssuesController","epicStatusList","issueTypesList","prioritiesList","severitiesList","canCreatePrivateProjects","valid","openDeleteLightbox","privacyChanged","isAttributeModified","newUrl","is_private","ProjectDefaultValuesDirective","ProjectModulesDirective","initializeFields","newVal","oldVal","videoconferences_extra_data","videoconferences","isVideoconferenceActivated","ProjectExportDirective","buttonsEl","showButtons","hideButtons","resultEl","showResult","hideResult","spinnerEl","showSpinner","hideSpinner","resultTitleEl","loading_title","loading_msg","dump_ready_text","asyn_message","syn_message","setLoadingTitle","setAsyncTitle","setSyncTitle","resultMessageEl","setLoadingMessage","setAsyncMessage","setSyncMessage","showLoadingMode","showExportResultAsyncMode","showExportResultSyncMode","showErrorMode","dumpUrl","errorMsg","csvUuid","regenerateUuid","deleteUuid","CsvEpicDirective","sectionTitle","CsvUsDirective","CsvTaskDirective","CsvIssueDirective","ProjectLogoDirective","showSizeInfo","click","logoAttachment","changeLogo","removeLogo","ProjectLogoModelDirective","modelSetter","tgProjectLogoModel","files","AdminProjectRestrictionsDirective","AdminProjectRequestOwnershipDirective","requestOwnership","canRequest","AdminProjectChangeOwnerDirective","changeOwner","project-id","active-users","current-owner-id","ProjectValuesDirective","TYPE_CHOICES","ProjectValuesSectionController","ProjectValuesController","moveValue","loadValues","resource","ProjectSwimlanesValuesController","removeSwimlane","filterArchivedSwimlaneStatus","filterArchivedProjectStatuses","updatedSwimlanePosition","setDefaultSwimlane","updateSwimlane","ProjectDueDatesValuesController","displayValues","createDefaultValues","ProjectCustomAttributesController","moveCustomAttributes","deleteCustomAttribute","saveCustomAttribute","createCustomAttribute","loadCustomAttributes","_onCustomAttributesModified","ProjectTagsController","mixingClass","cancelMixingTags","confirmMixingTags","toggleMixingFromTags","startMixingTags","editTag","createTag","filterAndSortTags","loadTags","listValues","maxValueOrder","maxBy","itemValue","swimlaneAdded","hideSwimlaneForm","patch_default_swimlane","prevSwimlane","swimlanesOrderArrayFiltered","newSwimlanesOrder","bulkUpdateOrder","moveTo","ProjectSwimlanesValue","isFormVisible","isNewSwimlane","displaySwimlaneForm","ProjectSwimlanesSingle","$animate","displaySwimlaneSingleForm","swimlaneSingleForm","getDefaultTitle","removeSwimlaneTitle","editSwimlaneSingleForm","cancelEditSwimlaneSingleForm","removeSwimlaneDialog","phase","deletingSwimlane","SortableSwimlanes","days_to_due_abs","days_to_due","sign","linkDragAndDrop","linkValue","goToBottomList","saveNewValue","saveValue","valueType","objname","initializeNewValue","initializeTextTranslations","addNewElementText","table","formEl","row","editionRow","onSucces","ProjectDueDatesValues","parentDirective","linkDueDateStatusValue","_setDaysToDue","_valueFromEventTarget","due_date_status_name","_parseAttributesExtra","_parseAttributeExtra","maxOrder","attrValues","attrModel","idx","ProjectCustomAttributesDirective","_manageExtraFormEvent","_manageFormEvent","addExtraOption","cancelCreate","cancelUpdate","hideAddButton","hideCancelButton","hideCreateForm","hideEditForm","hideExtra","initAttrType","initDraggable","removeExtraOption","resetNewAttr","revertChangesInCustomAttribute","showAddButton","showCancelButton","showCreateForm","showEditForm","showExtra","isExtraVisible","sortableChildren","sortableEl","handle","itemAttr","attrExtra","sourceIndex","$index","targetIndex","newAttr","toggleExtraVisible","formExtraEl","formScope","projectTagsAll","tagsFilter","from_tag","to_tag","loadingDelete","mixingTags","toTag","fromTags","loadingMixing","mixTags","ProjectTagsDirective","initializeTagsFilter","initializeMixingTags","originalTag","loadingEdit","loadingCreate","ProjectSwimlanesWipDirective","wipClosed","toggleWipVisibility","publicPermissions","RolesController","_disableComputable","_enableComputable","anyComputableRole","computable","loadRoles","public_permission","external_user","public_permissions","forceLoadProject","askOnSuccess","askOnError","toggleComputable","EditRoleDirective","toggleView","toggle","RolesDirective","NewRoleDirective","DEFAULT_PERMISSIONS","insertPosition","RolePermissionsDirective","resumeTemplate","categoryTemplate","baseTemplate","generateCategoriesFromRole","setActivePermissions","active","isPermissionEditable","setActivePermissionsPerCategory","cat","activePermissions","categories","epicPermissions","milestonePermissions","userStoryPermissions","taskPermissions","issuePermissions","wikiPermissions","renderResume","renderCategory","renderPermissions","getActivePermissions","categoryId","anon_permissions","WebhooksController","loadWebhooks","GithubController","GitlabController","loadModules","BitbucketController","GogsController","WebhookDirective","webhook","tgWebhook","updateLogs","validStatus","prettySentHeaders","toPairs","request_headers","prettySentData","request_data","created","logs_counter","logs","updateShowHideHistoryText","textElement","showVisualizationMode","showEditMode","openHistory","resend","NewWebhookDirective","formDOMNode","addWebhookDOMNode","github","gitlab","bitbucket","SelectInputText","execCommand","GithubWebhooksDirective","saveAttribute","GitlabWebhooksDirective","BitbucketWebhooksDirective","ValidOriginIpsDirective","$ngModel","gogs","GogsWebhooksDirective","DeleteProjectDirective","projectToDelete","BindOnceBindDirective","tgBoBind","BindOnceHtmlDirective","tgBoHtml","BindOnceRefDirective","tgBoRef","BindOnceSrcDirective","tgBoSrc","BindOnceHrefDirective","tgBoHref","BindOnceAltDirective","tgBoAlt","BindOnceTitleDirective","tgBoTitle","BindTitleDirective","tgTitleHtml","BindHtmlDirective","tgBindHtml","ConfigurationService","ContribController","currentPlugin","head","ContribUserSettingsController","FiltersStorageService","HttpService","cacheFactory","cache","removeAll","responseType","LoadElementDirective","tgLoadElement","legacyObj","component","locationFactory","lastRoute","Model","dataTypes","_dataTypes","setAttrs","ModelService","instance","applyCasts","attrName","castName","castMethod","casts","getIdAttrName","self","getter","setter","enumerable","configurable","markSaved","desSerialize","sdata","ddata","$gmUrls","$gmStorage","cls","int","float","NavigationUrlsService","formatUrl","replacer","NavigationUrlsDirective","tgSections","bindOnceP","parseNav","param","tgNavGetParams","tgNav","fullUrl","getURLParams","getURLParamsStr","RepositoryService","resolveUrlForModel","idAttrName","resolveUrlForAttributeModel","extraParams","_data","_status","returnHeaders","queryMany","httpOptions","enablePagination","queryOneAttribute","queryOneRaw","queryPaginated","queryOnePaginatedRaw","StorageService","_default","serializedValue","setItem","removeItem","UrlsService","mainUrl","fmt","trimEnd","resourceProvider","_get","userstory","_list","hashSuffix","contentType","entryType","editComment","activityId","commentData","getCommentHistory","deleteComment","undeleteComment","history","hashSprintShowTags","hashIssuesShowTags","project_id","milestone_id","bulk_issues","promoteToUserStory","hashSuffixStatusColumnModes","hashSuffixSwimlanesModes","mdrender","listByUser","bulkCreateMemberships","invitation_extra_text","bulk_memberships","notifyPolicies","listByMember","memberId","bulkData","regenerate_epics_csv_uuid","regenerate_userstories_csv_uuid","regenerate_tasks_csv_uuid","regenerate_issues_csv_uuid","delete_epics_csv_uuid","delete_userstories_csv_uuid","delete_tasks_csv_uuid","delete_issues_csv_uuid","from_tags","export","import","statusUpdater","complete","uploadComplete","uploadFailed","uploadProgress","maxFileSize","fileName","fileSize","evt","loaded","uploadedSize","totalSize","responseText","getResponseHeader","isPrivate","failed","FormData","XMLHttpRequest","setRequestHeader","transformRequest","do","deferredAbort","get_all","noop","u","moveUserStoriesMilestone","currentMilestoneId","bulk_stories","moveTasksMilestone","bulk_tasks","moveIssuesMilestone","swimlanesOrder","bulk_swimlanes","wipLimitUpdate","delete","hashSuffixUsRowModes","bulkUpdateTaskTaskboardOrder","userProjectSettings","changeAvatar","removeAvatar","changePassword","currentPassword","newPassword","current_password","userSettings","contacts","hashShowTags","page_size","status_id","bulk_userstories","after_userstory_id","before_userstory_id","editStatus","webhookId","webhooklogId","UserChangePasswordController","UserChangePasswordDirective","newPassword1","newPassword2","DeleteUserDirective","UserLiveNotificationsController","UserLiveNotificationsDirective","UserLiveNotificationsListDirective","policyIndex","policy","prev_level","live_notify_level","UserSettingsController","window1","getLan","getTheme","maxFileSizeMsg","availableThemes","verifyEmail","UserProfileDirective","UserAvatarDirective","avatarAttachment","TaigaAvatarModelDirective","tgAvatarModel","UserSettingsNavigationDirective","tgUserSettingsNavigation","UserNotificationsController","resources","isSaas","onPremiseSubscribed","loadPremise","subscribed","onPremise","subscribeOnPremiseNewsletter","origin_form","getUserStorage","storageState","setUserStorage","storageError","createUserStorage","UserNotificationsDirective","UserNotificationsListDirective","notify_level","UserProjectSettingsController","sections","updateCustomHomePage","projectSettings","filteredSections","allowed_sections","UserWebNotificationsController","UserWebNotificationsDirective","UserWebNotificationsListDirective","web_notify_level","AnimatedCounter","lastCount","renderData","transitionEnd","nextUp","renderCount","nextDown","counter","getCounter","wip","disabled","AssignedToInlineDirective","$currentUserService","$userListService","requiredPerm","renderUserList","selectedId","searchUsers","visibleUsers","showMore","renderUser","assignedObject","assigned_to_extra_info","fullName","isUnassigned","fullNameVisible","usersSearch","selfAssign","unassign","searchingText","AssignedUsersInlineDirective","currentAssignedIds","currentAssignedTo","isAssigned","renderUsersList","renderUsers","hiddenUsers","applyToModel","AttachmentLinkDirective","attachmentsPreviewService","tgAttachmentLink","fileId","AttachmentGalleryDirective","onDelete","AttachmentController","is_deprecated","editMode","mergeIn","AttachmentDirective","AttachmentsDropDirective","eventAttr","tgAttachmentsDrop","dataTransfer","originalEvent","AttachmentsFullController","deprecatedsCount","attachmentsVisible","deprecatedsVisible","uploadingAttachments","objId","toggleDeprecatedsVisible","addAttachments","toDeleteAttachment","errorMessage","reorderAttachment","updateAttachment","toUpdateAttachment","_isEditable","hasPermission","editPermission","showAttachments","AttachmentsFullDirective","displayAttachmentInput","AttachmentsFullService","_attachments","_deprecatedsCount","_attachmentsVisible","_deprecatedsVisible","regenerate","uploading","from_comment","setIn","afterAttachmentId","oldAttachment","setAttachments","AttachmentsPreviewController","getCurrent","hasPagination","getIndex","attachmentIndex","findLast","AttachmentPreviewLightboxDirective","AttachmentsPreviewService","AttachmentsSimpleController","onAdd","AttachmentsSimpleDirective","AttachmentSortableDirective","tgAttachmentsSortable","AutoSelectDirective","AvatarDirective","attributeName","tgAvatarBig","avatarBig","BelongToEpicsDirective","$rs2","updateEpics","userStory","removeEpicRelationship","deleteRelatedUserstory","epicsLength","immutable_epics","isIterable","BindCode","$sce","tElement","tAttrs","tgBindWysiwygHtmlGetter","tgBindWysiwygHtml","tgBindWysiwygHtmlWatch","$$addBindingClass","_extraValidHtmlElments","_extraValidAttrs","matchResult","blockClasses","hljs","getLanguage","highlightBlock","node","getAttribute","scrollIntoView","$$addBindingInfo","refreshAttachmentURL","BoardZoomDirective","levels","CardSlideshowController","cardSlideshowDirective","CardController","hasTasks","getTagColor","hasMultipleAssignedUsers","hasVisibleAttachments","onToggleFold","getClosedTasks","closedTasksPercent","_setVisibility","related","slides","isRelatedTasksVisible","isSlideshowVisible","getNavKey","cardDirective","onClickRemove","inViewPort","folded","ClickInputFile","inputFile","ColorSelectorController","colorList","checkIsColorRequired","displayColorList","userCanChangeColor","isColorRequired","dropRight","setColor","customColor","resetColor","initColor","toggleColorList","onSelectDropdownColor","onKeyDown","ColorSelectorDirective","_timeout","mouseenter","mouseleave","DetailHeaderController","loadingSubject","originalSubject","_checkPermissions","cancelEdit","editSubject","saveSubject","onEditSubjectSuccess","onEditSubjectError","DetailHeaderDirective","$tgWysiwygService","blocked_html_note","html_note","DetailNavController","_checkNav","project_extra_info","DetailNavDirective","DueDateController","tgLightboxFactory","_getScope","setDueDate","dueDatePopoverDirective","bound","getMoment","dueDateDirective","renderDatePicker","DueDateService","defaultConfig","by_default","_formatTitle","_getAppearance","_getDefaultAppearance","defaultAppearance","currentAppearance","appearance","formatedDate","FileChangeDirective","tgFileChange","FilterRemoteStorageService","myFilters","innerPromise","FilterSlideDownDirective","ngIf","contentHeight","outerHeight","context","nextSibling","FilterController","opened","filterModeOptions","filterModeLabels","include","exclude","filterMode","customFilterForm","customFilterName","$onChanges","changes","getIncludedFilters","getExcludedFilters","includedFilters","excludedFilters","activeCustomFilter","repeatedFilterError","lengthZeroError","toggleFilterCategory","filterName","isOpen","openCustomFilter","onSaveCustomFilter","onRemoveFilter","filterCategory","onAddFilter","onRemoveCustomFilter","onSelectCustomFilter","isFilterSelected","FilterDirective","onChangeQ","watchTaskboardHeight","taskboard","maxSize","currentMax","offsetHeight","InputSearchComponent","bindings","change","dirty","IssuesTableController","onEditIssue","onToggleTags","detach","onDetachIssue","onDeleteIssue","issuesTableDirective","onLoadIssues","onAddIssuesInBulk","onAddNewIssue","sprintIssues","issueOptions","displayOptions","hideOptions","JoyRideDirective","joyRideService","initJoyrRide","unsuscribe","intro","introJs","oncomplete","onexit","disableJoyRide","setOptions","exitOnEsc","exitOnOverlayClick","showStepNumbers","nextLabel","prevLabel","skipLabel","doneLabel","disableInteraction","setOption","loadJoyRideConfig","exit","JoyRideService","checkPermissionsService","getConfig","dashboard","steps","backlog","check","joyRide","KanbanBoardZoomDirective","onZoomChange","getZoomView","zooms","zoomIndex","SelectUserDirective","closeLightbox","confirmSelection","getFilteredUsers","available","_filterRows","userIds","roleUsers","userNames","addItem","clearSearch","LiveAnnouncementDirective","defineProperties","LiveAnnouncementService","MoveToSprintLightboxController","someSelected","selectedSprintId","typesSelected","itemsToMove","_loadSprints","openItems","_init","hasManyItemTypes","ussCount","updateSelected","tasksCount","issuesCount","itemType","itemsNotMoved","itemsList","itemsType","moveItems","displayWarning","totalItemsMoved","moveToSprintLightboxDirective","MoveToSprintController","hasOpenItems","getOpenUss","getOpenStorylessTasks","getOpenIssues","checkOpenItems","open-items","unnasignedTasks","issue_id","moveToSprintDirective","ProjectLogoBigSrcDirective","projectLogoService","projectLogo","logo","getDefaultProjectLogo","ProjectLogoSmallSrcDirective","ProjectMenuController","menu","_getActiveSection","projectMenu","_setVideoConference","_setMenuPermissions","videoconferenceUrl","_videoConferenceUrl","oldSectionName","sectionsBreadcrumb","indexBacklog","indexKanban","baseUrl","ProjectMenuDirective","fixed","projectChange","PromoteToUsButtonDirective","searchListDirective","avaliableItems","isContainedIn","itemsById","parseString","resetAll","resetSelected","currentSelected","filterClosed","showClosed","textShowClosed","textHideClosed","choiceId","items","toggleShowClosed","filterItems","filtering","itemAttrs","filterBy","placeholder","itemDisabled","SwimlaneSelector","getCurrentSwimlane","getSelectedSwimlane","displaySelector","selectedSwimlane","filteredSwimlanes","defaultSwimlaneId","selectSwimlane","hasUnclassifiedStories","TagOptionDirective","selectedPosition","containerHeight","onSelectTag","colorArray","TagLineCommonController","tagLineService","disableColorSelection","newTag","_createColorsArray","projectTagColors","createColorsArray","displayTagInput","addNewTag","onAddTag","selectColor","TagLineCommonDirective","tagName","loadingAddTag","loadingRemoveTag","onDeleteTag","TagLineController","onDeleteTagError","onDeleteTagSuccess","onAddTagError","onAddTagSuccess","TagLineDirective","TagLineService","myPermissions","projectPermissions","TagDirective","hasPermissions","TaskboardZoomDirective","TasksSortableDirective","tgTasksSortable","TermsOfServiceAndPrivacyPolicyNoticeDirective","privacyPolicyUrl","termsOfServiceUrl","AssignedToDirective","currentUserId","isSelfAssigned","assignedUser","openAssignedUsers","currentItem","AssignedUsersDirective","deleteAssignedUser","visibleAssignedUsersCount","displayHidden","assignedToUser","assignedUserIds","selfAssigned","TicketWatchersController","openWatchers","watchersIds","watchers","getPerms","_watch","_unwatch","deleteWatcher","watcherId","WatchersDirective","visibleWatchersCount","tipsDirective","tips","loadTip","waitingTimeout","tipLoaded","tip","TribeButtonDirective","locationService","port","TribeLinkedDirective","gigTitle","gigId","VoteButtonController","toggleVote","is_voter","VoteButtonDirective","ProjectSwimlanesWipLimitController","new_wip_limit","submitSwimlaneNewStatus","displayWipLimitSelector","swimlane_userstory_status_id","WipLimitSelector","toggleWipSelectorVisibility","CommentEditWysiwyg","CommentWysiwyg","saveComment","onAddComment","CustomFieldEditWysiwyg","ItemWysiwyg","Wysiwyg","$attachmentsFullService","htmlReadMode","editonly","onCancel","onSave","onUploadFile","discardLocalStorage","editorLinks","getCurrentContent","isDraft","isOutdated","linksEvents","localSave","saveEnd","setHtmlEditor","textEditor","throttleChange","unwatchContent","updateMarkdownWithCurrentHtml","isEditOnly","notPersist","parentElement","setEditMode","unwatchLoader","outdated","uploadFunction","fullNameDisplay","detail","refreshAttachmentURLFromMarkdown","saving","store","cancelWithConfirmation","getMarkdown","throttle","WysiwygService","projectDataConversion","dataConversion","angularDataConversion","setUp","toMarkdown","toHtml","getAttachmentData","tokens","getCachedAttachment","cache_key","attachmentId","cached_result","links","warn","DiscoverHomeOrderByController","is_open","week","month","year","currentText","currentOrderBy","DiscoverHomeOrderByDirective","DiscoverSearchBarController","discoverProjectsService","projectsCount","fetchStats","submitFilter","DiscoverSearchBarDirective","DiscoverSearchListHeaderController","like_is_open","activity_is_open","openLike","setOrderBy","openActivity","DiscoverSearchListHeaderDirective","FeaturedProjectsController","featured","fetchFeatured","FeaturedProjectsDirective","HighlightedDirective","highlighted","MostActiveController","mostActive","getOrderBy","fetch","fetchMostActive","MostActiveDirective","MostLikedController","mostLiked","fetchMostLiked","MostLikedDirective","DiscoverHomeController","onSubmit","DiscoverSearchController","routeParams","searchResult","nextSearchPage","loadingGlobal","loadingList","loadingPagination","resetSearchList","fetchByGlobalSearch","fetchByOrderBy","getFilter","fetchSearch","is_looking_for_people","onChangeFilter","updateParams","onChangeOrder","DiscoverSearchDirective","DiscoverProjectsService","_discoverParams","projectsService","_mostLiked","_mostActive","_featured","_searchResult","_projectsCount","decorate","_decorate","_nextSearchPage","discover_mode","_params","getProjects","is_featured","CreateEpicController","epicsService","newEpic","default_epic_status","validateForm","setFormErrors","CreateEpicDirective","EpicRowController","displayUserStories","displayAssignedTo","displayStatusList","loadingStatus","_calculateProgressBar","progress","canEditEpics","toggleUserStoryList","listRelatedUserStories","userStories","epicStories","updateStatus","updateEpicStatus","updateAssignedTo","assignLoader","updateEpicAssignedTo","EpicRowDirective","EpicsDashboardController","setfn","isEpicsDashboardEnabled","fetchEpics","notFound","canCreateEpics","on-create-epic","EpicsSortableDirective","tgEpicsSortable","EpicsTableController","displayVotes","votes","assigned","closed_us","_disablePagination","_loadingEpics","toggleEpicTableOptions","reorderEpic","nextPage","hoverEpicTableOption","timer","hideEpicTableOption","updateViewOptions","EpicsTableDirective","StoryRowController","totalTasksCompleted","story","StoryRowDirective","EpicsService","xhrError","_epics","_page","epicData","epics_order","reorderRelatedUserstory","epicUserstories","userstoryId","replaceEpic","RelatedUserStoriesController","showCreateRelatedUserstoriesLightbox","showRelatedUserStoriesSection","userCanSort","loadRelatedUserstories","RelatedUserstoriesCreateController","projectUserstories","filterUss","saveRelatedUserStory","selectedUserstoryId","onSavedRelatedUserstory","validateExistingUserstoryForm","setExistingUserstoryFormErrors","bulkCreateRelatedUserStories","userstoriesText","onCreatedRelatedUserstory","validateNewUserstoryForm","setNewUserstoryFormErrors","RelatedUserstoriesCreateDirective","newUserstoryForm","existingUserstoryForm","showLightbox","selectedUserstory","searchUserstory","relatedUserstoriesText","onUpdateSearchUserstory","RelatedUserstoriesSortableDirective","tgRelatedUserstoriesSortable","RelatedUserStoriesDirective","RelatedUserstoryRowController","setAvatarData","getAssignedToFullNameDisplay","onDeleteRelatedUserstory","RelatedUserstoryRowDirective","ExternalAppController","externalAppsService","createApplicationToken","_getApplicationToken","_redirect","_applicationId","application","_state","state","_user","_application","loginUrl","loginWithAnotherUserUrl","applicationToken","getApplicationToken","back","authorizeApplicationToken","ExternalAppsService","applicationId","externalapps","FeedbackService","sendFeedback","ActivityService","_contentType","_objectId","loadingEntries","getHistory","historyType","CommentController","permissionService","hiddenDeletedComment","showDeletedComment","hideDeletedComment","checkCancelComment","onEditMode","commentId","canEditDeleteComment","onEditComment","displayCommentHistory","CommentDirective","editing","deleting","onDeleteComment","onRestoreDeletedComment","CommentsController","initializePermissions","canAddCommentPermission","CommentsDirective","comments","reverse","LightboxDisplayHistoricController","_loadHistoric","commentHistoryEntries","LightboxDisplayHistoricDirective","HistoryEntryDirective","HistoryTabsDirective","showCommentTab","showActivityTab","onActiveComments","onActiveActivities","onOrderComments","activeTab","commentsNum","activitiesNum","onReverse","HistorySectionController","viewComments","_loadHistory","_loadComments","_loadActivity","activities","nextActivityPage","showHistorySection","toggleEditMode","onActiveHistoryTab","restoreDeletedComment","addComment","HistorySectionDirective","ActivitiesDiffController","diffTags","diffRemoveTags","diffAddTags","promotedTo","generated_user_stories","HistoryDiffDirective","HistoryDirective","DutyDirective","duty","isHidden","getDutyType","HomeController","HomeService","_attachProjectInfoToWorkInProgress","workInProgress","projectsById","_attachProjectInfoToDuty","_duties","_getValidDutiesAndAttachProjectInfo","assignedTo","watching","duties","dutyType","getWorkInProgress","projectsPromise","getListProjectsByUserId","params_epics","status__is_closed","params_uss","params_tasks","params_issues","assignedEpicsPromise","assignedUserStoriesPromise","assignedTasksPromise","assignedIssuesPromise","watchingEpicsPromise","watchingUserStoriesPromise","watchingTasksPromise","watchingIssuesPromise","HomeProjectListDirective","WorkingOnController","homeService","hiddenAssignedTo","showHiddenAssignedTo","showHiddenWatching","_setAssignedTo","elem","_setWatching","WorkingOnDirective","slot","slots","updateShowHiddenDuties","showHiddenDuties","getShowHiddenDuties","updateHiddenDuties","hiddenDuties","getHiddenDuties","toggleDutyHidden","toggleShowHiddenDuties","InviteMembersFormController","rolesValues","defaultMaxInvites","_areRolesValidated","contactsToInvite","emailsToInvite","_checkLimitMemberships","pendingMembersCount","membersLimit","showWarningMessage","sendInvites","setInvitedContacts","role_id","inviteContactsMessage","InviteMembersFormDirective","onDisplayContactList","onRemoveInvitedContact","onRemoveInvitedEmail","onSendInvites","AddMembersController","userService","displayContactList","_getContacts","excludeProjectId","getContacts","_filterContacts","invited","contact","inviteSuggested","removeContact","testEmptyContacts","inviteEmail","emailData","removeEmail","LightboxAddMembersDirective","SuggestAddMembersController","contactQuery","filterContacts","filteredContacts","setInvited","onInviteSuggested","SuggestAddMembersDirective","onInviteEmail","DropdownNotificationsDirective","notificationsService","notificationsList","newEvent","setAllAsRead","setNotificationsAsRead","DropdownProjectListDirective","newProject","updateLinks","DropdownUserDirective","authService","navUrlsService","isFeedbackEnabled","customSupportUrl","userMenu","NavigationBarDirective","attempts","loadUserPilot","userPilotInterval","isEnabledHeader","userPilotIframe","widget","contentWindow","userPilotTitle","innerText","TAIGA_USER_PILOT_TOKEN","userpilotEnabled","_taigaSendFeedback","NavigationBarService","enabledHeader","NotificationsListDirective","infiniteScrollContainer","infiniteScrollDistance","infiniteScrollDisabled","onlyUnread","NotificationsController","scrollDisabled","initList","loadNotifications","reloadList","getNotificationsList","setAsRead","setNotificationAsRead","$$url","NotificationsService","_notificationTypes","userTimelinePaginationSequenceService","translate_params","title_attr","_getLink","_getUsernameSpan","obj_name","_getNotificationObject","_getDetailObjUrl","getNotifications","_addNotificationAttributes","generate","notificationId","_getType","event_type","_getTitle","projectSectionPath","projectUrl","_translateTitleParams","urlMapping","span","_getParams","notification_type","translation","paramsKeys","ProfileBarController","loadStats","getStats","ProfileBarDirective","ProfileContactsController","loadContacts","ProfileContactsDirective","FavItemDirective","ProfileWatchedController","FavsBaseController","ProfileLikedController","tabName","enableFilterByAll","enableFilterByProjects","enableFilterByEpics","enableFilterByUserStories","enableFilterByTasks","enableFilterByIssues","enableFilterByTextQuery","_getItems","getLiked","ProfileVotedController","getVoted","getWatched","_resetList","_enableLoadingSpinner","_disableLoadingSpinner","_enableScroll","_disableScroll","_checkIfHasMorePages","hasNext","_checkIfHasNoResults","hasNoResults","loadItems","filterByTextQuery","showAll","showProjectsOnly","showEpicsOnly","showUserStoriesOnly","showTasksOnly","showIssuesOnly","ProfileLikedDirective","ProfileVotedDirective","ProfileWatchedDirective","ProfileHints","hintKey","HINTS","hint","linkText","ProfileProjectsController","getProjectsByUserId","attachUserContactsToProjects","ProfileProjectsDirective","ProfileTabDirective","tab","tabIcon","tabActive","tabDisabled","addTab","ProfileTabsController","tabs","toggleTab","ProfileTabsDirective","ProfileController","getUserByUserName","userFullName","userUsername","BlockedProjectExplanationDirective","ContactProjectButtonController","launchContactForm","ContactProjectButtonDirective","layout","ContactProjectLbController","contactProject","sendingFeedback","ContactProjectLbDirective","inject","LikeProjectButtonController","likeButtonService","isMouseOver","showTextWhenMouseIsOver","showTextWhenMouseIsLeave","toggleLike","_unlike","_like","like","unlike","LikeProjectButtonDirective","LikeProjectButtonService","_getProjectIndex","_updateProjects","isFan","projectIndex","totalFans","is_fan","total_fans","setProjects","_updateCurrentProject","setProject","likeProject","unlikeProject","SortProjectsDirective","sortData","sorted_project_ids","bulkUpdateProjectsOrder","WatchProjectButtonController","watchButtonService","showWatchOptions","toggleWatcherOptions","closeWatcherOptions","notifyLevel","WatchProjectButtonDirective","WatchProjectButtonService","isWatcher","totalWatchers","is_watcher","total_watchers","watchProject","unwatchProject","AsanaImportProjectFormController","canCreatePublicProjects","projectForm","platformName","keepExternalReference","project_type","checkUsersLimit","limitMembersPrivateProject","canAddMembersPrivateProject","limitMembersPublicProject","canAddMembersPublicProject","saveForm","onSaveProjectDetails","canCreateProject","isDisabled","AsanaImportProjectFormDirective","onCancelForm","fetchingUsers","AsanaImportController","asanaImportService","importProjectService","projectUsers","startProjectSelector","fetchProjects","onSelectProject","fetchUsers","onCancelMemberSelection","startImport","importProject","importPromise","submitUserSelection","AsanaImportDirective","AsanaImportService","asanaImporter","listProjects","listUsers","userBindings","projectType","getAuthUrl","authUrl","authorize","CreatetProjectFormController","errorList","creation_template","formSubmitLoading","CreateProjectFormDirective","createProjectMembersRestrictionsDirective","createProjectRestrictionsDirective","CreateProjectController","displayScrumDesc","dontAsk","displayOnPremise","displayHelp","displayKanbanDesc","DuplicateProjectController","refreshReferenceProject","getProjectBySlug","referenceProject","invitedMembers","toggleInvitedMember","duplicate","DuplicateProjectDirective","GithubImportProjectFormController","GithubImportProjectFormDirective","GithubImportController","githubImportService","GithubImportDirective","GithubImportService","githubImporter","callbackUri","ImportProjectMembersController","selectImportUserLightbox","warningImportUsers","displayEmailSelector","cancelledUsers","selectedUsers","selectableUsers","userContacts","fetchUser","refreshSelectableUsers","searchUser","searchingUser","beforeSubmitUsers","confirmUser","externalUser","taigaUser","discardSuggestedUser","unselectUser","getSelectedMember","isMemberSelected","userSelected","showSuggestedMatch","getDistinctSelectedTaigaUsers","ids","importMoreUsersDisabled","isImportMoreUsersDisabled","ImportProjectMembersDirective","platform","ImportProjectSelectorController","ImportProjectSelectorDirective","noProjectsMsg","ImportTaigaController","importTaiga","ImportTaigaDirective","LbImportErrorDirective","ImportProjectController","trelloService","jiraService","githubService","asanaService","tgNavUrls","jiraOauthVerifier","trelloOauthToken","from","asanaOauthToken","cancelCurrentImport","oauth_verifier","githubOauthToken","oauth_token","jiraUrl","absUrl","unfoldOptions","unfoldedOptions","isActiveImporter","backToCreate","ImportProjectDirective","onCancelImport","ImportProjectService","importSuccess","importError","restrictionError","getRestrictionError","error_message","errorKey","maxMemberships","membersError","publicError","privateError","InviteMembersController","InviteMembersDirective","onToggleInvitedMember","SingleMemberDirective","JiraImportProjectFormController","importer_type","create_subissues","JiraImportProjectFormDirective","JiraImportController","jiraImportService","JiraImportDirective","JiraImportService","jiraImporter","importerType","NewsletterEmailLightboxDirective","$storageService","openNewsletter","onSelectUser","preference","userEmail","setEmail","SelectImportUserLightboxCtrl","invalid","assignUser","SelectImportUserLightboxDirective","TrelloImportProjectFormController","TrelloImportProjectFormDirective","TrelloImportController","trelloImportService","TrelloImportDirective","TrelloImportService","trelloImporter","verifyCode","WarningUserImportDirective","onConfirm","ProjectsListingController","ProjectRouterController","getProjectHomepage","gotoDefaultProjectHomepage","homepage","ProjectController","activeMembers","registerUrl","ProjectsService","getProjectStats","paginate","transferValidateToken","transferAccept","reason","transferReject","CantOwnProjectExplanationDirective","TransferProject","showAddComment","_refreshUserData","_validateToken","_setProjectData","_checkOwnerData","canBeOwnedByUser","canOwnProject","ownerMessage","maxProjects","currentProjects","validNumberOfMemberships","loadingAccept","loadingReject","hideComment","TransferProjectDirective","Resource","urlsService","urlname","object_id","x-disable-pagination","bulkAttachments","after_attachment_id","bulk_attachments","progressMessage","progressPercent","AsanaResource","GithubResource","JiraResource","TrelloResource","users_bindings","keep_external_reference","jira_url","projectTemplate","requestParams","paginateResponseService","pagination","x-lazy-pagination","slight","getTimeline","only_relevant","services","Resources","serviceName","serviceProperty","serviceFn","getUserByUsername","exclude_project","getProfileTimeline","getUserTimeline","listAllInProject","epicIid","AppMetaService","_set","meta","setTitle","setDescription","setTwitterMetas","origin","setOpenGraphMetas","listener","_listener","metas","AttachmentsService","getMaxFileSize","maxFileSizeFormated","sizeError","saveError","AvatarService","IMAGES","COLORS","logos","getDefault","murmurhash3_32_gc","getUnnamed","avatarParamName","gravatar","root","photo","gravatar_id","CheckPermissionsService","CurrentUserService","storageService","_projects","_projectsById","_joyride","_loadUserInfo","loadProjectsList","totalMembers","membersResult","ErrorHandlingService","errorHandling","showingError","blocked","LightboxFactory","scopeAttrs","PaginateResponse","ProjectLogoService","ProjectService","userActivityService","manageProjectSignal","_project","_section","_sectionsBreadcrumb","_activeMembers","e2e","autoRefresh","watchSignals","signal","fetchRequiredSignals","intervalId","onInactive","onActive","ThemeService","themeName","stylesheetEl","UserActivityService","resetTimer","subscriptionsActive","subscriptionsInactive","isActive","startTimer","idleTimeout","timerId","_fireInactive","_fireActive","_unSubscriptionsActive","_unSubscriptionsInactive","UserListService","excludedUser","UserService","pageNumber","objectType","textQuery","contactsFiltered","contactId","UserTimelineAttachmentDirective","validFileExtensions","extension","templateHtml","UserTimelineItemTitle","_fieldTranslationKey","description_diff","timeline","field_name","new_value","sprint_name","us_name","_getTimelineObj","event_us","related_us_name","epic_name","role_name","keySeq","parent_userstory","timeline_type","getTitle","UserTimelineType","getType","hasIn","UserTimelineItemDirective","UserTimelinePaginationSequence","getContent","minItems","UserTimelineController","userTimelineService","timelineList","getProjectTimeline","loadTimeline","UserTimelineDirective","UserTimelineService","userTimelineItemType","userTimelineItemTitle","_valid_fields","_invalid","value_diff","fieldKey","_isInValidTimeline","_parseEventType","_getTimelineObject","_attachExtraInfoToTimelineEntry","_parseTimeline","newdata","values_diff","moveInBacklog","deleteIn","newItem","_addEntyAttributes","filterNot","IsolateClickDirective","WikiHistoryDiffDirective","WikiHistoryEntryDirective","singleHistoryEntry","historyEntry","WikiHistoryController","initializeHistory","loadHistory","WikiHistoryDirective"],"mappings":"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"}