{"version":3,"file":"../app.js","sources":["app.js"],"sourcesContent":["\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var configure, i18nInit, init, module, modules, pluginsModules, pluginsWithModule, taiga;\n\n  this.taiga = taiga = {};\n\n  taiga.emojis = window.emojis;\n\n  this.taigaContribPlugins = this.taigaContribPlugins || window.taigaContribPlugins || [];\n\n  taiga.generateHash = function(components) {\n    if (components == null) {\n      components = [];\n    }\n    components = _.map(components, function(x) {\n      return JSON.stringify(x);\n    });\n    return hex_sha1(components.join(\":\"));\n  };\n\n  taiga.generateUniqueSessionIdentifier = function() {\n    var date, randomNumber;\n    date = (new Date()).getTime();\n    randomNumber = Math.floor(Math.random() * 0x9000000);\n    return taiga.generateHash([date, randomNumber]);\n  };\n\n  taiga.sessionId = taiga.generateUniqueSessionIdentifier();\n\n  configure = function($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider, $compileProvider, $translateProvider, $translatePartialLoaderProvider, $animateProvider, $logProvider) {\n    var authHttpIntercept, blockingIntercept, decorators, defaultHeaders, loaderIntercept, originalWhen, preferedLangCode, userInfo, versionCheckHttpIntercept;\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);\n    originalWhen = $routeProvider.when;\n    $routeProvider.when = function(path, route) {\n      route.resolve || (route.resolve = {});\n      angular.extend(route.resolve, {\n        languageLoad: [\n          \"$q\", \"$translate\", function($q, $translate) {\n            var deferred;\n            deferred = $q.defer();\n            $translate(\"COMMON.YES\").then(function() {\n              return deferred.resolve();\n            });\n            return deferred.promise;\n          }\n        ],\n        projectLoaded: [\n          \"$q\", \"tgProjectService\", \"$route\", function($q, projectService, $route) {\n            var deferred, ref;\n            deferred = $q.defer();\n            projectService.setSection((ref = $route.current.$$route) != null ? ref.section : void 0);\n            if ($route.current.params.pslug) {\n              projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve);\n            } else {\n              projectService.cleanProject();\n              deferred.resolve();\n            }\n            return deferred.promise;\n          }\n        ]\n      });\n      return originalWhen.call($routeProvider, path, route);\n    };\n    $routeProvider.when(\"/\", {\n      templateUrl: \"home/home.html\",\n      controller: \"Home\",\n      controllerAs: \"vm\",\n      loader: true,\n      title: \"HOME.PAGE_TITLE\",\n      loader: true,\n      description: \"HOME.PAGE_DESCRIPTION\",\n      joyride: \"dashboard\"\n    });\n    $routeProvider.when(\"/discover\", {\n      templateUrl: \"discover/discover-home/discover-home.html\",\n      controller: \"DiscoverHome\",\n      controllerAs: \"vm\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true\n    });\n    $routeProvider.when(\"/discover/search\", {\n      templateUrl: \"discover/discover-search/discover-search.html\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true,\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      reloadOnSearch: false\n    });\n    $routeProvider.when(\"/projects/\", {\n      templateUrl: \"projects/listing/projects-listing.html\",\n      access: {\n        requiresLogin: true\n      },\n      title: \"PROJECTS.PAGE_TITLE\",\n      description: \"PROJECTS.PAGE_DESCRIPTION\",\n      loader: true,\n      controller: \"ProjectsListing\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      templateUrl: \"projects/create/create-project.html\",\n      loader: true,\n      controller: \"CreateProjectCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new/scrum\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/kanban\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/duplicate\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-duplicate-project></tg-duplicate-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/import/:platform?\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-import-project></tg-import-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/\", {\n      template: \"\",\n      loader: true,\n      controller: \"ProjectRouter\"\n    });\n    $routeProvider.when(\"/project/:pslug/timeline\", {\n      templateUrl: \"projects/project/project.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\",\n      section: \"project-timeline\"\n    });\n    $routeProvider.when(\"/project/:pslug/t/:ref\", {\n      loader: true,\n      controller: \"DetailController\",\n      template: \"\"\n    });\n    $routeProvider.when(\"/project/:pslug/search\", {\n      templateUrl: \"search/search.html\",\n      reloadOnSearch: false,\n      section: \"search\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/epics\", {\n      section: \"epics\",\n      templateUrl: \"epics/dashboard/epics-dashboard.html\",\n      loader: true,\n      controller: \"EpicsDashboardCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\", {\n      templateUrl: \"epic/epic-detail.html\",\n      loader: true,\n      section: \"epics\"\n    });\n    $routeProvider.when(\"/project/:pslug/backlog\", {\n      templateUrl: \"backlog/backlog.html\",\n      loader: true,\n      section: \"backlog\",\n      joyride: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/kanban\", {\n      templateUrl: \"kanban/kanban.html\",\n      loader: true,\n      section: \"kanban\",\n      joyride: \"kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\", {\n      templateUrl: \"taskboard/taskboard.html\",\n      loader: true,\n      section: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/us/:usref\", {\n      templateUrl: \"us/us-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/task/:taskref\", {\n      templateUrl: \"task/task-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki\", {\n      redirectTo: function(params) {\n        return \"/project/\" + params.pslug + \"/wiki/home\";\n      }\n    });\n    $routeProvider.when(\"/project/:pslug/wiki-list\", {\n      templateUrl: \"wiki/wiki-list.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\", {\n      templateUrl: \"wiki/wiki.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/team\", {\n      templateUrl: \"team/team.html\",\n      loader: true,\n      section: \"team\"\n    });\n    $routeProvider.when(\"/project/:pslug/issues\", {\n      templateUrl: \"issue/issues.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\", {\n      templateUrl: \"issue/issues-detail.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\", {\n      templateUrl: \"admin/admin-project-profile.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\", {\n      templateUrl: \"admin/admin-project-default-values.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\", {\n      templateUrl: \"admin/admin-project-modules.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\", {\n      templateUrl: \"admin/admin-project-export.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\", {\n      templateUrl: \"admin/admin-project-reports.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\", {\n      templateUrl: \"admin/admin-project-values-status.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\", {\n      templateUrl: \"admin/admin-project-values-points.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\", {\n      templateUrl: \"admin/admin-project-values-priorities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\", {\n      templateUrl: \"admin/admin-project-values-severities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\", {\n      templateUrl: \"admin/admin-project-values-types.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\", {\n      templateUrl: \"admin/admin-project-values-custom-fields.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\", {\n      templateUrl: \"admin/admin-project-values-tags.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\", {\n      templateUrl: \"admin/admin-project-values-due-dates.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/kanban-power-ups\", {\n      templateUrl: \"admin/admin-project-values-kanban-power-ups.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/memberships\", {\n      templateUrl: \"admin/admin-memberships.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/roles\", {\n      templateUrl: \"admin/admin-roles.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\", {\n      templateUrl: \"admin/admin-third-parties-webhooks.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\", {\n      templateUrl: \"admin/admin-third-parties-github.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\", {\n      templateUrl: \"admin/admin-third-parties-gitlab.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\", {\n      templateUrl: \"admin/admin-third-parties-bitbucket.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\", {\n      templateUrl: \"admin/admin-third-parties-gogs.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\", {\n      templateUrl: \"contrib/main.html\"\n    });\n    $routeProvider.when(\"/project/:pslug/transfer/:token\", {\n      templateUrl: \"projects/transfer/transfer-page.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/user-settings/user-profile\", {\n      templateUrl: \"user/user-profile.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-change-password\", {\n      templateUrl: \"user/user-change-password.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-project-settings\", {\n      templateUrl: \"user/user-project-settings.html\"\n    });\n    $routeProvider.when(\"/user-settings/mail-notifications\", {\n      templateUrl: \"user/mail-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/live-notifications\", {\n      templateUrl: \"user/live-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/web-notifications\", {\n      templateUrl: \"user/web-notifications.html\"\n    });\n    $routeProvider.when(\"/change-email/:email_token\", {\n      templateUrl: \"user/change-email.html\"\n    });\n    $routeProvider.when(\"/verify-email/:email_token\", {\n      templateUrl: \"user/verify-email.html\"\n    });\n    $routeProvider.when(\"/cancel-account/:cancel_token\", {\n      templateUrl: \"user/cancel-account.html\"\n    });\n    $routeProvider.when(\"/user-settings/contrib/:plugin\", {\n      templateUrl: \"contrib/user-settings.html\"\n    });\n    $routeProvider.when(\"/profile\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/notifications\", {\n      templateUrl: \"notifications/notifications.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Notifications\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/profile/:slug\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/login\", {\n      templateUrl: \"auth/login.html\",\n      title: \"LOGIN.PAGE_TITLE\",\n      description: \"LOGIN.PAGE_DESCRIPTION\",\n      disableHeader: true,\n      controller: \"LoginPage\"\n    });\n    if (window.taigaConfig.publicRegisterEnabled) {\n      $routeProvider.when(\"/register\", {\n        templateUrl: \"auth/register.html\",\n        title: \"REGISTER.PAGE_TITLE\",\n        description: \"REGISTER.PAGE_DESCRIPTION\",\n        disableHeader: true\n      });\n    }\n    $routeProvider.when(\"/forgot-password\", {\n      templateUrl: \"auth/forgot-password.html\",\n      title: \"FORGOT_PASSWORD.PAGE_TITLE\",\n      description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/change-password/:token\", {\n      templateUrl: \"auth/change-password-from-recovery.html\",\n      title: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      description: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/invitation/:token\", {\n      templateUrl: \"auth/invitation.html\",\n      title: \"INVITATION.PAGE_TITLE\",\n      description: \"INVITATION.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/external-apps\", {\n      templateUrl: \"external-apps/external-app.html\",\n      title: \"EXTERNAL_APP.PAGE_TITLE\",\n      description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\n      controller: \"ExternalApp\",\n      controllerAs: \"vm\",\n      disableHeader: true,\n      mobileViewport: true\n    });\n    $routeProvider.when(\"/blocked-project/:pslug/\", {\n      templateUrl: \"projects/project/blocked-project.html\",\n      loader: true\n    });\n    $routeProvider.when(\"/error\", {\n      templateUrl: \"error/error.html\"\n    });\n    $routeProvider.when(\"/not-found\", {\n      templateUrl: \"error/not-found.html\"\n    });\n    $routeProvider.when(\"/permission-denied\", {\n      templateUrl: \"error/permission-denied.html\"\n    });\n    $routeProvider.otherwise({\n      templateUrl: \"error/not-found.html\"\n    });\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: false\n    });\n    defaultHeaders = {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\",\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.defaults.headers[\"delete\"] = defaultHeaders;\n    $httpProvider.defaults.headers.patch = defaultHeaders;\n    $httpProvider.defaults.headers.post = defaultHeaders;\n    $httpProvider.defaults.headers.put = defaultHeaders;\n    $httpProvider.defaults.headers.get = {\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.useApplyAsync(true);\n    $tgEventsProvider.setSessionId(taiga.sessionId);\n    authHttpIntercept = function($q, $location, $navUrls, $lightboxService, errorHandlingService) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var nextUrl, search;\n        if (response.status === 0 || (response.status === -1 && !response.config.cancelable)) {\n          $lightboxService.closeAll();\n          errorHandlingService.error();\n        } else if (response.status === 401 && $location.url().indexOf('/login') === -1) {\n          nextUrl = $location.url();\n          search = $location.search();\n          if (search.force_next) {\n            $location.url($navUrls.resolve(\"login\")).search(\"force_next\", search.force_next);\n          } else {\n            $location.url($navUrls.resolve(\"login\")).search({\n              \"unauthorized\": true,\n              \"next\": nextUrl\n            });\n          }\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\", \"tgErrorHandlingService\", authHttpIntercept]);\n    $httpProvider.interceptors.push(\"authHttpIntercept\");\n    loaderIntercept = function($q, loaderService) {\n      return {\n        request: function(config) {\n          loaderService.logRequest();\n          return config;\n        },\n        requestError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        responseError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        response: function(response) {\n          loaderService.logResponse();\n          return response;\n        }\n      };\n    };\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept]);\n    $httpProvider.interceptors.push(\"loaderIntercept\");\n    versionCheckHttpIntercept = function($q) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var $injector;\n        if (response.status === 400 && response.data.version) {\n          $injector = angular.element(\"body\").injector();\n          $injector.invoke([\n            \"$tgConfirm\", \"$translate\", (function(_this) {\n              return function($confirm, $translate) {\n                var versionErrorMsg;\n                versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\");\n                return $confirm.notify(\"error\", versionErrorMsg, null, 10000);\n              };\n            })(this)\n          ]);\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept]);\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\");\n    blockingIntercept = function($q, errorHandlingService) {\n      var redirectToBlockedPage, responseError, responseOk;\n      redirectToBlockedPage = function() {\n        return errorHandlingService.block();\n      };\n      responseOk = function(response) {\n        if (response.data.blocked_code) {\n          redirectToBlockedPage();\n        }\n        return response;\n      };\n      responseError = function(response) {\n        if (response.status === 451) {\n          redirectToBlockedPage();\n        }\n        return $q.reject(response);\n      };\n      return {\n        response: responseOk,\n        responseError: responseError\n      };\n    };\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept]);\n    $httpProvider.interceptors.push(\"blockingIntercept\");\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false);\n    if (localStorage.userInfo) {\n      userInfo = JSON.parse(localStorage.userInfo);\n    }\n    preferedLangCode = (userInfo != null ? userInfo.lang : void 0) || window.taigaConfig.defaultLanguage || \"en\";\n    $translatePartialLoaderProvider.addPart('taiga');\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: '/' + window._version + '/locales/{part}/locale-{lang}.json'\n    }).useSanitizeValueStrategy('escapeParameters').addInterpolation('$translateMessageFormatInterpolation').preferredLanguage(preferedLangCode).useMissingTranslationHandlerLog();\n    $translateProvider.fallbackLanguage(\"en\");\n    decorators = window.getDecorators();\n    _.each(decorators, function(decorator) {\n      return $provide.decorator(decorator.provider, decorator.decorator);\n    });\n    $logProvider.debugEnabled(window.taigaConfig.debug);\n    if (window.taigaConfig.debug) {\n      return console.info(\"Debug mode is enable\");\n    }\n  };\n\n  i18nInit = function(lang, $translate) {\n    var messages;\n    moment.locale(lang);\n    document.querySelector('html').setAttribute('lang', lang);\n    if (lang !== 'en') {\n      ljs.load((\"/\" + window._version + \"/locales/moment-locales/\") + lang + \".js\");\n    }\n    messages = {\n      defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\"),\n      type: {\n        email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\"),\n        url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\"),\n        urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\"),\n        number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\"),\n        digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\"),\n        dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\"),\n        alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\"),\n        phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\n      },\n      notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\"),\n      notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\"),\n      required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\"),\n      regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\"),\n      min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\"),\n      max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\"),\n      range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\"),\n      minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\"),\n      maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\"),\n      rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\"),\n      mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\"),\n      maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\"),\n      rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\"),\n      equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\"),\n      linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\"),\n      pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\")\n    };\n    return checksley.updateMessages('default', messages);\n  };\n\n  init = function($log, $rootscope, $auth, $events, $analytics, $tagManager, $userPilot, $translate, $location, $navUrls, appMetaService, loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig, projectService) {\n    var lang, un, user, validators;\n    $log.debug(\"Initialize application\");\n    $rootscope.$on('$translatePartialLoaderStructureChanged', function() {\n      return $translate.refresh();\n    });\n    validators = {\n      linewidth: function(val, width) {\n        var lines, valid;\n        lines = taiga.nl2br(val).split(\"<br />\");\n        valid = _.every(lines, function(line) {\n          return line.length < width;\n        });\n        return valid;\n      },\n      pikaday: function(val) {\n        var prettyDate;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        return moment(val, prettyDate).isValid();\n      },\n      url: function(val) {\n        var re_weburl;\n        re_weburl = new RegExp(\"^\" + \"(?:(?:https?|ftp)://)\" + \"(?:\\\\S+(?::\\\\S*)?@)?\" + \"(?:\" + \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" + \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" + \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" + \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" + \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" + \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" + \"|\" + \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" + \"\\\\.?\" + \")\" + \"(?::\\\\d{2,5})?\" + \"(?:[/?#]\\\\S*)?\" + \"$\", \"i\");\n        return re_weburl.test(val);\n      }\n    };\n    checksley.updateValidators(validators);\n    $rootscope.contribPlugins = this.taigaContribPlugins;\n    $rootscope.adminPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"admin\"\n    });\n    $rootscope.authPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"auth\"\n    });\n    $rootscope.userSettingsPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"userSettings\"\n    });\n    lang = null;\n    $rootscope.$on(\"$translateChangeEnd\", function(e, ctx) {\n      var legacy, rtlLanguages;\n      if (lang !== ctx.language) {\n        lang = ctx.language;\n        i18nInit(lang, $translate);\n        rtlLanguages = $tgConfig.get(\"rtlLanguages\", []);\n        $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1;\n        legacy = document.querySelector('tg-legacy');\n        return legacy.translations = {\n          translationTable: $translate.getTranslationTable(lang),\n          lan: lang\n        };\n      }\n    });\n    $events.setupConnection();\n    if ($auth.isAuthenticated()) {\n      user = $auth.getUser();\n    }\n    $analytics.initialize();\n    $tagManager.initialize();\n    $userPilot.initialize();\n    $userPilot.identify();\n    $rootscope.$on('$locationChangeStart', function(event) {\n      errorHandlingService.init();\n      if (lightboxService.getLightboxOpen().length) {\n        event.preventDefault();\n        return lightboxService.closeAll();\n      }\n    });\n    un = $rootscope.$on('$routeChangeStart', function(event, next) {\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      return un();\n    });\n    return $rootscope.$on('$routeChangeSuccess', function(event, next) {\n      var description, ref, title;\n      if ((ref = projectService.project) != null ? ref.get('blocked_code') : void 0) {\n        errorHandlingService.block();\n      }\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      if (next.access && next.access.requiresLogin) {\n        if (!$auth.isAuthenticated()) {\n          $location.path($navUrls.resolve(\"login\"));\n        }\n      }\n      if (next.title || next.description) {\n        title = $translate.instant(next.title || \"\");\n        description = $translate.instant(next.description || \"\");\n        appMetaService.setAll(title, description);\n      }\n      if (next.mobileViewport) {\n        appMetaService.addMobileViewport();\n      } else {\n        appMetaService.removeMobileViewport();\n      }\n      if (next.disableHeader) {\n        return navigationBarService.disableHeader();\n      } else {\n        return navigationBarService.enableHeader();\n      }\n    });\n  };\n\n  angular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500);\n\n  pluginsWithModule = _.filter(this.taigaContribPlugins, function(plugin) {\n    return plugin.module;\n  });\n\n  pluginsModules = _.map(pluginsWithModule, function(plugin) {\n    return plugin.module;\n  });\n\n  modules = [\"taigaBase\", \"taigaCommon\", \"taigaResources\", \"taigaResources2\", \"taigaAuth\", \"taigaEvents\", \"taigaHome\", \"taigaNavigationBar\", \"taigaProjects\", \"taigaRelatedTasks\", \"taigaBacklog\", \"taigaTaskboard\", \"taigaKanban\", \"taigaIssues\", \"taigaUserStories\", \"taigaTasks\", \"taigaTeam\", \"taigaWiki\", \"taigaSearch\", \"taigaAdmin\", \"taigaProject\", \"taigaUserSettings\", \"taigaFeedback\", \"taigaPlugins\", \"taigaIntegrations\", \"taigaComponents\", \"taigaProfile\", \"taigaHome\", \"taigaUserTimeline\", \"taigaExternalApps\", \"taigaDiscover\", \"taigaHistory\", \"taigaNotifications\", \"taigaWikiHistory\", \"taigaEpics\", \"taigaUtils\", \"templates\", \"ngSanitize\", \"ngRoute\", \"ngAnimate\", \"ngAria\", \"pascalprecht.translate\", \"infinite-scroll\", \"tgRepeat\"].concat(pluginsModules);\n\n  module = angular.module(\"taiga\", modules);\n\n  module.config([\"$routeProvider\", \"$locationProvider\", \"$httpProvider\", \"$provide\", \"$tgEventsProvider\", \"$compileProvider\", \"$translateProvider\", \"$translatePartialLoaderProvider\", \"$animateProvider\", \"$logProvider\", configure]);\n\n  module.run([\"$log\", \"$rootScope\", \"$tgAuth\", \"$tgEvents\", \"$tgAnalytics\", \"$tgTagManager\", \"$tgUserPilot\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"tgLoader\", \"tgNavigationBarService\", \"tgErrorHandlingService\", \"lightboxService\", \"$tgConfig\", \"tgProjectService\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaBase, TaigaController, TaigaService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  TaigaBase = (function() {\n    function TaigaBase() {}\n\n    return TaigaBase;\n\n  })();\n\n  TaigaService = (function(superClass) {\n    extend(TaigaService, superClass);\n\n    function TaigaService() {\n      return TaigaService.__super__.constructor.apply(this, arguments);\n    }\n\n    return TaigaService;\n\n  })(TaigaBase);\n\n  TaigaController = (function(superClass) {\n    extend(TaigaController, superClass);\n\n    function TaigaController() {\n      this.onInitialDataError = bind(this.onInitialDataError, this);\n      return TaigaController.__super__.constructor.apply(this, arguments);\n    }\n\n    TaigaController.prototype.onInitialDataError = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.errorHandlingService.notfound();\n        } else if (xhr.status === 403) {\n          this.errorHandlingService.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return TaigaController;\n\n  })(TaigaBase);\n\n  this.taiga.Base = TaigaBase;\n\n  this.taiga.Service = TaigaService;\n\n  this.taiga.Controller = TaigaController;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DEFAULT_COLOR_LIST, addClass, bindMethods, bindOnce, cancelTimeout, debounce, debounceLeading, defineImmutableProperty, findScope, getDefaulColorList, getMatches, getRandomDefaultColor, groupBy, isEmail, isImage, isPdf, joinStr, mixOf, nl2br, normalizeString, patch, randomInt, replaceTags, scopeDefer, sizeFormat, slugify, startswith, stripTags, taiga, timeout, toString, toggleText, trim, truncate, unslugify,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  addClass = function(el, className) {\n    if (el.classList) {\n      return el.classList.add(className);\n    } else {\n      return el.className += ' ' + className;\n    }\n  };\n\n  nl2br = (function(_this) {\n    return function(str) {\n      var breakTag;\n      breakTag = '<br />';\n      return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n    };\n  })(this);\n\n  bindMethods = (function(_this) {\n    return function(object) {\n      var dependencies, methods;\n      dependencies = _.keys(object);\n      methods = [];\n      _.forIn(object, function(value, key) {\n        if (indexOf.call(dependencies, key) < 0 && _.isFunction(value)) {\n          return methods.push(key);\n        }\n      });\n      return _.bindAll(object, methods);\n    };\n  })(this);\n\n  bindOnce = (function(_this) {\n    return function(scope, attr, continuation) {\n      var delBind, val;\n      val = scope.$eval(attr);\n      if (val !== void 0) {\n        return continuation(val);\n      }\n      delBind = null;\n      return delBind = scope.$watch(attr, function(val) {\n        if (val === void 0) {\n          return;\n        }\n        continuation(val);\n        if (delBind) {\n          return delBind();\n        }\n      });\n    };\n  })(this);\n\n  mixOf = function() {\n    var Mixed, base, i, method, mixin, mixins, name, ref;\n    base = arguments[0], mixins = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    Mixed = (function(superClass) {\n      extend(Mixed, superClass);\n\n      function Mixed() {\n        return Mixed.__super__.constructor.apply(this, arguments);\n      }\n\n      return Mixed;\n\n    })(base);\n    for (i = mixins.length - 1; i >= 0; i += -1) {\n      mixin = mixins[i];\n      ref = mixin.prototype;\n      for (name in ref) {\n        method = ref[name];\n        Mixed.prototype[name] = method;\n      }\n    }\n    return Mixed;\n  };\n\n  trim = function(data, char) {\n    return _.trim(data, char);\n  };\n\n  slugify = function(data) {\n    return data.toString().toLowerCase().trim().replace(/\\s+/g, '-').replace(/&/g, '-and-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-');\n  };\n\n  unslugify = function(data) {\n    if (data) {\n      return _.capitalize(data.replace(/-/g, ' '));\n    }\n    return data;\n  };\n\n  toggleText = function(element, texts) {\n    var nextTextPosition, text;\n    nextTextPosition = element.data('nextTextPosition');\n    if ((nextTextPosition == null) || nextTextPosition >= texts.length) {\n      nextTextPosition = 0;\n    }\n    text = texts[nextTextPosition];\n    element.data('nextTextPosition', nextTextPosition + 1);\n    return element.text(text);\n  };\n\n  groupBy = function(coll, pred) {\n    var i, item, len, result;\n    result = {};\n    for (i = 0, len = coll.length; i < len; i++) {\n      item = coll[i];\n      result[pred(item)] = item;\n    }\n    return result;\n  };\n\n  timeout = function(wait, continuation) {\n    return window.setTimeout(continuation, wait);\n  };\n\n  cancelTimeout = function(timeoutVar) {\n    return window.clearTimeout(timeoutVar);\n  };\n\n  scopeDefer = function(scope, func) {\n    return _.defer((function(_this) {\n      return function() {\n        return scope.$apply(func);\n      };\n    })(this));\n  };\n\n  toString = function(value) {\n    if (_.isNumber(value)) {\n      return value + \"\";\n    } else if (_.isString(value)) {\n      return value;\n    } else if (_.isPlainObject(value)) {\n      return JSON.stringify(value);\n    } else if (_.isUndefined(value)) {\n      return \"\";\n    }\n    return value.toString();\n  };\n\n  joinStr = function(str, coll) {\n    return coll.join(str);\n  };\n\n  debounce = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: true,\n      trailing: false\n    });\n  };\n\n  debounceLeading = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: false,\n      trailing: true\n    });\n  };\n\n  startswith = function(str1, str2) {\n    return _.startsWith(str1, str2);\n  };\n\n  truncate = function(str, maxLength, suffix) {\n    var out;\n    if (suffix == null) {\n      suffix = \"...\";\n    }\n    if ((typeof str !== \"string\") && !(str instanceof String)) {\n      return str;\n    }\n    out = str.slice(0);\n    if (out.length > maxLength) {\n      out = out.substring(0, maxLength + 1);\n      out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")));\n      out = out + suffix;\n    }\n    return out;\n  };\n\n  sizeFormat = function(input, precision) {\n    var number, size, units;\n    if (precision == null) {\n      precision = 1;\n    }\n    if (isNaN(parseFloat(input)) || !isFinite(input)) {\n      return \"-\";\n    }\n    if (input === 0) {\n      return \"0 bytes\";\n    }\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n    number = Math.floor(Math.log(input) / Math.log(1024));\n    if (number > 5) {\n      number = 5;\n    }\n    size = (input / Math.pow(1024, number)).toFixed(precision);\n    return size + \" \" + units[number];\n  };\n\n  stripTags = function(str, exception) {\n    var pattern;\n    if (exception) {\n      pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi');\n      return String(str).replace(pattern, '');\n    } else {\n      return String(str).replace(/<\\/?[^>]+>/g, '');\n    }\n  };\n\n  replaceTags = function(str, tags, replace) {\n    var pattern;\n    pattern = new RegExp('<(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '<' + replace + '>');\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '</' + replace + '>');\n    return str;\n  };\n\n  defineImmutableProperty = (function(_this) {\n    return function(obj, name, fn) {\n      return Object.defineProperty(obj, name, {\n        get: function() {\n          var fn_result;\n          if (!_.isFunction(fn)) {\n            throw \"defineImmutableProperty third param must be a function\";\n          }\n          fn_result = fn();\n          if (fn_result && _.isObject(fn_result)) {\n            if (fn_result.size === void 0) {\n              throw \"defineImmutableProperty must return immutable data\";\n            }\n          }\n          return fn_result;\n        }\n      });\n    };\n  })(this);\n\n  _.mixin({\n    removeKeys: function(obj, keys) {\n      return _.chain([keys]).flatten().reduce(function(obj, key) {\n        delete obj[key];\n        return obj;\n      }, obj).value();\n    },\n    cartesianProduct: function() {\n      return _.reduceRight(arguments, function(a, b) {\n        return _.flatten(_.map(a, function(x) {\n          return _.map(b, function(y) {\n            return [y].concat(x);\n          });\n        }), true);\n      }, [[]]);\n    }\n  });\n\n  isImage = function(name) {\n    return name.match(/\\.(jpe?g|png|gif|gifv|svg|psd|webp)/i) !== null;\n  };\n\n  isEmail = function(name) {\n    return (name != null) && name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) !== null;\n  };\n\n  isPdf = function(name) {\n    return name.match(/\\.(pdf)/i) !== null;\n  };\n\n  patch = function(oldImmutable, newImmutable) {\n    var pathObj;\n    pathObj = {};\n    newImmutable.forEach(function(newValue, key) {\n      if (newValue !== oldImmutable.get(key)) {\n        if (newValue.toJS) {\n          return pathObj[key] = newValue.toJS();\n        } else {\n          return pathObj[key] = newValue;\n        }\n      }\n    });\n    return pathObj;\n  };\n\n  DEFAULT_COLOR_LIST = ['#D35163', '#D351CF', '#AC51D3', '#8151D3', '#5551D3', '#5178D3', '#78D351', '#51D355', '#51D381', '#51D3AC', '#51CFD3', '#51A3D3', '#A3D350', '#CFD350', '#D3AC50', '#D38050', '#D35450', '#E44057', '#4C566A', '#70728F', '#A9AABC'];\n\n  getRandomDefaultColor = function() {\n    return _.sample(DEFAULT_COLOR_LIST);\n  };\n\n  getDefaulColorList = function() {\n    return _.clone(DEFAULT_COLOR_LIST);\n  };\n\n  getMatches = function(string, regex, index) {\n    var match, matches;\n    index || (index = 1);\n    matches = [];\n    match = null;\n    while (match = regex.exec(string)) {\n      if (index === -1) {\n        matches.push(match);\n      } else {\n        matches.push(match[index]);\n      }\n    }\n    return matches;\n  };\n\n  randomInt = function(start, end) {\n    var interval;\n    interval = end - start;\n    return start + Math.floor(Math.random() * (interval + 1));\n  };\n\n  normalizeString = function(string) {\n    var normalizedString;\n    normalizedString = string;\n    normalizedString = normalizedString.replace(\"Á\", \"A\").replace(\"Ä\", \"A\").replace(\"À\", \"A\");\n    normalizedString = normalizedString.replace(\"É\", \"E\").replace(\"Ë\", \"E\").replace(\"È\", \"E\");\n    normalizedString = normalizedString.replace(\"Í\", \"I\").replace(\"Ï\", \"I\").replace(\"Ì\", \"I\");\n    normalizedString = normalizedString.replace(\"Ó\", \"O\").replace(\"Ö\", \"O\").replace(\"Ò\", \"O\");\n    normalizedString = normalizedString.replace(\"Ú\", \"U\").replace(\"Ü\", \"U\").replace(\"Ù\", \"U\");\n    return normalizedString;\n  };\n\n  findScope = function($scope, condition) {\n    var result;\n    result = condition($scope);\n    if (result) {\n      return result;\n    }\n    if ($scope) {\n      return findScope($scope.$parent, condition);\n    }\n    return null;\n  };\n\n  taiga = this.taiga;\n\n  taiga.addClass = addClass;\n\n  taiga.nl2br = nl2br;\n\n  taiga.bindMethods = bindMethods;\n\n  taiga.bindOnce = bindOnce;\n\n  taiga.mixOf = mixOf;\n\n  taiga.trim = trim;\n\n  taiga.slugify = slugify;\n\n  taiga.unslugify = unslugify;\n\n  taiga.toggleText = toggleText;\n\n  taiga.groupBy = groupBy;\n\n  taiga.timeout = timeout;\n\n  taiga.cancelTimeout = cancelTimeout;\n\n  taiga.scopeDefer = scopeDefer;\n\n  taiga.toString = toString;\n\n  taiga.joinStr = joinStr;\n\n  taiga.truncate = truncate;\n\n  taiga.debounce = debounce;\n\n  taiga.debounceLeading = debounceLeading;\n\n  taiga.startswith = startswith;\n\n  taiga.sizeFormat = sizeFormat;\n\n  taiga.stripTags = stripTags;\n\n  taiga.replaceTags = replaceTags;\n\n  taiga.defineImmutableProperty = defineImmutableProperty;\n\n  taiga.isImage = isImage;\n\n  taiga.isEmail = isEmail;\n\n  taiga.isPdf = isPdf;\n\n  taiga.patch = patch;\n\n  taiga.getRandomDefaultColor = getRandomDefaultColor;\n\n  taiga.getDefaulColorList = getDefaulColorList;\n\n  taiga.getMatches = getMatches;\n\n  taiga.randomInt = randomInt;\n\n  taiga.normalizeString = normalizeString;\n\n  taiga.findScope = findScope;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersMixin, PageMixin, UsFiltersMixin, groupBy, joinStr, taiga, toString, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  joinStr = this.taiga.joinStr;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  PageMixin = (function() {\n    function PageMixin() {}\n\n    PageMixin.prototype.fillUsersAndRoles = function(users, roles) {\n      var activeUsers, computableRoles;\n      activeUsers = _.filter(users, (function(_this) {\n        return function(user) {\n          return user.is_active;\n        };\n      })(this));\n      this.scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\");\n      this.scope.activeUsersById = groupBy(this.scope.activeUsers, function(e) {\n        return e.id;\n      });\n      this.scope.users = _.sortBy(users, \"full_name_display\");\n      this.scope.usersById = groupBy(users, function(e) {\n        return e.id;\n      });\n      this.scope.roles = _.sortBy(roles, \"order\");\n      computableRoles = _(this.scope.project.members).map(\"role\").uniq().value();\n      return this.scope.computableRoles = _(roles).filter(\"computable\").filter(function(x) {\n        return _.includes(computableRoles, x.id);\n      }).value();\n    };\n\n    PageMixin.prototype.loadUsersAndRoles = function() {\n      var promise;\n      promise = this.q.all([this.rs.projects.usersList(this.scope.projectId), this.rs.projects.rolesList(this.scope.projectId)]);\n      return promise.then((function(_this) {\n        return function(results) {\n          var roles, users;\n          users = results[0], roles = results[1];\n          _this.fillUsersAndRoles(users, roles);\n          return results;\n        };\n      })(this));\n    };\n\n    return PageMixin;\n\n  })();\n\n  taiga.PageMixin = PageMixin;\n\n  FiltersMixin = (function() {\n    function FiltersMixin() {}\n\n    FiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    FiltersMixin.prototype.selectFilter = function(name, value, load, mode) {\n      var existing, location, params;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = \"include\";\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] !== void 0 && name !== \"page\") {\n        existing = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n          return trim(x);\n        });\n        existing.push(taiga.toString(value));\n        existing = _.compact(existing);\n        value = joinStr(\",\", _.uniq(existing));\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceFilter = function(name, value, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceAllFilters = function(filters, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(filters);\n    };\n\n    FiltersMixin.prototype.unselectFilter = function(name, value, load, mode) {\n      var location, newValues, params, parsedValues;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = 'include';\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] === void 0) {\n        return;\n      }\n      if (value === void 0 || value === null) {\n        delete params[name];\n      }\n      parsedValues = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n        return trim(x);\n      });\n      newValues = _.reject(parsedValues, function(x) {\n        return x === taiga.toString(value);\n      });\n      newValues = _.compact(newValues);\n      if (_.isEmpty(newValues)) {\n        value = null;\n      } else {\n        value = joinStr(\",\", _.uniq(newValues));\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(name, value);\n    };\n\n    FiltersMixin.prototype.applyStoredFilters = function(projectSlug, key, validKeys) {\n      var filters;\n      if (_.isEmpty(this.location.search())) {\n        filters = this.getFilters(projectSlug, key);\n        if (validKeys) {\n          filters = _.pick(filters, validKeys);\n        }\n        if (Object.keys(filters).length) {\n          this.location.search(filters);\n          this.location.replace();\n          return true;\n        }\n      }\n      return false;\n    };\n\n    FiltersMixin.prototype.storeFilters = function(projectSlug, params, filtersHashSuffix) {\n      var hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      return this.storage.set(hash, params);\n    };\n\n    FiltersMixin.prototype.getFilters = function(projectSlug, filtersHashSuffix) {\n      var data, hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      data = this.storage.get(hash) || {};\n      delete data.q;\n      return data;\n    };\n\n    FiltersMixin.prototype.formatSelectedFilters = function(type, list, urlIds, mode) {\n      var invalidAppliedTags, invalidTags, selectedFilters, selectedIds, validAppliedTags;\n      if (mode == null) {\n        mode = \"include\";\n      }\n      selectedIds = urlIds.split(',');\n      selectedFilters = _.filter(list, function(it) {\n        return selectedIds.indexOf(_.toString(it.id)) !== -1;\n      });\n      invalidTags = _.filter(selectedIds, function(it) {\n        return !_.find(selectedFilters, function(sit) {\n          return _.toString(sit.id) === it;\n        });\n      });\n      invalidAppliedTags = _.map(invalidTags, function(it) {\n        return {\n          id: it,\n          key: type + \":\" + it,\n          dataType: type,\n          name: it,\n          mode: mode\n        };\n      });\n      validAppliedTags = _.map(selectedFilters, function(it) {\n        return {\n          id: it.id,\n          key: type + \":\" + it.id,\n          dataType: type,\n          name: it.name,\n          color: it.color,\n          mode: mode\n        };\n      });\n      return invalidAppliedTags.concat(validAppliedTags);\n    };\n\n    return FiltersMixin;\n\n  })();\n\n  taiga.FiltersMixin = FiltersMixin;\n\n  UsFiltersMixin = (function() {\n    function UsFiltersMixin() {}\n\n    UsFiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    UsFiltersMixin.prototype.filterCategories = [\"tags\", \"status\", \"assigned_users\", \"assigned_to\", \"owner\", \"epic\", \"role\"];\n\n    UsFiltersMixin.prototype.excludeFilters = [];\n\n    UsFiltersMixin.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      return this.filtersReloadContent();\n    };\n\n    UsFiltersMixin.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n          return _this.generateFilters();\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    UsFiltersMixin.prototype.generateFilters = function(milestone) {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      this.storeFilters(this.params.pslug, this.location.search(), this.storeFiltersName);\n      urlfilters = this.location.search();\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      if (milestone) {\n        loadFilters.milestone = milestone;\n      }\n      return this.q.all([this.rs.userstories.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_users = _.map(data.assigned_users, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.epic = _.map(data.epics, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n              it.name = \"#\" + it.ref + \" \" + it.subject;\n            } else {\n              it.id = \"null\";\n              it.name = \"Not in an epic\";\n            }\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [];\n          if (!_this.excludeFilters.includes('status')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            });\n          }\n          if (!_this.excludeFilters.includes('tags')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            });\n          }\n          if (!_this.excludeFilters.includes('assigned_to')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_users\",\n              content: dataCollection.assigned_users\n            });\n          }\n          if (!_this.excludeFilters.includes('role')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            });\n          }\n          if (!_this.excludeFilters.includes('created_by')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            });\n          }\n          if (!_this.excludeFilters.includes('epic')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\n              dataType: \"epic\",\n              content: dataCollection.epic\n            });\n          }\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    return UsFiltersMixin;\n\n  })();\n\n  taiga.UsFiltersMixin = UsFiltersMixin;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaAdmin\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var $translateMissingTranslationHandlerLog;\n\n  $translateMissingTranslationHandlerLog = function($log) {\n    return function(translationId) {};\n  };\n\n  $translateMissingTranslationHandlerLog.$inject = ['$log'];\n\n  angular.module('pascalprecht.translate').factory('$translateMissingTranslationHandlerLog', $translateMissingTranslationHandlerLog);\n\n  $translateMissingTranslationHandlerLog.displayName = '$translateMissingTranslationHandlerLog';\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AuthService, CancelAccountDirective, ChangeEmailDirective, ChangePasswordFromRecoveryDirective, ForgotPasswordDirective, InvitationDirective, LoginDirective, LoginPage, PublicRegisterMessageDirective, RegisterDirective, RegisterOptionsDirective, VerifyEmailDirective, debounce, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAuth\", [\"taigaResources\"]);\n\n  LoginPage = (function() {\n    LoginPage.$inject = ['tgCurrentUserService', '$location', '$tgNavUrls', '$routeParams', '$tgAuth'];\n\n    function LoginPage(currentUserService, $location, $navUrls, $routeParams, $auth) {\n      var url;\n      if (currentUserService.isAuthenticated()) {\n        if (!$routeParams['force_login']) {\n          url = $navUrls.resolve(\"home\");\n          if ($routeParams['next']) {\n            url = decodeURIComponent($routeParams['next']);\n            $location.search('next', null);\n          }\n          if ($routeParams['unauthorized']) {\n            $auth.clear();\n            $auth.removeToken();\n          } else {\n            $location.url(url);\n          }\n        }\n      }\n    }\n\n    return LoginPage;\n\n  })();\n\n  module.controller('LoginPage', LoginPage);\n\n  AuthService = (function(superClass) {\n    extend(AuthService, superClass);\n\n    AuthService.$inject = [\"$rootScope\", \"$tgStorage\", \"$tgModel\", \"$tgResources\", \"$tgHttp\", \"$tgUrls\", \"$tgConfig\", \"$tgUserPilot\", \"$translate\", \"tgCurrentUserService\", \"tgThemeService\", \"$tgAnalytics\"];\n\n    function AuthService(rootscope, storage, model, rs, http, urls, config1, userpilot, translate, currentUserService1, themeService, analytics) {\n      var userModel;\n      this.rootscope = rootscope;\n      this.storage = storage;\n      this.model = model;\n      this.rs = rs;\n      this.http = http;\n      this.urls = urls;\n      this.config = config1;\n      this.userpilot = userpilot;\n      this.translate = translate;\n      this.currentUserService = currentUserService1;\n      this.themeService = themeService;\n      this.analytics = analytics;\n      AuthService.__super__.constructor.call(this);\n      userModel = this.getUser();\n      this._currentTheme = this._getUserTheme();\n      this.setUserdata(userModel);\n    }\n\n    AuthService.prototype.setUserdata = function(userModel) {\n      if (userModel) {\n        this.userData = Immutable.fromJS(userModel.getAttrs());\n        this.currentUserService.setUser(this.userData);\n      } else {\n        this.userData = null;\n      }\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype._getUserTheme = function() {\n      var compiledThemes, defaultTheme, ref, ref1, ref2;\n      compiledThemes = window._taigaAvailableThemes;\n      defaultTheme = this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!_.includes(this.config.get(\"themes\"), (ref = this.rootscope.user) != null ? ref.theme : void 0) || !compiledThemes.includes((ref1 = this.rootscope.user) != null ? ref1.theme : void 0)) {\n        return defaultTheme;\n      }\n      return (ref2 = this.rootscope.user) != null ? ref2.theme : void 0;\n    };\n\n    AuthService.prototype._setTheme = function() {\n      var newTheme;\n      newTheme = this._getUserTheme();\n      if (this._currentTheme !== newTheme) {\n        this._currentTheme = newTheme;\n        return this.themeService.use(this._currentTheme);\n      }\n    };\n\n    AuthService.prototype._setLocales = function() {\n      var lang, ref;\n      lang = ((ref = this.rootscope.user) != null ? ref.lang : void 0) || this.config.get(\"defaultLanguage\") || \"en\";\n      this.translate.preferredLanguage(lang);\n      return this.translate.use(lang);\n    };\n\n    AuthService.prototype.getUser = function() {\n      var user, userData;\n      if (this.rootscope.user) {\n        return this.rootscope.user;\n      }\n      userData = this.storage.get(\"userInfo\");\n      if (userData) {\n        user = this.model.make_model(\"users\", userData);\n        this.rootscope.user = user;\n        this._setLocales();\n        this._setTheme();\n        return user;\n      } else {\n        this._setTheme();\n      }\n      return null;\n    };\n\n    AuthService.prototype.setUser = function(user) {\n      this.rootscope.auth = user;\n      this.storage.set(\"userInfo\", user.getAttrs());\n      this.rootscope.user = user;\n      this.setUserdata(user);\n      this._setLocales();\n      return this._setTheme();\n    };\n\n    AuthService.prototype.clear = function() {\n      this.rootscope.auth = null;\n      this.rootscope.user = null;\n      return this.storage.remove(\"userInfo\");\n    };\n\n    AuthService.prototype.setToken = function(token) {\n      return this.storage.set(\"token\", token);\n    };\n\n    AuthService.prototype.getToken = function() {\n      return this.storage.get(\"token\");\n    };\n\n    AuthService.prototype.removeToken = function() {\n      return this.storage.remove(\"token\");\n    };\n\n    AuthService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    AuthService.prototype.refresh = function() {\n      var url;\n      url = this.urls.resolve(\"user-me\");\n      return this.http.get(url).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = data.data;\n          user.token = _this.getUser().auth_token;\n          user = _this.model.make_model(\"users\", user);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:refresh\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.login = function(data, type) {\n      var url;\n      url = this.urls.resolve(\"auth\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"normal\";\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = _this.model.make_model(\"users\", data.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:login\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.logout = function() {\n      this.removeToken();\n      this.clear();\n      this.currentUserService.removeUser();\n      this._setTheme();\n      this._setLocales();\n      this.rootscope.$broadcast(\"auth:logout\");\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype.register = function(data, type, existing) {\n      var url;\n      url = this.urls.resolve(\"auth-register\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"public\";\n      if (type === \"private\") {\n        data.existing = existing ? existing : false;\n      }\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(response) {\n          var user;\n          user = _this.model.make_model(\"users\", response.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:register\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.getInvitation = function(token) {\n      return this.rs.invitations.get(token);\n    };\n\n    AuthService.prototype.acceptInvitiationWithNewUser = function(data) {\n      return this.register(data, \"private\", false);\n    };\n\n    AuthService.prototype.forgotPassword = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-password-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changePasswordFromRecovery = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-password-from-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changeEmail = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-email\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.cancelAccount = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-cancel-account\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.exportProfile = function() {\n      var url;\n      url = this.urls.resolve(\"users-export\");\n      return this.http.post(url);\n    };\n\n    AuthService.prototype.sendVerificationEmail = function() {\n      var url;\n      url = this.urls.resolve(\"user-send-verification-email\");\n      return this.http.post(url);\n    };\n\n    return AuthService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAuth\", AuthService);\n\n  PublicRegisterMessageDirective = function($config, $navUrls, $routeParams, templates) {\n    var template, templateFn;\n    template = templates.get(\"auth/login-text.html\", true);\n    templateFn = function() {\n      var nextUrl, publicRegisterEnabled, url;\n      publicRegisterEnabled = $config.get(\"publicRegisterEnabled\");\n      if (!publicRegisterEnabled) {\n        return \"\";\n      }\n      url = $navUrls.resolve(\"register\");\n      if ($routeParams['force_next']) {\n        nextUrl = encodeURIComponent($routeParams['force_next']);\n        url += \"?next=\" + nextUrl;\n      }\n      return template({\n        url: url\n      });\n    };\n    return {\n      restrict: \"AE\",\n      scope: {},\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\", \"$tgTemplate\", PublicRegisterMessageDirective]);\n\n  LoginDirective = function($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onError, onSuccess, submit;\n      form = new checksley.Form($el.find(\"form.login-form\"));\n      $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true);\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\") && !$routeParams['next'].startsWith(\"%2Fdiscover\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      if ($routeParams['force_next']) {\n        $scope.nextUrl = decodeURIComponent($routeParams['force_next']);\n      }\n      onSuccess = function(response) {\n        $events.setupConnection();\n        $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onError = function(response) {\n        return $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"));\n      };\n      $scope.onKeyUp = function(event) {\n        var target, value;\n        target = angular.element(event.currentTarget);\n        value = target.val();\n        $scope.iscapsLockActivated = false;\n        if (value !== value.toLowerCase()) {\n          return $scope.iscapsLockActivated = true;\n        }\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          data = {\n            \"username\": $el.find(\"form.login-form input[name=username]\").val(),\n            \"password\": $el.find(\"form.login-form input[name=password]\").val()\n          };\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          promise = $auth.login(data, loginFormType);\n          return promise.then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      window.prerenderReady = true;\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective]);\n\n  RegisterDirective = function($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      if (!$config.get(\"publicRegisterEnabled\")) {\n        $location.path($navUrls.resolve(\"not-found\"));\n        $location.replace();\n      }\n      $scope.data = {};\n      form = $el.find(\"form\").checksley({\n        onlyOneErrorElement: true\n      });\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      onSuccessSubmit = function(response) {\n        $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return form.setErrors(response.data);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.register($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective]);\n\n  RegisterOptionsDirective = function() {\n    return {};\n  };\n\n  module.directive(\"tgRegisterOptions\", [RegisterOptionsDirective]);\n\n  ForgotPasswordDirective = function($auth, $confirm, $location, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var message, title;\n        $location.path($navUrls.resolve(\"login\"));\n        title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\");\n        message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\");\n        return $confirm.success(title, message);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\");\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.forgotPassword($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\", ForgotPasswordDirective]);\n\n  ChangePasswordFromRecoveryDirective = function($auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit, text;\n      $scope.data = {};\n      if ($params.token != null) {\n        $scope.tokenInParams = true;\n        $scope.data.token = $params.token;\n      } else {\n        $location.path($navUrls.resolve(\"login\"));\n        text = '';\n        text = response.data.token.map(function(message) {\n          return text + \" \" + message;\n        });\n        $confirm.notify(\"light-error\", text);\n      }\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        text = '';\n        text = response.data.password.map(function(message) {\n          return text + \" \" + message;\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.changePasswordFromRecovery($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangePasswordFromRecoveryDirective]);\n\n  InvitationDirective = function($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var loginForm, onErrorSubmitLogin, onErrorSubmitRegister, onSuccessSubmitLogin, onSuccessSubmitRegister, promise, registerForm, submitLogin, submitRegister, token;\n      token = $params.token;\n      promise = $auth.getInvitation(token);\n      promise.then(function(invitation) {\n        $scope.invitation = invitation;\n        return $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      });\n      promise.then(null, function(response) {\n        var text;\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\");\n        return $confirm.notify(\"light-error\", text);\n      });\n      $scope.dataLogin = {\n        token: token\n      };\n      loginForm = $el.find(\"form.login-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitLogin = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitLogin = function(response) {\n        return $confirm.notify(\"light-error\", response.data._error_message);\n      };\n      submitLogin = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType;\n          event.preventDefault();\n          if (!loginForm.validate()) {\n            return;\n          }\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          data = $scope.dataLogin;\n          promise = $auth.login({\n            username: data.username,\n            password: data.password,\n            invitation_token: data.token\n          }, loginFormType);\n          return promise.then(onSuccessSubmitLogin, onErrorSubmitLogin);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.login-form\", submitLogin);\n      $el.on(\"click\", \".button-login\", submitLogin);\n      $scope.dataRegister = {\n        token: token\n      };\n      registerForm = $el.find(\"form.register-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitRegister = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitRegister = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return registerForm.setErrors(response.data);\n      };\n      submitRegister = debounce(2000, (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          if (!registerForm.validate()) {\n            return;\n          }\n          promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister);\n          return promise.then(onSuccessSubmitRegister, onErrorSubmitRegister);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.register-form\", submitRegister);\n      $el.on(\"click\", \".button-register\", submitRegister);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective]);\n\n  VerifyEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"VERIFY_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgVerifyEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", VerifyEmailDirective]);\n\n  ChangeEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective]);\n\n  CancelAccountDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.cancel_token = $params.cancel_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        $auth.logout();\n        $location.path($navUrls.resolve(\"home\"));\n        text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.cancelAccount($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", CancelAccountDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaBacklog\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaMainDirective, bindOnce, groupBy, init, module, taiga, urls;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\", []);\n\n  TaigaMainDirective = function($rootscope, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $window.onresize = function() {\n        return $rootscope.$broadcast(\"resize\");\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective]);\n\n  urls = {\n    \"home\": \"/\",\n    \"projects\": \"/projects\",\n    \"error\": \"/error\",\n    \"not-found\": \"/not-found\",\n    \"permission-denied\": \"/permission-denied\",\n    \"discover\": \"/discover\",\n    \"discover-search\": \"/discover/search\",\n    \"login\": \"/login\",\n    \"forgot-password\": \"/forgot-password\",\n    \"change-password\": \"/change-password/:token\",\n    \"change-email\": \"/change-email/:token\",\n    \"verified-email\": \"/change-email/:token\",\n    \"cancel-account\": \"/cancel-account/:token\",\n    \"register\": \"/register\",\n    \"invitation\": \"/invitation/:token\",\n    \"create-project\": \"/project/new\",\n    \"create-project-scrum\": \"/project/new/scrum\",\n    \"create-project-kanban\": \"/project/new/kanban\",\n    \"create-project-duplicate\": \"/project/new/duplicate\",\n    \"create-project-import\": \"/project/new/import\",\n    \"create-project-import-platform\": \"/project/new/import/:platform\",\n    \"profile\": \"/profile\",\n    \"user-profile\": \"/profile/:username\",\n    \"blocked-project\": \"/blocked-project/:project\",\n    \"project\": \"/project/:project\",\n    \"project-detail-ref\": \"/project/:project/t/:ref\",\n    \"project-backlog\": \"/project/:project/backlog\",\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\",\n    \"project-kanban\": \"/project/:project/kanban\",\n    \"project-issues\": \"/project/:project/issues\",\n    \"project-epics\": \"/project/:project/epics\",\n    \"project-search\": \"/project/:project/search\",\n    \"project-timeline\": \"/project/:project/timeline\",\n    \"project-epics-detail\": \"/project/:project/epic/:ref\",\n    \"project-userstories-detail\": \"/project/:project/us/:ref\",\n    \"project-tasks-detail\": \"/project/:project/task/:ref\",\n    \"project-issues-detail\": \"/project/:project/issue/:ref\",\n    \"project-wiki\": \"/project/:project/wiki\",\n    \"project-wiki-list\": \"/project/:project/wiki-list\",\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\",\n    \"project-team\": \"/project/:project/team\",\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\",\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\",\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\",\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\",\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\",\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\",\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\",\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\",\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\",\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\",\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\",\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\",\n    \"project-admin-project-values-kanban-power-ups\": \"/project/:project/admin/project-values/kanban-power-ups\",\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\",\n    \"project-admin-roles\": \"/project/:project/admin/roles\",\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\",\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\",\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\",\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\",\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\",\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\",\n    \"user-settings-user-profile\": \"/user-settings/user-profile\",\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\",\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\",\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\",\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\",\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\",\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\",\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\",\n    \"notifications\": \"/notifications\"\n  };\n\n  init = function($log, $navurls) {\n    $log.debug(\"Initialize navigation urls\");\n    return $navurls.update(urls);\n  };\n\n  module.run([\"$log\", \"$tgNavUrls\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimationFrame, Autofocus, Capslock, CheckPermissionDirective, ClassPermissionDirective, DataPickerConfig, ProjectUrl, Qqueue, QueueModelTransformation, SelectedText, Svg, Template, ToggleCommentDirective, module, taiga,\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\", []);\n\n  DataPickerConfig = function($translate, $config, $auth) {\n    return {\n      get: function() {\n        var isRTL, lang, rtlLanguages, user;\n        user = $auth.getUser();\n        lang = (user != null ? user.lang : void 0) || $translate.preferredLanguage();\n        rtlLanguages = $config.get(\"rtlLanguages\", []);\n        isRTL = rtlLanguages.indexOf(lang) > -1;\n        return {\n          i18n: {\n            previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\n            nextMonth: $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\n            months: [$translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")],\n            weekdays: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")],\n            weekdaysShort: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")]\n          },\n          isRTL: isRTL,\n          firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\n          format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        };\n      }\n    };\n  };\n\n  module.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig]);\n\n  SelectedText = function($window, $document) {\n    var get;\n    get = function() {\n      if ($window.getSelection) {\n        return $window.getSelection().toString();\n      } else if ($document.selection) {\n        return $document.selection.createRange().text;\n      }\n      return \"\";\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText]);\n\n  CheckPermissionDirective = function(projectService) {\n    var link, render;\n    render = function($el, project, permission) {\n      if (project && permission) {\n        if (project.get('my_permissions').indexOf(permission) > -1) {\n          return $el.removeClass('hidden');\n        }\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var permission, unObserve, unwatch;\n      $el.addClass('hidden');\n      permission = $attrs.tgCheckPermission;\n      unwatch = $scope.$watch(function() {\n        return projectService.project;\n      }, function() {\n        if (!projectService.project) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unwatch();\n      });\n      unObserve = $attrs.$observe(\"tgCheckPermission\", function(permission) {\n        if (!permission) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unObserve();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CheckPermissionDirective.$inject = [\"tgProjectService\"];\n\n  module.directive(\"tgCheckPermission\", CheckPermissionDirective);\n\n  ClassPermissionDirective = function() {\n    var link, name;\n    name = \"tgClassPermission\";\n    link = function($scope, $el, $attrs) {\n      var checkPermissions, tgClassPermissionWatchAction, unbindWatcher;\n      checkPermissions = function(project, className, permission) {\n        var negation;\n        negation = permission[0] === \"!\";\n        if (negation) {\n          permission = permission.slice(1);\n        }\n        if (negation && project.my_permissions.indexOf(permission) === -1) {\n          return $el.addClass(className);\n        } else if (!negation && project.my_permissions.indexOf(permission) !== -1) {\n          return $el.addClass(className);\n        } else {\n          return $el.removeClass(className);\n        }\n      };\n      tgClassPermissionWatchAction = function(project) {\n        var className, classes, permission, results;\n        if (project) {\n          unbindWatcher();\n          classes = $scope.$eval($attrs[name]);\n          results = [];\n          for (className in classes) {\n            permission = classes[className];\n            results.push(checkPermissions(project, className, permission));\n          }\n          return results;\n        }\n      };\n      return unbindWatcher = $scope.$watch(\"project\", tgClassPermissionWatchAction);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgClassPermission\", ClassPermissionDirective);\n\n  AnimationFrame = function() {\n    var add, animationFrame, performAnimation, tail;\n    animationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n    performAnimation = (function(_this) {\n      return function(time) {\n        var fn;\n        fn = tail.shift();\n        fn();\n        if (tail.length) {\n          return animationFrame(performAnimation);\n        }\n      };\n    })(this);\n    tail = [];\n    add = function() {\n      var fn, i, len, results;\n      results = [];\n      for (i = 0, len = arguments.length; i < len; i++) {\n        fn = arguments[i];\n        tail.push(fn);\n        if (tail.length === 1) {\n          results.push(animationFrame(performAnimation));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n    return {\n      add: add\n    };\n  };\n\n  module.factory(\"animationFrame\", AnimationFrame);\n\n  ToggleCommentDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.find(\"textarea\").on(\"focus\", function() {\n        return $el.addClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleComment\", ToggleCommentDirective);\n\n  ProjectUrl = function($navurls) {\n    var get;\n    get = function(project) {\n      var ctx;\n      if (project.toJS) {\n        project = project.toJS();\n      }\n      ctx = {\n        project: project.slug\n      };\n      if (project.is_backlog_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-backlog\", ctx);\n      }\n      if (project.is_kanban_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-kanban\", ctx);\n      }\n      if (project.is_wiki_activated && project.my_permissions.indexOf(\"view_wiki_pages\") > -1) {\n        return $navurls.resolve(\"project-wiki\", ctx);\n      }\n      if (project.is_issues_activated && project.my_permissions.indexOf(\"view_issues\") > -1) {\n        return $navurls.resolve(\"project-issues\", ctx);\n      }\n      return $navurls.resolve(\"project\", ctx);\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl]);\n\n  Qqueue = function($q) {\n    var deferred, lastPromise, qqueue;\n    deferred = $q.defer();\n    deferred.resolve();\n    lastPromise = deferred.promise;\n    qqueue = {\n      bindAdd: (function(_this) {\n        return function(fn) {\n          return function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return lastPromise = lastPromise.then(function() {\n              return fn.apply(_this, args);\n            });\n          };\n        };\n      })(this),\n      add: (function(_this) {\n        return function(fn) {\n          if (!lastPromise) {\n            lastPromise = fn();\n          } else {\n            lastPromise = lastPromise.then(fn);\n          }\n          return qqueue;\n        };\n      })(this)\n    };\n    return qqueue;\n  };\n\n  module.factory(\"$tgQqueue\", [\"$q\", Qqueue]);\n\n  QueueModelTransformation = (function(superClass) {\n    extend(QueueModelTransformation, superClass);\n\n    QueueModelTransformation.$inject = [\"$tgQqueue\", \"$tgRepo\", \"$q\", \"$tgModel\"];\n\n    function QueueModelTransformation(qqueue1, repo, q, model1) {\n      this.qqueue = qqueue1;\n      this.repo = repo;\n      this.q = q;\n      this.model = model1;\n    }\n\n    QueueModelTransformation.prototype.setObject = function(scope1, prop) {\n      this.scope = scope1;\n      this.prop = prop;\n    };\n\n    QueueModelTransformation.prototype.clone = function() {\n      var attrs, model;\n      attrs = _.cloneDeep(this.scope[this.prop]._attrs);\n      model = this.model.make_model(this.scope[this.prop]._name, attrs);\n      return model;\n    };\n\n    QueueModelTransformation.prototype.getObj = function() {\n      return this.scope[this.prop];\n    };\n\n    QueueModelTransformation.prototype.save = function(transformation) {\n      var defered;\n      defered = this.q.defer();\n      this.qqueue.add((function(_this) {\n        return function() {\n          var clone, comment, modified, obj, success;\n          obj = _this.getObj();\n          comment = obj.comment;\n          obj.comment = '';\n          clone = _this.clone();\n          modified = _.omit(obj._modifiedAttrs, ['version']);\n          clone = _.assign(clone, modified);\n          transformation(clone);\n          if (comment.length) {\n            clone.comment = comment;\n          }\n          success = function() {\n            _this.scope[_this.prop] = clone;\n            return defered.resolve.apply(null, arguments);\n          };\n          return _this.repo.save(clone).then(success, defered.reject);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    return QueueModelTransformation;\n\n  })(taiga.Service);\n\n  module.service(\"$tgQueueModelTransformation\", QueueModelTransformation);\n\n  Template = function($templateCache) {\n    return {\n      get: (function(_this) {\n        return function(name, lodash) {\n          var tmp;\n          if (lodash == null) {\n            lodash = false;\n          }\n          tmp = $templateCache.get(name);\n          if (lodash) {\n            tmp = _.template(tmp);\n          }\n          return tmp;\n        };\n      })(this)\n    };\n  };\n\n  module.factory(\"$tgTemplate\", [\"$templateCache\", Template]);\n\n  Capslock = function() {\n    var template;\n    template = \"<tg-svg class=\\\"capslock\\\" ng-if=\\\"capslockIcon && iscapsLockActivated\\\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\";\n    return {\n      template: template\n    };\n  };\n\n  module.directive(\"tgCapslock\", [Capslock]);\n\n  Svg = function() {\n    var template;\n    template = \"<svg class=\\\"{{ 'icon ' + svgIcon }}\\\" style=\\\"fill: {{ svgFill }}\\\">\\n    <use xlink:href=\\\"\\\" ng-attr-xlink:href=\\\"{{ '#' + svgIcon }}\\\" ng-attr-href=\\\"{{ '#' + svgIcon }}\\\">\\n        <title ng-if=\\\"svgTitle\\\">{{svgTitle}}</title>\\n        <title ng-if=\\\"svgTitleTranslate\\\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\\n    </use>\\n</svg>\";\n    return {\n      scope: {\n        svgIcon: \"@\",\n        svgTitle: \"@\",\n        svgTitleTranslate: \"@\",\n        svgTitleTranslateValues: \"=\",\n        svgFill: \"=\"\n      },\n      template: template\n    };\n  };\n\n  module.directive(\"tgSvg\", [Svg]);\n\n  Autofocus = function($timeout, $parse, animationFrame) {\n    return {\n      restrict: 'A',\n      link: function($scope, $element, attrs) {\n        var model;\n        if (attrs.ngShow) {\n          model = $parse(attrs.ngShow);\n          return $scope.$watch(model, function(value) {\n            if (value === true) {\n              return $timeout(function() {\n                return $element[0].focus();\n              });\n            }\n          });\n        } else {\n          return $timeout(function() {\n            return $element[0].focus();\n          });\n        }\n      }\n    };\n  };\n\n  module.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus]);\n\n  module.directive('tgPreloadImage', function() {\n    var preload, spinner, template;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    template = \"<div>\\n    <ng-transclude></ng-transclude>\\n</div>\";\n    preload = function(src, onLoad) {\n      var image;\n      image = new Image();\n      image.onload = onLoad;\n      image.src = src;\n      return image;\n    };\n    return {\n      template: template,\n      transclude: true,\n      replace: true,\n      link: function(scope, el, attrs) {\n        var image, onLoad, timeout;\n        image = el.find('img:last');\n        timeout = null;\n        onLoad = function() {\n          el.find('.loading-spinner').remove();\n          image.show();\n          if (timeout) {\n            clearTimeout(timeout);\n            return timeout = null;\n          }\n        };\n        return attrs.$observe('preloadSrc', function(src) {\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          el.find('.loading-spinner').remove();\n          timeout = setTimeout(function() {\n            return el.prepend(spinner);\n          }, 200);\n          image.hide();\n          return preload(src, onLoad);\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailController, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaCommon\");\n\n  DetailController = (function() {\n    DetailController.$inject = ['$routeParams', '$tgRepo', \"tgProjectService\", \"$tgNavUrls\", \"$location\"];\n\n    function DetailController(params, repo, projectService, navurls, location) {\n      this.params = params;\n      this.repo = repo;\n      this.projectService = projectService;\n      this.navurls = navurls;\n      this.location = location;\n      this.repo.resolve({\n        pslug: this.params.pslug,\n        ref: this.params.ref\n      }).then((function(_this) {\n        return function(result) {\n          var url;\n          if (result.issue) {\n            url = _this.navurls.resolve('project-issues-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.task) {\n            url = _this.navurls.resolve('project-tasks-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.us) {\n            url = _this.navurls.resolve('project-userstories-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.epic) {\n            url = _this.navurls.resolve('project-epics-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.wikipage) {\n            url = _this.navurls.resolve('project-wiki-page', {\n              project: _this.projectService.project.get('slug'),\n              slug: _this.params.ref\n            });\n          }\n          return _this.location.path(url);\n        };\n      })(this));\n    }\n\n    return DetailController;\n\n  })();\n\n  module.controller(\"DetailController\", DetailController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaEpics\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EventsProvider, EventsService, bindMethods, module, startswith, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEvents\", []);\n\n  EventsService = (function() {\n    function EventsService(win, log, config, auth, liveAnnouncementService1, rootScope) {\n      this.win = win;\n      this.log = log;\n      this.config = config;\n      this.auth = auth;\n      this.liveAnnouncementService = liveAnnouncementService1;\n      this.rootScope = rootScope;\n      this.processMessage = bind(this.processMessage, this);\n      bindMethods(this);\n    }\n\n    EventsService.prototype.initialize = function(sessionId) {\n      this.sessionId = sessionId;\n      this.subscriptions = {};\n      this.connected = false;\n      this.error = false;\n      this.pendingMessages = [];\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = null;\n      if (this.win.WebSocket === void 0) {\n        return this.log.info(\"WebSockets not supported on your browser\");\n      }\n    };\n\n    EventsService.prototype.setupConnection = function() {\n      var loc, path, scheme, url;\n      this.stopExistingConnection();\n      url = this.config.get(\"eventsUrl\");\n      if (!url) {\n        return;\n      }\n      if (!startswith(url, \"ws:\") && !startswith(url, \"wss:\")) {\n        loc = this.win.location;\n        scheme = loc.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n        path = _.trimStart(url, \"/\");\n        url = scheme + \"//\" + loc.host + \"/\" + path;\n      }\n      this.error = false;\n      this.ws = new this.win.WebSocket(url);\n      this.ws.addEventListener(\"open\", this.onOpen);\n      this.ws.addEventListener(\"message\", this.onMessage);\n      this.ws.addEventListener(\"error\", this.onError);\n      return this.ws.addEventListener(\"close\", this.onClose);\n    };\n\n    EventsService.prototype.stopExistingConnection = function() {\n      if (this.ws === void 0) {\n        return;\n      }\n      this.ws.removeEventListener(\"open\", this.onOpen);\n      this.ws.removeEventListener(\"close\", this.onClose);\n      this.ws.removeEventListener(\"error\", this.onError);\n      this.ws.removeEventListener(\"message\", this.onMessage);\n      this.stopHeartBeatMessages();\n      this.ws.close();\n      return delete this.ws;\n    };\n\n    EventsService.prototype.notifications = function() {\n      return this.subscribe(null, 'notifications', (function(_this) {\n        return function(data) {\n          _this.liveAnnouncementService.show(data.title, data.desc);\n          return _this.rootScope.$digest();\n        };\n      })(this));\n    };\n\n    EventsService.prototype.liveNotifications = function() {\n      var subscribe, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      subscribe = (function(_this) {\n        return function() {\n          return _this.subscribe(null, \"live_notifications.\" + userId, function(data) {\n            var notification;\n            notification = new Notification(data.title, {\n              icon: \"/\" + window._version + \"/images/favicon.png\",\n              body: data.body,\n              tag: data.id\n            });\n            notification.onshow = function() {\n              if (data.timeout && data.timeout > 0) {\n                return setTimeout(function() {\n                  return notification.close();\n                }, data.timeout);\n              }\n            };\n            if (data.url) {\n              return notification.onclick = function() {\n                return window.open(data.url);\n              };\n            }\n          });\n        };\n      })(this);\n      if (!window.Notification) {\n        return this.log.info(\"This browser does not support desktop notification\");\n      } else if (Notification.permission === \"granted\") {\n        return subscribe();\n      } else if (Notification.permission !== 'denied') {\n        return Notification.requestPermission((function(_this) {\n          return function(permission) {\n            if (permission === \"granted\") {\n              return subscribe();\n            }\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.webNotifications = function() {\n      var randomTimeout, routingKey, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      routingKey = \"web_notifications.\" + userId;\n      randomTimeout = taiga.randomInt(700, 1000);\n      return this.subscribe(null, routingKey, (function(_this) {\n        return function(data) {\n          return _this.rootScope.$broadcast(\"notifications:new\");\n        };\n      })(this));\n    };\n\n    EventsService.prototype.startHeartBeatMessages = function() {\n      var heartbeatIntervalTime, maxMissedHeartbeats, reconnectTryInterval;\n      if (this.heartbeatInterval) {\n        return;\n      }\n      maxMissedHeartbeats = this.config.get(\"eventsMaxMissedHeartbeats\", 5);\n      heartbeatIntervalTime = this.config.get(\"eventsHeartbeatIntervalTime\", 60000);\n      reconnectTryInterval = this.config.get(\"eventsReconnectTryInterval\", 10000);\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = setInterval((function(_this) {\n        return function() {\n          var e;\n          try {\n            if (_this.missedHeartbeats >= maxMissedHeartbeats) {\n              throw new Error(\"Too many missed heartbeats PINGs.\");\n            }\n            _this.missedHeartbeats++;\n            _this.sendMessage({\n              cmd: \"ping\"\n            });\n            return _this.log.debug(\"HeartBeat send PING\");\n          } catch (error1) {\n            e = error1;\n            _this.log.error(\"HeartBeat error: \" + e.message);\n            return _this.setupConnection();\n          }\n        };\n      })(this), heartbeatIntervalTime);\n      return this.log.debug(\"HeartBeat enabled\");\n    };\n\n    EventsService.prototype.stopHeartBeatMessages = function() {\n      if (!this.heartbeatInterval) {\n        return;\n      }\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n      return this.log.debug(\"HeartBeat disabled\");\n    };\n\n    EventsService.prototype.processHeartBeatPongMessage = function(data) {\n      this.missedHeartbeats = 0;\n      return this.log.debug(\"HeartBeat received PONG\");\n    };\n\n    EventsService.prototype.serialize = function(message) {\n      if (_.isObject(message)) {\n        return JSON.stringify(message);\n      }\n      return message;\n    };\n\n    EventsService.prototype.sendMessage = function(message) {\n      var i, len, messages, msg, results;\n      this.pendingMessages.push(message);\n      if (!this.connected) {\n        return;\n      }\n      messages = _.map(this.pendingMessages, this.serialize);\n      this.pendingMessages = [];\n      results = [];\n      for (i = 0, len = messages.length; i < len; i++) {\n        msg = messages[i];\n        results.push(this.ws.send(msg));\n      }\n      return results;\n    };\n\n    EventsService.prototype.processMessage = function(data) {\n      var routingKey, subscription;\n      routingKey = data.routing_key;\n      if (this.subscriptions[routingKey] == null) {\n        return;\n      }\n      subscription = this.subscriptions[routingKey];\n      if (subscription.scope) {\n        return subscription.scope.$apply(function() {\n          return subscription.callback(data.data);\n        });\n      } else {\n        return subscription.callback(data.data);\n      }\n    };\n\n    EventsService.prototype.subscribe = function(scope, routingKey, callback, options) {\n      var message, subscription;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Subscribe to: \" + routingKey);\n      subscription = {\n        scope: scope,\n        routingKey: routingKey,\n        callback: callback\n      };\n      message = {\n        \"cmd\": \"subscribe\",\n        \"routing_key\": routingKey\n      };\n      if (options) {\n        message.options = options;\n      }\n      this.subscriptions[routingKey] = subscription;\n      this.sendMessage(message);\n      if (scope) {\n        return scope.$on(\"$destroy\", (function(_this) {\n          return function() {\n            return _this.unsubscribe(routingKey);\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.unsubscribe = function(routingKey) {\n      var message;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Unsubscribe from: \" + routingKey);\n      message = {\n        \"cmd\": \"unsubscribe\",\n        \"routing_key\": routingKey\n      };\n      return this.sendMessage(message);\n    };\n\n    EventsService.prototype.onOpen = function() {\n      var message, token;\n      this.connected = true;\n      this.log.debug(\"WebSocket connection opened\");\n      token = this.auth.getToken();\n      message = {\n        cmd: \"auth\",\n        data: {\n          token: token,\n          sessionId: this.sessionId\n        }\n      };\n      this.sendMessage(message);\n      this.startHeartBeatMessages();\n      this.notifications();\n      this.liveNotifications();\n      return this.webNotifications();\n    };\n\n    EventsService.prototype.onMessage = function(event) {\n      var data;\n      this.log.debug(\"WebSocket message received: \" + event.data);\n      data = JSON.parse(event.data);\n      if (data.cmd === \"pong\") {\n        return this.processHeartBeatPongMessage(data);\n      } else {\n        return this.processMessage(data);\n      }\n    };\n\n    EventsService.prototype.onError = function(error) {\n      this.log.error(\"WebSocket error: \" + error);\n      this.error = true;\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    EventsService.prototype.onClose = function() {\n      this.log.debug(\"WebSocket closed.\");\n      this.connected = false;\n      this.stopHeartBeatMessages();\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    return EventsService;\n\n  })();\n\n  EventsProvider = (function() {\n    function EventsProvider() {}\n\n    EventsProvider.prototype.setSessionId = function(sessionId) {\n      return this.sessionId = sessionId;\n    };\n\n    EventsProvider.prototype.$get = function($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) {\n      var service;\n      service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope);\n      service.initialize(this.sessionId);\n      return service;\n    };\n\n    EventsProvider.prototype.$get.$inject = [\"$window\", \"$log\", \"$tgConfig\", \"$tgAuth\", \"tgLiveAnnouncementService\", \"$rootScope\"];\n\n    return EventsProvider;\n\n  })();\n\n  module.provider(\"$tgEvents\", EventsProvider);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackDirective, bindOnce, debounce, groupBy, mixOf, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaFeedback\", []);\n\n  FeedbackDirective = function($lightboxService, $repo, $confirm, $loading, feedbackService) {\n    var directive, link;\n    link = function($scope, $el, $attrs) {\n      var form, openLightbox, submit, submitButton;\n      form = $el.find(\"form\").checksley();\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.create(\"feedback\", $scope.feedback);\n          promise.then(function(data) {\n            currentLoading.finish();\n            $lightboxService.close($el);\n            return $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\");\n          });\n          return promise.then(null, function() {\n            currentLoading.finish();\n            return $confirm.notify(\"error\");\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      openLightbox = function() {\n        $scope.feedback = {};\n        $lightboxService.open($el);\n        return $el.find(\"textarea\").focus();\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return openLightbox();\n    };\n    directive = {\n      link: link,\n      templateUrl: \"common/lightbox-feedback.html\",\n      scope: {}\n    };\n    return directive;\n  };\n\n  module.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIntegrations\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIssues\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaKanban\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaPlugins\", [\"ngRoute\"]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProject\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskAssignedToInlineEditionDirective, RelatedTaskCreateButtonDirective, RelatedTaskCreateFormDirective, RelatedTaskRowDirective, RelatedTasksDirective, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaRelatedTasks\", []);\n\n  RelatedTaskRowDirective = function($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) {\n    var link, templateEdit, templateView;\n    templateView = $template.get(\"task/related-task-row.html\", true);\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var renderEdit, renderView, saveTask;\n      saveTask = debounce(2000, function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.save(task);\n        promise.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"related-tasks:update\");\n          };\n        })(this));\n        promise.then(null, (function(_this) {\n          return function() {\n            currentLoading.finish();\n            $el.find('input').val(task.subject);\n            return $confirm.notify(\"error\");\n          };\n        })(this));\n        return promise;\n      });\n      renderEdit = function(task) {\n        if (this.childScope) {\n          this.childScope.$destroy();\n        }\n        this.childScope = $scope.$new();\n        $el.off();\n        $el.html($compile(templateEdit({\n          task: task\n        }))(childScope));\n        $el.find(\".task-name input\").val(task.subject);\n        $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 13) {\n            return saveTask($model.$modelValue).then(function() {\n              return renderView($model.$modelValue);\n            });\n          } else if (event.keyCode === 27) {\n            return renderView($model.$modelValue);\n          }\n        });\n        $el.on(\"click\", \".save-task\", function(event) {\n          return saveTask($model.$modelValue).then(function() {\n            return renderView($model.$modelValue);\n          });\n        });\n        return $el.on(\"click\", \".cancel-edit\", function(event) {\n          return renderView($model.$modelValue);\n        });\n      };\n      renderView = function(task) {\n        var perms;\n        perms = {\n          modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") !== -1,\n          delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") !== -1\n        };\n        $el.html($compile(templateView({\n          task: task,\n          perms: perms,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        }))($scope));\n        $el.on(\"click\", \".edit-task\", function() {\n          renderEdit($model.$modelValue);\n          return $el.find('input').focus().select();\n        });\n        return $el.on(\"click\", \".delete-task\", function(event) {\n          var message, title;\n          title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          task = $model.$modelValue;\n          message = task.subject;\n          return $confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = $repo.remove(task);\n            promise.then(function() {\n              askResponse.finish();\n              return $scope.$emit(\"related-tasks:delete\");\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          });\n        });\n      };\n      $scope.$watch($attrs.ngModel, function(val) {\n        if (!val) {\n          return;\n        }\n        return renderView(val);\n      });\n      $scope.$on(\"related-tasks:assigned-to-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:status-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective]);\n\n  RelatedTaskCreateFormDirective = function($repo, $compile, $confirm, $tgmodel, $loading, $analytics) {\n    var link, newTask;\n    newTask = {\n      subject: \"\",\n      assigned_to: null\n    };\n    link = function($scope, $el, $attrs) {\n      var close, createTask, render, reset;\n      createTask = function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        task.assigned_to = $scope.newTask.assigned_to;\n        task.status = $scope.newTask.status;\n        $scope.newTask.status = $scope.project.default_task_status;\n        $scope.newTask.assigned_to = null;\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.create(\"tasks\", task);\n        promise.then(function() {\n          $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1);\n          currentLoading.finish();\n          return $scope.$emit(\"related-tasks:add\");\n        });\n        promise.then(null, function() {\n          $el.find('input').val(task.subject);\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n        return promise;\n      };\n      close = function() {\n        $el.off();\n        return $scope.openNewRelatedTask = false;\n      };\n      reset = function() {\n        newTask = {\n          subject: \"\",\n          assigned_to: null\n        };\n        newTask[\"status\"] = $scope.project.default_task_status;\n        newTask[\"project\"] = $scope.project.id;\n        newTask[\"user_story\"] = $scope.us.id;\n        return $scope.newTask = $tgmodel.make_model(\"tasks\", newTask);\n      };\n      render = function() {\n        if ($scope.openNewRelatedTask) {\n          return;\n        }\n        $scope.openNewRelatedTask = true;\n        $el.on(\"submit\", \"form\", function(event) {\n          event.preventDefault();\n          return createTask(newTask).then(function() {\n            reset();\n            return $el.find('input').focus();\n          });\n        });\n        return $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 27) {\n            return $scope.$apply(function() {\n              return close();\n            });\n          }\n        });\n      };\n      $scope.save = function() {\n        return createTask(newTask).then(function() {\n          return close();\n        });\n      };\n      taiga.bindOnce($scope, \"us\", reset);\n      $scope.$on(\"related-tasks:show-form\", function() {\n        return $scope.$apply(render);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: 'task/related-task-create-form.html'\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\", \"$tgAnalytics\", RelatedTaskCreateFormDirective]);\n\n  RelatedTaskCreateButtonDirective = function($repo, $compile, $confirm, $tgmodel, $template) {\n    var link, template;\n    template = $template.get(\"common/components/add-button.html\", true);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch(\"project\", function(val) {\n        if (!val) {\n          return;\n        }\n        $el.off();\n        if ($scope.project.my_permissions.indexOf(\"add_task\") !== -1) {\n          $el.html($compile(template())($scope));\n        } else {\n          $el.html(\"\");\n        }\n        return $el.on(\"click\", \".add-button\", function(event) {\n          return $scope.$emit(\"related-tasks:add-new-clicked\");\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgTemplate\", RelatedTaskCreateButtonDirective]);\n\n  RelatedTasksDirective = function($repo, $rs, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _isEditable, _isVisible, loadTasks;\n      loadTasks = function() {\n        return $rs.tasks.list($scope.projectId, null, $scope.usId).then(function(result) {\n          return Immutable.fromJS(result.data);\n        });\n      };\n      _isVisible = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"view_tasks\") !== -1;\n        }\n        return false;\n      };\n      _isEditable = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.reorderTask = function(task, newIndex) {\n        return $rootscope.$broadcast('task:reorder', task, newIndex);\n      };\n      $scope.showAddTaks = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"add_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.showRelatedTasks = function() {\n        return _isVisible();\n      };\n      $scope.$on(\"related-tasks:add\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:reordered\", function() {\n        return loadTasks();\n      });\n      $scope.$on(\"related-tasks:delete\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:add-new-clicked\", function() {\n        return $scope.$broadcast(\"related-tasks:show-form\");\n      });\n      taiga.bindOnce($scope, \"us\", function(val) {\n        return loadTasks();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", RelatedTasksDirective]);\n\n  RelatedTaskAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\\n<figcaption><%- name %></figcaption>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task, updateRelatedTask;\n      updateRelatedTask = function(task) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = $scope.usersById[task.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".task-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $scope.$watch($attrs.tgRelatedTaskAssignedToInlineEdition, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n        return updateRelatedTask(task);\n      });\n      updateRelatedTask(task);\n      $el.on(\"click\", \".task-assignedto\", function(event) {\n        var onClose;\n        event.preventDefault();\n        event.stopPropagation();\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            task.assigned_to = assignedUsers.pop() || null;\n            if (autoSave) {\n              return $repo.save(task).then(function() {\n                $scope.$emit(\"related-tasks:assigned-to-changed\");\n                return updateRelatedTask(task);\n              });\n            }\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [task.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ResourcesService, initResources, initUrls, module, taiga, urls,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ResourcesService = (function(superClass) {\n    extend(ResourcesService, superClass);\n\n    function ResourcesService() {\n      return ResourcesService.__super__.constructor.apply(this, arguments);\n    }\n\n    return ResourcesService;\n\n  })(taiga.Service);\n\n  urls = {\n    \"auth\": \"/auth\",\n    \"auth-register\": \"/auth/register\",\n    \"invitations\": \"/invitations\",\n    \"users\": \"/users\",\n    \"by_username\": \"/users/by_username\",\n    \"users-password-recovery\": \"/users/password_recovery\",\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\",\n    \"users-change-password\": \"/users/change_password\",\n    \"users-change-email\": \"/users/change_email\",\n    \"users-cancel-account\": \"/users/cancel\",\n    \"users-export\": \"/users/export\",\n    \"user-stats\": \"/users/%s/stats\",\n    \"user-liked\": \"/users/%s/liked\",\n    \"user-voted\": \"/users/%s/voted\",\n    \"user-watched\": \"/users/%s/watched\",\n    \"user-contacts\": \"/users/%s/contacts\",\n    \"user-me\": \"/users/me\",\n    \"user-send-verification-email\": \"/users/send_verification_email\",\n    \"permissions\": \"/permissions\",\n    \"notify-policies\": \"/notify-policies\",\n    \"notifications\": \"/web-notifications\",\n    \"user-project-settings\": \"/user-project-settings\",\n    \"user-storage\": \"/user-storage\",\n    \"memberships\": \"/memberships\",\n    \"bulk-create-memberships\": \"/memberships/bulk_create\",\n    \"roles\": \"/roles\",\n    \"permissions\": \"/permissions\",\n    \"resolver\": \"/resolver\",\n    \"projects\": \"/projects\",\n    \"project-templates\": \"/project-templates\",\n    \"project-modules\": \"/projects/%s/modules\",\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\",\n    \"project-like\": \"/projects/%s/like\",\n    \"project-unlike\": \"/projects/%s/unlike\",\n    \"project-watch\": \"/projects/%s/watch\",\n    \"project-unwatch\": \"/projects/%s/unwatch\",\n    \"project-contact\": \"contact\",\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\",\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\",\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\",\n    \"project-transfer-request\": \"/projects/%s/transfer_request\",\n    \"project-transfer-start\": \"/projects/%s/transfer_start\",\n    \"epic-statuses\": \"/epic-statuses\",\n    \"userstory-statuses\": \"/userstory-statuses\",\n    \"userstory-due-dates\": \"/userstory-due-dates\",\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\",\n    \"points\": \"/points\",\n    \"task-statuses\": \"/task-statuses\",\n    \"task-due-dates\": \"/task-due-dates\",\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\",\n    \"issue-statuses\": \"/issue-statuses\",\n    \"issue-due-dates\": \"/issue-due-dates\",\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\",\n    \"issue-types\": \"/issue-types\",\n    \"priorities\": \"/priorities\",\n    \"severities\": \"/severities\",\n    \"milestones\": \"/milestones\",\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\",\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\",\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\",\n    \"epics\": \"/epics\",\n    \"epic-upvote\": \"/epics/%s/upvote\",\n    \"epic-downvote\": \"/epics/%s/downvote\",\n    \"epic-watch\": \"/epics/%s/watch\",\n    \"epic-unwatch\": \"/epics/%s/unwatch\",\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\",\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\",\n    \"userstories\": \"/userstories\",\n    \"bulk-create-us\": \"/userstories/bulk_create\",\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\",\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\",\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\",\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\",\n    \"userstories-filters\": \"/userstories/filters_data\",\n    \"userstory-upvote\": \"/userstories/%s/upvote\",\n    \"userstory-downvote\": \"/userstories/%s/downvote\",\n    \"userstory-watch\": \"/userstories/%s/watch\",\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\",\n    \"tasks\": \"/tasks\",\n    \"bulk-create-tasks\": \"/tasks/bulk_create\",\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\",\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\",\n    \"task-upvote\": \"/tasks/%s/upvote\",\n    \"task-downvote\": \"/tasks/%s/downvote\",\n    \"task-watch\": \"/tasks/%s/watch\",\n    \"task-unwatch\": \"/tasks/%s/unwatch\",\n    \"task-filters\": \"/tasks/filters_data\",\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\",\n    \"issues\": \"/issues\",\n    \"bulk-create-issues\": \"/issues/bulk_create\",\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\",\n    \"issues-filters\": \"/issues/filters_data\",\n    \"issue-upvote\": \"/issues/%s/upvote\",\n    \"issue-downvote\": \"/issues/%s/downvote\",\n    \"issue-watch\": \"/issues/%s/watch\",\n    \"issue-unwatch\": \"/issues/%s/unwatch\",\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\",\n    \"swimlanes\": \"/swimlanes\",\n    \"swimlane-userstory-statuses\": \"/swimlane-userstory-statuses\",\n    \"wiki\": \"/wiki\",\n    \"wiki-restore\": \"/wiki/%s/restore\",\n    \"wiki-links\": \"/wiki-links\",\n    \"history/epic\": \"/history/epic\",\n    \"history/us\": \"/history/userstory\",\n    \"history/issue\": \"/history/issue\",\n    \"history/task\": \"/history/task\",\n    \"history/wiki\": \"/history/wiki\",\n    \"attachments/epic\": \"/epics/attachments\",\n    \"attachments/us\": \"/userstories/attachments\",\n    \"attachments/issue\": \"/issues/attachments\",\n    \"attachments/task\": \"/tasks/attachments\",\n    \"attachments/wiki_page\": \"/wiki/attachments\",\n    \"attachments/wikipage\": \"/wiki/attachments\",\n    \"custom-attributes/epic\": \"/epic-custom-attributes\",\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\",\n    \"custom-attributes/task\": \"/task-custom-attributes\",\n    \"custom-attributes/issue\": \"/issue-custom-attributes\",\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\",\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\",\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\",\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\",\n    \"webhooks\": \"/webhooks\",\n    \"webhooks-test\": \"/webhooks/%s/test\",\n    \"webhooklogs\": \"/webhooklogs\",\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\",\n    \"epics-csv\": \"/epics/csv?uuid=%s\",\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\",\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\",\n    \"issues-csv\": \"/issues/csv?uuid=%s\",\n    \"timeline-profile\": \"/timeline/profile\",\n    \"timeline-user\": \"/timeline/user\",\n    \"timeline-project\": \"/timeline/project\",\n    \"search\": \"/search\",\n    \"exporter\": \"/exporter\",\n    \"importer\": \"/importer/load_dump\",\n    \"feedback\": \"/feedback\",\n    \"locales\": \"/locales\",\n    \"applications\": \"/applications\",\n    \"application-tokens\": \"/application-tokens\",\n    \"stats-discover\": \"/stats/discover\",\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\",\n    \"importers-trello-authorize\": \"/importers/trello/authorize\",\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\",\n    \"importers-trello-list-users\": \"/importers/trello/list_users\",\n    \"importers-trello-import-project\": \"/importers/trello/import_project\",\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\",\n    \"importers-jira-authorize\": \"/importers/jira/authorize\",\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\",\n    \"importers-jira-list-users\": \"/importers/jira/list_users\",\n    \"importers-jira-import-project\": \"/importers/jira/import_project\",\n    \"importers-github-auth-url\": \"/importers/github/auth_url\",\n    \"importers-github-authorize\": \"/importers/github/authorize\",\n    \"importers-github-list-projects\": \"/importers/github/list_projects\",\n    \"importers-github-list-users\": \"/importers/github/list_users\",\n    \"importers-github-import-project\": \"/importers/github/import_project\",\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\",\n    \"importers-asana-authorize\": \"/importers/asana/authorize\",\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\",\n    \"importers-asana-list-users\": \"/importers/asana/list_users\",\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\n  };\n\n  initUrls = function($log, $urls) {\n    $log.debug(\"Initialize api urls\");\n    return $urls.update(urls);\n  };\n\n  initResources = function($log, $rs) {\n    var i, len, provider, providers, results;\n    $log.debug(\"Initialize resources\");\n    providers = _.toArray(arguments).slice(2);\n    results = [];\n    for (i = 0, len = providers.length; i < len; i++) {\n      provider = providers[i];\n      results.push(provider($rs));\n    }\n    return results;\n  };\n\n  module = angular.module(\"taigaResources\", [\"taigaBase\"]);\n\n  module.service(\"$tgResources\", ResourcesService);\n\n  module.run([\"$log\", \"$tgUrls\", initUrls]);\n\n  module.run([\"$log\", \"$tgResources\", \"$tgProjectsResourcesProvider\", \"$tgCustomAttributesResourcesProvider\", \"$tgCustomAttributesValuesResourcesProvider\", \"$tgMembershipsResourcesProvider\", \"$tgNotifyPoliciesResourcesProvider\", \"$tgInvitationsResourcesProvider\", \"$tgRolesResourcesProvider\", \"$tgUserProjectSettingsResourcesProvider\", \"$tgUserSettingsResourcesProvider\", \"$tgSprintsResourcesProvider\", \"$tgEpicsResourcesProvider\", \"$tgUserstoriesResourcesProvider\", \"$tgTasksResourcesProvider\", \"$tgIssuesResourcesProvider\", \"$tgSwimlanesResourcesProvider\", \"$tgWikiResourcesProvider\", \"$tgSearchResourcesProvider\", \"$tgMdRenderResourcesProvider\", \"$tgHistoryResourcesProvider\", \"$tgKanbanResourcesProvider\", \"$tgModulesResourcesProvider\", \"$tgWebhooksResourcesProvider\", \"$tgWebhookLogsResourcesProvider\", \"$tgLocalesResourcesProvider\", \"$tgUsersResourcesProvider\", initResources]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SearchBoxDirective, SearchController, SearchDirective, bindOnce, debounce, debounceLeading, groupBy, mixOf, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaSearch\", []);\n\n  SearchController = (function(superClass) {\n    extend(SearchController, superClass);\n\n    SearchController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function SearchController(scope1, repo, rs, params, q, location, appMetaService, navUrls, translate, errorHandlingService, projectService1) {\n      var description, loadSearchData, title;\n      this.scope = scope1;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.sectionName = \"Search\";\n      this.loadInitialData();\n      title = this.translate.instant(\"SEARCH.PAGE_TITLE\", {\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        projectDescription: this.scope.project.description\n      });\n      this.appMetaService.setAll(title, description);\n      this.scope.searchTerm = null;\n      loadSearchData = debounceLeading(100, (function(_this) {\n        return function(t) {\n          return _this.loadSearchData(t);\n        };\n      })(this));\n      bindOnce(this.scope, \"projectId\", (function(_this) {\n        return function(projectId) {\n          if (!_this.scope.searchResults && _this.scope.searchTerm) {\n            return _this.loadSearchData();\n          }\n        };\n      })(this));\n      this.scope.$watch(\"searchTerm\", (function(_this) {\n        return function(term) {\n          if (term !== void 0 && _this.scope.projectId) {\n            return _this.loadSearchData(term);\n          }\n        };\n      })(this));\n    }\n\n    SearchController.prototype.loadFilters = function() {\n      var defered;\n      defered = this.q.defer();\n      defered.resolve();\n      return defered.promise;\n    };\n\n    SearchController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.epicStatusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    SearchController.prototype.loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      this.scope.loading = true;\n      return this._loadSearchData(term).then((function(_this) {\n        return function(data) {\n          _this.scope.searchResults = data;\n          return _this.scope.loading = false;\n        };\n      })(this));\n    };\n\n    SearchController.prototype._loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      if (this._promise) {\n        this._promise.abort();\n      }\n      this._promise = this.rs.search[\"do\"](this.scope.projectId, term);\n      return this._promise;\n    };\n\n    SearchController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.scope.projectId = project.id;\n      return this.fillUsersAndRoles(project.members, project.roles);\n    };\n\n    return SearchController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"SearchController\", SearchController);\n\n  SearchBoxDirective = function(projectService, $lightboxService, $navurls, $location, $route) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var openLightbox, project, submit;\n      project = null;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, text, url;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          text = $el.find(\"#search-text\").val();\n          url = $navurls.resolve(\"project-search\", {\n            project: project.get(\"slug\")\n          });\n          return $scope.$apply(function() {\n            $lightboxService.close($el);\n            $location.path(url);\n            $location.search(\"text\", text).path(url);\n            return $route.reload();\n          });\n        };\n      })(this));\n      openLightbox = function() {\n        project = projectService.project;\n        return $lightboxService.open($el).then(function() {\n          return $el.find(\"#search-text\").focus();\n        });\n      };\n      $el.on(\"submit\", \"form\", submit);\n      return openLightbox();\n    };\n    return {\n      templateUrl: \"search/lightbox-search.html\",\n      link: link\n    };\n  };\n\n  SearchBoxDirective.$inject = [\"tgProjectService\", \"lightboxService\", \"$tgNavUrls\", \"$tgLocation\", \"$route\"];\n\n  module.directive(\"tgSearchBox\", SearchBoxDirective);\n\n  SearchDirective = function($log, $compile, $templatecache, $routeparams, $location, $analytics) {\n    var link, linkTable;\n    linkTable = function($scope, $el, $attrs, $ctrl) {\n      var activeSectionName, applyAutoTab, currentSearchResults, getActiveSection, markSectionTabActive, renderFilterTabs, renderTableContent, tabsDom, templates;\n      applyAutoTab = true;\n      activeSectionName = \"userstories\";\n      tabsDom = $el.find(\".search-filter\");\n      currentSearchResults = null;\n      getActiveSection = function(data) {\n        var i, len, maxVal, name, ref, selectedSection, value;\n        maxVal = 0;\n        selectedSection = {};\n        selectedSection.name = \"userstories\";\n        selectedSection.value = [];\n        if (!applyAutoTab) {\n          selectedSection.name = activeSectionName;\n          selectedSection.value = data[activeSectionName];\n          return selectedSection;\n        }\n        if (data) {\n          ref = [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"];\n          for (i = 0, len = ref.length; i < len; i++) {\n            name = ref[i];\n            value = data[name];\n            if (value.length > maxVal) {\n              maxVal = value.length;\n              selectedSection.name = name;\n              selectedSection.value = value;\n              break;\n            }\n          }\n        }\n        if (maxVal === 0) {\n          return selectedSection;\n        }\n        return selectedSection;\n      };\n      renderFilterTabs = function(data) {\n        var name, results, value;\n        results = [];\n        for (name in data) {\n          value = data[name];\n          tabsDom.find(\"li.\" + name).show();\n          results.push(tabsDom.find(\"li.\" + name + \" .num\").html(value.length));\n        }\n        return results;\n      };\n      markSectionTabActive = function(section) {\n        tabsDom.find(\"a.active\").removeClass(\"active\");\n        tabsDom.find(\"li.\" + section.name + \" a\").addClass(\"active\");\n        applyAutoTab = false;\n        return activeSectionName = section.name;\n      };\n      templates = {\n        epics: $templatecache.get(\"search-epics\"),\n        issues: $templatecache.get(\"search-issues\"),\n        tasks: $templatecache.get(\"search-tasks\"),\n        userstories: $templatecache.get(\"search-userstories\"),\n        wikipages: $templatecache.get(\"search-wikipages\")\n      };\n      renderTableContent = function(section) {\n        var element, oldElements, oldScope, scope, template;\n        oldElements = $el.find(\".search-result-table\").children();\n        oldScope = oldElements.scope();\n        if (oldScope) {\n          oldScope.$destroy();\n          oldElements.remove();\n        }\n        scope = $scope.$new();\n        scope[section.name] = section.value;\n        template = angular.element.parseHTML(trim(templates[section.name]));\n        element = $compile(template)(scope);\n        return $el.find(\".search-result-table\").html(element);\n      };\n      $scope.$watch(\"searchResults\", function(data) {\n        var activeSection;\n        currentSearchResults = data;\n        if (!currentSearchResults) {\n          return;\n        }\n        activeSection = getActiveSection(data);\n        renderFilterTabs(data);\n        renderTableContent(activeSection);\n        return markSectionTabActive(activeSection);\n      });\n      $scope.$watch(\"searchTerm\", function(searchTerm) {\n        if (searchTerm !== void 0) {\n          $location.search(\"text\", searchTerm);\n        }\n        return $analytics.trackPage($location.url(), \"Search\");\n      });\n      return $el.on(\"click\", \".search-filter li > a\", function(event) {\n        var section, sectionData, sectionName, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        sectionName = target.parent().data(\"name\");\n        sectionData = !currentSearchResults ? [] : currentSearchResults[sectionName];\n        section = {\n          name: sectionName,\n          value: sectionData\n        };\n        return $scope.$apply(function() {\n          renderTableContent(section);\n          return markSectionTabActive(section);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, searchText;\n      $ctrl = $el.controller();\n      linkTable($scope, $el, $attrs, $ctrl);\n      searchText = $routeparams.text;\n      return $scope.$watch(\"projectId\", function(projectId) {\n        if (projectId != null) {\n          return $scope.searchTerm = searchText;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\", SearchDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTaskboard\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTasks\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTeam\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserSettings\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserStories\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaWiki\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnalyticsService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  AnalyticsService = (function(superClass) {\n    extend(AnalyticsService, superClass);\n\n    AnalyticsService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function AnalyticsService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"analytics\", {});\n      this.accountId = conf.accountId;\n      this.pageEvent = conf.pageEvent || \"$routeChangeSuccess\";\n      this.trackRoutes = conf.trackRoutes || true;\n      this.ignoreFirstPageLoad = conf.ignoreFirstPageLoad || false;\n    }\n\n    AnalyticsService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Analytics: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectAnalytics();\n      this.win.ga(\"create\", this.accountId, \"auto\");\n      this.win.ga(\"require\", \"ec\");\n      this.win.ga(\"require\", \"displayfeatures\");\n      if (this.trackRoutes && (!this.ignoreFirstPageLoad)) {\n        this.win.ga(\"send\", \"pageview\", this.getUrl());\n      }\n      if (this.trackRoutes) {\n        this.rootscope.$on(this.pageEvent, (function(_this) {\n          return function() {\n            return _this.trackPage(_this.getUrl(), \"Taiga\");\n          };\n        })(this));\n      }\n      this.initialized = true;\n      return this.setUserId();\n    };\n\n    AnalyticsService.prototype.setUserId = function() {\n      var ref, ref1;\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga('set', 'userId', (ref = this.rootscope) != null ? (ref1 = ref.user) != null ? ref1.uuid : void 0 : void 0);\n    };\n\n    AnalyticsService.prototype.getUrl = function() {\n      return this.location.path();\n    };\n\n    AnalyticsService.prototype.injectAnalytics = function() {\n      var fn;\n      fn = (function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);});\n      return fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\");\n    };\n\n    AnalyticsService.prototype.trackPage = function(url, title) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      title = title || this.doc[0].title;\n      return this.win.ga(\"send\", \"pageview\", {\n        \"page\": url,\n        \"title\": title\n      });\n    };\n\n    AnalyticsService.prototype.trackEvent = function(category, action, label, value) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga(\"send\", \"event\", category, action, label, value);\n    };\n\n    AnalyticsService.prototype.ecViewPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'detail');\n      return this.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecClickPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'click');\n      return this.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecListPlans = function(arg, page) {\n      var i, len, plan, plans, position;\n      plans = arg[0];\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      position = 1;\n      for (i = 0, len = plans.length; i < len; i++) {\n        plan = plans[i];\n        this.win.ga('ec:addImpression', {\n          'id': plan.plan_id,\n          'name': plan.name,\n          'list': page,\n          'position': position\n        });\n        position++;\n      }\n      return this.trackEvent(\"ecommerce\", \"list-plans\");\n    };\n\n    AnalyticsService.prototype.ecAddToCart = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'add');\n      return this.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null);\n    };\n\n    AnalyticsService.prototype.ecConfirmChange = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 1\n      });\n      return this.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1);\n    };\n\n    AnalyticsService.prototype.ecPurchase = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 2\n      });\n      this.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2);\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'purchase', {\n        'id': plan_id,\n        'revenue': plan_price\n      });\n      return this.trackEvent('ecommerce', 'checkout', 'Plan checkout', null);\n    };\n\n    return AnalyticsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAnalytics\", AnalyticsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindScope, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  BindScope = function(config) {\n    var link;\n    if (!config.debugInfo) {\n      jQuery.fn.scope = function() {\n        return this.data('scope');\n      };\n    }\n    link = function($scope, $el) {\n      if (!config.debugInfo) {\n        return $el.data('scope', $scope).addClass('tg-scope');\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBindScope\", [\"$tgConfig\", BindScope]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CompileHtmlDirective;\n\n  CompileHtmlDirective = function($compile) {\n    var link;\n    link = function(scope, element, attrs) {\n      return scope.$watch(attrs.tgCompileHtml, function(newValue, oldValue) {\n        element.html(newValue);\n        return $compile(element.contents())(scope);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CompileHtmlDirective.$inject = [\"$compile\"];\n\n  angular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockButtonDirective, CreatedByDisplayDirective, DateRangeDirective, DateSelectorDirective, DeleteButtonDirective, ListItemAssignedtoDirective, ListItemEpicStatusDirective, ListItemIssueStatusDirective, ListItemPriorityDirective, ListItemSeverityDirective, ListItemTaskStatusDirective, ListItemTypeDirective, ListItemUsStatusDirective, SprintProgressBarDirective, TgMainTitleDirective, TgProgressBarDirective, UserDisplayDirective, bindOnce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  DateRangeDirective = function($translate) {\n    var link, renderRange;\n    renderRange = function($el, first, second) {\n      var endDate, prettyDate, startDate;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      startDate = moment(first).format(prettyDate);\n      endDate = moment(second).format(prettyDate);\n      return $el.html($translate.instant(\"TASKBOARD.TITLE_DATE_RANGE\", {\n        startDate: startDate,\n        endDate: endDate\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var first, ref, second;\n      ref = $attrs.tgDateRange.split(\",\"), first = ref[0], second = ref[1];\n      return bindOnce($scope, first, function(valFirst) {\n        return bindOnce($scope, second, function(valSecond) {\n          return renderRange($el, valFirst, valSecond);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective]);\n\n  DateSelectorDirective = function($rootscope, datePickerConfigService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var initialize, selectedDate, unbind;\n      selectedDate = null;\n      initialize = function() {\n        var datePickerConfig;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: $el[0]\n        });\n        return $el.picker = new Pikaday(datePickerConfig);\n      };\n      unbind = $rootscope.$on(\"$translateChangeEnd\", (function(_this) {\n        return function(ctx) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          return initialize();\n        };\n      })(this));\n      $attrs.$observe(\"pickerValue\", function(val) {\n        $el.val(val);\n        if (val != null) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          initialize();\n        }\n        return $el.picker.setDate(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        unbind();\n        return $el.picker.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective]);\n\n  SprintProgressBarDirective = function() {\n    var link, renderProgress;\n    renderProgress = function($el, percentage, visual_percentage) {\n      if ($el.hasClass(\".current-progress\")) {\n        return $el.css(\"width\", percentage + \"%\");\n      } else {\n        $el.find(\".current-progress\").css(\"width\", visual_percentage + \"%\");\n        return $el.find(\".number\").html(percentage + \" %\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.tgSprintProgressbar, function(sprint) {\n        var closedPoints, percentage, totalPoints, visual_percentage;\n        closedPoints = sprint.closed_points;\n        totalPoints = sprint.total_points;\n        percentage = 0;\n        if (totalPoints !== 0) {\n          percentage = Math.round(100 * (closedPoints / totalPoints));\n        }\n        visual_percentage = 0;\n        if (totalPoints !== 0) {\n          visual_percentage = Math.round(98 * (closedPoints / totalPoints));\n        }\n        return renderProgress($el, percentage, visual_percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintProgressbar\", SprintProgressBarDirective);\n\n  CreatedByDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.ngModel, function(model) {\n        var avatar, ref;\n        if (model != null) {\n          avatar = avatarService.getAvatar(model.owner_extra_info);\n          $scope.owner = model.owner_extra_info || {\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n          };\n          $scope.owner.avatar = avatar.url;\n          $scope.owner.bg = avatar.bg;\n          $scope.url = ((ref = $scope.owner) != null ? ref.is_active : void 0) ? $navUrls.resolve(\"user-profile\", {\n            username: $scope.owner.username\n          }) : \"\";\n          return $scope.date = moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"));\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      scope: true,\n      templateUrl: \"common/components/created-by.html\"\n    };\n  };\n\n  module.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", CreatedByDisplayDirective]);\n\n  UserDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var avatar, id;\n      id = $attrs.tgUserId;\n      $scope.user = $scope.usersById[id] || {\n        full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n      };\n      avatar = avatarService.getAvatar($scope.usersById[id] || null);\n      $scope.user.avatar = avatar.url;\n      $scope.user.bg = avatar.bg;\n      $scope.url = $scope.user.is_active ? $navUrls.resolve(\"user-profile\", {\n        username: $scope.user.username\n      }) : \"\";\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      scope: true,\n      templateUrl: \"common/components/user-display.html\"\n    };\n  };\n\n  module.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", UserDisplayDirective]);\n\n  BlockButtonDirective = function($rootscope, $loading, $template) {\n    var link, template;\n    template = $template.get(\"common/components/block-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        $scope.item = item;\n        if (isEditable()) {\n          return $el.find('.button-lock').addClass('editable');\n        }\n      });\n      $el.on(\"click\", \".item-block\", function(event) {\n        event.preventDefault();\n        return $rootscope.$broadcast(\"block\", $model.$modelValue);\n      });\n      $el.on(\"click\", \".item-unblock\", function(event) {\n        var currentLoading, finish;\n        event.preventDefault();\n        currentLoading = $loading().target($el.find(\".item-unblock\")).start();\n        finish = function() {\n          return currentLoading.finish();\n        };\n        return $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective]);\n\n  DeleteButtonDirective = function($log, $repo, $confirm, $location, $template) {\n    var link, template;\n    template = $template.get(\"common/components/delete-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.onDeleteGoToUrl) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-go-to-url set in scope.\");\n      }\n      if (!$attrs.onDeleteTitle) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-title set in scope.\");\n      }\n      $el.on(\"click\", \".button-delete\", function(event) {\n        var subtitle, title;\n        title = $attrs.onDeleteTitle;\n        subtitle = $model.$modelValue.subject;\n        return $confirm.askOnDelete(title, subtitle).then((function(_this) {\n          return function(askResponse) {\n            var promise;\n            promise = $repo.remove($model.$modelValue);\n            promise.then(function() {\n              var url;\n              askResponse.finish();\n              url = $scope.$eval($attrs.onDeleteGoToUrl);\n              return $location.path(url);\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          };\n        })(this));\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective]);\n\n  ListItemEpicStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var epic;\n      epic = $scope.$eval($attrs.tgListitemEpicStatus);\n      return bindOnce($scope, \"epicStatusById\", function(epicStatusById) {\n        return $el.html(epicStatusById[epic.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective);\n\n  ListItemUsStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var us;\n      us = $scope.$eval($attrs.tgListitemUsStatus);\n      return bindOnce($scope, \"usStatusById\", function(usStatusById) {\n        return $el.html(usStatusById[us.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective);\n\n  ListItemTaskStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var task;\n      task = $scope.$eval($attrs.tgListitemTaskStatus);\n      return bindOnce($scope, \"taskStatusById\", function(taskStatusById) {\n        return $el.html(taskStatusById[task.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective);\n\n  ListItemAssignedtoDirective = function($template, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, \"usersById\", function(usersById) {\n        var avatar, ctx, item, member;\n        item = $scope.$eval($attrs.tgListitemAssignedto);\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = usersById[item.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        return $el.html(template(ctx));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective]);\n\n  ListItemIssueStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var issue;\n      issue = $scope.$eval($attrs.tgListitemIssueStatus);\n      return bindOnce($scope, \"issueStatusById\", function(issueStatusById) {\n        return $el.html(issueStatusById[issue.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective);\n\n  ListItemTypeDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issueTypeById, issue) {\n        var domNode, type;\n        type = issueTypeById[issue.type];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", type.color);\n        return domNode.attr(\"title\", type.name);\n      };\n      bindOnce($scope, \"issueTypeById\", function(issueTypeById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemType);\n        return render(issueTypeById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemType, function(issue) {\n        return render($scope.issueTypeById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemType\", ListItemTypeDirective);\n\n  ListItemPriorityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(priorityById, issue) {\n        var domNode, priority;\n        priority = priorityById[issue.priority];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", priority.color);\n        return domNode.attr(\"title\", priority.name);\n      };\n      bindOnce($scope, \"priorityById\", function(priorityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemPriority);\n        return render(priorityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemPriority, function(issue) {\n        return render($scope.priorityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemPriority\", ListItemPriorityDirective);\n\n  ListItemSeverityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(severityById, issue) {\n        var domNode, severity;\n        severity = severityById[issue.severity];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", severity.color);\n        return domNode.attr(\"title\", severity.name);\n      };\n      bindOnce($scope, \"severityById\", function(severityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemSeverity);\n        return render(severityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemSeverity, function(issue) {\n        return render($scope.severityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemSeverity\", ListItemSeverityDirective);\n\n  TgProgressBarDirective = function($template) {\n    var link, render, template;\n    template = $template.get(\"common/components/progress-bar.html\", true);\n    render = function(el, percentage) {\n      return el.html(template({\n        percentage: percentage\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgProgressBar, function(percentage) {\n        percentage = _.max([0, percentage]);\n        percentage = _.min([100, percentage]);\n        return render($el, percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective]);\n\n  TgMainTitleDirective = function($translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $attrs.$observe(\"i18nSectionName\", function(i18nSectionName) {\n        return $scope.sectionName = i18nSectionName;\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/main-title.html\"\n    };\n  };\n\n  module.directive(\"tgMainTitle\", [\"$translate\", TgMainTitleDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfirmService, NOTIFICATION_MSG, bindMethods, cancelTimeout, debounce, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  NOTIFICATION_MSG = {\n    \"success\": {\n      title: \"NOTIFICATION.OK\",\n      message: \"NOTIFICATION.SAVED\"\n    },\n    \"error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    },\n    \"light-error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    }\n  };\n\n  ConfirmService = (function(superClass) {\n    extend(ConfirmService, superClass);\n\n    ConfirmService.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"];\n\n    function ConfirmService(q, lightboxService, loading, translate, filter) {\n      this.q = q;\n      this.lightboxService = lightboxService;\n      this.loading = loading;\n      this.translate = translate;\n      this.filter = filter;\n      bindMethods(this);\n    }\n\n    ConfirmService.prototype.hide = function(el) {\n      if (el) {\n        this.lightboxService.close(el);\n        return el.off(\".confirm-dialog\");\n      }\n    };\n\n    ConfirmService.prototype.ask = function(title, subtitle, message, lightboxSelector) {\n      var defered, el, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-ask\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title || '');\n      el.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      el.find(\".message\").html(message || '');\n      el.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(el);\n        };\n      })(this);\n      this.lightboxService.open(el, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askDelete = function(title, subtitle, message, lightboxSelector) {\n      var defered, lightbox, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-delete\";\n      }\n      defered = this.q.defer();\n      lightbox = angular.element(lightboxSelector);\n      lightbox.find(\".title\").text(title || '');\n      lightbox.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      lightbox.find(\".message\").html(message || '');\n      lightbox.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(lightbox);\n              }\n            }\n          });\n        };\n      })(this)));\n      lightbox.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(lightbox);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(lightbox);\n        };\n      })(this);\n      this.lightboxService.open(lightbox, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askOnDelete = function(title, message, subtitle) {\n      if (subtitle == null) {\n        subtitle = this.translate.instant(\"NOTIFICATION.ASK_DELETE\");\n      }\n      return this.askDelete(title, subtitle, message);\n    };\n\n    ConfirmService.prototype.askChoice = function(title, subtitle, choices, replacement, warning, lightboxSelector) {\n      var choicesField, defered, el;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-ask-choice\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title);\n      el.find(\".subtitle\").text(subtitle);\n      if (replacement) {\n        el.find(\".replacement\").text(replacement);\n      } else {\n        el.find(\".replacement\").remove();\n      }\n      if (warning) {\n        el.find(\".warning\").text(warning);\n      } else {\n        el.find(\".warning\").remove();\n      }\n      choicesField = el.find(\".choices\");\n      choicesField.html('');\n      _.each(choices, function(value, key) {\n        value = _.escape(value);\n        return choicesField.append(angular.element(\"<option value='\" + key + \"'>\" + value + \"</option>\"));\n      });\n      el.on(\"click.confirm-dialog\", \".js-confirm-ask\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            selected: choicesField.val(),\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel-ask\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.error = function(message) {\n      var defered, el;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-error\");\n      el.find(\".title\").html(message);\n      el.on(\"click.confirm-dialog\", \".button-green\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.success = function(title, message, icon, action) {\n      var defered, detailImage, el, svgContainer, useSVG;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-success\");\n      el.find(\"img\").remove();\n      el.find(\"svg\").remove();\n      if (icon) {\n        if (icon.type === \"img\") {\n          detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name);\n        } else if (icon.type === \"svg\") {\n          detailImage = document.createElement(\"div\");\n          taiga.addClass(detailImage, \"icon\");\n          taiga.addClass(detailImage, icon.name);\n          taiga.addClass(detailImage, \"lb-icon\");\n          svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n          useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n          useSVG.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + icon.name);\n          detailImage.appendChild(svgContainer).appendChild(useSVG);\n        }\n        if (detailImage) {\n          el.find('section').prepend(detailImage);\n        }\n      }\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (action) {\n        el.find(\".js-confirm\").html(action);\n        el.find(\".js-confirm\").attr('title', action);\n      }\n      el.on(\"click.confirm-dialog\", \".js-confirm\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.loader = function(title, message, spin) {\n      var el;\n      if (spin == null) {\n        spin = false;\n      }\n      el = angular.element(\".lightbox-generic-loading\");\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (spin) {\n        el.find(\".spin\").removeClass(\"hidden\");\n      }\n      return {\n        start: (function(_this) {\n          return function() {\n            return _this.lightboxService.open(el);\n          };\n        })(this),\n        stop: (function(_this) {\n          return function() {\n            return _this.lightboxService.close(el);\n          };\n        })(this),\n        update: (function(_this) {\n          return function(status, title, message, percent) {\n            if (title) {\n              el.find(\".title\").html(title);\n            }\n            if (message) {\n              el.find(\".message\").html(message);\n            }\n            if (percent) {\n              el.find(\".spin\").addClass(\"hidden\");\n              el.find(\".progress-bar-wrapper\").removeClass(\"hidden\");\n              el.find(\".progress-bar-wrapper > .bar\").width(percent + '%');\n              return el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%');\n            } else {\n              el.find(\".spin\").removeClass(\"hidden\");\n              return el.find(\".progress-bar-wrapper\").addClass(\"hidden\");\n            }\n          };\n        })(this)\n      };\n    };\n\n    ConfirmService.prototype.notify = function(type, message, title, time) {\n      var body, el, selector;\n      selector = \".notification-message-\" + type;\n      el = angular.element(selector);\n      if (el.hasClass(\"active\")) {\n        return;\n      }\n      if (title) {\n        el.find(\"h4\").html(title);\n      } else {\n        el.find(\"h4\").html(this.translate.instant(NOTIFICATION_MSG[type].title));\n      }\n      if (message) {\n        el.find(\"p\").html(message);\n      } else {\n        el.find(\"p\").html(this.translate.instant(NOTIFICATION_MSG[type].message));\n      }\n      body = angular.element(\"body\");\n      body.find(\".notification-message .notification-light\").removeClass('active').addClass('inactive');\n      body.find(selector).removeClass('inactive').addClass('active');\n      if (this.tsem) {\n        cancelTimeout(this.tsem);\n      }\n      if (!time) {\n        time = type === 'error' || type === 'light-error' ? 3500 : 1500;\n      }\n      this.tsem = timeout(time, (function(_this) {\n        return function() {\n          body.find(selector).removeClass('active').addClass('inactive').one('animationend', function() {\n            return $(this).removeClass('inactive');\n          });\n          return delete _this.tsem;\n        };\n      })(this));\n      return el.on(\"click\", \".icon-close, .close\", (function(_this) {\n        return function(event) {\n          return body.find(selector).removeClass('active').addClass('inactive');\n        };\n      })(this));\n    };\n\n    return ConfirmService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaCommon\");\n\n  module.service(\"$tgConfirm\", ConfirmService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, CustomAttributeValueDirective, CustomAttributesValuesController, CustomAttributesValuesDirective, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, RICHTEXT_TYPE, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindMethods, bindOnce, debounce, generateHash, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = this.taiga.bindMethods;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  generateHash = taiga.generateHash;\n\n  module = angular.module(\"taigaCommon\");\n\n  TEXT_TYPE = \"text\";\n\n  RICHTEXT_TYPE = \"url\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  CustomAttributesValuesController = (function(superClass) {\n    extend(CustomAttributesValuesController, superClass);\n\n    CustomAttributesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"];\n\n    function CustomAttributesValuesController(scope1, rootscope, repo, rs, confirm, q) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.q = q;\n      bindMethods(this);\n      this.type = null;\n      this.objectId = null;\n      this.projectId = null;\n      this.customAttributes = [];\n      this.customAttributesValues = null;\n    }\n\n    CustomAttributesValuesController.prototype.initialize = function(type, objectId) {\n      this.project = this.scope.project;\n      this.type = type;\n      this.objectId = objectId;\n      return this.projectId = this.scope.projectId;\n    };\n\n    CustomAttributesValuesController.prototype.loadCustomAttributesValues = function() {\n      if (!this.objectId) {\n        return this.customAttributesValues;\n      }\n      return this.rs.customAttributesValues[this.type].get(this.objectId).then((function(_this) {\n        return function(customAttributesValues) {\n          _this.customAttributes = _this.project[_this.type + \"_custom_attributes\"];\n          _this.customAttributesValues = customAttributesValues;\n          return customAttributesValues;\n        };\n      })(this));\n    };\n\n    CustomAttributesValuesController.prototype.getAttributeValue = function(attribute) {\n      var attributeValue;\n      attributeValue = _.clone(attribute, false);\n      attributeValue.value = this.customAttributesValues.attributes_values[attribute.id];\n      return attributeValue;\n    };\n\n    CustomAttributesValuesController.prototype.updateAttributeValue = function(attributeValue) {\n      var attributesValues, onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"custom-attributes-values:edit\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          _this.confirm.notify(\"error\");\n          return _this.q.reject();\n        };\n      })(this);\n      attributesValues = _.clone(this.customAttributesValues.attributes_values, true);\n      attributesValues[attributeValue.id] = attributeValue.value;\n      this.customAttributesValues.attributes_values = attributesValues;\n      this.customAttributesValues.id = this.objectId;\n      return this.repo.save(this.customAttributesValues).then(onSuccess, onError);\n    };\n\n    return CustomAttributesValuesController;\n\n  })(taiga.Controller);\n\n  CustomAttributesValuesDirective = function($templates, $storage) {\n    var collapsedHash, link, template, templateFn;\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true);\n    collapsedHash = function(type) {\n      return generateHash([\"custom-attributes-collapsed\", type]);\n    };\n    link = function($scope, $el, $attrs, $ctrls) {\n      var $ctrl, $model, hash;\n      $ctrl = $ctrls[0];\n      $model = $ctrls[1];\n      hash = collapsedHash($attrs.type);\n      $scope.collapsed = $storage.get(hash) || false;\n      bindOnce($scope, $attrs.ngModel, function(value) {\n        $ctrl.initialize($attrs.type, value.id);\n        return $ctrl.loadCustomAttributesValues();\n      });\n      $scope.toggleCollapse = function() {\n        $scope.collapsed = !$scope.collapsed;\n        return $storage.set(hash, $scope.collapsed);\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        requiredEditionPerm: $attrs.requiredEditionPerm\n      });\n    };\n    return {\n      require: [\"tgCustomAttributesValues\", \"ngModel\"],\n      controller: CustomAttributesValuesController,\n      controllerAs: \"ctrl\",\n      restrict: \"AE\",\n      scope: true,\n      link: link,\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\", CustomAttributesValuesDirective]);\n\n  CustomAttributeValueDirective = function($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) {\n    var link, template, templateEdit;\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true);\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true);\n    link = function($scope, $el, $attrs, $ctrl) {\n      var attributeValue, isEditable, prettyDate, render, setFocusAndSelectOnInputField, submit;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      render = function(attributeValue, edit) {\n        var ctx, datePickerConfig, editable, html, scope, value;\n        if (edit == null) {\n          edit = false;\n        }\n        if (attributeValue.type === DATE_TYPE && attributeValue.value) {\n          value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate);\n        }\n        if (attributeValue.type === NUMBER_TYPE && attributeValue.value) {\n          value = parseFloat(attributeValue.value);\n        } else {\n          value = attributeValue.value;\n        }\n        editable = isEditable();\n        ctx = {\n          id: attributeValue.id,\n          name: attributeValue.name,\n          description: attributeValue.description,\n          value: value,\n          type: attributeValue.type,\n          isEditable: editable\n        };\n        scope = $scope.$new();\n        scope.attributeHtml = wysiwygService.getHTML(\"\" + value);\n        scope.extra = attributeValue.extra;\n        scope.model = value;\n        scope.project = $scope.project;\n        if (editable && (edit || !value)) {\n          html = templateEdit(ctx);\n          html = $compile(html)(scope);\n          $el.html(html);\n          if (attributeValue.type === DATE_TYPE) {\n            datePickerConfig = datePickerConfigService.get();\n            _.merge(datePickerConfig, {\n              field: $el.find(\"input[name=value]\")[0],\n              onSelect: (function(_this) {\n                return function(date) {\n                  var selectedDate;\n                  return selectedDate = date;\n                };\n              })(this),\n              onOpen: (function(_this) {\n                return function() {\n                  if (typeof selectedDate !== \"undefined\" && selectedDate !== null) {\n                    return $el.picker.setDate(selectedDate);\n                  }\n                };\n              })(this)\n            });\n            return $el.picker = new Pikaday(datePickerConfig);\n          }\n        } else {\n          html = template(ctx);\n          html = $compile(html)(scope);\n          return $el.html(html);\n        }\n      };\n      isEditable = function() {\n        var permissions, requiredEditionPerm;\n        permissions = $scope.project.my_permissions;\n        requiredEditionPerm = $attrs.requiredEditionPerm;\n        return permissions.indexOf(requiredEditionPerm) > -1;\n      };\n      $scope.saveCustomRichText = (function(_this) {\n        return function(markdown, callback) {\n          attributeValue.value = markdown;\n          return $ctrl.updateAttributeValue(attributeValue).then(function() {\n            callback();\n            return render(attributeValue, false);\n          });\n        };\n      })(this);\n      $scope.cancelCustomRichText = (function(_this) {\n        return function() {\n          render(attributeValue, false);\n          return null;\n        };\n      })(this);\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, formControl;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          if (attributeValue.type === DROPDOWN_TYPE) {\n            formControl = $el.find(\"select[name='value']\");\n            attributeValue.value = formControl.val();\n          } else if (attributeValue.type === CHECKBOX_TYPE) {\n            formControl = $el.find(\"input[name=value]\");\n            attributeValue.value = formControl[0].checked;\n          } else {\n            formControl = $el.find(\"input[name=value], textarea[name='value']\");\n            attributeValue.value = formControl.val();\n            if (attributeValue.type === DATE_TYPE && moment(attributeValue.value, prettyDate).isValid()) {\n              attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\");\n            }\n            if (attributeValue.type === NUMBER_TYPE) {\n              attributeValue.value = parseFloat(attributeValue.value);\n            }\n          }\n          return $scope.$apply(function() {\n            return $ctrl.updateAttributeValue(attributeValue).then(function() {\n              return render(attributeValue, false);\n            });\n          });\n        };\n      })(this));\n      setFocusAndSelectOnInputField = function() {\n        return $el.find(\"input[name='value'], textarea[name='value']\").focus().select();\n      };\n      attributeValue = $scope.$eval($attrs.tgCustomAttributeValue);\n      if (attributeValue.value === null || attributeValue.value === void 0) {\n        attributeValue.value = \"\";\n      }\n      $scope.customAttributeValue = attributeValue;\n      render(attributeValue);\n      $el.on(\"click\", \".js-value-view-mode span a\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".js-value-view-mode\", function() {\n        if (!isEditable()) {\n          return;\n        }\n        if ($selectedText.get().length) {\n          return;\n        }\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"click\", \".js-edit-description\", function(event) {\n        event.preventDefault();\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"keyup\", \"input[name=value], textarea[name='value']\", function(event) {\n        if (event.keyCode === 13 && event.currentTarget.type !== \"textarea\") {\n          return submit(event);\n        } else if (event.keyCode === 27) {\n          return render(attributeValue, false);\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".js-save-description\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"^tgCustomAttributesValues\",\n      restrict: \"AE\"\n    };\n  };\n\n  module.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\", \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EmojisService, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  EmojisService = (function(superClass) {\n    extend(EmojisService, superClass);\n\n    EmojisService.$inject = [];\n\n    function EmojisService() {\n      this.replaceEmojiNameByHtmlImgs = bind(this.replaceEmojiNameByHtmlImgs, this);\n      this.replaceEmojiNameByImgs = bind(this.replaceEmojiNameByImgs, this);\n      this.replaceImgsByEmojiName = bind(this.replaceImgsByEmojiName, this);\n      this.getEmojiByName = bind(this.getEmojiByName, this);\n      this.getEmojiById = bind(this.getEmojiById, this);\n      this.searchByName = bind(this.searchByName, this);\n      this.emojis = _.map(taiga.emojis, function(it) {\n        it.image = (\"/\" + window._version + \"/emojis/\") + it.image;\n        return it;\n      });\n      this.emojisById = _.keyBy(this.emojis, 'id');\n      this.emojisByName = _.keyBy(this.emojis, 'name');\n    }\n\n    EmojisService.prototype.searchByName = function(name) {\n      return _.filter(this.emojis, function(it) {\n        return it.name.indexOf(name) !== -1;\n      });\n    };\n\n    EmojisService.prototype.getEmojiById = function(id) {\n      return this.emojisById[id];\n    };\n\n    EmojisService.prototype.getEmojiByName = function(name) {\n      return this.emojisByName[name];\n    };\n\n    EmojisService.prototype.replaceImgsByEmojiName = function(html) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g');\n        emoji = this.getEmojiById(emojiId);\n        html = html.replace(regexImgs, ':' + emoji.name + ':');\n      }\n      return html;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + emojiId + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '![alt](' + emoji.image + ')');\n        }\n      }\n      return text;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByHtmlImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />');\n        }\n      }\n      return text;\n    };\n\n    return EmojisService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgEmojis\", EmojisService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EstimationsService, LbUsEstimationDirective, UsEstimationDirective, groupBy, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaCommon\");\n\n  LbUsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.$watch($attrs.ngModel, function(us) {\n        var estimationProcess;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return $scope.$apply(function() {\n              return $model.$setViewValue(us);\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: false\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", LbUsEstimationDirective]);\n\n  UsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var save;\n      save = function(points) {\n        var onError, transform;\n        transform = $modelTransform.save((function(_this) {\n          return function(us) {\n            us.points = points;\n            return us;\n          };\n        })(this));\n        onError = (function(_this) {\n          return function() {\n            return $confirm.notify(\"error\");\n          };\n        })(this);\n        return transform.then(null, onError);\n      };\n      $scope.$watchCollection(function() {\n        return $model.$modelValue && $model.$modelValue.points;\n      }, function() {\n        var estimationProcess, us;\n        us = $model.$modelValue;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            estimationProcess.loading = roleId;\n            estimationProcess.render();\n            return save(points).then(function() {\n              estimationProcess.loading = false;\n              $rootScope.$broadcast(\"object:updated\");\n              return estimationProcess.render();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: estimationProcess.loading\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\", \"$tgConfirm\", UsEstimationDirective]);\n\n  EstimationsService = function($template, $repo, $confirm, $q, $qqueue) {\n    var EstimationProcess, create, pointsTemplate;\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true);\n    EstimationProcess = (function() {\n      function EstimationProcess($el1, us1, project1) {\n        this.$el = $el1;\n        this.us = us1;\n        this.project = project1;\n        this.bindClickEvents = bind(this.bindClickEvents, this);\n        this.isEditable = this.project.my_permissions.indexOf(\"modify_us\") !== -1;\n        this.roles = this.project.roles;\n        this.points = this.project.points;\n        this.loading = false;\n        this.pointsById = groupBy(this.points, function(x) {\n          return x.id;\n        });\n        this.onSelectedPointForRole = function(roleId, pointId) {};\n        this.render = function() {};\n      }\n\n      EstimationProcess.prototype.save = function(roleId, pointId) {\n        var deferred;\n        deferred = $q.defer();\n        $qqueue.add((function(_this) {\n          return function() {\n            var onError, onSuccess;\n            onSuccess = function() {\n              deferred.resolve();\n              return _this.render();\n            };\n            onError = function() {\n              $confirm.notify(\"error\");\n              _this.us.revert();\n              _this.render();\n              return deferred.reject();\n            };\n            return $repo.save(_this.us).then(onSuccess, onError);\n          };\n        })(this));\n        return deferred.promise;\n      };\n\n      EstimationProcess.prototype.calculateTotalPoints = function() {\n        var notNullValues, values;\n        values = _.map(this.us.points, (function(_this) {\n          return function(v, k) {\n            var ref;\n            return (ref = _this.pointsById[v]) != null ? ref.value : void 0;\n          };\n        })(this));\n        if (values.length === 0) {\n          return \"?\";\n        }\n        notNullValues = _.filter(values, function(v) {\n          return v != null;\n        });\n        if (notNullValues.length === 0) {\n          return \"?\";\n        }\n        return _.reduce(notNullValues, function(acc, num) {\n          return acc + num;\n        });\n      };\n\n      EstimationProcess.prototype.calculateRoles = function() {\n        var computableRoles, roles;\n        computableRoles = _.filter(this.project.roles, \"computable\");\n        roles = _.map(computableRoles, (function(_this) {\n          return function(role) {\n            var pointId, pointObj;\n            pointId = _this.us.points[role.id];\n            pointObj = _this.pointsById[pointId];\n            role = _.clone(role, true);\n            role.points = (pointObj != null) && (pointObj.name != null) ? pointObj.name : \"?\";\n            return role;\n          };\n        })(this));\n        return roles;\n      };\n\n      EstimationProcess.prototype.bindClickEvents = function() {\n        this.$el.on(\"click\", \".total.clickable\", (function(_this) {\n          return function(event) {\n            var roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            _this.renderPointsSelector(roleId, target);\n            target.siblings().removeClass('active');\n            return target.addClass('active');\n          };\n        })(this));\n        return this.$el.on(\"click\", \".point\", (function(_this) {\n          return function(event) {\n            var pointId, points, roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            pointId = target.data(\"point-id\");\n            _this.$el.find(\".popover\").popover().close();\n            points = _.clone(_this.us.points, true);\n            points[roleId] = pointId;\n            return _this.onSelectedPointForRole(roleId, pointId, points);\n          };\n        })(this));\n      };\n\n      EstimationProcess.prototype.renderPointsSelector = function(roleId, target) {\n        var horizontalList, html, maxPointLength, points, pop;\n        points = _.map(this.points, (function(_this) {\n          return function(point) {\n            point = _.clone(point, true);\n            point.selected = _this.us.points[roleId] === point.id ? false : true;\n            return point;\n          };\n        })(this));\n        maxPointLength = 5;\n        horizontalList = _.some(points, (function(_this) {\n          return function(point) {\n            return point.name.length > maxPointLength;\n          };\n        })(this));\n        html = pointsTemplate({\n          \"points\": points,\n          roleId: roleId,\n          horizontal: horizontalList\n        });\n        this.$el.find(\".popover\").popover().close();\n        this.$el.find(\".pop-points-open\").remove();\n        if (target != null) {\n          this.$el.find(target).append(html);\n        } else {\n          this.$el.append(html);\n        }\n        this.$el.find(\".pop-points-open\").popover().open(function() {\n          return $(this).removeClass(\"active\").closest(\"li\").removeClass(\"active\");\n        });\n        this.$el.find(\".pop-points-open\").show();\n        pop = this.$el.find(\".pop-points-open\");\n        if (pop.offset().top + pop.height() > document.body.clientHeight) {\n          return pop.addClass('pop-bottom');\n        }\n      };\n\n      return EstimationProcess;\n\n    })();\n    create = function($el, us, project) {\n      var estimationProcess;\n      $el.unbind(\"click\");\n      estimationProcess = new EstimationProcess($el, us, project);\n      if (estimationProcess.isEditable) {\n        estimationProcess.bindClickEvents();\n      }\n      return estimationProcess;\n    };\n    return {\n      create: create\n    };\n  };\n\n  module.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\", \"$q\", \"$tgQqueue\", EstimationsService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var byRefFilter, darkerFilter, defaultFilter, emojify, inArray, markdownToHTML, module, momentFormat, momentFromNow, sizeFormat, taiga, textToHTML, toMutableFilter, unslugify, yesNoFilter;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  defaultFilter = function() {\n    return function(value, defaultValue) {\n      if (value === [null, void 0]) {\n        return defaultValue;\n      }\n      return value;\n    };\n  };\n\n  module.filter(\"default\", defaultFilter);\n\n  yesNoFilter = function($translate) {\n    return function(value) {\n      if (value) {\n        return $translate.instant(\"COMMON.YES\");\n      }\n      return $translate.instant(\"COMMON.NO\");\n    };\n  };\n\n  module.filter(\"yesNo\", [\"$translate\", yesNoFilter]);\n\n  unslugify = function() {\n    return taiga.unslugify;\n  };\n\n  module.filter(\"unslugify\", unslugify);\n\n  momentFormat = function() {\n    return function(input, format) {\n      if (input) {\n        return moment(input).format(format);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFormat\", momentFormat);\n\n  momentFromNow = function() {\n    return function(input, without_suffix) {\n      if (input) {\n        return moment(input).fromNow(without_suffix || false);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFromNow\", momentFromNow);\n\n  sizeFormat = (function(_this) {\n    return function() {\n      return _this.taiga.sizeFormat;\n    };\n  })(this);\n\n  module.filter(\"sizeFormat\", sizeFormat);\n\n  toMutableFilter = function() {\n    var memoizedMutable, toMutable;\n    toMutable = function(js) {\n      return js.toJS();\n    };\n    memoizedMutable = _.memoize(toMutable);\n    return function(input) {\n      if (input instanceof Immutable.List) {\n        return memoizedMutable(input);\n      }\n      return input;\n    };\n  };\n\n  module.filter(\"toMutable\", toMutableFilter);\n\n  byRefFilter = function($filterFilter) {\n    return function(userstories, filter) {\n      var cleanRef;\n      if (filter != null ? filter.startsWith(\"#\") : void 0) {\n        cleanRef = filter.substr(1);\n        return _.filter(userstories, (function(_this) {\n          return function(us) {\n            return String(us.ref).startsWith(cleanRef);\n          };\n        })(this));\n      }\n      return $filterFilter(userstories, filter);\n    };\n  };\n\n  module.filter(\"byRef\", [\"filterFilter\", byRefFilter]);\n\n  darkerFilter = function() {\n    return function(color, luminosity) {\n      var black, c, i, j, len, newColor, ref, white;\n      if (!color) {\n        return 'transparent';\n      }\n      color = new String(color).replace(/[^0-9a-f]/gi, '');\n      if (color.length < 6) {\n        color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n      }\n      luminosity = luminosity || 0;\n      newColor = \"#\";\n      c = 0;\n      i = 0;\n      black = 0;\n      white = 255;\n      ref = [0, 1, 2];\n      for (j = 0, len = ref.length; j < len; j++) {\n        i = ref[j];\n        c = parseInt(color.substr(i * 2, 2), 16);\n        c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16);\n        newColor += (\"00\" + c).substr(c.length);\n      }\n      return newColor;\n    };\n  };\n\n  module.filter(\"darker\", darkerFilter);\n\n  markdownToHTML = function(wysiwigService) {\n    return function(input) {\n      if (input) {\n        return wysiwigService.getHTML(input);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML]);\n\n  inArray = function($filter) {\n    return function(list, arrayFilter, element) {\n      var filter;\n      if (arrayFilter) {\n        filter = $filter(\"filter\");\n        return filter(list, function(listItem) {\n          return arrayFilter.indexOf(listItem[element]) !== -1;\n        });\n      }\n    };\n  };\n\n  module.filter(\"inArray\", [\"$filter\", inArray]);\n\n  emojify = function($emojis) {\n    return function(input) {\n      if (input) {\n        return $emojis.replaceEmojiNameByHtmlImgs(_.escape(input));\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"emojify\", [\"$tgEmojis\", emojify]);\n\n  textToHTML = function($filter) {\n    return function(input) {\n      if (input) {\n        return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\");\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"textToHTML\", [\"$filter\", textToHTML]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockLightboxDirective, BlockingMessageInputDirective, CreateBulkUserstoriesDirective, CreateEditDirective, LightboxClose, LightboxDirective, LightboxKeyboardNavigationService, LightboxLeaveProjectWarningDirective, LightboxService, RelateToEpicLightboxDirective, SetDueDateDirective, bindOnce, debounce, debounceLeading, groupBy, module, normalizeString, sizeFormat, timeout, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  module = angular.module(\"taigaCommon\");\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  trim = this.taiga.trim;\n\n  normalizeString = this.taiga.normalizeString;\n\n  LightboxService = (function(superClass) {\n    extend(LightboxService, superClass);\n\n    function LightboxService(animationFrame, q, rootScope) {\n      this.animationFrame = animationFrame;\n      this.q = q;\n      this.rootScope = rootScope;\n    }\n\n    LightboxService.prototype.open = function($el, onClose, onEsc, ignoreEsc) {\n      var defered, docEl, lightboxContent;\n      this.onClose = onClose;\n      if (_.isString($el)) {\n        $el = $($el);\n      }\n      defered = this.q.defer();\n      lightboxContent = $el.children().not(\".close\");\n      lightboxContent.hide();\n      this.animationFrame.add(function() {\n        return $el.css('display', 'flex');\n      });\n      this.animationFrame.add(function() {\n        $el.addClass(\"open\");\n        return $el.one(\"transitionend\", (function(_this) {\n          return function() {\n            var firstField;\n            firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first();\n            if (firstField.length) {\n              return firstField.focus();\n            } else if (document.activeElement) {\n              return $(document.activeElement).blur();\n            }\n          };\n        })(this));\n      });\n      this.animationFrame.add((function(_this) {\n        return function() {\n          lightboxContent.show();\n          return defered.resolve();\n        };\n      })(this));\n      if (!ignoreEsc) {\n        docEl = angular.element(document);\n        docEl.on(\"keydown.lightbox\", (function(_this) {\n          return function(e) {\n            var code;\n            code = e.keyCode ? e.keyCode : e.which;\n            if (code === 27) {\n              if (onEsc) {\n                return _this.rootScope.$applyAsync(onEsc);\n              } else {\n                return _this.close($el);\n              }\n            }\n          };\n        })(this));\n      }\n      this.rootScope.$broadcast(\"lightbox:opened\");\n      return defered.promise;\n    };\n\n    LightboxService.prototype.close = function($el) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          var docEl, scope;\n          if (_.isString($el)) {\n            $el = $($el);\n          }\n          docEl = angular.element(document);\n          docEl.off(\".lightbox\");\n          docEl.off(\".keyboard-navigation\");\n          $el.addClass('close-started');\n          _this.animationFrame.add(function() {\n            $el.addClass('close');\n            return $el.one(\"transitionend\", function() {\n              $el.removeAttr('style');\n              $el.removeClass(\"open\").removeClass('close').removeClass('close-started');\n              if (_this.onClose) {\n                _this.rootScope.$apply(_this.onClose);\n              }\n              return resolve();\n            });\n          });\n          if ($el.hasClass(\"remove-on-close\")) {\n            scope = $el.data(\"scope\");\n            if (scope) {\n              scope.$destroy();\n            }\n            $el.remove();\n          }\n          return _this.rootScope.$broadcast(\"lightbox:closed\");\n        };\n      })(this));\n    };\n\n    LightboxService.prototype.getLightboxOpen = function() {\n      return $(\".lightbox.open:not(.close-started)\");\n    };\n\n    LightboxService.prototype.closeAll = function() {\n      var docEl, i, len, lightboxEl, ref, results;\n      docEl = angular.element(document);\n      ref = docEl.find(\".lightbox.open\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        lightboxEl = ref[i];\n        results.push(this.close($(lightboxEl)));\n      }\n      return results;\n    };\n\n    return LightboxService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService]);\n\n  LightboxKeyboardNavigationService = (function(superClass) {\n    extend(LightboxKeyboardNavigationService, superClass);\n\n    function LightboxKeyboardNavigationService() {\n      return LightboxKeyboardNavigationService.__super__.constructor.apply(this, arguments);\n    }\n\n    LightboxKeyboardNavigationService.prototype.stop = function() {\n      var docEl;\n      docEl = angular.element(document);\n      return docEl.off(\".keyboard-navigation\");\n    };\n\n    LightboxKeyboardNavigationService.prototype.dispatch = function($el, code) {\n      var activeElement, next, prev;\n      activeElement = $el.find(\".selected\");\n      if (code === 13) {\n        if ($el.find(\".user-list-single\").length === 1) {\n          return $el.find('.user-list-single:first').trigger(\"click\");\n        } else {\n          return activeElement.trigger(\"click\");\n        }\n      } else if (code === 40) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected');\n        } else {\n          next = activeElement.next('.user-list-single');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return next.addClass('selected');\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:last').addClass('selected');\n        } else {\n          prev = activeElement.prev('.user-list-single:not(\".is-active\")');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return prev.addClass('selected');\n          }\n        }\n      }\n    };\n\n    LightboxKeyboardNavigationService.prototype.init = function($el) {\n      var docEl;\n      this.stop();\n      docEl = angular.element(document);\n      return docEl.on(\"keydown.keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38 || code === 13) {\n            event.preventDefault();\n            return _this.dispatch($el, code);\n          }\n        };\n      })(this));\n    };\n\n    return LightboxKeyboardNavigationService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService);\n\n  LightboxDirective = function(lightboxService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$attrs.$attr.visible) {\n        return $el.on(\"click\", \".close\", function(event) {\n          event.preventDefault();\n          return lightboxService.close($el);\n        });\n      }\n    };\n    return {\n      restrict: \"C\",\n      link: link\n    };\n  };\n\n  module.directive(\"lightbox\", [\"lightboxService\", LightboxDirective]);\n\n  LightboxClose = function() {\n    var link, template;\n    template = \"<a class=\\\"close\\\" ng-click=\\\"onClose()\\\" href=\\\"\\\" title=\\\"{{'COMMON.CLOSE' | translate}}\\\">\\n    <tg-svg svg-icon=\\\"icon-close\\\"></tg-svg>\\n</a>\";\n    link = function(scope, elm, attrs) {};\n    return {\n      scope: {\n        onClose: '&'\n      },\n      link: link,\n      template: template\n    };\n  };\n\n  module.directive(\"tgLightboxClose\", [LightboxClose]);\n\n  BlockLightboxDirective = function($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var block, title, unblock;\n      title = $translate.instant($attrs.title);\n      $el.find(\"h2.title\").text(title);\n      unblock = (function(_this) {\n        return function(finishCallback) {\n          var transform;\n          transform = $modelTransform.save(function(item) {\n            item.is_blocked = false;\n            item.blocked_note = \"\";\n            return item;\n          });\n          transform.then(function() {\n            $confirm.notify(\"success\");\n            $rootscope.$broadcast(\"object:updated\");\n            return finishCallback();\n          });\n          transform.then(null, function() {\n            $confirm.notify(\"error\");\n            return item.revert();\n          });\n          transform[\"finally\"](function() {\n            return finishCallback();\n          });\n          return transform;\n        };\n      })(this);\n      block = function() {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\".js-block-item\")).start();\n        transform = $modelTransform.save(function(item) {\n          item.is_blocked = true;\n          item.blocked_note = $el.find(\".reason\").val();\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          return lightboxService.close($el);\n        });\n      };\n      $scope.$on(\"block\", function() {\n        $el.find(\".reason\").val($model.$modelValue.blocked_note);\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"unblock\", (function(_this) {\n        return function(event, model, finishCallback) {\n          return unblock(finishCallback);\n        };\n      })(this));\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $el.on(\"click\", \".js-block-item\", function(event) {\n        event.preventDefault();\n        return block();\n      });\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-block.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective]);\n\n  BlockingMessageInputDirective = function($log, $template, $compile) {\n    var link, template, templateFn;\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.watch) {\n        return $log.error(\"No watch attribute on tg-blocking-message-input directive\");\n      }\n      return $scope.$watch($attrs.watch, function(value) {\n        if (value === !void 0 && value === true) {\n          return $el.find(\".blocked-note\").removeClass(\"hidden\");\n        } else {\n          return $el.find(\".blocked-note\").addClass(\"hidden\");\n        }\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        ngmodel: $attrs.ngModel\n      });\n    };\n    return {\n      template: templateFn,\n      link: link,\n      require: \"ngModel\",\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective]);\n\n  CreateBulkUserstoriesDirective = function($repo, $rs, $rootscope, lightboxService, $loading, $model, $timeout, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, getCurrentStatus, submit, submitButton;\n      form = null;\n      $scope.displayStatusSelector = false;\n      getCurrentStatus = (function(_this) {\n        return function() {\n          return $scope.currentStatus = $scope.project.us_statuses.filter(function(status) {\n            return status.id === $scope[\"new\"].statusId;\n          }).pop();\n        };\n      })(this);\n      $scope.toggleStatus = function() {\n        return $scope.displayStatusSelector = !$scope.displayStatusSelector;\n      };\n      $scope.displayStatus = function() {\n        return $scope.displayStatusSelector = true;\n      };\n      $scope.hideStatus = function() {\n        $scope.displayStatusSelector = false;\n        return $scope.$apply();\n      };\n      $scope.setStatus = (function(_this) {\n        return function(status) {\n          $scope[\"new\"].statusId = status.id;\n          getCurrentStatus();\n          return $scope.displayStatusSelector = false;\n        };\n      })(this);\n      $scope.$on(\"usform:bulk\", function(ctx, projectId, status, swimlaneId) {\n        if (form) {\n          form.reset();\n        }\n        $scope[\"new\"] = {\n          projectId: projectId,\n          statusId: status,\n          bulk: \"\",\n          swimlaneId: swimlaneId\n        };\n        getCurrentStatus();\n        return lightboxService.open($el);\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise, swimlaneId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley({\n            onlyOneErrorElement: true\n          });\n          if (!form.validate()) {\n            return;\n          }\n          swimlaneId = null;\n          if ($scope.project.is_kanban_activated) {\n            swimlaneId = $scope[\"new\"].swimlane;\n            if (swimlaneId === void 0) {\n              swimlaneId = $scope.project.default_swimlane;\n            }\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userstories.bulkCreate($scope[\"new\"].projectId, $scope[\"new\"].statusId, $scope[\"new\"].bulk, swimlaneId);\n          promise.then(function(result) {\n            result = _.map(result.data, (function(_this) {\n              return function(x) {\n                return $model.make_model('userstories', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"usform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function(response) {\n            var text;\n            currentLoading.finish();\n            form.setErrors(response);\n            if (response.data.status) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response.data.swimlane_id) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response._error_message) {\n              return $confirm.notify(\"error\", response._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".js-submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", (function(_this) {\n        return function(event) {\n          var parentNodes, target;\n          target = angular.element(event.target);\n          parentNodes = _.filter(target.parents(), function(parent) {\n            return parent.className === \"bulk-status-selector-wrapper\";\n          });\n          if (!parentNodes.length) {\n            return $scope.hideStatus();\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkUserstories\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$tgModel\", \"$timeout\", \"$tgConfirm\", \"$translate\", CreateBulkUserstoriesDirective]);\n\n  LightboxLeaveProjectWarningDirective = function(lightboxService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      return lightboxService.open($el);\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective]);\n\n  SetDueDateDirective = function($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var prettyDate, remove, save;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      lightboxService.open($el);\n      if ($scope.object.due_date) {\n        $scope.new_due_date = moment($scope.object.due_date).format(prettyDate);\n      }\n      $el.on(\"click\", \".suggestion\", function(event) {\n        var quantity, target, unit, value;\n        target = angular.element(event.currentTarget);\n        quantity = target.data('quantity');\n        unit = target.data('unit');\n        value = moment().add(quantity, unit).format(prettyDate);\n        return $el.find(\".due-date\").val(value);\n      });\n      save = function() {\n        var currentLoading, new_due_date, transform;\n        currentLoading = $loading().target($el.find(\".submit-button\")).start();\n        if ($scope.notAutoSave) {\n          new_due_date = $('.due-date').val();\n          $scope.object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          $scope.$apply();\n          currentLoading.finish();\n          lightboxService.close($el);\n          return;\n        }\n        transform = $modelTransform.save(function(object) {\n          new_due_date = $('.due-date').val();\n          object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          return object;\n        });\n        transform.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          lightboxService.close($el);\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n      };\n      $el.on(\"click\", \".submit-button\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      remove = function() {\n        var message, subtitle, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\");\n        subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\");\n        message = moment($scope.object.due_date).format(prettyDate);\n        return $confirm.askOnDelete(title, message, subtitle).then(function(askResponse) {\n          askResponse.finish();\n          $('.due-date').val(null);\n          $scope.object.due_date_reason = null;\n          if ($scope.notAutoSave) {\n            $scope.object.due_date = null;\n            return lightboxService.close($el);\n          } else {\n            return save();\n          }\n        });\n      };\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-due-date.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$tgQueueModelTransformation\", SetDueDateDirective]);\n\n  groupBy = this.taiga.groupBy;\n\n  CreateEditDirective = function($log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate, $confirm, $q, attachmentsService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var addExistingToSprint, attachmentsToAdd, attachmentsToDelete, checkClose, close, createAttachments, deleteAttachments, docEl, form, getSchema, isDisabledExisting, mount, objType, render, resetAttachments, saveItem, schema, schemas, setStatus, sprintChangeConfirmAndSave, submit;\n      schema = null;\n      objType = null;\n      form = null;\n      attachmentsToAdd = Immutable.List();\n      attachmentsToDelete = Immutable.List();\n      schemas = {\n        us: {\n          objName: 'User Story',\n          model: 'userstories',\n          params: {\n            include_attachments: true,\n            include_tasks: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'US',\n              translationIDPlural: 'US',\n              statusList: _.sortBy(project.us_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              tags: [],\n              points: {},\n              swimlane: data.project.is_kanban_activated ? data.project.default_swimlane : null,\n              status: data.statusId ? data.statusId : data.project.default_us_status,\n              is_archived: false\n            };\n          }\n        },\n        task: {\n          objName: 'Task',\n          model: 'tasks',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'TASK',\n              translationIDPlural: 'TASKS',\n              statusList: _.sortBy(project.task_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              assigned_to: null,\n              tags: [],\n              milestone: data.sprintId,\n              status: data.project.default_task_status,\n              user_story: data.usId,\n              is_archived: false\n            };\n          }\n        },\n        issue: {\n          objName: 'Issue',\n          model: 'issues',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'ISSUE',\n              translationIDPlural: 'ISSUES',\n              project: project,\n              statusList: _.sortBy(project.issue_statuses, \"order\"),\n              typeById: groupBy(project.issue_types, function(x) {\n                return x.id;\n              }),\n              typeList: _.sortBy(project.issue_types, \"order\"),\n              severityById: groupBy(project.severities, function(x) {\n                return x.id;\n              }),\n              severityList: _.sortBy(project.severities, \"order\"),\n              priorityById: groupBy(project.priorities, function(x) {\n                return x.id;\n              }),\n              priorityList: _.sortBy(project.priorities, \"order\"),\n              milestonesById: groupBy(project.milestones, function(x) {\n                return x.id;\n              })\n            };\n          },\n          initialData: function(data) {\n            return {\n              assigned_to: null,\n              milestone: data.sprintId,\n              priority: data.project.default_priority,\n              project: data.project.id,\n              severity: data.project.default_severity,\n              status: data.project.default_issue_status,\n              subject: \"\",\n              tags: [],\n              type: data.project.default_issue_type\n            };\n          }\n        }\n      };\n      $scope.setMode = function(value) {\n        return $scope.mode = value;\n      };\n      $scope.$on(\"genericform:new\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'new';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      $scope.$on(\"genericform:new-or-existing\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'add-existing';\n        $scope.getOrCreate = true;\n        $scope.existingFilterText = '';\n        $rs[schema.model].listInAllProjects({\n          project: $scope.project.id\n        }, true).then(function(data) {\n          return $scope.existingItems = angular.copy(data);\n        });\n        return mount(params);\n      });\n      $scope.$on(\"genericform:edit\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'edit';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      getSchema = function(params) {\n        _.map(params, function(value, key) {\n          return $scope[key] = value;\n        });\n        if (!$scope.objType || !schemas[$scope.objType]) {\n          return $log.error(\"Invalid objType `\" + $scope.objType + \"` for `genericform` event\");\n        }\n        return schema = schemas[$scope.objType];\n      };\n      mount = function(params) {\n        $scope.objName = schema.objName;\n        if ($scope.mode === 'edit') {\n          $scope.obj = params.obj;\n          $scope.attachments = Immutable.fromJS(params.attachments);\n        } else {\n          $scope.obj = $model.make_model(schema.model, schema.initialData(params));\n          $scope.attachments = Immutable.List();\n        }\n        _.map(schema.data($scope.project), function(value, key) {\n          return $scope[key] = value;\n        });\n        if (form) {\n          form.reset();\n        }\n        resetAttachments();\n        setStatus($scope.obj.status);\n        render();\n        $scope.lightboxOpen = true;\n        return lightboxService.open($el, null, null, true);\n      };\n      resetAttachments = function() {\n        attachmentsToAdd = Immutable.List();\n        return attachmentsToDelete = Immutable.List();\n      };\n      $scope.addAttachment = function(attachment) {\n        return attachmentsToAdd = attachmentsToAdd.push(attachment);\n      };\n      $scope.deleteAttachment = function(attachment) {\n        attachmentsToAdd = attachmentsToAdd.filter(function(it) {\n          return it.get('name') !== attachment.get('name');\n        });\n        if (attachment.get(\"id\")) {\n          return attachmentsToDelete = attachmentsToDelete.push(attachment);\n        }\n      };\n      $scope.addTag = function(tag, color) {\n        var inserted, itemtags, projectTags, tags, value;\n        value = trim(tag.toLowerCase());\n        tags = $scope.project.tags;\n        projectTags = $scope.project.tags_colors;\n        if (tags == null) {\n          tags = [];\n        }\n        if (projectTags == null) {\n          projectTags = {};\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        projectTags[tag] = color || null;\n        $scope.project.tags = tags;\n        itemtags = _.clone($scope.obj.tags);\n        inserted = _.find(itemtags, function(it) {\n          return it[0] === value;\n        });\n        if (!inserted) {\n          itemtags.push([value, color]);\n          return $scope.obj.tags = itemtags;\n        }\n      };\n      $scope.deleteTag = function(tag) {\n        var itemtags, tags, value;\n        value = trim(tag[0].toLowerCase());\n        tags = $scope.project.tags;\n        itemtags = _.clone($scope.obj.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === value;\n        });\n        $scope.obj.tags = itemtags;\n        return _.pull($scope.obj.tags, value);\n      };\n      createAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToAdd.toJS(), function(attachment) {\n          return attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType);\n        });\n        return $q.all(promises);\n      };\n      deleteAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToDelete.toJS(), function(attachment) {\n          return attachmentsService[\"delete\"]($scope.objType, attachment.id);\n        });\n        return $q.all(promises);\n      };\n      addExistingToSprint = function(item) {\n        var currentLoading, onError, onSuccess;\n        currentLoading = $loading().target($el.find(\".add-existing-button\")).start();\n        if (item.milestone) {\n          return sprintChangeConfirmAndSave(item);\n        } else {\n          onSuccess = function() {\n            close();\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            return close();\n          };\n          return saveItem(item, onSuccess, onError);\n        }\n      };\n      sprintChangeConfirmAndSave = function(item) {\n        var message, newSprintName, oldSprintName, title;\n        oldSprintName = $scope.milestonesById[item.milestone].name;\n        newSprintName = $scope.milestonesById[$scope.relatedObjectId].name;\n        title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\");\n        message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\", {\n          issue: item.subject,\n          oldSprintName: oldSprintName,\n          newSprintName: newSprintName\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            askResponse.finish();\n            lightboxService.closeAll();\n            $scope.lightboxOpen = false;\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          return saveItem(item, onSuccess, onError);\n        });\n      };\n      saveItem = function(item, onSuccess, onError) {\n        item.setAttr($scope.relatedField, $scope.relatedObjectId);\n        return $repo.save(item, true).then(onSuccess, onError);\n      };\n      isDisabledExisting = function(item) {\n        return item && item[$scope.relatedField] === $scope.relatedObjectId;\n      };\n      $scope.isDisabledExisting = function(selectedItem) {\n        return isDisabledExisting(selectedItem);\n      };\n      $scope.addExistingToSprint = function(selectedItem) {\n        return addExistingToSprint(selectedItem);\n      };\n      submit = debounce(2000, function(event) {\n        var broadcastEvent, currentLoading, prettyDate, promise;\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target($el.find(\"#submitButton\")).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        if ($scope.mode === 'new') {\n          promise = $repo.create(schema.model, $scope.obj);\n          broadcastEvent = $scope.objType + \"form:new:success\";\n        } else {\n          if ($scope.obj.due_date instanceof moment) {\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n            $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\");\n          }\n          promise = $repo.save($scope.obj, true);\n          broadcastEvent = $scope.objType + \"form:edit:success\";\n        }\n        promise.then(function(data) {\n          return deleteAttachments(data).then(function() {\n            return createAttachments(data).then(function() {\n              currentLoading.finish();\n              $confirm.notify(\"success\");\n              close();\n              if (data.ref) {\n                return $rs[schema.model].getByRef(data.project, data.ref, schema.params).then(function(obj) {\n                  return $rootScope.$broadcast(broadcastEvent, obj);\n                });\n              }\n            });\n          });\n        });\n        return promise.then(null, function(response) {\n          var text;\n          currentLoading.finish();\n          form.setErrors(response);\n          console.log({\n            response: response\n          });\n          if (response.status) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response.swimlane) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response._error_message) {\n            return $confirm.notify(\"error\", response._error_message);\n          }\n        });\n      });\n      checkClose = function() {\n        if (!$scope.obj.isModified()) {\n          close();\n          return $scope.$apply(function() {\n            return $scope.obj.revert();\n          });\n        } else {\n          return $confirm.ask($translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\")).then(function(result) {\n            result.finish();\n            return close();\n          });\n        }\n      };\n      close = function() {\n        lightboxService.closeAll();\n        return $scope.lightboxOpen = false;\n      };\n      docEl = angular.element(document);\n      docEl.on(\"keydown.lightbox-create-edit\", function(event) {\n        var code;\n        if ($scope.lightboxOpen) {\n          event.stopPropagation();\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 27) {\n            return checkClose();\n          }\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.find('.close').on(\"click\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return checkClose();\n      });\n      $el.on(\"click\", \".status-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        setStatus(angular.element(event.currentTarget).data(\"status-id\"));\n        $scope.$apply();\n        $scope.$broadcast(\"status:changed\", $scope.obj.status);\n        return $el.find(\".pop-status\").popover().close();\n      });\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        $scope.obj.team_requirement = !$scope.obj.team_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        $scope.obj.client_requirement = !$scope.obj.client_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".is-blocked\", function(event) {\n        $scope.obj.is_blocked = !$scope.obj.is_blocked;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".iocaine\", function(event) {\n        $scope.obj.is_iocaine = !$scope.obj.is_iocaine;\n        $scope.$apply();\n        return $scope.$broadcast(\"isiocaine:changed\", $scope.obj);\n      });\n      $scope.isTeamRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.team_requirement : void 0;\n      };\n      $scope.isClientRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.client_requirement : void 0;\n      };\n      setStatus = function(id) {\n        $scope.obj.status = id;\n        $scope.selectedStatus = _.find($scope.statusList, function(item) {\n          return item.id === id;\n        });\n        return $scope.obj.is_closed = $scope.selectedStatus.is_closed;\n      };\n      return render = function(sprint) {\n        var compiledTemplate, template, templateScope;\n        template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\");\n        templateScope = $scope.$new();\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEdit\", [\"$log\", \"$tgRepo\", \"$tgModel\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$q\", \"tgAttachmentsService\", \"$tgTemplate\", \"$compile\", CreateEditDirective]);\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelateToEpicLightboxDirective = function($rootScope, $confirm, lightboxService, $tgCurrentUserService, tgResources, $tgResources, $epicsService, tgAnalytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var existingEpicForm, filterEpics, loadProjects, newEpicForm, selectProject, us;\n      us = null;\n      $scope.projects = null;\n      $scope.projectEpics = Immutable.List();\n      $scope.loading = false;\n      $scope.selectedProject = $scope.project.id;\n      newEpicForm = $el.find(\".new-epic-form\").checksley();\n      existingEpicForm = $el.find(\".existing-epic-form\").checksley();\n      loadProjects = function() {\n        if ($scope.projects === null) {\n          return $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\");\n        }\n      };\n      filterEpics = function(selectedProjectId, filterText) {\n        return tgResources.epics.listInAllProjects({\n          is_epics_activated: true,\n          project__blocked_code: 'null',\n          project: selectedProjectId,\n          q: filterText\n        }, true).then(function(data) {\n          var excludeIds, filteredData;\n          excludeIds = [];\n          if (us.epics) {\n            excludeIds = us.epics.map(function(epic) {\n              return epic.id;\n            });\n          }\n          filteredData = data.filter(function(epic) {\n            return excludeIds.indexOf(epic.get('id')) === -1;\n          });\n          return $scope.projectEpics = filteredData;\n        });\n      };\n      selectProject = function(selectedProjectId) {\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        return filterEpics(selectedProjectId, $scope.searchEpic);\n      };\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $scope.$on(\"relate-to-epic:add\", function(ctx, item) {\n        us = item;\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        loadProjects();\n        return filterEpics($scope.selectedProject, $scope.searchEpic).then(function() {\n          return lightboxService.open($el).then(function() {\n            return $el.find('input').focus;\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.selectProject = function(selectedProjectId) {\n        return selectProject(selectedProjectId);\n      };\n      $scope.onUpdateSearchEpic = debounceLeading(300, function() {\n        $scope.selectedEpic = null;\n        return filterEpics($scope.selectedProject, $scope.searchEpic);\n      });\n      $scope.saveRelatedEpic = function(selectedEpicId, onSavedRelatedEpic) {\n        var onError, onSuccess, usId;\n        if (!existingEpicForm.validate()) {\n          return;\n        }\n        $scope.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return existingEpicForm.setErrors(data);\n        };\n        onSuccess = function(data) {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        usId = us.id;\n        return tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(onSuccess, onError);\n      };\n      return $scope.createEpic = function(selectedProjectId, epicSubject) {\n        var onCreateEpic, onError, onSuccess;\n        if (!newEpicForm.validate()) {\n          return;\n        }\n        this.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return newEpicForm.setErrors(errors);\n        };\n        onSuccess = function() {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        onCreateEpic = function(epic) {\n          var epicId, usId;\n          epicId = epic.get('id');\n          usId = us.id;\n          return tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        };\n        return $epicsService.createEpic({\n          subject: epicSubject\n        }, null, selectedProjectId).then(onCreateEpic, onError);\n      };\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbRelatetoepic\", [\"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\", \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loaded, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  Loaded = function($parse, $timeout) {\n    return {\n      restrict: 'A',\n      compile: function($element, $attrs) {\n        var fn;\n        fn = $parse($attrs['tgLoaded']);\n        return function($scope, $element) {\n          var callback;\n          callback = function() {\n            return fn($scope, {\n              $event: {\n                target: $element\n              }\n            });\n          };\n          $timeout(function() {\n            return callback();\n          });\n          return null;\n        };\n      }\n    };\n  };\n\n  module.directive(\"tgLoaded\", ['$parse', '$timeout', Loaded]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loader, LoaderDirective, module, sizeFormat, taiga, timeout;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaCommon\");\n\n  LoaderDirective = function(tgLoader, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      tgLoader.onStart(function() {\n        $(document.body).addClass(\"loader-active\");\n        return $el.addClass(\"active\");\n      });\n      return tgLoader.onEnd(function() {\n        $(document.body).removeClass(\"loader-active\");\n        return $el.removeClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective]);\n\n  Loader = function($rootscope) {\n    var autoClose, config, lastResponseDate, open, pageLoaded, requestCount, start, startLoadTime;\n    config = {\n      minTime: 300\n    };\n    open = false;\n    startLoadTime = 0;\n    requestCount = 0;\n    lastResponseDate = 0;\n    pageLoaded = function(force) {\n      var diff, endTime, timeoutValue;\n      if (force == null) {\n        force = false;\n      }\n      if (startLoadTime) {\n        timeoutValue = 0;\n        if (!force) {\n          endTime = new Date().getTime();\n          diff = endTime - startLoadTime;\n          if (diff < config.minTime) {\n            timeoutValue = config.minTime - diff;\n          }\n        }\n        timeout(timeoutValue, function() {\n          $rootscope.$broadcast(\"loader:end\");\n          open = false;\n          return window.prerenderReady = true;\n        });\n      }\n      startLoadTime = 0;\n      requestCount = 0;\n      return lastResponseDate = 0;\n    };\n    autoClose = function() {\n      var intervalAuto;\n      return intervalAuto = setInterval((function() {\n        if (lastResponseDate && requestCount === 0) {\n          pageLoaded();\n          return clearInterval(intervalAuto);\n        }\n      }), 50);\n    };\n    start = function() {\n      startLoadTime = new Date().getTime();\n      $rootscope.$broadcast(\"loader:start\");\n      return open = true;\n    };\n    return {\n      pageLoaded: pageLoaded,\n      open: function() {\n        return open;\n      },\n      start: function(auto) {\n        if (auto == null) {\n          auto = false;\n        }\n        if (!open) {\n          start();\n          if (auto) {\n            return autoClose();\n          }\n        }\n      },\n      onStart: function(fn) {\n        return $rootscope.$on(\"loader:start\", fn);\n      },\n      onEnd: function(fn) {\n        return $rootscope.$on(\"loader:end\", fn);\n      },\n      logRequest: function() {\n        return requestCount++;\n      },\n      logResponse: function() {\n        if (requestCount > 0) {\n          requestCount--;\n        }\n        return lastResponseDate = new Date().getTime();\n      }\n    };\n  };\n\n  Loader.$inject = [\"$rootScope\"];\n\n  module.factory(\"tgLoader\", Loader);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadingDirective, TgLoadingService, module,\n    slice = [].slice;\n\n  module = angular.module(\"taigaCommon\");\n\n  TgLoadingService = function($compile) {\n    var spinner;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    return function() {\n      var service;\n      service = {\n        settings: {\n          target: null,\n          scope: null,\n          classes: [],\n          timeout: 0,\n          template: null\n        },\n        target: function(target) {\n          service.settings.target = target;\n          return service;\n        },\n        scope: function(scope) {\n          service.settings.scope = scope;\n          return service;\n        },\n        template: function(template) {\n          service.settings.template = template;\n          return service;\n        },\n        removeClasses: function() {\n          var classess;\n          classess = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          service.settings.classes = classess;\n          return service;\n        },\n        timeout: function(timeout) {\n          service.settings.timeout = timeout;\n          return service;\n        },\n        isLoading: function() {\n          var target;\n          target = service.settings.target;\n          return target.hasClass('loading');\n        },\n        start: function() {\n          var target, timeoutId;\n          target = service.settings.target;\n          service.settings.classes.map(function(className) {\n            return target.removeClass(className);\n          });\n          if (!target.hasClass('loading') && !service.settings.template) {\n            service.settings.template = target.html();\n          }\n          timeoutId = setTimeout((function() {\n            if (!target.hasClass('loading')) {\n              target.addClass('loading');\n              return target.html(spinner);\n            }\n          }), service.settings.timeout);\n          service.settings.timeoutId = timeoutId;\n          return service;\n        },\n        finish: function() {\n          var removeClasses, target, timeoutId;\n          target = service.settings.target;\n          timeoutId = service.settings.timeoutId;\n          if (timeoutId) {\n            clearTimeout(timeoutId);\n            removeClasses = service.settings.classes;\n            removeClasses.map(function(className) {\n              return service.settings.target.addClass(className);\n            });\n            target.html(service.settings.template);\n            target.removeClass('loading');\n            if (service.settings.scope) {\n              $compile(target.contents())(service.settings.scope);\n            }\n          }\n          return service;\n        }\n      };\n      return service;\n    };\n  };\n\n  TgLoadingService.$inject = [\"$compile\"];\n\n  module.factory(\"$tgLoading\", TgLoadingService);\n\n  LoadingDirective = function($loading) {\n    var link;\n    link = function($scope, $el, attr) {\n      var currentLoading, template;\n      currentLoading = null;\n      template = $el.html();\n      return $scope.$watch(attr.tgLoading, (function(_this) {\n        return function(showLoading) {\n          if (showLoading) {\n            return currentLoading = $loading().target($el).timeout(100).template(template).scope($scope).start();\n          } else if (currentLoading) {\n            return currentLoading.finish();\n          }\n        };\n      })(this));\n    };\n    return {\n      priority: 99999,\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskStatusDirective, UsStatusDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaCommon\");\n\n  UsStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a US and a popover to change it.\n    - tg-us-status: The user story\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\n        a.us-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'usStatusById' and 'project'.\n     */\n    var link, template;\n    template = $template.get(\"common/popover/popover-us-status.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, render, us;\n      $ctrl = $el.controller();\n      render = function(us) {\n        var usStatusById, usStatusDom, usStatusDomParent;\n        usStatusDomParent = $el.find(\".us-status\");\n        usStatusDom = $el.find(\".us-status .us-status-bind\");\n        usStatusById = $scope.usStatusById;\n        if (usStatusById[us.status]) {\n          usStatusDom.text(usStatusById[us.status].name);\n          return usStatusDomParent.css(\"color\", usStatusById[us.status].color);\n        }\n      };\n      $el.on(\"click\", \".us-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".popover-status\", debounce(2000, function(event) {\n        var statusElement, target, us;\n        event.preventDefault();\n        event.stopPropagation();\n        statusElement = $(event.currentTarget).find('#js-status-btn');\n        target = angular.element(statusElement);\n        us = $scope.$eval($attrs.tgUsStatus);\n        us.status = target.data(\"status-id\");\n        render(us);\n        $el.find(\".pop-status\").popover().close();\n        return $scope.$apply(function() {\n          return $repo.save(us).then(function() {\n            return $scope.$eval($attrs.onUpdate);\n          });\n        });\n      }));\n      $scope.$on(\"userstories:loaded\", function() {\n        return render($scope.$eval($attrs.tgUsStatus));\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      us = $scope.$eval($attrs.tgUsStatus);\n      render(us);\n      return bindOnce($scope, \"project\", function(project) {\n        var html;\n        html = template({\n          \"statuses\": project.us_statuses,\n          \"currentStatus\": us.status\n        });\n        $el.append(html);\n        if ($scope.project.my_permissions.indexOf(\"modify_us\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective]);\n\n  RelatedTaskStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a related task and a popover to change it.\n    - tg-related-task-status: The related task\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\n        a.task-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'taskStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateTaskStatus;\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true);\n    updateTaskStatus = function($el, task, taskStatusById) {\n      var taskStatusDom, taskStatusDomParent;\n      taskStatusDomParent = $el.find(\".us-status\");\n      taskStatusDom = $el.find(\".task-status .task-status-bind\");\n      if (taskStatusById[task.status]) {\n        taskStatusDom.text(taskStatusById[task.status].name);\n        return taskStatusDomParent.css('color', taskStatusById[task.status].color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task;\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskStatus);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $el.on(\"click\", \".task-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        task.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (autoSave) {\n          return $scope.$apply(function() {\n            return $repo.save(task).then(function() {\n              $scope.$eval($attrs.onUpdate);\n              return $scope.$emit(\"related-tasks:status-changed\");\n            });\n          });\n        }\n      }));\n      $scope.$watch($attrs.tgRelatedTaskStatus, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskStatus);\n        return updateTaskStatus($el, task, $scope.taskStatusById);\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.task_statuses\n        }));\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective]);\n\n  $.fn.popover = function() {\n    var $el, close, closeAll, closePopover, isVisible, open;\n    $el = this;\n    isVisible = (function(_this) {\n      return function() {\n        var docViewBottom, docViewLeft, docViewRight, docViewTop, docViewWidth, elemBottom, elemLeft, elemRight, elemTop, elemWidth;\n        $el.css({\n          \"display\": \"block\",\n          \"visibility\": \"hidden\"\n        });\n        docViewTop = $(window).scrollTop();\n        docViewBottom = docViewTop + $(window).height();\n        docViewWidth = $(window).width();\n        docViewRight = docViewWidth;\n        docViewLeft = 0;\n        elemTop = $el.offset().top;\n        elemBottom = elemTop + $el.height();\n        elemWidth = $el.width();\n        elemLeft = $el.offset().left;\n        elemRight = $el.offset().left + elemWidth;\n        $el.css({\n          \"display\": \"none\",\n          \"visibility\": \"visible\"\n        });\n        return (elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight);\n      };\n    })(this);\n    closePopover = (function(_this) {\n      return function(onClose) {\n        if (onClose) {\n          onClose.call($el);\n        }\n        $el.fadeOut(function() {\n          return $el.removeClass(\"active\").removeClass(\"fix\");\n        });\n        return $el.off(\"popup:close\");\n      };\n    })(this);\n    closeAll = (function(_this) {\n      return function() {\n        return $(\".popover.active\").each(function() {\n          return $(this).trigger(\"popup:close\");\n        });\n      };\n    })(this);\n    open = (function(_this) {\n      return function(onClose) {\n        if ($el.hasClass(\"active\")) {\n          return close();\n        } else {\n          closeAll();\n          if (!isVisible()) {\n            $el.addClass(\"fix\");\n          }\n          $el.fadeIn(function() {\n            $el.addClass(\"active\");\n            $(document.body).off(\"popover\");\n            return $(document.body).one(\"click.popover\", function() {\n              return closeAll();\n            });\n          });\n          return $el.on(\"popup:close\", function(e) {\n            return closePopover(onClose);\n          });\n        }\n      };\n    })(this);\n    close = (function(_this) {\n      return function() {\n        return $el.trigger(\"popup:close\");\n      };\n    })(this);\n    return {\n      open: open,\n      close: close,\n      closeAll: closeAll\n    };\n  };\n\n  taiga.globalPopover = function(target, list, options, cb) {\n    var close, createSvg, elementPosition, followElement, ul, wrapper;\n    if (options == null) {\n      options = {};\n    }\n    wrapper = document.createElement('div');\n    wrapper.classList.add('popover', 'global-popover');\n    ul = document.createElement('ul');\n    createSvg = function(icon) {\n      var attrHref, svg, tgSvg, use, xlink;\n      tgSvg = document.createElement('tg-svg');\n      svg = document.createElement('svg');\n      use = document.createElement('use');\n      xlink = document.createAttribute('xlink:href');\n      xlink.value = '#' + icon;\n      attrHref = document.createAttribute('attr-href');\n      attrHref.value = '#' + icon;\n      use.setAttributeNode(xlink);\n      use.setAttributeNode(attrHref);\n      svg.classList.add('icon');\n      svg.appendChild(use);\n      tgSvg.appendChild(svg);\n      return tgSvg;\n    };\n    close = function() {\n      $(wrapper).popover().close();\n      return $(wrapper).remove();\n    };\n    followElement = function() {\n      elementPosition();\n      return requestAnimationFrame(followElement);\n    };\n    elementPosition = function() {\n      var left, rect, top, width;\n      rect = target.getBoundingClientRect();\n      top = rect.top + rect.height;\n      width = options.width || 170;\n      left = rect.right - width;\n      if (options.paddingTop) {\n        top = top + options.paddingTop;\n      }\n      if (options.paddingLeft) {\n        left = left + options.paddingLeft;\n      }\n      wrapper.style.top = top + 'px';\n      wrapper.style.left = left + 'px';\n      return wrapper.style.width = width + 'px';\n    };\n    elementPosition();\n    followElement();\n    document.addEventListener('scroll', close, true);\n    list.forEach(function(option) {\n      var button, li;\n      li = document.createElement('li');\n      button = document.createElement('button');\n      button.addEventListener('click', option.event);\n      if (option.icon) {\n        button.innerHTML = createSvg(option.icon).innerHTML;\n      }\n      button.appendChild(document.createTextNode(option.text));\n      li.appendChild(button);\n      return ul.appendChild(li);\n    });\n    wrapper.appendChild(ul);\n    document.body.appendChild(wrapper);\n    $(wrapper).popover().open(function() {\n      document.removeEventListener('scroll', close);\n      cb();\n      if (wrapper) {\n        return setTimeout(function() {\n          return $(wrapper).remove();\n        }, 2000);\n      }\n    });\n    return (function(_this) {\n      return function() {\n        return $(wrapper).popover().close();\n      };\n    })(this);\n  };\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExceptionHandlerFactory, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  ExceptionHandlerFactory = function($log, config) {\n    var ravenConfig;\n    this.config = config;\n    ravenConfig = this.config.get(\"ravenConfig\", null);\n    if (ravenConfig) {\n      $log.debug(\"Using the RavenJS exception handler.\");\n      Raven.config(ravenConfig).install();\n      return function(exception, cause) {\n        $log.error.apply($log, arguments);\n        return Raven.captureException(exception);\n      };\n    } else {\n      $log.debug(\"Using the default logging exception handler.\");\n      return function(exception, cause) {\n        return $log.error.apply($log, arguments);\n      };\n    }\n  };\n\n  module.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SectionsService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaCommon\");\n\n  SectionsService = (function(superClass) {\n    var SECTIONS;\n\n    extend(SectionsService, superClass);\n\n    SectionsService.$inject = [\"$translate\", \"tgCurrentUserService\"];\n\n    SECTIONS = {\n      1: {\n        id: 1,\n        title: 'TIMELINE',\n        path: 'timeline',\n        enabled: ''\n      },\n      2: {\n        id: 2,\n        title: 'EPICS',\n        path: 'epics',\n        enabled: 'is_epics_activated'\n      },\n      3: {\n        id: 3,\n        title: 'BACKLOG',\n        path: 'backlog',\n        enabled: 'is_backlog_activated'\n      },\n      4: {\n        id: 4,\n        title: 'KANBAN',\n        path: 'kanban',\n        enabled: 'is_kanban_activated'\n      },\n      5: {\n        id: 5,\n        title: 'ISSUES',\n        path: 'issues',\n        enabled: 'is_issues_activated'\n      },\n      6: {\n        id: 6,\n        title: 'WIKI',\n        path: 'wiki',\n        enabled: 'is_wiki_activated'\n      }\n    };\n\n    function SectionsService(translate, currentUserService) {\n      this.translate = translate;\n      this.currentUserService = currentUserService;\n      SectionsService.__super__.constructor.call(this);\n      _.map(SECTIONS, (function(_this) {\n        return function(x) {\n          return x.title = _this.translate.instant(\"PROJECT.SECTION.\" + x.title);\n        };\n      })(this));\n    }\n\n    SectionsService.prototype.list = function() {\n      return SECTIONS;\n    };\n\n    SectionsService.prototype.getPath = function(projectSlug, sectionId) {\n      var defaultHomePage, project, projects, ref, section;\n      defaultHomePage = \"timeline\";\n      projects = (ref = this.currentUserService.projects) != null ? ref.get(\"all\") : void 0;\n      if (!projects) {\n        return defaultHomePage;\n      }\n      project = projects.find(function(p) {\n        return p.get('slug') === projectSlug;\n      });\n      if (!project) {\n        return defaultHomePage;\n      }\n      if (!sectionId) {\n        sectionId = project.get('my_homepage');\n      }\n      section = _.find(SECTIONS, {\n        \"id\": sectionId\n      });\n      if (!section || (project != null ? project.get(section.enabled) : void 0) === !true) {\n        return defaultHomePage;\n      }\n      return section.path;\n    };\n\n    return SectionsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgSections\", SectionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagManagerService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagManagerService = (function(superClass) {\n    extend(TagManagerService, superClass);\n\n    TagManagerService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function TagManagerService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"tagManager\", {});\n      this.accountId = conf.accountId;\n    }\n\n    TagManagerService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Tag Manager: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectTagManager();\n      return this.initialized = true;\n    };\n\n    TagManagerService.prototype.injectTagManager = function() {\n      var fn;\n      fn = (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\n              f.parentNode.insertBefore(j,f);});\n      return fn(window, document, \"script\", \"dataLayer\", this.accountId);\n    };\n\n    return TagManagerService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgTagManager\", TagManagerService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorizeTagsBacklogDirective, LbTagLineDirective, TagsDirective, bindOnce, module, taiga, trim,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagsDirective = function() {\n    var formatter, link, parser;\n    formatter = function(v) {\n      if (_.isArray(v)) {\n        return v.join(\", \");\n      }\n      return \"\";\n    };\n    parser = function(v) {\n      var result;\n      if (!v) {\n        return [];\n      }\n      result = _(v.split(\",\")).map(function(x) {\n        return _.trim(x);\n      });\n      return result.value();\n    };\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl.$formatters.push(formatter);\n      $ctrl.$parsers.push(parser);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      require: \"ngModel\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgTags\", TagsDirective);\n\n  ColorizeTagsBacklogDirective = function($emojis) {\n    var link, template;\n    template = _.template(\"<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] !== null) { %>\\n    <div class=\\\"tag\\\" style=\\\"background: <%- tag[1] %>\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\\n<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] === null) { %>\\n    <div class=\\\"tag\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\");\n    link = function($scope, $el, $attrs, $ctrl) {\n      var render;\n      render = function(tags) {\n        var html;\n        html = template({\n          tags: tags,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        });\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.tgColorizeBacklogTags, function(tags) {\n        if (tags != null) {\n          return render(tags);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective]);\n\n  LbTagLineDirective = function($rs, $template, $compile) {\n    var COMMA_KEY, ENTER_KEY, autocomplete, link, templateTags;\n    ENTER_KEY = 13;\n    COMMA_KEY = 188;\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true);\n    autocomplete = null;\n    link = function($scope, $el, $attrs, $model) {\n      var addValue, deleteValue, hideSaveButton, renderTags, resetInput, saveInputTag, showSaveButton, withoutColors;\n      withoutColors = _.has($attrs, \"withoutColors\");\n      renderTags = function(tags, tagsColors) {\n        var color, ctx, html;\n        if (tagsColors == null) {\n          tagsColors = [];\n        }\n        color = !withoutColors ? tagsColors[t] : null;\n        ctx = {\n          tags: _.map(tags, function(t) {\n            return {\n              name: t,\n              style: color ? \"border-left: 5px solid \" + color : \"\"\n            };\n          })\n        };\n        html = $compile(templateTags(ctx))($scope);\n        return $el.find(\".tags-container\").html(html);\n      };\n      showSaveButton = function() {\n        return $el.find(\".save\").removeClass(\"hidden\");\n      };\n      hideSaveButton = function() {\n        return $el.find(\".save\").addClass(\"hidden\");\n      };\n      resetInput = function() {\n        $el.find(\"input\").val(\"\");\n        return autocomplete.close();\n      };\n      addValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        if (tags == null) {\n          tags = [];\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n        return hideSaveButton();\n      };\n      deleteValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        tags = _.pull(tags, value);\n        return $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n      };\n      saveInputTag = function() {\n        var value;\n        value = $el.find(\"input\").val();\n        addValue(value);\n        return resetInput();\n      };\n      $el.on(\"keypress\", \"input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === ENTER_KEY) {\n          event.preventDefault();\n          return saveInputTag();\n        } else if (String.fromCharCode(event.keyCode) === ',') {\n          event.preventDefault();\n          return saveInputTag();\n        } else {\n          if (target.val().length) {\n            return showSaveButton();\n          } else {\n            return hideSaveButton();\n          }\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return saveInputTag();\n      });\n      $el.on(\"click\", \".remove-tag\", function(event) {\n        var target, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        value = target.siblings(\".tag-name\").text();\n        return deleteValue(value);\n      });\n      bindOnce($scope, \"project\", function(project) {\n        var input;\n        input = $el.find(\"input\");\n        autocomplete = new Awesomplete(input[0], {\n          list: _.keys(project.tags_colors)\n        });\n        return input.on(\"awesomplete-selectcomplete\", function() {\n          addValue(input.val());\n          return input.val(\"\");\n        });\n      });\n      $scope.$watch($attrs.ngModel, function(tags) {\n        var ref, tagsColors;\n        tagsColors = ((ref = $scope.project) != null ? ref.tags_colors : void 0) || [];\n        return renderTags(tags, tagsColors);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\",\n      templateUrl: \"common/tag/lb-tag-line.html\"\n    };\n  };\n\n  module.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserPilotService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  UserPilotService = (function(superClass) {\n    var JOINED_LIMIT_DAYS;\n\n    extend(UserPilotService, superClass);\n\n    UserPilotService.$inject = [\"$rootScope\", \"$window\"];\n\n    JOINED_LIMIT_DAYS = 42;\n\n    function UserPilotService(rootScope, win) {\n      this.rootScope = rootScope;\n      this.win = win;\n      this.initialized = false;\n    }\n\n    UserPilotService.prototype.initialize = function() {\n      if (this.initialized) {\n        return;\n      }\n      this.rootScope.$on('$locationChangeSuccess', (function(_this) {\n        return function() {\n          if (_this.win.userpilot) {\n            return _this.win.userpilot.reload();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"auth:refresh\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:register\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:login\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:logout\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      return this.initialized = true;\n    };\n\n    UserPilotService.prototype.checkZendeskConditions = function(userData) {\n      var hasPaidPlan, is_new_user, joined;\n      hasPaidPlan = this.hasPaidPlan(userData);\n      joined = new Date(userData[\"date_joined\"]);\n      is_new_user = joined > this.getJoinedLimit();\n      return hasPaidPlan && is_new_user;\n    };\n\n    UserPilotService.prototype.identify = function() {\n      var userData, userInfo, userPilotCustomer, userPilotId;\n      userInfo = this.win.localStorage.getItem(\"userInfo\") || \"{}\";\n      userData = JSON.parse(userInfo);\n      if (this.win.userpilot) {\n        userPilotId = this.calculateUserPilotId(userData);\n        userPilotCustomer = this.prepareUserPilotCustomer(userData);\n        this.win.userpilot.identify(userPilotId, userPilotCustomer);\n      }\n      if (this.win.zE) {\n        if (this.checkZendeskConditions(userData)) {\n          return this.setZendeskWidgetStatus({\n            enabled: true\n          });\n        } else {\n          return this.setZendeskWidgetStatus({\n            enabled: false\n          });\n        }\n      }\n    };\n\n    UserPilotService.prototype.prepareUserPilotCustomer = function(data) {\n      if (!data[\"id\"]) {\n        return {\n          created_at: Date.now()\n        };\n      }\n      return {\n        name: data[\"full_name_display\"],\n        email: data[\"email\"],\n        created_at: Date.now(),\n        taiga_id: data[\"id\"],\n        taiga_username: data[\"username\"],\n        taiga_date_joined: data[\"date_joined\"],\n        taiga_lang: data[\"lang\"],\n        taiga_max_private_projects: data[\"max_private_projects\"],\n        taiga_max_memberships_private_projects: data[\"max_memberships_private_projects\"],\n        taiga_verified_email: data[\"verified_email\"],\n        taiga_total_private_projects: data[\"total_private_projects\"],\n        taiga_total_public_projects: data[\"total_public_projects\"],\n        taiga_roles: data[\"roles\"] && data[\"roles\"].toString()\n      };\n    };\n\n    UserPilotService.prototype.hasPaidPlan = function(data) {\n      var maxPrivateProjects;\n      maxPrivateProjects = data[\"max_private_projects\"];\n      return maxPrivateProjects !== void 0 && maxPrivateProjects !== 1;\n    };\n\n    UserPilotService.prototype.calculateUserPilotId = function(data) {\n      var joined;\n      if (!data[\"id\"]) {\n        return 2;\n      }\n      joined = new Date(data[\"date_joined\"]);\n      if ((joined > this.getJoinedLimit()) || this.hasPaidPlan(data)) {\n        return data[\"id\"];\n      }\n      return 1;\n    };\n\n    UserPilotService.prototype.getJoinedLimit = function() {\n      var limit;\n      limit = new Date;\n      limit.setDate(limit.getDate() - JOINED_LIMIT_DAYS);\n      return limit;\n    };\n\n    UserPilotService.prototype.setZendeskWidgetStatus = function(config) {\n      var supress;\n      if (config == null) {\n        config = {\n          enabled: false\n        };\n      }\n      supress = !config.enabled;\n      return this.win.zE('webWidget', 'updateSettings', {\n        webWidget: {\n          chat: {\n            suppress: supress\n          },\n          contactForm: {\n            suppress: supress\n          },\n          helpCenter: {\n            suppress: supress\n          },\n          talk: {\n            suppress: supress\n          },\n          answerBot: {\n            suppress: supress\n          }\n        }\n      });\n    };\n\n    return UserPilotService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgUserPilot\", UserPilotService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEditSprint, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  CreateEditSprint = function($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate, projectService, $timeout) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var createSprint, form, getLastSprint, hasErrors, openFn, remove, resetSprint, submit, ussToAdd;\n      hasErrors = false;\n      createSprint = true;\n      form = null;\n      $scope.newSprint = {};\n      ussToAdd = null;\n      $scope.createEditOpen = false;\n      resetSprint = function() {\n        if (form) {\n          form.reset();\n        }\n        return $scope.newSprint = {\n          project: null,\n          name: null,\n          estimated_start: null,\n          estimated_finish: null\n        };\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var broadcastEvent, currentLoading, estimated_end, estimated_start, newSprint, prettyDate, promise, submitButton, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          submitButton = $el.find(\".submit-button\");\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            hasErrors = true;\n            $el.find(\".last-sprint-name\").addClass(\"disappear\");\n            return;\n          }\n          hasErrors = false;\n          broadcastEvent = null;\n          estimated_start = $('.date-start').val();\n          estimated_end = $('.date-end').val();\n          if (createSprint) {\n            newSprint = angular.copy($scope.newSprint);\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.create(\"milestones\", newSprint);\n            broadcastEvent = \"sprintform:create:success\";\n          } else {\n            newSprint = $scope.newSprint.realClone();\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.save(newSprint);\n            broadcastEvent = \"sprintform:edit:success\";\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise.then(function(data) {\n            currentLoading.finish();\n            if (createSprint) {\n              $scope.sprintsCounter += 1;\n            }\n            $scope.sprints = _.map($scope.sprints, function(it) {\n              if (it.id === data.id) {\n                return data;\n              } else {\n                return it;\n              }\n            });\n            if (broadcastEvent === \"sprintform:create:success\" && ussToAdd) {\n              $rootscope.$broadcast(broadcastEvent, data, ussToAdd);\n            } else {\n              $rootscope.$broadcast(broadcastEvent, data);\n            }\n            lightboxService.close($el);\n            return $scope.createEditOpen = false;\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"light-error\", data._error_message);\n            } else if (data.__all__) {\n              return $confirm.notify(\"light-error\", data.__all__[0]);\n            }\n          });\n        };\n      })(this));\n      remove = function() {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\");\n        message = $scope.newSprint.name;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSuccess;\n            onSuccess = function() {\n              askResponse.finish();\n              $scope.milestonesCounter -= 1;\n              lightboxService.close($el);\n              $scope.createEditOpen = false;\n              return $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove($scope.newSprint).then(onSuccess, onError);\n          };\n        })(this));\n      };\n      getLastSprint = function() {\n        var openSprints, sortedSprints;\n        openSprints = _.filter($scope.sprints, function(sprint) {\n          return !sprint.closed;\n        });\n        sortedSprints = _.sortBy(openSprints, function(sprint) {\n          return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X');\n        });\n        return sortedSprints[sortedSprints.length - 1];\n      };\n      openFn = function(cb) {\n        return $scope.$applyAsync(function() {\n          return $timeout(function() {\n            return cb();\n          }, 0);\n        });\n      };\n      $scope.$on(\"sprintform:create\", function(event, projectId, uss) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var estimatedFinish, estimatedStart, lastSprint, lastSprintNameDom, prettyDate, text;\n          ussToAdd = uss;\n          resetSprint();\n          form = $el.find(\"form\").checksley();\n          form.reset();\n          createSprint = true;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.newSprint.project = projectId;\n          $scope.newSprint.name = null;\n          $scope.newSprint.slug = null;\n          lastSprint = getLastSprint();\n          estimatedStart = moment();\n          if (lastSprint) {\n            estimatedStart = moment(lastSprint.estimated_finish);\n          } else if ($scope.newSprint.estimated_start) {\n            estimatedStart = moment($scope.newSprint.estimated_start);\n          }\n          $scope.newSprint.estimated_start = estimatedStart.format(prettyDate);\n          estimatedFinish = moment().add(2, \"weeks\");\n          if (lastSprint) {\n            estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\");\n          } else if ($scope.newSprint.estimated_finish) {\n            estimatedFinish = moment($scope.newSprint.estimated_finish);\n          }\n          $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate);\n          lastSprintNameDom = $el.find(\".last-sprint-name\");\n          if ((lastSprint != null ? lastSprint.name : void 0) != null) {\n            text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\n              lastSprint: lastSprint.name\n            });\n            lastSprintNameDom.html(text);\n          }\n          $el.find(\".delete-sprint\").addClass(\"hidden\");\n          text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\");\n          $el.find(\".title\").text(text);\n          text = $translate.instant(\"COMMON.CREATE\");\n          $el.find(\".button-green\").text(text);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus();\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        });\n      });\n      $scope.$on(\"sprintform:edit\", function(ctx, sprint) {\n        $scope.createEditOpen = true;\n        return openFn(function() {\n          var editSprint, prettyDate, save;\n          resetSprint();\n          createSprint = false;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          $scope.$apply(function() {\n            $scope.newSprint = sprint.realClone();\n            $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate);\n            return $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate);\n          });\n          if (projectService.project.get('my_permissions').indexOf('delete_milestone') > -1) {\n            $el.find(\".delete-sprint\").removeClass(\"hidden\");\n          }\n          editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\");\n          $el.find(\".title\").text(editSprint);\n          save = $translate.instant(\"COMMON.SAVE\");\n          $el.find(\".button-green\").text(save);\n          lightboxService.open($el);\n          $el.find(\".sprint-name\").focus().select();\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        });\n      });\n      $el.on(\"keyup\", \".sprint-name\", function(event) {\n        if ($el.find(\".sprint-name\").val().length > 0 || hasErrors) {\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        } else {\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".delete-sprint\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return resetSprint();\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEditSprint\", [\"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"tgProjectService\", \"$timeout\", CreateEditSprint]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogController, BacklogDirective, BurndownBacklogGraphDirective, TgBacklogProgressBarDirective, ToggleBurndownVisibility, UsEditSelector, UsPointsDirective, UsRolePointsSelectorDirective, bindMethods, bindOnce, generateHash, groupBy, mixOf, module, scopeDefer, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  generateHash = this.taiga.generateHash;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogController = (function(superClass) {\n    extend(BacklogController, superClass);\n\n    BacklogController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"$tgLoading\", \"tgResources\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLoader\"];\n\n    BacklogController.prototype.storeCustomFiltersName = 'backlog-custom-filters';\n\n    BacklogController.prototype.storeFiltersName = 'backlog-filters';\n\n    BacklogController.prototype.backlogOrder = {};\n\n    BacklogController.prototype.milestonesOrder = {};\n\n    BacklogController.prototype.newUs = [];\n\n    BacklogController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function BacklogController(scope1, rootscope, repo, confirm, rs, params1, q, location, appMetaService, navUrls, events, analytics, translate, loading, rs2, modelTransform, errorHandlingService, storage, filterRemoteStorageService, projectService, tgLoader) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.loading = loading;\n      this.rs2 = rs2;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.tgLoader = tgLoader;\n      bindMethods(this);\n      this.backlogOrder = {};\n      this.milestonesOrder = {};\n      this.page = 1;\n      this.disablePagination = false;\n      this.firstLoadComplete = false;\n      this.translationData = {\n        q: this.filterQ\n      };\n      this.scope.userstories = [];\n      this.totalUserStories = 0;\n      this.pendingDrag = [];\n      this.scope.noSwimlaneUserStories = false;\n      this.scope.swimlanesList = Immutable.List();\n      if (this.applyStoredFilters(this.params.pslug, \"backlog-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"BACKLOG.SECTION_NAME\");\n      this.showTags = true;\n      this.activeFilters = false;\n      this.scope.showGraphPlaceholder = null;\n      this.displayVelocity = false;\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          _this.loadSwimlanes();\n          _this.firstLoadComplete = true;\n          title = _this.translate.instant(\"BACKLOG.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          _this.appMetaService.setAll(title, description);\n          if (_this.rs.userstories.getShowTags(_this.scope.projectId)) {\n            _this.showTags = true;\n            return _this.scope.$broadcast(\"showTags\", _this.showTags);\n          }\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    BacklogController.prototype.filtersReloadContent = function() {\n      return this.loadUserstories(true);\n    };\n\n    BacklogController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, els) {\n          _this.newUs = _.map(els, function(it) {\n            return it.id;\n          });\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:create:success\", (function(_this) {\n        return function(e, data, ussToMove) {\n          _this.loadSprints().then(function() {\n            return _this.scope.$broadcast(\"sprintform:create:success:callback\", ussToMove);\n          });\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, el) {\n          _this.newUs = [el.id];\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          _this.rootscope.$broadcast(\"filters:update\");\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:edit:success\", (function(_this) {\n        return function() {\n          return _this.loadProjectStats();\n        };\n      })(this));\n      this.scope.$on(\"sprintform:remove:success\", (function(_this) {\n        return function(event, sprint) {\n          if (_this.displayVelocity) {\n            _this.toggleVelocityForecasting();\n          }\n          _this.loadSprints();\n          _this.loadProjectStats();\n          _this.loadUserstories(true);\n          if (sprint.closed) {\n            _this.loadClosedSprints();\n          }\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, data) {\n          var index;\n          index = _.findIndex(_this.scope.userstories, function(us) {\n            return us.id === data.id;\n          });\n          _this.scope.userstories[index] = data;\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"filters:update\", (function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this));\n      this.scope.$on(\"sprint:us:move\", this.moveUs);\n      this.scope.$on(\"sprint:us:moved\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"backlog:load-closed-sprints\", this.loadClosedSprints);\n      return this.scope.$on(\"backlog:unload-closed-sprints\", this.unloadClosedSprints);\n    };\n\n    BacklogController.prototype.initializeSubscription = function() {\n      var routingKey1, routingKey2;\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.loadAllPaginatedUserstories();\n          return _this.loadSprints();\n        };\n      })(this));\n      routingKey2 = \"changes.project.\" + this.scope.projectId + \".milestones\";\n      return this.events.subscribe(this.scope, routingKey2, (function(_this) {\n        return function(message) {\n          _this.loadSprints();\n          _this.loadClosedSprints();\n          return _this.loadProjectStats();\n        };\n      })(this), {\n        selfNotification: true\n      });\n    };\n\n    BacklogController.prototype.toggleShowTags = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.showTags = !_this.showTags;\n          return _this.rs.userstories.storeShowTags(_this.scope.projectId, _this.showTags);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleActiveFilters = function() {\n      return this.activeFilters = !this.activeFilters;\n    };\n\n    BacklogController.prototype.toggleVelocityForecasting = function() {\n      this.displayVelocity = !this.displayVelocity;\n      if (!this.displayVelocity) {\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      } else {\n        this.calculateForecasting();\n        this.scope.visibleUserStories = _.map(this.forecastedStories, function(it) {\n          return it.ref;\n        });\n      }\n      return scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"userstories:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadProjectStats = function() {\n      return this.rs.projects.stats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totalPoints;\n          _this.scope.stats = stats;\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          if (totalPoints) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.showGraphPlaceholder = !((stats.total_points != null) && (stats.total_milestones != null));\n          _this.calculateForecasting();\n          return stats;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.setMilestonesOrder = function(sprints) {\n      var it, j, len, results, sprint;\n      results = [];\n      for (j = 0, len = sprints.length; j < len; j++) {\n        sprint = sprints[j];\n        this.milestonesOrder[sprint.id] = {};\n        results.push((function() {\n          var l, len1, ref1, results1;\n          ref1 = sprint.user_stories;\n          results1 = [];\n          for (l = 0, len1 = ref1.length; l < len1; l++) {\n            it = ref1[l];\n            results1.push(this.milestonesOrder[sprint.id][it.id] = it.sprint_order);\n          }\n          return results1;\n        }).call(this));\n      }\n      return results;\n    };\n\n    BacklogController.prototype.unloadClosedSprints = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.scope.closedSprints = [];\n          return _this.rootscope.$broadcast(\"closed-sprints:reloaded\", []);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadClosedSprints = function() {\n      var params;\n      params = {\n        closed: true\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalClosedMilestones = result.closed;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.closedSprints = sprints;\n          _this.scope.closedSprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"closed-sprints:reloaded\", sprints);\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadSwimlanes = function() {\n      if (this.scope.project.swimlanes) {\n        return this.scope.project.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.scope.swimlanesList.includes(swimlane)) {\n              return _this.scope.swimlanesList = _this.scope.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n    };\n\n    BacklogController.prototype.loadSprints = function() {\n      var params;\n      params = {\n        closed: false\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalMilestones = sprints;\n          _this.scope.totalClosedMilestones = result.closed;\n          _this.scope.totalOpenMilestones = result.open;\n          _this.scope.totalMilestones = _this.scope.totalOpenMilestones + _this.scope.totalClosedMilestones;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.sprints = sprints;\n          if (!_this.scope.closedSprints) {\n            _this.scope.closedSprints = [];\n          }\n          _this.scope.sprintsCounter = sprints.length;\n          _this.scope.sprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"sprints:loaded\", sprints);\n          _this.scope.currentSprint = _this.findCurrentSprint();\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.openSprints = function() {\n      return _.filter(this.scope.sprints, (function(_this) {\n        return function(sprint) {\n          return !sprint.closed;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadAllPaginatedUserstories = function() {\n      var page;\n      page = this.page;\n      return this.loadUserstories(true, this.scope.userstories.length).then((function(_this) {\n        return function() {\n          return _this.page = page;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadUserstories = function(resetPagination, pageSize) {\n      var params, promise;\n      if (resetPagination == null) {\n        resetPagination = false;\n      }\n      if (!this.scope.projectId) {\n        return null;\n      }\n      this.loadingUserstories = true;\n      this.disablePagination = true;\n      params = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      this.rs.userstories.storeQueryParams(this.scope.projectId, params);\n      if (resetPagination) {\n        this.page = 1;\n      }\n      params.page = this.page;\n      params.q = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      this.translationData.q = params.q;\n      promise = this.rs.userstories.listUnassigned(this.scope.projectId, params, pageSize);\n      return promise.then((function(_this) {\n        return function(result) {\n          var header, it, j, len, ref1, userstories;\n          userstories = result[0];\n          header = result[1];\n          if (resetPagination) {\n            _this.scope.userstories = [];\n          }\n          _this.scope.userstories = _this.scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"));\n          _this.scope.visibleUserStories = _.map(_this.scope.userstories, function(it) {\n            return it.ref;\n          });\n          ref1 = _this.scope.userstories;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            it = ref1[j];\n            if (_this.newUs.includes(it.id)) {\n              it[\"new\"] = true;\n            }\n            _this.backlogOrder[it.id] = it.backlog_order;\n          }\n          _this.loadingUserstories = false;\n          if (header('x-pagination-next')) {\n            _this.disablePagination = false;\n            _this.page++;\n          }\n          if (header('Taiga-Info-Backlog-Total-Userstories')) {\n            _this.totalUserStories = header('Taiga-Info-Backlog-Total-Userstories');\n          }\n          if (header('Taiga-Info-Userstories-Without-Swimlane')) {\n            _this.scope.noSwimlaneUserStories = header('Taiga-Info-Userstories-Without-Swimlane');\n          }\n          _this.rootscope.$broadcast(\"backlog:userstories:loaded\");\n          scopeDefer(_this.scope, function() {\n            _this.scope.$broadcast(\"userstories:loaded\");\n            return _this.tgLoader.pageLoaded();\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadBacklog = function() {\n      return this.q.all([this.loadProjectStats(), this.loadSprints(), this.loadUserstories()]).then(this.calculateForecasting);\n    };\n\n    BacklogController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, lastLoadUserstoriesParams;\n      lastLoadUserstoriesParams = this.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        delete lastLoadUserstoriesParams['page'];\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['backlog-' + key] = lastLoadUserstoriesParams[key];\n        });\n        ParsedLastLoadUserstoriesParams['no-milestone'] = 1;\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    BacklogController.prototype.sprintTotalPoints = function(sprint) {\n      var j, len, points, ref1, us;\n      points = 0;\n      ref1 = sprint.user_stories;\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        if (us.milestone === sprint.id) {\n          points += us.total_points;\n        }\n      }\n      return points;\n    };\n\n    BacklogController.prototype.calculateForecasting = function() {\n      var backlog_points_sum, current_sum, j, len, ref1, results, stats, total_points, us;\n      stats = this.scope.stats;\n      total_points = stats.total_points;\n      current_sum = stats.assigned_points;\n      backlog_points_sum = 0;\n      this.forecastedStories = [];\n      this.scope.forecastNewSprint = true;\n      if (this.scope.sprints && this.scope.sprints.length) {\n        backlog_points_sum = this.sprintTotalPoints(this.scope.sprints[0]);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          backlog_points_sum = 0;\n        } else {\n          this.scope.forecastNewSprint = false;\n        }\n      }\n      ref1 = this.scope.userstories;\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        current_sum += us.total_points;\n        backlog_points_sum += us.total_points;\n        this.forecastedStories.push(us);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          break;\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    BacklogController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_backlog_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.closedMilestones = !!project.total_closed_milestones;\n      this.scope.$emit('project:loaded', project);\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"id\");\n      return project;\n    };\n\n    BacklogController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      if (this.rs.userstories.getShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadBacklog().then((function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.scope.$emit(\"backlog:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleTags = function() {\n      return this.rs.userstories.storeShowTags(this.scope.projectId, this.showTags);\n    };\n\n    BacklogController.prototype.prepareBulkUpdateData = function(uses, field) {\n      if (field == null) {\n        field = \"backlog_order\";\n      }\n      return _.map(uses, function(x) {\n        return {\n          \"us_id\": x.id,\n          \"order\": x[field]\n        };\n      });\n    };\n\n    BacklogController.prototype.moveUsToTopOfBacklog = function(us) {\n      var nextUs, self;\n      self = this;\n      $('.first').each(function() {\n        return $(this).removeClass('first');\n      });\n      nextUs = this.scope.userstories.find((function(_this) {\n        return function(us) {\n          return us.ref === _this.scope.visibleUserStories[0];\n        };\n      })(this));\n      return this.moveUs(\"sprint:us:move\", [us], 0, null, null, nextUs.id);\n    };\n\n    BacklogController.prototype.moveUs = function(ctx, usList, newUsIndex, newSprintId, previousUs, nextUs) {\n      var bulkUserstories, currentSprintId, j, key, l, len, len1, len2, m, newSprint, oldSprintId, position, project, promise, sprint, targetList, us;\n      oldSprintId = usList[0].milestone;\n      project = usList[0].project;\n      if (oldSprintId) {\n        sprint = this.scope.sprintsById[oldSprintId] || this.scope.closedSprintsById[oldSprintId];\n      }\n      if (newSprintId) {\n        newSprint = this.scope.sprintsById[newSprintId] || this.scope.closedSprintsById[newSprintId];\n      }\n      currentSprintId = newSprintId !== oldSprintId ? newSprintId : oldSprintId;\n      bulkUserstories = _.map(usList, function(it) {\n        return it.id;\n      });\n      if (ctx) {\n        this.pendingDrag.push({\n          usList: usList,\n          newUsIndex: newUsIndex,\n          newSprintId: newSprintId,\n          previousUs: previousUs,\n          nextUs: nextUs\n        });\n        if (newSprintId !== oldSprintId) {\n          if (newSprintId === null) {\n            for (key = j = 0, len = usList.length; j < len; key = ++j) {\n              us = usList[key];\n              _.remove(sprint.user_stories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                return _this.scope.userstories.splice(newUsIndex + index, 0, us);\n              };\n            })(this));\n          } else {\n            for (l = 0, len1 = usList.length; l < len1; l++) {\n              us = usList[l];\n              _.remove(this.scope.userstories, function(it) {\n                return it.id === us.id;\n              });\n            }\n            usList.forEach((function(_this) {\n              return function(us, index) {\n                us.milestone = newSprintId;\n                newSprint.user_stories.splice(newUsIndex, 0, us);\n                newSprint = Object.assign(newSprint, {\n                  user_stories: newSprint.user_stories.slice()\n                });\n                return _this.scope.sprints = _this.scope.sprints.map(function(sprint) {\n                  return Object.assign(sprint);\n                });\n              };\n            })(this));\n          }\n        } else {\n          if (newSprintId) {\n            targetList = newSprint.user_stories;\n          } else {\n            targetList = this.scope.userstories;\n          }\n          for (m = 0, len2 = usList.length; m < len2; m++) {\n            us = usList[m];\n            _.remove(targetList, function(it) {\n              return it.id === us.id;\n            });\n          }\n          position = 0;\n          if (previousUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          } else if (nextUs) {\n            position = targetList.findIndex(function(us) {\n              return us.id === previousUs;\n            });\n          }\n          position++;\n          usList.forEach((function(_this) {\n            return function(us, index) {\n              return targetList.splice(position + index, 0, us);\n            };\n          })(this));\n        }\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      }\n      if (ctx && this.pendingDrag.length > 1) {\n        return;\n      }\n      promise = this.rs.userstories.bulkUpdateBacklogOrder(project, currentSprintId, previousUs, nextUs, bulkUserstories);\n      promise.then((function(_this) {\n        return function(result) {\n          var len3, n, ref1, updatedUs;\n          ref1 = result.data;\n          for (n = 0, len3 = ref1.length; n < len3; n++) {\n            updatedUs = ref1[n];\n            usList.forEach(function(us, index) {\n              if (us.id === updatedUs.id) {\n                us.milestone = updatedUs.milestone;\n                return us.backlog_order = updatedUs.backlog_order;\n              }\n            });\n          }\n          _this.pendingDrag.shift();\n          if (_this.pendingDrag.length) {\n            return _this.scope.$applyAsync(function() {\n              return _this.moveUs(null, _this.pendingDrag[0].usList, _this.pendingDrag[0].newUsIndex, _this.pendingDrag[0].newSprintId, _this.pendingDrag[0].previousUs, _this.pendingDrag[0].nextUs);\n            });\n          } else {\n            _this.rootscope.$broadcast(\"sprint:us:moved\");\n            if (!_this.events.connected) {\n              _this.loadSprints();\n              _this.loadClosedSprints();\n              _this.loadProjectStats();\n            }\n            if (_this.scope.closedSprintsById && _this.scope.closedSprintsById[oldSprintId]) {\n              return _this.rootscope.$broadcast(\"backlog:load-closed-sprints\");\n            }\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    BacklogController.prototype.updateUserStoryStatus = function() {\n      return this.generateFilters().then((function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"filters:update\");\n          _this.loadProjectStats();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.editUserStory = function(projectId, ref, $event) {\n      return this.rs.userstories.getByRef(projectId, ref).then((function(_this) {\n        return function(us) {\n          return _this.rs2.attachments.list(\"us\", us.id, projectId).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': us,\n              'attachments': attachments.toJS()\n            });\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.deleteUserStory = function(us) {\n      var message, title;\n      title = this.translate.instant(\"US.TITLE_DELETE_ACTION\", {\n        projectName: this.scope.project.name\n      });\n      message = this.translate.instant(\"US.TITLE_DELETE_MESSAGE\", {\n        subject: us.subject\n      });\n      return this.confirm.askOnDelete(title, message, '').then((function(_this) {\n        return function(askResponse) {\n          var promise;\n          _this.scope.userstories = _.without(_this.scope.userstories, us);\n          promise = _this.repo.remove(us);\n          promise.then(function() {\n            askResponse.finish();\n            return _this.q.all([_this.loadProjectStats(), _this.loadSprints()]);\n          });\n          return promise.then(null, function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.addNewUs = function(type) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, this.scope.project.default_us_status);\n      }\n    };\n\n    BacklogController.prototype.addNewSprint = function() {\n      return this.rootscope.$broadcast(\"sprintform:create\", this.scope.projectId);\n    };\n\n    BacklogController.prototype.findCurrentSprint = function() {\n      var currentDate;\n      currentDate = new Date().getTime();\n      return _.find(this.scope.sprints, function(sprint) {\n        var end, start;\n        start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x');\n        end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x');\n        return currentDate >= start && currentDate <= end;\n      });\n    };\n\n    BacklogController.prototype.addFilterBacklog = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    BacklogController.prototype.removeFilterBacklog = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    return BacklogController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"BacklogController\", BacklogController);\n\n  BacklogDirective = function($repo, $rootscope, $translate, $rs) {\n    var doomLineTemplate, link, linkDoomLine, linkFilters, linkToolbar, openFilterInit, showHideFilter, showHideTags;\n    doomLineTemplate = _.template(\"<div class=\\\"doom-line\\\"><span><%- text %></span></div>\");\n    linkDoomLine = function($scope, $el, $attrs, $ctrl) {\n      var addDoomLineDom, getUsItems, reloadDoomLine, removeDoomlineDom;\n      reloadDoomLine = function() {\n        var current_sum, domElement, i, j, len, ref1, results, stats, total_points, us;\n        if ($scope.displayVelocity) {\n          removeDoomlineDom();\n        }\n        if (($scope.stats != null) && ($scope.stats.total_points != null) && $scope.stats.total_points !== 0 && ($scope.displayVelocity == null)) {\n          removeDoomlineDom();\n          stats = $scope.stats;\n          total_points = stats.total_points;\n          current_sum = stats.assigned_points;\n          if (!$scope.userstories) {\n            return;\n          }\n          ref1 = $scope.userstories;\n          results = [];\n          for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n            us = ref1[i];\n            current_sum += us.total_points;\n            if (current_sum > total_points) {\n              domElement = $el.find('.backlog-table-body .us-item-row')[i];\n              addDoomLineDom(domElement);\n              break;\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        }\n      };\n      removeDoomlineDom = function() {\n        return $el.find(\".doom-line\").remove();\n      };\n      addDoomLineDom = function(element) {\n        var text;\n        text = $translate.instant(\"BACKLOG.DOOMLINE\");\n        return $(element).before(doomLineTemplate({\n          \"text\": text\n        }));\n      };\n      getUsItems = function() {\n        var rowElements;\n        rowElements = $el.find('.backlog-table-body .us-item-row');\n        return _.map(rowElements, function(x) {\n          return angular.element(x);\n        });\n      };\n      $scope.$on(\"userstories:loaded\", reloadDoomLine);\n      $scope.$on(\"userstories:forecast\", removeDoomlineDom);\n      $scope.$on(\"sprint:us:moved\", reloadDoomLine);\n      return $scope.$watch(\"stats\", reloadDoomLine);\n    };\n    linkToolbar = function($scope, $el, $attrs, $ctrl) {\n      var checkSelected, getUsToMove, lastChecked, moveToCurrentSprint, moveToLatestSprint, moveUssToSprint, shiftPressed;\n      getUsToMove = function() {\n        var ussDom;\n        ussDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        return _.map(ussDom, function(item) {\n          var itemScope;\n          item = $(item).closest('.tg-scope');\n          itemScope = item.scope();\n          itemScope.us.milestone = $scope.sprints[0].id;\n          return itemScope.us;\n        });\n      };\n      moveUssToSprint = function(selectedUss, sprint) {\n        var data, extraPoints, totalExtraPoints, ussCurrent;\n        ussCurrent = _($scope.userstories);\n        $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value();\n        extraPoints = _.map(selectedUss, function(v, k) {\n          return v.total_points;\n        });\n        totalExtraPoints = _.reduce(extraPoints, function(acc, num) {\n          return acc + num;\n        });\n        sprint.user_stories = _.union(sprint.user_stories, selectedUss);\n        sprint.total_points += totalExtraPoints;\n        data = _.map(selectedUss, function(us) {\n          return {\n            us_id: us.id,\n            order: us.sprint_order\n          };\n        });\n        $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then((function(_this) {\n          return function() {\n            $ctrl.loadSprints();\n            $ctrl.loadProjectStats();\n            $ctrl.toggleVelocityForecasting();\n            return $ctrl.calculateForecasting();\n          };\n        })(this));\n        return $el.find(\".move-to-sprint\").hide();\n      };\n      moveToCurrentSprint = function(selectedUss) {\n        var sprint;\n        sprint = $scope.currentSprint ? $scope.currentSprint : $scope.sprints[0];\n        return moveUssToSprint(selectedUss, sprint);\n      };\n      moveToLatestSprint = function(selectedUss) {\n        return moveUssToSprint(selectedUss, $scope.sprints[0]);\n      };\n      $scope.$on(\"sprintform:create:success:callback\", function(e, ussToMove) {\n        if (ussToMove) {\n          return _.partial(moveToCurrentSprint, ussToMove)();\n        }\n      });\n      shiftPressed = false;\n      lastChecked = null;\n      checkSelected = function(target) {\n        var moveToSprintDom, selectedUsDom;\n        lastChecked = target.closest(\".us-item-row\");\n        target.closest('.us-item-row').toggleClass('ui-multisortable-multiple');\n        moveToSprintDom = $el.find(\".move-to-sprint\");\n        selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        if (selectedUsDom.length > 0 && $scope.sprints.length > 0) {\n          return moveToSprintDom.css('display', 'flex');\n        } else {\n          return moveToSprintDom.hide();\n        }\n      };\n      $(window).on(\"keydown.shift-pressed keyup.shift-pressed\", function(event) {\n        shiftPressed = !!event.shiftKey;\n        return true;\n      });\n      $el.on(\"change\", \".backlog-table-body input:checkbox\", function(event) {\n        var current, elements, nextAll, prevAll, target;\n        if (lastChecked && shiftPressed) {\n          elements = [];\n          current = $(event.currentTarget).closest(\".us-item-row\");\n          nextAll = lastChecked.nextAll();\n          prevAll = lastChecked.prevAll();\n          if (_.some(nextAll, function(next) {\n            return next === current[0];\n          })) {\n            elements = lastChecked.nextUntil(current);\n          } else if (_.some(prevAll, function(prev) {\n            return prev === current[0];\n          })) {\n            elements = lastChecked.prevUntil(current);\n          }\n          _.map(elements, function(elm) {\n            var input;\n            input = $(elm).find(\"input:checkbox\");\n            input.prop('checked', true);\n            return checkSelected(input);\n          });\n        }\n        target = angular.element(event.currentTarget);\n        target.closest(\".us-item-row\").toggleClass('is-checked');\n        return checkSelected(target);\n      });\n      $el.on(\"click\", \"#move-to-latest-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToLatestSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"click\", \"#move-to-current-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"change\", \"#show-tags > input\", function(event) {\n        event.preventDefault();\n        $ctrl.toggleShowTags();\n        return showHideTags($ctrl);\n      });\n      return $el.on(\"click\", \".forecasting-add-sprint\", function(event) {\n        var ussToMove, ussToMoveList;\n        ussToMoveList = $ctrl.forecastedStories;\n        if (!$scope.forecastNewSprint) {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.milestone = $scope.sprints[0].id;\n            us.order = index;\n            return us;\n          });\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        } else {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.order = index;\n            return us;\n          });\n          return $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove);\n        }\n      });\n    };\n    showHideTags = function($ctrl) {\n      var elm;\n      elm = angular.element(\"#show-tags\");\n      if ($ctrl.showTags) {\n        return elm.addClass(\"active\");\n      } else {\n        return elm.removeClass(\"active\");\n      }\n    };\n    openFilterInit = function($scope, $el, $ctrl) {\n      var sidebar;\n      sidebar = $el.find(\".backlog-filter\");\n      sidebar.addClass(\"active\");\n      return $ctrl.activeFilters = true;\n    };\n    showHideFilter = function($scope, $el, $ctrl) {\n      var filter, target;\n      filter = $el.find(\".backlog-filter\");\n      target = angular.element(\"#show-filters-button\");\n      filter.toggleClass(\"active\");\n      target.toggleClass(\"active\");\n      return $ctrl.toggleActiveFilters();\n    };\n    linkFilters = function($scope, $el, $attrs, $ctrl) {\n      $scope.filtersSearch = {};\n      return $el.on(\"click\", \"#show-filters-button\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          return showHideFilter($scope, $el, $ctrl);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs, $rootscope) {\n      var $ctrl, filters;\n      $ctrl = $el.controller();\n      linkToolbar($scope, $el, $attrs, $ctrl);\n      linkFilters($scope, $el, $attrs, $ctrl);\n      linkDoomLine($scope, $el, $attrs, $ctrl);\n      filters = $ctrl.location.search();\n      if (filters.status || filters.tags || filters.assigned_to || filters.owner) {\n        openFilterInit($scope, $el, $ctrl);\n      }\n      $scope.$on(\"showTags\", function() {\n        return showHideTags($ctrl);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $(window).off(\".shift-pressed\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective]);\n\n  UsEditSelector = function($rootscope, $tgTemplate, $compile, $translate) {\n    var link, mainTemplate;\n    mainTemplate = $tgTemplate.get(\"backlog/us-edit-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, removePopupOpenState;\n      $ctrl = $el.controller();\n      removePopupOpenState = function() {\n        $el.find(\".js-popup-button\").removeClass('popover-open');\n        return $(this).remove();\n      };\n      $el.on(\"click\", function(event) {\n        var html;\n        html = $compile(mainTemplate())($scope);\n        $el.find(\".js-popup-button\").addClass('popover-open');\n        $el.append(html);\n        $el.find(\".us-option-popup\").popover().open(function() {\n          return removePopupOpenState();\n        });\n        if (event.target.parentNode.classList.contains('first')) {\n          return $el.find(\".us-option-popup\").addClass('first');\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsEditSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsEditSelector]);\n\n  UsRolePointsSelectorDirective = function($rootscope, $template, $compile, $translate) {\n    var link, selectionTemplate;\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var removePopupOpenState;\n      removePopupOpenState = function() {\n        return $el.removeClass('popover-open');\n      };\n      bindOnce($scope, \"project\", function(project) {\n        var numberOfRoles, roles;\n        roles = _.filter(project.roles, \"computable\");\n        numberOfRoles = _.size(roles);\n        if (numberOfRoles > 1) {\n          return $el.append($compile(selectionTemplate({\n            \"roles\": roles\n          }))($scope));\n        } else {\n          $el.find(\".icon-arrow-down\").remove();\n          return $el.find(\".header-points\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        $el.find(\".popover\").popover().close();\n        return $el.find(\".header-points\").html(\"\" + roleName);\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx, roleId) {\n        var text;\n        $el.find(\".popover\").popover().close();\n        text = $translate.instant(\"COMMON.FIELDS.POINTS\");\n        return $el.find(\".header-points\").text(text);\n      });\n      $el.on(\"click\", function(event) {\n        var target;\n        target = angular.element(event.target);\n        if (target.is(\"span\") || target.is(\"div\")) {\n          event.stopPropagation();\n        }\n        $el.addClass('popover-open');\n        return $el.find(\".popover\").popover().open(function() {\n          return removePopupOpenState();\n        });\n      });\n      $el.on(\"click\", \".clear-selection\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $rootscope.$broadcast(\"uspoints:clear-selection\");\n        $el.find('.active-popover').removeClass('active-popover');\n        return target.addClass('active-popover');\n      });\n      $el.on(\"click\", \".role\", function(event) {\n        var rolScope, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        $el.find('.active-popover').removeClass('active-popover');\n        target.addClass('active-popover');\n        rolScope = target.scope();\n        return $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective]);\n\n  UsPointsDirective = function($tgEstimationsService, $repo, $tgTemplate) {\n    var link, rolesTemplate;\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, bindClickElements, estimationProcess, filteringRoleId, renderRolesSelector, selectedRoleId, updatingSelectedRoleId;\n      $ctrl = $el.controller();\n      updatingSelectedRoleId = null;\n      selectedRoleId = null;\n      filteringRoleId = null;\n      estimationProcess = null;\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = roleId;\n        return estimationProcess.render();\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = null;\n        return estimationProcess.render();\n      });\n      $scope.$watch($attrs.tgBacklogUsPoints, function(us) {\n        var roles;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          roles = estimationProcess.calculateRoles();\n          if (roles.length === 0) {\n            $el.find(\".icon-arrow-bottom\").remove();\n            $el.find(\"a.us-points\").addClass(\"not-clickable\");\n          } else if (roles.length === 1) {\n            selectedRoleId = _.keys(us.points)[0];\n          }\n          if (estimationProcess.isEditable) {\n            bindClickElements();\n          }\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return this.save(roleId, pointId).then(function() {\n              return $ctrl.loadProjectStats();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, pointId, pointObj, template, text, title, totalPoints;\n            totalPoints = this.calculateTotalPoints();\n            if ((selectedRoleId == null) || roles.length === 1) {\n              text = totalPoints;\n              title = totalPoints;\n            } else {\n              pointId = this.us.points[selectedRoleId];\n              pointObj = this.pointsById[pointId];\n              text = pointObj.name + \" / <span>\" + totalPoints + \"</span>\";\n              title = pointObj.name + \" / \" + totalPoints;\n            }\n            ctx = {\n              totalPoints: totalPoints,\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              text: text,\n              title: title\n            };\n            mainTemplate = \"common/estimation/us-estimation-total.html\";\n            template = $tgTemplate.get(mainTemplate, true);\n            html = template(ctx);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      renderRolesSelector = function() {\n        var html, roles;\n        roles = estimationProcess.calculateRoles();\n        html = rolesTemplate({\n          \"roles\": roles\n        });\n        $el.append(html);\n        return $el.find(\".pop-role\").popover().open(function() {\n          return $(this).remove();\n        });\n      };\n      bindClickElements = function() {\n        $el.on(\"click\", \".us-points\", function(event) {\n          var us;\n          event.preventDefault();\n          event.stopPropagation();\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = selectedRoleId;\n          if (selectedRoleId != null) {\n            return estimationProcess.renderPointsSelector(selectedRoleId);\n          } else {\n            return renderRolesSelector();\n          }\n        });\n        return $el.on(\"click\", \".role\", function(event) {\n          var popRolesDom, target, us;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = target.data(\"role-id\");\n          popRolesDom = $el.find(\".pop-role\");\n          popRolesDom.find(\"a\").removeClass(\"active\");\n          popRolesDom.find(\"a[data-role-id='\" + updatingSelectedRoleId + \"']\").addClass(\"active\");\n          return estimationProcess.renderPointsSelector(updatingSelectedRoleId);\n        });\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective]);\n\n  ToggleBurndownVisibility = function($storage) {\n    var hide, link, show;\n    hide = function() {\n      $(\".js-burndown-graph\").removeClass(\"shown\");\n      $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\");\n      return $(\".js-burndown-graph\").removeClass(\"open\");\n    };\n    show = function(firstLoad) {\n      $(\".js-toggle-burndown-visibility-button\").addClass(\"active\");\n      if (firstLoad) {\n        return $(\".js-burndown-graph\").addClass(\"shown\");\n      } else {\n        return $(\".js-burndown-graph\").addClass(\"open\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var firstLoad, hash, toggleGraph;\n      firstLoad = true;\n      hash = generateHash([\"is-burndown-grpahs-collapsed\"]);\n      $scope.isBurndownGraphCollapsed = $storage.get(hash) || false;\n      toggleGraph = function() {\n        if ($scope.isBurndownGraphCollapsed) {\n          hide(firstLoad);\n        } else {\n          show(firstLoad);\n        }\n        return firstLoad = false;\n      };\n      $scope.$watch(\"showGraphPlaceholder\", function() {\n        if ($scope.showGraphPlaceholder != null) {\n          $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder;\n          return toggleGraph();\n        }\n      });\n      $el.on(\"click\", \".js-toggle-burndown-visibility-button\", function() {\n        $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed;\n        $storage.set(hash, $scope.isBurndownGraphCollapsed);\n        return toggleGraph();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility]);\n\n  BurndownBacklogGraphDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var client_increment_line, colors, data, evolution_line, j, milestonesRange, optimal_line, options, ref1, results, team_increment_line, width, zero_line;\n      width = element.width();\n      element.height(width / 6);\n      milestonesRange = (function() {\n        results = [];\n        for (var j = 0, ref1 = dataToDraw.milestones.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; 0 <= ref1 ? j++ : j--){ results.push(j); }\n        return results;\n      }).apply(this);\n      data = [];\n      zero_line = _.map(dataToDraw.milestones, function(ml) {\n        return 0;\n      });\n      data.push({\n        data: _.zip(milestonesRange, zero_line),\n        lines: {\n          fillColor: \"rgba(0,0,0,0)\"\n        },\n        points: {\n          show: false\n        }\n      });\n      optimal_line = _.map(dataToDraw.milestones, function(ml) {\n        return ml.optimal;\n      });\n      data.push({\n        data: _.zip(milestonesRange, optimal_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      evolution_line = _.filter(_.map(dataToDraw.milestones, function(ml) {\n        return ml.evolution;\n      }), function(evolution) {\n        return evolution != null;\n      });\n      data.push({\n        data: _.zip(milestonesRange, evolution_line),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      client_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"] - ml[\"client-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, client_increment_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      team_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, team_increment_line),\n        lines: {\n          fillColor: \"rgba(255,160,160,0.2)\"\n        }\n      });\n      colors = [\"rgba(200,201,196,0.2)\", \"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\", \"rgba(216,222,233,1)\", \"rgba(255,160,160,1)\"];\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 20,\n            left: 5,\n            bottom: 0\n          }\n        },\n        xaxis: {\n          ticks: dataToDraw.milestones.length,\n          axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5,\n          tickFormatter: function(val, axis) {\n            return \"\";\n          }\n        },\n        yaxis: {\n          axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: colors,\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var ctx;\n            if (flotItem.seriesIndex === 1) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx);\n            } else if (flotItem.seriesIndex === 2) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.REAL\", ctx);\n            } else if (flotItem.seriesIndex === 3) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx);\n            } else {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx);\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch(\"stats\", function(value) {\n        if ($scope.stats != null) {\n          redrawChart(element, $scope.stats);\n          return $scope.$on(\"resize\", function() {\n            return redrawChart(element, $scope.stats);\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective]);\n\n  TgBacklogProgressBarDirective = function($template, $compile) {\n    var adjustPercentaje, link, render, template;\n    template = $template.get(\"backlog/progress-bar.html\", true);\n    render = function(scope, el, projectPointsPercentaje, closedPointsPercentaje) {\n      var html;\n      html = template({\n        projectPointsPercentaje: projectPointsPercentaje,\n        closedPointsPercentaje: closedPointsPercentaje\n      });\n      html = $compile(html)(scope);\n      return el.html(html);\n    };\n    adjustPercentaje = function(percentage) {\n      var adjusted;\n      adjusted = _.max([0, percentage]);\n      adjusted = _.min([100, adjusted]);\n      return Math.round(adjusted);\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgBacklogProgressBar, function(stats) {\n        var closedPoints, closedPointsPercentaje, definedPoints, projectPointsPercentaje, totalPoints;\n        if (stats != null) {\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          definedPoints = stats.defined_points;\n          closedPoints = stats.closed_points;\n          if (definedPoints > totalPoints) {\n            projectPointsPercentaje = totalPoints * 100 / definedPoints;\n            closedPointsPercentaje = closedPoints * 100 / definedPoints;\n          } else {\n            projectPointsPercentaje = 100;\n            closedPointsPercentaje = closedPoints * 100 / totalPoints;\n          }\n          projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3);\n          closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3);\n          return render($scope, $el, projectPointsPercentaje, closedPointsPercentaje);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSortableDirective, bindOnce, deleteElement, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  deleteElement = function(el) {\n    $(el).scope().$destroy();\n    $(el).off();\n    return $(el).remove();\n  };\n\n  BacklogSortableDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$scope.ctrl) {\n        console.error('BacklogSortableDirective must have access to to BacklogCtrl');\n      }\n      return bindOnce($scope, \"project\", function(project) {\n        var drake, emptyBacklog, initIsBacklog, nextUs, oldIndex, previousUs, scroll;\n        if (!(project.my_permissions.indexOf(\"modify_us\") > -1)) {\n          return;\n        }\n        initIsBacklog = false;\n        emptyBacklog = $('.js-empty-backlog');\n        previousUs = null;\n        nextUs = null;\n        oldIndex = null;\n        drake = dragula([$el[0], emptyBacklog[0], emptyBacklog[1]], {\n          copySortSource: false,\n          copy: false,\n          isContainer: function(el) {\n            return el.classList.contains('sprint-table');\n          },\n          moves: function(item) {\n            if (!$(item).hasClass('row')) {\n              return false;\n            }\n            return true;\n          }\n        });\n        drake.on('drop', function(item, target, source, sibling) {\n          var next, prev;\n          previousUs = null;\n          nextUs = null;\n          prev = $(item).prevAll('.row:not(.gu-transit)');\n          next = $(item).nextAll('.row:not(.gu-transit)');\n          previousUs = null;\n          if (prev.length && prev[0].dataset.id) {\n            previousUs = Number(prev[0].dataset.id);\n          }\n          nextUs = null;\n          if (!previousUs && next.length && next[0].dataset.id) {\n            return nextUs = Number(next[0].dataset.id);\n          }\n        });\n        drake.on('drag', function(item, container) {\n          var dragMultipleItems, firstElement, isChecked, parent, parentEl;\n          if ($scope.ctrl.displayVelocity) {\n            $scope.ctrl.toggleVelocityForecasting();\n          }\n          parent = $(item).parent();\n          initIsBacklog = parent.hasClass('backlog-table-body');\n          $(document.body).addClass(\"drag-active\");\n          isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\");\n          window.dragMultiple.start(item, container);\n          dragMultipleItems = window.dragMultiple.getElements();\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          parentEl = item.parentNode;\n          oldIndex = $(parentEl).find('tg-card').index(firstElement);\n          if (initIsBacklog) {\n            return oldIndex = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            return oldIndex = $(firstElement).index();\n          }\n        });\n        drake.on('cloned', function(item) {\n          return $(item).addClass('multiple-drag-mirror');\n        });\n        drake.on('dragend', function(item) {\n          var dragMultipleItems, firstElement, index, isBacklog, parent, ref, sameContainer, sprint, usList;\n          $('.doom-line').remove();\n          parent = $(item).parent();\n          isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog');\n          if (initIsBacklog || isBacklog) {\n            sameContainer = initIsBacklog === isBacklog;\n          } else {\n            sameContainer = parent && $(item).scope().sprint.id === parent.scope().sprint.id;\n          }\n          dragMultipleItems = window.dragMultiple.stop();\n          $(document.body).removeClass(\"drag-active\");\n          sprint = null;\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          if (isBacklog) {\n            index = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            index = $(firstElement).index();\n            sprint = (ref = parent.scope()) != null ? ref.sprint.id : void 0;\n          }\n          if (index === oldIndex && sameContainer) {\n            return;\n          }\n          if (!sameContainer) {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n            if (dragMultipleItems.length) {\n              _.each(dragMultipleItems, function(item) {\n                return deleteElement(item);\n              });\n            } else {\n              deleteElement(item);\n            }\n          } else {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n          }\n          return $scope.$applyAsync((function(_this) {\n            return function() {\n              return $scope.ctrl.moveUs(\"sprint:us:move\", usList, index, sprint, previousUs, nextUs);\n            };\n          })(this));\n        });\n        scroll = autoScroll([window], {\n          margin: 20,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSortable\", BacklogSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSprintDirective, BacklogSprintHeaderDirective, SprintDirective, ToggleExcludeClosedSprintsVisualization, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogSprintDirective = function($repo, $rootscope) {\n    var link, slideOptions, sprintTableMinHeight, toggleSprint;\n    sprintTableMinHeight = 50;\n    slideOptions = {\n      duration: 500,\n      easing: 'linear'\n    };\n    toggleSprint = (function(_this) {\n      return function($el) {\n        var sprintArrow, sprintTable;\n        sprintTable = $el.find(\".sprint-table\");\n        sprintArrow = $el.find(\".compact-sprint\");\n        sprintArrow.toggleClass('active');\n        return sprintTable.toggleClass('open');\n      };\n    })(this);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch($attrs.tgBacklogSprint, function(sprint) {\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        if (sprint.closed) {\n          return $el.addClass(\"sprint-closed\");\n        } else {\n          return toggleSprint($el);\n        }\n      });\n      $el.on(\"click\", \".sprint-name > .compact-sprint\", function(event) {\n        event.preventDefault();\n        toggleSprint($el);\n        return $el.find(\".sprint-table\").slideToggle(slideOptions);\n      });\n      $el.on(\"click\", \".edit-sprint\", function(event) {\n        var sprint;\n        event.preventDefault();\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        return $rootscope.$broadcast(\"sprintform:edit\", sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective]);\n\n  BacklogSprintHeaderDirective = function($navUrls, $template, $compile, $translate) {\n    var link, template;\n    template = $template.get(\"backlog/sprint-header.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, isVisible, prettyDate, render;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_milestone\") !== -1;\n      };\n      isVisible = function() {\n        return $scope.project.my_permissions.indexOf(\"view_milestones\") !== -1;\n      };\n      render = function(sprint) {\n        var compiledTemplate, ctx, estimatedDateRange, finish, start, taskboardUrl, templateScope;\n        taskboardUrl = $navUrls.resolve(\"project-taskboard\", {\n          project: $scope.project.slug,\n          sprint: sprint.slug\n        });\n        start = moment(sprint.estimated_start).format(prettyDate);\n        finish = moment(sprint.estimated_finish).format(prettyDate);\n        estimatedDateRange = start + \"-\" + finish;\n        ctx = {\n          name: sprint.name,\n          taskboardUrl: taskboardUrl,\n          estimatedDateRange: estimatedDateRange,\n          closedPoints: sprint.closed_points || 0,\n          totalPoints: sprint.total_points || 0,\n          isVisible: isVisible(),\n          isEditable: isEditable()\n        };\n        templateScope = $scope.$new();\n        _.assign(templateScope, ctx);\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n      $scope.$watch(\"sprint\", function(sprint) {\n        return render(sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\", BacklogSprintHeaderDirective]);\n\n  ToggleExcludeClosedSprintsVisualization = function($rootscope, $loading, $translate) {\n    var excludeClosedSprints, link;\n    excludeClosedSprints = true;\n    link = function($scope, $el, $attrs) {\n      var currentLoading, loadingElm;\n      loadingElm = $(\"<div>\");\n      $el.after(loadingElm);\n      currentLoading = null;\n      $el.on(\"click\", function(event) {\n        event.preventDefault();\n        excludeClosedSprints = !excludeClosedSprints;\n        currentLoading = $loading().target(loadingElm).start();\n        if (excludeClosedSprints) {\n          return $rootscope.$broadcast(\"backlog:unload-closed-sprints\");\n        } else {\n          return $rootscope.$broadcast(\"backlog:load-closed-sprints\");\n        }\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $scope.$on(\"closed-sprints:reloaded\", function(ctx, sprints) {\n        var key, text;\n        if (currentLoading) {\n          currentLoading.finish();\n        }\n        if (sprints.length > 0) {\n          key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\";\n        } else {\n          key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\";\n        }\n        text = $translate.instant(key);\n        return $el.find(\".text\").text(text);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\", ToggleExcludeClosedSprintsVisualization]);\n\n  SprintDirective = function(avatarService) {\n    return {\n      templateUrl: 'backlog/sprint.html',\n      scope: {\n        sprint: '=',\n        project: '='\n      }\n    };\n  };\n\n  SprintDirective.$inject = [];\n\n  module.directive(\"tgSprint\", SprintDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SprintChartDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  SprintChartDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var data, days, options, width;\n      width = element.width();\n      element.height(240);\n      days = _.map(dataToDraw, function(x) {\n        return moment.utc(x.day);\n      });\n      data = [];\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.open_points;\n        })),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.optimal_points;\n        })),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 30,\n            left: 5,\n            bottom: 5\n          }\n        },\n        xaxis: {\n          tickSize: [1, \"day\"],\n          min: days[0],\n          max: _.last(days),\n          mode: \"time\",\n          daysNames: days,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        yaxis: {\n          min: 0,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: [\"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\"],\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var formattedDate, roundedValue;\n            formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"));\n            roundedValue = Math.round(yval * 10) / 10;\n            if (flotItem.seriesIndex === 1) {\n              return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            } else {\n              return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$on(\"resize\", function() {\n        if ($scope.stats) {\n          return redrawChart(element, $scope.stats.days);\n        }\n      });\n      $scope.$on(\"taskboard:graph:toggle-visibility\", function() {\n        $el.parent().toggleClass('open');\n        return timeout(100, function() {\n          if ($scope.stats) {\n            return redrawChart(element, $scope.stats.days);\n          }\n        });\n      });\n      $scope.$watch('stats', function(value) {\n        if ($scope.stats == null) {\n          return;\n        }\n        return redrawChart(element, $scope.stats.days);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintChart\", [\"$translate\", SprintChartDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkTasksDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  CreateBulkTasksDirective = function($repo, $rs, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var submit, submitButton;\n      $scope.form = {\n        data: \"\",\n        usId: null\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, data, form, projectId, promise, sprintId, usId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          data = $scope.form.data;\n          projectId = $scope.projectId;\n          sprintId = $scope.form.sprintId;\n          usId = $scope.form.usId;\n          promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data);\n          promise.then(function(result) {\n            result = _.map(result, (function(_this) {\n              return function(x) {\n                return $model.make_model('tasks', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"taskform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function() {\n            return currentLoading.finish();\n          });\n        };\n      })(this));\n      $scope.$on(\"taskform:bulk\", function(ctx, sprintId, usId) {\n        lightboxService.open($el);\n        return $scope.form = {\n          data: \"\",\n          sprintId: sprintId,\n          usId: usId\n        };\n      });\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkTasksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardController, TaskboardDirective, TaskboardSquishColumnDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  toggleText = this.taiga.toggleText;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  TaskboardController = (function(superClass) {\n    extend(TaskboardController, superClass);\n\n    TaskboardController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"tgAppMetaService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgTaskboardTasks\", \"tgTaskboardIssues\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgLightboxFactory\", \"$timeout\", \"tgProjectService\"];\n\n    TaskboardController.prototype.excludePrefix = \"exclude_\";\n\n    TaskboardController.prototype.filterCategories = [\"status\", \"assigned_to\", \"owner\", \"role\", \"tags\"];\n\n    TaskboardController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by', 'tags'];\n\n    function TaskboardController(scope, rootscope, repo, confirm, rs1, rs2, params1, q1, appMetaService, location, navUrls, events, analytics, translate, errorHandlingService, taskboardTasksService, taskboardIssuesService, storage, filterRemoteStorageService, lightboxFactory, timeout1, projectService) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q1;\n      this.appMetaService = appMetaService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.taskboardTasksService = taskboardTasksService;\n      this.taskboardIssuesService = taskboardIssuesService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.lightboxFactory = lightboxFactory;\n      this.timeout = timeout1;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.taskboardTasksService.reset();\n      this.scope.userstories = [];\n      this.openFilter = false;\n      this.filterQ = '';\n      this.backToBacklogUrl = this.navUrls.resolve('project-backlog', {\n        project: this.projectService.project.get('slug'),\n        ref: this.params.ref\n      });\n      if (this.applyStoredFilters(this.params.pslug, \"tasks-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"TASKBOARD.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usTasks\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.usTasks;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"taskMap\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.taskMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"milestoneIssues\", (function(_this) {\n        return function() {\n          return _this.taskboardIssuesService.milestoneIssues;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"tasksByUs\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.tasksByUs;\n        };\n      })(this));\n      this.scope.issues = [];\n      this.scope.showTags = true;\n      this.scope.$watch('milestoneIssues', (function(_this) {\n        return function() {\n          if (_this.scope.milestoneIssues) {\n            return _this.scope.issues = _this.scope.milestoneIssues.toJS().map(function(milestoneIssue) {\n              return _this.taskboardIssuesService.issuesRaw.find(function(rawIssue) {\n                return milestoneIssue.model.id === rawIssue.id;\n              });\n            });\n          } else {\n            return _this.scope.issues = [];\n          }\n        };\n      })(this));\n    }\n\n    TaskboardController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    TaskboardController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    TaskboardController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      if (this.zoomLevel === Number(zoomLevel)) {\n        return null;\n      }\n      this.isFirstLoad = !this.zoomLevel;\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 1 && previousZoomLevel <= 1) {\n        this.zoomLoading = true;\n        return this.q.all([this.loadTasks(), this.loadIssues()]).then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.getQueryParams();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.generateFilters = function() {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, \"tasks-filters\");\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.milestone = this.scope.sprintId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.tasks.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters')]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype._setMeta = function() {\n      var description, prettyDate, title;\n      prettyDate = this.translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      title = this.translate.instant(\"TASKBOARD.PAGE_TITLE\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name\n      });\n      description = this.translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name,\n        startDate: moment(this.scope.sprint.estimated_start).format(prettyDate),\n        endDate: moment(this.scope.sprint.estimated_finish).format(prettyDate),\n        completedPercentage: this.scope.stats.completedPercentage || \"0\",\n        completedPoints: this.scope.stats.completedPointsSum || \"--\",\n        totalPoints: this.scope.stats.totalPointsSum || \"--\",\n        openTasks: this.scope.stats.openTasks || \"--\",\n        totalTasks: this.scope.stats.total_tasks || \"--\"\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskboardController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"taskform:bulk:success\", (function(_this) {\n        return function(event, tasks) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(tasks);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:new:success\", (function(_this) {\n        return function(event, task) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(task);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:edit:success\", (function(_this) {\n        return function(event, task) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.replaceModel(task);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function(event, issue) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n          return _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"issueform:add:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:edit:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.replaceModel(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:deleted\", (function(_this) {\n        return function(event, task) {\n          return _this.loadTasks();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:issue:deleted\", (function(_this) {\n        return function(event, issue) {\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:move\", this.taskMove);\n      this.scope.$on(\"assigned-to:added\", this.onAssignedToChanged);\n      return this.scope.$on(\"taskboard:items:move\", (function(_this) {\n        return function(event, itemsMoved) {\n          if (itemsMoved.uss) {\n            return _this.firstLoad();\n          } else {\n            if (itemsMoved.tasks) {\n              _this.loadTasks();\n            }\n            if (itemsMoved.issues) {\n              return _this.loadIssues();\n            }\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.onAssignedToChanged = function(ctx, userid, model) {\n      if (model.getName() === 'tasks') {\n        model.assigned_to = userid;\n        this.taskboardTasksService.replaceModel(model);\n        this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadTasks();\n            }\n          };\n        })(this));\n      }\n      if (model.getName() === 'issues') {\n        model.assigned_to = userid;\n        this.taskboardIssuesService.replaceModel(model);\n        return this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadIssues();\n            }\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.initializeSubscription = function() {\n      var routingKey, routingKey1;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".tasks\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadTaskboard();\n        };\n      })(this)));\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      return this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.refreshTagsColors();\n          _this.loadSprintStats();\n          return _this.loadSprint();\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadProject = function() {\n      return this.rs.projects.get(this.scope.projectId).then((function(_this) {\n        return function(project) {\n          if (!project.is_backlog_activated) {\n            _this.errorHandlingService.permissionDenied();\n          }\n          _this.scope.project = project;\n          _this.scope.pointsList = _.sortBy(project.points, \"order\");\n          _this.scope.pointsById = groupBy(project.points, function(e) {\n            return e.id;\n          });\n          _this.scope.roleById = groupBy(project.roles, function(e) {\n            return e.id;\n          });\n          _this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n          _this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n          _this.scope.usStatusById = groupBy(project.us_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.issueStatusById = groupBy(project.issue_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.$emit('project:loaded', project);\n          _this.fillUsersAndRoles(project.members, project.roles);\n          return project;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprintStats = function() {\n      return this.rs.sprints.stats(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(stats) {\n          var completedPointsSum, remainingPointsSum, remainingTasks, totalPointsSum;\n          totalPointsSum = _.reduce(_.values(stats.total_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          completedPointsSum = _.reduce(_.values(stats.completed_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          remainingPointsSum = totalPointsSum - completedPointsSum;\n          remainingTasks = stats.total_tasks - stats.completed_tasks;\n          _this.scope.stats = stats;\n          _this.scope.stats.totalPointsSum = totalPointsSum;\n          _this.scope.stats.completedPointsSum = completedPointsSum;\n          _this.scope.stats.remainingPointsSum = remainingPointsSum;\n          _this.scope.stats.remainingTasks = remainingTasks;\n          if (stats.totalPointsSum) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.completedPointsSum / stats.totalPointsSum);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.stats.openTasks = stats.total_tasks - stats.completed_tasks;\n          return stats;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprint = function() {\n      return this.rs.sprints.get(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(sprint) {\n          _this.scope.sprint = sprint;\n          _this.scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          _this.taskboardTasksService.setUserstories(_this.scope.userstories);\n          _this.rootscope.$broadcast(\"taskboard:userstories:loaded\", _this.scope.userstories);\n          return sprint;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadIssues = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      return this.rs.issues.listInProject(this.scope.projectId, this.scope.sprintId, params).then((function(_this) {\n        return function(issues) {\n          _this.taskboardIssuesService.init(_this.scope.project, _this.scope.usersById, _this.scope.issueStatusById);\n          _this.taskboardIssuesService.set(issues);\n          return _this.initIssues = true;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTasks = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return this.rs.tasks.list(this.scope.projectId, this.scope.sprintId, null, params).then((function(_this) {\n        return function(tasks) {\n          _this.notFoundTasks = false;\n          if (!tasks.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(locationParams).length)) {\n            _this.notFoundTasks = true;\n          }\n          _this.taskboardTasksService.init(_this.scope.project, _this.scope.usersById);\n          return _this.taskboardTasksService.set(tasks);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTaskboard = function() {\n      return this.q.all([\n        this.refreshTagsColors(), this.loadSprintStats(), this.loadSprint().then((function(_this) {\n          return function() {\n            _this.loadTasks();\n            return _this.loadIssues();\n          };\n        })(this))\n      ]);\n    };\n\n    TaskboardController.prototype.loadInitialData = function() {\n      var params, promise;\n      this.initialLoad = false;\n      this.initIssues = false;\n      params = {\n        pslug: this.params.pslug,\n        sslug: this.params.sslug\n      };\n      promise = this.repo.resolve(params).then((function(_this) {\n        return function(data) {\n          _this.scope.projectId = data.project;\n          _this.scope.sprintId = data.milestone;\n          _this.initializeSubscription();\n          return data;\n        };\n      })(this));\n      return promise.then((function(_this) {\n        return function() {\n          return _this.loadProject();\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.rs.issues.getSprintShowTags(_this.scope.projectId) === false) {\n            _this.scope.showTags = false;\n          }\n          return _this.loadTaskboard().then(function() {\n            _this.timeout(function() {\n              return _this.initialLoad = true;\n            }, 0, false);\n            return _this.setRolePoints();\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.toggleTags = function(tags) {\n      return this.rs.issues.storeSprintShowTags(this.scope.projectId, tags);\n    };\n\n    TaskboardController.prototype.showPlaceHolder = function(statusId, usId) {\n      if (!this.taskboardTasksService.tasksRaw.length) {\n        if (this.scope.taskStatusList[0].id === statusId && (!this.scope.userstories.length || this.scope.userstories[0].id === usId)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.editTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-edit', true);\n      this.taskboardTasksService.replace(task);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingTask) {\n          return _this.rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'task',\n              'obj': editingTask,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            task = task.set('loading-edit', false);\n            return _this.taskboardTasksService.replace(task);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.editIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-edit', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingIssue) {\n          return _this.rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'issue',\n              'obj': editingIssue,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            return issue = issue.set('loading-edit', false);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-delete', true);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingTask) {\n          var message, title;\n          task = task.set('loading-delete', false);\n          title = _this.translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          message = deletingTask.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingTask);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:task:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.ACTION_DELETE\");\n          message = deletingIssue.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingIssue);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:issue:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.removeIssueFromSprint = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(removingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: _this.scope.sprint.name\n          });\n          return _this.confirm.ask(title, null, message).then(function(askResponse) {\n            var promise;\n            removingIssue.milestone = null;\n            promise = _this.repo.save(removingIssue);\n            promise.then(function() {\n              _this.taskboardIssuesService.remove(removingIssue);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.taskMove = function(ctx, task, oldStatusId, usId, statusId, order) {\n      var moveUpdateData, options, params, promise;\n      this.scope.movingTask = true;\n      task = this.taskboardTasksService.getTaskModel(task.get('id'));\n      moveUpdateData = this.taskboardTasksService.move(task.id, usId, statusId, order);\n      params = {\n        status__is_archived: false,\n        include_attachments: true\n      };\n      options = {\n        headers: {\n          \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\n        }\n      };\n      return promise = this.repo.save(task, true, params, options, true).then((function(_this) {\n        return function(result) {\n          var headers;\n          if (result[0] && result[0].user_story) {\n            _this.reloadUserStory(result[0].user_story);\n          }\n          _this.scope.movingTask = false;\n          headers = result[1];\n          if (headers && headers['taiga-info-order-updated']) {\n            order = JSON.parse(headers['taiga-info-order-updated']);\n            _this.taskboardTasksService.assignOrders(order);\n          }\n          _this.loadSprintStats();\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.loadTasks();\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.reloadUserStory = function(userStoryId) {\n      return this.rs.userstories.get(this.scope.project.id, userStoryId).then((function(_this) {\n        return function(us) {\n          return _this.scope.userstories = _.map(_this.scope.userstories, function(x) {\n            if (x.id === us.id) {\n              return us;\n            } else {\n              return x;\n            }\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.addNewTask = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'task',\n            'project': this.scope.project,\n            'sprintId': this.scope.sprintId,\n            'usId': us != null ? us.id : void 0\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"taskform:bulk\", this.scope.sprintId, us != null ? us.id : void 0);\n      }\n    };\n\n    TaskboardController.prototype.addNewIssue = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new-or-existing\", {\n            objType: 'issue',\n            project: this.scope.project,\n            sprintId: this.scope.sprintId,\n            relatedField: 'milestone',\n            relatedObjectId: this.scope.sprintId,\n            targetName: this.scope.sprint.name\n          });\n        case \"standard\":\n          return this.rootscope.$broadcast(\"taskform:new\", this.scope.sprintId, us != null ? us.id : void 0);\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"issueform:bulk\", this.scope.projectId, this.scope.sprintId);\n      }\n    };\n\n    TaskboardController.prototype.toggleFold = function(id, modelName) {\n      if (modelName === 'issues') {\n        return this.taskboardIssuesService.toggleFold(id);\n      } else if (modelName === 'tasks') {\n        return this.taskboardTasksService.toggleFold(id);\n      }\n    };\n\n    TaskboardController.prototype.openUsersSelection = function(item) {\n      var onClose;\n      onClose = (function(_this) {\n        return function(assignedUsers) {\n          var userId;\n          userId = assignedUsers.pop() || null;\n          if (item.getName() === 'tasks') {\n            item.assigned_to = userId;\n            _this.taskboardTasksService.replaceModel(item);\n            _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadTasks();\n              }\n            });\n          }\n          if (item.getName() === 'issues') {\n            item.assigned_to = userId;\n            _this.taskboardIssuesService.replaceModel(item);\n            return _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadIssues();\n              }\n            });\n          }\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": [item.assigned_to],\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"single\": true,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    TaskboardController.prototype.changeTaskAssignedTo = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTaskModel(id);\n      return this.openUsersSelection(task);\n    };\n\n    TaskboardController.prototype.changeIssueAssignedTo = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssueModel(id);\n      return this.openUsersSelection(issue);\n    };\n\n    TaskboardController.prototype.setRolePoints = function() {\n      var computableRoles, getPoint, getRole, pointsByRole;\n      computableRoles = _.filter(this.scope.project.roles, \"computable\");\n      getRole = (function(_this) {\n        return function(roleId) {\n          roleId = parseInt(roleId, 10);\n          return _.find(computableRoles, function(role) {\n            return role.id === roleId;\n          });\n        };\n      })(this);\n      getPoint = (function(_this) {\n        return function(pointId) {\n          var poitnId;\n          poitnId = parseInt(pointId, 10);\n          return _.find(_this.scope.project.points, function(point) {\n            return point.id === pointId;\n          });\n        };\n      })(this);\n      pointsByRole = _.reduce(this.scope.userstories, (function(_this) {\n        return function(result, us, key) {\n          _.forOwn(us.points, function(pointId, roleId) {\n            var point, role;\n            role = getRole(roleId);\n            point = getPoint(pointId) || {\n              value: 0\n            };\n            if (role) {\n              if (!result[role.id]) {\n                result[role.id] = role;\n                result[role.id].points = 0;\n              }\n              return result[role.id].points += point.value;\n            }\n          });\n          return result;\n        };\n      })(this), {});\n      return this.scope.pointsByRole = Object.keys(pointsByRole).map(function(key) {\n        return pointsByRole[key];\n      });\n    };\n\n    TaskboardController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return TaskboardController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"TaskboardController\", TaskboardController);\n\n  TaskboardDirective = function($rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, tableBodyDom;\n      $ctrl = $el.controller();\n      $el.on(\"click\", \".toggle-analytics-visibility\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        target.toggleClass('active');\n        return $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\");\n      });\n      tableBodyDom = $el.find('[data-js=\"taskboard-table-hscroll\"]');\n      tableBodyDom.on(\"scroll\", function(event) {\n        var tableHeaderDom, target;\n        target = angular.element(event.currentTarget);\n        tableHeaderDom = $el.find(\".taskboard-table-inner\");\n        return tableHeaderDom.css(\"left\", -1 * target.scrollLeft());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective]);\n\n  TaskboardSquishColumnDirective = function(rs) {\n    var avatarWidth, firstLoad, gridGap, horizontalPadding, link, maxColumnWidth, maxRows, minWidth, zoom0ColumnWidth;\n    gridGap = 5;\n    horizontalPadding = 32;\n    avatarWidth = 30;\n    maxColumnWidth = 292;\n    zoom0ColumnWidth = 182;\n    minWidth = avatarWidth + horizontalPadding;\n    maxRows = 3;\n    firstLoad = false;\n    link = function($scope, $el, $attrs) {\n      var $foldStatusArchived, getCeilWidth, recalculateStatusColumnWidth, recalculateTaskboardWidth, setStatusColumnWidth;\n      $scope.$watch(\"ctrl.zoom\", (function(_this) {\n        return function() {\n          if (firstLoad) {\n            return recalculateTaskboardWidth();\n          }\n        };\n      })(this));\n      $scope.$on(\"sprint:task:moved\", (function(_this) {\n        return function() {\n          return recalculateTaskboardWidth();\n        };\n      })(this));\n      $scope.$watch(\"usTasks\", function() {\n        if ($scope.project) {\n          $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id);\n          $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId);\n          return recalculateTaskboardWidth();\n        }\n      });\n      $scope.foldStatus = function(status) {\n        $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id];\n        rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded);\n        return recalculateTaskboardWidth();\n      };\n      $foldStatusArchived = function(status) {\n        return $scope.foldStatus(status);\n      };\n      $scope.foldUs = function(rowId) {\n        $scope.usFolded[rowId] = !!!$scope.usFolded[rowId];\n        rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded);\n        return recalculateTaskboardWidth();\n      };\n      getCeilWidth = (function(_this) {\n        return function(usId, statusId) {\n          var columns, isStatusFolded, isUSFolded, tasks, width;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          isUSFolded = !!$scope.usFolded[usId];\n          if (usId) {\n            tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size;\n          } else {\n            tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size;\n          }\n          if (tasks && (isUSFolded || isStatusFolded)) {\n            if (isUSFolded) {\n              columns = Math.ceil(tasks / maxRows);\n              width = avatarWidth * columns + ((columns - 1) * gridGap) + horizontalPadding;\n            } else if (isStatusFolded) {\n              width = avatarWidth;\n            }\n          } else {\n            width = 0;\n          }\n          return width;\n        };\n      })(this);\n      setStatusColumnWidth = (function(_this) {\n        return function(statusId, width) {\n          var column;\n          column = $el.find(\".squish-status-\" + statusId);\n          if (width < minWidth) {\n            width = minWidth;\n          }\n          column.css('max-width', width);\n          return width;\n        };\n      })(this);\n      recalculateStatusColumnWidth = (function(_this) {\n        return function(statusId) {\n          var folded, initialWidth, isStatusFolded, statusFoldedWidth;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          initialWidth = 0;\n          if (isStatusFolded) {\n            initialWidth = avatarWidth;\n          } else {\n            initialWidth = maxColumnWidth;\n            if (Number($scope.ctrl.zoomLevel) === 0) {\n              initialWidth = zoom0ColumnWidth;\n            }\n          }\n          folded = !!$scope.statusesFolded[statusId];\n          statusFoldedWidth = getCeilWidth(null, statusId);\n          if (statusFoldedWidth < initialWidth) {\n            statusFoldedWidth = initialWidth;\n          }\n          _.forEach($scope.userstories, function(us) {\n            var isUSFolded, width;\n            isUSFolded = !!$scope.usFolded[us.id];\n            width = getCeilWidth(us.id, statusId);\n            if (width > statusFoldedWidth) {\n              return statusFoldedWidth = width;\n            }\n          });\n          return setStatusColumnWidth(statusId, statusFoldedWidth);\n        };\n      })(this);\n      return recalculateTaskboardWidth = (function(_this) {\n        return function() {\n          var total;\n          total = _.reduce($scope.taskStatusList, function(acc, status) {\n            return acc + recalculateStatusColumnWidth(status.id) + 5;\n          }, 0);\n          $el.find('.taskboard-table-inner').css(\"width\", maxColumnWidth + total);\n          if (!firstLoad) {\n            requestAnimationFrame(function() {\n              return $el.addClass('animations');\n            });\n          }\n          firstLoad = true;\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaBacklog\");\n\n  TaskboardSortableDirective = function($repo, $rs, $rootscope, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      return unwatch = $scope.$watch(\"usTasks\", function(usTasks) {\n        var containers, deleteElement, drake, filterError, initialContainer, itemEl, newParentScope, oldParentScope, scroll, tdom;\n        if (!usTasks || !usTasks.size) {\n          return;\n        }\n        unwatch();\n        if (!($scope.project.my_permissions.indexOf(\"modify_task\") > -1)) {\n          return;\n        }\n        oldParentScope = null;\n        newParentScope = null;\n        itemEl = null;\n        tdom = $el;\n        filterError = function() {\n          var text;\n          text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\");\n          return $tgConfirm.notify(\"error\", text);\n        };\n        deleteElement = function(itemEl) {\n          itemEl.off();\n          return itemEl.remove();\n        };\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        drake = dragula(containers, {\n          copySortSource: false,\n          copy: false,\n          accepts: function(el, target) {\n            return !$(target).hasClass('taskboard-row-title-box');\n          },\n          moves: function(item) {\n            return $(item).is('tg-card');\n          }\n        });\n        initialContainer = null;\n        drake.on('shadow', function(item) {\n          return $(item).removeClass('folded-dragging');\n        });\n        drake.on('over', function(item, container) {\n          if (!initialContainer) {\n            return initialContainer = container;\n          } else if (container !== initialContainer) {\n            return $(container).addClass('target-drop');\n          }\n        });\n        drake.on('out', function(item, container) {\n          if (container !== initialContainer) {\n            return $(container).removeClass('target-drop');\n          }\n        });\n        drake.on('drag', function(item) {\n          oldParentScope = $(item).parent().scope();\n          if ($(item).width() === 30) {\n            $(item).addClass('folded-dragging');\n          }\n          if ($el.hasClass(\"active-filters\")) {\n            filterError();\n            setTimeout((function() {\n              return drake.cancel(true);\n            }), 0);\n            return false;\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemIndex, itemTask, newStatusId, newUsId, oldStatusId, oldUsId, parentEl;\n          parentEl = $(item).parent();\n          itemEl = $(item);\n          itemTask = $scope.taskMap.get(Number(item.dataset.id));\n          itemIndex = itemEl.index();\n          newParentScope = parentEl.scope();\n          oldUsId = oldParentScope.us ? oldParentScope.us.id : null;\n          oldStatusId = oldParentScope.st.id;\n          newUsId = newParentScope.us ? newParentScope.us.id : null;\n          newStatusId = newParentScope.st.id;\n          if (initialContainer !== parentEl) {\n            $(parentEl).addClass('new');\n            $(parentEl).one('animationend', function() {\n              return $(parentEl).removeClass('new');\n            });\n          }\n          if (newStatusId !== oldStatusId || newUsId !== oldUsId) {\n            deleteElement(itemEl);\n          }\n          return $scope.$apply(function() {\n            return $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex);\n          });\n        });\n        scroll = autoScroll([$('.taskboard-table-body')[0]], {\n          margin: 100,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$translate\", TaskboardSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardIssuesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardIssuesService = (function(superClass) {\n    extend(TaskboardIssuesService, superClass);\n\n    TaskboardIssuesService.$inject = [];\n\n    function TaskboardIssuesService() {\n      this.reset();\n    }\n\n    TaskboardIssuesService.prototype.reset = function() {\n      this.foldStatusChanged = {};\n      return this.issuesRaw = [];\n    };\n\n    TaskboardIssuesService.prototype.init = function(project, usersById, issueStatusById) {\n      this.issueStatusById = issueStatusById;\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardIssuesService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.toggleFold = function(issueId) {\n      this.foldStatusChanged[issueId] = !this.foldStatusChanged[issueId];\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.add = function(issue) {\n      this.issuesRaw = this.issuesRaw.concat(issue);\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.remove = function(issue) {\n      var item, key, ref;\n      ref = this.issuesRaw;\n      for (key in ref) {\n        item = ref[key];\n        if (issue.id === item.id) {\n          this.issuesRaw.splice(key, 1);\n          this.refresh();\n          return;\n        }\n      }\n    };\n\n    TaskboardIssuesService.prototype.set = function(issues) {\n      this.issuesRaw = issues;\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.getIssue = function(id) {\n      return this.milestoneIssues.find(function(issue) {\n        return issue.get('id') === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.getIssueModel = function(id) {\n      return _.find(this.issuesRaw, function(issue) {\n        return issue.id === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.replaceModel = function(issue) {\n      this.issuesRaw = _.map(this.issuesRaw, function(item) {\n        if (issue.id === item.id) {\n          return issue;\n        } else {\n          return item;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.refresh = function() {\n      var i, issue, issueModel, issues, len, ref;\n      issues = [];\n      ref = this.issuesRaw;\n      for (i = 0, len = ref.length; i < len; i++) {\n        issueModel = ref[i];\n        issue = {};\n        issue.foldStatusChanged = this.foldStatusChanged[issueModel.id];\n        issue.model = issueModel.getAttrs();\n        issue.modelName = issueModel.getName();\n        issue.id = issueModel.id;\n        issue.status = this.issueStatusById[issueModel.status];\n        issue.images = _.filter(issue.model.attachments, function(it) {\n          return !!it.thumbnail_card_url;\n        });\n        issue.assigned_to = this.usersById[issueModel.assigned_to];\n        issue.colorized_tags = _.map(issue.model.tags, function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        });\n        issues.push(issue);\n      }\n      return this.milestoneIssues = Immutable.fromJS(issues);\n    };\n\n    return TaskboardIssuesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardTasksService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardTasksService = (function(superClass) {\n    extend(TaskboardTasksService, superClass);\n\n    TaskboardTasksService.$inject = [];\n\n    function TaskboardTasksService() {\n      this.reset();\n    }\n\n    TaskboardTasksService.prototype.reset = function() {\n      this.tasksRaw = [];\n      this.foldStatusChanged = {};\n      this.usTasks = Immutable.Map();\n      this.tasksByUs = Immutable.Map();\n      return this.taskMap = Immutable.Map();\n    };\n\n    TaskboardTasksService.prototype.init = function(project, usersById) {\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardTasksService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.toggleFold = function(taskId) {\n      this.foldStatusChanged[taskId] = !this.foldStatusChanged[taskId];\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.add = function(task) {\n      this.tasksRaw = this.tasksRaw.concat(task);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.set = function(tasks) {\n      this.tasksRaw = tasks;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.setUserstories = function(userstories) {\n      return this.userstories = userstories;\n    };\n\n    TaskboardTasksService.prototype.refreshRawOrder = function() {\n      var i, len, ref, results, task;\n      this.order = {};\n      ref = this.tasksRaw;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        task = ref[i];\n        results.push(this.order[task.id] = task.taskboard_order);\n      }\n      return results;\n    };\n\n    TaskboardTasksService.prototype.assignOrders = function(order) {\n      order = _.invert(order);\n      this.order = _.assign(this.order, order);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.getTask = function(id) {\n      return this.taskMap.get(id);\n    };\n\n    TaskboardTasksService.prototype.replace = function(task) {\n      return this.taskMap = this.taskMap.set(task.get('id'), task);\n    };\n\n    TaskboardTasksService.prototype.getTaskModel = function(id) {\n      return _.find(this.tasksRaw, function(task) {\n        return task.id === id;\n      });\n    };\n\n    TaskboardTasksService.prototype.replaceModel = function(task) {\n      this.tasksRaw = _.map(this.tasksRaw, function(it) {\n        if (task.id === it.id) {\n          return task;\n        } else {\n          return it;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.move = function(id, usId, statusId, index) {\n      var afterDestination, beforeDestination, i, it, j, key, len, len1, previous, previousWithTheSameOrder, setOrders, taksWithoutMoved, task, taskByUsStatus;\n      task = this.getTaskModel(id);\n      taskByUsStatus = _.filter(this.tasksRaw, (function(_this) {\n        return function(task) {\n          return task.status === statusId && task.user_story === usId;\n        };\n      })(this));\n      taskByUsStatus = _.sortBy(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      taksWithoutMoved = _.filter(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return it.id !== id;\n        };\n      })(this));\n      beforeDestination = _.slice(taksWithoutMoved, 0, index);\n      afterDestination = _.slice(taksWithoutMoved, index);\n      setOrders = {};\n      previous = beforeDestination[beforeDestination.length - 1];\n      previousWithTheSameOrder = _.filter(beforeDestination, (function(_this) {\n        return function(it) {\n          return _this.order[it.id] === _this.order[previous.id];\n        };\n      })(this));\n      if (previousWithTheSameOrder.length > 1) {\n        for (i = 0, len = previousWithTheSameOrder.length; i < len; i++) {\n          it = previousWithTheSameOrder[i];\n          setOrders[it.id] = this.order[it.id];\n        }\n      }\n      if (!previous) {\n        this.order[task.id] = 0;\n      } else if (previous) {\n        this.order[task.id] = this.order[previous.id] + 1;\n      }\n      for (key = j = 0, len1 = afterDestination.length; j < len1; key = ++j) {\n        it = afterDestination[key];\n        this.order[it.id] = this.order[task.id] + key + 1;\n      }\n      task.status = statusId;\n      task.user_story = usId;\n      task.taskboard_order = this.order[task.id];\n      this.refresh();\n      return {\n        \"task_id\": task.id,\n        \"order\": this.order[task.id],\n        \"set_orders\": setOrders\n      };\n    };\n\n    TaskboardTasksService.prototype.refresh = function() {\n      var i, j, k, len, len1, len2, model, ref, status, task, taskModel, taskStatusList, tasks, us, usTasks;\n      if (!this.project) {\n        return;\n      }\n      this.tasksRaw = _.sortBy(this.tasksRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      tasks = this.tasksRaw;\n      taskStatusList = _.sortBy(this.project.task_statuses, \"order\");\n      usTasks = {};\n      ref = _.union(this.userstories, [\n        {\n          id: null\n        }\n      ]);\n      for (i = 0, len = ref.length; i < len; i++) {\n        us = ref[i];\n        usTasks[us.id] = {};\n        for (j = 0, len1 = taskStatusList.length; j < len1; j++) {\n          status = taskStatusList[j];\n          usTasks[us.id][status.id] = [];\n        }\n      }\n      for (k = 0, len2 = tasks.length; k < len2; k++) {\n        taskModel = tasks[k];\n        if ((usTasks[taskModel.user_story] != null) && (usTasks[taskModel.user_story][taskModel.status] != null)) {\n          task = {};\n          if (!this.tasksByUs.get(taskModel.user_story)) {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, Immutable.fromJS([taskModel.id]));\n          } else {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, this.tasksByUs.get(taskModel.user_story).push(taskModel.id));\n          }\n          model = taskModel.getAttrs();\n          task.foldStatusChanged = this.foldStatusChanged[taskModel.id];\n          task.model = model;\n          task.images = _.filter(model.attachments, function(it) {\n            return !!it.thumbnail_card_url;\n          });\n          task.id = taskModel.id;\n          task.assigned_to = this.usersById[taskModel.assigned_to];\n          task.colorized_tags = _.map(task.model.tags, (function(_this) {\n            return function(tag) {\n              return {\n                name: tag[0],\n                color: tag[1]\n              };\n            };\n          })(this));\n          this.taskMap = this.taskMap.set(task.id, Immutable.fromJS(task));\n          usTasks[taskModel.user_story][taskModel.status].push(task.id);\n        }\n      }\n      return this.usTasks = Immutable.fromJS(usTasks);\n    };\n\n    return TaskboardTasksService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanUserstoriesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  KanbanUserstoriesService = (function(superClass) {\n    extend(KanbanUserstoriesService, superClass);\n\n    KanbanUserstoriesService.$inject = [\"$translate\"];\n\n    function KanbanUserstoriesService(translate) {\n      this.translate = translate;\n      this.reset();\n    }\n\n    KanbanUserstoriesService.prototype.reset = function(resetSwimlanesList, resetArchivedStatus) {\n      if (resetSwimlanesList == null) {\n        resetSwimlanesList = true;\n      }\n      if (resetArchivedStatus == null) {\n        resetArchivedStatus = true;\n      }\n      this.userstoriesRaw = [];\n      this.statusHide = [];\n      this.swimlanes = [];\n      this.foldStatusChanged = {};\n      this.usByStatus = Immutable.Map();\n      this.usMap = Immutable.Map();\n      this.usByStatusSwimlanes = Immutable.Map();\n      if (resetArchivedStatus) {\n        this.archivedStatus = [];\n      }\n      if (resetSwimlanesList) {\n        return this.swimlanesList = Immutable.List();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.init = function(project, swimlanes, usersById) {\n      this.project = project;\n      this.swimlanes = swimlanes;\n      return this.usersById = usersById;\n    };\n\n    KanbanUserstoriesService.prototype.resetFolds = function() {\n      return this.foldStatusChanged = {};\n    };\n\n    KanbanUserstoriesService.prototype.toggleFold = function(usId) {\n      this.foldStatusChanged[usId] = !this.foldStatusChanged[usId];\n      return this.refreshUserStory(usId);\n    };\n\n    KanbanUserstoriesService.prototype.set = function(userstories) {\n      this.userstoriesRaw = userstories;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    KanbanUserstoriesService.prototype.initUsByStatusList = function(userstories) {\n      var key, results, status, usModel;\n      results = [];\n      for (key in userstories) {\n        usModel = userstories[key];\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          results.push(this.usByStatus = this.usByStatus.set(status, Immutable.List()));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    KanbanUserstoriesService.prototype.add = function(usList) {\n      var key, status, us, usModel;\n      if (!Array.isArray(usList)) {\n        usList = [usList];\n      }\n      usList = _.sortBy(usList, ['kanban_order']);\n      this.userstoriesRaw = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return !usList.find(function(it) {\n            return it.id === us.id;\n          });\n        };\n      })(this));\n      this.userstoriesRaw = this.userstoriesRaw.concat(usList);\n      this.userstoriesRaw = this.userstoriesRaw.map((function(_this) {\n        return function(us) {\n          return us;\n        };\n      })(this));\n      this.refreshRawOrder();\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      for (key in usList) {\n        usModel = usList[key];\n        us = this.retrieveUserStoryData(usModel);\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          this.usByStatus = this.usByStatus.set(status, Immutable.List());\n        }\n        if (!this.usMap.get(usModel.id)) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n          this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).filter((function(_this) {\n            return function(id) {\n              return id !== usModel.id;\n            };\n          })(this)).push(usModel.id));\n        }\n      }\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.addArchivedStatus = function(statusId) {\n      return this.archivedStatus.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      var us;\n      us = this.getUsModel(usId);\n      return this.archivedStatus.indexOf(us != null ? us.status : void 0) !== -1 && this.statusHide.indexOf(us != null ? us.status : void 0) !== -1;\n    };\n\n    KanbanUserstoriesService.prototype.hideStatus = function(statusId) {\n      this.deleteStatus(statusId);\n      return this.statusHide.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.showStatus = function(statusId) {\n      return _.remove(this.statusHide, function(it) {\n        return it === statusId;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.getStatus = function(statusId, swimlaneId) {\n      return _.filter(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return it.status === statusId && (!swimlaneId || it.swimlane === swimlaneId);\n        };\n      })(this));\n    };\n\n    KanbanUserstoriesService.prototype.deleteStatus = function(statusId) {\n      var toDelete;\n      toDelete = _.filter(this.userstoriesRaw, function(us) {\n        return us.status === statusId;\n      });\n      toDelete = _.map(function(it) {\n        return it.id;\n      });\n      return this.archived = _.difference(this.archived, toDelete);\n    };\n\n    KanbanUserstoriesService.prototype.refreshRawOrder = function() {\n      var i, it, len, ref, results;\n      this.order = {};\n      if (this.userstoriesRaw) {\n        ref = this.userstoriesRaw;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          it = ref[i];\n          results.push(this.order[it.id] = it.kanban_order);\n        }\n        return results;\n      }\n    };\n\n    KanbanUserstoriesService.prototype.assignOrders = function(order) {\n      this.order = _.assign(this.order, order);\n      return this.refresh(false);\n    };\n\n    KanbanUserstoriesService.prototype.move = function(usList, statusId, swimlaneId, index, previousCard, nextCard) {\n      var afterDestination, i, initialLength, j, key, len, len1, previousUsIndex, previousUsOrder, us, usByStatus, usByStatusWithoutMoved, usId, usModel;\n      usByStatus = this.getStatus(statusId, swimlaneId);\n      usByStatus = _.sortBy(usByStatus, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      if (previousCard) {\n        previousUsOrder = this.order[previousCard] + 1;\n        previousUsIndex = (usByStatus.findIndex((function(_this) {\n          return function(it) {\n            return it.id === previousCard;\n          };\n        })(this))) + 1;\n      } else {\n        previousUsOrder = 0;\n        previousUsIndex = 0;\n      }\n      usByStatusWithoutMoved = _.filter(usByStatus, function(listIt) {\n        return !_.find(usList, function(moveIt) {\n          return listIt.id === moveIt;\n        });\n      });\n      afterDestination = _.slice(usByStatusWithoutMoved, previousUsIndex);\n      initialLength = usList.length + 1;\n      for (key = i = 0, len = afterDestination.length; i < len; key = ++i) {\n        usModel = afterDestination[key];\n        this.order[usModel.id] = previousUsOrder + initialLength + key;\n      }\n      for (key = j = 0, len1 = usList.length; j < len1; key = ++j) {\n        usId = usList[key];\n        usModel = this.getUsModel(usId);\n        usModel.status = statusId;\n        usModel.swimlane = swimlaneId;\n        this.order[usModel.id] = previousUsOrder + key;\n        us = this.retrieveUserStoryData(usModel);\n        this.usMap = this.usMap.set(us.id, Immutable.fromJS(us));\n      }\n      this.refresh(false);\n      return {\n        statusId: statusId,\n        swimlaneId: swimlaneId,\n        afterUserstoryId: previousCard,\n        beforeUserstoryId: nextCard,\n        bulkUserstories: usList\n      };\n    };\n\n    KanbanUserstoriesService.prototype.moveToEnd = function(id, statusId) {\n      var us;\n      us = this.getUsModel(id);\n      this.order[us.id] = -1;\n      us.status = statusId;\n      us.kanban_order = this.order[us.id];\n      this.refresh(false);\n      return {\n        \"us_id\": us.id,\n        \"order\": -1\n      };\n    };\n\n    KanbanUserstoriesService.prototype.replace = function(us) {\n      return this.usMap = this.usMap.set(us.get('id'), us);\n    };\n\n    KanbanUserstoriesService.prototype.replaceModel = function(usModel) {\n      var us;\n      this.userstoriesRaw = _.map(this.userstoriesRaw, function(usItem) {\n        if (usModel.id === usItem.id) {\n          return usModel;\n        } else {\n          return usItem;\n        }\n      });\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.getUs = function(id) {\n      return this.usMap.get(id);\n    };\n\n    KanbanUserstoriesService.prototype.getUsModel = function(id) {\n      return _.find(this.userstoriesRaw, function(us) {\n        return us.id === id;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.refreshUserStory = function(usId) {\n      var us, usModel;\n      usModel = this.getUsModel(usId);\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usId, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.retrieveUserStoryData = function(usModel) {\n      var model, us;\n      us = {};\n      model = usModel.getAttrs();\n      us.foldStatusChanged = this.foldStatusChanged[usModel.id];\n      us.model = model;\n      us.images = _.filter(model.attachments, function(it) {\n        return !!it.thumbnail_card_url;\n      });\n      us.id = usModel.id;\n      us.swimlane = usModel.swimlane;\n      us.assigned_to = this.usersById[usModel.assigned_to];\n      us.assigned_users = [];\n      usModel.assigned_users.forEach((function(_this) {\n        return function(assignedUserId) {\n          var assignedUserData;\n          assignedUserData = _this.usersById[assignedUserId];\n          if (assignedUserData) {\n            return us.assigned_users.push(assignedUserData);\n          }\n        };\n      })(this));\n      us.assigned_users_preview = us.assigned_users.slice(0, 3);\n      us.colorized_tags = _.map(us.model.tags, (function(_this) {\n        return function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        };\n      })(this));\n      return us;\n    };\n\n    KanbanUserstoriesService.prototype.refresh = function(refreshUsMap, refreshSwimlanes) {\n      var collection, key, ref, us, usModel;\n      if (refreshUsMap == null) {\n        refreshUsMap = true;\n      }\n      if (refreshSwimlanes == null) {\n        refreshSwimlanes = true;\n      }\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, [\n        (function(_this) {\n          return function(it) {\n            return _this.order[it.id];\n          };\n        })(this)\n      ]);\n      collection = {};\n      ref = this.userstoriesRaw;\n      for (key in ref) {\n        usModel = ref[key];\n        us = this.retrieveUserStoryData(usModel);\n        if (!collection[usModel.status]) {\n          collection[usModel.status] = [];\n        }\n        collection[usModel.status] = collection[usModel.status].filter((function(_this) {\n          return function(id) {\n            return id !== usModel.id;\n          };\n        })(this));\n        collection[usModel.status].push(usModel.id);\n        if (refreshUsMap) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n        }\n      }\n      this.usByStatus = Immutable.fromJS(collection);\n      if (refreshSwimlanes) {\n        return this.refreshSwimlanes();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.refreshSwimlanes = function() {\n      var emptySwimlane, emptySwimlaneExists, userstoriesNoSwimlane;\n      if (!this.swimlanes || !this.swimlanes.length) {\n        return;\n      }\n      this.swimlanesList = Immutable.List();\n      this.usByStatusSwimlanes = Immutable.Map();\n      userstoriesNoSwimlane = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return us.swimlane === null;\n        };\n      })(this));\n      emptySwimlaneExists = this.swimlanesList.filter((function(_this) {\n        return function(swimlane) {\n          return swimlane.id === null;\n        };\n      })(this));\n      if (userstoriesNoSwimlane.length && !emptySwimlaneExists.size) {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n        emptySwimlane = {\n          id: -1,\n          kanban_order: 1,\n          name: this.translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n        };\n        this.swimlanesList = this.swimlanesList.insert(0, emptySwimlane);\n      } else {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n      return this.swimlanesList.forEach((function(_this) {\n        return function(swimlane) {\n          var swimlaneUsByStatus;\n          swimlaneUsByStatus = Immutable.Map();\n          _this.usByStatus.forEach(function(usList, statusId) {\n            var usListSwimlanes;\n            usListSwimlanes = usList.filter(function(usId) {\n              var swimlaneId, us;\n              us = _this.usMap.get(usId);\n              swimlaneId = swimlane.id === -1 ? null : swimlane.id;\n              return us.getIn(['model', 'swimlane']) === swimlaneId;\n            });\n            return swimlaneUsByStatus = swimlaneUsByStatus.set(Number(statusId), usListSwimlanes);\n          });\n          return _this.usByStatusSwimlanes = _this.usByStatusSwimlanes.set(swimlane.id, swimlaneUsByStatus);\n        };\n      })(this));\n    };\n\n    return KanbanUserstoriesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardActionsDirective, CardAssignedToDirective, CardDataDirective, CardSvgTemplate, KanbanArchivedShowStatusHeaderDirective, KanbanArchivedStatusIntroDirective, KanbanController, KanbanDirective, KanbanSquishColumnDirective, KanbanSwimlaneDirective, KanbanTaskboardColumnDirective, KanbanWipLimitDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanController = (function(superClass) {\n    extend(KanbanController, superClass);\n\n    KanbanController.prototype.excludeFilters = [\"status\"];\n\n    KanbanController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgModel\", \"tgKanbanUserstories\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLightboxFactory\", \"tgLoader\", \"$timeout\"];\n\n    KanbanController.prototype.storeCustomFiltersName = 'kanban-custom-filters';\n\n    KanbanController.prototype.storeFiltersName = 'kanban-filters';\n\n    KanbanController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function KanbanController(scope, rootscope, repo, confirm, rs1, rs2, params1, q, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, model, kanbanUserstoriesService1, storage, filterRemoteStorageService, projectService1, lightboxFactory, tgLoader, timeout1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.model = model;\n      this.kanbanUserstoriesService = kanbanUserstoriesService1;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService1;\n      this.lightboxFactory = lightboxFactory;\n      this.tgLoader = tgLoader;\n      this.timeout = timeout1;\n      this.renderUserStories = bind(this.renderUserStories, this);\n      this.changeUsAssignedUsers = bind(this.changeUsAssignedUsers, this);\n      bindMethods(this);\n      this.kanbanUserstoriesService.reset();\n      this.openFilter = false;\n      this.selectedUss = {};\n      this.foldedSwimlane = Immutable.Map();\n      this.isFirstLoad = true;\n      this.renderBatching = true;\n      this.isLightboxOpened = false;\n      this.isRefreshNeeded = false;\n      if (this.applyStoredFilters(this.params.pslug, \"kanban-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"KANBAN.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usByStatus\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatus;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usMap\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usByStatusSwimlanes\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatusSwimlanes;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"swimlanesList\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.swimlanesList;\n        };\n      })(this));\n    }\n\n    KanbanController.prototype.cleanSelectedUss = function() {\n      var key, results;\n      results = [];\n      for (key in this.selectedUss) {\n        results.push(this.selectedUss[key] = false);\n      }\n      return results;\n    };\n\n    KanbanController.prototype.toggleSelectedUs = function(usId) {\n      return this.selectedUss[usId] = !this.selectedUss[usId];\n    };\n\n    KanbanController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"KANBAN.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    KanbanController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      zoomLevel = Number(zoomLevel);\n      if (this.zoomLevel === zoomLevel) {\n        return null;\n      }\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 2 && previousZoomLevel <= 2) {\n        this.zoomLoading = true;\n        return this.loadUserstories().then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.filtersReloadContent = debounceLeading(100, function() {\n      return this.loadUserstories().then((function(_this) {\n        return function(result) {\n          var i, len, openArchived, results, statusId;\n          if (!result) {\n            return;\n          }\n          if (_this.scope.swimlanesList.size && !result.length) {\n            _this.foldedSwimlane = _this.foldedSwimlane.set(_this.scope.swimlanesList.first().id.toString(), false);\n          }\n          openArchived = _.difference(_this.kanbanUserstoriesService.archivedStatus, _this.kanbanUserstoriesService.statusHide);\n          if (openArchived.length) {\n            results = [];\n            for (i = 0, len = openArchived.length; i < len; i++) {\n              statusId = openArchived[i];\n              results.push(_this.loadUserStoriesForStatus({}, statusId));\n            }\n            return results;\n          }\n        };\n      })(this));\n    });\n\n    KanbanController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, us) {\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(us);\n            return _this.scope.$broadcast(\"redraw:wip\");\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, uss) {\n          _this.confirm.notify(\"success\");\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(uss);\n            return _this.scope.$broadcast(\"redraw:wip\");\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, us) {\n          return _this.refreshTagsColors().then(function() {\n            var lastUsId, newOrder, oldStatus, status;\n            oldStatus = _this.kanbanUserstoriesService.getUsModel(us.id).status;\n            if (oldStatus !== us.status) {\n              status = _this.scope.usByStatus.get(us.status.toString());\n              if (status) {\n                lastUsId = status.last();\n                newOrder = _this.scope.usMap.get(lastUsId).getIn(['model', 'kanban_order']) + 1;\n                us.kanban_order = newOrder;\n              }\n            }\n            _this.kanbanUserstoriesService.replaceModel(us);\n            _this.kanbanUserstoriesService.refreshRawOrder();\n            return _this.kanbanUserstoriesService.refresh(false);\n          });\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:deleted\", (function(_this) {\n        return function(event, us) {\n          _this.filtersReloadContent();\n          return _this.kanbanUserstoriesService.refreshSwimlanes();\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:move\", this.moveUs);\n      this.scope.$on(\"kanban:show-userstories-for-status\", this.loadUserStoriesForStatus);\n      this.scope.$on(\"kanban:hide-userstories-for-status\", this.hideUserStoriesForStatus);\n      this.scope.$on(\"lightbox:opened\", (function(_this) {\n        return function() {\n          return _this.isLightboxOpened = true;\n        };\n      })(this));\n      return this.scope.$on(\"lightbox:closed\", (function(_this) {\n        return function() {\n          _this.isLightboxOpened = false;\n          if (_this.isRefreshNeeded) {\n            _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            return _this.isRefreshNeeded = false;\n          }\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged = function() {\n      this.tgLoader.start();\n      return this.projectService.fetchProject().then((function(_this) {\n        return function() {\n          return _this.loadInitialData();\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.initializeSubscription = function() {\n      var randomTimeout, routingKeyProject, routingKeyUserstories;\n      randomTimeout = taiga.randomInt(700, 1000);\n      routingKeyUserstories = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKeyUserstories, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          return _this.eventsLoadUserstories(message);\n        };\n      })(this)));\n      routingKeyProject = \"changes.project.\" + this.scope.projectId + \".projects\";\n      return this.events.subscribe(this.scope, routingKeyProject, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          var ref;\n          if ((ref = message.matches) === \"projects.swimlane\" || ref === \"projects.swimlaneuserstorystatus\" || ref === \"projects.userstorystatus\") {\n            if (_this.isLightboxOpened) {\n              return _this.isRefreshNeeded = true;\n            } else {\n              return _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            }\n          }\n        };\n      })(this)));\n    };\n\n    KanbanController.prototype.addNewUs = function(type, statusId) {\n      var swimlane;\n      swimlane = null;\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project,\n            'statusId': statusId,\n            'swimlane': swimlane\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, statusId, swimlane);\n      }\n    };\n\n    KanbanController.prototype.editUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-edit', true);\n      this.kanbanUserstoriesService.replace(us);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingUserStory) {\n          _this.rs2.attachments.list(\"us\", us.get('id'), us.getIn(['model', 'project'])).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': editingUserStory,\n              'statusList': _this.scope.usStatusList,\n              'attachments': attachments.toJS()\n            });\n          });\n          us = us.set('loading-edit', false);\n          return _this.kanbanUserstoriesService.replace(us);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.deleteUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-delete', true);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingUserStory) {\n          var message, title;\n          us = us.set('loading-delete', false);\n          title = _this.translate.instant(\"US.TITLE_DELETE_ACTION\");\n          message = deletingUserStory.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingUserStory);\n            promise.then(function() {\n              _this.scope.$broadcast(\"kanban:us:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.showPlaceHolder = function(statusId, swimlaneId) {\n      var firstStatus, firstSwimlane;\n      firstStatus = this.scope.usStatusList[0].id === statusId && !this.kanbanUserstoriesService.userstoriesRaw.length;\n      if (swimlaneId) {\n        firstSwimlane = this.scope.swimlanesList.first().id === swimlaneId;\n        return firstStatus && firstSwimlane;\n      }\n      return firstStatus;\n    };\n\n    KanbanController.prototype.toggleFold = function(id) {\n      return this.kanbanUserstoriesService.toggleFold(id);\n    };\n\n    KanbanController.prototype.toggleSwimlane = function(id) {\n      this.foldedSwimlane = this.foldedSwimlane.set(id.toString(), !this.foldedSwimlane.get(id.toString()));\n      this.rs.kanban.storeSwimlanesModes(this.scope.projectId, this.foldedSwimlane.toJS());\n      return this.timeout((function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"redraw:wip\");\n        };\n      })(this), 100, false);\n    };\n\n    KanbanController.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      return this.kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId);\n    };\n\n    KanbanController.prototype.changeUsAssignedUsers = function(id) {\n      var item, onClose;\n      item = this.kanbanUserstoriesService.getUsModel(id);\n      onClose = (function(_this) {\n        return function(assignedUsersIds) {\n          var ref;\n          item.assigned_users = assignedUsersIds;\n          if ((ref = item.assigned_to, indexOf.call(assignedUsersIds, ref) < 0) && assignedUsersIds.length > 0) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          if (assignedUsersIds.length === 0) {\n            item.assigned_to = null;\n          }\n          _this.kanbanUserstoriesService.replaceModel(item);\n          return _this.repo.save(item).then(function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_users') || _this.isFilterDataTypeSelected('role')) {\n              return _this.filtersReloadContent();\n            }\n          });\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    KanbanController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.renderBatch = function(clean) {\n      var newUs;\n      if (clean == null) {\n        clean = false;\n      }\n      this.renderInProgress = true;\n      newUs = _.take(this.queue, this.batchSize);\n      this.rendered = _.concat(this.rendered, newUs);\n      this.queue = _.drop(this.queue, this.batchSize);\n      if (clean) {\n        this.kanbanUserstoriesService.set(newUs);\n        this.batchTimings = [200, 100, 50];\n      } else {\n        this.kanbanUserstoriesService.add(newUs);\n      }\n      if (this.queue.length > 0) {\n        timeout = this.batchTimings.shift() || 0;\n        return this.timeout(this.renderBatch, timeout);\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            _this.rootscope.$broadcast(\"kanban:userstories:loaded\", _this.rendered);\n            _this.scope.$broadcast(\"userstories:loaded\", _this.rendered);\n            _this.renderInProgress = false;\n            return _this.timeout(function() {\n              return _this.scope.$broadcast(\"redraw:wip\");\n            }, 100, false);\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.renderUserStories = function(userstories) {\n      var userstoriesMap;\n      userstories = _.sortBy(userstories, 'kanban_order');\n      this.kanbanUserstoriesService.initUsByStatusList(userstories);\n      if (this.renderBatching) {\n        userstoriesMap = _.groupBy(userstories, 'status');\n        this.rendered = [];\n        this.queue = [];\n        this.batchSize = 0;\n        while (this.queue.length < userstories.length) {\n          _.each(this.scope.project.us_statuses, (function(_this) {\n            return function(x) {\n              var ref;\n              if (((ref = userstoriesMap[x.id]) != null ? ref.length : void 0) > 0) {\n                _this.queue = _.concat(_this.queue, _.take(userstoriesMap[x.id], 10));\n                return userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 10);\n              }\n            };\n          })(this));\n          if (!this.batchSize) {\n            this.batchSize = this.queue.length;\n          }\n        }\n        return this.renderBatch(true);\n      } else {\n        return this.kanbanUserstoriesService.set(userstories);\n      }\n    };\n\n    KanbanController.prototype.loadUserstoriesParams = function() {\n      var locationParams, params;\n      params = {\n        status__is_archived: false\n      };\n      if (this.zoomLevel >= 2) {\n        params.include_attachments = 1;\n        params.include_tasks = 1;\n      }\n      locationParams = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return params;\n    };\n\n    KanbanController.prototype.eventsLoadUserstories = function(data) {\n      var eventUserstories, modifiedUs, params;\n      eventUserstories = [];\n      if (!Array.isArray(data.pk)) {\n        eventUserstories = [data.pk];\n      } else {\n        eventUserstories = data.pk;\n      }\n      modifiedUs = eventUserstories.filter((function(_this) {\n        return function(us) {\n          return !!_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n            return raw.id === us;\n          });\n        };\n      })(this));\n      params = this.loadUserstoriesParams();\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          var newUss;\n          newUss = userstories.filter(function(us) {\n            return !_this.kanbanUserstoriesService.userstoriesRaw.find(function(raw) {\n              return raw.id === us.id;\n            });\n          });\n          userstories.filter(function(us) {\n            return modifiedUs.includes(us.id);\n          }).forEach(function(us) {\n            _this.kanbanUserstoriesService.replaceModel(us);\n            return _this.kanbanUserstoriesService.refreshRawOrder();\n          });\n          if (newUss.length) {\n            _this.kanbanUserstoriesService.add(newUss);\n          }\n          return _this.kanbanUserstoriesService.refresh(false);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadUserstories = function() {\n      var archivedPromises, lastSearch, loadPromises, params, promise;\n      params = this.loadUserstoriesParams();\n      this.lastSearch = this.filterQ;\n      lastSearch = this.filterQ;\n      this.lastLoadUserstoriesParams = params;\n      loadPromises = [this.rs.userstories.listAll(this.scope.projectId, params), this.loadSwimlanes()];\n      archivedPromises = this.kanbanUserstoriesService.archivedStatus.map((function(_this) {\n        return function(archivedStatusId) {\n          return _this.loadUserStoriesForStatus({}, archivedStatusId);\n        };\n      })(this));\n      loadPromises = loadPromises.concat(archivedPromises);\n      promise = this.q.all(loadPromises).then((function(_this) {\n        return function(result) {\n          var swimlanes, userstories;\n          if (lastSearch !== _this.lastSearch) {\n            return;\n          }\n          _this.kanbanUserstoriesService.reset(false, false);\n          userstories = result[0];\n          swimlanes = result[1];\n          if (result.length > 2) {\n            result.slice(2).forEach(function(archivedRedult) {\n              return userstories = userstories.concat(archivedRedult);\n            });\n          }\n          _this.notFoundUserstories = false;\n          if (!userstories.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(_this.location.search()).length)) {\n            _this.notFoundUserstories = true;\n          }\n          _this.kanbanUserstoriesService.init(_this.scope.project, swimlanes, _this.scope.usersById);\n          _this.tgLoader.pageLoaded();\n          _this.renderUserStories(userstories);\n          return userstories;\n        };\n      })(this));\n      return promise;\n    };\n\n    KanbanController.prototype.loadUserStoriesForStatus = function(ctx, statusId) {\n      var filteredStatus, params;\n      filteredStatus = this.location.search().status;\n      if (filteredStatus) {\n        filteredStatus = filteredStatus.split(\",\").map(function(it) {\n          return parseInt(it, 10);\n        });\n        if (filteredStatus.indexOf(statusId) === -1) {\n          return;\n        }\n      }\n      params = {\n        status: statusId,\n        include_attachments: true,\n        include_tasks: true\n      };\n      if (this.filterQ) {\n        params.q = this.filterQ;\n      }\n      params = _.merge(params, this.location.search());\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          _this.waitEmptyQuote(function() {\n            return _this.scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories);\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.waitEmptyQuote = function(cb) {\n      if (this.queue.length > 0) {\n        return requestAnimationFrame((function(_this) {\n          return function() {\n            return _this.waitEmptyQuote(cb);\n          };\n        })(this));\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            return cb();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.hideUserStoriesForStatus = function(ctx, statusId) {\n      return this.scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId);\n    };\n\n    KanbanController.prototype.loadKanban = function() {\n      return this.q.all([this.refreshTagsColors(), this.loadUserstories()]);\n    };\n\n    KanbanController.prototype.loadSwimlanes = function() {\n      return this.rs.swimlanes.list(this.scope.projectId).then((function(_this) {\n        return function(swimlanes) {\n          _this.scope.swimlanes = swimlanes;\n          _this.scope.swimlanesStatuses = {};\n          _this.scope.swimlanes.forEach(function(swimlane) {\n            return _this.scope.swimlanesStatuses[swimlane.id] = swimlane.statuses;\n          });\n          _this.scope.swimlanesStatuses[-1] = _this.scope.project.us_statuses;\n          return _this.scope.swimlanes;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_kanban_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.projectId = project.id;\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.usCardVisibility = {};\n      this.scope.$emit(\"project:loaded\", project);\n      return project;\n    };\n\n    KanbanController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.foldedSwimlane = Immutable.fromJS(this.rs.kanban.getSwimlanesModes(project.id));\n      this.initialLoad = false;\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.loadKanban().then((function(_this) {\n        return function() {\n          return _this.timeout(function() {\n            return _this.initialLoad = true;\n          }, 0, true);\n        };\n      })(this));\n      return this.generateFilters();\n    };\n\n    KanbanController.prototype.moveUs = function(ctx, usList, newStatusId, newSwimlaneId, index, previousCard, nextCard) {\n      var apiNewSwimlaneId, data, promise;\n      this.cleanSelectedUss();\n      usList = _.map(usList, (function(_this) {\n        return function(us) {\n          return _this.kanbanUserstoriesService.getUsModel(us.id);\n        };\n      })(this));\n      this.rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, newSwimlaneId, index);\n      apiNewSwimlaneId = newSwimlaneId;\n      if (newSwimlaneId === -1) {\n        apiNewSwimlaneId = null;\n      }\n      data = this.kanbanUserstoriesService.move(usList.map((function(_this) {\n        return function(it) {\n          return it.id;\n        };\n      })(this)), newStatusId, apiNewSwimlaneId, index, previousCard, nextCard);\n      promise = this.rs.userstories.bulkUpdateKanbanOrder(this.scope.projectId, newStatusId, apiNewSwimlaneId, data.afterUserstoryId, data.beforeUserstoryId, data.bulkUserstories);\n      return promise.then((function(_this) {\n        return function() {\n          _this.scope.$broadcast(\"redraw:wip\");\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    return KanbanController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"KanbanController\", KanbanController);\n\n  KanbanDirective = function($repo, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _tableBody, board, watchKanbanSize;\n      watchKanbanSize = (function(_this) {\n        return function() {\n          var columnMargin, columns, kanbanStyles, resizeCb, resizeObserver;\n          columns = $el.find(\".task-colum-name\");\n          kanbanStyles = getComputedStyle($el[0]);\n          columnMargin = Number(kanbanStyles.getPropertyValue('--kanban-column-margin').trim().replace('px', '').split(' ')[1]);\n          resizeCb = function(entries) {\n            var width;\n            width = columns.toArray().reduce(function(acc, column) {\n              if (document.body.contains(column)) {\n                return acc + column.offsetWidth + columnMargin;\n              }\n              resizeObserver.unobserve(column);\n              return acc;\n            }, 0);\n            if (width > 0) {\n              return document.body.style.setProperty('--kanban-width', (width - columnMargin) + 'px');\n            }\n          };\n          resizeObserver = new ResizeObserver(resizeCb);\n          return columns.each(function(index, column) {\n            return resizeObserver.observe(column);\n          });\n        };\n      })(this);\n      board = initBoard();\n      board.events((function(_this) {\n        return function(event, entries) {\n          var visibleEntries;\n          if (event === 'SHOW_CARD') {\n            visibleEntries = entries.filter(function(entry) {\n              return entry.visible && !$scope.usCardVisibility[entry.id];\n            });\n            if (visibleEntries.length) {\n              $scope.$evalAsync(function() {\n                return visibleEntries.forEach(function(entry) {\n                  return $scope.usCardVisibility[entry.id] = true;\n                });\n              });\n            }\n          }\n        };\n      })(this));\n      $scope.taskColumnLoaded = function(event, status, swimlane) {\n        var column;\n        column = event.target[0];\n        return board.addSwimlane(column, status, swimlane);\n      };\n      $scope.cardLoaded = function(event, status, swimlane) {\n        return board.addCard(event.target[0], status, swimlane);\n      };\n      _tableBody = null;\n      $scope.isTableLoaded = false;\n      $scope.kanbanTableLoaded = function(event, swimlaneId) {\n        var tableBody, tableHeaderDom;\n        $scope.$evalAsync((function(_this) {\n          return function() {\n            if (swimlaneId) {\n              $scope.openSwimlane(swimlaneId);\n            }\n            return $scope.isTableLoaded = true;\n          };\n        })(this));\n        tableBody = event.target;\n        _tableBody = tableBody;\n        tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\");\n        tableBody.on(\"scroll\", function(event) {\n          var scroll;\n          scroll = -1 * event.currentTarget.scrollLeft;\n          return tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        });\n        watchKanbanSize();\n      };\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (_tableBody) {\n          return _tableBody.off();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective]);\n\n  KanbanArchivedShowStatusHeaderDirective = function($rootscope, $translate, kanbanUserstoriesService) {\n    var link, showArchivedText;\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\");\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch('ctrl.initialLoad', (function(_this) {\n        return function(initialLoad) {\n          var show, status;\n          if (!initialLoad) {\n            return;\n          }\n          unwatch();\n          status = $scope.$eval($attrs.tgKanbanArchivedShowStatusHeader);\n          show = false;\n          kanbanUserstoriesService.addArchivedStatus(status.id);\n          kanbanUserstoriesService.hideStatus(status.id);\n          return $el.on(\"click\", function(event) {\n            return $scope.$apply(function() {\n              if (!show) {\n                $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id);\n                kanbanUserstoriesService.showStatus(status.id);\n                return show = true;\n              }\n            });\n          });\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedShowStatusHeader\", [\"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedShowStatusHeaderDirective]);\n\n  KanbanArchivedStatusIntroDirective = function($translate, kanbanUserstoriesService) {\n    var link, userStories;\n    userStories = [];\n    link = function($scope, $el, $attrs) {\n      var status;\n      status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro);\n      $scope.$on(\"kanban:shown-userstories-for-status\", function(ctx, statusId, userStoriesLoaded) {\n        if (statusId === status.id) {\n          kanbanUserstoriesService.deleteStatus(statusId);\n          return kanbanUserstoriesService.add(userStoriesLoaded);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective]);\n\n  KanbanSquishColumnDirective = function(rs, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      $scope.foldStatus = function(status) {\n        if (!$scope.folds) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n        }\n        $scope.unfold = null;\n        $scope.folds[status.id] = !!!$scope.folds[status.id];\n        if (!$scope.folds[status.id]) {\n          $scope.unfold = status.id;\n        }\n        rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds);\n      };\n      return unwatch = $scope.$watch('ctrl.initialLoad', function(load) {\n        var archivedFolds, i, len, ref, status;\n        if (load && ((ref = $scope.usByStatus) != null ? ref.size : void 0)) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n          archivedFolds = $scope.usStatusList.filter(function(status) {\n            return status.is_archived;\n          });\n          for (i = 0, len = archivedFolds.length; i < len; i++) {\n            status = archivedFolds[i];\n            $scope.folds[status.id] = true;\n          }\n          return unwatch();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", KanbanSquishColumnDirective]);\n\n  KanbanWipLimitDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var redrawWipLimit, status;\n      status = $scope.$eval($attrs.tgKanbanWipLimit);\n      redrawWipLimit = (function(_this) {\n        return function() {\n          return $timeout(function() {\n            var cards, element, wipLimitClass;\n            cards = $el.find(\"tg-card\");\n            wipLimitClass = '';\n            element = null;\n            if (cards.length + 1 === status.wip_limit) {\n              wipLimitClass = 'one-left';\n              element = cards[cards.length - 1];\n            } else if (cards.length === status.wip_limit) {\n              wipLimitClass = 'reached';\n              element = cards[cards.length - 1];\n            } else if (cards.length > status.wip_limit) {\n              wipLimitClass = 'exceeded';\n              element = cards[status.wip_limit - 1];\n            }\n            $el.find(\".kanban-wip-limit\").remove();\n            if (element) {\n              return angular.element(element).after(\"<div class='kanban-wip-limit \" + wipLimitClass + \"'><span>WIP Limit</span></div>\");\n            }\n          }, 0, false);\n        };\n      })(this);\n      if (status && !status.is_archived) {\n        $scope.$on(\"redraw:wip\", redrawWipLimit);\n        $scope.$on(\"kanban:us:move\", redrawWipLimit);\n        $scope.$on(\"usform:new:success\", redrawWipLimit);\n        $scope.$on(\"usform:bulk:success\", redrawWipLimit);\n      }\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective]);\n\n  CardSvgTemplate = \"<tg-svg>\\n    <svg class=\\\"icon <%- svgIcon %>\\\" style=\\\"fill: <%- svgFill %>\\\">\\n        <use xlink:href=\\\"#<%- svgIcon %>\\\" attr-href=\\\"#<%- svgIcon %>\\\">\\n            <% if(svgTitle) { %>\\n            <title><%- svgTitle %></title>\\n            <% } %>\\n        </use>\\n    </svg>\\n</tg-svg>\";\n\n  CardAssignedToDirective = function($template, $translate, avatarService, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-assigned-to.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || [vm.item.get('assigned_to')]).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          },\n          loading: \"<img\\n    class='loading-spinner'\\n    src='/\" + window._version + \"/svg/spinner-circle.svg'\\n    alt='loading...'\\n/>\"\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            return $el.find('.card-user-avatar').on('click', function(event) {\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickAssignedTo({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardAssignedTo\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", CardAssignedToDirective]);\n\n  CardDataDirective = function($template, $translate, avatarService, projectService, dueDateService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-data.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || []).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          } else {\n            return console.error('invalid assigned_users', vm.item.get('assigned_users').toJS());\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          emptyTask: function() {\n            var tasks;\n            tasks = vm.item.getIn(['model', 'tasks']);\n            return !tasks || !tasks.size;\n          },\n          dueDateColor: function() {\n            return dueDateService.color({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          dueDateTitle: function() {\n            return dueDateService.title({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          totalAttachments: function() {\n            if (vm.type === 'task') {\n              return vm.item.getIn(['model', 'attachments']).size;\n            } else {\n              return vm.item.getIn(['model', 'total_attachments']);\n            }\n          },\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            return $el.html(html);\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardData\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", \"tgDueDateService\", CardDataDirective]);\n\n  CardActionsDirective = function($template, $translate, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-actions.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        return template({\n          vm: vm,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange, openPopup, removePopupOpenState;\n        initializeZoom = false;\n        openPopup = false;\n        removePopupOpenState = function() {\n          openPopup = false;\n          return $el.find(\".js-popup-button\").removeClass('popover-open');\n        };\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            openPopup = false;\n            return $el.find('.js-popup-button').on('click', function(event) {\n              var actions;\n              if (openPopup) {\n                return;\n              }\n              openPopup = true;\n              $(event.currentTarget).addClass('popover-open');\n              actions = [];\n              if (projectService.project.get('my_permissions').includes($scope.vm.getModifyPermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.EDIT'),\n                  icon: 'icon-edit',\n                  event: function() {\n                    return $scope.vm.onClickEdit({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                }, {\n                  text: $translate.instant('COMMON.CARD.ASSIGN_TO'),\n                  icon: 'icon-assign-to',\n                  event: function() {\n                    return $scope.vm.onClickAssignedTo({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              if (projectService.project.get('my_permissions').includes($scope.vm.getDeletePermisionKey())) {\n                actions.push({\n                  text: $translate.instant('COMMON.CARD.DELETE'),\n                  icon: 'icon-trash',\n                  event: function() {\n                    return $scope.vm.onClickDelete({\n                      id: $scope.vm.item.get('id')\n                    });\n                  }\n                });\n              }\n              return taiga.globalPopover(event.currentTarget, actions, {}, function() {\n                return removePopupOpenState();\n              });\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardActions\", [\"$tgTemplate\", \"$translate\", \"tgProjectService\", CardActionsDirective]);\n\n  KanbanSwimlaneDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addSwimlane, className, ctrl, currentSwimlane, tableHeaderDom;\n      tableHeaderDom = [];\n      addSwimlane = null;\n      ctrl = $scope.$parent.ctrl;\n      if (!ctrl) {\n        throw new Error('KanbanSwimlaneDirective ctrl not found');\n      }\n      $el.on(\"scroll\", function(event) {\n        var scroll;\n        if (!tableHeaderDom.length) {\n          tableHeaderDom = $el.find(\".kanban-swimlane-title\");\n        }\n        if (!addSwimlane) {\n          addSwimlane = $el.find(\".kanban-swimlane-add\");\n        }\n        scroll = event.currentTarget.scrollLeft;\n        tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        return addSwimlane.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n      });\n      currentSwimlane = null;\n      className = 'pending-to-open';\n      $scope.mouseleaveSwimlane = (function(_this) {\n        return function(event) {\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n            return currentSwimlane = null;\n          }\n        };\n      })(this);\n      $scope.mouseoverSwimlane = (function(_this) {\n        return function(event, swimlaneId) {\n          var isDragging, swimlane, timeoutId;\n          if (currentSwimlane && currentSwimlane.id === swimlaneId) {\n            return;\n          }\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n          }\n          swimlane = event.currentTarget;\n          if (swimlane.classList.contains('folded')) {\n            isDragging = !!document.querySelectorAll('tg-card.gu-mirror').length;\n            if (!isDragging) {\n              return;\n            }\n            swimlane.classList.add(className);\n            timeoutId = $timeout(function() {\n              swimlane.classList.remove(className);\n              return ctrl.toggleSwimlane(swimlaneId);\n            }, 1000);\n            return currentSwimlane = {\n              id: swimlaneId,\n              timeoutId: timeoutId,\n              el: swimlane\n            };\n          }\n        };\n      })(this);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSwimlane\", ['$timeout', KanbanSwimlaneDirective]);\n\n  KanbanTaskboardColumnDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $el.on(\"scroll\", function(event) {\n        var scroll, taskCounterDom;\n        scroll = event.currentTarget.scrollTop;\n        taskCounterDom = $el.find(\".kanban-task-counter\");\n        return taskCounterDom.css(\"transform\", \"translateY(\" + scroll + \"px)\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanTaskboardColumn\", [KanbanTaskboardColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanSortableDirective = function($repo, $rs, $rootscope, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var drake, init, oldIndex, unwatch;\n      drake = null;\n      oldIndex = null;\n      $scope.openSwimlane = (function(_this) {\n        return function(id) {\n          var containers;\n          containers = _.map($('.kanban-swimlane[data-swimlane=\"' + id + '\"] .taskboard-column'), function(item) {\n            return item;\n          });\n          return init(containers);\n        };\n      })(this);\n      init = (function(_this) {\n        return function(containers) {\n          var deleteElement, initialContainer, itemEl, newParentScope, nextCard, previousCard, scroll, tdom;\n          if (!($scope.project.my_permissions.indexOf(\"modify_us\") > -1)) {\n            return;\n          }\n          if (drake) {\n            containers.forEach(function(container) {\n              return drake.containers.push(container);\n            });\n            return;\n          }\n          newParentScope = null;\n          itemEl = null;\n          tdom = $el;\n          deleteElement = function(itemEl) {\n            itemEl.off();\n            return itemEl.remove();\n          };\n          drake = dragula(containers, {\n            copySortSource: false,\n            copy: false,\n            moves: function(item) {\n              return $(item).is('tg-card');\n            }\n          });\n          initialContainer = null;\n          drake.on('over', function(item, container) {\n            if (!initialContainer) {\n              return initialContainer = container;\n            } else if (container !== initialContainer) {\n              return $(container).addClass('target-drop');\n            }\n          });\n          drake.on('out', function(item, container) {\n            if (container !== initialContainer) {\n              return $(container).removeClass('target-drop');\n            }\n          });\n          drake.on('drag', function(item) {\n            var dragMultipleItems, firstElement, parentEl;\n            dragMultipleItems = window.dragMultiple.getElements();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElement = dragMultipleItems[0];\n            parentEl = item.parentNode;\n            oldIndex = $(parentEl).find('tg-card').index(firstElement);\n            initialContainer = null;\n            return window.dragMultiple.start(item, containers);\n          });\n          drake.on('cloned', function(item, dropTarget) {\n            return $(item).addClass('multiple-drag-mirror');\n          });\n          previousCard = null;\n          nextCard = null;\n          drake.on('drop', function(item, target, source, sibling) {\n            var next, prev;\n            previousCard = null;\n            nextCard = null;\n            prev = $(item).prevAll('tg-card:not(.gu-transit)');\n            next = $(item).nextAll('tg-card:not(.gu-transit)');\n            previousCard = null;\n            if (prev.length && prev[0].dataset.id) {\n              previousCard = Number(prev[0].dataset.id);\n            }\n            nextCard = null;\n            if (!previousCard && next.length && next[0].dataset.id) {\n              return nextCard = Number(next[0].dataset.id);\n            }\n          });\n          drake.on('dragend', function(item, target, source, sibling) {\n            var dragMultipleItems, finalUsList, firstElement, firstElementId, index, newStatus, newSwimlane, parentEl, usList;\n            parentEl = item.parentNode;\n            dragMultipleItems = window.dragMultiple.stop();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElementId = dragMultipleItems[0].dataset.id;\n            firstElement = dragMultipleItems[0];\n            index = $(parentEl).find('tg-card').index(firstElement);\n            newStatus = Number(parentEl.dataset.status);\n            newSwimlane = Number(parentEl.dataset.swimlane);\n            if (index === oldIndex && initialContainer === parentEl) {\n              return;\n            }\n            if (initialContainer !== parentEl) {\n              $(parentEl).addClass('new');\n              $(parentEl).one('animationend', function() {\n                return $(parentEl).removeClass('new');\n              });\n            }\n            usList = _.map(dragMultipleItems, function(item) {\n              return kanbanUserstoriesService.usMap.get(Number(item.dataset.id));\n            });\n            finalUsList = _.map(usList, function(item) {\n              return {\n                id: item.get('id'),\n                oldStatusId: item.getIn(['model', 'status']),\n                oldSwimlaneId: item.getIn(['model', 'swimlane'])\n              };\n            });\n            return $scope.$apply(function() {\n              _.each(usList, (function(_this) {\n                return function(item, key) {\n                  var oldStatus, oldSwimlaneId, sameContainer;\n                  oldStatus = item.getIn(['model', 'status']);\n                  oldSwimlaneId = item.getIn(['model', 'swimlane']) || -1;\n                  sameContainer = newStatus === oldStatus && newSwimlane === oldSwimlaneId;\n                  if (!sameContainer) {\n                    itemEl = $(dragMultipleItems[key]);\n                    return deleteElement(itemEl);\n                  }\n                };\n              })(this));\n              return $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, newSwimlane, index, previousCard, nextCard);\n            });\n          });\n          return scroll = autoScroll(containers, {\n            margin: 100,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        };\n      })(this);\n      unwatch = $scope.$watch(\"isTableLoaded\", function(tableLoaded) {\n        var containers, isSwimlane;\n        if (!tableLoaded) {\n          return;\n        }\n        isSwimlane = $('.swimlane').length;\n        if (isSwimlane) {\n          return;\n        }\n        unwatch();\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        return init(containers);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (drake) {\n          return drake.destroy();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"tgKanbanUserstories\", KanbanSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicDetailController, EpicStatusButtonDirective, EpicStatusDisplayDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEpics\");\n\n  EpicDetailController = (function(superClass) {\n    extend(EpicDetailController, superClass);\n\n    EpicDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function EpicDetailController(scope, rootscope, repo, confirm, rs, rs2, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.rs2 = rs2;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.epicRef = this.params.epicref;\n      this.scope.sectionName = this.translate.instant(\"EPIC.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    EpicDetailController.prototype._setMeta = function() {\n      var description, ref, title;\n      title = this.translate.instant(\"EPIC.PAGE_TITLE\", {\n        epicRef: \"#\" + this.scope.epic.ref,\n        epicSubject: this.scope.epic.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\n        epicStatus: ((ref = this.scope.statusById[this.scope.epic.status]) != null ? ref.name : void 0) || \"--\",\n        epicDescription: angular.element(this.scope.epic.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    EpicDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('epic', this.scope.epicId, this.scope.projectId);\n    };\n\n    EpicDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1);\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadEpic();\n        };\n      })(this));\n      return this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-epics\", ctx);\n    };\n\n    EpicDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.immutableProject = this.projectService.project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.epic_statuses;\n      this.scope.statusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    EpicDetailController.prototype.loadEpic = function() {\n      return this.rs.epics.getByRef(this.scope.projectId, this.params.epicref).then((function(_this) {\n        return function(epic) {\n          var ctx, ref, ref1;\n          _this.scope.epic = epic;\n          _this.scope.immutableEpic = Immutable.fromJS(epic._attrs);\n          _this.scope.epicId = epic.id;\n          _this.scope.commentModel = epic;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'epic');\n          if (((ref = _this.scope.epic.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.epic.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadUserstories = function() {\n      return this.rs2.userstories.listInEpic(this.scope.epicId).then((function(_this) {\n        return function(data) {\n          return _this.scope.userstories = data;\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadEpic().then((function(_this) {\n        return function() {\n          return _this.loadUserstories();\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    EpicDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.upvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.downvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    EpicDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.watch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.unwatch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onSelectColor = function(color) {\n      var onSelectColorError, onSelectColorSuccess, transform;\n      onSelectColorSuccess = (function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.confirm.notify('success');\n        };\n      })(this);\n      onSelectColorError = (function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      transform = this.modelTransform.save(function(epic) {\n        epic.color = color;\n        return epic;\n      });\n      return transform.then(onSelectColorSuccess, onSelectColorError);\n    };\n\n    return EpicDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"EpicDetailController\", EpicDetailController);\n\n  EpicStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(epic) {\n        var html, status;\n        status = $scope.statusById[epic.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(epic) {\n        if (epic != null) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective]);\n\n  EpicStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_epic\") !== -1;\n      };\n      render = (function(_this) {\n        return function(epic) {\n          var html, status;\n          status = $scope.statusById[epic.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(epic) {\n          epic.status = status;\n          return epic;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var epic;\n        epic = $model.$modelValue;\n        if (epic) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignSprintToIssueButtonDirective, IssueDetailController, IssuePriorityButtonDirective, IssueSeverityButtonDirective, IssueStatusButtonDirective, IssueStatusDisplayDirective, IssueTypeButtonDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, normalizeString, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssueDetailController = (function(superClass) {\n    extend(IssueDetailController, superClass);\n\n    IssueDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function IssueDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.issueRef = this.params.issueref;\n      this.scope.sectionName = this.translate.instant(\"ISSUES.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    IssueDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, ref3, title;\n      title = this.translate.instant(\"ISSUE.PAGE_TITLE\", {\n        issueRef: \"#\" + this.scope.issue.ref,\n        issueSubject: this.scope.issue.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\n        issueStatus: ((ref = this.scope.statusById[this.scope.issue.status]) != null ? ref.name : void 0) || \"--\",\n        issueType: ((ref1 = this.scope.typeById[this.scope.issue.type]) != null ? ref1.name : void 0) || \"--\",\n        issueSeverity: ((ref2 = this.scope.severityById[this.scope.issue.severity]) != null ? ref2.name : void 0) || \"--\",\n        issuePriority: ((ref3 = this.scope.priorityById[this.scope.issue.priority]) != null ? ref3.name : void 0) || \"--\",\n        issueDescription: angular.element(this.scope.issue.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    IssueDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('issue', this.scope.issueId, this.scope.projectId);\n    };\n\n    IssueDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1);\n        };\n      })(this));\n      this.scope.$on(\"promote-issue-to-us:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1);\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"assign-sprint-to-issue:success\", (function(_this) {\n        return function(ctx, milestoneId) {\n          _this.scope.issue.milestone = milestoneId;\n          _this.rootscope.$broadcast(\"object:updated\");\n          if (milestoneId) {\n            return _this.loadSprint();\n          } else {\n            return _this.scope.sprint = null;\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      if (this.scope.project.is_issues_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-issues\", ctx);\n      } else {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      }\n    };\n\n    IssueDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.issue_statuses;\n      this.scope.statusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.typeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      this.scope.typeList = _.sortBy(project.issue_types, \"order\");\n      this.scope.severityList = project.severities;\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = project.priorities;\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssueDetailController.prototype.loadIssue = function() {\n      return this.rs.issues.getByRef(this.scope.projectId, this.params.issueref).then((function(_this) {\n        return function(issue) {\n          var ctx, ref, ref1;\n          _this.scope.issue = issue;\n          _this.scope.issueId = issue.id;\n          _this.scope.commentModel = issue;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'issue');\n          if (((ref = _this.scope.issue.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.issue.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.loadSprint = function() {\n      if (this.scope.issue.milestone) {\n        return this.rs.sprints.get(this.scope.issue.project, this.scope.issue.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    IssueDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadIssue().then((function(_this) {\n        return function() {\n          if (_this.scope.project.my_permissions.indexOf(\"view_milestones\") !== -1) {\n            return _this.loadSprint();\n          }\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    IssueDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.upvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.downvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    IssueDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.watch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.unwatch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    return IssueDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"IssueDetailController\", IssueDetailController);\n\n  IssueStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issue) {\n        var html, status;\n        status = $scope.statusById[issue.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(issue) {\n        if (issue != null) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective]);\n\n  IssueStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = (function(_this) {\n        return function(issue) {\n          var html, status;\n          status = $scope.statusById[issue.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          html = $compile(html)($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(statusId) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.status = statusId;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective]);\n\n  IssueTypeButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-type-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, type;\n        type = $scope.typeById[issue.type];\n        html = template({\n          type: type,\n          typees: $scope.typeList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(type) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.type = type;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.type = type;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".type-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-type\").popover().open();\n      });\n      $el.on(\"click\", \".type\", function(event) {\n        var target, type;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        type = target.data(\"type-id\");\n        return save(type);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.type : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective]);\n\n  IssueSeverityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-severity-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, severity;\n        severity = $scope.severityById[issue.severity];\n        html = template({\n          severity: severity,\n          severityes: $scope.severityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(severity) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.severity = severity;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.severity = severity;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".severity-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-severity\").popover().open();\n      });\n      $el.on(\"click\", \".severity\", function(event) {\n        var severity, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        severity = target.data(\"severity-id\");\n        return save(severity);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.severity : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective]);\n\n  IssuePriorityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-priority-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, priority;\n        priority = $scope.priorityById[issue.priority];\n        html = template({\n          priority: priority,\n          priorityes: $scope.priorityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(priority) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.priority = priority;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.priority = priority;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".priority-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-priority\").popover().open();\n      });\n      $el.on(\"click\", \".priority\", function(event) {\n        var priority, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        priority = target.data(\"priority-id\");\n        return save(priority);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.priority : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective]);\n\n  AssignSprintToIssueButtonDirective = function($rootscope, $rs, $repo, $loading, $translate, lightboxService, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var avaliableMilestones, existsMilestone, issue;\n      avaliableMilestones = [];\n      issue = null;\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        if (item.milestone) {\n          $el.find('.assign-issue-button.button-unset').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-set').addClass('is-active');\n        } else {\n          $el.find('.assign-issue-button.button-set').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-unset').addClass('is-active');\n        }\n      });\n      $el.on(\"click\", \".assign-issue-button.button-unset\", function(event) {\n        var title;\n        event.preventDefault();\n        event.stopPropagation();\n        title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\");\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          $scope.milestones = data.milestones;\n          $scope.selectedSprint = issue.milestone;\n          avaliableMilestones = angular.copy($scope.milestones);\n          return lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"));\n        });\n      });\n      $el.on(\"click\", \".assign-issue-button.button-set\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          var currentSprint, message, title;\n          currentSprint = _.find(data.milestones, {\n            \"id\": issue.milestone\n          });\n          title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: currentSprint.name\n          });\n          return $confirm.ask(title, null, message).then(function(askResponse) {\n            var onError, onSuccess, transform;\n            onSuccess = function() {\n              $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null);\n              askResponse.finish();\n              return lightboxService.close($el);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            transform = $modelTransform.save(function(issue) {\n              issue.setAttr('milestone', null);\n              return issue;\n            });\n            return transform.then(onSuccess, onError);\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      existsMilestone = function(needle, haystack) {\n        haystack = normalizeString(haystack.toUpperCase());\n        needle = normalizeString(needle.toUpperCase());\n        return _.includes(haystack, needle);\n      };\n      $scope.filterMilestones = function(filterText) {\n        return $scope.milestones = avaliableMilestones.filter(function(milestone) {\n          return existsMilestone(filterText, milestone.name);\n        });\n      };\n      return $scope.saveIssueToSprint = function(selectedSprint, event) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($(event.currentTarget)).start();\n        issue.setAttr('milestone', selectedSprint.id);\n        transform = $modelTransform.save(function(item) {\n          issue.setAttr('milestone', selectedSprint.id);\n          return item;\n        });\n        return transform.then(function() {\n          currentLoading.finish();\n          lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"));\n          return $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id);\n        });\n      };\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      templateUrl: \"issue/assign-sprint-to-issue-button.html\"\n    };\n  };\n\n  module.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\", \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\", \"$tgConfirm\", AssignSprintToIssueButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkIssuesDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaIssues\");\n\n  CreateBulkIssuesDirective = function($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, submit, submitButton;\n      form = null;\n      $scope.$on(\"issueform:bulk\", function(ctx, projectId, milestoneId, status) {\n        if (form) {\n          form.reset();\n        }\n        lightboxService.open($el);\n        return $scope[\"new\"] = {\n          projectId: projectId,\n          milestoneId: milestoneId,\n          bulk: \"\"\n        };\n      });\n      submit = debounce(2000, function(event) {\n        var currentLoading, data, milestoneId, projectId, promise;\n        event.preventDefault();\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target(submitButton).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        data = $scope[\"new\"].bulk;\n        projectId = $scope[\"new\"].projectId;\n        milestoneId = $scope[\"new\"].milestoneId;\n        promise = $rs.issues.bulkCreate(projectId, milestoneId, data);\n        promise.then(function(result) {\n          result = _.map(result.data, function(x) {\n            return $model.make_model('issues', x);\n          });\n          currentLoading.finish();\n          $rootscope.$broadcast(\"issueform:new:success\", result);\n          lightboxService.close($el);\n          return $confirm.notify(\"success\");\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      });\n      submitButton = $el.find(\"button[type='submit']\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssueAssignedToInlineEditionDirective, IssueStatusInlineEditionDirective, IssuesController, IssuesOrderingDirective, IssuesPaginationDirective, bindMethods, bindOnce, debounceLeading, groupBy, joinStr, mixOf, module, startswith, taiga, toString, trim,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssuesController = (function(superClass) {\n    extend(IssuesController, superClass);\n\n    IssuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgUrls\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgUserActivityService\"];\n\n    IssuesController.prototype.filtersHashSuffix = \"issues-filters\";\n\n    IssuesController.prototype.myFiltersHashSuffix = \"issues-my-filters\";\n\n    IssuesController.prototype.excludePrefix = \"exclude_\";\n\n    IssuesController.prototype.filterCategories = [\"tags\", \"status\", \"type\", \"severity\", \"priority\", \"assigned_to\", \"owner\", \"role\"];\n\n    IssuesController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_status', 'status', 'exclude_type', 'type', 'exclude_severity', 'severity', 'exclude_priority', 'priority', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by'];\n\n    function IssuesController(scope, rootscope, repo, confirm, rs, urls, params1, q1, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, storage, filterRemoteStorageService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.urls = urls;\n      this.params = params1;\n      this.q = q1;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.loadIssues = bind(this.loadIssues, this);\n      bindMethods(this);\n      this.showTags = true;\n      this.scope.sectionName = this.translate.instant(\"PROJECT.SECTION.ISSUES\");\n      this.voting = false;\n      this.openFilter = false;\n      if (this.applyStoredFilters(this.params.pslug, this.filtersHashSuffix, this.validQueryParams)) {\n        return;\n      }\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ISSUES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1);\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"assigned-to:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role') || _this.isOrderedBy('assigned_to') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n      this.scope.$on(\"status:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status') || _this.isOrderedBy('status') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n    }\n\n    IssuesController.prototype.toggleShowTags = function() {\n      return this.rs.issues.storeIssuesShowTags(this.scope.projectId, this.showTags);\n    };\n\n    IssuesController.prototype.isOrderedBy = function(fieldName) {\n      var pattern;\n      pattern = new RegExp(\"-*\" + fieldName);\n      return pattern.test(this.location.search().order_by);\n    };\n\n    IssuesController.prototype.changeQ = function(q) {\n      this.unselectFilter(\"page\");\n      this.replaceFilter(\"q\", q);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(\"page\");\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.addFilter = function(newFilter) {\n      this.unselectFilter(\"page\");\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.selectCustomFilter = function(customFilter) {\n      var orderBy;\n      orderBy = this.location.search().order_by;\n      if (orderBy) {\n        customFilter.filter.order_by = orderBy;\n      }\n      this.unselectFilter(\"page\");\n      this.replaceAllFilters(customFilter.filter);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, j, len, ref;\n      ref = this.selectedFilters;\n      for (j = 0, len = ref.length; j < len; j++) {\n        filter = ref[j];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    IssuesController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, j, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    IssuesController.prototype.generateFilters = function() {\n      var excludeKey, j, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, this.filtersHashSuffix);\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.q = urlfilters.q;\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.issues.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, k, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.type = _.map(data.types, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.severity = _.map(data.severities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.priority = _.map(data.priorities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (k = 0, len1 = ref1.length; k < len1; k++) {\n            key = ref1[k];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filterQ = loadFilters.q;\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\n              dataType: \"type\",\n              content: dataCollection.type\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\n              dataType: \"severity\",\n              content: dataCollection.severity\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\n              dataType: \"priority\",\n              content: dataCollection.priority\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.initializeSubscription = function() {\n      var routingKey;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      return this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n    };\n\n    IssuesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_issues_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.severityList = _.sortBy(project.severities, \"order\");\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = _.sortBy(project.priorities, \"order\");\n      this.scope.issueTypes = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueTypeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssuesController.prototype.loadIssuesRequests = 0;\n\n    IssuesController.prototype.loadIssues = function() {\n      var params, promise;\n      params = this.location.search();\n      promise = this.rs.issues.list(this.scope.projectId, params);\n      this.loadIssuesRequests += 1;\n      promise.index = this.loadIssuesRequests;\n      promise.then((function(_this) {\n        return function(data) {\n          if (promise.index === _this.loadIssuesRequests) {\n            _this.scope.issues = data.models;\n            _this.scope.page = data.current;\n            _this.scope.count = data.count;\n            _this.scope.paginatedBy = data.paginatedBy;\n          }\n          return data;\n        };\n      })(this));\n      return promise;\n    };\n\n    IssuesController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.generateFilters();\n      if (this.rs.issues.getIssuesShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadIssues();\n    };\n\n    IssuesController.prototype.addNewIssue = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"genericform:new\", {\n        'objType': 'issue',\n        'project': project\n      });\n    };\n\n    IssuesController.prototype.addIssuesInBulk = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"issueform:bulk\", project.id);\n    };\n\n    IssuesController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return IssuesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"IssuesController\", IssuesController);\n\n  IssuesPaginationDirective = function($log, $location, $template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"issue/issue-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".issues-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        $pagEl.show();\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        return $pagEl.html(html);\n      };\n      $scope.$watch(\"issues\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".issues-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      $el.on(\"click\", \".issues-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      return $el.on(\"click\", \".issues-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadIssues();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesPagination\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesPaginationDirective]);\n\n  IssuesOrderingDirective = function($log, $location, $template, $compile) {\n    var link, linkOrdering;\n    linkOrdering = function($scope, $el, $attrs, $ctrl) {\n      var colHeadElement, currentOrder, icon, svg;\n      currentOrder = $ctrl.getIssuesOrderBy();\n      if (currentOrder) {\n        icon = startswith(currentOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n        colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(currentOrder, \"-\")) + \"']\");\n        svg = colHeadElement.find('svg');\n        svg.addClass(icon);\n        $compile(colHeadElement.contents())($scope);\n      }\n      return $el.on(\"click\", \".row.title > div:not(.skip-order)\", function(event) {\n        var finalOrder, newOrder, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        currentOrder = $ctrl.getIssuesOrderBy();\n        newOrder = target.data(\"fieldname\");\n        if (newOrder === 'total_voters' && currentOrder !== \"-total_voters\") {\n          currentOrder = \"total_voters\";\n        }\n        finalOrder = currentOrder === newOrder ? \"-\" + newOrder : newOrder;\n        return $scope.$apply(function() {\n          var urlfilters;\n          $ctrl.replaceFilter(\"order_by\", finalOrder);\n          if ($ctrl.filtersHashSuffix) {\n            urlfilters = $ctrl.getQueryParams();\n            $ctrl.storeFilters($ctrl.params.pslug, urlfilters, $ctrl.filtersHashSuffix);\n          }\n          return $ctrl.loadIssues().then(function() {\n            $el.find('.row.title svg').removeClass();\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(finalOrder, \"-\")) + \"']\");\n            icon = startswith(finalOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n            colHeadElement.find('svg').addClass(icon);\n            return $compile(target.contents())($scope);\n          });\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkOrdering($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesOrdering\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesOrderingDirective]);\n\n  IssueStatusInlineEditionDirective = function($repo, $template, $rootscope) {\n\n    /*\n    Print the status of an Issue and a popover to change it.\n    - tg-issue-status-inline-edition: The issue\n    \n    Example:\n    \n      div.status(tg-issue-status-inline-edition=\"issue\")\n        a.issue-status(href=\"\")\n    \n    NOTE: This directive need 'issueStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateIssueStatus;\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true);\n    updateIssueStatus = function($el, issue, issueStatusById) {\n      var issueStatusDom, issueStatusDomParent, status;\n      issueStatusDomParent = $el.find(\".issue-status\");\n      issueStatusDom = $el.find(\".issue-status .issue-status-bind\");\n      status = issueStatusById[issue.status];\n      if (status) {\n        issueStatusDom.text(status.name);\n        issueStatusDom.prop(\"title\", status.name);\n        return issueStatusDomParent.css('color', status.color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue;\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueStatusInlineEdition);\n      $el.on(\"click\", \".issue-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var attachments, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        issue.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        attachments = issue.attachments;\n        return $scope.$apply(function() {\n          return $repo.save(issue).then(function(response) {\n            issue.attachments = attachments;\n            issue._isModified = false;\n            issue._attrs = _.extend(issue.getAttrs(), issue);\n            issue._modifiedAttrs = {};\n            return $rootscope.$broadcast(\"status:changed\", response);\n          });\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.issue_statuses\n        }));\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueStatusInlineEdition, (function(_this) {\n        return function(val) {\n          return updateIssueStatus($el, val, $scope.issueStatusById);\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\", IssueStatusInlineEditionDirective]);\n\n  IssueAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue, updateIssue;\n      updateIssue = function(issue) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n          imgurl: \"/\" + window._version + \"/images/unnamed.png\"\n        };\n        member = $scope.usersById[issue.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = null;\n        if (member) {\n          ctx.name = member.full_name_display;\n          ctx.bg = avatar.bg;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".issue-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition);\n      updateIssue(issue);\n      $el.on(\"click\", \".issue-assignedto\", function(event) {\n        var onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            var attachments;\n            issue.assigned_to = assignedUsers.pop() || null;\n            attachments = issue.attachments;\n            return $repo.save(issue).then(function() {\n              issue.attachments = attachments;\n              issue._isModified = false;\n              issue._attrs = _.extend(issue.getAttrs(), issue);\n              issue._modifiedAttrs = {};\n              updateIssue(issue);\n              return $rootscope.$broadcast(\"assigned-to:changed\", issue);\n            });\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [issue.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueAssignedToInlineEdition, function(val) {\n        return updateIssue(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UsClientRequirementButtonDirective, UsStatusButtonDirective, UsStatusDisplayDirective, UsTeamRequirementButtonDirective, UserStoryDetailController, bindMethods, bindOnce, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaUserStories\");\n\n  UserStoryDetailController = (function(superClass) {\n    extend(UserStoryDetailController, superClass);\n\n    UserStoryDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgConfig\", \"tgProjectService\", \"tgWysiwygService\", \"tgAttachmentsFullService\", \"$tgModel\", \"$sce\"];\n\n    function UserStoryDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, configService, projectService, wysiwigService, attachmentsFullService, tgmodel, sce) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.configService = configService;\n      this.projectService = projectService;\n      this.wysiwigService = wysiwigService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.tgmodel = tgmodel;\n      this.sce = sce;\n      bindMethods(this);\n      this.scope.usRef = this.params.usref;\n      this.scope.sectionName = this.translate.instant(\"US.SECTION_NAME\");\n      this.scope.tribeEnabled = this.configService.config.tribeHost;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserStoryDetailController.prototype._setMeta = function() {\n      var closedTasks, description, descriptionHtml, progressPercentage, ref, title, totalTasks;\n      totalTasks = this.scope.tasks.length;\n      closedTasks = _.filter(this.scope.tasks, (function(_this) {\n        return function(t) {\n          return _this.scope.taskStatusById[t.status].is_closed;\n        };\n      })(this)).length;\n      progressPercentage = totalTasks > 0 ? Math.round(100 * closedTasks / totalTasks) : 0;\n      title = this.translate.instant(\"US.PAGE_TITLE\", {\n        userStoryRef: \"#\" + this.scope.us.ref,\n        userStorySubject: this.scope.us.subject,\n        projectName: this.scope.project.name\n      });\n      descriptionHtml = this.sce.getTrustedHtml(this.wysiwigService.getHTML(this.scope.us.description) || \"\");\n      description = this.translate.instant(\"US.PAGE_DESCRIPTION\", {\n        userStoryStatus: ((ref = this.scope.statusById[this.scope.us.status]) != null ? ref.name : void 0) || \"--\",\n        userStoryPoints: this.scope.us.total_points,\n        userStoryDescription: angular.element(descriptionHtml).text(),\n        userStoryClosedTasks: closedTasks,\n        userStoryTotalTasks: totalTasks,\n        userStoryProgressPercentage: progressPercentage\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    UserStoryDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('us', this.scope.usId, this.scope.projectId);\n    };\n\n    UserStoryDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.relateToEpic = (function(_this) {\n        return function(us) {\n          return _this.scope.$broadcast(\"relate-to-epic:add\", us);\n        };\n      })(this);\n      this.scope.$on(\"related-tasks:update\", (function(_this) {\n        return function() {\n          var allClosed;\n          _this.loadTasks();\n          _this.scope.tasks = _.clone(_this.scope.tasks, false);\n          allClosed = _.every(_this.scope.tasks, function(task) {\n            return task.is_closed;\n          });\n          if (_this.scope.us.is_closed !== allClosed) {\n            return _this.loadUs();\n          }\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1);\n        };\n      })(this));\n      this.scope.$on(\"task:reorder\", (function(_this) {\n        return function(event, task, newIndex) {\n          return _this.reorderTask(task, newIndex);\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadUs();\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.params[\"kanban-status\"] && this.scope.project.is_kanban_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-kanban\", ctx);\n      } else {\n        if (this.scope.project.is_backlog_activated) {\n          if (this.scope.us.milestone) {\n            ctx.sprint = this.scope.sprint.slug;\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n          } else {\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-backlog\", ctx);\n          }\n        }\n      }\n    };\n\n    UserStoryDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.us_statuses;\n      this.scope.statusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(this.scope.pointsList, function(e) {\n        return e.id;\n      });\n      return project;\n    };\n\n    UserStoryDetailController.prototype.loadUs = function() {\n      var backlogHttpParams, kanbanHttpParams, kanbanStaus, locationSearch, milestone, noMilestone;\n      kanbanHttpParams = {};\n      locationSearch = this.location.search();\n      backlogHttpParams = _.pick(locationSearch, \"milestone\", \"no-milestone\");\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('kanban-')) {\n          return kanbanHttpParams[key.replace('kanban-', '')] = locationSearch[key];\n        }\n      });\n      Object.keys(locationSearch).forEach(function(key) {\n        if (key.startsWith('backlog-')) {\n          return backlogHttpParams[key.replace('backlog-', '')] = locationSearch[key];\n        }\n      });\n      milestone = backlogHttpParams.milestone;\n      if (milestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: milestone,\n          order_by: \"sprint_order\"\n        }));\n      }\n      noMilestone = backlogHttpParams[\"no-milestone\"];\n      if (noMilestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(backlogHttpParams, {\n          milestone: \"null\",\n          order_by: \"backlog_order\"\n        }));\n      }\n      kanbanStaus = kanbanHttpParams[\"status\"];\n      if (kanbanStaus) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, _.merge(kanbanHttpParams, {\n          order_by: \"kanban_order\"\n        }));\n      }\n      return this.rs.userstories.getByRef(this.scope.projectId, this.params.usref).then((function(_this) {\n        return function(us) {\n          _this.rootscope.$broadcast(\"userstory:loaded\", us);\n          _this.scope.us = us;\n          _this.scope.usId = us.id;\n          _this.scope.commentModel = us;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: us._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'us');\n          return us;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadSprint = function() {\n      if (this.scope.us.milestone) {\n        return this.rs.sprints.get(this.scope.us.project, this.scope.us.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    UserStoryDetailController.prototype.loadTasks = function() {\n      return this.rs.tasks.list(this.scope.projectId, null, this.scope.usId).then((function(_this) {\n        return function(tasks) {\n          _this.scope.tasks = tasks;\n          return tasks;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadUs().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadTasks()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    UserStoryDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.upvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.downvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    UserStoryDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.watch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.unwatch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onTribeInfo = function() {\n      var image, publishDesc, publishTitle, text;\n      publishTitle = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\");\n      image = $('<img />').attr({\n        'src': \"/\" + window._version + \"/images/monster-fight.png\",\n        'alt': this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n      });\n      text = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\");\n      publishDesc = $('<div></div>').append(image).append(text);\n      return this.confirm.success(publishTitle, publishDesc);\n    };\n\n    UserStoryDetailController.prototype.reorderTask = function(task, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this.scope.tasks.forEach(function(it) {\n        return orderList[it.id] = it.us_order;\n      });\n      withoutMoved = this.scope.tasks.filter(function(it) {\n        return it.id !== task.id;\n      });\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination[beforeDestination.length - 1];\n      newOrder = !previous ? 0 : previous.us_order + 1;\n      orderList[task.id] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter(function(it) {\n        return it.us_order === previous.us_order;\n      });\n      setOrders = _.fromPairs(previousWithTheSameOrder.map(function(it) {\n        return [it.id, it.us_order];\n      }));\n      afterDestination.forEach(function(it) {\n        return orderList[it.id] = it.us_order + 1;\n      });\n      this.scope.tasks = _.map(this.scope.tasks, function(it) {\n        it.us_order = orderList[it.id];\n        return it;\n      });\n      this.scope.tasks = _.sortBy(this.scope.tasks, \"us_order\");\n      data = {\n        us_order: newOrder,\n        version: task.version\n      };\n      return this.rs.tasks.reorder(task.id, data, setOrders).then((function(_this) {\n        return function(newTask) {\n          newTask = _this.tgmodel.make_model(\"tasks\", newTask);\n          _this.scope.tasks = _.map(_this.scope.tasks, function(it) {\n            if (it.id === newTask.id) {\n              return newTask;\n            } else {\n              return it;\n            }\n          });\n          return _this.rootscope.$broadcast(\"related-tasks:reordered\");\n        };\n      })(this));\n    };\n\n    return UserStoryDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserStoryDetailController\", UserStoryDetailController);\n\n  UsStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(us) {\n        var html, status;\n        status = $scope.statusById[us.status];\n        html = template({\n          is_closed: us.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(us) {\n        if (us != null) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective]);\n\n  UsStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = (function(_this) {\n        return function(us) {\n          var html, status;\n          status = $scope.statusById[us.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          $el.html(html);\n          return $compile($el.contents())($scope);\n        };\n      })(this);\n      save = (function(_this) {\n        return function(status) {\n          var currentLoading, onError, onSuccess, transform;\n          $el.find(\".pop-status\").popover().close();\n          currentLoading = $loading().target($el.find('.js-edit-status')).start();\n          transform = $modelTransform.save(function(us) {\n            us.status = status;\n            return us;\n          });\n          onSuccess = function() {\n            $rootScope.$broadcast(\"object:updated\");\n            return currentLoading.finish();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return currentLoading.finish();\n          };\n          return transform.then(onSuccess, onError);\n        };\n      })(this);\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var status, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        status = target.data(\"status-id\");\n        return save(status);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsStatusButtonDirective]);\n\n  UsTeamRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-team-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.team_requirement\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(team_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.team_requirement = team_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        var team_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        team_requirement = !$model.$modelValue.team_requirement;\n        return save(team_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.team_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective]);\n\n  UsClientRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-client-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.client_requirement\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(client_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.client_requirement = client_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        var client_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        client_requirement = !$model.$modelValue.client_requirement;\n        return save(client_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.client_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsClientRequirementButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskDetailController, TaskIsIocaineButtonDirective, TaskStatusButtonDirective, TaskStatusDisplayDirective, bindMethods, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaTasks\");\n\n  TaskDetailController = (function(superClass) {\n    extend(TaskDetailController, superClass);\n\n    TaskDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function TaskDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.taskRef = this.params.taskref;\n      this.scope.sectionName = this.translate.instant(\"TASK.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TaskDetailController.prototype._setMeta = function() {\n      var description, ref1, title;\n      title = this.translate.instant(\"TASK.PAGE_TITLE\", {\n        taskRef: \"#\" + this.scope.task.ref,\n        taskSubject: this.scope.task.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"TASK.PAGE_DESCRIPTION\", {\n        taskStatus: ((ref1 = this.scope.statusById[this.scope.task.status]) != null ? ref1.name : void 0) || \"--\",\n        taskDescription: angular.element(this.scope.task.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('task', this.scope.taskId, this.scope.projectId);\n    };\n\n    TaskDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"promote-task-to-us:success\", (function(_this) {\n        return function(e, ref) {\n          var ctx;\n          _this.analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1);\n          ctx = {\n            project: _this.scope.project.slug,\n            ref: ref\n          };\n          return _this.location.path(_this.navUrls.resolve(\"project-userstories-detail\", ctx));\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1);\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadTask();\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.scope.project.is_backlog_activated) {\n        if (this.scope.task.milestone) {\n          ctx.sprint = this.scope.sprint.slug;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n        } else if (this.scope.task.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      } else if (this.scope.project.is_kanban_activated) {\n        if (this.scope.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      }\n    };\n\n    TaskDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.task_statuses;\n      this.scope.statusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    TaskDetailController.prototype.loadTask = function() {\n      return this.rs.tasks.getByRef(this.scope.projectId, this.params.taskref).then((function(_this) {\n        return function(task) {\n          var ctx, ref1, ref2;\n          _this.scope.task = task;\n          _this.scope.taskId = task.id;\n          _this.scope.commentModel = task;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: task._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'task');\n          if (((ref1 = _this.scope.task.neighbors.previous) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          if (((ref2 = _this.scope.task.neighbors.next) != null ? ref2.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.next.ref\n            };\n            _this.scope.nextUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          return task;\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.loadSprint = function() {\n      if (this.scope.task.milestone) {\n        return this.rs.sprints.get(this.scope.task.project, this.scope.task.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadUserStory = function() {\n      if (this.scope.task.user_story) {\n        return this.rs.userstories.get(this.scope.task.project, this.scope.task.user_story).then((function(_this) {\n          return function(us) {\n            _this.scope.us = us;\n            return us;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadTask().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadUserStory()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    TaskDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.upvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.downvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    TaskDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.watch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.unwatch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    return TaskDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TaskDetailController\", TaskDetailController);\n\n  TaskStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(task) {\n        var html, status;\n        status = $scope.statusById[task.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(task) {\n        if (task != null) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective]);\n\n  TaskStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = (function(_this) {\n        return function(task) {\n          var html, status;\n          status = $scope.statusById[task.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(task) {\n          task.status = status;\n          return task;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.status : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective]);\n\n  TaskIsIocaineButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) {\n    var link, template;\n    template = $template.get(\"issue/iocaine-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = function(task) {\n        var ctx, html;\n        if (!isEditable() && !task.is_iocaine) {\n          $el.html(\"\");\n          return;\n        }\n        ctx = {\n          isIocaine: task.is_iocaine,\n          isEditable: isEditable()\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(is_iocaine) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find('label')).start();\n        transform = $modelTransform.save(function(task) {\n          task.is_iocaine = is_iocaine;\n          return task;\n        });\n        transform.then(function() {\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return currentLoading.finish();\n        });\n      };\n      $el.on(\"click\", \".is-iocaine\", function(event) {\n        var is_iocaine;\n        if (!isEditable()) {\n          return;\n        }\n        is_iocaine = !$model.$modelValue.is_iocaine;\n        return save(is_iocaine);\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.is_iocaine : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LeaveProjectDirective, TeamController, TeamFiltersDirective, TeamMemberCurrentUserDirective, TeamMemberStatsDirective, TeamMembersDirective, membersFilter, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaTeam\");\n\n  TeamController = (function(superClass) {\n    extend(TeamController, superClass);\n\n    TeamController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$location\", \"$tgNavUrls\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function TeamController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, auth, translate, projectService, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"TEAM.SECTION_NAME\";\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"TEAM.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TeamController.prototype.setRole = function(role) {\n      if (role) {\n        return this.scope.filtersRole = role;\n      } else {\n        return this.scope.filtersRole = null;\n      }\n    };\n\n    TeamController.prototype.loadMembers = function() {\n      var i, len, member, ref, user;\n      user = this.auth.getUser();\n      this.scope.totals = {};\n      ref = this.scope.activeUsers;\n      for (i = 0, len = ref.length; i < len; i++) {\n        member = ref[i];\n        this.scope.totals[member.id] = 0;\n      }\n      this.scope.currentUser = _.find(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n      return this.scope.memberships = _.reject(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n    };\n\n    TeamController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issuesEnabled = project.is_issues_activated;\n      this.scope.tasksEnabled = project.is_kanban_activated || project.is_backlog_activated;\n      this.scope.wikiEnabled = project.is_wiki_activated;\n      this.scope.owner = project.owner.id;\n      return project;\n    };\n\n    TeamController.prototype.loadMemberStats = function() {\n      return this.rs.projects.memberStats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totals;\n          totals = {};\n          _.forEach(_this.scope.totals, function(total, userId) {\n            var vals;\n            vals = _.map(stats, function(memberStats, statsKey) {\n              return memberStats[userId];\n            });\n            total = _.reduce(vals, function(sum, el) {\n              return sum + el;\n            });\n            return _this.scope.totals[userId] = total;\n          });\n          _this.scope.stats = _this._processStats(stats);\n          return _this.scope.stats.totals = _this.scope.totals;\n        };\n      })(this));\n    };\n\n    TeamController.prototype._processStat = function(stat) {\n      var key, max, min, singleStat, value;\n      max = _.max(_.toArray(stat));\n      min = _.min(_.toArray(stat));\n      singleStat = Object();\n      for (key in stat) {\n        if (!hasProp.call(stat, key)) continue;\n        value = stat[key];\n        if (value === min) {\n          singleStat[key] = 0.1;\n        } else if (value === max) {\n          singleStat[key] = 1;\n        } else {\n          singleStat[key] = (value * 0.5) / max;\n        }\n      }\n      return singleStat;\n    };\n\n    TeamController.prototype._processStats = function(stats) {\n      var key, value;\n      for (key in stats) {\n        value = stats[key];\n        stats[key] = this._processStat(value);\n      }\n      return stats;\n    };\n\n    TeamController.prototype.loadInitialData = function() {\n      var project, userRoles;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.loadMembers();\n      userRoles = _.map(this.scope.users, function(user) {\n        return user.role;\n      });\n      this.scope.roles = _.filter(this.scope.roles, function(role) {\n        return userRoles.indexOf(role.id) !== -1;\n      });\n      return this.loadMemberStats();\n    };\n\n    return TeamController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TeamController\", TeamController);\n\n  TeamFiltersDirective = function() {\n    return {\n      templateUrl: \"team/team-filter.html\"\n    };\n  };\n\n  module.directive(\"tgTeamFilters\", [TeamFiltersDirective]);\n\n  TeamMemberStatsDirective = function() {\n    return {\n      templateUrl: \"team/team-member-stats.html\",\n      scope: {\n        stats: \"=\",\n        userId: \"=user\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective);\n\n  TeamMemberCurrentUserDirective = function() {\n    return {\n      templateUrl: \"team/team-member-current-user.html\",\n      scope: {\n        project: \"=project\",\n        currentUser: \"=currentuser\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective);\n\n  TeamMembersDirective = function() {\n    var template;\n    template = \"team/team-members.html\";\n    return {\n      templateUrl: template,\n      scope: {\n        memberships: \"=\",\n        filtersQ: \"=filtersq\",\n        filtersRole: \"=filtersrole\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMembers\", TeamMembersDirective);\n\n  LeaveProjectDirective = function($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var leaveConfirm;\n      leaveConfirm = function() {\n        var confirm_leave_project_text, leave_project_text;\n        leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\");\n        confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\");\n        return $confirm.ask(leave_project_text, confirm_leave_project_text).then((function(_this) {\n          return function(response) {\n            var promise;\n            promise = $rs.projects.leave($scope.project.id);\n            promise.then(function() {\n              return currentUserService.loadProjects().then(function() {\n                response.finish();\n                $confirm.notify(\"success\");\n                return $location.path($navurls.resolve(\"home\"));\n              });\n            });\n            return promise.then(null, function(response) {\n              response.finish();\n              return $confirm.notify('error', response.data._error_message);\n            });\n          };\n        })(this));\n      };\n      return $scope.leave = function() {\n        if ($scope.project.owner.id === $scope.user.id) {\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: true,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      };\n    };\n    return {\n      scope: {\n        user: \"=\",\n        project: \"=\"\n      },\n      templateUrl: \"team/leave-project.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\", LeaveProjectDirective]);\n\n  membersFilter = function() {\n    return function(members, filtersQ, filtersRole) {\n      return _.filter(members, function(m) {\n        return (!filtersRole || m.role === filtersRole.id) && (!filtersQ || m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0);\n      });\n    };\n  };\n\n  module.filter('membersFilter', membersFilter);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiDetailController, WikiSummaryDirective, WikiWysiwyg, bindOnce, debounce, groupBy, mixOf, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiDetailController = (function(superClass) {\n    extend(WikiDetailController, superClass);\n\n    WikiDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$filter\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function WikiDetailController(scope, rootscope, repo, model, confirm, rs, params, q, location, filter, log, appMetaService, navUrls, analytics, translate, errorHandlingService, projectService, attachmentsFullService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.filter = filter;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService1;\n      this.moveLink = bind(this.moveLink, this);\n      this.loadWiki = bind(this.loadWiki, this);\n      this.scope.$on(\"wiki:links:move\", this.moveLink);\n      this.scope.$on(\"wikipage:add\", this.loadWiki);\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, title;\n      title = this.translate.instant(\"WIKI.PAGE_TITLE\", {\n        wikiPageName: this.scope.wikiSlug,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\n        wikiPageContent: angular.element(((ref = this.scope.wiki) != null ? ref.html : void 0) || \"\").text(),\n        totalEditions: ((ref1 = this.scope.wiki) != null ? ref1.editions : void 0) || 0,\n        lastModifiedDate: moment((ref2 = this.scope.wiki) != null ? ref2.modified_date : void 0).format(this.translate.instant(\"WIKI.DATETIME\"))\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    WikiDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('wikipage', this.scope.wikiId, this.scope.projectId);\n    };\n\n    WikiDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiDetailController.prototype.loadWiki = function() {\n      var promise;\n      promise = this.rs.wiki.getBySlug(this.scope.projectId, this.params.slug);\n      promise.then((function(_this) {\n        return function(wiki) {\n          _this.scope.wiki = wiki;\n          _this.scope.wikiId = wiki.id;\n          _this.loadAttachments();\n          return _this.scope.wiki;\n        };\n      })(this));\n      return promise.then(null, (function(_this) {\n        return function(xhr) {\n          var data;\n          _this.scope.wikiId = null;\n          _this.scope.attachmentsReady = true;\n          if (_this.scope.project.my_permissions.indexOf(\"add_wiki_page\") === -1) {\n            return null;\n          }\n          data = {\n            project: _this.scope.projectId,\n            slug: _this.scope.wikiSlug,\n            content: \"\"\n          };\n          _this.scope.wiki = _this.model.make_model(\"wiki\", data);\n          return _this.scope.wiki;\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWiki()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiDetailController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    WikiDetailController.prototype[\"delete\"] = function() {\n      var message, title;\n      title = this.translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\");\n      message = this.scope.wikiSlug;\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            var ctx;\n            askResponse.finish();\n            ctx = {\n              project: _this.scope.projectSlug\n            };\n            _this.location.path(_this.navUrls.resolve(\"project-wiki\", ctx));\n            _this.confirm.notify(\"success\");\n            return _this.loadWiki();\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          };\n          return _this.repo.remove(_this.scope.wiki).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.moveLink = function(ctx, item, itemIndex) {\n      var r, values;\n      values = this.scope.wikiLinks;\n      r = values.indexOf(item);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, item);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values);\n    };\n\n    return WikiDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiDetailController\", WikiDetailController);\n\n  WikiSummaryDirective = function($log, $template, $compile, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"wiki/wiki-summary.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var render;\n      render = function(wiki) {\n        var avatar, ctx, html, user;\n        if ($scope.usersById == null) {\n          $log.error(\"WikiSummaryDirective requires userById set in scope.\");\n        } else {\n          user = $scope.usersById[wiki.last_modifier];\n        }\n        avatar = avatarService.getAvatar(user);\n        if (user === void 0) {\n          user = {\n            name: \"unknown\",\n            avatar: avatar\n          };\n        } else {\n          user = {\n            name: user.full_name_display,\n            avatar: avatar\n          };\n        }\n        ctx = {\n          totalEditions: wiki.editions,\n          lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\")),\n          user: user\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(wikiPage) {\n        if (!wikiPage) {\n          return;\n        }\n        return render(wikiPage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgAvatarService\", WikiSummaryDirective]);\n\n  WikiWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $qqueue, $repo, $analytics, activityService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $scope.editableDescription = false;\n      $scope.saveDescription = $qqueue.bindAdd(function(description, cb) {\n        var onError, onSuccess, promise;\n        onSuccess = function(wikiPage) {\n          if ($scope.item.id == null) {\n            $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1);\n            $scope.$emit(\"wikipage:add\");\n            $scope.editableDescription = $scope.project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n          }\n          activityService.fetchEntries(true);\n          return $confirm.notify(\"success\");\n        };\n        onError = function() {\n          return $confirm.notify(\"error\");\n        };\n        $scope.item.content = description;\n        if ($scope.item.id != null) {\n          promise = $repo.save($scope.item).then(onSuccess, onError);\n        } else {\n          promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError);\n        }\n        return promise[\"finally\"](cb);\n      });\n      $scope.uploadFiles = function(file, cb) {\n        attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\";\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        if ($scope.item.id != null) {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n        } else {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"add_wiki_page\") !== -1;\n        }\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription\\\"\\n        html-read-mode=\\\"true\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        project=\\\"project\\\"\\n        storage-key='storageKey'\\n        content='item.content'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.content.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.content\\\"></div>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && !item.content.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  module.directive(\"tgWikiWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\", WikiWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiNavDirective, bindOnce, groupBy, mixOf, module, taiga;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiNavDirective = function($tgrepo, $log, $location, $confirm, $analytics, $loading, $template, $compile, $translate) {\n    var link, linkWikiLinks, template;\n    template = $template.get(\"wiki/wiki-nav.html\", true);\n    linkWikiLinks = function($scope, $el, $attrs) {\n      var $ctrl, addWikiLinkPermission, drake, render;\n      $ctrl = $el.controller();\n      if ($attrs.ngModel == null) {\n        return $log.error(\"WikiNavDirective: no ng-model attr is defined\");\n      }\n      addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n      drake = null;\n      render = function(wikiLinks) {\n        var deleteWikiLinkPermission, html, itemEl, scroll, tdom;\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n        deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1;\n        html = template({\n          wikiLinks: wikiLinks,\n          projectSlug: $scope.projectSlug,\n          addWikiLinkPermission: addWikiLinkPermission,\n          deleteWikiLinkPermission: deleteWikiLinkPermission\n        });\n        html = $compile(html)($scope);\n        $el.off();\n        if (addWikiLinkPermission && drake) {\n          drake.destroy();\n        }\n        $el.html(html);\n        if (addWikiLinkPermission) {\n          itemEl = null;\n          tdom = $el.find(\".sortable\");\n          drake = dragula([tdom[0]], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: tdom[0],\n            moves: function(item) {\n              return $(item).is('li');\n            }\n          });\n          drake.on('dragend', function(item) {\n            var itemIndex;\n            itemEl = $(item);\n            item = itemEl.scope().link;\n            itemIndex = itemEl.index();\n            return $scope.$emit(\"wiki:links:move\", item, itemIndex);\n          });\n          scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        }\n        $el.on(\"click\", \".add-button\", function(event) {\n          event.preventDefault();\n          $el.find(\".new\").removeClass(\"hidden\");\n          $el.find(\".new input\").focus();\n          return $el.find(\".add-button\").hide();\n        });\n        $el.on(\"click\", \".js-delete-link\", function(event) {\n          var linkId, message, target, title;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          linkId = target.parents('.wiki-link').data('id');\n          title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\");\n          message = $scope.wikiLinks[linkId].title;\n          return $confirm.askOnDelete(title, message).then((function(_this) {\n            return function(askResponse) {\n              var promise;\n              promise = $tgrepo.remove($scope.wikiLinks[linkId]);\n              promise.then(function() {\n                promise = $ctrl.loadWikiLinks();\n                promise.then(function() {\n                  askResponse.finish();\n                  return render($scope.wikiLinks);\n                });\n                return promise.then(null, function() {\n                  return askResponse.finish();\n                });\n              });\n              return promise.then(null, function() {\n                askResponse.finish(false);\n                return $confirm.notify(\"error\");\n              });\n            };\n          })(this));\n        });\n        return $el.on(\"keyup\", \".new input\", function(event) {\n          var currentLoading, newLink, promise, target;\n          event.preventDefault();\n          if (event.keyCode === 13) {\n            target = angular.element(event.currentTarget);\n            newLink = target.val();\n            currentLoading = $loading().target($el.find(\".new\")).start();\n            promise = $tgrepo.create(\"wiki-links\", {\n              project: $scope.projectId,\n              title: newLink\n            });\n            promise.then(function() {\n              var loadPromise;\n              $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1);\n              loadPromise = $ctrl.loadWikiLinks();\n              loadPromise.then(function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return render($scope.wikiLinks);\n              });\n              return loadPromise.then(null, function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return $confirm.notify(\"error\", \"Error loading wiki links\");\n              });\n            });\n            return promise.then(null, function(error) {\n              var ref;\n              currentLoading.finish();\n              $el.find(\".new input\").val(newLink);\n              $el.find(\".new input\").focus().select();\n              if ((error != null ? (ref = error.__all__) != null ? ref[0] : void 0 : void 0) != null) {\n                return $confirm.notify(\"error\", \"The link already exists\");\n              } else {\n                return $confirm.notify(\"error\");\n              }\n            });\n          } else if (event.keyCode === 27) {\n            target = angular.element(event.currentTarget);\n            $el.find(\".new\").addClass(\"hidden\");\n            $el.find(\".new input\").val('');\n            return $el.find(\".add-button\").show();\n          }\n        });\n      };\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    link = function($scope, $el, $attrs) {\n      linkWikiLinks($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\", \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiPagesListController, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiPagesListController = (function(superClass) {\n    extend(WikiPagesListController, superClass);\n\n    WikiPagesListController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgNavUrls\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WikiPagesListController(scope, rootscope, repo, model, confirm, rs, params, q, navUrls, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.navUrls = navUrls;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiPagesListController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiPagesListController.prototype.loadWikiPages = function() {\n      var promise;\n      return promise = this.rs.wiki.list(this.scope.projectId).then((function(_this) {\n        return function(wikipages) {\n          return _this.scope.wikipages = wikipages;\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWikiPages()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiPagesListController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    return WikiPagesListController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiPagesListController\", WikiPagesListController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ChangeOwnerLightboxController, ChangeOwnerLightboxDirective, LbRequestOwnershipDirective, LightboxAddMembersWarningMessageDirective, TransferProjectStartSuccessDirective, debounce, module, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaKanban\");\n\n  LightboxAddMembersWarningMessageDirective = function() {\n    return {\n      templateUrl: \"admin/memberships-warning-message.html\",\n      scope: {\n        project: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective]);\n\n  LbRequestOwnershipDirective = function(lightboxService, rs, confirmService, $translate) {\n    return {\n      link: function(scope, el) {\n        lightboxService.open(el);\n        return scope.request = function() {\n          scope.loading = true;\n          return rs.projects.transferRequest(scope.projectId).then(function() {\n            scope.loading = false;\n            lightboxService.close(el);\n            return confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"));\n          });\n        };\n      },\n      templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgLbRequestOwnership', [\"lightboxService\", \"tgResources\", \"$tgConfirm\", \"$translate\", LbRequestOwnershipDirective]);\n\n  ChangeOwnerLightboxController = (function() {\n    function ChangeOwnerLightboxController(rs1, lightboxService1, confirm, translate) {\n      this.rs = rs1;\n      this.lightboxService = lightboxService1;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.users = [];\n      this.q = \"\";\n      this.commentOpen = false;\n    }\n\n    ChangeOwnerLightboxController.prototype.limit = 3;\n\n    ChangeOwnerLightboxController.prototype.filterUsers = function(user) {\n      var text, username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = this.q.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    ChangeOwnerLightboxController.prototype.getUsers = function() {\n      var users;\n      if (!this.users.length && !this.q.length) {\n        users = this.activeUsers;\n      } else {\n        users = this.users;\n      }\n      users = _.reject(users, {\n        \"id\": this.currentOwnerId\n      });\n      users = _.reject(users, {\n        \"selected\": true\n      });\n      this.totalUsers = _.size(users);\n      return users.slice(0, this.limit);\n    };\n\n    ChangeOwnerLightboxController.prototype.userSearch = function() {\n      this.users = this.activeUsers;\n      this.selected = _.find(this.users, {\n        \"selected\": true\n      });\n      if (this.q) {\n        return this.users = _.filter(this.users, this.filterUsers.bind(this));\n      }\n    };\n\n    ChangeOwnerLightboxController.prototype.selectUser = function(user) {\n      this.activeUsers = _.map(this.activeUsers, function(user) {\n        user.selected = false;\n        return user;\n      });\n      user.selected = true;\n      return this.userSearch();\n    };\n\n    ChangeOwnerLightboxController.prototype.submit = function() {\n      this.loading = true;\n      return this.rs.projects.transferStart(this.projectId, this.selected.id, this.comment).then((function(_this) {\n        return function() {\n          var desc, title;\n          _this.loading = false;\n          _this.lightboxService.closeAll();\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\");\n          desc = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\");\n          return _this.confirm.success(title, desc, {\n            type: \"svg\",\n            name: \"icon-speak-up\"\n          });\n        };\n      })(this));\n    };\n\n    return ChangeOwnerLightboxController;\n\n  })();\n\n  ChangeOwnerLightboxController.$inject = [\"tgResources\", \"lightboxService\", \"$tgConfirm\", \"$translate\"];\n\n  module.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController);\n\n  ChangeOwnerLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $template, $compile) {\n    var link;\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: true,\n      controller: \"ChangeOwnerLightbox\",\n      controllerAs: \"vm\",\n      bindToController: {\n        currentOwnerId: \"=\",\n        projectId: \"=\",\n        activeUsers: \"=\"\n      },\n      templateUrl: \"common/lightbox/lightbox-change-owner.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective]);\n\n  TransferProjectStartSuccessDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el) {\n      scope.close = function() {\n        return lightboxService.close(el);\n      };\n      return lightboxService.open(el);\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MembershipsController, MembershipsDirective, MembershipsRowActionsDirective, MembershipsRowAdminCheckboxDirective, MembershipsRowAvatarDirective, MembershipsRowRoleSelectorDirective, NoMoreMembershipsExplanationDirective, bindMethods, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  MembershipsController = (function(superClass) {\n    extend(MembershipsController, superClass);\n\n    MembershipsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAnalytics\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgLightboxFactory\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function MembershipsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, analytics, appMetaService, translate, auth, lightboxFactory1, errorHandlingService, projectService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.auth = auth;\n      this.lightboxFactory = lightboxFactory1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      bindMethods(this);\n      this.scope.project = {};\n      this.scope.filters = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"membersform:new:success\", (function(_this) {\n        return function() {\n          _this.loadInitialData();\n          return _this.analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1);\n        };\n      })(this));\n    }\n\n    MembershipsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.canAddUsers = project.max_memberships === null || project.max_memberships > project.total_memberships;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    MembershipsController.prototype.loadMembers = function() {\n      var httpFilters;\n      httpFilters = this.getUrlFilters();\n      return this.rs.memberships.list(this.scope.projectId, httpFilters).then((function(_this) {\n        return function(data) {\n          _this.scope.memberships = _.filter(data.models, function(membership) {\n            return membership.user === null || membership.is_user_active;\n          });\n          _.map(_this.scope.memberships, function(member) {\n            if (member.is_owner) {\n              return _this.scope.projectOwnerEmail = member.user_email;\n            }\n          });\n          _this.scope.page = data.current;\n          _this.scope.count = data.count;\n          _this.scope.paginatedBy = data.paginatedBy;\n          return data;\n        };\n      })(this));\n    };\n\n    MembershipsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.q.all([this.loadMembers(), this.auth.refresh()]);\n    };\n\n    MembershipsController.prototype.getUrlFilters = function() {\n      var filters;\n      filters = _.pick(this.location.search(), \"page\");\n      if (!filters.page) {\n        filters.page = 1;\n      }\n      return filters;\n    };\n\n    MembershipsController.prototype.addNewMembers = function() {\n      return this.lightboxFactory.create('tg-lb-add-members', {\n        \"class\": \"lightbox lightbox-add-member\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.scope.project\n      });\n    };\n\n    MembershipsController.prototype.showLimitUsersWarningMessage = function() {\n      var icon, message, title;\n      title = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\");\n      message = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\n        members: this.scope.project.max_memberships\n      });\n      icon = \"/\" + window._version + \"/svg/icons/team-question.svg\";\n      return this.confirm.success(title, message, {\n        name: icon,\n        type: \"img\"\n      });\n    };\n\n    return MembershipsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"MembershipsController\", MembershipsController);\n\n  MembershipsDirective = function($template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"admin/admin-membership-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".memberships-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        $pagEl.html(html);\n        return $pagEl.show();\n      };\n      $scope.$watch(\"memberships\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".memberships-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      $el.on(\"click\", \".memberships-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      return $el.on(\"click\", \".memberships-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadMembers();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective]);\n\n  MembershipsRowAvatarDirective = function($log, $template, $translate, $compile, avatarService) {\n    var link, template;\n    template = $template.get(\"admin/memberships-row-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      var member, pending, render;\n      pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\");\n      render = function(member) {\n        var avatar, ctx, html;\n        avatar = avatarService.getAvatar(member);\n        ctx = {\n          full_name: member.full_name ? member.full_name : \"\",\n          email: member.user_email ? member.user_email : member.email,\n          imgurl: avatar.url,\n          bg: avatar.bg,\n          pending: !member.is_user_active ? pending : \"\",\n          isOwner: member.is_owner\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowAvatar == null) {\n        return $log.error(\"MembershipsRowAvatarDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAvatar);\n      render(member);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective]);\n\n  MembershipsRowAdminCheckboxDirective = function($log, $repo, $confirm, $template, $compile) {\n    var link, template;\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true);\n    link = function($scope, $el, $attrs) {\n      var html, member, render;\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      if ($attrs.tgMembershipsRowAdminCheckbox == null) {\n        return $log.error(\"MembershipsRowAdminCheckboxDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox);\n      if (member.is_owner) {\n        $el.find(\".js-check\").remove();\n        return;\n      }\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          inputId: \"is-admin-\" + member.id\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $el.on(\"click\", \":checkbox\", (function(_this) {\n        return function(event) {\n          var onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function(data) {\n            member.revert();\n            $el.find(\":checkbox\").prop(\"checked\", member.is_admin);\n            return $confirm.notify(\"error\", data.is_admin[0]);\n          };\n          target = angular.element(event.currentTarget);\n          member.is_admin = target.prop(\"checked\");\n          return $repo.save(member).then(onSuccess, onError);\n        };\n      })(this));\n      html = render(member);\n      if (member.is_admin) {\n        return $el.find(\":checkbox\").prop(\"checked\", true);\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective]);\n\n  MembershipsRowRoleSelectorDirective = function($log, $repo, $confirm) {\n    var link, template;\n    template = _.template(\"<select>\\n    <% _.each(roleList, function(role) { %>\\n    <option value=\\\"<%- role.id %>\\\" <% if(selectedRole === role.id){ %>selected=\\\"selected\\\"<% } %>>\\n        <%- role.name %>\\n    </option>\\n    <% }); %>\\n</select>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, html, member, render;\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          roleList: $scope.project.roles,\n          selectedRole: member.role\n        };\n        html = template(ctx);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowRoleSelector == null) {\n        return $log.error(\"MembershipsRowRoleSelectorDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowRoleSelector);\n      html = render(member);\n      $el.on(\"change\", \"select\", (function(_this) {\n        return function(event) {\n          var newRole, onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          target = angular.element(event.currentTarget);\n          newRole = parseInt(target.val(), 10);\n          if (member.role !== newRole) {\n            member.role = newRole;\n            return $repo.save(member).then(onSuccess, onError);\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", MembershipsRowRoleSelectorDirective]);\n\n  MembershipsRowActionsDirective = function($log, $repo, $rs, $confirm, $compile, $translate, $location, $navUrls, lightboxFactory, projectService) {\n    var activedTemplate, link, pendingTemplate;\n    activedTemplate = \"<div class=\\\"active\\\"\\n     translate=\\\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\\\">\\n</div>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    pendingTemplate = \"<a class=\\\"resend js-resend\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\\\"\\n   translate=\\\"ADMIN.MEMBERSHIP.RESEND\\\">\\n</a>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    link = function($scope, $el, $attrs) {\n      var $ctrl, leaveConfirm, member, render;\n      render = function(member) {\n        var html;\n        if (member.user) {\n          html = $compile(activedTemplate)($scope);\n        } else {\n          html = $compile(pendingTemplate)($scope);\n        }\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowActions == null) {\n        return $log.error(\"MembershipsRowActionsDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowActions);\n      render(member);\n      $el.on(\"click\", \".js-resend\", function(event) {\n        var onError, onSuccess;\n        event.preventDefault();\n        onSuccess = function() {\n          var text;\n          text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\n            email: $scope.member.email\n          });\n          return $confirm.notify(\"success\", text);\n        };\n        onError = function() {\n          var text;\n          text = $translate.instant(\"ADMIM.MEMBERSHIP.ERROR_SEND_INVITATION\");\n          return $confirm.notify(\"error\", text);\n        };\n        return $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError);\n      });\n      leaveConfirm = function() {\n        var defaultMsg, message, title;\n        title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\");\n        defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {\n          email: member.email\n        });\n        message = member.user ? member.full_name : defaultMsg;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish();\n              if (member.user !== $scope.user.id) {\n                if ($scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy) {\n                  $ctrl.selectFilter(\"page\", $scope.page - 1);\n                }\n                projectService.fetchProject().then(function() {\n                  return $ctrl.loadInitialData();\n                });\n              } else {\n                $location.path($navUrls.resolve(\"home\"));\n              }\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"success\", text, null, 5000);\n            };\n          })(this);\n          onError = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish(false);\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"error\", text);\n            };\n          })(this);\n          return $repo.remove(member).then(onSuccess, onError);\n        });\n      };\n      $el.on(\"click\", \".delete\", function(event) {\n        var isCurrentUser;\n        event.preventDefault();\n        if ($scope.project.owner.id === member.user) {\n          isCurrentUser = $scope.user.id === member.user;\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: isCurrentUser,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\", \"tgProjectService\", MembershipsRowActionsDirective]);\n\n  NoMoreMembershipsExplanationDirective = function() {\n    return {\n      templateUrl: \"admin/no-more-memberships-explanation.html\",\n      scope: {\n        project: \"=\",\n        ownerEmail: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminNavigationDirective, module;\n\n  AdminNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgAdminNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#adminmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaAdmin\");\n\n  module.directive(\"tgAdminNavigation\", AdminNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminProjectChangeOwnerDirective, AdminProjectRequestOwnershipDirective, AdminProjectRestrictionsDirective, CsvEpicDirective, CsvExporterController, CsvExporterEpicsController, CsvExporterIssuesController, CsvExporterTasksController, CsvExporterUserstoriesController, CsvIssueDirective, CsvTaskDirective, CsvUsDirective, ProjectDefaultValuesDirective, ProjectExportDirective, ProjectLogoDirective, ProjectLogoModelDirective, ProjectModulesDirective, ProjectProfileController, ProjectProfileDirective, bindOnce, debounce, groupBy, joinStr, mixOf, module, scopeDefer, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectProfileController = (function(superClass) {\n    extend(ProjectProfileController, superClass);\n\n    ProjectProfileController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgCurrentUserService\", \"tgErrorHandlingService\", \"tgProjectService\", \"$tgModel\"];\n\n    function ProjectProfileController(scope1, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, tgAuth, currentUserService1, errorHandlingService, projectService1, model1) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.tgAuth = tgAuth;\n      this.currentUserService = currentUserService1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.model = model1;\n      this.scope.project = {};\n      this.scope.projectTags = [];\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          _this.appMetaService.setAll(title, description);\n          return _this.fillUsersAndRoles(_this.scope.project.members, _this.scope.project.roles);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:loaded\", (function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n    }\n\n    ProjectProfileController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\");\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n      this.scope.issueTypesList = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.prioritiesList = _.sortBy(project.priorities, \"order\");\n      this.scope.severitiesList = _.sortBy(project.severities, \"order\");\n      scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$emit('project:loaded', project);\n        };\n      })(this));\n      this.scope.projectTags = _.map(this.scope.project.tags, (function(_this) {\n        return function(it) {\n          return [it, _this.scope.project.tags_colors[it]];\n        };\n      })(this));\n      return project;\n    };\n\n    ProjectProfileController.prototype.loadInitialData = function() {\n      this.loadProject();\n      this.scope.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects().valid;\n      return this.tgAuth.refresh();\n    };\n\n    ProjectProfileController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.project);\n    };\n\n    ProjectProfileController.prototype.addTag = function(name, color) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      tags.push(name);\n      this.scope.projectTags.push([name, null]);\n      return this.scope.project.tags = tags;\n    };\n\n    ProjectProfileController.prototype.deleteTag = function(tag) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      _.pull(tags, tag[0]);\n      _.remove(this.scope.projectTags, (function(_this) {\n        return function(it) {\n          return it[0] === tag[0];\n        };\n      })(this));\n      return this.scope.project.tags = tags;\n    };\n\n    return ProjectProfileController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectProfileController\", ProjectProfileController);\n\n  ProjectProfileDirective = function($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, form, submit, submitButton;\n      $ctrl = $el.controller();\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, privacyChanged, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          privacyChanged = $scope.project.isAttributeModified(\"is_private\");\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            var newUrl;\n            currentLoading.finish();\n            if (privacyChanged && $scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-public-to-private\", \"Change project privacy from public to private\", 1);\n            } else if (privacyChanged && !$scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-private-to-public\", \"Change project privacy from private to public\", 1);\n            }\n            $confirm.notify(\"success\");\n            newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\n              project: $scope.project.slug\n            });\n            $location.path(newUrl);\n            projectService.fetchProject().then((function(_this) {\n              return function() {\n                return $ctrl.loadInitialData();\n              };\n            })(this));\n            return currentUserService.loadProjects();\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\", \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\", ProjectProfileDirective]);\n\n  ProjectDefaultValuesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $rootScope.$broadcast(\"admin:project-default-values:updated\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectDefaultValuesDirective]);\n\n  ProjectModulesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = (function(_this) {\n        return function() {\n          var form, promise;\n          form = $el.find(\"form\").checksley();\n          form.initializeFields();\n          form.reset();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            $scope.$emit(\"project:loaded\", $scope.project);\n            $rootScope.$broadcast(\"admin:project-modules:updated\");\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this);\n      $el.on(\"change\", \".module-activation.module-direct-active input\", function(event) {\n        event.preventDefault();\n        return $scope.$applyAsync(submit);\n      });\n      $el.on(\"submit\", \"form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"keydown\", \".videoconference-attributes input\", function(e) {\n        return e.which !== 32;\n      });\n      $scope.$watch(\"project.videoconferences\", function(newVal, oldVal) {\n        if ((newVal != null) && (oldVal != null) && newVal !== oldVal) {\n          return $scope.project.videoconferences_extra_data = \"\";\n        }\n      });\n      $scope.$watch(\"isVideoconferenceActivated\", function(newValue, oldValue) {\n        if (newValue === false) {\n          $scope.project.videoconferences = null;\n          $scope.project.videoconferences_extra_data = \"\";\n          if (oldValue === true) {\n            return submit();\n          }\n        }\n      });\n      return $scope.$watch(\"project\", function(project) {\n        if (project.videoconferences != null) {\n          return $scope.isVideoconferenceActivated = true;\n        } else {\n          return $scope.isVideoconferenceActivated = false;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectModulesDirective]);\n\n  ProjectExportDirective = function($window, $rs, $confirm, $translate, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var asyn_message, buttonsEl, dump_ready_text, hideButtons, hideResult, hideSpinner, loading_msg, loading_title, resultEl, resultMessageEl, resultTitleEl, setAsyncMessage, setAsyncTitle, setLoadingMessage, setLoadingTitle, setSyncMessage, setSyncTitle, showButtons, showErrorMode, showExportResultAsyncMode, showExportResultSyncMode, showLoadingMode, showResult, showSpinner, spinnerEl, syn_message;\n      buttonsEl = $el.find(\".admin-project-export-buttons\");\n      showButtons = function() {\n        return buttonsEl.removeClass(\"hidden\");\n      };\n      hideButtons = function() {\n        return buttonsEl.addClass(\"hidden\");\n      };\n      resultEl = $el.find(\".admin-project-export-result\");\n      showResult = function() {\n        return resultEl.removeClass(\"hidden\");\n      };\n      hideResult = function() {\n        return resultEl.addClass(\"hidden\");\n      };\n      spinnerEl = $el.find(\".spin\");\n      showSpinner = function() {\n        return spinnerEl.removeClass(\"hidden\");\n      };\n      hideSpinner = function() {\n        return spinnerEl.addClass(\"hidden\");\n      };\n      resultTitleEl = $el.find(\".result-title\");\n      loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\");\n      loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\");\n      dump_ready_text = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"));\n      };\n      asyn_message = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"));\n      };\n      syn_message = function(url) {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\n          url: url\n        }));\n      };\n      setLoadingTitle = function() {\n        return resultTitleEl.html(loading_title);\n      };\n      setAsyncTitle = function() {\n        return resultTitleEl.html(loading_msg);\n      };\n      setSyncTitle = function() {\n        return resultTitleEl.html(dump_ready_text);\n      };\n      resultMessageEl = $el.find(\".result-message \");\n      setLoadingMessage = function() {\n        return resultMessageEl.html(loading_msg);\n      };\n      setAsyncMessage = function() {\n        return resultMessageEl.html(asyn_message);\n      };\n      setSyncMessage = function(url) {\n        return resultMessageEl.html(syn_message(url));\n      };\n      showLoadingMode = function() {\n        showSpinner();\n        setLoadingTitle();\n        setLoadingMessage();\n        hideButtons();\n        return showResult();\n      };\n      showExportResultAsyncMode = function() {\n        hideSpinner();\n        setAsyncTitle();\n        return setAsyncMessage();\n      };\n      showExportResultSyncMode = function(url) {\n        hideSpinner();\n        setSyncTitle();\n        return setSyncMessage(url);\n      };\n      showErrorMode = function() {\n        hideSpinner();\n        hideResult();\n        return showButtons();\n      };\n      return $el.on(\"click\", \".button-export\", debounce(2000, (function(_this) {\n        return function(event) {\n          var onError, onSuccess;\n          event.preventDefault();\n          onSuccess = function(result) {\n            var dumpUrl;\n            $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1);\n            if (result.status === 202) {\n              return showExportResultAsyncMode();\n            } else {\n              dumpUrl = result.data.url;\n              showExportResultSyncMode(dumpUrl);\n              return $window.open(dumpUrl, \"_blank\");\n            }\n          };\n          onError = function(result) {\n            var errorMsg, ref;\n            showErrorMode();\n            errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\n                message: result.data._error_message\n              });\n            }\n            return $confirm.notify(\"error\", errorMsg);\n          };\n          showLoadingMode();\n          return $rs.projects[\"export\"]($scope.projectId).then(onSuccess, onError);\n        };\n      })(this)));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\", \"$tgAnalytics\", ProjectExportDirective]);\n\n  CsvExporterController = (function(superClass) {\n    extend(CsvExporterController, superClass);\n\n    CsvExporterController.$inject = [\"$scope\", \"$rootScope\", \"$tgUrls\", \"$tgConfirm\", \"$tgResources\", \"$translate\"];\n\n    function CsvExporterController(scope1, rootscope, urls, confirm, rs, translate) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.urls = urls;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.translate = translate;\n      this._deleteUuid = bind(this._deleteUuid, this);\n      this._generateUuid = bind(this._generateUuid, this);\n      this.setCsvUuid = bind(this.setCsvUuid, this);\n      this.rootscope.$on(\"project:loaded\", this.setCsvUuid);\n      this.scope.$watch(\"csvUuid\", (function(_this) {\n        return function(value) {\n          if (value) {\n            return _this.scope.csvUrl = _this.urls.resolveAbsolute(_this.type + \"-csv\", value);\n          } else {\n            return _this.scope.csvUrl = \"\";\n          }\n        };\n      })(this));\n    }\n\n    CsvExporterController.prototype.setCsvUuid = function() {\n      return this.scope.csvUuid = this.scope.project[this.type + \"_csv_uuid\"];\n    };\n\n    CsvExporterController.prototype._generateUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"regenerate_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype._deleteUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"delete_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype.regenerateUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._generateUuid);\n      } else {\n        return this._generateUuid();\n      }\n    };\n\n    CsvExporterController.prototype.deleteUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._deleteUuid);\n      } else {\n        return this._deleteUuid();\n      }\n    };\n\n    return CsvExporterController;\n\n  })(taiga.Controller);\n\n  CsvExporterEpicsController = (function(superClass) {\n    extend(CsvExporterEpicsController, superClass);\n\n    function CsvExporterEpicsController() {\n      return CsvExporterEpicsController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterEpicsController.prototype.type = \"epics\";\n\n    return CsvExporterEpicsController;\n\n  })(CsvExporterController);\n\n  CsvExporterUserstoriesController = (function(superClass) {\n    extend(CsvExporterUserstoriesController, superClass);\n\n    function CsvExporterUserstoriesController() {\n      return CsvExporterUserstoriesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterUserstoriesController.prototype.type = \"userstories\";\n\n    return CsvExporterUserstoriesController;\n\n  })(CsvExporterController);\n\n  CsvExporterTasksController = (function(superClass) {\n    extend(CsvExporterTasksController, superClass);\n\n    function CsvExporterTasksController() {\n      return CsvExporterTasksController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterTasksController.prototype.type = \"tasks\";\n\n    return CsvExporterTasksController;\n\n  })(CsvExporterController);\n\n  CsvExporterIssuesController = (function(superClass) {\n    extend(CsvExporterIssuesController, superClass);\n\n    function CsvExporterIssuesController() {\n      return CsvExporterIssuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterIssuesController.prototype.type = \"issues\";\n\n    return CsvExporterIssuesController;\n\n  })(CsvExporterController);\n\n  module.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController);\n\n  module.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController);\n\n  module.controller(\"CsvExporterTasksController\", CsvExporterTasksController);\n\n  module.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController);\n\n  CsvEpicDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\";\n    };\n    return {\n      controller: \"CsvExporterEpicsController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective]);\n\n  CsvUsDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\";\n    };\n    return {\n      controller: \"CsvExporterUserstoriesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective]);\n\n  CsvTaskDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\";\n    };\n    return {\n      controller: \"CsvExporterTasksController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective]);\n\n  CsvIssueDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\";\n    };\n    return {\n      controller: \"CsvExporterIssuesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective]);\n\n  ProjectLogoDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").addClass(\"active\");\n      };\n      onSuccess = function(response) {\n        var project;\n        project = $model.make_model(\"projects\", response.data);\n        $scope.project = project;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-logo\", function() {\n        return $el.find(\"#logo-field\").click();\n      });\n      $el.on(\"change\", \"#logo-field\", function(event) {\n        if ($scope.logoAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-default-logo\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective]);\n\n  ProjectLogoModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgProjectLogoModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective]);\n\n  AdminProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        \"project\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective]);\n\n  AdminProjectRequestOwnershipDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.requestOwnership = function() {\n          if (scope.canRequest) {\n            return lightboxFactory.create(\"tg-lb-request-ownership\", {\n              \"class\": \"lightbox lightbox-request-ownership\"\n            }, {\n              projectId: scope.projectId\n            });\n          }\n        };\n      },\n      scope: {\n        \"canRequest\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective]);\n\n  AdminProjectChangeOwnerDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.changeOwner = function() {\n          return lightboxFactory.create(\"tg-lb-change-owner\", {\n            \"class\": \"lightbox lightbox-select-user\",\n            \"project-id\": \"projectId\",\n            \"active-users\": \"activeUsers\",\n            \"current-owner-id\": \"currentOwnerId\"\n          }, {\n            projectId: scope.projectId,\n            activeUsers: scope.activeUsers,\n            currentOwnerId: scope.owner.id,\n            members: scope.members\n          });\n        };\n      },\n      scope: {\n        \"activeUsers\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\",\n        \"members\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-change-owner.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, ProjectCustomAttributesController, ProjectCustomAttributesDirective, ProjectDueDatesValues, ProjectDueDatesValuesController, ProjectSwimlanesSingle, ProjectSwimlanesValue, ProjectSwimlanesValuesController, ProjectSwimlanesWipDirective, ProjectTagsController, ProjectTagsDirective, ProjectValuesController, ProjectValuesDirective, ProjectValuesSectionController, RICHTEXT_TYPE, SortableSwimlanes, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindOnce, debounce, defaultColor, getDefaulColorList, groupBy, joinStr, mixOf, module, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  getDefaulColorList = this.taiga.getDefaulColorList;\n\n  defaultColor = '#A9AABC';\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectValuesSectionController = (function(superClass) {\n    extend(ProjectValuesSectionController, superClass);\n\n    ProjectValuesSectionController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function ProjectValuesSectionController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, errorHandlingService, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.project = {};\n      this.scope.$on(\"project:load\", (function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            return _this.loadProject();\n          });\n        };\n      })(this));\n      this.loadInitialData();\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n    }\n\n    ProjectValuesSectionController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    ProjectValuesSectionController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return promise;\n    };\n\n    return ProjectValuesSectionController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController);\n\n  ProjectValuesController = (function(superClass) {\n    extend(ProjectValuesController, superClass);\n\n    ProjectValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    function ProjectValuesController(scope, rootscope, repo, confirm, rs) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.moveValue = bind(this.moveValue, this);\n      this.loadValues = bind(this.loadValues, this);\n      this.scope.$on(\"admin:project-values:move\", this.moveValue);\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadValues();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.values = values;\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectValuesController.prototype.moveValue = function(ctx, itemValue, itemIndex) {\n      var r, values;\n      values = this.scope.values;\n      r = values.indexOf(itemValue);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, itemValue);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"admin:project-values:updated\");\n        };\n      })(this));\n    };\n\n    return ProjectValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectValuesController\", ProjectValuesController);\n\n  ProjectSwimlanesValuesController = (function(superClass) {\n    extend(ProjectSwimlanesValuesController, superClass);\n\n    ProjectSwimlanesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgProjectService\"];\n\n    function ProjectSwimlanesValuesController(scope, rootscope, repo, translate, confirm, rs, projectService1) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.projectService = projectService1;\n      this.removeSwimlane = bind(this.removeSwimlane, this);\n      this.loadSwimlanes = bind(this.loadSwimlanes, this);\n      this.filterArchivedSwimlaneStatus = bind(this.filterArchivedSwimlaneStatus, this);\n      this.filterArchivedProjectStatuses = bind(this.filterArchivedProjectStatuses, this);\n      this.updatedSwimlanePosition = bind(this.updatedSwimlanePosition, this);\n      this.setDefaultSwimlane = bind(this.setDefaultSwimlane, this);\n      this.updateSwimlane = bind(this.updateSwimlane, this);\n      this.addSwimlane = bind(this.addSwimlane, this);\n      this.scope.$on(\"swimlane:load\", (function(_this) {\n        return function() {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadSwimlanes();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectSwimlanesValuesController.prototype.addSwimlane = function() {\n      var promise;\n      promise = this.rs[this.scope.resource].create(this.scope.projectId, this.scope.swimlane.name);\n      promise.success((function(_this) {\n        return function(values) {\n          _this.scope.swimlaneAdded();\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n      return promise.error((function(_this) {\n        return function() {\n          _this.confirm.notify('light-error', _this.translate.instant(\"ADMIN.PROJECT_KANBAN_OPTIONS.ACTION_ADD_SWIMLANE\"));\n          return _this.scope.hideSwimlaneForm();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updateSwimlane = function(swimlane, name) {\n      return this.rs[this.scope.resource].edit(swimlane.id, name).then((function(_this) {\n        return function(values) {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.setDefaultSwimlane = function(swimlane) {\n      return this.rs.projects.patch_default_swimlane(this.scope.projectId, swimlane.id).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updatedSwimlanePosition = function(swimlane, position) {\n      var newSwimlanesOrder, prevSwimlane, swimlanesOrderArrayFiltered;\n      prevSwimlane = this.scope.values.find(function(value) {\n        return value.id === swimlane.id;\n      });\n      if (prevSwimlane.order === position) {\n        return;\n      }\n      swimlanesOrderArrayFiltered = this.scope.values.filter((function(_this) {\n        return function(value, index) {\n          return value.id !== swimlane.id;\n        };\n      })(this));\n      swimlanesOrderArrayFiltered.splice(position, 0, swimlane);\n      newSwimlanesOrder = swimlanesOrderArrayFiltered.map((function(_this) {\n        return function(swimlane, index) {\n          return [swimlane.id, index];\n        };\n      })(this));\n      return this.rs[this.scope.resource].bulkUpdateOrder(this.scope.projectId, newSwimlanesOrder).then((function(_this) {\n        return function(values) {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedProjectStatuses = function() {\n      return this.scope.project.us_statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedSwimlaneStatus = function(swimlane) {\n      return swimlane.statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.loadSwimlanes = function() {\n      return this.rs[this.scope.resource].list(this.scope.projectId).then((function(_this) {\n        return function(values) {\n          return _this.scope.values = values;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.removeSwimlane = function(swimlaneId, moveTo) {\n      return this.rs[this.scope.resource][\"delete\"](swimlaneId, moveTo).then((function(_this) {\n        return function() {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    return ProjectSwimlanesValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectSwimlanesValuesController\", ProjectSwimlanesValuesController);\n\n  ProjectSwimlanesValue = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.isFormVisible = false;\n      $scope.isNewSwimlane = false;\n      $scope.swimlane = {\n        name: ''\n      };\n      $scope.swimlaneAdded = function() {\n        $scope.swimlane = {\n          name: ''\n        };\n        $scope.isNewSwimlane = true;\n        $scope.isFormVisible = false;\n        return setTimeout(function() {\n          $scope.isNewSwimlane = false;\n          return $scope.$apply();\n        }, 10000);\n      };\n      $scope.displaySwimlaneForm = function() {\n        $scope.isFormVisible = true;\n        return $timeout(function() {\n          return $el.find(\"#admin-swimlanes-form-input\").focus();\n        });\n      };\n      $scope.hideSwimlaneForm = function() {\n        $scope.isFormVisible = false;\n        return $scope.swimlane = {\n          name: ''\n        };\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesValues\", [\"$timeout\", ProjectSwimlanesValue]);\n\n  ProjectSwimlanesSingle = function($translate, $confirm, $animate) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.displaySwimlaneSingleForm = false;\n      $scope.swimlaneSingleForm = {\n        name: ''\n      };\n      $scope.updateSwimlane = function(swimlane) {\n        $scope.displaySwimlaneSingleForm = false;\n        return $ctrl.updateSwimlane(swimlane, $scope.swimlaneSingleForm.name);\n      };\n      $scope.setDefaultSwimlane = function(swimlane) {\n        return $ctrl.setDefaultSwimlane(swimlane);\n      };\n      $scope.getDefaultTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DEFAULT_SWIMLANE\");\n        } else {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SET_DEFAULT_SWIMLANE\");\n        }\n      };\n      $scope.removeSwimlaneTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DISABLE_DELETE_SWIMLANE\");\n        }\n      };\n      $scope.editSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = true;\n      };\n      $scope.cancelEditSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = false;\n      };\n      return $scope.removeSwimlaneDialog = (function(_this) {\n        return function(event, swimlane) {\n          var choices, replacement, subtitle, title;\n          title = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.TITLE_ACTION_DELETE_SWIMLANE\");\n          $animate.on(\"leave\", $el[0], function(element, phase) {\n            if (phase === \"close\") {\n              $animate.off(\"leave\", $el[0]);\n              return $ctrl.scope.$evalAsync((function(_this) {\n                return function() {\n                  return $ctrl.scope.deletingSwimlane = false;\n                };\n              })(this));\n            }\n          });\n          if ($scope.values.length > 1) {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_OPTIONS\", {\n              swimlane: swimlane.name\n            });\n            replacement = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_REPLACEMENT\");\n            choices = {};\n            _.each($scope.values, function(option) {\n              if (swimlane.id !== option.id) {\n                return choices[option.id] = option.name;\n              }\n            });\n            return $confirm.askChoice(title, subtitle, choices, replacement).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id, response.selected);\n              return response.finish();\n            });\n          } else {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_LAST\");\n            return $confirm.askDelete(title, subtitle).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id);\n              return response.finish();\n            });\n          }\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesSingle\", [\"$translate\", \"$tgConfirm\", \"$animate\", ProjectSwimlanesSingle]);\n\n  SortableSwimlanes = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      var drake, itemEl, tdom;\n      $ctrl = $el.controller();\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemValue, newIndex;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        newIndex = itemEl.index();\n        return $scope.$apply(function() {\n          return $ctrl.updatedSwimlanePosition(itemValue, newIndex);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSortableSwimlanes\", [SortableSwimlanes]);\n\n  ProjectDueDatesValuesController = (function(superClass) {\n    extend(ProjectDueDatesValuesController, superClass);\n\n    function ProjectDueDatesValuesController() {\n      this.displayValues = bind(this.displayValues, this);\n      this.createDefaultValues = bind(this.createDefaultValues, this);\n      this.loadValues = bind(this.loadValues, this);\n      return ProjectDueDatesValuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    ProjectDueDatesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    ProjectDueDatesValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          } else {\n            _this.createDefaultValues();\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.createDefaultValues = function() {\n      if (this.rs[this.scope.resource].createDefaultValues == null) {\n        return;\n      }\n      return this.rs[this.scope.resource].createDefaultValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(response) {\n          var values;\n          _this.rootscope.$broadcast(\"admin:project-values:updated\");\n          values = response.data;\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.displayValues = function(values) {\n      _.each(values, function(value, index) {\n        value.days_to_due_abs = value.days_to_due !== null ? Math.abs(value.days_to_due) : null;\n        return value.sign = value.days_to_due >= 0 ? 1 : -1;\n      });\n      return this.scope.values = values;\n    };\n\n    return ProjectDueDatesValuesController;\n\n  })(ProjectValuesController);\n\n  module.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController);\n\n  ProjectValuesDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var link, linkDragAndDrop, linkValue;\n    linkDragAndDrop = function($scope, $el, $attrs) {\n      var drake, itemEl, newParentScope, oldParentScope, scroll, tdom;\n      oldParentScope = null;\n      newParentScope = null;\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemIndex, itemValue;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        itemIndex = itemEl.index();\n        return $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    linkValue = function($scope, $el, $attrs) {\n      var $ctrl, cancel, goToBottomList, initializeNewValue, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"is_closed\": false,\n          \"is_archived\": false\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_\" + (objName.toUpperCase()) + \".ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, promise, value;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        value = formEl.scope().value;\n        if (!value.color) {\n          value.color = defaultColor;\n        }\n        promise = $repo.save(value);\n        promise.then(function() {\n          var row;\n          row = target.parents(\".row.table-main\");\n          row.addClass(\"hidden\");\n          row.siblings(\".visualization\").removeClass('hidden');\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return projectService.fetchProject();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        if (!$scope.newValue.color) {\n          $scope.newValue.color = defaultColor;\n        }\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          $scope.values.push(data);\n          $scope.maxValueOrder = data.order;\n          initializeNewValue();\n          return $rootscope.$broadcast(\"admin:project-values:updated\");\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, value;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          value.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").removeClass('hidden');\n        return goToBottomList(true);\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      return $el.on(\"click\", \".delete-value\", function(event) {\n        var choices, formEl, subtitle, target, text, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        choices = {};\n        _.each($scope.values, function(option) {\n          if (value.id !== option.id) {\n            return choices[option.id] = option.name;\n          }\n        });\n        subtitle = value.name;\n        if (_.keys(choices).length === 0) {\n          return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"));\n        }\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\");\n        text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\");\n        return $confirm.askChoice(title, subtitle, choices, text).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value, {\n            \"moveTo\": response.selected\n          }).then(onSucces, onError);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      linkDragAndDrop($scope, $el, $attrs);\n      linkValue($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective]);\n\n  ProjectDueDatesValues = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var linkDueDateStatusValue, parentDirective;\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService);\n    linkDueDateStatusValue = function($scope, $el, $attrs, $ctrl) {\n      var _setDaysToDue, _valueFromEventTarget, initializeNewValue, saveNewValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"days_to_due\": 0,\n          \"sign\": 1\n        };\n      };\n      initializeNewValue();\n      _setDaysToDue = function(value) {\n        return value.days_to_due = value.days_to_due_abs * value.sign;\n      };\n      _valueFromEventTarget = function(event) {\n        var formEl, row, target;\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        if (!formEl.scope().value) {\n          return formEl.scope().newValue;\n        } else {\n          return formEl.scope().value;\n        }\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          data.sign = $scope.newValue.sign;\n          data.days_to_due_abs = $scope.newValue.days_to_due_abs;\n          $scope.values.push(data);\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return initializeNewValue();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      $el.on(\"input\", \".days-to-due-abs\", function(event) {\n        var value;\n        event.preventDefault();\n        value = _valueFromEventTarget(event);\n        return $scope.$apply(function() {\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".days-to-due-sign\", function(event) {\n        var currentValue, value;\n        event.preventDefault();\n        currentValue = Number(angular.element(event.currentTarget).parent().find('input').val());\n        value = _valueFromEventTarget(event);\n        if (currentValue === value.sign) {\n          return;\n        }\n        return $scope.$apply(function() {\n          value.sign = value.sign * -1;\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".add-new-due-date\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        var formEl, subtitle, target, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\");\n        subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\", {\n          due_date_status_name: value.name\n        });\n        return $confirm.askDelete(title, subtitle).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value).then(onSucces, onError);\n        });\n      });\n    };\n    return {\n      link: function($scope, $el, $attrs) {\n        parentDirective.link($scope, $el, $attrs);\n        return linkDueDateStatusValue($scope, $el, $attrs);\n      }\n    };\n  };\n\n  module.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues]);\n\n  TEXT_TYPE = \"text\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  RICHTEXT_TYPE = \"richtext\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  ProjectCustomAttributesController = (function(superClass) {\n    extend(ProjectCustomAttributesController, superClass);\n\n    ProjectCustomAttributesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function ProjectCustomAttributesController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, translate, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService1;\n      this.moveCustomAttributes = bind(this.moveCustomAttributes, this);\n      this.deleteCustomAttribute = bind(this.deleteCustomAttribute, this);\n      this.saveCustomAttribute = bind(this.saveCustomAttribute, this);\n      this.createCustomAttribute = bind(this.createCustomAttribute, this);\n      this.loadCustomAttributes = bind(this.loadCustomAttributes, this);\n      this._onCustomAttributesModified = bind(this._onCustomAttributesModified, this);\n      this.scope.TYPE_CHOICES = TYPE_CHOICES;\n      this.scope.project = this.projectService.project.toJS();\n      this.scope.projectId = this.scope.project.id;\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n      this.scope.init = (function(_this) {\n        return function(type) {\n          _this.scope.type = type;\n          return _this.loadCustomAttributes();\n        };\n      })(this);\n    }\n\n    ProjectCustomAttributesController.prototype._parseAttributesExtra = function() {\n      return this.scope.customAttributes = _.map(this.scope.customAttributes, (function(_this) {\n        return function(x) {\n          return _this._parseAttributeExtra(x);\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype._parseAttributeExtra = function(attr) {\n      if (attr.type === 'dropdown' && !attr.extra) {\n        attr.extra = [''];\n      }\n      return attr;\n    };\n\n    ProjectCustomAttributesController.prototype._onCustomAttributesModified = function() {\n      return this.rootscope.$broadcast(\"admin:project-custom-attributes:updated\");\n    };\n\n    ProjectCustomAttributesController.prototype.loadCustomAttributes = function() {\n      return this.rs.customAttributes[this.scope.type].list(this.scope.projectId).then((function(_this) {\n        return function(customAttributes) {\n          var ref;\n          _this.scope.customAttributes = customAttributes;\n          _this.scope.maxOrder = (ref = _.maxBy(customAttributes, \"order\")) != null ? ref.order : void 0;\n          _this._parseAttributesExtra();\n          return customAttributes;\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.createCustomAttribute = function(attrValues) {\n      return this.repo.create(\"custom-attributes/\" + this.scope.type, attrValues).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.saveCustomAttribute = function(attrModel) {\n      return this.repo.save(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.deleteCustomAttribute = function(attrModel) {\n      return this.repo.remove(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.moveCustomAttributes = function(attrModel, newIndex) {\n      var customAttributes, r;\n      customAttributes = this.scope.customAttributes;\n      r = customAttributes.indexOf(attrModel);\n      customAttributes.splice(r, 1);\n      customAttributes.splice(newIndex, 0, attrModel);\n      _.each(customAttributes, function(val, idx) {\n        return val.order = idx;\n      });\n      return this.repo.saveAll(customAttributes).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    return ProjectCustomAttributesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController);\n\n  ProjectCustomAttributesDirective = function($log, $confirm, animationFrame, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, _manageExtraFormEvent, _manageFormEvent, addExtraOption, cancelCreate, cancelUpdate, create, deleteCustomAttribute, hideAddButton, hideCancelButton, hideCreateForm, hideEditForm, hideExtra, initAttrType, initDraggable, removeExtraOption, resetNewAttr, revertChangesInCustomAttribute, showAddButton, showCancelButton, showCreateForm, showEditForm, showExtra, update;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.isExtraVisible = {};\n      _manageFormEvent = function(event, callback) {\n        var formEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        return callback(formEl);\n      };\n      initDraggable = function() {\n        var drake, el, i, len, results, sortableChildren, sortableEl;\n        sortableEl = $el.find(\".js-sortable\");\n        drake = dragula([sortableEl[0]], {\n          direction: 'vertical',\n          copySortSource: false,\n          copy: false,\n          mirrorContainer: sortableEl[0],\n          moves: function(item, source, handle) {\n            var childItem;\n            childItem = $(handle).closest('.js-child-sortable');\n            if (childItem[0]) {\n              return false;\n            }\n            return $(item).is('div[tg-bind-scope]');\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemAttr, itemEl, itemIndex;\n          itemEl = $(item);\n          itemAttr = itemEl.scope().attr;\n          itemIndex = itemEl.index();\n          return $ctrl.moveCustomAttributes(itemAttr, itemIndex);\n        });\n        sortableChildren = $el.find(\".js-child-sortable\");\n        results = [];\n        for (i = 0, len = sortableChildren.length; i < len; i++) {\n          el = sortableChildren[i];\n          drake[el] = dragula([el], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el,\n            moves: function(item) {\n              return $(item).is('div[tg-bind-scope]');\n            }\n          });\n          results.push(drake[el].on('dragend', function(item) {\n            var attrExtra, itemEl, sourceIndex, targetIndex, value;\n            itemEl = $(item);\n            attrExtra = itemEl.scope().attr.extra;\n            sourceIndex = itemEl.scope().$index;\n            targetIndex = itemEl.index();\n            value = attrExtra[sourceIndex];\n            attrExtra.splice(sourceIndex, 1);\n            attrExtra.splice(targetIndex, 0, value);\n            itemEl.scope().attr.setAttr('extra', attrExtra);\n            return $ctrl.saveCustomAttribute(itemEl.scope().attr).then(function() {\n              return $confirm.notify(\"success\");\n            });\n          }));\n        }\n        return results;\n      };\n      showCreateForm = function() {\n        $el.find(\".js-new-custom-field\").removeClass(\"hidden\");\n        return $el.find(\".js-new-custom-field input:visible\").first().focus();\n      };\n      hideCreateForm = function() {\n        return $el.find(\".js-new-custom-field\").addClass(\"hidden\");\n      };\n      showAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").addClass(\"hidden\");\n      };\n      showCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\");\n      };\n      resetNewAttr = function() {\n        return $scope.newAttr = {};\n      };\n      create = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideCreateForm();\n          resetNewAttr();\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = $scope.newAttr;\n        attr.project = $scope.projectId;\n        attr.order = $scope.maxOrder ? $scope.maxOrder + 1 : 1;\n        return $ctrl.createCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelCreate = function() {\n        hideCreateForm();\n        return resetNewAttr();\n      };\n      initAttrType = function(formEl) {\n        var attr, ref;\n        attr = formEl.scope().newAttr ? formEl.scope().newAttr : formEl.scope().attr;\n        if (attr.type !== \"dropdown\") {\n          return;\n        }\n        if ((ref = attr.extra) != null ? ref.length : void 0) {\n          return;\n        }\n        attr.extra = [''];\n        if (attr.id) {\n          return showEditForm(formEl);\n        } else {\n          showExtra(-1);\n          return formEl.scope().$apply();\n        }\n      };\n      $scope.$watch(\"customAttributes\", function(customAttributes) {\n        if (!customAttributes) {\n          return;\n        }\n        if (customAttributes.length === 0) {\n          hideCancelButton();\n          hideAddButton();\n          return showCreateForm();\n        } else {\n          hideCreateForm();\n          showAddButton();\n          showCancelButton();\n          return initDraggable();\n        }\n      });\n      $el.on(\"change\", \".custom-field-type select\", function(event) {\n        return _manageFormEvent(event, initAttrType);\n      });\n      $el.on(\"click\", \".js-add-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showCreateForm);\n      });\n      $el.on(\"click\", \".js-create-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, create);\n      }));\n      $el.on(\"click\", \".js-cancel-new-custom-field-button\", function(event) {\n        event.preventDefault();\n        return cancelCreate();\n      });\n      $el.on(\"keyup\", \".js-new-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      showEditForm = function(formEl) {\n        formEl.find(\".js-view-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field input:visible\").first().focus().select();\n        formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\");\n        formEl.find(\".custom-extra-actions\").removeClass(\"hidden\");\n        showExtra(formEl.scope().attr.id);\n        return $scope.$apply();\n      };\n      update = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideEditForm(formEl);\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = formEl.scope().attr;\n        attr.setAttr('extra', attr.extra);\n        return $ctrl.saveCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelUpdate = function(formEl) {\n        hideEditForm(formEl);\n        return revertChangesInCustomAttribute(formEl);\n      };\n      hideEditForm = function(formEl) {\n        formEl.find(\".js-edit-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\");\n        return formEl.find(\".custom-extra-actions\").addClass(\"hidden\");\n      };\n      revertChangesInCustomAttribute = function(formEl) {\n        return $scope.$apply(function() {\n          return formEl.scope().attr.revert();\n        });\n      };\n      $el.on(\"click\", \".js-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showEditForm);\n      });\n      $el.on(\"click\", \".js-update-custom-field-button\", debounce(1000, function(event) {\n        return _manageFormEvent(event, update);\n      }));\n      $el.on(\"click\", \".js-cancel-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, cancelUpdate);\n      });\n      $el.on(\"keyup\", \".js-edit-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      deleteCustomAttribute = function(formEl) {\n        var attr, message, text, title;\n        attr = formEl.scope().attr;\n        message = attr.name;\n        title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\");\n        text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\");\n        return $confirm.askDelete(title, text, message).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadCustomAttributes()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\", null, \"We have not been able to delete '\" + message + \"'.\");\n          };\n          return $ctrl.deleteCustomAttribute(attr).then(onSucces, onError);\n        });\n      };\n      $el.on(\"click\", \".js-delete-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, deleteCustomAttribute);\n      }));\n      $scope.toggleExtraVisible = function(index) {\n        if (!$scope.isExtraVisible[index]) {\n          return showExtra(index);\n        } else {\n          return hideExtra(index);\n        }\n      };\n      showExtra = function(index) {\n        return $scope.isExtraVisible[index] = true;\n      };\n      hideExtra = function(index) {\n        return $scope.isExtraVisible[index] = false;\n      };\n      _manageExtraFormEvent = function(event, callback) {\n        var formEl, formExtraEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        formExtraEl = angular.element(event.currentTarget).closest(\".js-form\");\n        return callback(formEl, formExtraEl);\n      };\n      addExtraOption = function(formEl, formExtraEl) {\n        var attrExtra, formScope, ref;\n        formScope = formEl.scope();\n        attrExtra = ((ref = formScope.newAttr) != null ? ref.extra : void 0) ? formScope.newAttr.extra : formScope.attr.extra;\n        attrExtra.push(\"\");\n        formScope.$apply();\n        formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\");\n        return formEl.find(\".js-edit-custom-field-extra input\").last().focus();\n      };\n      removeExtraOption = function(formEl, formExtraEl) {\n        var attrExtra;\n        attrExtra = formEl.scope().attr.extra;\n        attrExtra.splice(formExtraEl.scope().$index, 1);\n        return formExtraEl.scope().$apply();\n      };\n      $el.on(\"keyup\", \".js-edit-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      $el.on(\"keyup\", \".js-new-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      $el.on(\"click\", \".js-add-option-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, addExtraOption);\n      }));\n      return $el.on(\"click\", \".js-delete-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, removeExtraOption);\n      }));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\", ProjectCustomAttributesDirective]);\n\n  ProjectTagsController = (function(superClass) {\n    extend(ProjectTagsController, superClass);\n\n    ProjectTagsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgModel\", \"tgProjectService\"];\n\n    function ProjectTagsController(scope, rootscope, repo, confirm, rs, model, projectService1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.model = model;\n      this.projectService = projectService1;\n      this.mixingClass = bind(this.mixingClass, this);\n      this.cancelMixingTags = bind(this.cancelMixingTags, this);\n      this.confirmMixingTags = bind(this.confirmMixingTags, this);\n      this.toggleMixingFromTags = bind(this.toggleMixingFromTags, this);\n      this.startMixingTags = bind(this.startMixingTags, this);\n      this.deleteTag = bind(this.deleteTag, this);\n      this.editTag = bind(this.editTag, this);\n      this.createTag = bind(this.createTag, this);\n      this.filterAndSortTags = bind(this.filterAndSortTags, this);\n      this.loadTags = bind(this.loadTags, this);\n      this.loading = true;\n      this.loadTags();\n    }\n\n    ProjectTagsController.prototype.loadTags = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.projects.tagsColors(project.id).then((function(_this) {\n        return function(tags) {\n          _this.scope.projectTagsAll = _.map(tags.getAttrs(), function(color, name) {\n            return _this.model.make_model('tag', {\n              name: name,\n              color: color\n            });\n          });\n          _this.filterAndSortTags();\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.filterAndSortTags = function() {\n      this.scope.projectTags = _.sortBy(this.scope.projectTagsAll, function(it) {\n        return it.name.toLowerCase();\n      });\n      return this.scope.projectTags = _.filter(this.scope.projectTags, (function(_this) {\n        return function(tag) {\n          return tag.name.indexOf(_this.scope.tagsFilter.name) !== -1;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.createTag = function(tag, color) {\n      return this.rs.projects.createTag(this.scope.projectId, tag, color);\n    };\n\n    ProjectTagsController.prototype.editTag = function(from_tag, to_tag, color) {\n      if (from_tag === to_tag) {\n        to_tag = null;\n      }\n      return this.rs.projects.editTag(this.scope.projectId, from_tag, to_tag, color);\n    };\n\n    ProjectTagsController.prototype.deleteTag = function(tag) {\n      this.scope.loadingDelete = true;\n      return this.rs.projects.deleteTag(this.scope.projectId, tag)[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingDelete = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.startMixingTags = function(tag) {\n      return this.scope.mixingTags.toTag = tag.name;\n    };\n\n    ProjectTagsController.prototype.toggleMixingFromTags = function(tag) {\n      var index;\n      if (tag.name !== this.scope.mixingTags.toTag) {\n        index = this.scope.mixingTags.fromTags.indexOf(tag.name);\n        if (index === -1) {\n          return this.scope.mixingTags.fromTags.push(tag.name);\n        } else {\n          return this.scope.mixingTags.fromTags.splice(index, 1);\n        }\n      }\n    };\n\n    ProjectTagsController.prototype.confirmMixingTags = function() {\n      var fromTags, toTag;\n      toTag = this.scope.mixingTags.toTag;\n      fromTags = this.scope.mixingTags.fromTags;\n      this.scope.loadingMixing = true;\n      return this.rs.projects.mixTags(this.scope.projectId, toTag, fromTags).then((function(_this) {\n        return function() {\n          _this.cancelMixingTags();\n          return _this.loadTags();\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingMixing = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.cancelMixingTags = function() {\n      this.scope.mixingTags.toTag = null;\n      return this.scope.mixingTags.fromTags = [];\n    };\n\n    ProjectTagsController.prototype.mixingClass = function(tag) {\n      if (this.scope.mixingTags.toTag !== null) {\n        if (tag.name === this.scope.mixingTags.toTag) {\n          return \"mixing-tags-to\";\n        } else if (this.scope.mixingTags.fromTags.indexOf(tag.name) !== -1) {\n          return \"mixing-tags-from\";\n        }\n      }\n    };\n\n    return ProjectTagsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectTagsController\", ProjectTagsController);\n\n  ProjectTagsDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, $window, cancel, goToBottomList, initializeMixingTags, initializeNewValue, initializeTagsFilter, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $window = $(window);\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"tag\": \"\",\n          \"color\": \"\"\n        };\n      };\n      initializeTagsFilter = function() {\n        return $scope.tagsFilter = {\n          \"name\": \"\"\n        };\n      };\n      initializeMixingTags = function() {\n        return $scope.mixingTags = {\n          \"toTag\": null,\n          \"fromTags\": []\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTagsFilter();\n      initializeMixingTags();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, originalTag, promise, tag;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        tag = formEl.scope().tag;\n        originalTag = tag.clone();\n        originalTag.revert();\n        $scope.loadingEdit = true;\n        promise = $ctrl.editTag(originalTag.name, tag.name, tag.color);\n        promise.then(function() {\n          return $ctrl.loadTags().then(function() {\n            var row;\n            row = target.parents(\".row.table-main\");\n            row.addClass(\"hidden\");\n            $scope.loadingEdit = false;\n            $rootscope.$broadcast('tags:updated');\n            return row.siblings(\".visualization\").removeClass('hidden');\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingEdit = false;\n          return form.setErrors(response.data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        formEl = target;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.loadingCreate = true;\n        promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color);\n        promise.then(function(data) {\n          return $ctrl.loadTags().then(function() {\n            $scope.loadingCreate = false;\n            target.addClass(\"hidden\");\n            $rootscope.$broadcast('tags:updated');\n            return initializeNewValue();\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingCreate = false;\n          return form.setErrors(response.data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, tag;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          tag.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $scope.$watch(\"tagsFilter.name\", function(tagsFilter) {\n        return $ctrl.filterAndSortTags();\n      });\n      $window.on(\"keyup\", function(event) {\n        if (event.keyCode === 27) {\n          return $scope.$apply(function() {\n            return initializeMixingTags();\n          });\n        }\n      });\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        return $el.find(\".new-value\").removeClass('hidden');\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".mix-tags\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.startMixingTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-row\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.toggleMixingFromTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-confirm\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.confirmMixingTags();\n        });\n      });\n      $el.on(\"click\", \".mixing-cancel\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.cancelMixingTags();\n        });\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"keyup\", \".status-name input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === 13) {\n          return saveValue(target);\n        } else if (event.keyCode === 27) {\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      $el.on(\"click\", \".delete-tag\", function(event) {\n        var formEl, tag, target, title;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\");\n        return $confirm.askOnDelete(title, tag.name).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadTags()[\"finally\"](function() {\n              $rootscope.$broadcast('tags:updated');\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $ctrl.deleteTag(tag.name).then(onSucces, onError);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $window.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", ProjectTagsDirective]);\n\n  ProjectSwimlanesWipDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.wipClosed = false;\n      return $scope.toggleWipVisibility = function() {\n        return $scope.wipClosed = !$scope.wipClosed;\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesWip\", ProjectSwimlanesWipDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EditRoleDirective, NewRoleDirective, RolePermissionsDirective, RolesController, RolesDirective, bindMethods, bindOnce, debounce, mixOf, module, publicPermissions, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  publicPermissions = ['view_epics', 'view_milestones', 'view_us', 'view_tasks', 'view_issues', 'view_wiki_pages', 'view_wiki_links'];\n\n  RolesController = (function(superClass) {\n    extend(RolesController, superClass);\n\n    RolesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgModel\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function RolesController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, model, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.model = model;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this._disableComputable = bind(this._disableComputable, this);\n      this._enableComputable = bind(this._enableComputable, this);\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.MENU.PERMISSIONS\";\n      this.scope.project = {};\n      this.scope.anyComputableRole = true;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    RolesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.anyComputableRole = _.some(_.map(project.roles, function(point) {\n        return point.computable;\n      }));\n      return project;\n    };\n\n    RolesController.prototype.loadRoles = function() {\n      return this.rs.roles.list(this.scope.projectId).then((function(_this) {\n        return function(roles) {\n          var public_permission;\n          roles = roles.map(function(role) {\n            role.external_user = false;\n            return role;\n          });\n          public_permission = {\n            \"name\": _this.translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\n            \"permissions\": _this.scope.project.public_permissions,\n            \"external_user\": true\n          };\n          roles.push(public_permission);\n          _this.scope.roles = roles;\n          _this.scope.role = _this.scope.roles[0];\n          if (!_this.scope.project.is_private) {\n            publicPermissions.forEach(function(permission) {\n              if (!_this.scope.role.permissions.includes(permission)) {\n                return _this.scope.role.permissions.push(permission);\n              }\n            });\n          }\n          return roles;\n        };\n      })(this));\n    };\n\n    RolesController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadRoles();\n    };\n\n    RolesController.prototype.forceLoadProject = function() {\n      return this.rootscope.$broadcast(\"admin:project-roles:updated\");\n    };\n\n    RolesController.prototype.setRole = function(role) {\n      this.scope.role = role;\n      return this.scope.$broadcast(\"role:changed\", this.scope.role);\n    };\n\n    RolesController.prototype[\"delete\"] = function() {\n      var choices, i, len, ref, replacement, role, subtitle, title, warning;\n      choices = {};\n      ref = this.scope.roles;\n      for (i = 0, len = ref.length; i < len; i++) {\n        role = ref[i];\n        if (role.id !== this.scope.role.id) {\n          choices[role.id] = role.name;\n        }\n      }\n      if (_.keys(choices).length === 0) {\n        return this.confirm.error(this.translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"));\n      }\n      title = this.translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\");\n      subtitle = this.scope.role.name;\n      replacement = this.translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\");\n      warning = this.translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\");\n      return this.confirm.askChoice(title, subtitle, choices, replacement, warning).then((function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            _this.forceLoadProject();\n            return _this.loadRoles()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return _this.confirm.notify('error');\n          };\n          return _this.repo.remove(_this.scope.role, {\n            moveTo: response.selected\n          }).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    RolesController.prototype._enableComputable = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"success\");\n          return _this.forceLoadProject();\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.scope.role.revert();\n        };\n      })(this);\n      return this.repo.save(this.scope.role).then(onSuccess, onError);\n    };\n\n    RolesController.prototype._disableComputable = function() {\n      var askOnError, askOnSuccess, subtitle, title;\n      askOnSuccess = (function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            response.finish();\n            _this.confirm.notify(\"success\");\n            return _this.forceLoadProject();\n          };\n          onError = function() {\n            response.finish();\n            _this.confirm.notify(\"error\");\n            return _this.scope.role.revert();\n          };\n          return _this.repo.save(_this.scope.role).then(onSuccess, onError);\n        };\n      })(this);\n      askOnError = (function(_this) {\n        return function(response) {\n          return _this.scope.role.revert();\n        };\n      })(this);\n      title = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\");\n      subtitle = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\n        roleName: this.scope.role.name\n      });\n      return this.confirm.ask(title, subtitle, \"\").then(askOnSuccess, askOnError);\n    };\n\n    RolesController.prototype.toggleComputable = debounce(2000, function() {\n      if (!this.scope.role.computable) {\n        return this._disableComputable();\n      } else {\n        return this._enableComputable();\n      }\n    });\n\n    return RolesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"RolesController\", RolesController);\n\n  EditRoleDirective = function($repo, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, toggleView;\n      toggleView = function() {\n        $el.find('.total').toggle();\n        return $el.find('.edit-role').toggle();\n      };\n      submit = function() {\n        var promise;\n        $scope.role.name = $el.find(\"input\").val();\n        promise = $repo.save($scope.role);\n        promise.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        promise.then(null, function(data) {\n          return $confirm.notify(\"error\");\n        });\n        return toggleView();\n      };\n      $el.on(\"click\", \".edit-value\", function() {\n        toggleView();\n        $el.find(\"input\").focus();\n        return $el.find(\"input\").val($scope.role.name);\n      });\n      $el.on(\"click\", \"a.save\", submit);\n      $el.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return submit();\n        } else if (event.keyCode === 27) {\n          return toggleView();\n        }\n      });\n      $scope.$on(\"role:changed\", function() {\n        if ($el.find('.edit-role').is(\":visible\")) {\n          return toggleView();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective]);\n\n  RolesDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRoles\", RolesDirective);\n\n  NewRoleDirective = function($tgrepo, $confirm) {\n    var DEFAULT_PERMISSIONS, link;\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"];\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $el.on(\"click\", \"button.add-button\", function(event) {\n        event.preventDefault();\n        $el.find(\".new\").removeClass(\"hidden\");\n        $el.find(\".new\").focus();\n        return $el.find(\".add-button\").hide();\n      });\n      return $el.on(\"keyup\", \".new\", function(event) {\n        var newRole, onError, onSuccess, target;\n        event.preventDefault();\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          newRole = {\n            project: $scope.projectId,\n            name: target.val(),\n            permissions: DEFAULT_PERMISSIONS,\n            order: _.maxBy($scope.roles, function(r) {\n              return r.order;\n            }).order + 1,\n            computable: false\n          };\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          onSuccess = function(role) {\n            var insertPosition;\n            insertPosition = $scope.roles.length - 1;\n            $scope.roles.splice(insertPosition, 0, role);\n            $ctrl.setRole(role);\n            $el.find(\".add-button\").show();\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $tgrepo.create(\"roles\", newRole).then(onSuccess, onError);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          return $el.find(\".add-button\").show();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective]);\n\n  RolePermissionsDirective = function($rootscope, $repo, $confirm, $compile) {\n    var baseTemplate, categoryTemplate, link, resumeTemplate;\n    resumeTemplate = _.template(\"<div class=\\\"resume-title\\\" translate=\\\"<%- category.name %>\\\"></div>\\n<div class=\\\"summary-role\\\">\\n    <div class=\\\"count\\\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\\n    <% _.each(category.permissions, function(permission) { %>\\n        <div class=\\\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\\\"\\n             title=\\\"{{ '<%- permission.name %>' | translate }}\\\"></div>\\n    <% }) %>\\n</div>\\n<tg-svg svg-icon=\\\"icon-arrow-right\\\"></tg-svg>\");\n    categoryTemplate = _.template(\"<div class=\\\"category-config\\\" data-id=\\\"<%- index %>\\\">\\n    <div class=\\\"resume\\\">\\n    </div>\\n    <div class=\\\"category-items\\\">\\n        <div class=\\\"items-container\\\">\\n        <% _.each(category.permissions, function(permission) { %>\\n            <div class=\\\"category-item\\\" data-id=\\\"<%- permission.key %>\\\">\\n                <span translate=\\\"<%- permission.name %>\\\"></span>\\n                <div class=\\\"check\\\">\\n                    <input type=\\\"checkbox\\\"\\n                           <% if(!permission.editable) { %> disabled=\\\"disabled\\\" <% } %>\\n                           <% if(permission.active) { %> checked=\\\"checked\\\" <% } %>/>\\n                    <div></div>\\n                    <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n                    <span class=\\\"check-text check-no\\\" translate=\\\"COMMON.NO\\\"></span>\\n                </div>\\n            </div>\\n        <% }) %>\\n        </div>\\n    </div>\\n</div>\");\n    baseTemplate = _.template(\"<div class=\\\"category-config-list\\\"></div>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, generateCategoriesFromRole, renderCategory, renderPermissions, renderResume;\n      $ctrl = $el.controller();\n      generateCategoriesFromRole = function(role) {\n        var categories, epicPermissions, isPermissionEditable, issuePermissions, milestonePermissions, setActivePermissions, setActivePermissionsPerCategory, taskPermissions, userStoryPermissions, wikiPermissions;\n        setActivePermissions = function(permissions) {\n          return _.map(permissions, function(x) {\n            var ref;\n            return _.extend({}, x, {\n              active: (ref = x[\"key\"], indexOf.call(role.permissions, ref) >= 0)\n            });\n          });\n        };\n        isPermissionEditable = function(permission, role, project) {\n          if (role.external_user && !project.is_private && permission.key.indexOf(\"view_\") === 0) {\n            return false;\n          } else {\n            return true;\n          }\n        };\n        setActivePermissionsPerCategory = function(category) {\n          return _.map(category, function(cat) {\n            cat.permissions = cat.permissions.map(function(permission) {\n              permission.editable = isPermissionEditable(permission, role, $scope.project);\n              return permission;\n            });\n            return _.extend({}, cat, {\n              activePermissions: _.filter(cat[\"permissions\"], \"active\").length\n            });\n          });\n        };\n        categories = [];\n        epicPermissions = [\n          {\n            key: \"view_epics\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"\n          }, {\n            key: \"add_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"\n          }, {\n            key: \"modify_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"\n          }, {\n            key: \"comment_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"\n          }, {\n            key: \"delete_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\",\n          permissions: setActivePermissions(epicPermissions)\n        });\n        milestonePermissions = [\n          {\n            key: \"view_milestones\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"\n          }, {\n            key: \"add_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"\n          }, {\n            key: \"modify_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"\n          }, {\n            key: \"delete_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\n          permissions: setActivePermissions(milestonePermissions)\n        });\n        userStoryPermissions = [\n          {\n            key: \"view_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"\n          }, {\n            key: \"add_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"\n          }, {\n            key: \"modify_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"\n          }, {\n            key: \"comment_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"\n          }, {\n            key: \"delete_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\n          permissions: setActivePermissions(userStoryPermissions)\n        });\n        taskPermissions = [\n          {\n            key: \"view_tasks\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"\n          }, {\n            key: \"add_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"\n          }, {\n            key: \"modify_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"\n          }, {\n            key: \"comment_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"\n          }, {\n            key: \"delete_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\",\n          permissions: setActivePermissions(taskPermissions)\n        });\n        issuePermissions = [\n          {\n            key: \"view_issues\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"\n          }, {\n            key: \"add_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"\n          }, {\n            key: \"modify_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"\n          }, {\n            key: \"comment_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"\n          }, {\n            key: \"delete_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\n          permissions: setActivePermissions(issuePermissions)\n        });\n        wikiPermissions = [\n          {\n            key: \"view_wiki_pages\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"\n          }, {\n            key: \"modify_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"\n          }, {\n            key: \"delete_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"\n          }, {\n            key: \"delete_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"\n          }, {\n            key: \"view_wiki_links\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\n          permissions: setActivePermissions(wikiPermissions)\n        });\n        return setActivePermissionsPerCategory(categories);\n      };\n      renderResume = function(element, category) {\n        return element.find(\".resume\").html($compile(resumeTemplate({\n          category: category\n        }))($scope));\n      };\n      renderCategory = function(category, index) {\n        var html;\n        html = categoryTemplate({\n          category: category,\n          index: index\n        });\n        html = angular.element(html);\n        renderResume(html, category);\n        return $compile(html)($scope);\n      };\n      renderPermissions = function() {\n        var html;\n        $el.off();\n        html = baseTemplate();\n        _.each(generateCategoriesFromRole($scope.role), function(category, index) {\n          if (!$scope.project.is_private) {\n            category.permissions.forEach((function(_this) {\n              return function(permission) {\n                if (publicPermissions.includes(permission.key)) {\n                  return permission.editable = false;\n                }\n              };\n            })(this));\n          }\n          return html = angular.element(html).append(renderCategory(category, index));\n        });\n        $el.html(html);\n        $el.on(\"click\", \".resume\", function(event) {\n          var target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          target.toggleClass(\"open-drawer\");\n          return target.next().toggleClass(\"open\");\n        });\n        return $el.on(\"change\", \".category-item input\", function(event) {\n          var getActivePermissions, onError, onSuccess, target;\n          getActivePermissions = function() {\n            var activePermissions;\n            activePermissions = _.filter($el.find(\".category-item input\"), function(t) {\n              return angular.element(t).is(\":checked\");\n            });\n            activePermissions = _.sortBy(_.map(activePermissions, function(t) {\n              var permission;\n              return permission = angular.element(t).parents(\".category-item\").data(\"id\");\n            }));\n            if (activePermissions.length) {\n              activePermissions.push(\"view_project\");\n            }\n            return activePermissions;\n          };\n          target = angular.element(event.currentTarget);\n          $scope.role.permissions = getActivePermissions();\n          onSuccess = function() {\n            var categories, categoryId;\n            categories = generateCategoriesFromRole($scope.role);\n            categoryId = target.parents(\".category-config\").data(\"id\");\n            renderResume(target.parents(\".category-config\"), categories[categoryId]);\n            $rootscope.$broadcast(\"projects:reload\");\n            $confirm.notify(\"success\");\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            target.prop(\"checked\", !target.prop(\"checked\"));\n            return $scope.role.permissions = getActivePermissions();\n          };\n          if ($scope.role.external_user) {\n            $scope.project.public_permissions = $scope.role.permissions;\n            $scope.project.anon_permissions = $scope.role.permissions.filter(function(permission) {\n              return permission.indexOf(\"view_\") === 0;\n            });\n            return $repo.save($scope.project).then(onSuccess, onError);\n          } else {\n            return $repo.save($scope.role).then(onSuccess, onError);\n          }\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.$on(\"role:changed\", function() {\n        return renderPermissions();\n      });\n      return bindOnce($scope, $attrs.ngModel, renderPermissions);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\", RolePermissionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BitbucketController, BitbucketWebhooksDirective, GithubController, GithubWebhooksDirective, GitlabController, GitlabWebhooksDirective, GogsController, GogsWebhooksDirective, NewWebhookDirective, SelectInputText, ValidOriginIpsDirective, WebhookDirective, WebhooksController, bindMethods, debounce, mixOf, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounce = this.taiga.debounce;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaAdmin\");\n\n  WebhooksController = (function(superClass) {\n    extend(WebhooksController, superClass);\n\n    WebhooksController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WebhooksController(scope, repo, rs, params, location, navUrls, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\";\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"webhooks:reload\", this.loadWebhooks);\n    }\n\n    WebhooksController.prototype.loadWebhooks = function() {\n      return this.rs.webhooks.list(this.scope.projectId).then((function(_this) {\n        return function(webhooks) {\n          return _this.scope.webhooks = webhooks;\n        };\n      })(this));\n    };\n\n    WebhooksController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WebhooksController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadWebhooks();\n    };\n\n    return WebhooksController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"WebhooksController\", WebhooksController);\n\n  WebhookDirective = function($rs, $repo, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var cancel, openHistory, save, showEditMode, showVisualizationMode, updateLogs, updateShowHideHistoryText, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      updateLogs = function() {\n        var prettyDate;\n        prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\");\n        return $rs.webhooklogs.list(webhook.id).then((function(_this) {\n          return function(webhooklogs) {\n            var i, len, log, ref;\n            for (i = 0, len = webhooklogs.length; i < len; i++) {\n              log = webhooklogs[i];\n              log.validStatus = (200 <= (ref = log.status) && ref < 300);\n              log.prettySentHeaders = _.map(_.toPairs(log.request_headers), function(arg) {\n                var header, value;\n                header = arg[0], value = arg[1];\n                return header + \": \" + value;\n              }).join(\"\\n\");\n              log.prettySentData = JSON.stringify(log.request_data);\n              log.prettyDate = moment(log.created).format(prettyDate);\n            }\n            webhook.logs_counter = webhooklogs.length;\n            webhook.logs = webhooklogs;\n            return updateShowHideHistoryText();\n          };\n        })(this));\n      };\n      updateShowHideHistoryText = function() {\n        var historyElement, text, textElement, title;\n        textElement = $el.find(\".toggle-history\");\n        historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\");\n        if (historyElement.hasClass(\"open\")) {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\");\n        } else {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\");\n        }\n        textElement.text(text);\n        return textElement.prop(\"title\", title);\n      };\n      showVisualizationMode = function() {\n        $el.find(\".edition-mode\").addClass(\"hidden\");\n        return $el.find(\".visualization-mode\").removeClass(\"hidden\");\n      };\n      showEditMode = function() {\n        $el.find(\".visualization-mode\").addClass(\"hidden\");\n        return $el.find(\".edition-mode\").removeClass(\"hidden\");\n      };\n      openHistory = function() {\n        return $el.find(\".webhooks-history\").addClass(\"open\");\n      };\n      cancel = function() {\n        showVisualizationMode();\n        return $scope.$apply(function() {\n          return webhook.revert();\n        });\n      };\n      save = debounce(2000, function(target) {\n        var form, promise;\n        form = target.parents(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        promise = $repo.save(webhook);\n        promise.then((function(_this) {\n          return function() {\n            return showVisualizationMode();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      $el.on(\"click\", \".test-webhook\", function() {\n        openHistory();\n        return $rs.webhooks.test(webhook.id).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".edit-webhook\", function() {\n        return showEditMode();\n      });\n      $el.on(\"click\", \".cancel-existing\", function() {\n        return cancel();\n      });\n      $el.on(\"click\", \".edit-existing\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return save(target);\n      });\n      $el.on(\"keyup\", \".edition-mode input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          return save(target);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".delete-webhook\", function() {\n        var message, title;\n        title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\");\n        message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {\n          name: webhook.name\n        });\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSucces;\n            onSucces = function() {\n              askResponse.finish();\n              return $scope.$emit(\"webhooks:reload\");\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove(webhook).then(onSucces, onError);\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".toggle-history\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if ((webhook.logs == null) || webhook.logs.length === 0) {\n          return updateLogs().then(function() {\n            return timeout(0, function() {\n              $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n              return updateShowHideHistoryText();\n            });\n          });\n        } else {\n          $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n          return $scope.$apply(function() {\n            return updateShowHideHistoryText();\n          });\n        }\n      });\n      $el.on(\"click\", \".history-single\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        target.toggleClass(\"history-single-open\");\n        return target.siblings(\".history-single-response\").toggleClass(\"open\");\n      });\n      return $el.on(\"click\", \".resend-request\", function(event) {\n        var log, target;\n        target = angular.element(event.currentTarget);\n        log = target.data(\"log\");\n        return $rs.webhooklogs.resend(log).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", WebhookDirective]);\n\n  NewWebhookDirective = function($rs, $repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addWebhookDOMNode, formDOMNode, initializeNewValue, save, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      formDOMNode = $el.find(\".new-webhook-form\");\n      addWebhookDOMNode = $el.find(\".add-webhook\");\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"url\": \"\",\n          \"key\": \"\"\n        };\n      };\n      initializeNewValue();\n      $scope.$watch(\"webhooks\", function(webhooks) {\n        if (webhooks != null) {\n          if (webhooks.length === 0) {\n            formDOMNode.removeClass(\"hidden\");\n            addWebhookDOMNode.addClass(\"hidden\");\n            return formDOMNode.find(\"input\")[0].focus();\n          } else {\n            formDOMNode.addClass(\"hidden\");\n            return addWebhookDOMNode.removeClass(\"hidden\");\n          }\n        }\n      });\n      save = debounce(2000, function() {\n        var form, promise;\n        form = formDOMNode.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        promise = $repo.create(\"webhooks\", $scope.newValue);\n        promise.then((function(_this) {\n          return function() {\n            $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1);\n            $scope.$emit(\"webhooks:reload\");\n            return initializeNewValue();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      formDOMNode.on(\"click\", \".add-new\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      formDOMNode.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return save();\n        }\n      });\n      formDOMNode.on(\"click\", \".cancel-new\", function(event) {\n        return $scope.$apply(function() {\n          initializeNewValue();\n          if ($scope.webhooks.length >= 1) {\n            return formDOMNode.addClass(\"hidden\");\n          }\n        });\n      });\n      return addWebhookDOMNode.on(\"click\", function(event) {\n        formDOMNode.removeClass(\"hidden\");\n        return formDOMNode.find(\"input\")[0].focus();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective]);\n\n  GithubController = (function(superClass) {\n    extend(GithubController, superClass);\n\n    GithubController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GithubController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITHUB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GithubController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"github\").then((function(_this) {\n        return function(github) {\n          return _this.scope.github = github;\n        };\n      })(this));\n    };\n\n    GithubController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GithubController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return this.loadModules();\n    };\n\n    return GithubController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GithubController\", GithubController);\n\n  GitlabController = (function(superClass) {\n    extend(GitlabController, superClass);\n\n    GitlabController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GitlabController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITLAB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    GitlabController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gitlab\").then((function(_this) {\n        return function(gitlab) {\n          return _this.scope.gitlab = gitlab;\n        };\n      })(this));\n    };\n\n    GitlabController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GitlabController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GitlabController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GitlabController\", GitlabController);\n\n  BitbucketController = (function(superClass) {\n    extend(BitbucketController, superClass);\n\n    BitbucketController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function BitbucketController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    BitbucketController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"bitbucket\").then((function(_this) {\n        return function(bitbucket) {\n          return _this.scope.bitbucket = bitbucket;\n        };\n      })(this));\n    };\n\n    BitbucketController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    BitbucketController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return BitbucketController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"BitbucketController\", BitbucketController);\n\n  SelectInputText = function($translate, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.on(\"click\", \".select-input-content\", function() {\n        var source;\n        source = $el.find(\"input\");\n        if (!source.val()) {\n          return;\n        }\n        source.select();\n        document.execCommand('copy');\n        return $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText]);\n\n  GithubWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.github, \"github\");\n          promise.then(function() {\n            $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1);\n            currentLoading.finish();\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective]);\n\n  GitlabWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gitlab, \"gitlab\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective]);\n\n  BitbucketWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\");\n          promise.then(function() {\n            $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective]);\n\n  ValidOriginIpsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ngModel) {\n      return $ngModel.$parsers.push(function(value) {\n        value = $.trim(value);\n        if (value === \"\") {\n          return [];\n        }\n        return value.split(\",\");\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgValidOriginIps\", ValidOriginIpsDirective);\n\n  GogsController = (function(superClass) {\n    extend(GogsController, superClass);\n\n    GogsController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GogsController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GOGS.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GogsController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gogs\").then((function(_this) {\n        return function(gogs) {\n          return _this.scope.gogs = gogs;\n        };\n      })(this));\n    };\n\n    GogsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GogsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GogsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  GogsWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gogs, \"gogs\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $el.on(\"click\", \".submit-button\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.controller(\"GogsController\", GogsController);\n\n  module.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteProjectDirective, bindOnce, debounce, module, taiga, timeout;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaProject\");\n\n  DeleteProjectDirective = function($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var projectToDelete, submit;\n      projectToDelete = null;\n      $scope.$on(\"deletelightbox:new\", function(ctx, project) {\n        lightboxService.open($el);\n        return projectToDelete = project;\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var promise;\n        tgLoader.start();\n        lightboxService.close($el);\n        promise = $repo.remove(projectToDelete);\n        promise.then(function(data) {\n          $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1);\n          tgLoader.pageLoaded();\n          $rootscope.$broadcast(\"projects:reload\");\n          $location.path($navUrls.resolve(\"home\"));\n          $confirm.notify(\"success\");\n          return currentUserService.loadProjects();\n        });\n        return promise.then(null, function() {\n          $confirm.notify(\"error\");\n          return lightboxService.close($el);\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      return $el.on(\"click\", \".js-confirm\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\", \"$tgAnalytics\", DeleteProjectDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindHtmlDirective, BindOnceAltDirective, BindOnceBindDirective, BindOnceHrefDirective, BindOnceHtmlDirective, BindOnceRefDirective, BindOnceSrcDirective, BindOnceTitleDirective, BindTitleDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  BindOnceBindDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoBind, function(val) {\n        return $el.text(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHtml, function(val) {\n        return $el.html(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceRefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoRef, function(val) {\n        return $el.html(\"#\" + val + \" \");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceSrcDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoSrc, function(val) {\n        return $el.attr(\"src\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHrefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHref, function(val) {\n        return $el.attr(\"href\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceAltDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoAlt, function(val) {\n        return $el.attr(\"alt\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoTitle, function(val) {\n        return $el.attr(\"title\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgTitleHtml, function(val) {\n        if (val != null) {\n          return $el.attr(\"title\", val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgBindHtml, function(val) {\n        if (val != null) {\n          return $el.html(val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.directive(\"tgBoBind\", BindOnceBindDirective);\n\n  module.directive(\"tgBoHtml\", BindOnceHtmlDirective);\n\n  module.directive(\"tgBoRef\", BindOnceRefDirective);\n\n  module.directive(\"tgBoSrc\", BindOnceSrcDirective);\n\n  module.directive(\"tgBoHref\", BindOnceHrefDirective);\n\n  module.directive(\"tgBoAlt\", BindOnceAltDirective);\n\n  module.directive(\"tgBoTitle\", BindOnceTitleDirective);\n\n  module.directive(\"tgBindTitle\", BindTitleDirective);\n\n  module.directive(\"tgBindHtml\", BindHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfigurationService, module;\n\n  ConfigurationService = (function() {\n    function ConfigurationService() {\n      this.config = window.taigaConfig;\n    }\n\n    ConfigurationService.prototype.get = function(key, defaultValue) {\n      if (defaultValue == null) {\n        defaultValue = null;\n      }\n      if (_.has(this.config, key)) {\n        return this.config[key];\n      }\n      return defaultValue;\n    };\n\n    return ConfigurationService;\n\n  })();\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgConfig\", ConfigurationService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContribController, ContribUserSettingsController, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaBase\");\n\n  ContribController = (function(superClass) {\n    extend(ContribController, superClass);\n\n    ContribController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function ContribController(rootScope, scope, params, repo, rs, confirm, projectService, errorHandlingService) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.adminPlugins, {\n        \"slug\": this.params.plugin\n      }));\n      this.scope.projectSlug = this.params.pslug;\n      this.loadInitialData();\n    }\n\n    ContribController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.$broadcast('project:loaded', project);\n      return project;\n    };\n\n    ContribController.prototype.loadInitialData = function() {\n      return this.loadProject();\n    };\n\n    return ContribController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribController\", ContribController);\n\n  ContribUserSettingsController = (function(superClass) {\n    extend(ContribUserSettingsController, superClass);\n\n    ContribUserSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\"];\n\n    function ContribUserSettingsController(rootScope, scope, params) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.userSettingsPlugins, {\n        \"slug\": this.params.plugin\n      }));\n    }\n\n    return ContribUserSettingsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribUserSettingsController\", ContribUserSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersStorageService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  FiltersStorageService = (function(superClass) {\n    extend(FiltersStorageService, superClass);\n\n    FiltersStorageService.$inject = [\"$tgStorage\", \"$routeParams\"];\n\n    function FiltersStorageService(storage, params) {\n      this.storage = storage;\n      this.params = params;\n    }\n\n    FiltersStorageService.prototype.generateHash = function(components) {\n      if (components == null) {\n        components = [];\n      }\n      components = _.map(components, function(x) {\n        return JSON.stringify(x);\n      });\n      return hex_sha1(components.join(\":\"));\n    };\n\n    return FiltersStorageService;\n\n  })(taiga.Service);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HttpService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  HttpService = (function(superClass) {\n    extend(HttpService, superClass);\n\n    HttpService.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"];\n\n    function HttpService(http, q, tgLoader, storage, rootScope, cacheFactory, translate) {\n      this.http = http;\n      this.q = q;\n      this.tgLoader = tgLoader;\n      this.storage = storage;\n      this.rootScope = rootScope;\n      this.cacheFactory = cacheFactory;\n      this.translate = translate;\n      HttpService.__super__.constructor.call(this);\n      this.cache = this.cacheFactory(\"httpget\");\n    }\n\n    HttpService.prototype.headers = function() {\n      var headers, lang, token;\n      headers = {};\n      token = this.storage.get('token');\n      if (token) {\n        headers[\"Authorization\"] = \"Bearer \" + token;\n      }\n      lang = this.translate.preferredLanguage();\n      if (lang) {\n        headers[\"Accept-Language\"] = lang;\n      }\n      return headers;\n    };\n\n    HttpService.prototype.request = function(options) {\n      options.headers = _.assign({}, options.headers || {}, this.headers());\n      return this.http(options);\n    };\n\n    HttpService.prototype.get = function(url, params, options) {\n      options = _.assign({\n        method: \"GET\",\n        url: url\n      }, options);\n      if (params) {\n        options.params = params;\n      }\n      options.cache = this.cache;\n      return this.request(options)[\"finally\"]((function(_this) {\n        return function(data) {\n          return _this.cache.removeAll();\n        };\n      })(this));\n    };\n\n    HttpService.prototype.post = function(url, data, params, options) {\n      options = _.assign({\n        method: \"POST\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      options.responseType = 'text';\n      return this.request(options);\n    };\n\n    HttpService.prototype.put = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PUT\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype.patch = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PATCH\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype[\"delete\"] = function(url, data, params, options) {\n      options = _.assign({\n        method: \"DELETE\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    return HttpService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgHttp\", HttpService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadElementDirective, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBase\");\n\n  LoadElementDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch($parse($attrs.tgLoadElement), function(val) {\n        var el, legacyObj;\n        if (val) {\n          legacyObj = $parse($attrs.tgLoadElement)($scope);\n          el = $el[0];\n          el.component = legacyObj.component;\n          if (legacyObj.params) {\n            el.params = legacyObj.params;\n          }\n          if (legacyObj.events) {\n            return el.events = legacyObj.events;\n          }\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return unwatch();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoadElement\", ['$parse', LoadElementDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var locationFactory, module;\n\n  locationFactory = function($location, $route, $rootscope) {\n    $location.noreload = function(scope) {\n      var lastRoute, un;\n      lastRoute = $route.current;\n      un = scope.$on(\"$locationChangeSuccess\", function() {\n        $route.current = lastRoute;\n        return un();\n      });\n      return $location;\n    };\n    $location.isInCurrentRouteParams = function(name, value) {\n      var params;\n      params = $location.search() || {};\n      return params[name] === value;\n    };\n    return $location;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Model, ModelService, module, provider, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  Model = (function() {\n    function Model(name, data, dataTypes) {\n      this._attrs = data;\n      this._name = name;\n      this._dataTypes = dataTypes;\n      this.setAttrs(data);\n      this.initialize();\n    }\n\n    Model.prototype.realClone = function() {\n      var attrs, instance;\n      attrs = _.cloneDeep(this._attrs);\n      instance = new Model(this._name, attrs, this._dataTypes);\n      instance._modifiedAttrs = _.cloneDeep(this._modifiedAttrs);\n      instance._isModified = _.cloneDeep(this._isModified);\n      return instance;\n    };\n\n    Model.prototype.clone = function() {\n      var instance;\n      instance = new Model(this._name, this._attrs, this._dataTypes);\n      instance._modifiedAttrs = this._modifiedAttrs;\n      instance._isModified = this._isModified;\n      return instance;\n    };\n\n    Model.prototype.applyCasts = function() {\n      var attrName, castMethod, castName, ref, results;\n      ref = this._dataTypes;\n      results = [];\n      for (attrName in ref) {\n        castName = ref[attrName];\n        castMethod = service.casts[castName];\n        if (!castMethod) {\n          continue;\n        }\n        results.push(this._attrs[attrName] = castMethod(this._attrs[attrName]));\n      }\n      return results;\n    };\n\n    Model.prototype.getIdAttrName = function() {\n      return \"id\";\n    };\n\n    Model.prototype.getName = function() {\n      return this._name;\n    };\n\n    Model.prototype.getAttrs = function(patch) {\n      if (patch == null) {\n        patch = false;\n      }\n      if (this._attrs.version != null) {\n        this._modifiedAttrs.version = this._attrs.version;\n      }\n      if (patch) {\n        return _.extend({}, this._modifiedAttrs);\n      }\n      return _.extend({}, this._attrs, this._modifiedAttrs);\n    };\n\n    Model.prototype.setAttrs = function(attrs) {\n      this._attrs = attrs;\n      this._modifiedAttrs = {};\n      this.applyCasts();\n      return this._isModified = false;\n    };\n\n    Model.prototype.setAttr = function(name, value) {\n      this._modifiedAttrs[name] = value;\n      return this._isModified = true;\n    };\n\n    Model.prototype.initialize = function() {\n      var getter, self, setter;\n      self = this;\n      getter = function(name) {\n        return function() {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            return self[name];\n          }\n          if (indexOf.call(_.keys(self._modifiedAttrs), name) < 0) {\n            return self._attrs[name];\n          }\n          return self._modifiedAttrs[name];\n        };\n      };\n      setter = function(name) {\n        return function(value) {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            self[name] = value;\n            return;\n          }\n          if (self._attrs[name] !== value) {\n            self._modifiedAttrs[name] = value;\n            self._isModified = true;\n          } else {\n            delete self._modifiedAttrs[name];\n          }\n        };\n      };\n      return _.each(this._attrs, function(value, name) {\n        var options;\n        options = {\n          get: getter(name),\n          set: setter(name),\n          enumerable: true,\n          configurable: true\n        };\n        return Object.defineProperty(self, name, options);\n      });\n    };\n\n    Model.prototype.serialize = function() {\n      var data;\n      data = {\n        \"data\": _.clone(this._attrs),\n        \"name\": this._name\n      };\n      return JSON.stringify(data);\n    };\n\n    Model.prototype.isModified = function() {\n      return this._isModified;\n    };\n\n    Model.prototype.isAttributeModified = function(attribute) {\n      return this._modifiedAttrs[attribute] != null;\n    };\n\n    Model.prototype.markSaved = function() {\n      this._isModified = false;\n      this._attrs = this.getAttrs();\n      return this._modifiedAttrs = {};\n    };\n\n    Model.prototype.revert = function() {\n      this._modifiedAttrs = {};\n      return this._isModified = false;\n    };\n\n    Model.desSerialize = function(sdata) {\n      var ddata, model;\n      ddata = JSON.parse(sdata);\n      model = new Model(ddata.url, ddata.data);\n      return model;\n    };\n\n    return Model;\n\n  })();\n\n  taiga = this.taiga;\n\n  ModelService = (function(superClass) {\n    extend(ModelService, superClass);\n\n    ModelService.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"];\n\n    function ModelService(q, urls, storage, http) {\n      this.q = q;\n      this.urls = urls;\n      this.storage = storage;\n      this.http = http;\n      ModelService.__super__.constructor.call(this);\n    }\n\n    return ModelService;\n\n  })(taiga.Service);\n\n  provider = function($q, $http, $gmUrls, $gmStorage) {\n    var service;\n    service = {};\n    service.make_model = function(name, data, cls, dataTypes) {\n      if (cls == null) {\n        cls = Model;\n      }\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      return new cls(name, data, dataTypes);\n    };\n    service.cls = Model;\n    service.casts = {\n      int: function(value) {\n        return parseInt(value, 10);\n      },\n      float: function(value) {\n        return parseFloat(value, 10);\n      }\n    };\n    return service;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationUrlsDirective, NavigationUrlsService, bindOnce, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\");\n\n  NavigationUrlsService = (function(superClass) {\n    extend(NavigationUrlsService, superClass);\n\n    function NavigationUrlsService() {\n      this.urls = {};\n    }\n\n    NavigationUrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge({}, this.urls, urls || {});\n    };\n\n    NavigationUrlsService.prototype.formatUrl = function(url, ctx) {\n      var replacer;\n      if (ctx == null) {\n        ctx = {};\n      }\n      replacer = function(match) {\n        match = trim(match, \":\");\n        return ctx[match] || \"undefined\";\n      };\n      return url.replace(/(:\\w+)/g, replacer);\n    };\n\n    NavigationUrlsService.prototype.resolve = function(name, ctx) {\n      var url;\n      url = this.urls[name];\n      if (!url) {\n        return \"\";\n      }\n      if (ctx) {\n        return this.formatUrl(url, ctx);\n      }\n      return url;\n    };\n\n    return NavigationUrlsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgNavUrls\", NavigationUrlsService);\n\n  NavigationUrlsDirective = function($navurls, $auth, $q, $location, lightboxService, tgSections) {\n    var bindOnceP, link, parseNav;\n    bindOnceP = function($scope, attr) {\n      var defered;\n      defered = $q.defer();\n      bindOnce($scope, attr, function(v) {\n        return defered.resolve(v);\n      });\n      return defered.promise;\n    };\n    parseNav = function(data, $scope) {\n      var index, name, obj, params, promises, ref, result, values;\n      ref = _.map(data.split(\":\"), trim), name = ref[0], params = ref[1];\n      if (params) {\n        result = params.split(/(\\w+)=/);\n        result = _.filter(result, function(str) {\n          return str.length;\n        });\n        result = _.map(result, function(str) {\n          return trim(str.replace(/,$/g, ''));\n        });\n        params = [];\n        index = 0;\n        while (index < result.length) {\n          obj = {};\n          obj[result[index]] = result[index + 1];\n          params.push(obj);\n          index = index + 2;\n        }\n      } else {\n        params = [];\n      }\n      values = _.map(params, function(param) {\n        return _.values(param)[0];\n      });\n      promises = _.map(values, function(x) {\n        return bindOnceP($scope, x);\n      });\n      return Promise.all(promises).then(function() {\n        var i, key, len, options, param, value;\n        options = {};\n        for (i = 0, len = params.length; i < len; i++) {\n          param = params[i];\n          key = Object.keys(param)[0];\n          value = param[key];\n          options[key] = $scope.$eval(value);\n        }\n        return [name, options];\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      if ($el.is(\"a\")) {\n        $el.attr(\"href\", \"#\");\n      }\n      $el.on(\"mouseenter\", function(event) {\n        var target;\n        target = $(event.currentTarget);\n        if (!target.data(\"fullUrl\") || $attrs.tgNavGetParams !== target.data(\"params\")) {\n          return parseNav($attrs.tgNav, $scope).then(function(result) {\n            var fullUrl, getURLParams, getURLParamsStr, name, options, path, url, user;\n            name = result[0], options = result[1];\n            user = $auth.getUser();\n            if (user) {\n              options.user = user.username;\n            }\n            if (name === 'project') {\n              path = tgSections.getPath(options['project'], options['section']);\n              name = name + \"-\" + path;\n            }\n            url = $navurls.resolve(name);\n            fullUrl = $navurls.formatUrl(url, options);\n            if ($attrs.tgNavGetParams) {\n              getURLParams = JSON.parse($attrs.tgNavGetParams);\n              getURLParamsStr = $.param(getURLParams);\n              fullUrl = fullUrl + \"?\" + getURLParamsStr;\n              target.data(\"params\", $attrs.tgNavGetParams);\n            }\n            target.data(\"fullUrl\", fullUrl);\n            if (target.is(\"a\")) {\n              target.attr(\"href\", fullUrl);\n            }\n            return $el.on(\"click\", function(event) {\n              if (event.metaKey || event.ctrlKey) {\n                return;\n              }\n              event.preventDefault();\n              target = $(event.currentTarget);\n              if (target.hasClass('noclick')) {\n                return;\n              }\n              fullUrl = target.data(\"fullUrl\");\n              switch (event.which) {\n                case 1:\n                  $location.url(fullUrl);\n                  $scope.$apply();\n                  break;\n                case 2:\n                  window.open(fullUrl);\n              }\n              return lightboxService.closeAll();\n            });\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNav\", [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RepositoryService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  RepositoryService = (function(superClass) {\n    extend(RepositoryService, superClass);\n\n    RepositoryService.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"];\n\n    function RepositoryService(q, model1, storage, http, urls) {\n      this.q = q;\n      this.model = model1;\n      this.storage = storage;\n      this.http = http;\n      this.urls = urls;\n      RepositoryService.__super__.constructor.call(this);\n    }\n\n    RepositoryService.prototype.resolveUrlForModel = function(model) {\n      var idAttrName;\n      idAttrName = model.getIdAttrName();\n      return (this.urls.resolve(model.getName())) + \"/\" + model[idAttrName];\n    };\n\n    RepositoryService.prototype.resolveUrlForAttributeModel = function(model) {\n      return this.urls.resolve(model.getName(), model.parent);\n    };\n\n    RepositoryService.prototype.create = function(name, data, dataTypes, extraParams) {\n      var defered, promise, url;\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      defered = this.q.defer();\n      url = this.urls.resolve(name);\n      promise = this.http.post(url, JSON.stringify(data), extraParams);\n      promise.success((function(_this) {\n        return function(_data, _status) {\n          return defered.resolve(_this.model.make_model(name, _data, null, dataTypes));\n        };\n      })(this));\n      promise.error((function(_this) {\n        return function(data, status) {\n          return defered.reject(data);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.remove = function(model, params) {\n      var defered, promise, url;\n      if (params == null) {\n        params = {};\n      }\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http[\"delete\"](url, {}, params);\n      promise.success(function(data, status) {\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(model);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAll = function(models, patch) {\n      var promises;\n      if (patch == null) {\n        patch = true;\n      }\n      promises = _.map(models, (function(_this) {\n        return function(x) {\n          return _this.save(x, true);\n        };\n      })(this));\n      return this.q.all(promises);\n    };\n\n    RepositoryService.prototype.save = function(model, patch, params, options, returnHeaders) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      if (params == null) {\n        params = {};\n      }\n      if (returnHeaders == null) {\n        returnHeaders = false;\n      }\n      defered = this.q.defer();\n      if (!model.isModified() && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForModel(model);\n      data = JSON.stringify(model.getAttrs(patch));\n      if (patch) {\n        promise = this.http.patch(url, data, params, options);\n      } else {\n        promise = this.http.put(url, data, params, options);\n      }\n      promise.success((function(_this) {\n        return function(data, status, headers, response) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          if (returnHeaders) {\n            return defered.resolve([model, headers()]);\n          } else {\n            return defered.resolve(model);\n          }\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAttribute = function(model, attribute, patch) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      defered = this.q.defer();\n      if (!(model != null ? model.isModified() : void 0) && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForAttributeModel(model);\n      data = {};\n      data[attribute] = model.getAttrs();\n      if (patch) {\n        promise = this.http.patch(url, data);\n      } else {\n        promise = this.http.put(url, data);\n      }\n      promise.success((function(_this) {\n        return function(data, status) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          return defered.resolve(model);\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.refresh = function(model) {\n      var defered, promise, url;\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http.get(url);\n      promise.success(function(data, status) {\n        model._modifiedAttrs = {};\n        model._attrs = data;\n        model._isModified = false;\n        model.applyCasts();\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.queryMany = function(name, params, options, headers) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      if (headers == null) {\n        headers = false;\n      }\n      url = this.urls.resolve(name);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var result;\n          result = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          if (headers) {\n            return [result, data.headers];\n          }\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneAttribute = function(name, id, attribute, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name, id);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var model;\n          model = _this.model.make_model(name, data.data[attribute]);\n          model.parent = id;\n          return model;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOne = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return _this.model.make_model(name, data.data);\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryPaginated = function(name, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.models = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOnePaginatedRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.data = data.data;\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.resolve = function(options) {\n      var cache, params;\n      params = {};\n      if (options.pslug != null) {\n        params.project = options.pslug;\n      }\n      if (options.usref != null) {\n        params.us = options.usref;\n      }\n      if (options.taskref != null) {\n        params.task = options.taskref;\n      }\n      if (options.issueref != null) {\n        params.issue = options.issueref;\n      }\n      if (options.sslug != null) {\n        params.milestone = options.sslug;\n      }\n      if (options.wikipage != null) {\n        params.wikipage = options.wikipage;\n      }\n      if (options.ref != null) {\n        params.ref = options.ref;\n      }\n      cache = !(options.wikipage || options.sslug);\n      return this.queryOneRaw(\"resolver\", null, params, {\n        cache: cache\n      });\n    };\n\n    return RepositoryService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgRepo\", RepositoryService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StorageService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  StorageService = (function(superClass) {\n    extend(StorageService, superClass);\n\n    StorageService.$inject = [\"$rootScope\"];\n\n    function StorageService($rootScope) {\n      StorageService.__super__.constructor.call(this);\n    }\n\n    StorageService.prototype.get = function(key, _default) {\n      var serializedValue;\n      serializedValue = localStorage.getItem(key);\n      if (serializedValue === null) {\n        return _default || null;\n      }\n      return JSON.parse(serializedValue);\n    };\n\n    StorageService.prototype.set = function(key, val) {\n      if (_.isObject(key)) {\n        return _.each(key, (function(_this) {\n          return function(val, key) {\n            return _this.set(key, val);\n          };\n        })(this));\n      } else {\n        return localStorage.setItem(key, JSON.stringify(val));\n      }\n    };\n\n    StorageService.prototype.contains = function(key) {\n      var value;\n      value = this.get(key);\n      return value !== null;\n    };\n\n    StorageService.prototype.remove = function(key) {\n      return localStorage.removeItem(key);\n    };\n\n    StorageService.prototype.clear = function() {\n      return localStorage.clear();\n    };\n\n    return StorageService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgStorage\", StorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UrlsService, format, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  format = function(fmt, obj) {\n    obj = _.clone(obj);\n    return fmt.replace(/%s/g, function(match) {\n      return String(obj.shift());\n    });\n  };\n\n  taiga = this.taiga;\n\n  UrlsService = (function(superClass) {\n    extend(UrlsService, superClass);\n\n    UrlsService.$inject = [\"$tgConfig\"];\n\n    function UrlsService(config) {\n      this.config = config;\n      this.urls = {};\n      this.mainUrl = this.config.get(\"api\");\n    }\n\n    UrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge(this.urls, urls);\n    };\n\n    UrlsService.prototype.resolve = function() {\n      var args, name, url;\n      args = _.toArray(arguments);\n      if (args.length === 0) {\n        throw Error(\"wrong arguments to setUrls\");\n      }\n      name = args.slice(0, 1)[0];\n      url = format(this.urls[name], args.slice(1));\n      return format(\"%s/%s\", [_.trimEnd(this.mainUrl, \"/\"), _.trimStart(url, \"/\")]);\n    };\n\n    UrlsService.prototype.resolveAbsolute = function() {\n      var url;\n      url = this.resolve.apply(this, arguments);\n      if (/^https?:\\/\\//i.test(url)) {\n        return url;\n      }\n      if (/^\\//.test(url)) {\n        return window.location.protocol + \"//\" + window.location.host + url;\n      }\n      return window.location.protocol + \"//\" + window.location.host + \"/\" + url;\n    };\n\n    return UrlsService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service('$tgUrls', UrlsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var _get, service;\n    _get = function(objectId, resource) {\n      return $repo.queryOne(resource, objectId);\n    };\n    service = {\n      epic: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/epic\");\n        }\n      },\n      userstory: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/userstory\");\n        }\n      },\n      task: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/task\");\n        }\n      },\n      issue: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributesValues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var _list, service;\n    _list = function(projectId, resource) {\n      return $repo.queryMany(resource, {\n        project: projectId\n      });\n    };\n    service = {\n      epic: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/epic\");\n        }\n      },\n      userstory: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/userstory\");\n        }\n      },\n      task: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/task\");\n        }\n      },\n      issue: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"epics-queryparams\";\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"epics\", \"by_ref\", params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.upvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-upvote\", epicId);\n      return $http.post(url);\n    };\n    service.downvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-downvote\", epicId);\n      return $http.post(url);\n    };\n    service.watch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-watch\", epicId);\n      return $http.post(url);\n    };\n    service.unwatch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-unwatch\", epicId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.epics = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(contentType, objectId, entryType) {\n      return $repo.queryOneRaw(\"history/\" + contentType, objectId, {\n        type: entryType\n      });\n    };\n    service.editComment = function(type, objectId, activityId, comment) {\n      var commentData, params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/edit_comment\";\n      params = {\n        id: activityId\n      };\n      commentData = {\n        comment: comment\n      };\n      return $http.post(url, commentData, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.getCommentHistory = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/comment_versions\";\n      params = {\n        id: activityId\n      };\n      return $http.get(url, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.deleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/delete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.undeleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/undelete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.history = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.get = function(token) {\n      return $repo.queryOne(\"invitations\", token);\n    };\n    return function(instance) {\n      return instance.invitations = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashIssuesShowTags, hashSprintShowTags, hashSuffix, service;\n    service = {};\n    hashSuffix = \"issues-queryparams\";\n    hashSprintShowTags = \"taskboard-issues\";\n    hashIssuesShowTags = \"issues-list\";\n    service.get = function(projectId, issueId) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      return $repo.queryOne(\"issues\", issueId, params);\n    };\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"issues\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"issues\", filters);\n    };\n    service.list = function(projectId, filters, options) {\n      var params;\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryPaginated(\"issues\", params, options);\n    };\n    service.listInProject = function(projectId, sprintId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      params = _.merge(params, {\n        project: projectId\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"issues\", params);\n    };\n    service.bulkCreate = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-issues\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.upvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-upvote\", issueId);\n      return $http.post(url);\n    };\n    service.downvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-downvote\", issueId);\n      return $http.post(url);\n    };\n    service.watch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-watch\", issueId);\n      return $http.post(url);\n    };\n    service.unwatch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-unwatch\", issueId);\n      return $http.post(url);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/issues_stats\");\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"issues-filters\", null, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-issue-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.promoteToUserStory = function(issueId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-issue-to-us\", issueId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    service.storeIssuesShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getIssuesShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    service.storeSprintShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSprintShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.issues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($storage) {\n    var hashSuffixStatusColumnModes, hashSuffixStatusViewModes, hashSuffixSwimlanesModes, service;\n    service = {};\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\";\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\";\n    hashSuffixSwimlanesModes = \"kanban-swimlanesmodels\";\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeSwimlanesModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSwimlanesModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    return function(instance) {\n      return instance.kanban = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {\n      list: function() {\n        return $repo.queryMany(\"locales\");\n      }\n    };\n    return function(instance) {\n      return instance.locales = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.render = function(projectId, content) {\n      var params, url;\n      if ((content == null) || content === \"\") {\n        content = ' ';\n      }\n      params = {\n        project_id: projectId,\n        content: content\n      };\n      url = $urls.resolve(\"wiki\");\n      return $http.post(url + \"/render\", params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.mdrender = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"memberships\", id);\n    };\n    service.list = function(projectId, filters, enablePagination) {\n      var options, params;\n      if (enablePagination == null) {\n        enablePagination = true;\n      }\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      if (enablePagination) {\n        return $repo.queryPaginated(\"memberships\", params);\n      }\n      return $repo.queryMany(\"memberships\", params, options = {\n        enablePagination: enablePagination\n      });\n    };\n    service.listByUser = function(userId, filters) {\n      var params;\n      params = {\n        user: userId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryPaginated(\"memberships\", params);\n    };\n    service.resendInvitation = function(id) {\n      var url;\n      url = $urls.resolve(\"memberships\");\n      return $http.post(url + \"/\" + id + \"/resend_invitation\", {});\n    };\n    service.bulkCreateMemberships = function(projectId, data, invitation_extra_text) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-memberships\");\n      params = {\n        project_id: projectId,\n        bulk_memberships: data,\n        invitation_extra_text: invitation_extra_text\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.memberships = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.list = function(projectId, module) {\n      return $repo.queryOneAttribute(\"project-modules\", projectId, module);\n    };\n    return function(instance) {\n      return instance.modules = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"notify-policies\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"notify-policies\", params);\n    };\n    return function(instance) {\n      return instance.notifyPolicies = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $auth, $q, $translate) {\n    var service;\n    service = {};\n    service.get = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId);\n    };\n    service.getBySlug = function(projectSlug) {\n      return $repo.queryOne(\"projects\", \"by_slug?slug=\" + projectSlug);\n    };\n    service.list = function(filters) {\n      var params;\n      params = {\n        \"order_by\": \"user_order\"\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.listByMember = function(memberId) {\n      var params;\n      params = {\n        \"member\": memberId,\n        \"order_by\": \"user_order\"\n      };\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.templates = function() {\n      return $repo.queryMany(\"project-templates\");\n    };\n    service.usersList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"users\", params);\n    };\n    service.rolesList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"roles\", params);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/stats\");\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = $urls.resolve(\"bulk-update-projects-order\");\n      return $http.post(url, bulkData);\n    };\n    service.regenerate_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.patch_default_swimlane = function(projectId, swimlaneId) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId;\n      data = {\n        default_swimlane: swimlaneId\n      };\n      return $http.patch(url, data);\n    };\n    service.delete_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.leave = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/leave\";\n      return $http.post(url);\n    };\n    service.memberStats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/member_stats\");\n    };\n    service.tagsColors = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId + \"/tags_colors\");\n    };\n    service.deleteTag = function(projectId, tag) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tag\";\n      return $http.post(url, {\n        tag: tag\n      });\n    };\n    service.createTag = function(projectId, tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/create_tag\";\n      data = {};\n      data.tag = tag;\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.editTag = function(projectId, from_tag, to_tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/edit_tag\";\n      data = {};\n      data.from_tag = from_tag;\n      if (to_tag) {\n        data.to_tag = to_tag;\n      }\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.mixTags = function(projectId, to_tag, from_tags) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/mix_tags\";\n      return $http.post(url, {\n        to_tag: to_tag,\n        from_tags: from_tags\n      });\n    };\n    service[\"export\"] = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"exporter\")) + \"/\" + projectId;\n      return $http.get(url);\n    };\n    service[\"import\"] = function(file, statusUpdater) {\n      var complete, data, defered, errorMsg, failed, maxFileSize, response, uploadComplete, uploadFailed, uploadProgress, xhr;\n      defered = $q.defer();\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\n          fileName: file.name,\n          fileSize: sizeFormat(file.size),\n          maxFileSize: sizeFormat(maxFileSize)\n        });\n        response = {\n          status: 413,\n          data: {\n            _error_message: errorMsg\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          var message, percent;\n          percent = Math.round((evt.loaded / evt.total) * 100);\n          message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\n            uploadedSize: sizeFormat(evt.loaded),\n            totalSize: sizeFormat(evt.total)\n          });\n          return statusUpdater(\"in-progress\", null, message, percent);\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"done\", $translate.instant(\"PROJECT.IMPORT.TITLE\"), $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"));\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"error\");\n        };\n      })(this);\n      complete = (function(_this) {\n        return function(evt) {\n          var ref;\n          response = {};\n          try {\n            response.data = JSON.parse(evt.target.responseText);\n          } catch (error) {\n            response.data = {};\n          }\n          response.status = evt.target.status;\n          if (evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')) {\n            response.headers = {\n              isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') === 'True',\n              memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\n            };\n          }\n          if ((ref = response.status) === 201 || ref === 202) {\n            defered.resolve(response);\n          }\n          return defered.reject(response);\n        };\n      })(this);\n      failed = (function(_this) {\n        return function(evt) {\n          return defered.reject(\"fail\");\n        };\n      })(this);\n      data = new FormData();\n      data.append('dump', file);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.upload.addEventListener(\"load\", uploadComplete, false);\n      xhr.upload.addEventListener(\"error\", uploadFailed, false);\n      xhr.upload.addEventListener(\"abort\", uploadFailed, false);\n      xhr.addEventListener(\"load\", complete, false);\n      xhr.addEventListener(\"error\", failed, false);\n      xhr.open(\"POST\", $urls.resolve(\"importer\"));\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + ($auth.getToken()));\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    service.changeLogo = function(projectId, file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('logo', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/change_logo\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeLogo = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/remove_logo\";\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.projects = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\", \"$q\", \"$translate\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"roles\", id);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"roles\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.roles = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http, $q) {\n    var service;\n    service = {};\n    service[\"do\"] = function(projectId, term) {\n      var deferredAbort, params, request, url;\n      deferredAbort = $q.defer();\n      url = $urls.resolve(\"search\");\n      params = {\n        url: url,\n        method: \"GET\",\n        timeout: deferredAbort.promise,\n        cancelable: true,\n        params: {\n          project: projectId,\n          text: term,\n          get_all: false\n        }\n      };\n      request = $http.request(params).then(function(data) {\n        return data.data;\n      });\n      request.abort = function() {\n        return deferredAbort.resolve();\n      };\n      request[\"finally\"] = function() {\n        request.abort = angular.noop;\n        return deferredAbort = request = null;\n      };\n      return request;\n    };\n    return function(instance) {\n      return instance.search = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $model, $storage, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(projectId, sprintId) {\n      return $repo.queryOne(\"milestones\", sprintId).then(function(sprint) {\n        var uses;\n        uses = sprint.user_stories;\n        uses = _.map(uses, function(u) {\n          return $model.make_model(\"userstories\", u);\n        });\n        sprint._attrs.user_stories = uses;\n        return sprint;\n      });\n    };\n    service.stats = function(projectId, sprintId) {\n      return $repo.queryOneRaw(\"milestones\", sprintId + \"/stats\");\n    };\n    service.list = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"milestones\", params, {}, true).then((function(_this) {\n        return function(result) {\n          var headers, i, len, m, milestones, uses;\n          milestones = result[0];\n          headers = result[1];\n          for (i = 0, len = milestones.length; i < len; i++) {\n            m = milestones[i];\n            uses = m.user_stories;\n            uses = _.map(uses, function(u) {\n              return $model.make_model(\"userstories\", u);\n            });\n            m._attrs.user_stories = uses;\n          }\n          return {\n            milestones: milestones,\n            closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\n            open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\n          };\n        };\n      })(this));\n    };\n    service.moveUserStoriesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveTasksMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveIssuesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.sprints = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSprintsResourcesProvider\", [\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"swimlanes\", params);\n    };\n    service.create = function(projectId, name, order) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      params = {\n        project: projectId,\n        name: name\n      };\n      if (order) {\n        params.order = order;\n      }\n      return $http.post(url, params);\n    };\n    service.edit = function(swimlaneId, name) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        name: name\n      };\n      return $http.patch(url, params);\n    };\n    service.bulkUpdateOrder = function(project, swimlanesOrder) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/bulk_update_order\";\n      params = {\n        project: project,\n        bulk_swimlanes: swimlanesOrder\n      };\n      return $http.post(url, params);\n    };\n    service.wipLimitUpdate = function(swimlaneId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"swimlane-userstory-statuses\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service[\"delete\"] = function(swimlaneId, moveTo) {\n      var url;\n      url = $urls.resolve(\"swimlanes\");\n      if (moveTo) {\n        url = url + \"/\" + swimlaneId + \"?moveTo=\" + moveTo;\n      } else {\n        url = url + \"/\" + swimlaneId;\n      }\n      return $http[\"delete\"](url);\n    };\n    return function(instance) {\n      return instance.swimlanes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSwimlanesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, hashSuffixStatusColumnModes, hashSuffixUsRowModes, service;\n    service = {};\n    hashSuffix = \"tasks-queryparams\";\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\";\n    hashSuffixUsRowModes = \"tasks-usrowmodels\";\n    service.get = function(projectId, taskId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", taskId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"tasks\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"task-filters\", null, params);\n    };\n    service.list = function(projectId, sprintId, userStoryId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      if (userStoryId == null) {\n        userStoryId = null;\n      }\n      params = _.merge(params, {\n        project: projectId,\n        order_by: 'us_order'\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      if (userStoryId) {\n        params.user_story = userStoryId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"tasks\", params);\n    };\n    service.bulkCreate = function(projectId, sprintId, usId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-tasks\");\n      params = {\n        project_id: projectId,\n        milestone_id: sprintId,\n        us_id: usId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params).then(function(result) {\n        return result.data;\n      });\n    };\n    service.upvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-upvote\", taskId);\n      return $http.post(url);\n    };\n    service.downvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-downvote\", taskId);\n      return $http.post(url);\n    };\n    service.watch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-watch\", taskId);\n      return $http.post(url);\n    };\n    service.unwatch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-unwatch\", taskId);\n      return $http.post(url);\n    };\n    service.bulkUpdateTaskTaskboardOrder = function(projectId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-taskboard-order\");\n      params = {\n        project_id: projectId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = $urls.resolve(\"tasks\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return $http.patch(url, data, null, options).then(function(result) {\n        return result.data;\n      });\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeUsRowModes = function(projectId, sprintId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getUsRowModes = function(projectId, sprintId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.promoteToUserStory = function(taskId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-task-to-us\", taskId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.tasks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"user-project-settings\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"user-project-settings\", params);\n    };\n    return function(instance) {\n      return instance.userProjectSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $q) {\n    var service;\n    service = {};\n    service.changeAvatar = function(file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('avatar', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"users\")) + \"/change_avatar\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeAvatar = function() {\n      var url;\n      url = ($urls.resolve(\"users\")) + \"/remove_avatar\";\n      return $http.post(url);\n    };\n    service.changePassword = function(currentPassword, newPassword) {\n      var data, url;\n      url = ($urls.resolve(\"users\")) + \"/change_password\";\n      data = {\n        current_password: currentPassword,\n        password: newPassword\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.userSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($http, $urls) {\n    var service;\n    service = {};\n    service.contacts = function(userId, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = $urls.resolve(\"user-contacts\", userId);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return $http.get(url, {}, httpOptions).then(function(result) {\n        return result.data;\n      });\n    };\n    return function(instance) {\n      return instance.users = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, hashShowTags, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  hashShowTags = 'backlog-tags';\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"userstories-queryparams\";\n    service.get = function(projectId, usId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", usId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"userstories\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"userstories-filters\", null, params);\n    };\n    service.listUnassigned = function(projectId, filters, pageSize) {\n      var params;\n      params = {\n        \"project\": projectId,\n        \"milestone\": \"null\"\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", _.extend(params, {\n        page_size: pageSize\n      }), {\n        enablePagination: true\n      }, true);\n    };\n    service.listAll = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", params);\n    };\n    service.bulkCreate = function(projectId, status, bulk, swimlane) {\n      var data, url;\n      data = {\n        project_id: projectId,\n        status_id: status,\n        bulk_stories: bulk,\n        swimlane_id: swimlane\n      };\n      url = $urls.resolve(\"bulk-create-us\");\n      return $http.post(url, data);\n    };\n    service.upvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-upvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.downvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-downvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.watch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-watch\", userStoryId);\n      return $http.post(url);\n    };\n    service.unwatch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-unwatch\", userStoryId);\n      return $http.post(url);\n    };\n    service.bulkUpdateBacklogOrder = function(projectId, milestoneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-backlog-order\");\n      params = {\n        project_id: projectId,\n        bulk_userstories: bulkUserstories\n      };\n      if (milestoneId) {\n        params.milestone_id = milestoneId;\n      }\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateKanbanOrder = function(projectId, statusId, swimlaneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-kanban-order\");\n      params = {\n        project_id: projectId,\n        status_id: statusId,\n        bulk_userstories: bulkUserstories\n      };\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      if (swimlaneId) {\n        params.swimlane_id = swimlaneId;\n      }\n      return $http.post(url, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.editStatus = function(statusId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"userstory-statuses\");\n      url = url + \"/\" + statusId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.userstories = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(webhookId) {\n      var params;\n      params = {\n        webhook: webhookId\n      };\n      return $repo.queryMany(\"webhooklogs\", params);\n    };\n    service.resend = function(webhooklogId) {\n      var url;\n      url = $urls.resolve(\"webhooklogs-resend\", webhooklogId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooklogs = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"webhooks\", params);\n    };\n    service.test = function(webhookId) {\n      var url;\n      url = $urls.resolve(\"webhooks-test\", webhookId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(wikiId) {\n      return $repo.queryOne(\"wiki\", wikiId);\n    };\n    service.getBySlug = function(projectId, slug) {\n      return $repo.queryOne(\"wiki\", \"by_slug?project=\" + projectId + \"&slug=\" + slug);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"wiki\", {\n        project: projectId\n      });\n    };\n    service.listLinks = function(projectId) {\n      return $repo.queryMany(\"wiki-links\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.wiki = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserChangePasswordController, UserChangePasswordDirective, debounce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserChangePasswordController = (function(superClass) {\n    extend(UserChangePasswordController, superClass);\n\n    UserChangePasswordController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\"];\n\n    function UserChangePasswordController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, translate) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.scope.sectionName = this.translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\");\n      this.scope.user = this.auth.getUser();\n    }\n\n    return UserChangePasswordController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserChangePasswordController\", UserChangePasswordController);\n\n  UserChangePasswordDirective = function($rs, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, ctrl) {\n      var form, submit, submitButton;\n      form = new checksley.Form($el.find(\"form\"));\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          if ($scope.newPassword1 !== $scope.newPassword2) {\n            $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"));\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1);\n          promise.then(function() {\n            currentLoading.finish();\n            return $confirm.notify('success');\n          });\n          return promise.then(null, function(response) {\n            currentLoading.finish();\n            return $confirm.notify('error', response.data._error_message);\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteUserDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  DeleteUserDirective = function($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, submitButton;\n      $scope.$on(\"deletelightbox:new\", function(ctx, user) {\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var currentLoading, promise;\n        currentLoading = $loading().target(submitButton).start();\n        promise = $repo.remove($scope.user);\n        promise.then(function(data) {\n          currentLoading.finish();\n          lightboxService.close($el);\n          $auth.logout();\n          return $location.path($navUrls.resolve(\"login\"));\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return console.log(\"FAIL\");\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $el.on(\"click\", \".js-confirm\", debounce(2000, function(event) {\n        event.preventDefault();\n        return submit();\n      }));\n      return submitButton = $el.find(\".js-confirm\");\n    };\n    return {\n      link: link,\n      templateUrl: \"user/lightbox/lightbox-delete-account.html\"\n    };\n  };\n\n  module.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"lightboxService\", \"$tgLoading\", DeleteUserDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserLiveNotificationsController, UserLiveNotificationsDirective, UserLiveNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserLiveNotificationsController = (function(superClass) {\n    extend(UserLiveNotificationsController, superClass);\n\n    UserLiveNotificationsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"tgErrorHandlingService\"];\n\n    function UserLiveNotificationsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserLiveNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserLiveNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController);\n\n  UserLiveNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective);\n\n  UserLiveNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.live_notify_level;\n          policy.live_notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserLiveNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaAvatarModelDirective, UserAvatarDirective, UserProfileDirective, UserSettingsController, debounce, mixOf, module, sizeFormat, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  debounce = this.taiga.debounce;\n\n  UserSettingsController = (function(superClass) {\n    extend(UserSettingsController, superClass);\n\n    UserSettingsController.$inject = [\"$scope\", \"$rootScope\", \"$tgConfig\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\", \"tgErrorHandlingService\", \"$window\"];\n\n    function UserSettingsController(scope, rootscope, config, repo, confirm, rs, params, q, location, navUrls, auth, translate, errorHandlingService, window1) {\n      var maxFileSize, promise, text;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.config = config;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.window = window1;\n      this.scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\";\n      this.scope.project = {};\n      this.scope.user = this.auth.getUser();\n      if (!this.scope.user) {\n        this.errorHandlingService.permissionDenied();\n      } else {\n        this.scope.lang = this.getLan();\n        this.scope.theme = this.getTheme();\n      }\n      maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize) {\n        text = this.translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\n          \"maxFileSize\": sizeFormat(maxFileSize)\n        });\n        this.scope.maxFileSizeMsg = text;\n      }\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserSettingsController.prototype.loadInitialData = function() {\n      var compiledThemes;\n      compiledThemes = window._taigaAvailableThemes;\n      this.scope.availableThemes = this.config.get(\"themes\", []).filter((function(_this) {\n        return function(theme) {\n          return compiledThemes.includes(theme);\n        };\n      })(this));\n      return this.rs.locales.list().then((function(_this) {\n        return function(locales) {\n          _this.scope.locales = locales;\n          return locales;\n        };\n      })(this));\n    };\n\n    UserSettingsController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.user);\n    };\n\n    UserSettingsController.prototype.getLan = function() {\n      return this.scope.user.lang || this.translate.preferredLanguage();\n    };\n\n    UserSettingsController.prototype.getTheme = function() {\n      var compiledThemes, theme;\n      compiledThemes = window._taigaAvailableThemes;\n      theme = this.scope.user.theme || this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!compiledThemes.includes(theme)) {\n        theme = \"taiga\";\n      }\n      return theme;\n    };\n\n    UserSettingsController.prototype.exportProfile = function() {\n      var onError, onSuccess;\n      onSuccess = function(result) {\n        var dumpUrl;\n        dumpUrl = result.data.url;\n        return this.window.open(dumpUrl, \"_blank\");\n      };\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.exportProfile().then(onSuccess, onError);\n    };\n\n    UserSettingsController.prototype.verifyEmail = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function(result) {\n          var text;\n          text = _this.translate.instant(\"USER_PROFILE.VERIFY_EMAIL_SUCCESS\");\n          return _this.confirm.notify(\"success\", text);\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.sendVerificationEmail().then(onSuccess, onError);\n    };\n\n    return UserSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserSettingsController\", UserSettingsController);\n\n  UserProfileDirective = function($confirm, $auth, $repo, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var changeEmail, form, onError, onSuccess;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          changeEmail = $scope.user.isAttributeModified(\"email\");\n          $scope.user.lang = $scope.lang;\n          $scope.user.theme = $scope.theme;\n          onSuccess = function(data) {\n            var text;\n            $auth.setUser(data);\n            if (changeEmail) {\n              text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\");\n              return $confirm.success(text);\n            } else {\n              return $confirm.notify('success');\n            }\n          };\n          onError = function(data) {\n            form.setErrors(data);\n            return $confirm.notify('error', data._error_message);\n          };\n          return $repo.save($scope.user).then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective]);\n\n  UserAvatarDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").removeClass(\"hidden\");\n      };\n      onSuccess = function(response) {\n        var user;\n        user = $model.make_model(\"users\", response.data);\n        $auth.setUser(user);\n        $scope.user = user;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-avatar\", function(e) {\n        e.preventDefault();\n        return $el.find(\"#avatar-field\").click();\n      });\n      $el.on(\"change\", \"#avatar-field\", function(event) {\n        if ($scope.avatarAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-gravatar\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.userSettings.removeAvatar().then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective]);\n\n  TaigaAvatarModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgAvatarModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserSettingsNavigationDirective, module;\n\n  UserSettingsNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgUserSettingsNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#usersettingsmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaUserSettings\");\n\n  module.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserNotificationsController, UserNotificationsDirective, UserNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserNotificationsController = (function(superClass) {\n    extend(UserNotificationsController, superClass);\n\n    UserNotificationsController.$inject = [\"$scope\", \"$tgConfirm\", \"$tgResources\", \"$tgAuth\", \"$tgConfig\", \"tgResources\", \"tgCurrentUserService\", \"$translate\"];\n\n    function UserNotificationsController(scope, confirm, rs, auth, config, resources, currentUserService, translate) {\n      var promise;\n      this.scope = scope;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.auth = auth;\n      this.config = config;\n      this.resources = resources;\n      this.currentUserService = currentUserService;\n      this.translate = translate;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.isSaas = this.config.get(\"isSaas\");\n      this.onPremiseSubscribed = false;\n      this.loadPremise = false;\n    }\n\n    UserNotificationsController.prototype.subscribed = function() {\n      this.loadPremise = true;\n      return this.resources.onPremise.subscribeOnPremiseNewsletter({\n        \"email\": this.currentUserService.getUser().get('email'),\n        \"full_name\": this.currentUserService.getUser().get('full_name'),\n        \"origin_form\": 'Newsletter sign-up settings'\n      }).then((function(_this) {\n        return function() {\n          var text;\n          text = _this.translate.instant(\"PROJECT.NEWSLETTER_OPENING.SAVED_PREFERENCE\");\n          _this.confirm.notify(\"success\", \"Your preferences have been save successfully\");\n          _this.onPremiseSubscribed = true;\n          _this.loadPremise = false;\n          return _this.resources.user.getUserStorage('dont_ask_premise_newsletter').then(function(storageState) {\n            return _this.resources.user.setUserStorage('dont_ask_premise_newsletter', true);\n          })[\"catch\"](function(storageError) {\n            if (storageError.status = 404) {\n              return _this.resources.user.createUserStorage('dont_ask_premise_newsletter', false);\n            }\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this.confirm.notify(\"light-error\", \"\");\n          return _this.loadPremise = false;\n        };\n      })(this));\n    };\n\n    UserNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserNotificationsController\", UserNotificationsController);\n\n  UserNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotifications\", UserNotificationsDirective);\n\n  UserNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.notify_level;\n          policy.notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserProjectSettingsController, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserProjectSettingsController = (function(superClass) {\n    extend(UserProjectSettingsController, superClass);\n\n    UserProjectSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$tgSections\", \"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"tgCurrentUserService\"];\n\n    function UserProjectSettingsController(rootScope, scope, tgSections, rs, repo, confirm, currentUserService) {\n      var promise;\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.tgSections = tgSections;\n      this.rs = rs;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.currentUserService = currentUserService;\n      this.scope.sections = this.tgSections.list();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserProjectSettingsController.prototype.loadInitialData = function() {\n      return this.rs.userProjectSettings.list().then((function(_this) {\n        return function(userProjectSettings) {\n          return _this.scope.userProjectSettings = userProjectSettings;\n        };\n      })(this));\n    };\n\n    UserProjectSettingsController.prototype.updateCustomHomePage = function(projectSettings) {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.currentUserService.loadProjects();\n          _this.rootScope.$broadcast(\"dropdown-project-list:updated\");\n          return _this.confirm.notify(\"success\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.repo.save(projectSettings).then(onSuccess, onError);\n    };\n\n    UserProjectSettingsController.prototype.filteredSections = function(projectSettings) {\n      return _.filter(this.scope.sections, function(section) {\n        var ref;\n        return ref = section.id, indexOf.call(projectSettings.allowed_sections, ref) >= 0;\n      });\n    };\n\n    return UserProjectSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserProjectSettingsController\", UserProjectSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserWebNotificationsController, UserWebNotificationsDirective, UserWebNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserWebNotificationsController = (function(superClass) {\n    extend(UserWebNotificationsController, superClass);\n\n    UserWebNotificationsController.$inject = [\"$scope\", \"$tgResources\", \"$tgAuth\"];\n\n    function UserWebNotificationsController(scope, rs, auth) {\n      var promise;\n      this.scope = scope;\n      this.rs = rs;\n      this.auth = auth;\n      this.scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserWebNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserWebNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserWebNotificationsController\", UserWebNotificationsController);\n\n  UserWebNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective);\n\n  UserWebNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"check\\\" data-index=\\\"<%- index %>\\\">\\n      <input type=\\\"checkbox\\\"\\n        <% if(notifyPolicy.web_notify_level) { %> checked=\\\"checked\\\" <% } %>\\n        name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-<%- notifyPolicy.id %>\\\"/>\\n      <div></div>\\n      <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n      <span class=\\\"check-text check-no\\\"\\\" translate=\\\"COMMON.NO\\\"></span>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"click\", \".check\", function(event) {\n          var onError, onSuccess, policy, policyIndex, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          policy.web_notify_level = !policy.web_notify_level;\n          onSuccess = function() {\n            $confirm.notify(\"success\");\n            return target.find(\"input\").prop(\"checked\", policy.web_notify_level);\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaComponents\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaDiscover\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaExternalApps\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaHome\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNavigationBar\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNotifications\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProfile\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaProjects\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaResources2\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaUserTimeline\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUtils\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaWikiHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimatedCounter;\n\n  AnimatedCounter = function() {\n    var link, template;\n    template = \"<div\\n    ng-class=\\\"{'wip-amount': data.wip, 'limit-over': data.count > data.wip}\\\"\\n    class=\\\"animated-counter-inner\\\">\\n    <div class=\\\"counter-translator\\\">\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextUp.current || 0 }}</span><span ng-if=\\\"nextUp.wip\\\"> / {{ nextUp.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ renderCount.current || 0 }}</span><span ng-if=\\\"renderCount.wip\\\"> / {{ renderCount.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextDown.current || 0 }}</span><span ng-if=\\\"nextDown.wip\\\"> / {{ nextDown.wip }}</span>\\n        </div>\\n    </div>\\n</div>\";\n    link = function($scope, $el, $attrs) {\n      var counter, initialLoad, lastCount, renderData, transitionEnd, unwatch;\n      transitionEnd = function(event) {\n        return $scope.$evalAsync((function(_this) {\n          return function() {\n            if ($scope.nextUp !== void 0) {\n              $scope.renderCount = $scope.nextUp;\n            } else {\n              $scope.renderCount = $scope.nextDown;\n            }\n            return $(counter).removeClass('inc dec');\n          };\n        })(this));\n      };\n      counter = $el.find('.counter-translator');\n      counter.on('transitionend', transitionEnd);\n      initialLoad = false;\n      lastCount = void 0;\n      unwatch = $scope.$on('kanban:userstories:loaded', function() {\n        initialLoad = true;\n        return unwatch();\n      });\n      renderData = function(data) {\n        var getCounter;\n        getCounter = (function(_this) {\n          return function(num) {\n            return {\n              current: num,\n              wip: data.wip\n            };\n          };\n        })(this);\n        $scope.nextUp = void 0;\n        $scope.nextDown = void 0;\n        if (!$scope.data || $scope.data.count === void 0) {\n          lastCount = 0;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        } else if (lastCount === $scope.data.count) {\n          return;\n        } else if (!initialLoad || lastCount === void 0) {\n          lastCount = $scope.data.count;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        }\n        if ($scope.data.count > lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextUp = getCounter($scope.data.count);\n        } else if ($scope.data.count < lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextDown = getCounter($scope.data.count);\n        }\n        if ($scope.nextUp !== void 0 || $scope.nextDown !== void 0) {\n          counter.removeClass('inc dec');\n          return $scope.$evalAsync((function(_this) {\n            return function() {\n              if ($scope.nextUp !== void 0) {\n                return counter.addClass('inc');\n              } else if ($scope.nextDown !== void 0) {\n                return counter.addClass('dec');\n              }\n            };\n          })(this));\n        }\n      };\n      $scope.$watch('disabled', function(disabled) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData($scope.data);\n      });\n      $scope.$watch('data', function(data) {\n        if ($scope.disabled) {\n          return;\n        }\n        return renderData(data);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return counter.off();\n      });\n    };\n    return {\n      link: link,\n      template: template,\n      scope: {\n        data: '<',\n        disabled: '<'\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAnimatedCounter\", [AnimatedCounter]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToInlineDirective;\n\n  AssignedToInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attr, $model) {\n      var isEditable, renderUser, renderUserList;\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attr.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      renderUserList = function(text) {\n        var selectedId, users, visibleUsers;\n        selectedId = $model.$modelValue.assigned_to;\n        users = $userListService.searchUsers(text);\n        if (selectedId) {\n          users = _.reject(users, {\n            \"id\": selectedId\n          });\n        }\n        visibleUsers = _.slice(users, 0, 5);\n        visibleUsers = _.map(visibleUsers, function(user) {\n          return user.avatar = avatarService.getAvatar(user);\n        });\n        $scope.users = _.slice(users, 0, 5);\n        return $scope.showMore = users.length > 5;\n      };\n      renderUser = function(assignedObject) {\n        var assigned_to_extra_info;\n        if (assignedObject != null ? assignedObject.assigned_to : void 0) {\n          $scope.selected = assignedObject.assigned_to;\n          assigned_to_extra_info = $scope.usersById[$scope.selected];\n          $scope.fullName = assigned_to_extra_info != null ? assigned_to_extra_info.full_name_display : void 0;\n          $scope.isUnassigned = false;\n          $scope.avatar = avatarService.getAvatar(assigned_to_extra_info);\n          $scope.bg = $scope.avatar.bg;\n          $scope.isIocaine = assignedObject != null ? assignedObject.is_iocaine : void 0;\n        } else {\n          $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\");\n          $scope.isUnassigned = true;\n          $scope.avatar = avatarService.getAvatar(null);\n          $scope.bg = null;\n          $scope.isIocaine = false;\n        }\n        $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated());\n        return $scope.isEditable = isEditable();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = \"\";\n        renderUserList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.selfAssign = function() {\n        $model.$modelValue.assigned_to = $currentUserService.getUser().get('id');\n        return renderUser($model.$modelValue);\n      };\n      $scope.unassign = function() {\n        $model.$modelValue.assigned_to = null;\n        return renderUser();\n      };\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUserList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        $model.$modelValue.assigned_to = target.data(\"user-id\");\n        renderUser($model.$modelValue);\n        return $scope.$apply();\n      });\n      $scope.$watch($attr.ngModel, function(instance) {\n        return renderUser(instance);\n      });\n      $scope.$on(\"isiocaine:changed\", function(ctx, instance) {\n        return renderUser(instance);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-to-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersInlineDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var applyToModel, currentAssignedIds, currentAssignedTo, isAssigned, renderUsers, renderUsersList;\n      currentAssignedIds = [];\n      currentAssignedTo = null;\n      isAssigned = function() {\n        return currentAssignedIds.length > 0;\n      };\n      renderUsersList = function(text) {\n        var selected, users, visible;\n        users = $userListService.searchUsers(text);\n        selected = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) >= 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return selected.push(user);\n          }\n        });\n        visible = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) < 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return visible.push(user);\n          }\n        });\n        $scope.selected = _.slice(selected, 0, 5);\n        if ($scope.selected.length < 5) {\n          $scope.users = _.slice(visible, 0, 5 - $scope.selected.length);\n        } else {\n          $scope.users = [];\n        }\n        return $scope.showMore = users.length > 5;\n      };\n      renderUsers = function() {\n        var assignedUsers;\n        assignedUsers = _.map(currentAssignedIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        assignedUsers = _.filter(assignedUsers, function(it) {\n          return !!it;\n        });\n        $scope.hiddenUsers = currentAssignedIds.length > 3 ? currentAssignedIds.length - 3 : 0;\n        $scope.assignedUsers = _.slice(assignedUsers, 0, 3);\n        return $scope.isAssigned = isAssigned();\n      };\n      applyToModel = function() {\n        _.map(currentAssignedIds, function(userId) {\n          if (!$scope.usersById[userId]) {\n            return currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1);\n          }\n        });\n        if (currentAssignedIds.length === 0) {\n          currentAssignedTo = null;\n        } else if (currentAssignedIds.indexOf(currentAssignedTo) === -1 || !currentAssignedTo) {\n          currentAssignedTo = currentAssignedIds[0];\n        }\n        if (!$model.$modelValue.assigned_users) {\n          $model.$modelValue.assigned_users = currentAssignedIds;\n        } else {\n          $model.$modelValue.setAttr('assigned_users', currentAssignedIds);\n        }\n        return $model.$modelValue.assigned_to = currentAssignedTo;\n      };\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = null;\n        renderUsersList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.assign = function(user) {\n        currentAssignedIds.push(user.id);\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.selfAssign = function() {\n        currentAssignedIds.push($currentUserService.getUser().get('id'));\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.unassign = function(user) {\n        var index;\n        index = currentAssignedIds.indexOf(user.id);\n        currentAssignedIds.splice(index, 1);\n        renderUsers();\n        return applyToModel();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUsersList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $scope.$watch($attrs.ngModel, function(item) {\n        var assigned_to;\n        if (item == null) {\n          return;\n        }\n        currentAssignedIds = [];\n        assigned_to = null;\n        if (item.assigned_users != null) {\n          currentAssignedIds = item.assigned_users;\n        }\n        assigned_to = item.assigned_to;\n        return renderUsers();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentLinkDirective;\n\n  AttachmentLinkDirective = function($parse, attachmentsPreviewService, lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attachment;\n      attachment = $parse(attrs.tgAttachmentLink)(scope);\n      el.on(\"click\", function(event) {\n        if (taiga.isImage(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return scope.$apply(function() {\n            lightboxService.open($('tg-attachments-preview'));\n            return attachmentsPreviewService.fileId = attachment.getIn(['file', 'id']);\n          });\n        } else if (taiga.isPdf(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return window.open(attachment.getIn(['file', 'url']));\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentLinkDirective.$inject = [\"$parse\", \"tgAttachmentsPreviewService\", \"lightboxService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentGalleryDirective;\n\n  AttachmentGalleryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment-gallery.html\",\n      link: link\n    };\n  };\n\n  AttachmentGalleryDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentController;\n\n  AttachmentController = (function() {\n    AttachmentController.$inject = ['tgAttachmentsService', '$translate'];\n\n    function AttachmentController(attachmentsService, translate) {\n      this.attachmentsService = attachmentsService;\n      this.translate = translate;\n      this.form = {};\n      this.form.description = this.attachment.getIn(['file', 'description']);\n      this.form.is_deprecated = this.attachment.get(['file', 'is_deprecated']);\n      this.title = this.translate.instant(\"ATTACHMENT.TITLE\", {\n        fileName: this.attachment.get('name'),\n        date: moment(this.attachment.get('created_date')).format(this.translate.instant(\"ATTACHMENT.DATE\"))\n      });\n    }\n\n    AttachmentController.prototype.editMode = function(mode) {\n      var attachment;\n      attachment = this.attachment.set('editable', mode);\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    AttachmentController.prototype[\"delete\"] = function() {\n      return this.onDelete({\n        attachment: this.attachment\n      });\n    };\n\n    AttachmentController.prototype.save = function() {\n      var attachment;\n      attachment = this.attachment.set('loading', true);\n      this.onUpdate({\n        attachment: attachment\n      });\n      attachment = this.attachment.merge({\n        editable: false,\n        loading: false\n      });\n      attachment = attachment.mergeIn(['file'], {\n        description: this.form.description,\n        is_deprecated: !!this.form.is_deprecated\n      });\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    return AttachmentController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Attachment', AttachmentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentDirective;\n\n  AttachmentDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment.html\",\n      link: link\n    };\n  };\n\n  AttachmentDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsDropDirective;\n\n  AttachmentsDropDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgAttachmentsDrop);\n      el.on('dragover', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.add('attachment-dragover');\n        return false;\n      });\n      el.on('dragleave', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        return false;\n      });\n      el.on('drop', function(e) {\n        var dataTransfer;\n        e.stopPropagation();\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer);\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: dataTransfer.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentsDropDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullController, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsFullController = (function() {\n    AttachmentsFullController.$inject = [\"$translate\", \"$tgConfirm\", \"$tgConfig\", \"$tgStorage\", \"tgAttachmentsFullService\", \"tgProjectService\", \"tgAttachmentsPreviewService\"];\n\n    function AttachmentsFullController(translate, confirm, config, storage, attachmentsFullService, projectService, attachmentsPreviewService) {\n      this.translate = translate;\n      this.confirm = confirm;\n      this.config = config;\n      this.storage = storage;\n      this.attachmentsFullService = attachmentsFullService;\n      this.projectService = projectService;\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      this.mode = this.storage.get('attachment-mode', 'list');\n      this.maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (this.maxFileSize) {\n        this.maxFileSize = sizeFormat(this.maxFileSize);\n      }\n      this.maxFileSizeMsg = this.maxFileSize ? this.translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {\n        maxFileSize: this.maxFileSize\n      }) : \"\";\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullController.prototype.uploadingAttachments = function() {\n      return this.attachmentsFullService.uploadingAttachments;\n    };\n\n    AttachmentsFullController.prototype.addAttachment = function(file) {\n      var editable;\n      editable = this.mode === 'list';\n      return this.attachmentsFullService.addAttachment(this.projectId, this.objId, this.type, file, editable);\n    };\n\n    AttachmentsFullController.prototype.setMode = function(mode) {\n      this.mode = mode;\n      return this.storage.set('attachment-mode', mode);\n    };\n\n    AttachmentsFullController.prototype.toggleDeprecatedsVisible = function() {\n      return this.attachmentsFullService.toggleDeprecatedsVisible();\n    };\n\n    AttachmentsFullController.prototype.addAttachments = function(files) {\n      return _.forEach(files, (function(_this) {\n        return function(file) {\n          return _this.addAttachment(file);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments(this.type, this.objId, this.projectId);\n    };\n\n    AttachmentsFullController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      var message, title;\n      this.attachmentsPreviewService.fileId = null;\n      title = this.translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\");\n      message = this.translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\n        fileName: toDeleteAttachment.getIn(['file', 'name'])\n      });\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onError = function() {\n            message = _this.translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            return askResponse.finish();\n          };\n          return _this.attachmentsFullService.deleteAttachment(toDeleteAttachment, _this.type).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.reorderAttachment = function(attachment, newIndex) {\n      return this.attachmentsFullService.reorderAttachment(this.objId, this.type, attachment, newIndex);\n    };\n\n    AttachmentsFullController.prototype.updateAttachment = function(toUpdateAttachment) {\n      return this.attachmentsFullService.updateAttachment(toUpdateAttachment, this.type);\n    };\n\n    AttachmentsFullController.prototype._isEditable = function() {\n      if (this.projectService.project) {\n        return this.projectService.hasPermission(this.editPermission);\n      }\n      return false;\n    };\n\n    AttachmentsFullController.prototype.showAttachments = function() {\n      return this._isEditable() || this.attachmentsFullService.attachments.size;\n    };\n\n    return AttachmentsFullController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  AttachmentsFullDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        type: \"@\",\n        objId: \"=\",\n        projectId: \"=\",\n        editPermission: \"@\"\n      },\n      controller: \"AttachmentsFull\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-full/attachments-full.html\",\n      link: link\n    };\n  };\n\n  AttachmentsFullDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsFullService = (function(superClass) {\n    extend(AttachmentsFullService, superClass);\n\n    AttachmentsFullService.$inject = [\"tgAttachmentsService\", \"$rootScope\", \"$q\"];\n\n    function AttachmentsFullService(attachmentsService, rootScope, q) {\n      this.attachmentsService = attachmentsService;\n      this.rootScope = rootScope;\n      this.q = q;\n      this._attachments = Immutable.List();\n      this._deprecatedsCount = 0;\n      this._attachmentsVisible = Immutable.List();\n      this._deprecatedsVisible = false;\n      this.uploadingAttachments = [];\n      this.types = this.attachmentsService.types;\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this._attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this._deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this._attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this._deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullService.prototype.toggleDeprecatedsVisible = function() {\n      this._deprecatedsVisible = !this._deprecatedsVisible;\n      return this.regenerate();\n    };\n\n    AttachmentsFullService.prototype.regenerate = function() {\n      this._deprecatedsCount = this._attachments.count(function(it) {\n        return it.getIn(['file', 'is_deprecated']);\n      });\n      if (this._deprecatedsVisible) {\n        return this._attachmentsVisible = this._attachments;\n      } else {\n        return this._attachmentsVisible = this._attachments.filter(function(it) {\n          return !it.getIn(['file', 'is_deprecated']);\n        });\n      }\n    };\n\n    AttachmentsFullService.prototype.addAttachment = function(projectId, objId, type, file, editable, comment) {\n      if (editable == null) {\n        editable = true;\n      }\n      if (comment == null) {\n        comment = false;\n      }\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          var promise;\n          if (_this.attachmentsService.validate(file)) {\n            _this.uploadingAttachments.push(file);\n            promise = _this.attachmentsService.upload(file, objId, projectId, type, comment);\n            return promise.then(function(file) {\n              var attachment;\n              _this.uploadingAttachments = _this.uploadingAttachments.filter(function(uploading) {\n                return uploading.name !== file.get('name');\n              });\n              attachment = Immutable.Map();\n              attachment = attachment.merge({\n                file: file,\n                editable: editable,\n                loading: false,\n                from_comment: comment\n              });\n              _this._attachments = _this._attachments.push(attachment);\n              _this.regenerate();\n              _this.rootScope.$broadcast(\"attachment:create\");\n              return resolve(attachment);\n            });\n          } else {\n            return reject(new Error(file));\n          }\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.loadAttachments = function(type, objId, projectId) {\n      return this.attachmentsService.list(type, objId, projectId).then((function(_this) {\n        return function(files) {\n          _this._attachments = files.map(function(file) {\n            var attachment;\n            attachment = Immutable.Map();\n            return attachment.merge({\n              loading: false,\n              editable: false,\n              file: file\n            });\n          });\n          _this.rootScope.$broadcast(\"attachments:loaded\", _this._attachments);\n          return _this.regenerate();\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.deleteAttachment = function(toDeleteAttachment, type) {\n      var onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this._attachments = _this._attachments.filter(function(attachment) {\n            return attachment !== toDeleteAttachment;\n          });\n          return _this.regenerate();\n        };\n      })(this);\n      return this.attachmentsService[\"delete\"](type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess);\n    };\n\n    AttachmentsFullService.prototype.reorderAttachment = function(objectId, type, attachment, newIndex) {\n      var afterAttachmentId, attachments, oldIndex, previousAttachment;\n      oldIndex = this.attachments.findIndex(function(it) {\n        return it === attachment;\n      });\n      attachments = this.attachments.remove(oldIndex);\n      attachments = attachments.splice(newIndex, 0, attachment);\n      attachments = attachments.map(function(x, i) {\n        return x.setIn(['file', 'order'], i + 1);\n      });\n      this._attachments = attachments;\n      this.regenerate();\n      afterAttachmentId = null;\n      if (newIndex > 0) {\n        previousAttachment = this.attachments.get(newIndex - 1);\n        afterAttachmentId = previousAttachment.getIn(['file', 'id']);\n      }\n      return this.attachmentsService.bulkUpdateOrder(objectId, type, afterAttachmentId, [attachment.getIn(['file', 'id'])]);\n    };\n\n    AttachmentsFullService.prototype.updateAttachment = function(toUpdateAttachment, type) {\n      var index, oldAttachment, patch;\n      index = this._attachments.findIndex(function(attachment) {\n        return attachment.getIn(['file', 'id']) === toUpdateAttachment.getIn(['file', 'id']);\n      });\n      oldAttachment = this._attachments.get(index);\n      patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'));\n      if (toUpdateAttachment.get('loading')) {\n        return this.setAttachments(index, toUpdateAttachment);\n      } else {\n        if (_.isEmpty(patch)) {\n          return this.setAttachments(index, toUpdateAttachment);\n        } else {\n          return this.attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then((function(_this) {\n            return function() {\n              return _this.setAttachments(index, toUpdateAttachment);\n            };\n          })(this));\n        }\n      }\n    };\n\n    AttachmentsFullService.prototype.setAttachments = function(index, toUpdateAttachment) {\n      this._attachments = this._attachments.set(index, toUpdateAttachment);\n      return this.regenerate();\n    };\n\n    return AttachmentsFullService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewController;\n\n  AttachmentsPreviewController = (function() {\n    AttachmentsPreviewController.$inject = [\"tgAttachmentsPreviewService\"];\n\n    function AttachmentsPreviewController(attachmentsPreviewService) {\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      taiga.defineImmutableProperty(this, \"current\", (function(_this) {\n        return function() {\n          if (!_this.attachmentsPreviewService.fileId) {\n            return null;\n          }\n          return _this.getCurrent();\n        };\n      })(this));\n    }\n\n    AttachmentsPreviewController.prototype.hasPagination = function() {\n      var images;\n      images = this.attachments.filter((function(_this) {\n        return function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        };\n      })(this));\n      return images.size > 1;\n    };\n\n    AttachmentsPreviewController.prototype.getCurrent = function() {\n      var attachment, file;\n      attachment = this.attachments.find((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n      if (!attachment) {\n        return null;\n      }\n      file = attachment.get('file');\n      return file;\n    };\n\n    AttachmentsPreviewController.prototype.getIndex = function() {\n      return this.attachments.findIndex((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n    };\n\n    AttachmentsPreviewController.prototype.next = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(attachmentIndex + 1).find(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.find(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    AttachmentsPreviewController.prototype.previous = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(0, attachmentIndex).findLast(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.findLast(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    return AttachmentsPreviewController;\n\n  })();\n\n  angular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentPreviewLightboxDirective;\n\n  AttachmentPreviewLightboxDirective = function(lightboxService, attachmentsPreviewService) {\n    var link;\n    link = function($scope, el, attrs, ctrl) {\n      $(document.body).on(\"keydown.image-preview\", function(e) {\n        if (attachmentsPreviewService.fileId) {\n          if (e.keyCode === 39) {\n            ctrl.next();\n          } else if (e.keyCode === 37) {\n            ctrl.previous();\n          }\n        }\n        return $scope.$digest();\n      });\n      return $scope.$on('$destroy', function() {\n        return $(document.body).off('.image-preview');\n      });\n    };\n    return {\n      scope: {},\n      controller: 'AttachmentsPreview',\n      templateUrl: 'components/attachments-preview/attachments-preview.html',\n      link: link,\n      controllerAs: \"vm\",\n      bindToController: {\n        attachments: \"=\"\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\"lightboxService\", \"tgAttachmentsPreviewService\", AttachmentPreviewLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsPreviewService = (function(superClass) {\n    extend(AttachmentsPreviewService, superClass);\n\n    AttachmentsPreviewService.$inject = [];\n\n    function AttachmentsPreviewService() {}\n\n    return AttachmentsPreviewService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleController;\n\n  AttachmentsSimpleController = (function() {\n    AttachmentsSimpleController.$inject = [\"tgAttachmentsService\"];\n\n    function AttachmentsSimpleController(attachmentsService) {\n      this.attachmentsService = attachmentsService;\n    }\n\n    AttachmentsSimpleController.prototype.addAttachment = function(file) {\n      var attachment;\n      attachment = Immutable.fromJS({\n        file: file,\n        name: file.name,\n        size: file.size\n      });\n      if (this.attachmentsService.validate(file)) {\n        this.attachments = this.attachments.push(attachment);\n        if (this.onAdd) {\n          return this.onAdd({\n            attachment: attachment\n          });\n        }\n      }\n    };\n\n    AttachmentsSimpleController.prototype.addAttachments = function(files) {\n      return _.forEach(files, this.addAttachment.bind(this));\n    };\n\n    AttachmentsSimpleController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      this.attachments = this.attachments.filter(function(attachment) {\n        return attachment !== toDeleteAttachment;\n      });\n      if (this.onDelete) {\n        return this.onDelete({\n          attachment: toDeleteAttachment\n        });\n      }\n    };\n\n    return AttachmentsSimpleController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleDirective;\n\n  AttachmentsSimpleDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        attachments: \"=\",\n        onAdd: \"&\",\n        onDelete: \"&\"\n      },\n      controller: \"AttachmentsSimple\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-simple/attachments-simple.html\",\n      link: link\n    };\n  };\n\n  AttachmentsSimpleDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentSortableDirective;\n\n  AttachmentSortableDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      callback = $parse(attrs.tgAttachmentsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div[tg-bind-scope]');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var attachment, newIndex;\n        item = $(item);\n        attachment = item.scope().attachment;\n        newIndex = item.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            attachment: attachment,\n            index: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentSortableDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AutoSelectDirective;\n\n  AutoSelectDirective = function($timeout) {\n    return {\n      link: function(scope, elm) {\n        return $timeout(function() {\n          return elm[0].select();\n        });\n      }\n    };\n  };\n\n  AutoSelectDirective.$inject = ['$timeout'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarDirective;\n\n  AvatarDirective = function(avatarService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attributeName;\n      if (attrs.tgAvatarBig) {\n        attributeName = 'avatarBig';\n      } else {\n        attributeName = 'avatar';\n      }\n      return scope.$watch(attributeName, function(user) {\n        var avatar;\n        avatar = avatarService.getAvatar(user, attributeName);\n        el.attr('src', avatar.url);\n        el.attr('title', \"\" + avatar.fullName);\n        el.attr('alt', \"\" + avatar.fullName);\n        return el.css('background', avatar.bg || \"\");\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        avatar: \"=tgAvatar\",\n        avatarBig: \"=tgAvatarBig\"\n      }\n    };\n  };\n\n  AvatarDirective.$inject = ['tgAvatarService'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective);\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BelongToEpicsDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  BelongToEpicsDirective = function($translate, $confirm, $rs, $rs2, lightboxService) {\n    var link, templateUrl;\n    link = function(scope, el, attrs) {\n      var updateEpics;\n      scope.$watch('epics', function(epics) {\n        return updateEpics(epics);\n      });\n      scope.$on(\"related-epics:changed\", function(ctx, userStory) {\n        return $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then(function(us) {\n          scope.item.epics = us.epics;\n          return updateEpics(us.epics);\n        });\n      });\n      scope.removeEpicRelationship = function(epic) {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n        message = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n          epicSubject: epic.get('subject')\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var epicId, onError, onSuccess, usId;\n          onSuccess = function() {\n            askResponse.finish();\n            return scope.$broadcast(\"related-epics:changed\", scope.item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          epicId = epic.get('id');\n          usId = scope.item.id;\n          return $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        });\n      };\n      return updateEpics = function(epics) {\n        scope.epicsLength = 0;\n        scope.immutable_epics = [];\n        if (epics && !epics.isIterable) {\n          scope.epicsLength = epics.length;\n          return scope.immutable_epics = Immutable.fromJS(epics);\n        }\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\";\n      }\n      return \"components/belong-to-epics/belong-to-epics-pill.html\";\n    };\n    return {\n      link: link,\n      scope: {\n        epics: '=',\n        item: \"=\"\n      },\n      templateUrl: templateUrl\n    };\n  };\n\n  module.directive(\"tgBelongToEpics\", [\"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\", BelongToEpicsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindCode;\n\n  BindCode = function($sce, $parse, $compile, wysiwygService) {\n    return {\n      restrict: 'A',\n      compile: function(tElement, tAttrs) {\n        var render, tgBindWysiwygHtmlGetter, tgBindWysiwygHtmlWatch;\n        tgBindWysiwygHtmlGetter = $parse(tAttrs.tgBindWysiwygHtml);\n        tgBindWysiwygHtmlWatch = $parse(tAttrs.tgBindWysiwygHtml, function(value) {\n          return (value || '').toString();\n        });\n        $compile.$$addBindingClass(tElement);\n        render = (function(_this) {\n          return function(element, html) {\n            var anchor;\n            window._extraValidHtmlElments = {\n              input: true\n            };\n            window._extraValidAttrs = {\n              checked: true\n            };\n            element.html($sce.getTrustedHtml(html) || '');\n            element[0].querySelectorAll('pre code').forEach(function(block) {\n              var blockClasses, language, match, matchResult, resultHighlight;\n              blockClasses = block.className + ' ';\n              blockClasses += block.parentNode ? block.parentNode.className : '';\n              match = /\\blang(?:uage)?-([\\w-]+)\\b/i.exec(blockClasses);\n              matchResult = 'plaintext';\n              if (match && match.length) {\n                matchResult = match[1];\n              }\n              language = hljs.getLanguage(matchResult);\n              if (language) {\n                return resultHighlight = hljs.highlightBlock(block);\n              } else {\n                return ljs.load((\"/\" + window._version + \"/highlightjs-languages/\") + matchResult + \".min.js\", function() {\n                  return hljs.highlightBlock(block);\n                });\n              }\n            });\n            anchor = element[0].querySelectorAll('a[href^=\"#\"]');\n            return anchor.forEach(function(link) {\n              return link.addEventListener('click', function(e) {\n                var node;\n                e.preventDefault();\n                node = document.querySelector(link.getAttribute('href'));\n                if (node) {\n                  return node.scrollIntoView();\n                }\n              });\n            });\n          };\n        })(this);\n        return function(scope, element, attr) {\n          $compile.$$addBindingInfo(element, attr.tgBindWysiwygHtml);\n          return scope.$watch(tgBindWysiwygHtmlWatch, function() {\n            var html;\n            html = wysiwygService.getHTML(tgBindWysiwygHtmlGetter(scope));\n            wysiwygService.refreshAttachmentURL(html).then((function(_this) {\n              return function(html) {\n                return render(element, html);\n              };\n            })(this));\n            return render(element, html);\n          });\n        };\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgBindWysiwygHtml\", [\"$sce\", \"$parse\", \"$compile\", \"tgWysiwygService\", BindCode]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BoardZoomDirective;\n\n  BoardZoomDirective = function() {\n    return {\n      scope: {\n        levels: \"=\",\n        value: \"=\"\n      },\n      templateUrl: 'components/board-zoom/board-zoom.html'\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardSlideshowController;\n\n  CardSlideshowController = (function() {\n    CardSlideshowController.$inject = [];\n\n    function CardSlideshowController() {\n      this.index = 0;\n    }\n\n    CardSlideshowController.prototype.next = function() {\n      this.index++;\n      if (this.index >= this.images.size) {\n        return this.index = 0;\n      }\n    };\n\n    CardSlideshowController.prototype.previous = function() {\n      this.index--;\n      if (this.index < 0) {\n        return this.index = this.images.size - 1;\n      }\n    };\n\n    return CardSlideshowController;\n\n  })();\n\n  angular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardSlideshowDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardSlideshowDirective = function() {\n    return {\n      controller: \"CardSlideshow\",\n      templateUrl: \"components/card-slideshow/card-slideshow.html\",\n      bindToController: true,\n      controllerAs: \"vm\",\n      scope: {\n        images: \"=\"\n      }\n    };\n  };\n\n  module.directive('tgCardSlideshow', cardSlideshowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardController;\n\n  CardController = (function() {\n    CardController.$inject = [\"$scope\"];\n\n    function CardController(scope1) {\n      this.scope = scope1;\n    }\n\n    CardController.prototype.getLinkParams = function() {\n      var ParsedLastLoadUserstoriesParams, ctrl, lastLoadUserstoriesParams;\n      ctrl = taiga.findScope(this.scope, function(scope) {\n        if (scope && scope.ctrl) {\n          return scope.ctrl;\n        }\n        return false;\n      });\n      lastLoadUserstoriesParams = ctrl.lastLoadUserstoriesParams;\n      if (lastLoadUserstoriesParams) {\n        lastLoadUserstoriesParams['status'] = this.scope.vm.item.getIn(['model', 'status']);\n        lastLoadUserstoriesParams['swimlane'] = this.scope.vm.item.getIn(['model', 'swimlane']);\n        lastLoadUserstoriesParams = _.pickBy(lastLoadUserstoriesParams, _.identity);\n        if (ctrl.scope.swimlanesList.size && !lastLoadUserstoriesParams['swimlane']) {\n          lastLoadUserstoriesParams.swimlane = \"null\";\n        }\n        ParsedLastLoadUserstoriesParams = {};\n        Object.keys(lastLoadUserstoriesParams).forEach(function(key) {\n          return ParsedLastLoadUserstoriesParams['kanban-' + key] = lastLoadUserstoriesParams[key];\n        });\n        return ParsedLastLoadUserstoriesParams;\n      } else {\n        return {};\n      }\n    };\n\n    CardController.prototype.visible = function(name) {\n      return this.zoom.indexOf(name) !== -1;\n    };\n\n    CardController.prototype.hasTasks = function() {\n      var tasks;\n      tasks = this.item.getIn(['model', 'tasks']);\n      return tasks && tasks.size > 0;\n    };\n\n    CardController.prototype.getTagColor = function(color) {\n      if (color) {\n        return color;\n      }\n      return \"#A9AABC\";\n    };\n\n    CardController.prototype.hasMultipleAssignedUsers = function() {\n      var assignedUsers;\n      assignedUsers = this.item.getIn(['model', 'assigned_users']);\n      return assignedUsers && assignedUsers.size > 1;\n    };\n\n    CardController.prototype.hasVisibleAttachments = function() {\n      return this.item.get('images').size > 0;\n    };\n\n    CardController.prototype.toggleFold = function() {\n      return this.onToggleFold({\n        id: this.item.get('id')\n      });\n    };\n\n    CardController.prototype.getClosedTasks = function() {\n      return this.item.getIn(['model', 'tasks']).filter(function(task) {\n        return task.get('is_closed');\n      });\n    };\n\n    CardController.prototype.closedTasksPercent = function() {\n      return this.getClosedTasks().size * 100 / this.item.getIn(['model', 'tasks']).size;\n    };\n\n    CardController.prototype.getModifyPermisionKey = function() {\n      if (this.type === 'task') {\n        return 'modify_task';\n      } else {\n        return 'modify_us';\n      }\n    };\n\n    CardController.prototype.getDeletePermisionKey = function() {\n      if (this.type === 'task') {\n        return 'delete_task';\n      } else {\n        return 'delete_us';\n      }\n    };\n\n    CardController.prototype._setVisibility = function() {\n      var visibility;\n      visibility = {\n        related: this.visible('related_tasks'),\n        slides: this.visible('attachments')\n      };\n      if (!_.isUndefined(this.item.get('foldStatusChanged')) && this.visible('unfold')) {\n        if (this.zoomLevel === 2) {\n          visibility.related = this.item.get('foldStatusChanged');\n          visibility.slides = this.item.get('foldStatusChanged');\n        } else {\n          visibility.related = !this.item.get('foldStatusChanged');\n          visibility.slides = !this.item.get('foldStatusChanged');\n        }\n      }\n      if (!this.item.getIn(['model', 'tasks']) || !this.item.getIn(['model', 'tasks']).size) {\n        visibility.related = false;\n      }\n      if (!this.item.get('images') || !this.item.get('images').size) {\n        visibility.slides = false;\n      }\n      return visibility;\n    };\n\n    CardController.prototype.isRelatedTasksVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.related;\n    };\n\n    CardController.prototype.isSlideshowVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.slides;\n    };\n\n    CardController.prototype.getNavKey = function() {\n      if (this.type === 'task') {\n        return 'project-tasks-detail';\n      } else if (this.type === 'issue') {\n        return 'project-issues-detail';\n      } else {\n        return 'project-userstories-detail';\n      }\n    };\n\n    return CardController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Card', CardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardDirective = function() {\n    return {\n      controller: \"Card\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/card/card.html\",\n      bindToController: {\n        onToggleFold: \"&\",\n        onClickAssignedTo: \"&\",\n        onClickEdit: \"&\",\n        onClickRemove: \"&\",\n        onClickDelete: \"&\",\n        project: \"<\",\n        item: \"<\",\n        zoom: \"<\",\n        zoomLevel: \"<\",\n        archived: \"<\",\n        inViewPort: \"<\",\n        folded: \"<\",\n        type: \"@\"\n      }\n    };\n  };\n\n  module.directive('tgCard', cardDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ClickInputFile;\n\n  ClickInputFile = function() {\n    return {\n      link: function(scope, el) {\n        el.on('click', function(e) {\n          var inputFile;\n          if (!$(e.target).is('input')) {\n            e.preventDefault();\n            inputFile = el.find('input[type=\"file\"]');\n            inputFile.val('');\n            return inputFile.trigger('click');\n          }\n        });\n        return scope.$on(\"$destroy\", function() {\n          return el.off();\n        });\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgClickInputFile\", [ClickInputFile]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorController, getDefaulColorList, taiga;\n\n  taiga = this.taiga;\n\n  getDefaulColorList = taiga.getDefaulColorList;\n\n  ColorSelectorController = (function() {\n    ColorSelectorController.$inject = [\"tgProjectService\"];\n\n    function ColorSelectorController(projectService) {\n      this.projectService = projectService;\n      this.colorList = getDefaulColorList();\n      this.checkIsColorRequired();\n      this.displayColorList = false;\n    }\n\n    ColorSelectorController.prototype.userCanChangeColor = function() {\n      if (!this.requiredPerm) {\n        return true;\n      }\n      return this.projectService.hasPermission(this.requiredPerm);\n    };\n\n    ColorSelectorController.prototype.checkIsColorRequired = function() {\n      if (!this.isColorRequired) {\n        return this.colorList = _.dropRight(this.colorList);\n      }\n    };\n\n    ColorSelectorController.prototype.setColor = function(color) {\n      this.color = color;\n      return this.customColor = color;\n    };\n\n    ColorSelectorController.prototype.resetColor = function() {\n      if (this.isColorRequired && !this.color) {\n        return this.color = this.initColor;\n      }\n    };\n\n    ColorSelectorController.prototype.toggleColorList = function() {\n      this.displayColorList = !this.displayColorList;\n      this.customColor = this.color;\n      return this.resetColor();\n    };\n\n    ColorSelectorController.prototype.onSelectDropdownColor = function(color) {\n      this.color = color;\n      this.onSelectColor({\n        color: color\n      });\n      return this.toggleColorList();\n    };\n\n    ColorSelectorController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        if (this.customColor || !this.isColorRequired) {\n          this.onSelectDropdownColor(this.customColor);\n        }\n        return event.preventDefault();\n      }\n    };\n\n    return ColorSelectorController;\n\n  })();\n\n  angular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  ColorSelectorDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var _timeout, cancel, close;\n      _timeout = null;\n      cancel = function() {\n        $timeout.cancel(_timeout);\n        return _timeout = null;\n      };\n      close = function() {\n        if (_timeout) {\n          return;\n        }\n        return _timeout = $timeout((function() {\n          ctrl.displayColorList = false;\n          return ctrl.resetColor();\n        }), 400);\n      };\n      el.find('.color-selector').mouseenter(cancel).mouseleave(close);\n      el.find('.color-selector-dropdown').mouseenter(cancel).mouseleave(close);\n      return scope.$watch('vm.initColor', function(color) {\n        return ctrl.setColor(color);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/color-selector/color-selector.html\",\n      controller: \"ColorSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        isColorRequired: \"=\",\n        onSelectColor: \"&\",\n        initColor: \"=\",\n        requiredPerm: \"@\"\n      },\n      scope: {}\n    };\n  };\n\n  ColorSelectorDirective.$inject = [\"$timeout\"];\n\n  angular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderController, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderController = (function() {\n    DetailHeaderController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\", \"$tgNavUrls\", \"$window\"];\n\n    function DetailHeaderController(rootScope, confirm, modelTransform, navUrls, window) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.navUrls = navUrls;\n      this.window = window;\n      this.editMode = false;\n      this.loadingSubject = false;\n      this.originalSubject = this.item.subject;\n      this.objType = {\n        'tasks': 'task',\n        'issues': 'issue',\n        'userstories': 'us'\n      }[this.item._name];\n    }\n\n    DetailHeaderController.prototype._checkPermissions = function() {\n      return this.permissions = {\n        canEdit: _.includes(this.project.my_permissions, this.requiredPerm)\n      };\n    };\n\n    DetailHeaderController.prototype.cancelEdit = function() {\n      this.editMode = false;\n      return this.item.subject = this.originalSubject;\n    };\n\n    DetailHeaderController.prototype.editSubject = function(value) {\n      var selection;\n      selection = this.window.getSelection();\n      if (selection.type !== \"Range\") {\n        if (value) {\n          this.editMode = true;\n        }\n        if (!value) {\n          return this.editMode = false;\n        }\n      }\n    };\n\n    DetailHeaderController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        this.saveSubject();\n      }\n      if (event.which === 27) {\n        this.item.subject = this.originalSubject;\n        return this.editSubject(false);\n      }\n    };\n\n    DetailHeaderController.prototype.saveSubject = function() {\n      var item, onEditSubjectError, onEditSubjectSuccess, transform;\n      onEditSubjectSuccess = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.confirm.notify('success');\n          return _this.originalSubject = _this.item.subject;\n        };\n      })(this);\n      onEditSubjectError = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      this.editMode = false;\n      this.loadingSubject = true;\n      item = this.item;\n      transform = this.modelTransform.save(function(item) {\n        return item;\n      });\n      return transform.then(onEditSubjectSuccess, onEditSubjectError);\n    };\n\n    return DetailHeaderController;\n\n  })();\n\n  module.controller(\"DetailHeaderCtrl\", DetailHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderDirective = function($tgWysiwygService) {\n    var link;\n    this.$inject = [];\n    link = function(scope, el, attrs, ctrl) {\n      scope.blocked_html_note = '';\n      scope.$watch(\"vm.item.blocked_note\", function(blocked_note) {\n        var html_note;\n        html_note = $tgWysiwygService.getHTML(blocked_note);\n        return scope.blocked_html_note = html_note;\n      });\n      return ctrl._checkPermissions();\n    };\n    return {\n      link: link,\n      controller: \"DetailHeaderCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\",\n        project: \"=\",\n        sectionName: \"=\",\n        requiredPerm: \"@\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/header/detail-header.html\"\n    };\n  };\n\n  module.directive(\"tgDetailHeader\", [\"tgWysiwygService\", DetailHeaderDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavController, module;\n\n  module = angular.module(\"taigaBase\");\n\n  DetailNavController = (function() {\n    DetailNavController.$inject = [\"$tgNavUrls\"];\n\n    function DetailNavController(navUrls) {\n      this.navUrls = navUrls;\n      return;\n    }\n\n    DetailNavController.prototype._checkNav = function() {\n      var ctx, ref, ref1;\n      if (((ref = this.item.neighbors.previous) != null ? ref.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.previous.ref\n        };\n        this.previousUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n      if (((ref1 = this.item.neighbors.next) != null ? ref1.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.next.ref\n        };\n        return this.nextUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n    };\n\n    return DetailNavController;\n\n  })();\n\n  module.controller(\"DetailNavCtrl\", DetailNavController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailNavDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.item\", function(value) {\n        if (!value) {\n          return;\n        }\n        return ctrl._checkNav();\n      });\n    };\n    return {\n      link: link,\n      controller: \"DetailNavCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/nav/detail-nav.html\"\n    };\n  };\n\n  module.directive(\"tgDetailNav\", DetailNavDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateController;\n\n  DueDateController = (function() {\n    DueDateController.$inject = [\"tgDueDateService\", \"tgLightboxFactory\"];\n\n    function DueDateController(dueDateService, tgLightboxFactory) {\n      this.dueDateService = dueDateService;\n      this.tgLightboxFactory = tgLightboxFactory;\n    }\n\n    DueDateController.prototype.visible = function() {\n      return this.dueDateService.visible(this._getScope());\n    };\n\n    DueDateController.prototype.disabled = function() {\n      return this.dueDateService.disabled(this._getScope());\n    };\n\n    DueDateController.prototype.color = function() {\n      return this.dueDateService.color(this._getScope());\n    };\n\n    DueDateController.prototype.title = function() {\n      return this.dueDateService.title(this._getScope());\n    };\n\n    DueDateController.prototype.setDueDate = function() {\n      if (this.disabled()) {\n        return;\n      }\n      return this.tgLightboxFactory.create(\"tg-lb-set-due-date\", {\n        \"class\": \"lightbox lightbox-set-due-date\"\n      }, {\n        \"object\": this.item,\n        \"notAutoSave\": this.notAutoSave\n      });\n    };\n\n    DueDateController.prototype._getScope = function() {\n      return {\n        dueDate: this.dueDate,\n        isClosed: this.isClosed,\n        item: this.item,\n        objType: this.objType,\n        format: this.format,\n        notAutoSave: this.notAutoSave\n      };\n    };\n\n    return DueDateController;\n\n  })();\n\n  angular.module('taigaComponents').controller('DueDateCtrl', DueDateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDatePopoverDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDatePopoverDirective = function($translate, datePickerConfigService) {\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var datePickerConfig;\n        scope.open = false;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: el.find('.due-date-button')[0],\n          container: el.find('.date-picker-container')[0],\n          bound: true,\n          onClose: function() {\n            scope.open = false;\n            return scope.$apply();\n          },\n          onSelect: function() {\n            return ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n          }\n        });\n        el.picker = new Pikaday(datePickerConfig);\n        el.on(\"click\", \".due-date-button\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (scope.open) {\n            el.picker.hide();\n            return;\n          }\n          if (!el.picker.getDate() && ctrl.dueDate) {\n            el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'));\n          }\n          el.picker.show();\n          scope.open = true;\n          return scope.$apply();\n        });\n        el.on(\"click\", \".date-picker-clean\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          ctrl.dueDate = null;\n          el.picker.setDate(ctrl.dueDate);\n          scope.open = false;\n          el.picker.hide();\n          return scope.$apply();\n        });\n        return scope.$on(\"status:changed\", function(ctx, status) {\n          return ctrl.isClosed = ctrl.item.is_closed;\n        });\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"components/due-date/due-date-popover.html\",\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDateDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDateDirective = function($translate, datePickerConfigService) {\n    var templateUrl;\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/due-date/due-date-\" + attrs.format + \".html\";\n      }\n      return \"components/due-date/due-date-icon.html\";\n    };\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var renderDatePicker;\n        renderDatePicker = function() {\n          var datePickerConfig, prettyDate;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          if (ctrl.dueDate) {\n            ctrl.dueDate = moment(ctrl.dueDate, prettyDate);\n          }\n          el.on(\"click\", \".date-picker-popover-trigger\", function(event) {\n            if (ctrl.disabled()) {\n              return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            return el.find(\".date-picker-popover\").popover().open();\n          });\n          el.on(\"click\", \".date-picker-clean\", function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            ctrl.dueDate = null;\n            scope.$apply();\n            return el.find(\".date-picker-popover\").popover().close();\n          });\n          datePickerConfig = datePickerConfigService.get();\n          _.merge(datePickerConfig, {\n            field: el.find('input.due-date')[0],\n            container: el.find('.date-picker-container')[0],\n            bound: false,\n            onSelect: function() {\n              ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n              el.find(\".date-picker-popover\").popover().close();\n              return scope.$apply();\n            }\n          });\n          return el.picker = new Pikaday(datePickerConfig);\n        };\n        if (attrs.format === 'button-popover') {\n          return renderDatePicker();\n        }\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: templateUrl,\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateService, taiga;\n\n  taiga = this.taiga;\n\n  DueDateService = (function() {\n    DueDateService.$inject = [\"$translate\", \"tgProjectService\"];\n\n    function DueDateService(translate, projectService) {\n      this.translate = translate;\n      this.projectService = projectService;\n      this.defaultConfig = [\n        {\n          \"color\": \"#93C45D\",\n          \"name\": \"normal due\",\n          \"days_to_due\": null,\n          \"by_default\": true\n        }, {\n          \"color\": \"#EA7B4B\",\n          \"name\": \"due soon\",\n          \"days_to_due\": 14,\n          \"by_default\": false\n        }, {\n          \"color\": \"#E44057\",\n          \"name\": \"past due\",\n          \"days_to_due\": 0,\n          \"by_default\": false\n        }\n      ];\n    }\n\n    DueDateService.prototype.visible = function(options) {\n      return options.format === 'button' || (options.dueDate != null);\n    };\n\n    DueDateService.prototype.disabled = function(options) {\n      return options.isClosed;\n    };\n\n    DueDateService.prototype.color = function(options) {\n      var ref;\n      return ((ref = this.getStatus(options)) != null ? ref.color : void 0) || null;\n    };\n\n    DueDateService.prototype.title = function(options) {\n      if (options.dueDate) {\n        return this._formatTitle(options);\n      } else if (options.format === 'button') {\n        return this.translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE');\n      }\n      return '';\n    };\n\n    DueDateService.prototype.getStatus = function(options) {\n      var config, project;\n      if (!options.dueDate) {\n        return null;\n      }\n      project = this.projectService.project.toJS();\n      config = project[options.objType + \"_duedates\"];\n      if (!config) {\n        config = this.defaultConfig;\n      }\n      return this._getAppearance(options, config);\n    };\n\n    DueDateService.prototype._getDefaultAppearance = function(config) {\n      var defaultAppearance;\n      defaultAppearance = null;\n      _.map(config, function(it) {\n        if (it.by_default === true) {\n          return defaultAppearance = it;\n        }\n      });\n      return defaultAppearance;\n    };\n\n    DueDateService.prototype._getAppearance = function(options, config) {\n      var currentAppearance, dueDate, now;\n      currentAppearance = this._getDefaultAppearance(config);\n      config = _.sortBy(config, function(o) {\n        return -o.days_to_due;\n      });\n      dueDate = moment(options.dueDate);\n      now = moment();\n      _.map(config, function(appearance) {\n        var limitDate;\n        if (appearance.days_to_due === null) {\n          return;\n        }\n        limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"));\n        if (now >= limitDate) {\n          return currentAppearance = appearance;\n        }\n      });\n      return currentAppearance;\n    };\n\n    DueDateService.prototype._formatTitle = function(options) {\n      var formatedDate, prettyDate, status;\n      prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      formatedDate = moment(options.dueDate).format(prettyDate);\n      status = this.getStatus(options);\n      if (status != null ? status.name : void 0) {\n        return formatedDate + \" (\" + status.name + \")\";\n      }\n      return formatedDate;\n    };\n\n    return DueDateService;\n\n  })();\n\n  taiga.DueDateService = DueDateService;\n\n  angular.module(\"taigaCommon\").service(\"tgDueDateService\", DueDateService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FileChangeDirective;\n\n  FileChangeDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgFileChange);\n      el.on('change', function(event) {\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: event.currentTarget.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      restrict: \"A\",\n      link: link\n    };\n  };\n\n  FileChangeDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterRemoteStorageService, generateHash,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  generateHash = taiga.generateHash;\n\n  FilterRemoteStorageService = (function(superClass) {\n    extend(FilterRemoteStorageService, superClass);\n\n    FilterRemoteStorageService.$inject = [\"$q\", \"$tgUrls\", \"$tgHttp\"];\n\n    function FilterRemoteStorageService(q, urls, http) {\n      this.q = q;\n      this.urls = urls;\n      this.http = http;\n    }\n\n    FilterRemoteStorageService.prototype.storeFilters = function(projectId, myFilters, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      if (_.isEmpty(myFilters)) {\n        promise = this.http[\"delete\"](url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function() {\n          return deferred.resolve();\n        });\n        promise.then(null, function() {\n          return deferred.reject();\n        });\n      } else {\n        promise = this.http.put(url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function(data) {\n          return deferred.resolve();\n        });\n        promise.then(null, (function(_this) {\n          return function(data) {\n            var innerPromise;\n            innerPromise = _this.http.post(\"\" + url, {\n              key: hash,\n              value: myFilters\n            });\n            innerPromise.then(function() {\n              return deferred.resolve();\n            });\n            return innerPromise.then(null, function() {\n              return deferred.reject();\n            });\n          };\n        })(this));\n      }\n      return deferred.promise;\n    };\n\n    FilterRemoteStorageService.prototype.getFilters = function(projectId, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      promise = this.http.get(url + \"/\" + hash);\n      promise.then(function(data) {\n        return deferred.resolve(data.data.value);\n      });\n      promise.then(null, function(data) {\n        return deferred.resolve({});\n      });\n      return deferred.promise;\n    };\n\n    return FilterRemoteStorageService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterSlideDownDirective;\n\n  FilterSlideDownDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var filter;\n      filter = $('tg-filter');\n      return scope.$watch(attrs.ngIf, function(value) {\n        var contentHeight, wrapperHeight;\n        if (value) {\n          filter.find('.filter-list').hide();\n          wrapperHeight = filter.height();\n          contentHeight = 0;\n          filter.children().each(function() {\n            return contentHeight += $(this).outerHeight(true);\n          });\n          return $(el.context.nextSibling).css({\n            \"display\": \"block\"\n          });\n        }\n      });\n    };\n    return {\n      priority: 900,\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterController;\n\n  FilterController = (function() {\n    FilterController.$inject = ['$translate'];\n\n    FilterController.activeCustomFilter = null;\n\n    FilterController.repeatedFilterError = false;\n\n    FilterController.lengthZeroError = false;\n\n    function FilterController(translate) {\n      this.translate = translate;\n      this.opened = null;\n      this.filterModeOptions = [\"include\", \"exclude\"];\n      this.filterModeLabels = {\n        \"include\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\n        \"exclude\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\")\n      };\n      this.filterMode = 'include';\n      this.customFilterForm = false;\n      this.customFilterName = '';\n      this.$onChanges = function(changes) {\n        if (changes.selectedFilters) {\n          this.getIncludedFilters();\n          return this.getExcludedFilters();\n        }\n      };\n      this.includedFilters = this.getIncludedFilters();\n      this.excludedFilters = this.getExcludedFilters();\n    }\n\n    FilterController.prototype.toggleFilterCategory = function(filterName) {\n      if (this.opened === filterName) {\n        return this.opened = null;\n      } else {\n        return this.opened = filterName;\n      }\n    };\n\n    FilterController.prototype.isOpen = function(filterName) {\n      return this.opened === filterName;\n    };\n\n    FilterController.prototype.openCustomFilter = function() {\n      this.customFilterForm = true;\n      this.lengthZeroError = false;\n      return this.repeatedFilterError = false;\n    };\n\n    FilterController.prototype.saveCustomFilter = function() {\n      if (this.customFilterName.length > 0 && !this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        this.lengthZeroError = false;\n        this.repeatedFilterError = false;\n        this.onSaveCustomFilter({\n          name: this.customFilterName\n        });\n        this.customFilterForm = false;\n        this.opened = 'custom-filter';\n        this.customFilterName = '';\n      }\n      if (this.customFilterName.length === 0) {\n        this.lengthZeroError = true;\n      } else {\n        this.lengthZeroError = false;\n      }\n      if (!this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        return this.repeatedFilterError = false;\n      } else {\n        return this.repeatedFilterError = true;\n      }\n    };\n\n    FilterController.prototype.unselectFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectFilter = function(filterCategory, filter) {\n      filter = {\n        category: filterCategory,\n        filter: filter,\n        mode: this.filterMode\n      };\n      this.activeCustomFilter = null;\n      return this.onAddFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.removeCustomFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectCustomFilter = function(filter) {\n      this.activeCustomFilter = filter.id;\n      return this.onSelectCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.getIncludedFilters = function() {\n      return this.includedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'include';\n      });\n    };\n\n    FilterController.prototype.getExcludedFilters = function() {\n      return this.excludedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'exclude';\n      });\n    };\n\n    FilterController.prototype.isFilterSelected = function(filterCategory, filter) {\n      return !!_.find(this.selectedFilters, function(it) {\n        return filter.id === it.id && filterCategory.dataType === it.dataType;\n      });\n    };\n\n    return FilterController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Filter', FilterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterDirective;\n\n  FilterDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var taskboard, watchTaskboardHeight;\n      watchTaskboardHeight = (function(_this) {\n        return function(taskboard) {\n          var resizeObserver;\n          resizeObserver = new ResizeObserver(function() {\n            var currentMax, maxSize;\n            maxSize = null;\n            currentMax = Number(el[0].style.getPropertyValue('--filter-list-max-height').replace('px', ''));\n            if (scope.vm.opened) {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight + currentMax;\n            } else {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight;\n            }\n            if (maxSize < 100) {\n              maxSize = 100;\n            } else if (maxSize > 380) {\n              maxSize = 380;\n            }\n            el[0].style.setProperty('--filter-list-max-height', maxSize + \"px\");\n            return resizeObserver.unobserve(el[0]);\n          });\n          return resizeObserver.observe(taskboard);\n        };\n      })(this);\n      attrs.$observe(\"open\", function(open) {\n        open = scope.$eval(open);\n        if (open) {\n          return el.addClass('open');\n        } else {\n          return el.removeClass('open');\n        }\n      });\n      taskboard = $('.js-taskboard-manager');\n      if (taskboard.length) {\n        return watchTaskboardHeight(taskboard[0]);\n      }\n    };\n    return {\n      scope: {\n        onChangeQ: \"&\",\n        onAddFilter: \"&\",\n        onSelectCustomFilter: \"&\",\n        onRemoveFilter: \"&\",\n        onRemoveCustomFilter: \"&\",\n        onSaveCustomFilter: \"&\",\n        customFilters: \"<\",\n        filters: \"<\",\n        customFilters: \"<\",\n        selectedFilters: \"<\"\n      },\n      bindToController: true,\n      controller: \"Filter\",\n      controllerAs: \"vm\",\n      templateUrl: 'components/filter/filter.html',\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InputSearchComponent;\n\n  InputSearchComponent = {\n    bindings: {\n      q: '<',\n      change: '&'\n    },\n    template: \"<input\\n    type=\\\"search\\\"\\n    placeholder=\\\"{{'COMMON.FILTERS.INPUT_PLACEHOLDER' | translate}}\\\"\\n    ng-model=\\\"$ctrl.searchText\\\"\\n    ng-change=\\\"$ctrl.onChange($ctrl.searchText)\\\" />\\n<tg-svg svg-icon=\\\"icon-search\\\"></tg-svg>\",\n    controller: function() {\n      this.searchText = '';\n      this.dirty = false;\n      this.$onChanges = function(changes) {\n        if (changes.q && !this.dirty) {\n          return this.searchText = this.q;\n        }\n      };\n      this.onChange = (function(_this) {\n        return function(text) {\n          _this.dirty = true;\n          return _this.change({\n            q: text\n          });\n        };\n      })(this);\n    }\n  };\n\n  angular.module(\"taigaComponents\").component(\"tgInputSearch\", InputSearchComponent);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssuesTableController;\n\n  IssuesTableController = (function() {\n    function IssuesTableController() {}\n\n    IssuesTableController.prototype.edit = function(issue) {\n      return this.onEditIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype.toggleTags = function() {\n      return this.onToggleTags({\n        tags: this.showTags\n      });\n    };\n\n    IssuesTableController.prototype.detach = function(issue) {\n      return this.onDetachIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype[\"delete\"] = function(issue) {\n      return this.onDeleteIssue({\n        id: issue.id\n      });\n    };\n\n    return IssuesTableController;\n\n  })();\n\n  angular.module('taigaComponents').controller('IssuesTable', IssuesTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var issuesTableDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  issuesTableDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.issueOptions = null;\n      scope.displayOptions = function(id) {\n        var timeout;\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.issueOptions = id;\n      };\n      return scope.hideOptions = function() {\n        var timeout;\n        return timeout = $timeout((function() {\n          return scope.issueOptions = null;\n        }), 200);\n      };\n    };\n    return {\n      controller: \"IssuesTable\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"components/issues-table/issues-table.html\",\n      bindToController: {\n        issues: \"<\",\n        showTags: \"=\",\n        onLoadIssues: '&',\n        onAddIssuesInBulk: '&',\n        onAddNewIssue: '&',\n        sprintIssues: '<',\n        onDeleteIssue: '&',\n        onEditIssue: '&',\n        onDetachIssue: '&',\n        onToggleTags: '&'\n      },\n      scope: true,\n      link: link\n    };\n  };\n\n  module.directive('tgIssuesTable', ['$timeout', issuesTableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideDirective, taiga;\n\n  taiga = this.taiga;\n\n  JoyRideDirective = function($rootScope, currentUserService, joyRideService, $location, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var initJoyrRide, intro, unsuscribe;\n      unsuscribe = null;\n      intro = introJs();\n      intro.oncomplete(function() {\n        return $('html,body').scrollTop(0);\n      });\n      intro.onexit(function() {\n        return currentUserService.disableJoyRide();\n      });\n      initJoyrRide = function(next, config) {\n        if (!config[next.joyride]) {\n          return;\n        }\n        intro.setOptions({\n          exitOnEsc: false,\n          exitOnOverlayClick: false,\n          showStepNumbers: false,\n          nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\n          prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\n          skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\n          doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\n          disableInteraction: true\n        });\n        intro.setOption('steps', joyRideService.get(next.joyride));\n        return intro.start();\n      };\n      return $rootScope.$on('$routeChangeSuccess', function(event, next) {\n        if (!next.joyride || !currentUserService.isAuthenticated()) {\n          intro.exit();\n          if (unsuscribe) {\n            unsuscribe();\n          }\n          return;\n        }\n        intro.oncomplete(function() {\n          return currentUserService.disableJoyRide(next.joyride);\n        });\n        if (next.loader) {\n          return unsuscribe = $rootScope.$on('loader:end', function() {\n            currentUserService.loadJoyRideConfig().then(function(config) {\n              return initJoyrRide(next, config);\n            });\n            return unsuscribe();\n          });\n        } else {\n          return currentUserService.loadJoyRideConfig().then(function(config) {\n            return initJoyrRide(next, config);\n          });\n        }\n      });\n    };\n    return {\n      scope: {},\n      link: link\n    };\n  };\n\n  JoyRideDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgJoyRideService\", \"$location\", \"$translate\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JoyRideService = (function(superClass) {\n    extend(JoyRideService, superClass);\n\n    JoyRideService.$inject = ['$translate', 'tgCheckPermissionsService'];\n\n    function JoyRideService(translate, checkPermissionsService) {\n      this.translate = translate;\n      this.checkPermissionsService = checkPermissionsService;\n    }\n\n    JoyRideService.prototype.getConfig = function() {\n      return {\n        dashboard: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.project-list > section:not(.ng-hide)',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\n                }\n              }, {\n                element: '.working-on-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\n                }\n              }, {\n                element: '.watching-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')]\n                }\n              }\n            ];\n            if (!$('.project-list .create-project-button').is(':hidden')) {\n              steps.push({\n                element: '.project-list .create-project-button',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        backlog: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.summary',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'), _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')]\n                }\n              }, {\n                element: '.backlog-table-empty',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\n                }\n              }, {\n                element: '.sprints',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.new-us',\n                position: 'rigth',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        kanban: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.kanban-table-inner',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\n                }\n              }, {\n                element: '.card-placeholder',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.add-action',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this)\n      };\n    };\n\n    JoyRideService.prototype.get = function(name) {\n      var joyRide, joyRides;\n      joyRides = this.getConfig();\n      joyRide = joyRides[name].call(this);\n      return _.map(joyRide, function(item) {\n        var html;\n        html = \"\";\n        if (item.joyride.title) {\n          html += \"<h3>\" + item.joyride.title + \"</h3>\";\n        }\n        if (_.isArray(item.joyride.text)) {\n          _.forEach(item.joyride.text, function(text) {\n            return html += \"<p>\" + text + \"</p>\";\n          });\n        } else {\n          html += \"<p>\" + item.joyride.text + \"</p>\";\n        }\n        item.intro = html;\n        return item;\n      });\n    };\n\n    return JoyRideService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanBoardZoomDirective;\n\n  KanbanBoardZoomDirective = function(storage, projectService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"kanban_zoom\", 1);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\", \"card-data\", \"assigned_to_extended\"], [\"tags\", \"extra_info\", \"unfold\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        if (zoomIndex > 3) {\n          zoomIndex = 3;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"kanban_zoom\")) !== zoomIndex) {\n          storage.set(\"kanban_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n    levels=\\\"levels\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectUserDirective, truncate;\n\n  truncate = taiga.truncate;\n\n  SelectUserDirective = function($rootScope, $repo, $translate, lightboxService, lightboxKeyboardNavigationService, avatarService, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var closeLightbox, confirmSelection, getFilteredUsers, roles, users;\n      users = [];\n      roles = [];\n      lightboxService.open($el);\n      getFilteredUsers = function(text) {\n        var _filterRows, available, collection, selected;\n        if (text == null) {\n          text = \"\";\n        }\n        selected = _.compact(_.sortBy(_.filter(users, function(x) {\n          return _.includes($scope.currentUsers, x.id);\n        }), 'name'));\n        _filterRows = function(text, row) {\n          var name;\n          if (row.type === 'user' && _.find(selected, ['id', row.id])) {\n            return false;\n          }\n          name = row.name.toUpperCase();\n          text = text.toUpperCase();\n          return _.includes(name, text);\n        };\n        collection = _.union(users, _.filter(roles, (function(_this) {\n          return function(role) {\n            var difference;\n            difference = _.difference(role.userIds, _.map(selected, 'id'));\n            return difference.length > 0;\n          };\n        })(this)));\n        available = _.sortBy(_.filter(collection, _.partial(_filterRows, text)), 'name');\n        if (!text) {\n          $scope.selected = selected;\n          return $scope.collection = _.union(selected, available);\n        } else {\n          $scope.selected = [];\n          return $scope.collection = available;\n        }\n      };\n      closeLightbox = function() {\n        lightboxKeyboardNavigationService.stop();\n        return lightboxService.close($el);\n      };\n      $scope.$on(\"watcher:add\", function(ctx, item) {\n        $scope.item = item;\n        getFilteredUsers();\n        return lightboxService.open($el).then(function() {\n          $el.find(\"input\").focus();\n          return lightboxKeyboardNavigationService.init($el);\n        });\n      });\n      $scope.$watch(\"activeUsers\", function(activeUsers) {\n        var project;\n        if (!activeUsers) {\n          return;\n        }\n        users = _.map(activeUsers, function(user) {\n          return {\n            id: user.id,\n            type: 'user',\n            name: user.full_name_display,\n            avatar: avatarService.getAvatar(user)\n          };\n        });\n        if ($scope.single) {\n          return;\n        }\n        project = projectService.project.toJS();\n        return roles = _.map(project.roles, function(role) {\n          var roleUsers, suffix;\n          roleUsers = _.filter(activeUsers, {\n            'role': role.id\n          });\n          suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\");\n          return {\n            id: role.id,\n            type: 'role',\n            name: suffix + \": \" + role.name,\n            avatar: null,\n            userIds: _.map(roleUsers, 'id'),\n            userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\n          };\n        });\n      });\n      $scope.$watch(\"currentUsers\", function(currentUsers) {\n        if (!currentUsers) {\n          return;\n        }\n        return getFilteredUsers();\n      });\n      $scope.$watch(\"searchText\", function(searchingText) {\n        getFilteredUsers(searchingText);\n        return $el.find(\"input\").focus();\n      });\n      $scope.removeItem = function(user, $event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        $event.currentTarget.remove();\n        $scope.searchText = null;\n        _.pull($scope.currentUsers, user.id);\n        return getFilteredUsers();\n      };\n      $scope.addItem = function(item) {\n        if (item.type === 'user') {\n          if ($scope.currentUsers.includes(item.id)) {\n            return;\n          }\n          if ($scope.single) {\n            $scope.currentUsers = [item.id];\n            confirmSelection();\n            return;\n          }\n          $scope.currentUsers.push(item.id);\n        }\n        if (item.type === 'role') {\n          $scope.currentUsers = _.union($scope.currentUsers, item.userIds);\n        }\n        $scope.searchText = null;\n        return getFilteredUsers();\n      };\n      $scope.clearSearch = function() {\n        return $scope.searchText = '';\n      };\n      confirmSelection = function() {\n        $scope.loading = true;\n        $scope.onClose($scope.currentUsers);\n        closeLightbox();\n        return $scope.loading = false;\n      };\n      $el.on(\"click\", \".lb-select-user-confirm\", function(event) {\n        if ($scope.loading) {\n          return;\n        }\n        event.preventDefault();\n        return confirmSelection();\n      });\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        closeLightbox();\n        return $scope.$apply(function() {\n          return $scope.searchText = null;\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      templateUrl: \"components/lb-select-user/lb-select-user.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  SelectUserDirective.$inject = [\"$rootScope\", \"$tgRepo\", \"$translate\", \"lightboxService\", \"lightboxKeyboardNavigationService\", \"tgAvatarService\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementDirective;\n\n  LiveAnnouncementDirective = function(liveAnnouncementService) {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      restrict: \"AE\",\n      scope: {},\n      controllerAs: 'vm',\n      controller: function() {\n        this.close = function() {\n          return liveAnnouncementService.open = false;\n        };\n        return Object.defineProperties(this, {\n          open: {\n            get: function() {\n              return liveAnnouncementService.open;\n            }\n          },\n          title: {\n            get: function() {\n              return liveAnnouncementService.title;\n            }\n          },\n          desc: {\n            get: function() {\n              return liveAnnouncementService.desc;\n            }\n          }\n        });\n      },\n      link: link,\n      templateUrl: \"components/live-announcement/live-announcement.html\"\n    };\n  };\n\n  LiveAnnouncementDirective.$inject = [\"tgLiveAnnouncementService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  LiveAnnouncementService = (function(superClass) {\n    extend(LiveAnnouncementService, superClass);\n\n    function LiveAnnouncementService() {\n      this.open = false;\n      this.title = \"\";\n      this.desc = \"\";\n    }\n\n    LiveAnnouncementService.prototype.show = function(title, desc) {\n      this.open = true;\n      this.title = title;\n      return this.desc = desc;\n    };\n\n    return LiveAnnouncementService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintLightboxController, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  MoveToSprintLightboxController = (function() {\n    MoveToSprintLightboxController.$inject = ['$rootScope', '$scope', '$tgResources', 'tgProjectService', '$translate', 'lightboxService', '$tgConfirm', '$q'];\n\n    function MoveToSprintLightboxController(rootScope, scope, rs, projectService, translate, lightboxService, confirm, q) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.rs = rs;\n      this.projectService = projectService;\n      this.translate = translate;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.q = q;\n      this.projectId = this.projectService.project.get('id');\n      this.loading = false;\n      this.someSelected = false;\n      this.selectedSprintId = null;\n      this.typesSelected = {\n        uss: false,\n        tasks: false,\n        issues: false\n      };\n      this.itemsToMove = {};\n      this._loadSprints();\n      this.scope.$watch(\"vm.openItems\", (function(_this) {\n        return function(openItems) {\n          if (!openItems) {\n            return;\n          }\n          return _this._init(openItems);\n        };\n      })(this));\n    }\n\n    MoveToSprintLightboxController.prototype._init = function(openItems) {\n      var ref, ref1, ref2;\n      this.hasManyItemTypes = _.size(this.openItems) > 1;\n      this.ussCount = parseInt((ref = openItems.uss) != null ? ref.length : void 0);\n      this.updateSelected('uss', this.ussCount > 0);\n      this.tasksCount = parseInt((ref1 = openItems.tasks) != null ? ref1.length : void 0);\n      this.updateSelected('tasks', this.tasksCount > 0);\n      this.issuesCount = parseInt((ref2 = openItems.issues) != null ? ref2.length : void 0);\n      return this.updateSelected('issues', this.issuesCount > 0);\n    };\n\n    MoveToSprintLightboxController.prototype._loadSprints = function() {\n      return this.rs.sprints.list(this.projectId, {\n        closed: false\n      }).then((function(_this) {\n        return function(data) {\n          return _this.sprints = _.filter(data.milestones, function(x) {\n            return x.id !== _this.sprint.id;\n          });\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.updateSelected = function(itemType, value) {\n      this.typesSelected[itemType] = value;\n      this.someSelected = _.some(this.typesSelected);\n      if (value === true) {\n        return this.itemsToMove[itemType] = this.openItems[itemType];\n      } else if (this.itemsToMove[itemType]) {\n        return delete this.itemsToMove[itemType];\n      }\n    };\n\n    MoveToSprintLightboxController.prototype.submit = function() {\n      var itemsNotMoved;\n      itemsNotMoved = {};\n      _.map(this.openItems, (function(_this) {\n        return function(itemsList, itemsType) {\n          if (!_this.itemsToMove[itemsType]) {\n            return itemsNotMoved[itemsType] = true;\n          }\n        };\n      })(this));\n      this.loading = true;\n      return this.moveItems().then((function(_this) {\n        return function() {\n          _this.rootScope.$broadcast(\"taskboard:items:move\", _this.typesSelected);\n          _this.lightboxService.closeAll();\n          _this.loading = false;\n          if (_.size(itemsNotMoved) > 0) {\n            return _this.displayWarning(itemsNotMoved);\n          }\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.moveItems = function() {\n      var promises;\n      promises = [];\n      if (this.itemsToMove.uss) {\n        promises.push(this.rs.sprints.moveUserStoriesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.uss));\n      }\n      if (this.itemsToMove.tasks) {\n        promises.push(this.rs.sprints.moveTasksMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.tasks));\n      }\n      if (this.itemsToMove.issues) {\n        promises.push(this.rs.sprints.moveIssuesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.issues));\n      }\n      return this.q.all(promises);\n    };\n\n    MoveToSprintLightboxController.prototype.displayWarning = function(itemsNotMoved) {\n      var action, desc, ref, title, totalItemsMoved;\n      action = this.translate.instant('COMMON.I_GET_IT');\n      if (_.size(itemsNotMoved) === 1 && itemsNotMoved.issues === true) {\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED');\n      } else {\n        totalItemsMoved = 0;\n        _.map(this.itemsToMove, function(itemsList, itemsType) {\n          return totalItemsMoved += itemsList.length;\n        });\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE', {\n          total: totalItemsMoved\n        }, 'messageformat');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN', {\n          sprintName: (ref = this.sprint) != null ? ref.name : void 0\n        });\n      }\n      return this.confirm.success(title, desc, null, action);\n    };\n\n    return MoveToSprintLightboxController;\n\n  })();\n\n  module.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintLightboxDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintLightboxDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        openItems: \"=\",\n        sprint: \"=\"\n      },\n      templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\",\n      controller: \"MoveToSprintLbCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  moveToSprintLightboxDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintController, taiga;\n\n  taiga = this.taiga;\n\n  MoveToSprintController = (function() {\n    MoveToSprintController.$inject = ['$scope', 'tgLightboxFactory', 'tgProjectService'];\n\n    function MoveToSprintController(scope, lightboxFactory, projectService) {\n      this.scope = scope;\n      this.lightboxFactory = lightboxFactory;\n      this.projectService = projectService;\n      this.permissions = this.projectService.project.get('my_permissions');\n      this.hasOpenItems = false;\n      this.disabled = false;\n      this.openItems = {\n        uss: [],\n        tasks: [],\n        issues: []\n      };\n      this.scope.$watch(\"vm.uss\", (function(_this) {\n        return function() {\n          return _this.getOpenUss();\n        };\n      })(this));\n      this.scope.$watch(\"vm.unnasignedTasks\", (function(_this) {\n        return function() {\n          return _this.getOpenStorylessTasks();\n        };\n      })(this));\n      this.scope.$watch(\"vm.issues\", (function(_this) {\n        return function() {\n          return _this.getOpenIssues();\n        };\n      })(this));\n    }\n\n    MoveToSprintController.prototype.checkOpenItems = function() {\n      return _.some(Object.keys(this.openItems), (function(_this) {\n        return function(x) {\n          return _this.openItems[x].length > 0;\n        };\n      })(this));\n    };\n\n    MoveToSprintController.prototype.openLightbox = function() {\n      var openItems;\n      if (this.disabled === !true && this.hasOpenItems) {\n        openItems = {};\n        _.map(this.openItems, function(itemsList, itemsType) {\n          if (itemsList.length) {\n            return openItems[itemsType] = itemsList;\n          }\n        });\n        return this.lightboxFactory.create('tg-lb-move-to-sprint', {\n          \"class\": \"lightbox lightbox-move-to-sprint\",\n          \"sprint\": \"sprint\",\n          \"open-items\": \"openItems\"\n        }, {\n          sprint: this.sprint,\n          openItems: openItems\n        });\n      }\n    };\n\n    MoveToSprintController.prototype.getOpenUss = function() {\n      if (!this.uss || this.permissions.indexOf(\"modify_us\") === -1) {\n        return;\n      }\n      this.openItems.uss = [];\n      this.uss.map((function(_this) {\n        return function(us) {\n          if (us.is_closed === false) {\n            return _this.openItems.uss.push({\n              us_id: us.id,\n              order: us.sprint_order\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenStorylessTasks = function() {\n      if (!this.unnasignedTasks || this.permissions.indexOf(\"modify_task\") === -1) {\n        return;\n      }\n      this.openItems.tasks = [];\n      this.unnasignedTasks.map((function(_this) {\n        return function(column) {\n          return column.map(function(taskId) {\n            var task;\n            task = _this.taskMap.get(taskId);\n            if (task.get('model').get('is_closed') === false) {\n              return _this.openItems.tasks.push({\n                task_id: task.get('model').get('id'),\n                order: task.get('model').get('taskboard_order')\n              });\n            }\n          });\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenIssues = function() {\n      if (!this.issues || this.permissions.indexOf(\"modify_issue\") === -1) {\n        return;\n      }\n      this.openItems.issues = [];\n      this.issues.map((function(_this) {\n        return function(issue) {\n          if (issue.get('status').get('is_closed') === false) {\n            return _this.openItems.issues.push({\n              issue_id: issue.get('id')\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    return MoveToSprintController;\n\n  })();\n\n  angular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintDirective = function(taskboardTasksService) {\n    return {\n      controller: \"MoveToSprintCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: 'components/move-to-sprint/move-to-sprint.html',\n      scope: {\n        sprint: '=',\n        uss: '=',\n        unnasignedTasks: '=',\n        issues: '=',\n        disabled: '=',\n        taskMap: '='\n      }\n    };\n  };\n\n  moveToSprintDirective.$inject = ['tgTaskboardTasks'];\n\n  module.directive('tgMoveToSprint', [moveToSprintDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoBigSrcDirective;\n\n  ProjectLogoBigSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_big_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoBigSrc\"\n      }\n    };\n  };\n\n  ProjectLogoBigSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoSmallSrcDirective;\n\n  ProjectLogoSmallSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_small_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoSmallSrc\"\n      }\n    };\n  };\n\n  ProjectLogoSmallSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuController;\n\n  ProjectMenuController = (function() {\n    ProjectMenuController.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n    function ProjectMenuController(projectService, lightboxFactory) {\n      this.projectService = projectService;\n      this.lightboxFactory = lightboxFactory;\n      this.project = null;\n      this.menu = Immutable.Map();\n    }\n\n    ProjectMenuController.prototype.show = function() {\n      var ref;\n      this.project = this.projectService.project;\n      this.sprints = (ref = this.project.get('milestones')) != null ? ref.toJS() : void 0;\n      this.active = this._getActiveSection();\n      this.projectMenu = {\n        component: 'tg-project-navigation',\n        params: {\n          project: this.projectService.project.toJS()\n        },\n        events: {\n          search: (function(_this) {\n            return function() {\n              return _this.search();\n            };\n          })(this)\n        }\n      };\n      this._setVideoConference();\n      return this._setMenuPermissions();\n    };\n\n    ProjectMenuController.prototype.hide = function() {\n      this.project = null;\n      return this.menu = {};\n    };\n\n    ProjectMenuController.prototype.search = function() {\n      return this.lightboxFactory.create(\"tg-search-box\", {\n        \"class\": \"lightbox lightbox-search\"\n      });\n    };\n\n    ProjectMenuController.prototype._setVideoConference = function() {\n      var videoconferenceUrl;\n      videoconferenceUrl = this._videoConferenceUrl();\n      if (videoconferenceUrl) {\n        return this.project = this.project.set(\"videoconferenceUrl\", videoconferenceUrl);\n      }\n    };\n\n    ProjectMenuController.prototype._setMenuPermissions = function() {\n      this.menu = Immutable.Map({\n        epics: false,\n        backlog: false,\n        kanban: false,\n        issues: false,\n        wiki: false\n      });\n      if (this.project.get(\"is_epics_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_epics\") !== -1) {\n        this.menu = this.menu.set(\"epics\", true);\n      }\n      if (this.project.get(\"is_backlog_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"backlog\", true);\n      }\n      if (this.project.get(\"is_kanban_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"kanban\", true);\n      }\n      if (this.project.get(\"is_issues_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_issues\") !== -1) {\n        this.menu = this.menu.set(\"issues\", true);\n      }\n      if (this.project.get(\"is_wiki_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") !== -1) {\n        return this.menu = this.menu.set(\"wiki\", true);\n      }\n    };\n\n    ProjectMenuController.prototype._getActiveSection = function() {\n      var indexBacklog, indexKanban, oldSectionName, sectionName, sectionsBreadcrumb;\n      sectionName = this.projectService.section;\n      sectionsBreadcrumb = this.projectService.sectionsBreadcrumb;\n      indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\");\n      indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\");\n      if (indexBacklog !== -1 || indexKanban !== -1) {\n        if (indexKanban === -1 || indexBacklog > indexKanban) {\n          oldSectionName = \"backlog\";\n        } else {\n          oldSectionName = \"kanban\";\n        }\n      }\n      if (sectionName === \"backlog-kanban\") {\n        if (oldSectionName === \"backlog\" || oldSectionName === \"kanban\") {\n          sectionName = oldSectionName;\n        } else if (this.project.get(\"is_backlog_activated\") && !this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"backlog\";\n        } else if (!this.project.get(\"is_backlog_activated\") && this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"kanban\";\n        }\n      }\n      return sectionName;\n    };\n\n    ProjectMenuController.prototype._videoConferenceUrl = function() {\n      var baseUrl, url;\n      if (this.project.get(\"videoconferences\") === \"whereby-com\") {\n        baseUrl = \"https://whereby.com/\";\n      } else if (this.project.get(\"videoconferences\") === \"talky\") {\n        baseUrl = \"https://talky.io/\";\n      } else if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        baseUrl = \"https://meet.jit.si/\";\n      } else if (this.project.get(\"videoconferences\") === \"custom\") {\n        return this.project.get(\"videoconferences_extra_data\");\n      } else {\n        return \"\";\n      }\n      if (this.project.get(\"videoconferences_extra_data\")) {\n        url = this.project.get(\"slug\") + \"-\" + taiga.slugify(this.project.get(\"videoconferences_extra_data\"));\n      } else {\n        url = this.project.get(\"slug\");\n      }\n      if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        url = url.replace(/-/g, \"\");\n      }\n      return baseUrl + url;\n    };\n\n    return ProjectMenuController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuDirective, taiga;\n\n  taiga = this.taiga;\n\n  ProjectMenuDirective = function(projectService, lightboxFactory) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var fixed, projectChange, topBarHeight;\n      projectChange = function() {\n        if (projectService.project) {\n          return ctrl.show();\n        } else {\n          return ctrl.hide();\n        }\n      };\n      scope.$watch((function() {\n        return projectService.project;\n      }), projectChange);\n      fixed = false;\n      topBarHeight = 48;\n      return window.addEventListener(\"scroll\", function() {\n        var position;\n        position = $(window).scrollTop();\n        if (position > topBarHeight && fixed === false) {\n          el.find('.sticky-project-menu').addClass('unblock');\n          return fixed = true;\n        } else if (position === 0 && fixed === true) {\n          el.find('.sticky-project-menu').removeClass('unblock');\n          return fixed = false;\n        }\n      });\n    };\n    return {\n      scope: {},\n      controller: \"ProjectMenu\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/project-menu/project-menu.html\",\n      link: link\n    };\n  };\n\n  ProjectMenuDirective.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PromoteToUsButtonDirective;\n\n  PromoteToUsButtonDirective = function($rootScope, $rs, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var itemType, save;\n      itemType = null;\n      save = function(item, askResponse) {\n        var data, onError, onSuccess;\n        data = {\n          project: item.project\n        };\n        onSuccess = function(response) {\n          askResponse.finish();\n          $confirm.notify(\"success\");\n          return $rootScope.$broadcast(\"promote-\" + itemType + \"-to-us:success\", response.data[0]);\n        };\n        onError = function() {\n          askResponse.finish();\n          return $confirm.notify(\"error\");\n        };\n        return $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".promote-button\", function(event) {\n        var ctx, item, message, subtitle, title;\n        event.preventDefault();\n        item = $model.$modelValue;\n        itemType = _.get({\n          tasks: 'task',\n          issues: 'issue'\n        }, item._name);\n        ctx = \"COMMON.CONFIRM_PROMOTE.\" + (itemType.toUpperCase());\n        title = $translate.instant(ctx + \".TITLE\");\n        message = $translate.instant(ctx + \".MESSAGE\");\n        subtitle = item.subject;\n        return $confirm.ask(title, subtitle, message).then(function(response) {\n          return save(item, response);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      require: \"ngModel\",\n      templateUrl: \"components/promote-to-us/promote-to-us.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\", [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var groupBy, module, normalizeString, searchListDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  normalizeString = this.taiga.normalizeString;\n\n  groupBy = this.taiga.groupBy;\n\n  searchListDirective = function($translate) {\n    var link;\n    link = function(scope, el, attrs, model) {\n      var avaliableItems, filtering, isContainedIn, itemsById, parseString, resetAll, resetSelected;\n      scope.templateUrl = \"components/search-list/search-list-\" + scope.itemType + \"-choice.html\";\n      scope.currentSelected = null;\n      filtering = false;\n      avaliableItems = [];\n      itemsById = {};\n      if (scope.itemType === 'issue') {\n        scope.milestonesById = groupBy(scope.project.milestones, function(e) {\n          return e.id;\n        });\n      }\n      if (scope.filterClosed) {\n        scope.showClosed = false;\n        if (scope.itemType === 'sprint') {\n          scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\");\n          scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\");\n        }\n      }\n      el.on(\"click\", \".choice\", function(event) {\n        var choiceId, ref, value;\n        choiceId = parseInt($(event.currentTarget).data(\"choice-id\"));\n        value = ((ref = attrs.ngModel) != null ? ref.id : void 0) !== choiceId ? itemsById[choiceId] : null;\n        model.$setViewValue(value);\n        scope.currentSelected = value;\n        return scope.$apply();\n      });\n      isContainedIn = function(needle, haystack) {\n        return _.includes(parseString(haystack), parseString(needle));\n      };\n      parseString = function(value) {\n        if (typeof value !== 'string') {\n          value = value.toString();\n        }\n        return normalizeString(value.toUpperCase());\n      };\n      resetSelected = function() {\n        scope.currentSelected = null;\n        return model.$setViewValue(null);\n      };\n      resetAll = function() {\n        resetSelected();\n        scope.searchText = '';\n        avaliableItems = angular.copy(scope.items);\n        return itemsById = groupBy(avaliableItems, function(x) {\n          return x.id;\n        });\n      };\n      scope.isVisible = function(item) {\n        var ref;\n        if (!scope.filterClosed || scope.showClosed) {\n          return true;\n        }\n        if (scope.itemType === 'sprint' && (item.closed || item.is_closed)) {\n          if (((ref = scope.currentSelected) != null ? ref.id : void 0) === item.id) {\n            resetSelected();\n          }\n          return false;\n        }\n        return true;\n      };\n      scope.toggleShowClosed = function(item) {\n        return scope.showClosed = !scope.showClosed;\n      };\n      scope.filterItems = function(searchText) {\n        scope.filtering = true;\n        scope.items = _.filter(avaliableItems, function(item) {\n          var itemAttrs;\n          itemAttrs = item.getAttrs();\n          if (Array.isArray(scope.filterBy)) {\n            return _.some(scope.filterBy, function(attr) {\n              return isContainedIn(searchText, itemAttrs[attr]);\n            });\n          } else {\n            return isContainedIn(searchText, itemAttrs[scope.filterBy]);\n          }\n        });\n        if (!_.find(scope.items, scope.currentSelected)) {\n          return resetSelected();\n        }\n      };\n      return scope.$watch('items', function(items) {\n        if (!scope.filtering && items) {\n          return resetAll();\n        }\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/search-list/search-list.html\",\n      require: \"ngModel\",\n      scope: {\n        label: '@',\n        placeholder: '@',\n        project: '=',\n        filterBy: '=',\n        items: '=',\n        itemType: '@',\n        filterClosed: '=',\n        itemDisabled: '='\n      }\n    };\n  };\n\n  module.directive('tgSearchList', ['$translate', searchListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SwimlaneSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  SwimlaneSelector = function($timeout, $translate) {\n    var link;\n    link = function(scope, el, attrs) {\n      var getCurrentSwimlane, getSelectedSwimlane, mount;\n      scope.displaySelector = false;\n      scope.selectedSwimlane = null;\n      timeout = null;\n      mount = function() {\n        return getCurrentSwimlane();\n      };\n      getCurrentSwimlane = function() {\n        var filteredSwimlanes;\n        if (scope.userStory.id) {\n          if (scope.userStory.swimlane) {\n            filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n              return swimlane.id === scope.userStory.swimlane;\n            });\n            scope.currentSwimlane = filteredSwimlanes.get(0);\n          } else {\n            scope.currentSwimlane = null;\n          }\n        } else {\n          filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n            return swimlane.id === scope.defaultSwimlaneId;\n          });\n          scope.currentSwimlane = filteredSwimlanes.get(0);\n        }\n        return getSelectedSwimlane();\n      };\n      getSelectedSwimlane = function() {\n        if (scope.userStory.id) {\n          if (scope.currentSwimlane) {\n            return scope.selectedSwimlane = scope.currentSwimlane.id;\n          } else {\n            return scope.selectedSwimlane = null;\n          }\n        } else {\n          return scope.selectedSwimlane = scope.currentSwimlane.id;\n        }\n      };\n      scope.displayOptions = function() {\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.displaySelector = true;\n      };\n      scope.hideOptions = function() {\n        return timeout = $timeout((function() {\n          return scope.displaySelector = false;\n        }), 100);\n      };\n      scope.selectSwimlane = function(swimlane) {\n        if (swimlane === 'noSwimlane') {\n          swimlane = {\n            id: null,\n            kanban_order: 1,\n            name: $translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n          };\n          scope.ngModel = swimlane.id;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        } else {\n          scope.ngModel = swimlane.id !== -1 ? swimlane.id : null;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        }\n        return getSelectedSwimlane();\n      };\n      scope.$watch('userStory', function(userStory) {\n        return getCurrentSwimlane();\n      });\n      return mount();\n    };\n    return {\n      link: link,\n      templateUrl: \"components/swimlane-selector/swimlane-selector.html\",\n      scope: {\n        swimlanes: '<',\n        defaultSwimlaneId: '<',\n        userStory: '<',\n        hasUnclassifiedStories: '<',\n        ngModel: '='\n      },\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgSwimlaneSelector\", ['$timeout', \"$translate\", SwimlaneSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagOptionDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagOptionDirective = function() {\n    var dispatch, link, select, stop;\n    select = function(selected) {\n      var containerHeight, diff, selectedPosition;\n      selected.addClass('selected');\n      selectedPosition = selected.position().top + selected.outerHeight();\n      containerHeight = selected.parent().outerHeight();\n      if (selectedPosition > containerHeight) {\n        diff = selectedPosition - containerHeight;\n        return selected.parent().scrollTop(selected.parent().scrollTop() + diff);\n      } else if (selected.position().top < 0) {\n        return selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top);\n      }\n    };\n    dispatch = function(el, code, scope) {\n      var activeElement, next, prev;\n      activeElement = el.find(\".selected\");\n      if (code === 40) {\n        if (!activeElement.length) {\n          return select(el.find('li:first'));\n        } else {\n          next = activeElement.next('li');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return select(next);\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return select(el.find('li:last'));\n        } else {\n          prev = activeElement.prev('li');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return select(prev);\n          }\n        }\n      }\n    };\n    stop = function() {\n      return $(document).off(\".tags-keyboard-navigation\");\n    };\n    link = function(scope, el) {\n      stop();\n      $(el).parent().on(\"keydown.tags-keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38) {\n            event.preventDefault();\n            return dispatch(el, code, scope);\n          }\n        };\n      })(this));\n      return scope.$on(\"$destroy\", stop);\n    };\n    return {\n      link: link,\n      templateUrl: \"components/tags/tag-dropdown/tag-dropdown.html\",\n      scope: {\n        onSelectTag: \"&\",\n        colorArray: \"=\",\n        tag: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgTagsDropdown\", TagOptionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonController = (function() {\n    TagLineCommonController.$inject = [\"tgTagLineService\"];\n\n    function TagLineCommonController(tagLineService) {\n      this.tagLineService = tagLineService;\n      this.disableColorSelection = false;\n      this.newTag = {\n        name: \"\",\n        color: null\n      };\n      this.colorArray = [];\n      this.addTag = false;\n    }\n\n    TagLineCommonController.prototype.checkPermissions = function() {\n      var hasPermissions;\n      hasPermissions = this.tagLineService.checkPermissions(this.project.my_permissions, this.permissions);\n      return hasPermissions;\n    };\n\n    TagLineCommonController.prototype._createColorsArray = function(projectTagColors) {\n      return this.colorArray = this.tagLineService.createColorsArray(projectTagColors);\n    };\n\n    TagLineCommonController.prototype.displayTagInput = function() {\n      return this.addTag = true;\n    };\n\n    TagLineCommonController.prototype.addNewTag = function(name, color) {\n      this.newTag.name = \"\";\n      this.newTag.color = null;\n      if (!name.length) {\n        return;\n      }\n      if (this.disableColorSelection) {\n        if (name.length) {\n          return this.onAddTag({\n            name: name,\n            color: color\n          });\n        }\n      } else {\n        if (this.project.tags_colors[name]) {\n          color = this.project.tags_colors[name];\n        }\n        return this.onAddTag({\n          name: name,\n          color: color\n        });\n      }\n    };\n\n    TagLineCommonController.prototype.selectColor = function(color) {\n      return this.newTag.color = color;\n    };\n\n    return TagLineCommonController;\n\n  })();\n\n  module.controller(\"TagLineCommonCtrl\", TagLineCommonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      var unwatch;\n      if (!_.isUndefined(attr.disableColorSelection)) {\n        ctrl.disableColorSelection = true;\n      }\n      unwatch = scope.$watch(\"vm.project\", function(project) {\n        if (!project || !Object.keys(project).length) {\n          return;\n        }\n        unwatch();\n        if (!ctrl.disableColorSelection) {\n          return ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors);\n        }\n      });\n      return el.on(\"keydown\", \".tag-input\", function(event) {\n        var tagName;\n        if (event.keyCode === 27) {\n          ctrl.addTag = false;\n          ctrl.newTag.name = \"\";\n          ctrl.newTag.color = \"\";\n          event.stopPropagation();\n        } else if (event.keyCode === 13) {\n          event.preventDefault();\n          if (el.find('.tags-dropdown .selected').length) {\n            tagName = $('.tags-dropdown .selected .tags-dropdown-name').text();\n            ctrl.addNewTag(tagName, null);\n          } else {\n            ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color);\n          }\n        }\n        return scope.$apply();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        permissions: \"@\",\n        loadingAddTag: \"=\",\n        loadingRemoveTag: \"=\",\n        tags: \"=\",\n        project: \"=\",\n        onAddTag: \"&\",\n        onDeleteTag: \"&\"\n      },\n      templateUrl: \"components/tags/tag-line-common/tag-line-common.html\",\n      controller: \"TagLineCommonCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLineCommon\", TagLineCommonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineController = (function() {\n    TagLineController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\"];\n\n    function TagLineController(rootScope, confirm, modelTransform) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.loadingAddTag = false;\n    }\n\n    TagLineController.prototype.onDeleteTag = function(tag) {\n      var onDeleteTagError, onDeleteTagSuccess, tagName, transform;\n      this.loadingRemoveTag = tag[0];\n      onDeleteTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.loadingRemoveTag = false;\n          return item;\n        };\n      })(this);\n      onDeleteTagError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.loadingRemoveTag = false;\n        };\n      })(this);\n      tagName = trim(tag[0].toLowerCase());\n      transform = this.modelTransform.save(function(item) {\n        var itemtags;\n        itemtags = _.clone(item.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === tagName;\n        });\n        item.tags = itemtags;\n        return item;\n      });\n      return transform.then(onDeleteTagSuccess, onDeleteTagError);\n    };\n\n    TagLineController.prototype.onAddTag = function(tag, color) {\n      var onAddTagError, onAddTagSuccess, transform;\n      this.loadingAddTag = true;\n      onAddTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.rootScope.$broadcast(\"tags:updated\");\n          _this.addTag = false;\n          _this.loadingAddTag = false;\n          return item;\n        };\n      })(this);\n      onAddTagError = (function(_this) {\n        return function() {\n          _this.loadingAddTag = false;\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      transform = this.modelTransform.save((function(_this) {\n        return function(item) {\n          var itemtags, value;\n          value = trim(tag.toLowerCase());\n          itemtags = _.clone(item.tags);\n          itemtags.push([tag, color]);\n          item.tags = itemtags;\n          return item;\n        };\n      })(this));\n      return transform.then(onAddTagSuccess, onAddTagError);\n    };\n\n    return TagLineController;\n\n  })();\n\n  module.controller(\"TagLineCtrl\", TagLineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineDirective = function() {\n    return {\n      scope: {\n        item: \"=\",\n        permissions: \"@\",\n        project: \"=\"\n      },\n      templateUrl: \"components/tags/tag-line-detail/tag-line-detail.html\",\n      controller: \"TagLineCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLine\", TagLineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module('taigaCommon');\n\n  TagLineService = (function(superClass) {\n    extend(TagLineService, superClass);\n\n    TagLineService.$inject = [];\n\n    function TagLineService() {}\n\n    TagLineService.prototype.checkPermissions = function(myPermissions, projectPermissions) {\n      return _.includes(myPermissions, projectPermissions);\n    };\n\n    TagLineService.prototype.createColorsArray = function(projectTagColors) {\n      return _.map(projectTagColors, function(index, value) {\n        return [value, index];\n      });\n    };\n\n    return TagLineService;\n\n  })(taiga.Service);\n\n  module.service(\"tgTagLineService\", TagLineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagDirective = function() {\n    return {\n      templateUrl: \"components/tags/tag/tag.html\",\n      scope: {\n        tag: \"<\",\n        loadingRemoveTag: \"<\",\n        onDeleteTag: \"&\",\n        hasPermissions: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgTag\", TagDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardZoomDirective;\n\n  TaskboardZoomDirective = function(storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"taskboard_zoom\", 2);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\"], [\"tags\", \"extra_info\", \"unfold\", \"card-data\", \"assigned_to_extended\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"taskboard_zoom\")) !== zoomIndex) {\n          storage.set(\"taskboard_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    levels=\\\"levels\\\"\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TasksSortableDirective;\n\n  TasksSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_task\")) {\n        return;\n      }\n      callback = $parse(attrs.tgTasksSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.single-related-task.js-related-task');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, task;\n        itemEl = $(item);\n        task = itemEl.scope().task;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            task: task,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  TasksSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TermsOfServiceAndPrivacyPolicyNoticeDirective;\n\n  TermsOfServiceAndPrivacyPolicyNoticeDirective = function($config) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\");\n      scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\");\n      scope.target = false;\n      if (!scope.privacyPolicyUrl || !scope.termsOfServiceUrl) {\n        scope.target = true;\n      }\n      return el.on(\"change\", \"input[name='accepted_terms']\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        scope.target = target.is(\":checked\");\n        return scope.$apply();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      link: link,\n      scope: {\n        target: \"=\"\n      },\n      templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\"$tgConfig\", TermsOfServiceAndPrivacyPolicyNoticeDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToDirective;\n\n  AssignedToDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, isEditable, isIocaine, isSelfAssigned, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      isIocaine = function(item) {\n        return item != null ? item.is_iocaine : void 0;\n      };\n      isSelfAssigned = function() {\n        return $scope.assignedUser && $scope.assignedUser.id === currentUserId;\n      };\n      save = function(userId) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_to = userId;\n          return item;\n        });\n        transform.then(function(item) {\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n        return transform;\n      };\n      render = function(item) {\n        $scope.assignedUser = $scope.usersById[item != null ? item.assigned_to : void 0];\n        $scope.isEditable = isEditable();\n        $scope.isIocaine = isIocaine(item);\n        return $scope.isSelfAssigned = isSelfAssigned();\n      };\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\");\n        return $confirm.ask(title).then(function(response) {\n          response.finish();\n          return save(null);\n        });\n      });\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers.pop() || null);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [item.assigned_to],\n          \"activeUsers\": this.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $scope.selfAssign = function() {\n        return save(currentUserId);\n      };\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/ticket-assigned/assigned-to.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, deleteAssignedUser, isEditable, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      $scope.visibleAssignedUsersCount = 4;\n      $scope.displayHidden = false;\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      save = function(assignedUsersIds, assignedToUser) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_users = assignedUsersIds;\n          if (assignedToUser) {\n            item.assigned_to = assignedToUser;\n          } else if (!assignedUsersIds.length) {\n            item.assigned_to = null;\n          } else if (!_.includes(assignedUsersIds, item.assigned_to)) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          return item;\n        });\n        transform.then(function() {\n          var result;\n          return result = $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": item.assigned_users,\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.openAssignedUsers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var assignedUserId, message, target, title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        assignedUserId = target.data(\"user-id\");\n        title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\");\n        message = $scope.usersById[assignedUserId].full_name_display;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var assignedUserIds;\n          askResponse.finish();\n          assignedUserIds = _.clone($model.$modelValue.assigned_users, false);\n          assignedUserIds = _.pull(assignedUserIds, assignedUserId);\n          return deleteAssignedUser(assignedUserIds);\n        });\n      });\n      $scope.selfAssign = function() {\n        var assignedUsers;\n        if (!isEditable()) {\n          return;\n        }\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(currentUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, currentUserId);\n      };\n      deleteAssignedUser = function(assignedUserIds) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          var ref1;\n          item.assigned_users = assignedUserIds;\n          if ((ref1 = item.assigned_to, indexOf.call(assignedUserIds, ref1) < 0) && assignedUserIds.length > 0) {\n            item.assigned_to = assignedUserIds[0];\n          }\n          if (assignedUserIds.length === 0) {\n            item.assigned_to = null;\n          }\n          return item;\n        });\n        transform.then(function() {\n          var item;\n          item = $modelTransform.getObj();\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          item.revert();\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      render = function(assignedUserIds) {\n        var assignedUsers;\n        assignedUsers = _.map(assignedUserIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        $scope.assignedUsers = _.compact(assignedUsers);\n        $scope.selfAssigned = _.includes(assignedUserIds, currentUserId);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.$on(\"assigned-user:deleted\", function(ctx, assignedUserId) {\n        var assignedUsersIds;\n        assignedUsersIds = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsersIds = _.pull(assignedUsersIds, assignedUserId);\n        assignedUsersIds = _.uniq(assignedUsersIds);\n        return deleteAssignedUser(assignedUsersIds);\n      });\n      $scope.$on(\"assigned-user:added\", function(ctx, assignedUserId) {\n        var assignedUsers;\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(assignedUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, assignedUserId);\n      });\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item.assigned_users);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      templateUrl: \"components/ticket-assigned/assigned-users.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TicketWatchersController;\n\n  TicketWatchersController = (function() {\n    TicketWatchersController.$inject = [\"tgCurrentUserService\", \"$rootScope\", \"tgLightboxFactory\", \"$translate\", \"$tgQueueModelTransformation\"];\n\n    function TicketWatchersController(currentUserService, rootScope, lightboxFactory, translate, modelTransform) {\n      this.currentUserService = currentUserService;\n      this.rootScope = rootScope;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    TicketWatchersController.prototype.openWatchers = function() {\n      var onClose;\n      onClose = (function(_this) {\n        return function(watchersIds) {\n          return _this.save(watchersIds);\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": this.item.watchers,\n        \"activeUsers\": this.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.WATCHERS.ADD\")\n      });\n    };\n\n    TicketWatchersController.prototype.getPerms = function() {\n      var name, perms;\n      if (!this.item) {\n        return \"\";\n      }\n      name = this.item._name;\n      perms = {\n        userstories: 'modify_us',\n        issues: 'modify_issue',\n        tasks: 'modify_task',\n        epics: 'modify_epic'\n      };\n      return perms[name];\n    };\n\n    TicketWatchersController.prototype.watch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._watch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.unwatch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._unwatch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.deleteWatcher = function(watcherId) {\n      var watchersIds;\n      watchersIds = _.filter(this.item.watchers, (function(_this) {\n        return function(x) {\n          return x !== watcherId;\n        };\n      })(this));\n      return this.save(watchersIds);\n    };\n\n    TicketWatchersController.prototype.save = function(watchersIds) {\n      var transform;\n      this.loading = true;\n      transform = this.modelTransform.save(function(item) {\n        item.watchers = watchersIds;\n        return item;\n      });\n      transform.then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return transform[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    TicketWatchersController.prototype._watch = function() {\n      return this.onWatch();\n    };\n\n    TicketWatchersController.prototype._unwatch = function() {\n      return this.onUnwatch();\n    };\n\n    return TicketWatchersController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchersDirective;\n\n  WatchersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var isEditable, render;\n      $scope.visibleWatchersCount = 4;\n      $scope.displayHidden = false;\n      $scope.isAuthenticated = !!$currentUserService.getUser();\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      render = function() {\n        var ref, watchers, watchersIds;\n        watchersIds = _.clone((ref = $scope.vm.item) != null ? ref.watchers : void 0, false);\n        watchers = _.map(watchersIds, function(watcherId) {\n          return $scope.usersById[watcherId];\n        });\n        watchers = _.filter(watchers, function(it) {\n          return !!it;\n        });\n        $scope.vm.watchers = _.compact(watchers);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.vm.openWatchers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var message, target, title, watcherId;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        watcherId = target.data(\"watcher-id\");\n        title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\");\n        message = $scope.usersById[watcherId].full_name_display;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            askResponse.finish();\n            return $scope.vm.deleteWatcher(watcherId);\n          };\n        })(this));\n      });\n      $scope.$on(\"watcher:added\", function(ctx, watcherId) {\n        var watchersIds;\n        watchersIds = _.clone($scope.item.watchers, false);\n        watchersIds.push(watcherId);\n        watchersIds = _.uniq(watchers);\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$on(\"watchers:selected\", function(ctx, watchersIds) {\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$watch(\"vm.item\", function(item) {\n        if (!item) {\n          return;\n        }\n        return render();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      controller: \"TicketWatchersController\",\n      bindToController: {\n        item: \"=\",\n        onWatch: \"=\",\n        onUnwatch: \"=\",\n        activeUsers: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\n      link: link\n    };\n  };\n\n  WatchersDirective.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, timeout, tipsDirective;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaComponents\");\n\n  tipsDirective = function(tgLoader, $translate) {\n    var link, randomInt, tips;\n    tips = [\n      {\n        contentType: \"icon\",\n        icon: \"icon-project\",\n        message: \"PROJECTS_ORDER\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-upvote\",\n        message: \"VOTING\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-attach\",\n        message: \"ISSUES_TO_SPRINT\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-clock\",\n        message: \"DUE_DATE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-iocaine\",\n        message: \"IOCAIN\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-blocked-project\",\n        message: \"BLOCKED\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-promote\",\n        message: \"PROMOTE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-bulk\",\n        message: \"BULK\"\n      }, {\n        contentType: \"range\",\n        message: \"ZOOM\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-settings\",\n        message: \"CUSTOM_FIELDS\"\n      }, {\n        contentType: \"arrows\",\n        message: \"SLIDE_ARROWS\"\n      }\n    ];\n    randomInt = function(size) {\n      return Math.floor(Math.random() * size) + 1;\n    };\n    link = function(scope, el, attrs) {\n      var loadTip, waitingTimeout;\n      scope.tipLoaded = false;\n      waitingTimeout = null;\n      tgLoader.onStart(function() {\n        return waitingTimeout = timeout(1000, function() {\n          return loadTip();\n        });\n      });\n      tgLoader.onEnd(function() {\n        clearTimeout(waitingTimeout);\n        return scope.tipLoaded = false;\n      });\n      return loadTip = function() {\n        var tip;\n        scope.tipLoaded = true;\n        tip = tips[randomInt(tips.length - 1)];\n        return scope.tip = {\n          contentType: tip.contentType,\n          message: \"TIPS.TIP_\" + tip.message,\n          icon: tip.icon,\n          color: \"tip-color-\" + (randomInt(5))\n        };\n      };\n    };\n    return {\n      link: link,\n      scope: true,\n      templateUrl: \"components/tips/tip.html\"\n    };\n  };\n\n  module.directive('tgTips', ['tgLoader', '$translate', tipsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeButtonDirective;\n\n  TribeButtonDirective = function(configService, locationService) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.url = (locationService.protocol()) + \"://\" + (locationService.host());\n      if (locationService.protocol() === \"http\" && locationService.port() !== 80) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      } else if (locationService.protocol() === \"https\" && locationService.port() !== 443) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      }\n    };\n    return {\n      scope: {\n        usId: \"=\",\n        projectSlug: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/tribe-button/tribe-button.html\",\n      link: link\n    };\n  };\n\n  TribeButtonDirective.$inject = [\"$tgConfig\", \"$tgLocation\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeLinkedDirective;\n\n  TribeLinkedDirective = function(configService) {\n    var directive, link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.show = function() {\n        return scope.vm.open = true;\n      };\n      return scope.vm.hide = function(event) {\n        return scope.vm.open = false;\n      };\n    };\n    directive = {\n      templateUrl: \"components/tribe-button/tribe-linked.html\",\n      scope: {\n        gigTitle: \"=\",\n        gigId: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  TribeLinkedDirective.$inject = [\"$tgConfig\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonController;\n\n  VoteButtonController = (function() {\n    VoteButtonController.$inject = [\"tgCurrentUserService\"];\n\n    function VoteButtonController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    VoteButtonController.prototype.toggleVote = function() {\n      var promise;\n      this.loading = true;\n      if (!this.item.is_voter) {\n        promise = this.onUpvote();\n      } else {\n        promise = this.onDownvote();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    return VoteButtonController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonDirective;\n\n  VoteButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"VoteButton\",\n      bindToController: {\n        item: \"=\",\n        onUpvote: \"=\",\n        onDownvote: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/vote-button/vote-button.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectSwimlanesWipLimitController;\n\n  ProjectSwimlanesWipLimitController = (function() {\n    ProjectSwimlanesWipLimitController.$inject = [\"$scope\", \"$rootScope\", \"$tgResources\"];\n\n    function ProjectSwimlanesWipLimitController(scope, rootscope, rs) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.rs = rs;\n      this.new_wip_limit = this.status.wip_limit;\n    }\n\n    ProjectSwimlanesWipLimitController.prototype.submitSwimlaneNewStatus = function() {\n      this.scope.displayWipLimitSelector = false;\n      if (!!this.status.swimlane_userstory_status_id) {\n        return this.rs.swimlanes.wipLimitUpdate(this.status.swimlane_userstory_status_id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"swimlane:load\");\n          };\n        })(this));\n      } else {\n        return this.rs.userstories.editStatus(this.status.id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"project:load\");\n          };\n        })(this));\n      }\n    };\n\n    return ProjectSwimlanesWipLimitController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectSwimlanesWipLimit\", ProjectSwimlanesWipLimitController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WipLimitSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  WipLimitSelector = function($timeout) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.displayWipLimitSelector = false;\n      return scope.toggleWipSelectorVisibility = function() {\n        return scope.displayWipLimitSelector = !scope.displayWipLimitSelector;\n      };\n    };\n    return {\n      link: link,\n      scope: {},\n      templateUrl: \"components/wip-limit-selector/wip-limit-selector.html\",\n      controller: \"ProjectSwimlanesWipLimit\",\n      bindToController: {\n        status: '='\n      },\n      controllerAs: \"vm\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgWipLimitSelector\", [WipLimitSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentEditWysiwyg;\n\n  CommentEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.uploadFiles = function(file, cb) {\n        var object, projectId;\n        projectId = parseInt($scope.vm.projectId, 10);\n        object = parseInt($scope.vm.object, 10);\n        if (!projectId) {\n          projectId = parseInt($scope.vm.project.id, 10);\n        }\n        return attachmentsFullService.addAttachment(projectId, object, attachmentsFullService.types[$scope.vm.name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        editonly\\n        required\\n        project=\\\"vm.project\\\"\\n        content='vm.comment.comment'\\n        on-save=\\\"vm.saveComment(text, cb)\\\"\\n        on-cancel=\\\"vm.onEditMode({commentId: vm.comment.id})\\\"\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentWysiwyg;\n\n  CommentWysiwyg = function($modelTransform, $rootscope, attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveComment = function(description, cb) {\n        var transform;\n        $scope.content = '';\n        $scope.vm.type.comment = description;\n        transform = $modelTransform.save(function(item) {});\n        transform.then(function() {\n          if ($scope.vm.onAddComment) {\n            $scope.vm.onAddComment();\n          }\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.onChange = function(markdown) {\n        return $scope.vm.type.comment = markdown;\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.vm.project.id, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.content = '';\n      return $scope.$watch(\"vm.type\", function(value) {\n        if (!value) {\n          return;\n        }\n        return $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        required\\n        not-persist\\n        project=\\\"vm.project\\\"\\n        placeholder=\\\"'COMMENTS.TYPE_NEW_COMMENT '| translate\\\"\\n        storage-key='storageKey'\\n        content='content'\\n        on-save='saveComment(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"tgAttachmentsFullService\", CommentWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CustomFieldEditWysiwyg;\n\n  CustomFieldEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      return $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.ctrl.objectId.toString(), types[$scope.ctrl.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<tg-wysiwyg\\n    class=\\\"custom-field\\\"\\n    editonly=\\\"!!customAttributeValue.value.length\\\"\\n    project=\\\"project\\\"\\n    content='customAttributeValue.value'\\n    on-save=\\\"saveCustomRichText(text, cb)\\\"\\n    on-cancel=\\\"cancelCustomRichText()\\\"\\n    on-upload-file='uploadFiles'>\\n</tg-wysiwyg>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ItemWysiwyg;\n\n  ItemWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveDescription = function(description, cb) {\n        var transform;\n        transform = $modelTransform.save(function(item) {\n          item.description = description;\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, types[$attrs.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type;\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        return $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) !== -1;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription && project\\\"\\n        html-read-mode=\\\"true\\\"\\n        project=\\\"project\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        storage-key='storageKey'\\n        content='item.description'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.description.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.description\\\"></div>\\n\\n    <div\\n        class=\\\"wysiwyg no-description\\\"\\n        ng-if=\\\"!editableDescription && !item.description.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgItemWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$translate\", ItemWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Wysiwyg, taiga;\n\n  taiga = this.taiga;\n\n  Wysiwyg = function($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, analytics, $location, $attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var change, clean, create, discardLocalStorage, editorLinks, getCurrentContent, isDraft, isEditOnly, isOutdated, linksEvents, localSave, notPersist, pageAttachments, saveEnd, setHtmlEditor, textEditor, throttleChange, unwatchContent, updateMarkdownWithCurrentHtml;\n      isEditOnly = !!$attrs.$attr.editonly;\n      notPersist = !!$attrs.$attr.notPersist;\n      if ($scope.editonly !== void 0) {\n        isEditOnly = $scope.editonly;\n      }\n      $scope.required = !!$attrs.$attr.required;\n      $scope.editMode = isEditOnly || false;\n      $scope.mode = localStorage.getItem('editor-mode') || 'html';\n      if ($scope.mode !== 'html' && $scope.mode !== 'markdown') {\n        $scope.mode = 'html';\n      }\n      $scope.markdown = '';\n      $scope.html = '';\n      textEditor = null;\n      pageAttachments = $attachmentsFullService.attachments.toJS();\n      editorLinks = [];\n      linksEvents = function() {\n        $el.on('mousedown', '.js-wysiwyg-html', (function(_this) {\n          return function(e) {\n            if (e.target.tagName !== 'A' && e.target.parentElement.tagName !== 'A') {\n              return $scope.$applyAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          };\n        })(this));\n        editorLinks = textEditor.querySelectorAll('a[target=\"_blank\"]:not(.link-event)');\n        if (editorLinks.length) {\n          return editorLinks.forEach((function(_this) {\n            return function(link) {\n              link.classList.add('link-event');\n              link.addEventListener('mousedown', function(e) {\n                if (!$scope.editMode) {\n                  e.preventDefault();\n                  return e.stopPropagation();\n                }\n              });\n              return link.addEventListener('click', function(e) {\n                if (!$scope.editMode) {\n                  return window.open(e.currentTarget.getAttribute('href'), '_blank');\n                }\n              });\n            };\n          })(this));\n        }\n      };\n      unwatchContent = $scope.$watch('content', function(content) {\n        var unwatchLoader;\n        if (!_.isUndefined(content)) {\n          $scope.outdated = isOutdated();\n          if (($scope.markdown.length || content.length) && $scope.markdown === content) {\n            return;\n          }\n          content = getCurrentContent();\n          $scope.markdown = content;\n          if (tgLoader.open()) {\n            unwatchLoader = tgLoader.onEnd(function() {\n              return $scope.$evalAsync(function() {\n                create(content);\n                return unwatchLoader();\n              });\n            });\n          } else {\n            create(content);\n          }\n          return unwatchContent();\n        }\n      });\n      create = (function(_this) {\n        return function(text) {\n          if (textEditor) {\n            return;\n          }\n          textEditor = document.createElement('tg-text-editor');\n          textEditor.projectId = $scope.project.id;\n          textEditor.projectSlug = $scope.project.slug;\n          textEditor.placeholder = $scope.placeholder;\n          setHtmlEditor(text);\n          textEditor.mode = $scope.mode;\n          textEditor.lan = $translate.preferredLanguage();\n          textEditor.uploadFunction = $scope.onUploadFile;\n          textEditor.members = $scope.project.members.map(function(member) {\n            return Object.assign(member, {\n              fullNameDisplay: member.full_name_display\n            });\n          });\n          $scope.$applyAsync(function() {\n            return linksEvents();\n          });\n          if (isDraft()) {\n            $scope.setEditMode(true);\n          }\n          textEditor.addEventListener('modeChanged', function(event) {\n            return $scope.$evalAsync(function() {\n              $scope.mode = event.detail;\n              $scope.setEditMode(true);\n              return localStorage.setItem('editor-mode', $scope.mode);\n            });\n          });\n          textEditor.addEventListener('focusChanged', function(event) {\n            if (event.detail) {\n              return $scope.$evalAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          });\n          textEditor.addEventListener('changed', function(event) {\n            if ($scope.mode === 'html') {\n              $scope.html = event.detail;\n            } else {\n              $scope.markdown = event.detail;\n            }\n            return throttleChange();\n          });\n          return $el.find('.editor-wrapper')[0].appendChild(textEditor);\n        };\n      })(this);\n      setHtmlEditor = function(markdown) {\n        return wysiwygService.refreshAttachmentURLFromMarkdown(markdown).then((function(_this) {\n          return function(markdown) {\n            return textEditor.markdown = markdown;\n          };\n        })(this));\n      };\n      $scope.setEditMode = function(editMode) {\n        $scope.editMode = editMode;\n        if (editMode) {\n          return textEditor.mode = $scope.mode;\n        } else {\n          return textEditor.mode = 'html';\n        }\n      };\n      $scope.save = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        setHtmlEditor($scope.markdown);\n        if ($scope.required && !$scope.markdown.length) {\n          return;\n        }\n        $scope.saving = true;\n        $scope.outdated = false;\n        $scope.onSave({\n          text: $scope.markdown,\n          cb: saveEnd\n        });\n        linksEvents();\n      };\n      $scope.cancel = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        } else {\n          $scope.markdown = $scope.content;\n          setHtmlEditor($scope.content || '');\n        }\n        discardLocalStorage();\n        $scope.outdated = false;\n        $scope.onCancel();\n        linksEvents();\n      };\n      clean = function() {\n        $scope.markdown = '';\n        return setHtmlEditor('');\n      };\n      saveEnd = function() {\n        $scope.saving = false;\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        }\n        discardLocalStorage();\n        return analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1);\n      };\n      isOutdated = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store && store.version && store.version !== $scope.version) {\n          return true;\n        }\n        return false;\n      };\n      isDraft = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return true;\n        }\n        return false;\n      };\n      getCurrentContent = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return store.text;\n        }\n        return $scope.content;\n      };\n      discardLocalStorage = function() {\n        return $storage.remove($scope.storageKey);\n      };\n      $scope.cancelWithConfirmation = function() {\n        var message, title;\n        if ($scope.content === $scope.markdown) {\n          $scope.cancel();\n          if (document.activeElement.blur) {\n            document.activeElement.blur();\n          }\n          document.body.click();\n          return null;\n        }\n        title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\");\n        message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\");\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          $scope.cancel();\n          return askResponse.finish();\n        });\n      };\n      updateMarkdownWithCurrentHtml = function() {\n        return $scope.markdown = wysiwygService.getMarkdown($scope.html);\n      };\n      localSave = function(markdown) {\n        var store;\n        if ($scope.storageKey) {\n          store = {};\n          store.version = $scope.version || 0;\n          store.text = markdown;\n          return $storage.set($scope.storageKey, store);\n        }\n      };\n      change = function() {\n        if (!$scope.editMode) {\n          return;\n        }\n        if ($scope.mode === 'html') {\n          updateMarkdownWithCurrentHtml();\n        }\n        localSave($scope.markdown);\n        return $scope.onChange({\n          markdown: $scope.markdown\n        });\n      };\n      return throttleChange = _.throttle(change, 200);\n    };\n    return {\n      templateUrl: \"common/components/wysiwyg-toolbar.html\",\n      scope: {\n        htmlReadMode: '<',\n        editonly: '<',\n        project: '<',\n        placeholder: '<',\n        version: '<',\n        storageKey: '<',\n        content: '<',\n        onCancel: '&',\n        onSave: '&',\n        onUploadFile: '<',\n        onChange: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\"$translate\", \"$tgConfirm\", \"$tgStorage\", \"tgWysiwygService\", \"animationFrame\", \"tgLoader\", \"$tgAnalytics\", \"$location\", \"tgAttachmentsFullService\", Wysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WysiwygService;\n\n  WysiwygService = (function() {\n    WysiwygService.$inject = [\"tgProjectService\", \"tgAttachmentsFullService\", \"tgAttachmentsService\", \"$sce\"];\n\n    function WysiwygService(projectService, attachmentsFullService, attachmentsService, sce) {\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.attachmentsService = attachmentsService;\n      this.sce = sce;\n      this.projectDataConversion = {};\n      this.cache = {};\n    }\n\n    WysiwygService.prototype.getMarkdown = function(html) {\n      var projectId;\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toMarkdown(html);\n    };\n\n    WysiwygService.prototype.getHTML = function(text) {\n      var projectId;\n      if (!text || !text.length) {\n        return \"\";\n      }\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toHtml(text);\n    };\n\n    WysiwygService.prototype.getAttachmentData = function(tokens) {\n      return this.attachmentsService.get(tokens[0], tokens[1]).then((function(_this) {\n        return function(response) {\n          return response.data.url;\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.getCachedAttachment = function(tokens) {\n      var attachment, attachmentId, attachments, cache_key, cached_result;\n      attachmentId = parseInt(tokens[1], 10);\n      attachments = this.attachmentsFullService.attachments.toJS();\n      attachment = attachments.find((function(_this) {\n        return function(attachment) {\n          return attachment.file.id === attachmentId;\n        };\n      })(this));\n      if (attachment) {\n        return Promise.resolve(attachment.file.url);\n      } else {\n        cache_key = tokens[0] + tokens[1];\n        cached_result = this.cache[cache_key];\n        if (cached_result) {\n          return Promise.resolve(cached_result);\n        } else {\n          return this.getAttachmentData(tokens).then((function(_this) {\n            return function(url) {\n              _this.cache[cache_key] = url;\n              return url;\n            };\n          })(this));\n        }\n      }\n    };\n\n    WysiwygService.prototype.refreshAttachmentURLFromMarkdown = function(markdown) {\n      var html;\n      html = this.getHTML(markdown);\n      return this.refreshAttachmentURL(html).then((function(_this) {\n        return function(html) {\n          return _this.getMarkdown(html);\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.refreshAttachmentURL = function(html) {\n      var el, images, links, promises, regex;\n      el = document.createElement('html');\n      window._extraValidHtmlElments = {\n        input: true\n      };\n      window._extraValidAttrs = {\n        checked: true\n      };\n      el.innerHTML = this.sce.getTrustedHtml(html) || '';\n      regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/;\n      links = {\n        \"elements\": el.querySelectorAll('a'),\n        \"attr\": \"href\"\n      };\n      images = {\n        \"elements\": el.querySelectorAll('img'),\n        \"attr\": \"src\"\n      };\n      promises = [];\n      _.map([links, images], (function(_this) {\n        return function(tag) {\n          return _.map(tag.elements, function(e) {\n            var match, promise, tokens;\n            if (e.getAttribute(tag.attr) && e.getAttribute(tag.attr).indexOf('#_taiga-refresh=') !== -1) {\n              match = e.getAttribute(tag.attr).match(regex);\n              if (match && match.length === 2) {\n                tokens = match[1].split(\":\");\n                promise = _this.getCachedAttachment(tokens).then(function(url) {\n                  return e.setAttribute(tag.attr, url);\n                })[\"catch\"](function() {\n                  return console.warn('attachment ref not found', e.getAttribute(tag.attr));\n                });\n                return promises.push(promise);\n              }\n            }\n          });\n        };\n      })(this));\n      return Promise.all(promises).then(function() {\n        return el.innerHTML;\n      });\n    };\n\n    return WysiwygService;\n\n  })();\n\n  angular.module(\"taigaComponents\").service(\"tgWysiwygService\", WysiwygService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByController;\n\n  DiscoverHomeOrderByController = (function() {\n    DiscoverHomeOrderByController.$inject = ['$translate'];\n\n    function DiscoverHomeOrderByController(translate) {\n      this.translate = translate;\n      this.is_open = false;\n      this.texts = {\n        week: this.translate.instant('DISCOVER.FILTERS.WEEK'),\n        month: this.translate.instant('DISCOVER.FILTERS.MONTH'),\n        year: this.translate.instant('DISCOVER.FILTERS.YEAR'),\n        all: this.translate.instant('DISCOVER.FILTERS.ALL_TIME')\n      };\n    }\n\n    DiscoverHomeOrderByController.prototype.currentText = function() {\n      return this.texts[this.currentOrderBy];\n    };\n\n    DiscoverHomeOrderByController.prototype.open = function() {\n      return this.is_open = true;\n    };\n\n    DiscoverHomeOrderByController.prototype.close = function() {\n      return this.is_open = false;\n    };\n\n    DiscoverHomeOrderByController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      this.is_open = false;\n      return this.onChange({\n        orderBy: this.currentOrderBy\n      });\n    };\n\n    return DiscoverHomeOrderByController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByDirective;\n\n  DiscoverHomeOrderByDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverHomeOrderBy\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\n      scope: {\n        currentOrderBy: \"=orderBy\",\n        onChange: \"&\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverHomeOrderByDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarController;\n\n  DiscoverSearchBarController = (function() {\n    DiscoverSearchBarController.$inject = ['tgDiscoverProjectsService'];\n\n    function DiscoverSearchBarController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.projectsCount;\n        };\n      })(this));\n      this.discoverProjectsService.fetchStats();\n    }\n\n    DiscoverSearchBarController.prototype.selectFilter = function(filter) {\n      return this.onChange({\n        filter: filter,\n        q: this.q\n      });\n    };\n\n    DiscoverSearchBarController.prototype.submitFilter = function() {\n      return this.onChange({\n        filter: this.filter,\n        q: this.q\n      });\n    };\n\n    return DiscoverSearchBarController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarDirective;\n\n  DiscoverSearchBarDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      controller: \"DiscoverSearchBar\",\n      controllerAs: \"vm\",\n      templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\n      bindToController: true,\n      scope: {\n        q: \"=\",\n        filter: \"=\",\n        onChange: \"&\"\n      },\n      compile: function(element, attrs) {\n        if (!attrs.q) {\n          return attrs.q = '';\n        }\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchBarDirective.$inject = [];\n\n  angular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderController;\n\n  DiscoverSearchListHeaderController = (function() {\n    DiscoverSearchListHeaderController.$inject = [];\n\n    function DiscoverSearchListHeaderController() {\n      this.like_is_open = this.orderBy.indexOf('-total_fans') === 0;\n      this.activity_is_open = this.orderBy.indexOf('-total_activity') === 0;\n    }\n\n    DiscoverSearchListHeaderController.prototype.openLike = function() {\n      this.like_is_open = true;\n      this.activity_is_open = false;\n      return this.setOrderBy('-total_fans_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.openActivity = function() {\n      this.activity_is_open = true;\n      this.like_is_open = false;\n      return this.setOrderBy('-total_activity_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.setOrderBy = function(type) {\n      if (type == null) {\n        type = '';\n      }\n      if (!type) {\n        this.like_is_open = false;\n        this.activity_is_open = false;\n      }\n      return this.onChange({\n        orderBy: type\n      });\n    };\n\n    return DiscoverSearchListHeaderController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderDirective;\n\n  DiscoverSearchListHeaderDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverSearchListHeader\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\n      scope: {\n        onChange: \"&\",\n        orderBy: \"=\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchListHeaderDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsController;\n\n  FeaturedProjectsController = (function() {\n    FeaturedProjectsController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function FeaturedProjectsController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.featured;\n        };\n      })(this));\n      this.discoverProjectsService.fetchFeatured();\n    }\n\n    return FeaturedProjectsController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsDirective;\n\n  FeaturedProjectsDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"FeaturedProjects\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/featured-projects/featured-projects.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  FeaturedProjectsDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HighlightedDirective;\n\n  HighlightedDirective = function() {\n    return {\n      templateUrl: \"discover/components/highlighted/highlighted.html\",\n      scope: {\n        loading: \"=\",\n        highlighted: \"=\",\n        orderBy: \"=\"\n      }\n    };\n  };\n\n  HighlightedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveController;\n\n  MostActiveController = (function() {\n    MostActiveController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostActiveController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostActive;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostActiveController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostActive({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostActiveController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostActiveController.prototype.getOrderBy = function(type) {\n      if (this.currentOrderBy === 'all') {\n        return '-total_activity';\n      } else {\n        return '-total_activity_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostActiveController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveDirective;\n\n  MostActiveDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostActive\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-active/most-active.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostActiveDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedController;\n\n  MostLikedController = (function() {\n    MostLikedController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostLikedController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostLiked;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostLikedController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostLiked({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostLikedController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostLikedController.prototype.getOrderBy = function() {\n      if (this.currentOrderBy === 'all') {\n        return '-total_fans';\n      } else {\n        return '-total_fans_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostLikedController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedDirective;\n\n  MostLikedDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostLiked\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-liked/most-liked.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostLikedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeController;\n\n  DiscoverHomeController = (function() {\n    DiscoverHomeController.$inject = ['$tgLocation', '$tgNavUrls', 'tgAppMetaService', '$translate'];\n\n    function DiscoverHomeController(location, navUrls, appMetaService, translate) {\n      var description, title;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      title = this.translate.instant(\"DISCOVER.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n    }\n\n    DiscoverHomeController.prototype.onSubmit = function(q) {\n      var url;\n      url = this.navUrls.resolve('discover-search');\n      return this.location.search('text', q).path(url);\n    };\n\n    return DiscoverHomeController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchController;\n\n  DiscoverSearchController = (function() {\n    DiscoverSearchController.$inject = ['$routeParams', 'tgDiscoverProjectsService', '$route', '$tgLocation', '$tgAnalytics', 'tgAppMetaService', '$translate'];\n\n    function DiscoverSearchController(routeParams, discoverProjectsService, route, location, analytics, appMetaService, translate) {\n      var description, title;\n      this.routeParams = routeParams;\n      this.discoverProjectsService = discoverProjectsService;\n      this.route = route;\n      this.location = location;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.page = 1;\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.nextSearchPage;\n        };\n      })(this));\n      this.q = this.routeParams.text;\n      this.filter = this.routeParams.filter || 'all';\n      this.orderBy = this.routeParams['order_by'] || '';\n      this.loadingGlobal = false;\n      this.loadingList = false;\n      this.loadingPagination = false;\n      title = this.translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n    }\n\n    DiscoverSearchController.prototype.fetch = function() {\n      this.page = 1;\n      this.discoverProjectsService.resetSearchList();\n      return this.search();\n    };\n\n    DiscoverSearchController.prototype.fetchByGlobalSearch = function() {\n      if (this.loadingGlobal) {\n        return;\n      }\n      this.loadingGlobal = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingGlobal = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.fetchByOrderBy = function() {\n      if (this.loadingList) {\n        return;\n      }\n      this.loadingList = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingList = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.showMore = function() {\n      if (this.loadingPagination) {\n        return;\n      }\n      this.loadingPagination = true;\n      this.page++;\n      return this.search().then((function(_this) {\n        return function() {\n          return _this.loadingPagination = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.search = function() {\n      var filter, params;\n      filter = this.getFilter();\n      params = {\n        page: this.page,\n        q: this.q,\n        order_by: this.orderBy\n      };\n      _.assign(params, filter);\n      return this.discoverProjectsService.fetchSearch(params);\n    };\n\n    DiscoverSearchController.prototype.getFilter = function() {\n      if (this.filter === 'people') {\n        return {\n          is_looking_for_people: true\n        };\n      } else if (this.filter === 'scrum') {\n        return {\n          is_backlog_activated: true\n        };\n      } else if (this.filter === 'kanban') {\n        return {\n          is_kanban_activated: true\n        };\n      }\n      return {};\n    };\n\n    DiscoverSearchController.prototype.onChangeFilter = function(filter, q) {\n      this.filter = filter;\n      this.q = q;\n      this.route.updateParams({\n        filter: this.filter,\n        text: this.q\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByGlobalSearch();\n    };\n\n    DiscoverSearchController.prototype.onChangeOrder = function(orderBy) {\n      this.orderBy = orderBy;\n      this.route.updateParams({\n        order_by: orderBy\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByOrderBy();\n    };\n\n    return DiscoverSearchController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchDirective;\n\n  DiscoverSearchDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  DiscoverSearchDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverProjectsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  DiscoverProjectsService = (function(superClass) {\n    var _discoverParams;\n\n    extend(DiscoverProjectsService, superClass);\n\n    DiscoverProjectsService.$inject = [\"tgResources\", \"tgProjectsService\"];\n\n    _discoverParams = {\n      discover_mode: true\n    };\n\n    function DiscoverProjectsService(rs, projectsService) {\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this._mostLiked = Immutable.List();\n      this._mostActive = Immutable.List();\n      this._featured = Immutable.List();\n      this._searchResult = Immutable.List();\n      this._projectsCount = 0;\n      this.decorate = this.projectsService._decorate.bind(this.projectsService);\n      taiga.defineImmutableProperty(this, \"mostLiked\", (function(_this) {\n        return function() {\n          return _this._mostLiked;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"mostActive\", (function(_this) {\n        return function() {\n          return _this._mostActive;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this._featured;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this._searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this._nextSearchPage;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsCount\", (function(_this) {\n        return function() {\n          return _this._projectsCount;\n        };\n      })(this));\n    }\n\n    DiscoverProjectsService.prototype.fetchMostLiked = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostLiked = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchMostActive = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostActive = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchFeatured = function() {\n      var _params;\n      _params = _.extend({}, _discoverParams);\n      _params.is_featured = true;\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._featured = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.resetSearchList = function() {\n      return this._searchResult = Immutable.List();\n    };\n\n    DiscoverProjectsService.prototype.fetchStats = function() {\n      return this.rs.stats.discover().then((function(_this) {\n        return function(discover) {\n          return _this._projectsCount = discover.getIn(['projects', 'total']);\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchSearch = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params).then((function(_this) {\n        return function(result) {\n          var projects;\n          _this._nextSearchPage = !!result.headers('X-Pagination-Next');\n          projects = Immutable.fromJS(result.data);\n          projects = projects.map(_this.decorate);\n          return _this._searchResult = _this._searchResult.concat(projects);\n        };\n      })(this));\n    };\n\n    return DiscoverProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicController, getRandomDefaultColor, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = taiga.trim;\n\n  getRandomDefaultColor = taiga.getRandomDefaultColor;\n\n  CreateEpicController = (function() {\n    CreateEpicController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"$tgAnalytics\"];\n\n    function CreateEpicController(confirm, projectService, epicsService, analytics) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.analytics = analytics;\n      this.project = this.projectService.project.toJS();\n      this.newEpic = {\n        color: getRandomDefaultColor(),\n        status: this.project.default_epic_status,\n        tags: []\n      };\n      this.attachments = Immutable.List();\n      this.loading = false;\n    }\n\n    CreateEpicController.prototype.createEpic = function() {\n      if (!this.validateForm()) {\n        return;\n      }\n      this.loading = true;\n      return this.epicsService.createEpic(this.newEpic, this.attachments).then((function(_this) {\n        return function(response) {\n          _this.analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1);\n          _this.onCreateEpic();\n          return _this.loading = false;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          _this.setFormErrors(response.data);\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this));\n    };\n\n    CreateEpicController.prototype.selectColor = function(color) {\n      return this.newEpic.color = color;\n    };\n\n    CreateEpicController.prototype.addTag = function(name, color) {\n      name = trim(name.toLowerCase());\n      if (!_.find(this.newEpic.tags, function(it) {\n        return it[0] === name;\n      })) {\n        return this.newEpic.tags.push([name, color]);\n      }\n    };\n\n    CreateEpicController.prototype.deleteTag = function(tag) {\n      return _.remove(this.newEpic.tags, function(it) {\n        return it[0] === tag[0];\n      });\n    };\n\n    CreateEpicController.prototype.addAttachment = function(attachment) {\n      return this.attachments.push(attachment);\n    };\n\n    return CreateEpicController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicDirective;\n\n  CreateEpicDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var form;\n      form = el.find(\"form\").checksley();\n      ctrl.validateForm = (function(_this) {\n        return function() {\n          return form.validate();\n        };\n      })(this);\n      return ctrl.setFormErrors = (function(_this) {\n        return function(errors) {\n          return form.setErrors(errors);\n        };\n      })(this);\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/create-epic/create-epic.html\",\n      controller: \"CreateEpicCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        onCreateEpic: '&'\n      },\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowController;\n\n  EpicRowController = (function() {\n    EpicRowController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\"];\n\n    function EpicRowController(confirm, projectService, epicsService) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.displayUserStories = false;\n      this.displayAssignedTo = false;\n      this.displayStatusList = false;\n      this.loadingStatus = false;\n      this.project = this.projectService.project.toJS();\n      this._calculateProgressBar();\n    }\n\n    EpicRowController.prototype._calculateProgressBar = function() {\n      var progress, total;\n      if (this.epic.getIn(['status_extra_info', 'is_closed']) === true) {\n        return this.percentage = \"100%\";\n      } else {\n        progress = this.epic.getIn(['user_stories_counts', 'progress']);\n        total = this.epic.getIn(['user_stories_counts', 'total']);\n        if (total === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (progress * 100 / total) + \"%\";\n        }\n      }\n    };\n\n    EpicRowController.prototype.canEditEpics = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    EpicRowController.prototype.toggleUserStoryList = function() {\n      if (!this.displayUserStories) {\n        return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n          return function(userStories) {\n            _this.epicStories = userStories;\n            return _this.displayUserStories = true;\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function() {\n            return _this.confirm.notify('error');\n          };\n        })(this));\n      } else {\n        return this.displayUserStories = false;\n      }\n    };\n\n    EpicRowController.prototype.updateStatus = function(statusId) {\n      this.displayStatusList = false;\n      this.loadingStatus = true;\n      return this.epicsService.updateEpicStatus(this.epic, statusId)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loadingStatus = false;\n        };\n      })(this));\n    };\n\n    EpicRowController.prototype.updateAssignedTo = function(member) {\n      this.assignLoader = true;\n      return this.epicsService.updateEpicAssignedTo(this.epic, (member != null ? member.id : void 0) || null)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.assignLoader = false;\n        };\n      })(this));\n    };\n\n    return EpicRowController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowDirective;\n\n  EpicRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epic-row/epic-row.html\",\n      controller: \"EpicRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        epic: '=',\n        options: '='\n      }\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsDashboardController, taiga;\n\n  taiga = this.taiga;\n\n  EpicsDashboardController = (function() {\n    EpicsDashboardController.$inject = [\"$routeParams\", \"tgErrorHandlingService\", \"tgLightboxFactory\", \"lightboxService\", \"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"tgAppMetaService\", \"$translate\"];\n\n    function EpicsDashboardController(params, errorHandlingService, lightboxFactory, lightboxService, confirm, projectService, epicsService, appMetaService, translate) {\n      this.params = params;\n      this.errorHandlingService = errorHandlingService;\n      this.lightboxFactory = lightboxFactory;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.sectionName = \"EPICS.SECTION_NAME\";\n      taiga.defineImmutableProperty(this, 'project', (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    EpicsDashboardController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\"),\n        projectDescription: this.project.get(\"description\")\n      };\n      return {\n        title: this.translate.instant(\"EPICS.PAGE_TITLE\", ctx),\n        description: this.translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\n      };\n    };\n\n    EpicsDashboardController.prototype.loadInitialData = function() {\n      this.epicsService.clear();\n      return this.projectService.setProjectBySlug(this.params.pslug).then((function(_this) {\n        return function() {\n          if (!_this.projectService.isEpicsDashboardEnabled()) {\n            return _this.errorHandlingService.notFound();\n          }\n          if (!_this.projectService.hasPermission(\"view_epics\")) {\n            return _this.errorHandlingService.permissionDenied();\n          }\n          return _this.epicsService.fetchEpics();\n        };\n      })(this));\n    };\n\n    EpicsDashboardController.prototype.canCreateEpics = function() {\n      return this.projectService.hasPermission(\"add_epic\");\n    };\n\n    EpicsDashboardController.prototype.onCreateEpic = function() {\n      var onCreateEpic;\n      onCreateEpic = (function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.confirm.notify(\"success\");\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-create-epic', {\n        \"class\": \"lightbox lightbox-create-epic open\",\n        \"on-create-epic\": \"onCreateEpic()\"\n      }, {\n        \"onCreateEpic\": onCreateEpic.bind(this)\n      });\n    };\n\n    return EpicsDashboardController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsSortableDirective;\n\n  EpicsSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgEpicsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.epics-table-body-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var epic, itemEl, newIndex;\n        itemEl = $(item);\n        epic = itemEl.scope().epic;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            epic: epic,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  EpicsSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableController, generateHash, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  EpicsTableController = (function() {\n    EpicsTableController.$inject = [\"$tgConfirm\", \"tgEpicsService\", \"$timeout\", \"$tgStorage\", \"tgProjectService\"];\n\n    function EpicsTableController(confirm, epicsService, timeout, storage, projectService) {\n      this.confirm = confirm;\n      this.epicsService = epicsService;\n      this.timeout = timeout;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.hash = generateHash([this.projectService.project.get('id'), 'epics']);\n      this.displayOptions = false;\n      this.displayVotes = true;\n      this.options = this.storage.get(this.hash, {\n        votes: true,\n        name: true,\n        project: true,\n        sprint: true,\n        assigned: true,\n        status: true,\n        progress: true,\n        closed: true,\n        closed_us: true\n      });\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disabledEpicsPagination', (function(_this) {\n        return function() {\n          return _this.epicsService._disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingEpics', (function(_this) {\n        return function() {\n          return _this.epicsService._loadingEpics;\n        };\n      })(this));\n    }\n\n    EpicsTableController.prototype.toggleEpicTableOptions = function() {\n      return this.displayOptions = !this.displayOptions;\n    };\n\n    EpicsTableController.prototype.reorderEpic = function(epic, newIndex) {\n      if (epic.get('epics_order') === newIndex) {\n        return null;\n      }\n      return this.epicsService.reorderEpic(epic, newIndex).then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    EpicsTableController.prototype.nextPage = function() {\n      return this.epicsService.nextPage();\n    };\n\n    EpicsTableController.prototype.hoverEpicTableOption = function() {\n      if (this.timer) {\n        return this.timeout.cancel(this.timer);\n      }\n    };\n\n    EpicsTableController.prototype.hideEpicTableOption = function() {\n      return this.timer = this.timeout(((function(_this) {\n        return function() {\n          return _this.displayOptions = false;\n        };\n      })(this)), 400);\n    };\n\n    EpicsTableController.prototype.updateViewOptions = function() {\n      return this.storage.set(this.hash, this.options);\n    };\n\n    return EpicsTableController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableDirective;\n\n  EpicsTableDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epics-table/epics-table.html\",\n      controller: \"EpicsTableCtrl\",\n      controllerAs: \"vm\",\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  StoryRowController = (function() {\n    StoryRowController.$inject = [];\n\n    function StoryRowController() {\n      this._calculateProgressBar();\n    }\n\n    StoryRowController.prototype._calculateProgressBar = function() {\n      var totalTasks, totalTasksCompleted;\n      if (this.story.get('is_closed') === true) {\n        return this.percentage = \"100%\";\n      } else {\n        totalTasks = this.story.get('tasks').size;\n        totalTasksCompleted = this.story.get('tasks').filter(function(it) {\n          return it.get(\"is_closed\");\n        }).size;\n        if (totalTasks === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (totalTasksCompleted * 100 / totalTasks) + \"%\";\n        }\n      }\n    };\n\n    return StoryRowController;\n\n  })();\n\n  module.controller(\"StoryRowCtrl\", StoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  StoryRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/story-row/story-row.html\",\n      controller: \"StoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        story: '=',\n        options: '='\n      }\n    };\n  };\n\n  module.directive(\"tgStoryRow\", StoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsService, taiga;\n\n  taiga = this.taiga;\n\n  EpicsService = (function() {\n    EpicsService.$inject = ['tgProjectService', 'tgAttachmentsService', 'tgResources', 'tgXhrErrorService', '$q'];\n\n    function EpicsService(projectService, attachmentsService, resources, xhrError, q) {\n      this.projectService = projectService;\n      this.attachmentsService = attachmentsService;\n      this.resources = resources;\n      this.xhrError = xhrError;\n      this.q = q;\n      this.clear();\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this._epics;\n        };\n      })(this));\n    }\n\n    EpicsService.prototype.clear = function() {\n      this._loadingEpics = false;\n      this._disablePagination = false;\n      this._page = 1;\n      return this._epics = Immutable.List();\n    };\n\n    EpicsService.prototype.fetchEpics = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      this._loadingEpics = true;\n      this._disablePagination = true;\n      return this.resources.epics.list(this.projectService.project.get('id'), this._page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this._epics = result.list;\n          } else {\n            _this._epics = _this._epics.concat(result.list);\n          }\n          _this._loadingEpics = false;\n          return _this._disablePagination = !result.headers('x-pagination-next');\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.nextPage = function() {\n      this._page++;\n      return this.fetchEpics();\n    };\n\n    EpicsService.prototype.listRelatedUserStories = function(epic) {\n      return this.resources.userstories.listInEpic(epic.get('id'));\n    };\n\n    EpicsService.prototype.createEpic = function(epicData, attachments, projectId) {\n      if (projectId) {\n        epicData.project = projectId;\n      } else {\n        epicData.project = this.projectService.project.get('id');\n      }\n      return this.resources.epics.post(epicData).then((function(_this) {\n        return function(epic) {\n          var promises;\n          if (!attachments) {\n            return epic;\n          } else {\n            promises = _.map(attachments.toJS(), function(attachment) {\n              return _this.attachmentsService.upload(attachment.file, epic.get('id'), epic.get('project'), 'epic');\n            });\n            return _this.q.all(promises).then(_this.fetchEpics.bind(_this, true));\n          }\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderEpic = function(epic, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this._epics.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order');\n      });\n      withoutMoved = this.epics.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== epic.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epics_order') + 1;\n      orderList[epic.get('id')] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epics_order') === previous.get('epics_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epics_order')];\n        };\n      })(this)).toJS());\n      afterDestination.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order') + 1;\n      });\n      this._epics = this._epics.map(function(it) {\n        return it.set('epics_order', orderList[it.get('id')]);\n      });\n      this._epics = this._epics.sortBy(function(it) {\n        return it.get('epics_order');\n      });\n      data = {\n        epics_order: newOrder,\n        version: epic.get('version')\n      };\n      return this.resources.epics.reorder(epic.get('id'), data, setOrders).then((function(_this) {\n        return function(newEpic) {\n          return _this._epics = _this._epics.map(function(it) {\n            if (it.get('id') === newEpic.get('id')) {\n              return newEpic;\n            }\n            return it;\n          });\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderRelatedUserstory = function(epic, epicUserstories, userstory, newIndex) {\n      var beforeDestination, data, epicId, newOrder, previous, previousWithTheSameOrder, setOrders, userstoryId, withoutMoved;\n      withoutMoved = epicUserstories.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== userstory.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epic_order') + 1;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epic_order') === previous.get('epic_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epic_order')];\n        };\n      })(this)).toJS());\n      data = {\n        order: newOrder\n      };\n      epicId = epic.get('id');\n      userstoryId = userstory.get('id');\n      return this.resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders).then((function(_this) {\n        return function() {\n          return _this.listRelatedUserStories(epic);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.replaceEpic = function(epic) {\n      return this._epics = this._epics.map(function(it) {\n        if (it.get('id') === epic.get('id')) {\n          return epic;\n        }\n        return it;\n      });\n    };\n\n    EpicsService.prototype.updateEpicStatus = function(epic, statusId) {\n      var data;\n      data = {\n        status: statusId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    EpicsService.prototype.updateEpicAssignedTo = function(epic, userId) {\n      var data;\n      data = {\n        assigned_to: userId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    return EpicsService;\n\n  })();\n\n  angular.module('taigaEpics').service('tgEpicsService', EpicsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserStoriesController = (function() {\n    RelatedUserStoriesController.$inject = [\"tgProjectService\", \"tgEpicsService\"];\n\n    function RelatedUserStoriesController(projectService, epicsService) {\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.sectionName = \"Epics\";\n      this.showCreateRelatedUserstoriesLightbox = false;\n    }\n\n    RelatedUserStoriesController.prototype.showRelatedUserStoriesSection = function() {\n      var ref;\n      return this.projectService.hasPermission(\"view_epics\") || ((ref = this.userstories) != null ? ref.length : void 0) > 0;\n    };\n\n    RelatedUserStoriesController.prototype.userCanSort = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    RelatedUserStoriesController.prototype.loadRelatedUserstories = function() {\n      return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    RelatedUserStoriesController.prototype.reorderRelatedUserstory = function(us, newIndex) {\n      return this.epicsService.reorderRelatedUserstory(this.epic, this.userstories, us, newIndex).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    return RelatedUserStoriesController;\n\n  })();\n\n  module.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoriesCreateController = (function() {\n    RelatedUserstoriesCreateController.$inject = [\"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\", \"$tgAnalytics\"];\n\n    function RelatedUserstoriesCreateController(currentUserService, rs, confirm, analytics) {\n      this.currentUserService = currentUserService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.analytics = analytics;\n      this.projects = null;\n      this.projectUserstories = Immutable.List();\n      this.loading = false;\n    }\n\n    RelatedUserstoriesCreateController.prototype.loadProjects = function() {\n      if (this.projects === null) {\n        return this.projects = this.currentUserService.projects.get(\"unblocked\");\n      }\n    };\n\n    RelatedUserstoriesCreateController.prototype.filterUss = function(selectedProjectId, filterText) {\n      var promise;\n      promise = this.rs.userstories.listInAllProjects({\n        project: selectedProjectId,\n        q: filterText\n      }, true).then((function(_this) {\n        return function(data) {\n          var excludeIds, filteredData;\n          excludeIds = _this.epicUserstories.map(function(us) {\n            return us.get('id');\n          });\n          filteredData = data.filter(function(us) {\n            return excludeIds.indexOf(us.get('id')) === -1;\n          });\n          return _this.projectUserstories = filteredData;\n        };\n      })(this));\n      return promise;\n    };\n\n    RelatedUserstoriesCreateController.prototype.saveRelatedUserStory = function(selectedUserstoryId, onSavedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateExistingUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setExistingUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onSavedRelatedUserstory) {\n            onSavedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError);\n    };\n\n    RelatedUserstoriesCreateController.prototype.bulkCreateRelatedUserStories = function(selectedProjectId, userstoriesText, onCreatedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateNewUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setNewUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onCreatedRelatedUserstory) {\n            onCreatedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError);\n    };\n\n    return RelatedUserstoriesCreateController;\n\n  })();\n\n  module.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateDirective, debounceLeading, module;\n\n  module = angular.module('taigaEpics');\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelatedUserstoriesCreateDirective = function(lightboxService1) {\n    var link;\n    this.lightboxService = lightboxService1;\n    link = function(scope, el, attrs, ctrl) {\n      var existingUserstoryForm, newUserstoryForm;\n      newUserstoryForm = el.find(\".new-user-story-form\").checksley();\n      existingUserstoryForm = el.find(\".existing-user-story-form\").checksley();\n      ctrl.validateNewUserstoryForm = (function(_this) {\n        return function() {\n          return newUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setNewUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return newUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      ctrl.validateExistingUserstoryForm = (function(_this) {\n        return function() {\n          return existingUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setExistingUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return existingUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      scope.showLightbox = function(selectedProjectId) {\n        ctrl.loadProjects();\n        return scope.selectProject(selectedProjectId).then((function(_this) {\n          return function() {\n            return lightboxService.open(el.find(\".lightbox-create-related-user-stories\"));\n          };\n        })(this));\n      };\n      scope.closeLightbox = function() {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        scope.relatedUserstoriesText = \"\";\n        return lightboxService.close(el.find(\".lightbox-create-related-user-stories\"));\n      };\n      scope.$watch('vm.project', function(project) {\n        if (project != null) {\n          return scope.selectedProject = project.get('id');\n        }\n      });\n      scope.selectProject = function(selectedProjectId) {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        return ctrl.filterUss(selectedProjectId, scope.searchUserstory);\n      };\n      return scope.onUpdateSearchUserstory = debounceLeading(300, function() {\n        scope.selectedUserstory = null;\n        return ctrl.filterUss(scope.selectedProject, scope.searchUserstory);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\n      controller: \"RelatedUserstoriesCreateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        showCreateRelatedUserstoriesLightbox: \"=\",\n        project: \"=\",\n        epic: \"=\",\n        epicUserstories: \"=\",\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoriesCreateDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesSortableDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoriesSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgRelatedUserstoriesSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('tg-related-userstory-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, us;\n        itemEl = $(item);\n        us = itemEl.scope().us;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            us: us,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  RelatedUserstoriesSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  module.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserStoriesDirective = function() {\n    return {\n      templateUrl: \"epics/related-userstories/related-userstories.html\",\n      controller: \"RelatedUserStoriesCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstories: '=',\n        project: '=',\n        epic: '='\n      }\n    };\n  };\n\n  RelatedUserStoriesDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoryRowController = (function() {\n    RelatedUserstoryRowController.$inject = [\"tgAvatarService\", \"$translate\", \"$tgConfirm\", \"tgResources\"];\n\n    function RelatedUserstoryRowController(avatarService, translate, confirm, rs) {\n      this.avatarService = avatarService;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n    }\n\n    RelatedUserstoryRowController.prototype.setAvatarData = function() {\n      var member;\n      member = this.userstory.get('assigned_to_extra_info');\n      return this.avatar = this.avatarService.getAvatar(member);\n    };\n\n    RelatedUserstoryRowController.prototype.getAssignedToFullNameDisplay = function() {\n      if (this.userstory.get('assigned_to')) {\n        return this.userstory.getIn(['assigned_to_extra_info', 'full_name_display']);\n      }\n      return this.translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\");\n    };\n\n    RelatedUserstoryRowController.prototype.onDeleteRelatedUserstory = function() {\n      var message, title;\n      title = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n      message = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n        epicSubject: this.epic.get('subject')\n      });\n      return this.confirm.ask(title, null, message).then((function(_this) {\n        return function(askResponse) {\n          var epicId, onError, onSuccess, userstoryId;\n          onError = function() {\n            message = _this.translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            _this.loadRelatedUserstories();\n            return askResponse.finish();\n          };\n          epicId = _this.epic.get('id');\n          userstoryId = _this.userstory.get('id');\n          return _this.rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    return RelatedUserstoryRowController;\n\n  })();\n\n  module.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoryRowDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.setAvatarData();\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\n      controller: \"RelatedUserstoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstory: '=',\n        epic: '=',\n        project: '=',\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoryRowDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppController, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ExternalAppController = (function(superClass) {\n    extend(ExternalAppController, superClass);\n\n    ExternalAppController.$inject = [\"$routeParams\", \"tgExternalAppsService\", \"$window\", \"tgCurrentUserService\", \"$location\", \"$tgNavUrls\", \"tgXhrErrorService\", \"tgLoader\"];\n\n    function ExternalAppController(routeParams, externalAppsService, window, currentUserService, location, navUrls, xhrError, loader) {\n      var loginUrl, nextUrl;\n      this.routeParams = routeParams;\n      this.externalAppsService = externalAppsService;\n      this.window = window;\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.xhrError = xhrError;\n      this.loader = loader;\n      this.createApplicationToken = bind(this.createApplicationToken, this);\n      this._getApplicationToken = bind(this._getApplicationToken, this);\n      this._redirect = bind(this._redirect, this);\n      this.loader.start(false);\n      this._applicationId = this.routeParams.application;\n      this._state = this.routeParams.state;\n      this._getApplicationToken();\n      this._user = this.currentUserService.getUser();\n      this._application = null;\n      nextUrl = encodeURIComponent(this.location.url());\n      loginUrl = this.navUrls.resolve(\"login\");\n      this.loginWithAnotherUserUrl = loginUrl + \"?next=\" + nextUrl + \"&force_login=1\";\n      taiga.defineImmutableProperty(this, \"user\", (function(_this) {\n        return function() {\n          return _this._user;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"application\", (function(_this) {\n        return function() {\n          return _this._application;\n        };\n      })(this));\n    }\n\n    ExternalAppController.prototype._redirect = function(applicationToken) {\n      var nextUrl;\n      nextUrl = applicationToken.get(\"next_url\");\n      return this.window.open(nextUrl, \"_self\");\n    };\n\n    ExternalAppController.prototype._getApplicationToken = function() {\n      return this.externalAppsService.getApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          _this._application = data.get(\"application\");\n          if (data.get(\"auth_code\")) {\n            return _this._redirect(data);\n          } else {\n            return _this.loader.pageLoaded();\n          }\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          _this.loader.pageLoaded();\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    ExternalAppController.prototype.cancel = function() {\n      return this.window.history.back();\n    };\n\n    ExternalAppController.prototype.createApplicationToken = function() {\n      return this.externalAppsService.authorizeApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          return _this._redirect(data);\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    return ExternalAppController;\n\n  })(taiga.Controller);\n\n  angular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppsService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ExternalAppsService = (function(superClass) {\n    extend(ExternalAppsService, superClass);\n\n    ExternalAppsService.$inject = [\"tgResources\"];\n\n    function ExternalAppsService(rs) {\n      this.rs = rs;\n    }\n\n    ExternalAppsService.prototype.getApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.getApplicationToken(applicationId, state);\n    };\n\n    ExternalAppsService.prototype.authorizeApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.authorizeApplicationToken(applicationId, state);\n    };\n\n    return ExternalAppsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  FeedbackService = (function(superClass) {\n    extend(FeedbackService, superClass);\n\n    FeedbackService.$inject = [\"tgLightboxFactory\"];\n\n    function FeedbackService(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    FeedbackService.prototype.sendFeedback = function() {\n      return this.lightboxFactory.create(\"tg-lb-feedback\", {\n        \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\n      });\n    };\n\n    return FeedbackService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivityService, taiga;\n\n  taiga = this.taiga;\n\n  ActivityService = (function() {\n    ActivityService.$inject = ['tgResources', 'tgXhrErrorService'];\n\n    function ActivityService(rs, xhrError) {\n      this.rs = rs;\n      this.xhrError = xhrError;\n      this._contentType = null;\n      this._objectId = null;\n      this.clear();\n    }\n\n    ActivityService.prototype.clear = function() {\n      this.page = 1;\n      this.loadingEntries = false;\n      this.disablePagination = false;\n      this.entries = Immutable.List();\n      return this.count = null;\n    };\n\n    ActivityService.prototype.fetchEntries = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      if (reset) {\n        this.page = 1;\n      }\n      this.loadingEntries = true;\n      this.disablePagination = true;\n      if (!this._contentType || !this._objectId) {\n        return;\n      }\n      return this.rs.history.getHistory('activity', this._contentType, this._objectId, this.page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this.entries = result.list;\n          } else {\n            _this.entries = _this.entries.concat(result.list);\n          }\n          _this.loadingEntries = false;\n          _this.disablePagination = !result.headers('x-pagination-next');\n          _this.count = result.headers('x-pagination-count');\n          return _this.entries;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(_this.entries);\n        };\n      })(this));\n    };\n\n    ActivityService.prototype.nextPage = function(historyType) {\n      if (historyType == null) {\n        historyType = 'comment';\n      }\n      this.page++;\n      return this.fetchEntries();\n    };\n\n    ActivityService.prototype.init = function(contentType, objectId) {\n      this._contentType = contentType;\n      this._objectId = objectId;\n      return this.clear();\n    };\n\n    return ActivityService;\n\n  })();\n\n  angular.module('taigaHistory').service('tgActivityService', ActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentController = (function() {\n    CommentController.$inject = [\"tgCurrentUserService\", \"tgCheckPermissionsService\", \"tgLightboxFactory\"];\n\n    function CommentController(currentUserService, permissionService, lightboxFactory) {\n      this.currentUserService = currentUserService;\n      this.permissionService = permissionService;\n      this.lightboxFactory = lightboxFactory;\n      this.hiddenDeletedComment = true;\n    }\n\n    CommentController.prototype.showDeletedComment = function() {\n      return this.hiddenDeletedComment = false;\n    };\n\n    CommentController.prototype.hideDeletedComment = function() {\n      return this.hiddenDeletedComment = true;\n    };\n\n    CommentController.prototype.checkCancelComment = function(event) {\n      if (event.keyCode === 27) {\n        return this.onEditMode({\n          commentId: this.comment.id\n        });\n      }\n    };\n\n    CommentController.prototype.canEditDeleteComment = function() {\n      if (this.currentUserService.getUser()) {\n        this.user = this.currentUserService.getUser();\n        return this.user.get('id') === this.comment.user.pk || this.permissionService.check('modify_project');\n      }\n    };\n\n    CommentController.prototype.saveComment = function(text, cb) {\n      return this.onEditComment({\n        commentId: this.comment.id,\n        commentData: text,\n        callback: cb\n      });\n    };\n\n    CommentController.prototype.displayCommentHistory = function() {\n      return this.lightboxFactory.create('tg-lb-display-historic', {\n        \"class\": \"lightbox lightbox-display-historic\",\n        \"comment\": \"comment\",\n        \"name\": \"name\",\n        \"object\": \"object\"\n      }, {\n        \"comment\": this.comment,\n        \"name\": this.name,\n        \"object\": this.object\n      });\n    };\n\n    return CommentController;\n\n  })();\n\n  module.controller(\"CommentCtrl\", CommentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentDirective = function() {\n    return {\n      scope: {\n        name: \"@\",\n        projectId: \"@\",\n        object: \"@\",\n        comment: \"<\",\n        type: \"<\",\n        loading: \"<\",\n        editing: \"<\",\n        deleting: \"<\",\n        objectId: \"<\",\n        editMode: \"<\",\n        project: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onEditComment: \"&\"\n      },\n      templateUrl: \"history/comments/comment.html\",\n      bindToController: true,\n      controller: 'CommentCtrl',\n      controllerAs: \"vm\"\n    };\n  };\n\n  module.directive(\"tgComment\", CommentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentsController = (function() {\n    CommentsController.$inject = [];\n\n    function CommentsController() {}\n\n    CommentsController.prototype.initializePermissions = function() {\n      return this.canAddCommentPermission = 'comment_' + this.name;\n    };\n\n    return CommentsController;\n\n  })();\n\n  module.controller(\"CommentsCtrl\", CommentsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentsDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initializePermissions();\n    };\n    return {\n      scope: {\n        type: \"<\",\n        name: \"@\",\n        object: \"@\",\n        comments: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onAddComment: \"&\",\n        onEditComment: \"&\",\n        editMode: \"<\",\n        loading: \"<\",\n        deleting: \"<\",\n        editing: \"<\",\n        project: \"=\",\n        reverse: \"=\"\n      },\n      templateUrl: \"history/comments/comments.html\",\n      bindToController: true,\n      controller: 'CommentsCtrl',\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgComments\", CommentsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  LightboxDisplayHistoricController = (function() {\n    LightboxDisplayHistoricController.$inject = [\"$tgResources\"];\n\n    function LightboxDisplayHistoricController(rs) {\n      this.rs = rs;\n    }\n\n    LightboxDisplayHistoricController.prototype._loadHistoric = function() {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.object;\n      activityId = this.comment.id;\n      return this.rs.history.getCommentHistory(type, objectId, activityId).then((function(_this) {\n        return function(data) {\n          return _this.commentHistoryEntries = data;\n        };\n      })(this));\n    };\n\n    return LightboxDisplayHistoricController;\n\n  })();\n\n  module.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricDirective;\n\n  LightboxDisplayHistoricDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._loadHistoric();\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        name: '=',\n        object: '=',\n        comment: '='\n      },\n      templateUrl: \"history/history-lightbox/comment-history-lightbox.html\",\n      controller: \"LightboxDisplayHistoricCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  LightboxDisplayHistoricDirective.$inject = [\"lightboxService\"];\n\n  angular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryEntryDirective;\n\n  HistoryEntryDirective = function() {\n    return {\n      scope: {\n        entry: \"<\"\n      },\n      templateUrl: \"history/history-lightbox/history-entry.html\"\n    };\n  };\n\n  angular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryTabsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryTabsDirective = function() {\n    return {\n      templateUrl: \"history/history-tabs/history-tabs.html\",\n      scope: {\n        showCommentTab: \"&\",\n        showActivityTab: \"&\",\n        onActiveComments: \"&\",\n        onActiveActivities: \"&\",\n        onOrderComments: \"&\",\n        activeTab: \"<\",\n        commentsNum: \"<\",\n        activitiesNum: \"<\",\n        onReverse: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgHistoryTabs\", HistoryTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  HistorySectionController = (function() {\n    HistorySectionController.$inject = [\"$tgResources\", \"$tgRepo\", \"$tgStorage\", \"tgProjectService\", \"tgActivityService\", \"tgWysiwygService\"];\n\n    function HistorySectionController(rs, repo, storage, projectService, activityService, wysiwygService) {\n      this.rs = rs;\n      this.repo = repo;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.activityService = activityService;\n      this.wysiwygService = wysiwygService;\n      this.editing = null;\n      this.deleting = null;\n      this.editMode = {};\n      this.viewComments = true;\n      this.reverse = this.storage.get(\"orderComments\");\n      taiga.defineImmutableProperty(this, 'disabledActivityPagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingActivity', (function(_this) {\n        return function() {\n          return _this.activityService.loading;\n        };\n      })(this));\n    }\n\n    HistorySectionController.prototype._loadHistory = function() {\n      this._loadComments();\n      return this._loadActivity();\n    };\n\n    HistorySectionController.prototype._loadActivity = function() {\n      this.activityService.init(this.name, this.id);\n      return this.activityService.fetchEntries().then((function(_this) {\n        return function(response) {\n          _this.activitiesNum = _this.activityService.count;\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype._loadComments = function() {\n      return this.rs.history.get(this.name, this.id, 'comment').then((function(_this) {\n        return function(comments) {\n          _this.comments = _.filter(comments, function(item) {\n            return item.comment !== \"\";\n          });\n          if (_this.reverse) {\n            _this.comments - _.reverse(_this.comments);\n          }\n          return _this.commentsNum = _this.comments.length;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.nextActivityPage = function() {\n      return this.activityService.nextPage().then((function(_this) {\n        return function(response) {\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.showHistorySection = function() {\n      return this.showCommentTab() || this.showActivityTab();\n    };\n\n    HistorySectionController.prototype.showCommentTab = function() {\n      return this.commentsNum > 0 || this.projectService.hasPermission(\"comment_\" + this.name);\n    };\n\n    HistorySectionController.prototype.showActivityTab = function() {\n      return this.activitiesNum > 0;\n    };\n\n    HistorySectionController.prototype.toggleEditMode = function(commentId) {\n      return this.editMode[commentId] = !this.editMode[commentId];\n    };\n\n    HistorySectionController.prototype.onActiveHistoryTab = function(active) {\n      return this.viewComments = active;\n    };\n\n    HistorySectionController.prototype.deleteComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.deleting = commentId;\n      return this.rs.history.deleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.deleting = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.editComment = function(commentId, comment) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.editComment(type, objectId, activityId, comment).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          _this.toggleEditMode(commentId);\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.restoreDeletedComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.undeleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.addComment = function() {\n      this.editMode = {};\n      this.editing = null;\n      return this._loadComments();\n    };\n\n    HistorySectionController.prototype.onOrderComments = function() {\n      this.reverse = !this.reverse;\n      this.storage.set(\"orderComments\", this.reverse);\n      return this._loadComments();\n    };\n\n    return HistorySectionController;\n\n  })();\n\n  module.controller(\"HistorySection\", HistorySectionController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionDirective, bindOnce, module;\n\n  module = angular.module('taigaHistory');\n\n  bindOnce = this.taiga.bindOnce;\n\n  HistorySectionDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      scope.$on(\"object:updated\", function() {\n        return ctrl._loadActivity();\n      });\n      return scope.$watch('vm.id', function(value) {\n        return ctrl._loadHistory();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"history/history.html\",\n      controller: \"HistorySection\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: \"=\",\n        name: \"@\",\n        id: \"=\",\n        project: \"=\"\n      }\n    };\n  };\n\n  HistorySectionDirective.$inject = [];\n\n  module.directive(\"tgHistorySection\", HistorySectionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivitiesDiffController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  ActivitiesDiffController = (function() {\n    ActivitiesDiffController.$inject = [];\n\n    function ActivitiesDiffController() {}\n\n    ActivitiesDiffController.prototype.diffTags = function() {\n      var diff;\n      if (this.type === 'tags') {\n        this.diffRemoveTags = _.difference(this.diff[0], this.diff[1]).toString();\n        return this.diffAddTags = _.difference(this.diff[1], this.diff[0]).toString();\n      } else if (this.type === 'promoted_to') {\n        diff = _.difference(this.diff[1], this.diff[0]);\n        return this.promotedTo = _.filter(this.model.generated_user_stories, (function(_this) {\n          return function(x) {\n            return _.includes(diff, x.id);\n          };\n        })(this));\n      }\n    };\n\n    return ActivitiesDiffController;\n\n  })();\n\n  module.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDiffDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDiffDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.diffTags();\n    };\n    return {\n      scope: {\n        model: \"<\",\n        type: \"<\",\n        diff: \"<\"\n      },\n      templateUrl: \"history/history/history-diff.html\",\n      controller: \"ActivitiesDiffCtrl\",\n      controllerAs: 'vm',\n      bindToController: true,\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistoryDiff\", HistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      scope: {\n        activities: \"<\",\n        model: \"<\"\n      },\n      templateUrl: \"history/history/history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistory\", HistoryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DutyDirective;\n\n  DutyDirective = function(navurls, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.duty = scope.duty;\n      scope.vm.type = scope.type;\n      scope.vm.isHidden = scope.isHidden;\n      scope.vm.getDutyType = function() {\n        if (scope.vm.duty) {\n          if (scope.vm.duty.get('_name') === \"epics\") {\n            return $translate.instant(\"COMMON.EPIC\");\n          }\n          if (scope.vm.duty.get('_name') === \"userstories\") {\n            return $translate.instant(\"COMMON.USER_STORY\");\n          }\n          if (scope.vm.duty.get('_name') === \"tasks\") {\n            return $translate.instant(\"COMMON.TASK\");\n          }\n          if (scope.vm.duty.get('_name') === \"issues\") {\n            return $translate.instant(\"COMMON.ISSUE\");\n          }\n        }\n      };\n      return el.on(\"click\", \".button-hide\", function(event) {\n        event.preventDefault();\n        el.remove();\n        return scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type);\n      });\n    };\n    return {\n      templateUrl: \"home/duties/duty.html\",\n      scope: {\n        \"duty\": \"=tgDuty\",\n        \"isHidden\": \"=\",\n        \"type\": \"@\"\n      },\n      link: link\n    };\n  };\n\n  DutyDirective.$inject = [\"$tgNavUrls\", \"$translate\"];\n\n  angular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeController;\n\n  HomeController = (function() {\n    HomeController.$inject = [\"tgCurrentUserService\", \"$location\", \"$tgNavUrls\"];\n\n    function HomeController(currentUserService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      if (!this.currentUserService.getUser()) {\n        this.location.path(this.navUrls.resolve(\"discover\"));\n      }\n    }\n\n    return HomeController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"Home\", HomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  HomeService = (function(superClass) {\n    extend(HomeService, superClass);\n\n    HomeService.$inject = [\"$tgNavUrls\", \"tgResources\", \"tgProjectsService\", \"$q\"];\n\n    function HomeService(navurls, rs, projectsService, q) {\n      this.navurls = navurls;\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this.q = q;\n    }\n\n    HomeService.prototype._attachProjectInfoToWorkInProgress = function(workInProgress, projectsById) {\n      var _attachProjectInfoToDuty, _duties, _getValidDutiesAndAttachProjectInfo, assignedTo, watching;\n      _attachProjectInfoToDuty = (function(_this) {\n        return function(duty, objType) {\n          var ctx, project, url;\n          project = projectsById.get(String(duty.get('project')));\n          ctx = {\n            project: project.get('slug'),\n            ref: duty.get('ref')\n          };\n          url = _this.navurls.resolve(\"project-\" + objType + \"-detail\", ctx);\n          duty = duty.set('url', url);\n          duty = duty.set('project', project);\n          duty = duty.set(\"_name\", objType);\n          return duty;\n        };\n      })(this);\n      _getValidDutiesAndAttachProjectInfo = function(duties, dutyType) {\n        duties = duties.filter(function(duty) {\n          return projectsById.get(String(duty.get('project')));\n        });\n        duties = duties.map(function(duty) {\n          return _attachProjectInfoToDuty(duty, dutyType);\n        });\n        return duties;\n      };\n      assignedTo = workInProgress.get(\"assignedTo\");\n      if (assignedTo.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\");\n        assignedTo = assignedTo.set(\"epics\", _duties);\n      }\n      if (assignedTo.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\");\n        assignedTo = assignedTo.set(\"userStories\", _duties);\n      }\n      if (assignedTo.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\");\n        assignedTo = assignedTo.set(\"tasks\", _duties);\n      }\n      if (assignedTo.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\");\n        assignedTo = assignedTo.set(\"issues\", _duties);\n      }\n      watching = workInProgress.get(\"watching\");\n      if (watching.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\");\n        watching = watching.set(\"epics\", _duties);\n      }\n      if (watching.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\");\n        watching = watching.set(\"userStories\", _duties);\n      }\n      if (watching.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\");\n        watching = watching.set(\"tasks\", _duties);\n      }\n      if (watching.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\");\n        watching = watching.set(\"issues\", _duties);\n      }\n      workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n      return workInProgress = workInProgress.set(\"watching\", watching);\n    };\n\n    HomeService.prototype.getWorkInProgress = function(userId) {\n      var assignedEpicsPromise, assignedIssuesPromise, assignedTasksPromise, assignedTo, assignedUserStoriesPromise, params_epics, params_issues, params_tasks, params_uss, projectsById, projectsPromise, watching, watchingEpicsPromise, watchingIssuesPromise, watchingTasksPromise, watchingUserStoriesPromise, workInProgress;\n      projectsById = Immutable.Map();\n      projectsPromise = this.projectsService.getListProjectsByUserId(userId).then(function(projects) {\n        return projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n          return p.id;\n        }));\n      });\n      assignedTo = Immutable.Map();\n      params_epics = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_uss = {\n        is_closed: false,\n        assigned_users: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      assignedEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return assignedTo = assignedTo.set(\"epics\", epics);\n      });\n      assignedUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return assignedTo = assignedTo.set(\"userStories\", userstories);\n      });\n      assignedTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return assignedTo = assignedTo.set(\"tasks\", tasks);\n      });\n      assignedIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return assignedTo = assignedTo.set(\"issues\", issues);\n      });\n      params_epics = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_uss = {\n        is_closed: false,\n        watchers: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      watching = Immutable.Map();\n      watchingEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return watching = watching.set(\"epics\", epics);\n      });\n      watchingUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return watching = watching.set(\"userStories\", userstories);\n      });\n      watchingTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return watching = watching.set(\"tasks\", tasks);\n      });\n      watchingIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return watching = watching.set(\"issues\", issues);\n      });\n      workInProgress = Immutable.Map();\n      return this.q.all([projectsPromise, assignedEpicsPromise, watchingEpicsPromise, assignedUserStoriesPromise, watchingUserStoriesPromise, assignedTasksPromise, watchingTasksPromise, assignedIssuesPromise, watchingIssuesPromise]).then((function(_this) {\n        return function() {\n          workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n          workInProgress = workInProgress.set(\"watching\", watching);\n          workInProgress = _this._attachProjectInfoToWorkInProgress(workInProgress, projectsById);\n          return workInProgress;\n        };\n      })(this));\n    };\n\n    return HomeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaHome\").service(\"tgHomeService\", HomeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeProjectListDirective;\n\n  HomeProjectListDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      return taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n    };\n    directive = {\n      templateUrl: \"home/projects/home-project-list.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  HomeProjectListDirective.$inject = [\"tgCurrentUserService\"];\n\n  angular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnController;\n\n  WorkingOnController = (function() {\n    WorkingOnController.$inject = [\"tgHomeService\"];\n\n    function WorkingOnController(homeService) {\n      this.homeService = homeService;\n      this.assignedTo = Immutable.Map();\n      this.hiddenAssignedTo = [];\n      this.showHiddenAssignedTo = false;\n      this.watching = Immutable.Map();\n      this.showHiddenWatching = false;\n    }\n\n    WorkingOnController.prototype._setAssignedTo = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"assignedTo\").get(\"epics\");\n      userStories = workInProgress.get(\"assignedTo\").get(\"userStories\");\n      tasks = workInProgress.get(\"assignedTo\").get(\"tasks\");\n      issues = workInProgress.get(\"assignedTo\").get(\"issues\");\n      this.assignedTo = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.assignedTo.size > 0) {\n        return this.assignedTo = this.assignedTo.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype._setWatching = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"watching\").get(\"epics\");\n      userStories = workInProgress.get(\"watching\").get(\"userStories\");\n      tasks = workInProgress.get(\"watching\").get(\"tasks\");\n      issues = workInProgress.get(\"watching\").get(\"issues\");\n      this.watching = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.watching.size > 0) {\n        return this.watching = this.watching.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype.getWorkInProgress = function(userId) {\n      return this.homeService.getWorkInProgress(userId).then((function(_this) {\n        return function(workInProgress) {\n          _this._setAssignedTo(workInProgress);\n          return _this._setWatching(workInProgress);\n        };\n      })(this));\n    };\n\n    return WorkingOnController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnDirective, generateHash, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  WorkingOnDirective = function(homeService, currentUserService, storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getHiddenDuties, getShowHiddenDuties, i, len, slot, slots, toggleDutyHidden, updateHiddenDuties, updateShowHiddenDuties, user, userId;\n      updateShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.showHiddenDuties[slot]);\n      };\n      getShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.get(hash) || false;\n      };\n      updateHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.hiddenDuties[slot]);\n      };\n      getHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.get(hash) || [];\n      };\n      toggleDutyHidden = function(duty, slot) {\n        var ref;\n        if (ref = duty.get('id'), indexOf.call(scope.hiddenDuties[slot], ref) >= 0) {\n          scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1);\n        } else {\n          scope.hiddenDuties[slot].push(duty.get('id'));\n        }\n        updateHiddenDuties(slot);\n        return scope.$apply();\n      };\n      user = currentUserService.getUser();\n      if (!user) {\n        return;\n      }\n      userId = user.get(\"id\");\n      ctrl.getWorkInProgress(userId);\n      slots = ['working-on', 'watching'];\n      scope.hiddenDuties = {};\n      scope.showHiddenDuties = {};\n      scope.toggleShowHiddenDuties = function(slot) {\n        if (!(indexOf.call(slots, slot) >= 0)) {\n          return console.error(\"Invalid duties slot `\" + slot + \"`\");\n        }\n        scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot];\n        return updateShowHiddenDuties(slot);\n      };\n      for (i = 0, len = slots.length; i < len; i++) {\n        slot = slots[i];\n        scope.hiddenDuties[slot] = getHiddenDuties(slot);\n        scope.showHiddenDuties[slot] = getShowHiddenDuties(slot);\n      }\n      return scope.$on(\"duty:toggle-hidden\", (function(_this) {\n        return function(event, duty, slot) {\n          if (!(indexOf.call(slots, slot) >= 0)) {\n            return console.error(\"Invalid duties slot `\" + slot + \"`\");\n          }\n          return toggleDutyHidden(duty, slot);\n        };\n      })(this));\n    };\n    return {\n      controller: \"WorkingOn\",\n      controllerAs: \"vm\",\n      templateUrl: \"home/working-on/working-on.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  WorkingOnDirective.$inject = [\"tgHomeService\", \"tgCurrentUserService\", \"$tgStorage\"];\n\n  angular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormController, taiga;\n\n  taiga = this.taiga;\n\n  InviteMembersFormController = (function() {\n    InviteMembersFormController.$inject = [\"tgProjectService\", \"$tgResources\", \"lightboxService\", \"$tgConfirm\", \"$rootScope\"];\n\n    function InviteMembersFormController(projectService, rs, lightboxService, confirm, rootScope) {\n      this.projectService = projectService;\n      this.rs = rs;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.rootScope = rootScope;\n      this.project = this.projectService.project;\n      this.roles = this.projectService.project.get('roles');\n      this.rolesValues = {};\n      this.loading = false;\n      this.defaultMaxInvites = 4;\n    }\n\n    InviteMembersFormController.prototype._areRolesValidated = function() {\n      return Object.defineProperty(this, 'areRolesValidated', {\n        get: (function(_this) {\n          return function() {\n            var roleIds;\n            roleIds = _.filter(_.values(_this.rolesValues), function(it) {\n              return it;\n            });\n            return roleIds.length === _this.contactsToInvite.size + _this.emailsToInvite.size;\n          };\n        })(this)\n      });\n    };\n\n    InviteMembersFormController.prototype._checkLimitMemberships = function() {\n      var pendingMembersCount;\n      if (this.project.get('max_memberships') === null) {\n        this.membersLimit = this.defaultMaxInvites;\n      } else {\n        pendingMembersCount = Math.max(this.project.get('max_memberships') - this.project.get('total_memberships'), 0);\n        this.membersLimit = Math.min(pendingMembersCount, this.defaultMaxInvites);\n      }\n      return this.showWarningMessage = this.membersLimit < this.defaultMaxInvites;\n    };\n\n    InviteMembersFormController.prototype.sendInvites = function() {\n      this.setInvitedContacts = [];\n      _.forEach(this.rolesValues, (function(_this) {\n        return function(key, value) {\n          return _this.setInvitedContacts.push({\n            'role_id': key,\n            'username': value\n          });\n        };\n      })(this));\n      this.loading = true;\n      return this.rs.memberships.bulkCreateMemberships(this.project.get('id'), this.setInvitedContacts, this.inviteContactsMessage).then((function(_this) {\n        return function(response) {\n          return _this.projectService.fetchProject().then(function() {\n            _this.loading = false;\n            _this.lightboxService.closeAll();\n            _this.rootScope.$broadcast(\"membersform:new:success\");\n            return _this.confirm.notify('success');\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          } else if (response.data.__all__) {\n            return _this.confirm.notify(\"error\", response.data.__all__[0]);\n          }\n        };\n      })(this));\n    };\n\n    return InviteMembersFormController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormDirective;\n\n  InviteMembersFormDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._areRolesValidated();\n      return ctrl._checkLimitMemberships();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/invite-members-form/invite-members-form.html\",\n      controller: \"InviteMembersFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contactsToInvite: '<',\n        emailsToInvite: '=',\n        onDisplayContactList: '&',\n        onRemoveInvitedContact: '&',\n        onRemoveInvitedEmail: '&',\n        onSendInvites: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  AddMembersController = (function() {\n    AddMembersController.$inject = [\"tgUserService\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function AddMembersController(userService, currentUserService, projectService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n      this.contactsToInvite = Immutable.List();\n      this.emailsToInvite = Immutable.List();\n      this.contacts = Immutable.List();\n      this.displayContactList = false;\n    }\n\n    AddMembersController.prototype._getContacts = function() {\n      var excludeProjectId, userId;\n      userId = this.currentUserService.getUser().get(\"id\");\n      excludeProjectId = this.projectService.project.get(\"id\");\n      return this.userService.getContacts(userId, excludeProjectId).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype._filterContacts = function(invited) {\n      return this.contacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.get('id');\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype.inviteSuggested = function(contact) {\n      this.contactsToInvite = this.contactsToInvite.push(contact);\n      this._filterContacts(contact);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeContact = function(invited) {\n      this.contactsToInvite = this.contactsToInvite.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.id;\n        };\n      })(this));\n      invited = Immutable.fromJS(invited);\n      this.contacts = this.contacts.push(invited);\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.inviteEmail = function(email) {\n      var emailData;\n      emailData = Immutable.Map({\n        'email': email\n      });\n      this.emailsToInvite = this.emailsToInvite.push(emailData);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeEmail = function(invited) {\n      this.emailsToInvite = this.emailsToInvite.filter((function(_this) {\n        return function(email) {\n          return email.get('email') !== invited.email;\n        };\n      })(this));\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.testEmptyContacts = function() {\n      if (this.emailsToInvite.size + this.contactsToInvite.size === 0) {\n        return this.displayContactList = false;\n      }\n    };\n\n    return AddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxAddMembersDirective;\n\n  LightboxAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      return ctrl._getContacts();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/lightbox-add-members.html\",\n      controller: \"AddMembersCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  SuggestAddMembersController = (function() {\n    SuggestAddMembersController.$inject = [];\n\n    function SuggestAddMembersController() {\n      this.contactQuery = \"\";\n    }\n\n    SuggestAddMembersController.prototype.isEmail = function() {\n      return taiga.isEmail(this.contactQuery);\n    };\n\n    SuggestAddMembersController.prototype.filterContacts = function() {\n      return this.filteredContacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('full_name_display').toLowerCase().includes(_this.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(_this.contactQuery.toLowerCase());\n        };\n      })(this)).slice(0, 12);\n    };\n\n    SuggestAddMembersController.prototype.setInvited = function(contact) {\n      return this.onInviteSuggested({\n        'contact': contact\n      });\n    };\n\n    return SuggestAddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersDirective;\n\n  SuggestAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.contacts\", (function(_this) {\n        return function(contacts) {\n          if (contacts) {\n            return ctrl.filterContacts();\n          }\n        };\n      })(this));\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/suggest-add-members/suggest-add-members.html\",\n      controller: \"SuggestAddMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contacts: '=',\n        onInviteSuggested: '&',\n        onInviteEmail: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownNotificationsDirective, timeout;\n\n  timeout = this.taiga.timeout;\n\n  DropdownNotificationsDirective = function($rootScope, notificationsService, currentUserService) {\n    var directive, link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $scope.notificationsList = [];\n      $scope.loading = false;\n      $scope.$on(\"notifications:loaded\", function(event, total) {\n        $scope.loading = false;\n        if ($scope.total !== void 0 && total > $scope.total) {\n          $scope.newEvent = true;\n          timeout(100, function() {\n            $scope.total = total;\n            return $scope.$apply();\n          });\n          return timeout(2000, function() {\n            return $scope.newEvent = false;\n          });\n        } else {\n          return $scope.total = total;\n        }\n      });\n      $scope.$on(\"notifications:loading\", function() {\n        return $scope.loading = true;\n      });\n      return $scope.setAllAsRead = function() {\n        return notificationsService.setNotificationsAsRead().then(function() {\n          return $rootScope.$emit(\"notifications:dismiss-all\");\n        });\n      };\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\", \"tgCurrentUserService\", DropdownNotificationsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownProjectListDirective;\n\n  DropdownProjectListDirective = function(rootScope, currentUserService, projectsService, projectService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var updateLinks;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"currentProject\", function() {\n        if (projectService.project) {\n          return projectService.project.get('id');\n        }\n        return null;\n      });\n      scope.vm.newProject = function() {\n        return projectsService.newProject();\n      };\n      updateLinks = function() {\n        return el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\");\n      };\n      return rootScope.$on(\"dropdown-project-list:updated\", updateLinks);\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownProjectListDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgProjectsService\", \"tgProjectService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownUserDirective;\n\n  DropdownUserDirective = function(authService, configService, locationService, navUrlsService, $rootScope) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\");\n      scope.vm.customSupportUrl = configService.get(\"supportUrl\");\n      taiga.defineImmutableProperty(scope.vm, \"user\", function() {\n        return authService.userData;\n      });\n      scope.vm.logout = function() {\n        authService.logout();\n        locationService.url(navUrlsService.resolve(\"discover\"));\n        return locationService.search({});\n      };\n      return scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {\n        userMenu: true\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownUserDirective.$inject = [\"$tgAuth\", \"$tgConfig\", \"$tgLocation\", \"$tgNavUrls\", \"$rootScope\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarDirective;\n\n  NavigationBarDirective = function(currentUserService, navigationBarService, locationService, navUrlsService, config, feedbackService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var attempts, loadUserPilot, userPilotInterval;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", function() {\n        return currentUserService.isAuthenticated();\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", function() {\n        return navigationBarService.isEnabledHeader();\n      });\n      scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      scope.vm.customSupportUrl = config.get(\"supportUrl\");\n      scope.vm.isFeedbackEnabled = config.get(\"feedbackEnabled\");\n      loadUserPilot = (function(_this) {\n        return function() {\n          var userPilotIframe;\n          userPilotIframe = document.querySelector('#userpilot-resource-centre-frame');\n          if (userPilotIframe) {\n            return scope.$applyAsync(function() {\n              var userPilotIframeDocument, widget;\n              userPilotIframeDocument = userPilotIframe.contentWindow.document.body;\n              widget = userPilotIframeDocument.querySelector('#widget-title');\n              if (widget) {\n                scope.vm.userPilotTitle = widget.innerText;\n                return clearInterval(userPilotInterval);\n              }\n            });\n          }\n        };\n      })(this);\n      attempts = 10;\n      if (window.TAIGA_USER_PILOT_TOKEN) {\n        scope.vm.userPilotTitle = 'Help center';\n        scope.vm.userpilotEnabled = true;\n        userPilotInterval = setInterval((function(_this) {\n          return function() {\n            loadUserPilot();\n            attempts--;\n            if (!attempts) {\n              return clearInterval(userPilotInterval);\n            }\n          };\n        })(this), 1000);\n      }\n      scope.vm.login = function() {\n        var nextUrl;\n        nextUrl = encodeURIComponent(locationService.url());\n        locationService.url(navUrlsService.resolve(\"login\"));\n        return locationService.search({\n          next: nextUrl\n        });\n      };\n      scope.vm.sendFeedback = function() {\n        return feedbackService.sendFeedback();\n      };\n      window._taigaSendFeedback = scope.vm.sendFeedback;\n      return scope.$on(\"$routeChangeSuccess\", function() {\n        var path;\n        scope.vm.active = null;\n        path = locationService.path();\n        switch (path) {\n          case \"/\":\n            return scope.vm.active = 'dashboard';\n          case \"/discover\":\n            return scope.vm.active = 'discover';\n          case \"/notifications\":\n            return scope.vm.active = 'notifications';\n          case \"/projects/\":\n            return scope.vm.active = 'projects';\n          default:\n            if (path.startsWith('/project')) {\n              return scope.vm.active = 'project';\n            }\n        }\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/navigation-bar.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  NavigationBarDirective.$inject = [\"tgCurrentUserService\", \"tgNavigationBarService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"tgFeedbackService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NavigationBarService = (function(superClass) {\n    extend(NavigationBarService, superClass);\n\n    function NavigationBarService() {\n      this.disableHeader();\n    }\n\n    NavigationBarService.prototype.enableHeader = function() {\n      return this.enabledHeader = true;\n    };\n\n    NavigationBarService.prototype.disableHeader = function() {\n      return this.enabledHeader = false;\n    };\n\n    NavigationBarService.prototype.isEnabledHeader = function() {\n      return this.enabledHeader;\n    };\n\n    return NavigationBarService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsListDirective;\n\n  NotificationsListDirective = function() {\n    return {\n      templateUrl: \"notifications/notifications-list/notifications-list.html\",\n      controller: \"Notifications\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        infiniteScrollContainer: \"@\",\n        infiniteScrollDistance: \"=\",\n        infiniteScrollDisabled: \"=\",\n        onlyUnread: \"=onlyUnread\"\n      }\n    };\n  };\n\n  angular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsController, debounceLeading, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  NotificationsController = (function(superClass) {\n    extend(NotificationsController, superClass);\n\n    NotificationsController.$inject = [\"$rootScope\", \"$scope\", \"tgNotificationsService\", \"tgCurrentUserService\", \"$tgEvents\", \"$location\", \"$window\"];\n\n    function NotificationsController(rootScope, scope, notificationsService, currentUserService, events, location, window) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.notificationsService = notificationsService;\n      this.currentUserService = currentUserService;\n      this.events = events;\n      this.location = location;\n      this.window = window;\n      this.total = 0;\n      this.user = this.currentUserService.getUser();\n      this.scrollDisabled = false;\n      this.initList();\n      this.loadNotifications();\n      this.rootScope.$on(\"notifications:dismiss\", (function(_this) {\n        return function(event) {\n          if (_this.onlyUnread) {\n            return _this.reloadList();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:new\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:dismiss-all\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n    }\n\n    NotificationsController.prototype.initList = function() {\n      this.notificationsList = Immutable.List();\n      if (this.user) {\n        this.list = this.notificationsService.getNotificationsList(this.user.get(\"id\"), this.onlyUnread != null);\n      }\n      return this.loading = this.list == null;\n    };\n\n    NotificationsController.prototype.reloadList = function() {\n      this.initList();\n      return this.loadNotifications();\n    };\n\n    NotificationsController.prototype.loadNotifications = function() {\n      this.scrollDisabled = true;\n      this.loading = true;\n      this.scope.$emit(\"notifications:loading\");\n      return this.list.next().then((function(_this) {\n        return function(response) {\n          _this.notificationsList = _this.notificationsList.concat(response.get(\"items\"));\n          if (!_this.infiniteScrollDisabled && response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          _this.total = response.get(\"total\");\n          _this.scope.$emit(\"notifications:loaded\", _this.total);\n          _this.loading = false;\n          return _this.notificationsList;\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAsRead = function(notification, url) {\n      return this.notificationsService.setNotificationAsRead(notification.get(\"id\")).then((function(_this) {\n        return function() {\n          if (_this.location.$$url === url) {\n            _this.window.location.reload();\n          } else {\n            _this.location.path(url);\n          }\n          return _this.rootScope.$broadcast(\"notifications:dismiss\");\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAllAsRead = function() {\n      return this.notificationsService.setNotificationsAsRead().then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"notifications:dismiss-all\");\n        };\n      })(this));\n    };\n\n    return NotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  NotificationsService = (function(superClass) {\n    var _notificationTypes, _params;\n\n    extend(NotificationsService, superClass);\n\n    NotificationsService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"$translate\", \"$tgNavUrls\", \"$tgSections\"];\n\n    _notificationTypes = [\n      {\n        check: function(notification) {\n          return notification.get('event_type') === 1;\n        },\n        key: 'EVENTS.ASSIGNED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 2;\n        },\n        key: 'EVENTS.MENTIONED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 3;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_WATCHER',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 4;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_MEMBER',\n        translate_params: ['username']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 5;\n        },\n        key: 'EVENTS.COMMENTED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 6;\n        },\n        key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\n        translate_params: ['username', 'obj_name']\n      }\n    ];\n\n    _params = {\n      username: function(notification) {\n        var title_attr, url, user;\n        user = notification.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = this.navUrls.resolve('user-profile', {\n            username: notification.getIn(['data', 'user', 'username'])\n          });\n          return this._getLink(notification, url, user.get('name'), 'user-link', title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      project_name: function(notification) {\n        var url;\n        url = this.navUrls.resolve('project', {\n          project: notification.getIn(['data', 'project', 'slug'])\n        });\n        return this._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link');\n      },\n      obj_name: function(notification) {\n        var obj, text, url;\n        obj = this._getNotificationObject(notification);\n        url = this._getDetailObjUrl(notification, obj.get('content_type'));\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(notification, url, text, 'object-link');\n      }\n    };\n\n    function NotificationsService(rs, userTimelinePaginationSequenceService, translate, navUrls, tgSections) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.translate = translate;\n      this.navUrls = navUrls;\n      this.tgSections = tgSections;\n    }\n\n    NotificationsService.prototype.getNotificationsList = function(userId, onlyUnread) {\n      var config, total;\n      total = 0;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getNotifications(userId, page, onlyUnread).then(function(response) {\n            return response;\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addNotificationAttributes(obj);\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    NotificationsService.prototype.setNotificationAsRead = function(notificationId) {\n      return this.rs.users.setNotificationAsRead(notificationId);\n    };\n\n    NotificationsService.prototype.setNotificationsAsRead = function() {\n      return this.rs.users.setNotificationsAsRead();\n    };\n\n    NotificationsService.prototype._getNotificationObject = function(notification) {\n      if (notification.get('data').get('obj')) {\n        return notification.get('data').get('obj');\n      }\n    };\n\n    NotificationsService.prototype._getType = function(notification) {\n      return _.find(_notificationTypes, function(obj) {\n        return obj.check(notification);\n      });\n    };\n\n    NotificationsService.prototype._addNotificationAttributes = function(notification) {\n      var event_type, projectSectionPath, projectSlug, projectUrl, title, type;\n      event_type = notification.get('event_type');\n      type = this._getType(notification);\n      title = this._getTitle(notification, event_type, type);\n      notification = notification.set('title_html', title);\n      projectSlug = notification.getIn(['data', 'project', 'slug']);\n      projectSectionPath = this.tgSections.getPath(projectSlug);\n      projectUrl = this.navUrls.resolve(\"project-\" + projectSectionPath, {\n        project: projectSlug\n      });\n      notification = notification.set('projectUrl', projectUrl);\n      notification = notification.set('obj', this._getNotificationObject(notification));\n      return notification;\n    };\n\n    NotificationsService.prototype._translateTitleParams = function(param, notification, event) {\n      return _params[param].call(this, notification, event);\n    };\n\n    NotificationsService.prototype._getDetailObjUrl = function(notification, contentType) {\n      var url, urlMapping;\n      urlMapping = {\n        \"issue\": \"project-issues-detail\",\n        \"task\": \"project-tasks-detail\",\n        \"userstory\": \"project-userstories-detail\"\n      };\n      url = this.navUrls.resolve(urlMapping[contentType], {\n        project: notification.getIn(['data', 'project', 'slug']),\n        ref: notification.getIn(['data', 'obj', 'ref'])\n      });\n      return url;\n    };\n\n    NotificationsService.prototype._getLink = function(notification, url, text, css, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a href=\"\">').attr('title', title).attr('class', css).attr('ng-click', \"vm.setAsRead(notification, \\\"\" + url + \"\\\")\").append(span).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getParams = function(notification, event_type, notification_type) {\n      var params;\n      params = {};\n      notification_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, notification, event_type);\n        };\n      })(this));\n      return params;\n    };\n\n    NotificationsService.prototype._getTitle = function(notification, event_type, notification_type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(notification, event_type, notification_type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(notification_type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return NotificationsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarController;\n\n  ProfileBarController = (function() {\n    ProfileBarController.$inject = [\"tgUserService\"];\n\n    function ProfileBarController(userService) {\n      this.userService = userService;\n      this.loadStats();\n    }\n\n    ProfileBarController.prototype.loadStats = function() {\n      return this.userService.getStats(this.user.get(\"id\")).then((function(_this) {\n        return function(stats) {\n          return _this.stats = stats;\n        };\n      })(this));\n    };\n\n    return ProfileBarController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarDirective;\n\n  ProfileBarDirective = function() {\n    return {\n      templateUrl: \"profile/profile-bar/profile-bar.html\",\n      controller: \"ProfileBar\",\n      controllerAs: \"vm\",\n      scope: {\n        user: \"=user\",\n        isCurrentUser: \"=iscurrentuser\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsController;\n\n  ProfileContactsController = (function() {\n    ProfileContactsController.$inject = [\"tgUserService\", \"tgCurrentUserService\"];\n\n    function ProfileContactsController(userService, currentUserService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.currentUser = this.currentUserService.getUser();\n      this.isCurrentUser = false;\n      if (this.currentUser && this.currentUser.get(\"id\") === this.user.get(\"id\")) {\n        this.isCurrentUser = true;\n      }\n    }\n\n    ProfileContactsController.prototype.loadContacts = function() {\n      return this.userService.getContacts(this.user.get(\"id\")).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    return ProfileContactsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileContacts\", ProfileContactsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsDirective;\n\n  ProfileContactsDirective = function() {\n    var link;\n    link = function(scope, elm, attrs, ctrl) {\n      return ctrl.loadContacts();\n    };\n    return {\n      templateUrl: \"profile/profile-contacts/profile-contacts.html\",\n      scope: {\n        user: \"=\"\n      },\n      controllerAs: \"vm\",\n      controller: \"ProfileContacts\",\n      link: link,\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavItemDirective;\n\n  FavItemDirective = function() {\n    var link, templateUrl;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.vm = {\n        item: scope.item\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.itemType === \"project\") {\n        return \"profile/profile-favs/items/project.html\";\n      } else {\n        return \"profile/profile-favs/items/ticket.html\";\n      }\n    };\n    return {\n      scope: {\n        \"item\": \"=tgFavItem\"\n      },\n      link: link,\n      templateUrl: templateUrl\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavsBaseController, ProfileLikedController, ProfileVotedController, ProfileWatchedController, debounceLeading,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  FavsBaseController = (function() {\n    function FavsBaseController() {\n      this._init();\n    }\n\n    FavsBaseController.prototype._init = function() {\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = true;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._resetList();\n      this.q = null;\n      return this.type = null;\n    };\n\n    FavsBaseController.prototype._resetList = function() {\n      this.items = Immutable.List();\n      this.scrollDisabled = false;\n      return this._page = 1;\n    };\n\n    FavsBaseController.prototype._enableLoadingSpinner = function() {\n      return this.isLoading = true;\n    };\n\n    FavsBaseController.prototype._disableLoadingSpinner = function() {\n      return this.isLoading = false;\n    };\n\n    FavsBaseController.prototype._enableScroll = function() {\n      return this.scrollDisabled = false;\n    };\n\n    FavsBaseController.prototype._disableScroll = function() {\n      return this.scrollDisabled = true;\n    };\n\n    FavsBaseController.prototype._checkIfHasMorePages = function(hasNext) {\n      if (hasNext) {\n        this._page += 1;\n        return this._enableScroll();\n      } else {\n        return this._disableScroll();\n      }\n    };\n\n    FavsBaseController.prototype._checkIfHasNoResults = function() {\n      return this.hasNoResults = this.items.size === 0;\n    };\n\n    FavsBaseController.prototype.loadItems = function() {\n      this._enableLoadingSpinner();\n      this._disableScroll();\n      return this._getItems(this.user.get(\"id\"), this._page, this.type, this.q).then((function(_this) {\n        return function(response) {\n          _this.items = _this.items.concat(response.get(\"data\"));\n          _this._checkIfHasMorePages(response.get(\"next\"));\n          _this._checkIfHasNoResults();\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this));\n    };\n\n    FavsBaseController.prototype.filterByTextQuery = debounceLeading(500, function() {\n      this._resetList();\n      return this.loadItems();\n    });\n\n    FavsBaseController.prototype.showAll = function() {\n      if (this.type !== null) {\n        this.type = null;\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showProjectsOnly = function() {\n      if (this.type !== \"project\") {\n        this.type = \"project\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showEpicsOnly = function() {\n      if (this.type !== \"epic\") {\n        this.type = \"epic\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showUserStoriesOnly = function() {\n      if (this.type !== \"userstory\") {\n        this.type = \"userstory\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showTasksOnly = function() {\n      if (this.type !== \"task\") {\n        this.type = \"task\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showIssuesOnly = function() {\n      if (this.type !== \"issue\") {\n        this.type = \"issue\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    return FavsBaseController;\n\n  })();\n\n  ProfileLikedController = (function(superClass) {\n    extend(ProfileLikedController, superClass);\n\n    ProfileLikedController.$inject = [\"tgUserService\"];\n\n    function ProfileLikedController(userService) {\n      this.userService = userService;\n      ProfileLikedController.__super__.constructor.call(this);\n      this.tabName = 'likes';\n      this.enableFilterByAll = false;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = false;\n      this.enableFilterByUserStories = false;\n      this.enableFilterByTasks = false;\n      this.enableFilterByIssues = false;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getLiked;\n    }\n\n    return ProfileLikedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileLiked\", ProfileLikedController);\n\n  ProfileVotedController = (function(superClass) {\n    extend(ProfileVotedController, superClass);\n\n    ProfileVotedController.$inject = [\"tgUserService\"];\n\n    function ProfileVotedController(userService) {\n      this.userService = userService;\n      ProfileVotedController.__super__.constructor.call(this);\n      this.tabName = 'upvotes';\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getVoted;\n    }\n\n    return ProfileVotedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileVoted\", ProfileVotedController);\n\n  ProfileWatchedController = (function(superClass) {\n    extend(ProfileWatchedController, superClass);\n\n    ProfileWatchedController.$inject = [\"tgUserService\"];\n\n    function ProfileWatchedController(userService) {\n      this.userService = userService;\n      ProfileWatchedController.__super__.constructor.call(this);\n      this.tabName = 'watchers';\n      this._getItems = this.userService.getWatched;\n    }\n\n    return ProfileWatchedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileWatched\", ProfileWatchedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileLikedDirective, ProfileVotedDirective, ProfileWatchedDirective, base;\n\n  base = {\n    scope: {},\n    bindToController: {\n      user: \"=\",\n      type: \"@\",\n      q: \"@\",\n      scrollDisabled: \"@\",\n      isLoading: \"@\",\n      hasNoResults: \"@\"\n    },\n    controller: null,\n    controllerAs: \"vm\",\n    templateUrl: \"profile/profile-favs/profile-favs.html\"\n  };\n\n  ProfileLikedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileLiked\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective);\n\n  ProfileVotedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileVoted\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective);\n\n  ProfileWatchedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileWatched\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = (function() {\n    ProfileHints.prototype.HINTS = [\n      {\n        url: \"https://resources.taiga.io/extend/import-export-projects/\"\n      }, {\n        url: \"https://resources.taiga.io/features/customisation/#tier-4-custom-fields-and-due-dates\"\n      }, {}, {}\n    ];\n\n    function ProfileHints(translate) {\n      var hintKey;\n      this.translate = translate;\n      hintKey = Math.floor(Math.random() * this.HINTS.length) + 1;\n      this.hint = this.HINTS[hintKey - 1];\n      this.hint.linkText = this.hint.linkText || 'HINTS.LINK';\n      this.hint.title = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TITLE\");\n      this.hint.text = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TEXT\");\n    }\n\n    return ProfileHints;\n\n  })();\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = function($translate) {\n    return {\n      scope: {},\n      controller: \"ProfileHints\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-hints/profile-hints.html\"\n    };\n  };\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsController;\n\n  ProfileProjectsController = (function() {\n    ProfileProjectsController.$inject = [\"tgProjectsService\", \"tgUserService\"];\n\n    function ProfileProjectsController(projectsService, userService) {\n      this.projectsService = projectsService;\n      this.userService = userService;\n    }\n\n    ProfileProjectsController.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this.user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.userService.attachUserContactsToProjects(_this.user.get(\"id\"), projects);\n        };\n      })(this)).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    return ProfileProjectsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileProjects\", ProfileProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsDirective;\n\n  ProfileProjectsDirective = function() {\n    var link;\n    link = function(scope, elm, attr, ctrl) {\n      return ctrl.loadProjects();\n    };\n    return {\n      templateUrl: \"profile/profile-projects/profile-projects.html\",\n      scope: {\n        user: \"=\"\n      },\n      link: link,\n      bindToController: true,\n      controllerAs: \"vm\",\n      controller: \"ProfileProjects\"\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabDirective;\n\n  ProfileTabDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl, transclude) {\n      scope.tab = {};\n      attrs.$observe(\"tgProfileTab\", function(name) {\n        return scope.tab.name = name;\n      });\n      attrs.$observe(\"tabTitle\", function(title) {\n        return scope.tab.title = title;\n      });\n      scope.tab.icon = attrs.tabIcon;\n      scope.tab.active = !!attrs.tabActive;\n      if (scope.$eval(attrs.tabDisabled) !== true) {\n        return ctrl.addTab(scope.tab);\n      }\n    };\n    return {\n      templateUrl: \"profile/profile-tab/profile-tab.html\",\n      scope: {},\n      require: \"^tgProfileTabs\",\n      link: link,\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTab\", ProfileTabDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsController;\n\n  ProfileTabsController = (function() {\n    function ProfileTabsController() {\n      this.tabs = [];\n    }\n\n    ProfileTabsController.prototype.addTab = function(tab) {\n      return this.tabs.push(tab);\n    };\n\n    ProfileTabsController.prototype.toggleTab = function(tab) {\n      _.map(this.tabs, function(tab) {\n        return tab.active = false;\n      });\n      return tab.active = true;\n    };\n\n    return ProfileTabsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileTabs\", ProfileTabsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsDirective;\n\n  ProfileTabsDirective = function() {\n    return {\n      scope: {},\n      controller: \"ProfileTabs\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-tabs/profile-tabs.html\",\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTabs\", ProfileTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileController;\n\n  ProfileController = (function() {\n    ProfileController.$inject = [\"tgAppMetaService\", \"tgCurrentUserService\", \"$routeParams\", \"tgUserService\", \"tgXhrErrorService\", \"$translate\"];\n\n    function ProfileController(appMetaService, currentUserService, routeParams, userService, xhrError, translate) {\n      this.appMetaService = appMetaService;\n      this.currentUserService = currentUserService;\n      this.routeParams = routeParams;\n      this.userService = userService;\n      this.xhrError = xhrError;\n      this.translate = translate;\n      this.isCurrentUser = false;\n      if (this.routeParams.slug) {\n        this.userService.getUserByUserName(this.routeParams.slug).then((function(_this) {\n          return function(user) {\n            if (!user.get('is_active')) {\n              return _this.xhrError.notFound();\n            } else {\n              _this.user = user;\n              _this.isCurrentUser = false;\n              _this._setMeta(_this.user);\n              return user;\n            }\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(xhr) {\n            return _this.xhrError.response(xhr);\n          };\n        })(this));\n      } else {\n        this.user = this.currentUserService.getUser();\n        this.isCurrentUser = true;\n        this._setMeta(this.user);\n      }\n    }\n\n    ProfileController.prototype._setMeta = function(user) {\n      var ctx, description, title;\n      ctx = {\n        userFullName: user.get(\"full_name_display\"),\n        userUsername: user.get(\"username\")\n      };\n      title = this.translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx);\n      description = user.get(\"bio\");\n      return this.appMetaService.setAll(title, description);\n    };\n\n    return ProfileController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"Profile\", ProfileController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockedProjectExplanationDirective;\n\n  BlockedProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/project/blocked-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonController;\n\n  ContactProjectButtonController = (function() {\n    ContactProjectButtonController.$inject = ['tgLightboxFactory'];\n\n    function ContactProjectButtonController(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    ContactProjectButtonController.prototype.launchContactForm = function() {\n      return this.lightboxFactory.create('tg-lb-contact-project', {\n        \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.project\n      });\n    };\n\n    return ContactProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonDirective;\n\n  ContactProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"ContactProjectButtonCtrl\",\n      bindToController: {\n        project: '=',\n        layout: '@'\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/contact-project-button/contact-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbController;\n\n  ContactProjectLbController = (function() {\n    ContactProjectLbController.$inject = [\"lightboxService\", \"tgResources\", \"$tgConfirm\"];\n\n    function ContactProjectLbController(lightboxService, rs, confirm) {\n      this.lightboxService = lightboxService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.contact = {};\n    }\n\n    ContactProjectLbController.prototype.contactProject = function() {\n      var message, project, promise;\n      project = this.project.get('id');\n      message = this.contact.message;\n      promise = this.rs.projects.contactProject(project, message);\n      this.sendingFeedback = true;\n      return promise.then((function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.sendingFeedback = false;\n          return _this.confirm.notify(\"success\");\n        };\n      })(this));\n    };\n\n    return ContactProjectLbController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbDirective;\n\n  ContactProjectLbDirective = function(lightboxService) {\n    var link;\n    this.inject = ['lightboxService'];\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      controller: \"ContactProjectLbCtrl\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonController;\n\n  LikeProjectButtonController = (function() {\n    LikeProjectButtonController.$inject = [\"$tgConfirm\", \"tgLikeProjectButtonService\"];\n\n    function LikeProjectButtonController(confirm, likeButtonService) {\n      this.confirm = confirm;\n      this.likeButtonService = likeButtonService;\n      this.isMouseOver = false;\n      this.loading = false;\n    }\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsOver = function() {\n      return this.isMouseOver = true;\n    };\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsLeave = function() {\n      return this.isMouseOver = false;\n    };\n\n    LikeProjectButtonController.prototype.toggleLike = function() {\n      var promise;\n      this.loading = true;\n      if (!this.project.get(\"is_fan\")) {\n        promise = this._like();\n      } else {\n        promise = this._unlike();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    LikeProjectButtonController.prototype._like = function() {\n      return this.likeButtonService.like(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.showTextWhenMouseIsLeave();\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    LikeProjectButtonController.prototype._unlike = function() {\n      return this.likeButtonService.unlike(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonDirective;\n\n  LikeProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"LikeProjectButton\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/like-project-button/like-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  LikeProjectButtonService = (function(superClass) {\n    extend(LikeProjectButtonService, superClass);\n\n    LikeProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function LikeProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    LikeProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    LikeProjectButtonService.prototype._updateProjects = function(projectId, isFan) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, function(project) {\n        var totalFans;\n        totalFans = project.get(\"total_fans\");\n        if (isFan) {\n          totalFans++;\n        } else {\n          totalFans--;\n        }\n        return project.merge({\n          is_fan: isFan,\n          total_fans: totalFans\n        });\n      });\n      return this.currentUserService.setProjects(projects);\n    };\n\n    LikeProjectButtonService.prototype._updateCurrentProject = function(isFan) {\n      var project, totalFans;\n      totalFans = this.projectService.project.get(\"total_fans\");\n      if (isFan) {\n        totalFans++;\n      } else {\n        totalFans--;\n      }\n      project = this.projectService.project.merge({\n        is_fan: isFan,\n        total_fans: totalFans\n      });\n      return this.projectService.setProject(project);\n    };\n\n    LikeProjectButtonService.prototype.like = function(projectId) {\n      return this.rs.projects.likeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, true);\n          return _this._updateCurrentProject(true);\n        };\n      })(this));\n    };\n\n    LikeProjectButtonService.prototype.unlike = function(projectId) {\n      return this.rs.projects.unlikeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, false);\n          return _this._updateCurrentProject(false);\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SortProjectsDirective;\n\n  SortProjectsDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var drake, itemEl, scroll;\n      itemEl = null;\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).hasClass('list-itemtype-project');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var i, index, len, project, sortData, sorted_project_ids, value;\n        itemEl = $(item);\n        project = itemEl.scope().project;\n        index = itemEl.index();\n        sorted_project_ids = _.map(scope.projects.toJS(), function(p) {\n          return p.id;\n        });\n        sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"));\n        sorted_project_ids.splice(index, 0, project.get('id'));\n        sortData = [];\n        for (index = i = 0, len = sorted_project_ids.length; i < len; index = ++i) {\n          value = sorted_project_ids[index];\n          sortData.push({\n            \"project_id\": value,\n            \"order\": index\n          });\n        }\n        return currentUserService.bulkUpdateProjectsOrder(sortData);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    directive = {\n      scope: {\n        projects: \"=tgSortProjects\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonController;\n\n  WatchProjectButtonController = (function() {\n    WatchProjectButtonController.$inject = [\"$tgConfirm\", \"tgWatchProjectButtonService\"];\n\n    function WatchProjectButtonController(confirm, watchButtonService) {\n      this.confirm = confirm;\n      this.watchButtonService = watchButtonService;\n      this.showWatchOptions = false;\n      this.loading = false;\n    }\n\n    WatchProjectButtonController.prototype.toggleWatcherOptions = function() {\n      return this.showWatchOptions = !this.showWatchOptions;\n    };\n\n    WatchProjectButtonController.prototype.closeWatcherOptions = function() {\n      return this.showWatchOptions = false;\n    };\n\n    WatchProjectButtonController.prototype.watch = function(notifyLevel) {\n      if (notifyLevel === this.project.get('notify_level')) {\n        return;\n      }\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.watch(this.project.get('id'), notifyLevel)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    WatchProjectButtonController.prototype.unwatch = function() {\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.unwatch(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonDirective;\n\n  WatchProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"WatchProjectButton\",\n      bindToController: {\n        project: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/watch-project-button/watch-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  WatchProjectButtonService = (function(superClass) {\n    extend(WatchProjectButtonService, superClass);\n\n    WatchProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function WatchProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    WatchProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    WatchProjectButtonService.prototype._updateProjects = function(projectId, notifyLevel, isWatcher) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, (function(_this) {\n        return function(project) {\n          var totalWatchers;\n          totalWatchers = project.get('total_watchers');\n          if (!_this.projectService.project.get('is_watcher') && isWatcher) {\n            totalWatchers++;\n          } else if (_this.projectService.project.get('is_watcher') && !isWatcher) {\n            totalWatchers--;\n          }\n          return project.merge({\n            is_watcher: isWatcher,\n            total_watchers: totalWatchers,\n            notify_level: notifyLevel\n          });\n        };\n      })(this));\n      return this.currentUserService.setProjects(projects);\n    };\n\n    WatchProjectButtonService.prototype._updateCurrentProject = function(notifyLevel, isWatcher) {\n      var project, totalWatchers;\n      totalWatchers = this.projectService.project.get(\"total_watchers\");\n      if (!this.projectService.project.get('is_watcher') && isWatcher) {\n        totalWatchers++;\n      } else if (this.projectService.project.get('is_watcher') && !isWatcher) {\n        totalWatchers--;\n      }\n      project = this.projectService.project.merge({\n        is_watcher: isWatcher,\n        notify_level: notifyLevel,\n        total_watchers: totalWatchers\n      });\n      return this.projectService.setProject(project);\n    };\n\n    WatchProjectButtonService.prototype.watch = function(projectId, notifyLevel) {\n      return this.rs.projects.watchProject(projectId, notifyLevel).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, notifyLevel, true);\n          return _this._updateCurrentProject(notifyLevel, true);\n        };\n      })(this));\n    };\n\n    WatchProjectButtonService.prototype.unwatch = function(projectId) {\n      return this.rs.projects.unwatchProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, null, false);\n          return _this._updateCurrentProject(null, false);\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormController;\n\n  AsanaImportProjectFormController = (function() {\n    AsanaImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function AsanaImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Asana\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"scrum\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    AsanaImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    AsanaImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    AsanaImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    AsanaImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return AsanaImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormDirective;\n\n  AsanaImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\n      controller: \"AsanaImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  AsanaImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportController;\n\n  AsanaImportController = (function() {\n    AsanaImportController.$inject = ['tgAsanaImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function AsanaImportController(asanaImportService, confirm, translate, importProjectService) {\n      this.asanaImportService = asanaImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-asana';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    AsanaImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-asana';\n      return this.asanaImportService.fetchProjects();\n    };\n\n    AsanaImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-asana';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.asanaImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-asana';\n    };\n\n    AsanaImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-asana';\n    };\n\n    AsanaImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.asanaImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return AsanaImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportDirective;\n\n  AsanaImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/asana-import/asana-import.html\",\n      controller: \"AsanaImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  AsanaImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AsanaImportService = (function(superClass) {\n    extend(AsanaImportService, superClass);\n\n    AsanaImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function AsanaImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    AsanaImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    AsanaImportService.prototype.fetchProjects = function() {\n      return this.resources.asanaImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.asanaImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.asanaImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    AsanaImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.asanaImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.asanaImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return AsanaImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreatetProjectFormController;\n\n  CreatetProjectFormController = (function() {\n    CreatetProjectFormController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$projectUrl\", \"$location\", \"$tgNavUrls\", \"$tgAnalytics\"];\n\n    function CreatetProjectFormController(currentUserService, projectsService, projectUrl, location, navUrls, analytics) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.projectUrl = projectUrl;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.errorList = [];\n      this.projectForm = {\n        is_private: false\n      };\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n      if (this.type === 'scrum') {\n        this.projectForm.creation_template = 1;\n      } else {\n        this.projectForm.creation_template = 2;\n      }\n    }\n\n    CreatetProjectFormController.prototype.submit = function() {\n      this.errorList = [];\n      if (!this.projectForm.name) {\n        this.errorList.push('name');\n      }\n      if (!this.projectForm.description) {\n        this.errorList.push('description');\n      }\n      if (this.errorList.length === 0) {\n        this.formSubmitLoading = true;\n        return this.projectsService.create(this.projectForm).then((function(_this) {\n          return function(project) {\n            _this.analytics.trackEvent(\"project\", \"create\", \"project creation\", {\n              slug: project.get('slug'),\n              id: project.get('id')\n            });\n            _this.location.url(_this.projectUrl.get(project));\n            return _this.currentUserService.loadProjects();\n          };\n        })(this));\n      }\n    };\n\n    CreatetProjectFormController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    CreatetProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    CreatetProjectFormController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    return CreatetProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectFormDirective;\n\n  CreateProjectFormDirective = function() {\n    return {\n      templateUrl: \"projects/create/create-project-form/create-project-form.html\",\n      controller: \"CreateProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectMembersRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectMembersRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        limitMembersPrivateProject: '=',\n        limitMembersPublicProject: '='\n      },\n      templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        canCreatePrivateProjects: '=',\n        canCreatePublicProjects: '='\n      },\n      templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectController;\n\n  CreateProjectController = (function() {\n    CreateProjectController.$inject = [\"tgAppMetaService\", \"$translate\", \"tgProjectService\", \"$tgAuth\", \"tgLightboxFactory\", \"tgResources\", \"$tgConfig\"];\n\n    function CreateProjectController(appMetaService, translate, projectService, authService, lightboxFactory, rs, config) {\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.authService = authService;\n      this.lightboxFactory = lightboxFactory;\n      this.rs = rs;\n      this.config = config;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n      this.authService.refresh();\n      this.displayScrumDesc = false;\n      this.dontAsk = false;\n      if (!this.config.get(\"isSaas\")) {\n        this.rs.user.getUserStorage('dont_ask_premise_newsletter').then((function(_this) {\n          return function(storageState) {\n            _this.dontAsk = storageState;\n            return _this.displayOnPremise();\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(storageError) {\n            if (storageError.status = 404) {\n              _this.rs.user.createUserStorage('dont_ask_premise_newsletter', false);\n              _this.dontAsk = false;\n              return _this.displayOnPremise();\n            }\n          };\n        })(this));\n      }\n    }\n\n    CreateProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    CreateProjectController.prototype.displayOnPremise = function() {\n      if (!this.dontAsk) {\n        return this.lightboxFactory.create(\"tg-newsletter-email-lightbox\", {\n          \"class\": \"lightbox newsletter-email\"\n        });\n      }\n    };\n\n    CreateProjectController.prototype.displayHelp = function(type, $event) {\n      $event.stopPropagation();\n      $event.preventDefault();\n      if (type === 'scrum') {\n        this.displayScrumDesc = !this.displayScrumDesc;\n      }\n      if (type === 'kanban') {\n        return this.displayKanbanDesc = !this.displayKanbanDesc;\n      }\n    };\n\n    return CreateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectController;\n\n  DuplicateProjectController = (function() {\n    DuplicateProjectController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$tgLocation\", \"$tgNavUrls\"];\n\n    function DuplicateProjectController(currentUserService, projectsService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.user = this.currentUserService.getUser();\n      this.members = Immutable.List();\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n      this.projectForm = {\n        is_private: false\n      };\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    DuplicateProjectController.prototype.refreshReferenceProject = function(slug) {\n      return this.projectsService.getProjectBySlug(slug).then((function(_this) {\n        return function(project) {\n          _this.referenceProject = project;\n          _this.members = project.get('members').filter(function(it) {\n            return it.get('id') !== _this.user.get('id');\n          });\n          _this.invitedMembers = _this.members.map(function(it) {\n            return it.get('id');\n          });\n          return _this.checkUsersLimit();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.toggleInvitedMember = function(member) {\n      if (this.invitedMembers.includes(member)) {\n        this.invitedMembers = this.invitedMembers.filter(function(it) {\n          return it !== member;\n        });\n      } else {\n        this.invitedMembers = this.invitedMembers.push(member);\n      }\n      return this.checkUsersLimit();\n    };\n\n    DuplicateProjectController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.invitedMembers.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.invitedMembers.size + 1);\n    };\n\n    DuplicateProjectController.prototype.submit = function() {\n      var data, projectId;\n      projectId = this.referenceProject.get('id');\n      data = this.projectForm;\n      data.users = this.invitedMembers;\n      this.formSubmitLoading = true;\n      return this.projectsService.duplicate(projectId, data).then((function(_this) {\n        return function(newProject) {\n          _this.formSubmitLoading = false;\n          _this.location.path(_this.navUrls.resolve(\"project\", {\n            project: newProject.data.slug\n          }));\n          return _this.currentUserService.loadProjects();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid && this.limitMembersPrivateProject.valid;\n      } else {\n        return this.canCreatePublicProjects.valid && this.limitMembersPublicProject.valid;\n      }\n    };\n\n    DuplicateProjectController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    DuplicateProjectController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    return DuplicateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectDirective;\n\n  DuplicateProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/duplicate/duplicate-project.html\",\n      controller: \"DuplicateProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  DuplicateProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormController;\n\n  GithubImportProjectFormController = (function() {\n    GithubImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function GithubImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Github\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"kanban\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    GithubImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    GithubImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    GithubImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    GithubImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return GithubImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormDirective;\n\n  GithubImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\n      controller: \"GithubImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  GithubImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportController;\n\n  GithubImportController = (function() {\n    GithubImportController.$inject = ['tgGithubImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function GithubImportController(githubImportService, confirm, translate, importProjectService) {\n      this.githubImportService = githubImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-github';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.githubImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.githubImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    GithubImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-github';\n      return this.githubImportService.fetchProjects();\n    };\n\n    GithubImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-github';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.githubImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-github';\n    };\n\n    GithubImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-github';\n    };\n\n    GithubImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.githubImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return GithubImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportDirective;\n\n  GithubImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/github-import/github-import.html\",\n      controller: \"GithubImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  GithubImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  GithubImportService = (function(superClass) {\n    extend(GithubImportService, superClass);\n\n    GithubImportService.$inject = ['tgResources', '$q'];\n\n    function GithubImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    GithubImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    GithubImportService.prototype.fetchProjects = function() {\n      return this.resources.githubImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.githubImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.githubImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    GithubImportService.prototype.getAuthUrl = function(callbackUri) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.githubImporter.getAuthUrl(callbackUri).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.githubImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return GithubImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersController;\n\n  ImportProjectMembersController = (function() {\n    ImportProjectMembersController.$inject = ['tgCurrentUserService', 'tgUserService'];\n\n    function ImportProjectMembersController(currentUserService, userService) {\n      this.currentUserService = currentUserService;\n      this.userService = userService;\n      this.selectImportUserLightbox = false;\n      this.warningImportUsers = false;\n      this.displayEmailSelector = true;\n      this.cancelledUsers = Immutable.List();\n      this.selectedUsers = Immutable.List();\n      this.selectableUsers = Immutable.List();\n      this.userContacts = Immutable.List();\n    }\n\n    ImportProjectMembersController.prototype.fetchUser = function() {\n      this.currentUser = this.currentUserService.getUser();\n      return this.userService.getContacts(this.currentUser.get('id')).then((function(_this) {\n        return function(userContacts) {\n          _this.userContacts = userContacts;\n          return _this.refreshSelectableUsers();\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.searchUser = function(user) {\n      this.selectImportUserLightbox = true;\n      return this.searchingUser = user;\n    };\n\n    ImportProjectMembersController.prototype.beforeSubmitUsers = function() {\n      if (this.selectedUsers.size !== this.members.size) {\n        return this.warningImportUsers = true;\n      } else {\n        return this.submit();\n      }\n    };\n\n    ImportProjectMembersController.prototype.confirmUser = function(externalUser, taigaUser) {\n      var user;\n      this.selectImportUserLightbox = false;\n      user = Immutable.Map();\n      user = user.set('user', externalUser);\n      user = user.set('taigaUser', taigaUser);\n      this.selectedUsers = this.selectedUsers.push(user);\n      this.discardSuggestedUser(externalUser);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.unselectUser = function(user) {\n      var index;\n      index = this.selectedUsers.findIndex(function(it) {\n        return it.getIn(['user', 'id']) === user.get('id');\n      });\n      this.selectedUsers = this.selectedUsers[\"delete\"](index);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.discardSuggestedUser = function(member) {\n      return this.cancelledUsers = this.cancelledUsers.push(member.get('id'));\n    };\n\n    ImportProjectMembersController.prototype.getSelectedMember = function(member) {\n      return this.selectedUsers.find(function(it) {\n        return it.getIn(['user', 'id']) === member.get('id');\n      });\n    };\n\n    ImportProjectMembersController.prototype.isMemberSelected = function(member) {\n      return !!this.getSelectedMember(member);\n    };\n\n    ImportProjectMembersController.prototype.getUser = function(user) {\n      var userSelected;\n      userSelected = this.getSelectedMember(user);\n      if (userSelected) {\n        return userSelected.get('taigaUser');\n      } else {\n        return null;\n      }\n    };\n\n    ImportProjectMembersController.prototype.submit = function() {\n      var users;\n      this.warningImportUsers = false;\n      users = Immutable.Map();\n      this.selectedUsers.map(function(it) {\n        var id;\n        id = '';\n        if (_.isString(it.get('taigaUser'))) {\n          id = it.get('taigaUser');\n        } else {\n          id = it.getIn(['taigaUser', 'id']);\n        }\n        return users = users.set(it.getIn(['user', 'id']), id);\n      });\n      return this.onSubmit({\n        users: users\n      });\n    };\n\n    ImportProjectMembersController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size + 1);\n    };\n\n    ImportProjectMembersController.prototype.showSuggestedMatch = function(member) {\n      return member.get('user') && this.cancelledUsers.indexOf(member.get('id')) === -1 && !this.isMemberSelected(member);\n    };\n\n    ImportProjectMembersController.prototype.getDistinctSelectedTaigaUsers = function() {\n      var ids, users;\n      ids = [];\n      users = this.selectedUsers.filter(function(it) {\n        var id;\n        id = it.getIn(['taigaUser', 'id']);\n        if (ids.indexOf(id) === -1) {\n          ids.push(id);\n          return true;\n        }\n        return false;\n      });\n      return users.filter((function(_this) {\n        return function(it) {\n          return it.getIn(['taigaUser', 'id']) !== _this.currentUser.get('id');\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.refreshSelectableUsers = function() {\n      var users;\n      this.importMoreUsersDisabled = this.isImportMoreUsersDisabled();\n      if (this.importMoreUsersDisabled) {\n        users = this.getDistinctSelectedTaigaUsers();\n        this.selectableUsers = users.map(function(it) {\n          return it.get('taigaUser');\n        });\n        this.displayEmailSelector = false;\n      } else {\n        this.selectableUsers = this.userContacts;\n        this.displayEmailSelector = true;\n      }\n      return this.selectableUsers = this.selectableUsers.push(this.currentUser);\n    };\n\n    ImportProjectMembersController.prototype.isImportMoreUsersDisabled = function() {\n      var total, users;\n      users = this.getDistinctSelectedTaigaUsers();\n      total = users.size + 2;\n      if (this.project.get('is_private')) {\n        return !this.currentUserService.canAddMembersPrivateProject(total).valid;\n      } else {\n        return !this.currentUserService.canAddMembersPublicProject(total).valid;\n      }\n    };\n\n    return ImportProjectMembersController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersDirective;\n\n  ImportProjectMembersDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        ctrl.fetchUser();\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/import-project-members/import-project-members.html\",\n      controller: \"ImportProjectMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSubmit: '&',\n        platform: '@',\n        logo: '@',\n        onCancel: '&'\n      }\n    };\n  };\n\n  ImportProjectMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorController;\n\n  ImportProjectSelectorController = (function() {\n    function ImportProjectSelectorController() {}\n\n    ImportProjectSelectorController.prototype.selectProject = function(project) {\n      return this.onSelectProject({\n        project: Immutable.fromJS(project)\n      });\n    };\n\n    return ImportProjectSelectorController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorDirective;\n\n  ImportProjectSelectorDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-project-selector/import-project-selector.html\",\n      controller: \"ImportProjectSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        projects: '<',\n        onCancel: '&',\n        onSelectProject: '&',\n        logo: '@',\n        noProjectsMsg: '@',\n        search: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaController;\n\n  ImportTaigaController = (function() {\n    ImportTaigaController.$inject = ['$tgConfirm', '$tgResources', 'tgImportProjectService', '$translate', '$tgAnalytics'];\n\n    function ImportTaigaController(confirm, rs, importProjectService, translate, analytics) {\n      this.confirm = confirm;\n      this.rs = rs;\n      this.importProjectService = importProjectService;\n      this.translate = translate;\n      this.analytics = analytics;\n    }\n\n    ImportTaigaController.prototype.importTaiga = function(files) {\n      var file, loader, promise;\n      this.analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1);\n      file = files[0];\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.rs.projects[\"import\"](file, loader.update);\n      this.importProjectService.importPromise(promise)[\"finally\"](function() {\n        return loader.stop();\n      });\n    };\n\n    return ImportTaigaController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaDirective;\n\n  ImportTaigaDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-taiga/import-taiga.html\",\n      controller: \"ImportTaigaCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LbImportErrorDirective;\n\n  LbImportErrorDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      lightboxService.open(el);\n      return scope.close = function() {\n        lightboxService.close(el);\n      };\n    };\n    return {\n      templateUrl: \"projects/create/import/import-project-error-lb.html\",\n      link: link\n    };\n  };\n\n  LbImportErrorDirective.$inject = [\"lightboxService\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectController;\n\n  ImportProjectController = (function() {\n    ImportProjectController.$inject = ['tgTrelloImportService', 'tgJiraImportService', 'tgGithubImportService', 'tgAsanaImportService', '$location', '$window', '$routeParams', '$tgNavUrls', '$tgConfig', '$tgConfirm', '$tgAnalytics'];\n\n    function ImportProjectController(trelloService, jiraService, githubService, asanaService, location, window, routeParams, tgNavUrls, config, confirm, analytics) {\n      this.trelloService = trelloService;\n      this.jiraService = jiraService;\n      this.githubService = githubService;\n      this.asanaService = asanaService;\n      this.location = location;\n      this.window = window;\n      this.routeParams = routeParams;\n      this.tgNavUrls = tgNavUrls;\n      this.config = config;\n      this.confirm = confirm;\n      this.analytics = analytics;\n    }\n\n    ImportProjectController.prototype.start = function() {\n      var asanaOauthToken, githubOauthToken, jiraOauthToken, jiraOauthVerifier, locationSearch, trelloOauthToken;\n      this.token = null;\n      this.from = this.routeParams.platform;\n      locationSearch = this.location.search();\n      if (this.from) {\n        this.analytics.trackEvent(\"import\", this.from, \"Start import from \" + this.from, 1);\n      }\n      if (this.from === \"asana\") {\n        asanaOauthToken = locationSearch.code;\n        if (locationSearch.code) {\n          asanaOauthToken = locationSearch.code;\n          return this.asanaService.authorize(asanaOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: encodeURIComponent(JSON.stringify(token))\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = JSON.parse(decodeURIComponent(locationSearch.token));\n          this.asanaService.setToken(this.token);\n        }\n      }\n      if (this.from === 'trello') {\n        if (locationSearch.oauth_verifier) {\n          trelloOauthToken = locationSearch.oauth_verifier;\n          return this.trelloService.authorize(trelloOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.trelloService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"github\") {\n        if (locationSearch.code) {\n          githubOauthToken = locationSearch.code;\n          return this.githubService.authorize(githubOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.githubService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"jira\") {\n        jiraOauthToken = locationSearch.oauth_token;\n        if (jiraOauthToken) {\n          jiraOauthVerifier = locationSearch.oauth_verifier;\n          return this.jiraService.authorize(jiraOauthVerifier).then(((function(_this) {\n            return function(data) {\n              return _this.location.search({\n                token: data.token,\n                url: data.url\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = locationSearch.token;\n          return this.jiraService.setToken(locationSearch.token, locationSearch.url);\n        }\n      }\n    };\n\n    ImportProjectController.prototype.select = function(from) {\n      var callbackUri;\n      if (from === \"trello\") {\n        return this.trelloService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"jira\") {\n        return this.jiraService.getAuthUrl(this.jiraUrl).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this), (function(_this) {\n          return function(err) {\n            return _this.confirm.notify('error', err);\n          };\n        })(this));\n      } else if (from === \"github\") {\n        callbackUri = this.location.absUrl() + \"/github\";\n        return this.githubService.getAuthUrl(callbackUri).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"asana\") {\n        return this.asanaService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else {\n        return this.from = from;\n      }\n    };\n\n    ImportProjectController.prototype.unfoldOptions = function(options) {\n      return this.unfoldedOptions = options;\n    };\n\n    ImportProjectController.prototype.isActiveImporter = function(importer) {\n      switch (importer) {\n        case \"asana\":\n          return this.config.get('enableAsanaImporter');\n        case \"github\":\n          return this.config.get('enableGithubImporter');\n        case \"jira\":\n          return this.config.get('enableJiraImporter');\n        case \"trello\":\n          return this.config.get('enableTrelloImporter');\n        default:\n          return false;\n      }\n    };\n\n    ImportProjectController.prototype.cancelCurrentImport = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project-import'));\n    };\n\n    ImportProjectController.prototype.backToCreate = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project'));\n    };\n\n    return ImportProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectDirective;\n\n  ImportProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      return ctrl.start();\n    };\n    return {\n      link: link,\n      templateUrl: \"projects/create/import/import-project.html\",\n      controller: \"ImportProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancelImport: '&'\n      }\n    };\n  };\n\n  ImportProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ImportProjectService = (function(superClass) {\n    extend(ImportProjectService, superClass);\n\n    ImportProjectService.$inject = ['tgCurrentUserService', '$tgAuth', 'tgLightboxFactory', '$translate', '$tgConfirm', '$location', '$tgNavUrls'];\n\n    function ImportProjectService(currentUserService, tgAuth, lightboxFactory, translate, confirm, location, tgNavUrls) {\n      this.currentUserService = currentUserService;\n      this.tgAuth = tgAuth;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.location = location;\n      this.tgNavUrls = tgNavUrls;\n    }\n\n    ImportProjectService.prototype.importPromise = function(promise) {\n      return promise.then(this.importSuccess.bind(this), this.importError.bind(this));\n    };\n\n    ImportProjectService.prototype.importSuccess = function(result) {\n      var promise;\n      promise = this.currentUserService.loadProjects();\n      promise.then((function(_this) {\n        return function() {\n          var ctx, message, msg, title;\n          if (result.status === 202) {\n            title = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE');\n            message = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE');\n            _this.location.path(_this.tgNavUrls.resolve('home'));\n            return _this.confirm.success(title, message);\n          } else {\n            ctx = {\n              project: result.data.slug\n            };\n            _this.location.path(_this.tgNavUrls.resolve('project-admin-project-profile-details', ctx));\n            msg = _this.translate.instant('PROJECT.IMPORT.SYNC_SUCCESS');\n            return _this.confirm.notify('success', msg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.importError = function(result) {\n      var promise;\n      promise = this.tgAuth.refresh();\n      promise.then((function(_this) {\n        return function() {\n          var errorMsg, ref, restrictionError;\n          restrictionError = _this.getRestrictionError(result);\n          if (restrictionError) {\n            return _this.lightboxFactory.create('tg-lb-import-error', {\n              \"class\": 'lightbox lightbox-import-error'\n            }, restrictionError);\n          } else {\n            errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {\n                error_message: result.data._error_message\n              });\n            }\n            return _this.confirm.notify(\"error\", errorMsg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.getRestrictionError = function(result) {\n      var errorKey, maxMemberships, membersError, privateError, publicError, user;\n      if (result.headers) {\n        errorKey = '';\n        user = this.currentUserService.getUser();\n        maxMemberships = null;\n        if (result.headers.isPrivate) {\n          privateError = !this.currentUserService.canCreatePrivateProjects().valid;\n          if (user.get('max_memberships_private_projects') !== null && result.headers.memberships >= user.get('max_memberships_private_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (privateError && membersError) {\n            errorKey = 'private-space-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          } else if (privateError) {\n            errorKey = 'private-space';\n          } else if (membersError) {\n            errorKey = 'private-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          }\n        } else {\n          publicError = !this.currentUserService.canCreatePublicProjects().valid;\n          if (user.get('max_memberships_public_projects') !== null && result.headers.memberships >= user.get('max_memberships_public_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (publicError && membersError) {\n            errorKey = 'public-space-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          } else if (publicError) {\n            errorKey = 'public-space';\n          } else if (membersError) {\n            errorKey = 'public-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          }\n        }\n        if (!errorKey) {\n          return false;\n        }\n        return {\n          key: errorKey,\n          values: {\n            max_memberships: maxMemberships,\n            members: result.headers.memberships\n          }\n        };\n      } else {\n        return false;\n      }\n    };\n\n    return ImportProjectService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersController;\n\n  InviteMembersController = (function() {\n    function InviteMembersController() {}\n\n    InviteMembersController.$inject = [];\n\n    InviteMembersController.prototype.isDisabled = function(id) {\n      return this.invitedMembers.indexOf(id) === -1;\n    };\n\n    return InviteMembersController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersDirective;\n\n  InviteMembersDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/invite-members/invite-members.html\",\n      controller: \"InviteMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        invitedMembers: '<',\n        members: '<',\n        onToggleInvitedMember: '&'\n      }\n    };\n  };\n\n  InviteMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SingleMemberDirective;\n\n  SingleMemberDirective = function() {\n    return {\n      templateUrl: \"projects/create/invite-members/single-member/single-member.html\",\n      scope: {\n        disabled: \"<\",\n        avatar: \"=\"\n      }\n    };\n  };\n\n  SingleMemberDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormController;\n\n  JiraImportProjectFormController = (function() {\n    JiraImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function JiraImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (this.projectForm.importer_type === \"agile\") {\n        this.projectForm.project_type = null;\n      } else {\n        this.projectForm.project_type = \"scrum\";\n      }\n      this.projectForm.create_subissues = true;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    JiraImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    JiraImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    JiraImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    JiraImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return JiraImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormDirective;\n\n  JiraImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\n      controller: \"JiraImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  JiraImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportController;\n\n  JiraImportController = (function() {\n    JiraImportController.$inject = ['tgJiraImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function JiraImportController(jiraImportService, confirm, translate, importProjectService) {\n      this.jiraImportService = jiraImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-jira';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    JiraImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-jira';\n      return this.jiraImportService.fetchProjects();\n    };\n\n    JiraImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-jira';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.jiraImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-jira';\n    };\n\n    JiraImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-jira';\n    };\n\n    JiraImportController.prototype.startImport = function(users) {\n      var loader, projectType, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      projectType = this.project.get('project_type');\n      if (projectType === \"issues\" && this.project.get('create_subissues')) {\n        projectType = \"issues-with-subissues\";\n      }\n      promise = this.jiraImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), projectType, this.project.get('importer_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return JiraImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportDirective;\n\n  JiraImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/jira-import/jira-import.html\",\n      controller: \"JiraImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  JiraImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JiraImportService = (function(superClass) {\n    extend(JiraImportService, superClass);\n\n    JiraImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function JiraImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    JiraImportService.prototype.setToken = function(token, url) {\n      this.token = token;\n      return this.url = url;\n    };\n\n    JiraImportService.prototype.fetchProjects = function() {\n      return this.resources.jiraImporter.listProjects(this.url, this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.jiraImporter.listUsers(this.url, this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      return this.resources.jiraImporter.importProject(this.url, this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType);\n    };\n\n    JiraImportService.prototype.getAuthUrl = function(url) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.getAuthUrl(url).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          }, function(err) {\n            return reject(err.data._error_message);\n          });\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.authorize = function(oauth_verifier) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.authorize(oauth_verifier).then((function(response) {\n            _this.token = response.data.token;\n            _this.url = response.data.url;\n            return resolve(response.data);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return JiraImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NewsletterEmailLightboxDirective;\n\n  NewsletterEmailLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $storageService, $rs, $currentUserService, $rs2, $confirm) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      scope.dontAsk = false;\n      scope.preference = false;\n      scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n      scope.closeLightbox = function() {\n        return lightboxService.close(el);\n      };\n      return scope.setEmail = function() {\n        if (scope.preference) {\n          return $rs2.onPremise.subscribeOnPremiseNewsletter({\n            \"email\": $currentUserService.getUser().get('email'),\n            \"full_name\": $currentUserService.getUser().get('full_name'),\n            \"origin_form\": 'Newsletter sign-up create'\n          }).then((function(_this) {\n            return function() {\n              $rs.user.setUserStorage('dont_ask_premise_newsletter', true);\n              return scope.closeLightbox();\n            };\n          })(this))[\"catch\"]((function(_this) {\n            return function() {\n              return $confirm.notify(\"light-error\", \"\");\n            };\n          })(this));\n        } else {\n          $rs.user.setUserStorage('dont_ask_premise_newsletter', scope.dontAsk);\n          return scope.closeLightbox();\n        }\n      };\n    };\n    return {\n      scope: {\n        visible: '<',\n        openNewsletter: '<',\n        onClose: '&',\n        onSelectUser: '&'\n      },\n      templateUrl: 'projects/create/newsletter-email-lightbox/newsletter-email-lightbox.html',\n      link: link\n    };\n  };\n\n  NewsletterEmailLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService', \"$tgStorage\", \"tgResources\", \"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgNewsletterEmailLightbox\", NewsletterEmailLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxCtrl;\n\n  SelectImportUserLightboxCtrl = (function() {\n    SelectImportUserLightboxCtrl.$inject = [];\n\n    function SelectImportUserLightboxCtrl() {}\n\n    SelectImportUserLightboxCtrl.prototype.start = function() {\n      this.mode = 'search';\n      return this.invalid = false;\n    };\n\n    SelectImportUserLightboxCtrl.prototype.assignUser = function() {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: this.userEmail\n      });\n    };\n\n    SelectImportUserLightboxCtrl.prototype.selectUser = function(taigaUser) {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: Immutable.fromJS(taigaUser)\n      });\n    };\n\n    return SelectImportUserLightboxCtrl;\n\n  })();\n\n  angular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxDirective;\n\n  SelectImportUserLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n    };\n    return {\n      controller: \"SelectImportUserLightboxCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        user: '<',\n        visible: '<',\n        onClose: '&',\n        onSelectUser: '&',\n        selectableUsers: '<',\n        isPrivate: '<',\n        limitMembersPrivateProject: '<',\n        limitMembersPublicProject: '<',\n        displayEmailSelector: '<'\n      },\n      templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html',\n      link: link\n    };\n  };\n\n  SelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormController;\n\n  TrelloImportProjectFormController = (function() {\n    TrelloImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function TrelloImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Trello\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    TrelloImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    TrelloImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    TrelloImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    TrelloImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return TrelloImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormDirective;\n\n  TrelloImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\n      controller: \"TrelloImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  TrelloImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportController;\n\n  TrelloImportController = (function() {\n    TrelloImportController.$inject = ['tgTrelloImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function TrelloImportController(trelloImportService, confirm, translate, importProjectService) {\n      this.trelloImportService = trelloImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    TrelloImportController.prototype.startProjectSelector = function() {\n      return this.trelloImportService.fetchProjects().then((function(_this) {\n        return function() {\n          return _this.step = 'project-select-trello';\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-trello';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.trelloImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-trello';\n    };\n\n    TrelloImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-trello';\n    };\n\n    TrelloImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.trelloImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return TrelloImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportDirective;\n\n  TrelloImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/trello-import/trello-import.html\",\n      controller: \"TrelloImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  TrelloImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  TrelloImportService = (function(superClass) {\n    extend(TrelloImportService, superClass);\n\n    TrelloImportService.$inject = ['tgResources', '$q'];\n\n    function TrelloImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    TrelloImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    TrelloImportService.prototype.fetchProjects = function() {\n      return this.resources.trelloImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.trelloImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      return this.resources.trelloImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate);\n    };\n\n    TrelloImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.trelloImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.authorize = function(verifyCode) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.trelloImporter.authorize(verifyCode).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return TrelloImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WarningUserImportDirective;\n\n  WarningUserImportDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    return {\n      link: function(scope, el, attr) {\n        return scope.$watch('visible', function(visible) {\n          if (visible && !el.hasClass('open')) {\n            return lightboxService.open(el, scope.onClose).then(function() {\n              el.find('input').focus();\n              return lightboxKeyboardNavigationService.init(el);\n            });\n          } else if (!visible && el.hasClass('open')) {\n            return lightboxService.close(el);\n          }\n        });\n      },\n      templateUrl: \"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\n      scope: {\n        visible: '<',\n        onClose: '&',\n        onConfirm: '&'\n      }\n    };\n  };\n\n  WarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsListingController;\n\n  ProjectsListingController = (function() {\n    ProjectsListingController.$inject = [\"tgCurrentUserService\"];\n\n    function ProjectsListingController(currentUserService) {\n      this.currentUserService = currentUserService;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n    }\n\n    return ProjectsListingController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectRouterController;\n\n  ProjectRouterController = (function() {\n    ProjectRouterController.$inject = [\"$routeParams\", \"$location\", \"tgProjectService\", \"$tgResources\", \"$tgSections\"];\n\n    function ProjectRouterController(routeParams, location, projectService, rs, tgSections) {\n      this.routeParams = routeParams;\n      this.location = location;\n      this.projectService = projectService;\n      this.rs = rs;\n      this.tgSections = tgSections;\n      this.getProjectHomepage().then((function(_this) {\n        return function(section) {\n          if (section) {\n            return _this.location.url(\"project/\" + _this.routeParams.pslug + \"/\" + section);\n          } else {\n            return _this.gotoDefaultProjectHomepage();\n          }\n        };\n      })(this)).then(null, function() {\n        return this.gotoDefaultProjectHomepage();\n      });\n    }\n\n    ProjectRouterController.prototype.gotoDefaultProjectHomepage = function() {\n      return this.location.url(\"project/\" + this.routeParams.pslug + \"/timeline\");\n    };\n\n    ProjectRouterController.prototype.getProjectHomepage = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.userProjectSettings.list({\n        project: project.id\n      }).then((function(_this) {\n        return function(userProjectSettings) {\n          var settings;\n          settings = _.find(userProjectSettings, {\n            \"project\": project.id\n          });\n          if (!settings) {\n            return;\n          }\n          return _this.tgSections.getPath(project.slug, settings.homepage);\n        };\n      })(this));\n    };\n\n    return ProjectRouterController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectController;\n\n  ProjectController = (function() {\n    ProjectController.$inject = [\"$routeParams\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"$tgConfig\", \"$tgNavUrls\", \"$location\"];\n\n    function ProjectController(routeParams, appMetaService, auth, translate, projectService, config, navUrls, location) {\n      var nextUrl;\n      this.routeParams = routeParams;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.config = config;\n      this.navUrls = navUrls;\n      this.location = location;\n      this.user = this.auth.userData;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"members\", (function(_this) {\n        return function() {\n          return _this.projectService.activeMembers;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"isAuthenticated\", (function(_this) {\n        return function() {\n          return !!_this.user;\n        };\n      })(this));\n      nextUrl = this.location.url();\n      this.registerUrl = (this.navUrls.resolve(\"register\")) + \"?next=\" + nextUrl;\n      this.loginUrl = (this.navUrls.resolve(\"login\")) + \"?next=\" + nextUrl;\n      this.publicRegisterEnabled = this.config.get(\"publicRegisterEnabled\");\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    ProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    return ProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"Project\", ProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsService, groupBy, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  ProjectsService = (function(superClass) {\n    extend(ProjectsService, superClass);\n\n    ProjectsService.$inject = [\"tgResources\", \"$projectUrl\"];\n\n    function ProjectsService(rs, projectUrl) {\n      this.rs = rs;\n      this.projectUrl = projectUrl;\n    }\n\n    ProjectsService.prototype.create = function(data) {\n      return this.rs.projects.create(data);\n    };\n\n    ProjectsService.prototype.duplicate = function(projectId, data) {\n      return this.rs.projects.duplicate(projectId, data);\n    };\n\n    ProjectsService.prototype.getProjectBySlug = function(projectSlug) {\n      return this.rs.projects.getProjectBySlug(projectSlug).then((function(_this) {\n        return function(project) {\n          return _this._decorate(project);\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getProjectStats = function(projectId) {\n      return this.rs.projects.getProjectStats(projectId);\n    };\n\n    ProjectsService.prototype.getProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getListProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getListProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype._decorate = function(project) {\n      var url;\n      url = this.projectUrl.get(project.toJS());\n      project = project.set(\"url\", url);\n      return project;\n    };\n\n    ProjectsService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.rs.projects.bulkUpdateOrder(sortData);\n    };\n\n    ProjectsService.prototype.transferValidateToken = function(projectId, token) {\n      return this.rs.projects.transferValidateToken(projectId, token);\n    };\n\n    ProjectsService.prototype.transferAccept = function(projectId, token, reason) {\n      return this.rs.projects.transferAccept(projectId, token, reason);\n    };\n\n    ProjectsService.prototype.transferReject = function(projectId, token, reason) {\n      return this.rs.projects.transferReject(projectId, token, reason);\n    };\n\n    return ProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CantOwnProjectExplanationDirective;\n\n  CantOwnProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProject, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProject = (function() {\n    TransferProject.$inject = [\"$routeParams\", \"tgProjectsService\", \"tgProjectService\", \"$location\", \"$tgAuth\", \"tgCurrentUserService\", \"$tgNavUrls\", \"$translate\", \"$tgConfirm\", \"tgErrorHandlingService\"];\n\n    function TransferProject(routeParams, projectsService, projectService, location, authService, currentUserService, navUrls, translate, confirmService, errorHandlingService) {\n      this.routeParams = routeParams;\n      this.projectsService = projectsService;\n      this.projectService = projectService;\n      this.location = location;\n      this.authService = authService;\n      this.currentUserService = currentUserService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.confirmService = confirmService;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    TransferProject.prototype.initialize = function() {\n      this.projectId = this.project.get(\"id\");\n      this.token = this.routeParams.token;\n      this.showAddComment = false;\n      return this._refreshUserData();\n    };\n\n    TransferProject.prototype._validateToken = function() {\n      return this.projectsService.transferValidateToken(this.projectId, this.token).then(null, (function(_this) {\n        return function(data, status) {\n          return _this.errorHandlingService.notfound();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._refreshUserData = function() {\n      return this.authService.refresh().then((function(_this) {\n        return function() {\n          _this._validateToken();\n          _this._setProjectData();\n          return _this._checkOwnerData();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._setProjectData = function() {\n      return this.canBeOwnedByUser = this.currentUserService.canOwnProject(this.project);\n    };\n\n    TransferProject.prototype._checkOwnerData = function() {\n      var currentUser, maxMemberships;\n      currentUser = this.currentUserService.getUser();\n      if (this.project.get('is_private')) {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE';\n        this.maxProjects = currentUser.get('max_private_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_private_projects');\n        maxMemberships = currentUser.get('max_memberships_private_projects');\n      } else {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC';\n        this.maxProjects = currentUser.get('max_public_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_public_projects');\n        maxMemberships = currentUser.get('max_memberships_public_projects');\n      }\n      return this.validNumberOfMemberships = maxMemberships === null || this.project.get('total_memberships') <= maxMemberships;\n    };\n\n    TransferProject.prototype.transferAccept = function(token, reason) {\n      this.loadingAccept = true;\n      return this.projectsService.transferAccept(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            var newUrl;\n            newUrl = _this.navUrls.resolve(\"project-admin-project-profile-details\", {\n              project: _this.project.get(\"slug\")\n            });\n            _this.loadingAccept = false;\n            _this.location.path(newUrl);\n            _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000);\n          });\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.transferReject = function(token, reason) {\n      this.loadingReject = true;\n      return this.projectsService.transferReject(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          var newUrl;\n          newUrl = _this.navUrls.resolve(\"home\", {\n            project: _this.project.get(\"slug\")\n          });\n          _this.loadingReject = false;\n          _this.location.path(newUrl);\n          _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000);\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.addComment = function() {\n      return this.showAddComment = true;\n    };\n\n    TransferProject.prototype.hideComment = function() {\n      this.showAddComment = false;\n      return this.reason = '';\n    };\n\n    return TransferProject;\n\n  })();\n\n  module.controller(\"TransferProjectController\", TransferProject);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProjectDirective, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProjectDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initialize();\n    };\n    return {\n      link: link,\n      scope: {},\n      bindToController: {\n        project: \"=\"\n      },\n      templateUrl: \"projects/transfer/transfer-project.html\",\n      controller: 'TransferProjectController',\n      controllerAs: 'vm'\n    };\n  };\n\n  module.directive('tgTransferProject', TransferProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  Resource = function(urlsService, http, config, $rootScope, $q, storage) {\n    var service;\n    service = {};\n    service.list = function(type, objectId, projectId) {\n      var httpOptions, params, url, urlname;\n      urlname = \"attachments/\" + type;\n      params = {\n        object_id: objectId,\n        project: projectId\n      };\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      url = urlsService.resolve(urlname);\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.get = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.get(url);\n    };\n    service[\"delete\"] = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http[\"delete\"](url);\n    };\n    service.patch = function(type, id, patch) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.patch(url, patch);\n    };\n    service.bulkAttachments = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + \"/bulk_update_order\";\n      return http.post(url, {\n        object_id: objectId,\n        after_attachment_id: afterAttachmentId,\n        bulk_attachments: bulkAttachments\n      });\n    };\n    service.create = function(type, projectId, objectId, file, from_comment) {\n      var data, defered, maxFileSize, response, token, uploadComplete, uploadFailed, uploadProgress, url, urlname, xhr;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname);\n      defered = $q.defer();\n      if (file === void 0) {\n        defered.reject(null);\n        return defered.promise;\n      }\n      maxFileSize = config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"in-progress\";\n            file.size = sizeFormat(evt.total);\n            file.progressMessage = \"upload \" + (sizeFormat(evt.loaded)) + \" of \" + (sizeFormat(evt.total));\n            return file.progressPercent = \"\" + (Math.round((evt.loaded / evt.total) * 100));\n          });\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            var attachment, ref, status;\n            file.status = \"done\";\n            status = evt.target.status;\n            try {\n              attachment = JSON.parse(evt.target.responseText);\n            } catch (error) {\n              attachment = {};\n            }\n            if (status >= 200 && status < 400) {\n              attachment = Immutable.fromJS(attachment);\n              return defered.resolve(attachment);\n            } else {\n              response = {\n                status: status,\n                data: {\n                  _error_message: (ref = data['attached_file']) != null ? ref[0] : void 0\n                }\n              };\n              return defered.reject(response);\n            }\n          });\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"error\";\n            return defered.reject(\"fail\");\n          });\n        };\n      })(this);\n      data = new FormData();\n      data.append(\"project\", projectId);\n      data.append(\"object_id\", objectId);\n      data.append(\"attached_file\", file);\n      data.append(\"from_comment\", from_comment);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.addEventListener(\"load\", uploadComplete, false);\n      xhr.addEventListener(\"error\", uploadFailed, false);\n      token = storage.get('token');\n      xhr.open(\"POST\", url);\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    return function() {\n      return {\n        \"attachments\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\", \"$rootScope\", \"$q\", \"$tgStorage\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgAttachmentsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"epics\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.list = function(projectId, page) {\n      var params, url;\n      if (page == null) {\n        page = 0;\n      }\n      url = urlsService.resolve(\"epics\");\n      params = {\n        project: projectId,\n        page: page\n      };\n      return http.get(url, params).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    service.patch = function(id, patch) {\n      var url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      return http.patch(url, patch).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.post = function(params) {\n      var url;\n      url = urlsService.resolve(\"epics\");\n      return http.post(url, params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.addRelatedUserstory = function(epicId, userstoryId) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId);\n      params = {\n        user_story: userstoryId,\n        epic: epicId\n      };\n      return http.post(url, params);\n    };\n    service.reorderRelatedUserstory = function(epicId, userstoryId, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options);\n    };\n    service.bulkCreateRelatedUserStories = function(epicId, projectId, bulk_userstories) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId);\n      params = {\n        bulk_userstories: bulk_userstories,\n        project_id: projectId\n      };\n      return http.post(url, params);\n    };\n    service.deleteRelatedUserstory = function(epicId, userstoryId) {\n      var url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      return http[\"delete\"](url);\n    };\n    return function() {\n      return {\n        \"epics\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgEpicsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getApplicationToken = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"applications\");\n      url = url + \"/\" + applicationId + \"/token?state=\" + state;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.authorizeApplicationToken = function(applicationId, state) {\n      var data, url;\n      url = urlsService.resolve(\"application-tokens\");\n      url = url + \"/authorize\";\n      data = {\n        \"state\": state,\n        \"application\": applicationId\n      };\n      return http.post(url, data).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"externalapps\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgExternalAppsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getHistory = function(historyType, contentType, objectId, page) {\n      var url;\n      url = urlsService.resolve(\"history/\" + contentType);\n      return http.get(url + \"/\" + objectId, {\n        page: page,\n        type: historyType\n      }).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    return function() {\n      return {\n        \"history\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgHistory\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaResource, GithubResource, JiraResource, TrelloResource, module, taiga;\n\n  taiga = this.taiga;\n\n  TrelloResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(url) {\n      url = urlsService.resolve(\"importers-trello-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(verifyCode) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-authorize\");\n      return http.post(url, {\n        code: verifyCode\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      var data, url;\n      url = urlsService.resolve(\"importers-trello-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: \"kanban\"\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"trelloImporter\": service\n      };\n    };\n  };\n\n  TrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  JiraResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(jira_url) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url;\n      return http.get(url);\n    };\n    service.authorize = function(oauth_verifier) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-authorize\");\n      return http.post(url, {\n        oauth_verifier: oauth_verifier\n      });\n    };\n    service.listProjects = function(jira_url, token) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-projects\");\n      return http.post(url, {\n        url: jira_url,\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(jira_url, token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-users\");\n      return http.post(url, {\n        url: jira_url,\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      var data, projectTemplate, url;\n      url = urlsService.resolve(\"importers-jira-import-project\");\n      projectTemplate = \"kanban\";\n      if (projectType !== \"kanban\") {\n        projectTemplate = \"scrum\";\n      }\n      data = {\n        url: jira_url,\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        project_type: projectType,\n        importer_type: importerType,\n        template: projectTemplate\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"jiraImporter\": service\n      };\n    };\n  };\n\n  JiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  GithubResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(callbackUri) {\n      var url;\n      url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri;\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-github-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-github-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"githubImporter\": service\n      };\n    };\n  };\n\n  GithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  AsanaResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function() {\n      var url;\n      url = urlsService.resolve(\"importers-asana-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-asana-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"asanaImporter\": service\n      };\n    };\n  };\n\n  AsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTrelloImportResource\", TrelloResource);\n\n  module.factory(\"tgJiraImportResource\", JiraResource);\n\n  module.factory(\"tgGithubImportResource\", GithubResource);\n\n  module.factory(\"tgAsanaImportResource\", AsanaResource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"issues\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"issues\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgIssuesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, config) {\n    var service;\n    service = {};\n    service.subscribeOnPremiseNewsletter = function(requestParams) {\n      var params;\n      params = {\n        url: config.get(\"newsletterSubscriberUrl\") + \"/subscribe/\",\n        method: \"POST\",\n        cancelable: true,\n        data: requestParams\n      };\n      return http.request(params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"onPremise\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgOnPremiseResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, pagination;\n\n  pagination = function() {};\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.create = function(data) {\n      var url;\n      url = urlsService.resolve('projects');\n      return http.post(url, JSON.stringify(data)).then((function(_this) {\n        return function(result) {\n          return Immutable.fromJS(result.data);\n        };\n      })(this));\n    };\n    service.duplicate = function(projectId, data) {\n      var members, params, url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId + \"/duplicate\";\n      members = data.users.map((function(_this) {\n        return function(member) {\n          return {\n            \"id\": member\n          };\n        };\n      })(this));\n      params = {\n        \"name\": data.name,\n        \"description\": data.description,\n        \"is_private\": data.is_private,\n        \"users\": members\n      };\n      return http.post(url, params);\n    };\n    service.getProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (params == null) {\n        params = {};\n      }\n      if (pagination == null) {\n        pagination = true;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-lazy-pagination\": true\n          }\n        };\n      }\n      return http.get(url, params, httpOptions);\n    };\n    service.getProjectBySlug = function(projectSlug) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/by_slug?slug=\" + projectSlug;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\"\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getListProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\",\n        \"slight\": true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectStats = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = urlsService.resolve(\"bulk-update-projects-order\");\n      return http.post(url, bulkData);\n    };\n    service.getTimeline = function(projectId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-project\");\n      url = url + \"/\" + projectId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.likeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-like\", projectId);\n      return http.post(url);\n    };\n    service.unlikeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unlike\", projectId);\n      return http.post(url);\n    };\n    service.watchProject = function(projectId, notifyLevel) {\n      var data, url;\n      data = {\n        notify_level: notifyLevel,\n        live_notify_level: notifyLevel\n      };\n      url = urlsService.resolve(\"project-watch\", projectId);\n      return http.post(url, data);\n    };\n    service.unwatchProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unwatch\", projectId);\n      return http.post(url);\n    };\n    service.contactProject = function(projectId, message) {\n      var params, url;\n      params = {\n        project: projectId,\n        comment: message\n      };\n      url = urlsService.resolve(\"project-contact\");\n      return http.post(url, params);\n    };\n    service.transferValidateToken = function(projectId, token) {\n      var data, url;\n      data = {\n        token: token\n      };\n      url = urlsService.resolve(\"project-transfer-validate-token\", projectId);\n      return http.post(url, data);\n    };\n    service.transferAccept = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-accept\", projectId);\n      return http.post(url, data);\n    };\n    service.transferReject = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-reject\", projectId);\n      return http.post(url, data);\n    };\n    service.transferRequest = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-transfer-request\", projectId);\n      return http.post(url);\n    };\n    service.transferStart = function(projectId, userId, reason) {\n      var data, url;\n      data = {\n        user: userId,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-start\", projectId);\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"projects\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgProjectsResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resources, services;\n\n  services = [\"tgProjectsResources\", \"tgUserResources\", \"tgUsersResources\", \"tgUserstoriesResource\", \"tgTasksResource\", \"tgIssuesResource\", \"tgExternalAppsResource\", \"tgAttachmentsResource\", \"tgStatsResource\", \"tgHistory\", \"tgEpicsResource\", \"tgTrelloImportResource\", \"tgJiraImportResource\", \"tgGithubImportResource\", \"tgAsanaImportResource\", \"tgOnPremiseResource\"];\n\n  Resources = function($injector) {\n    var i, j, len, len1, ref, service, serviceFn, serviceName, serviceProperty;\n    for (i = 0, len = services.length; i < len; i++) {\n      serviceName = services[i];\n      serviceFn = $injector.get(serviceName);\n      service = $injector.invoke(serviceFn);\n      ref = Object.keys(service);\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        serviceProperty = ref[j];\n        if (this[serviceProperty]) {\n          console.warn(\"repeated resource \" + serviceProperty);\n        }\n        this[serviceProperty] = service[serviceProperty];\n      }\n    }\n    return this;\n  };\n\n  Resources.$inject = [\"$injector\"];\n\n  angular.module(\"taigaResources2\").service(\"tgResources\", Resources);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.discover = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"stats-discover\");\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"stats\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgStatsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"tasks\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"tasks\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTasksResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserStorage = function(key) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-storage\");\n      if (key) {\n        url += '/' + key;\n      }\n      httpOptions = {};\n      return http.get(url, {}).then(function(response) {\n        return response.data.value;\n      });\n    };\n    service.setUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\") + '/' + key;\n      params = {\n        key: key,\n        value: value\n      };\n      return http.put(url, params);\n    };\n    service.createUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\");\n      params = {\n        key: key,\n        value: value\n      };\n      return http.post(url, params);\n    };\n    return function() {\n      return {\n        \"user\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserByUsername = function(username) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"by_username\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        username: username\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getStats = function(userId) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-stats\", userId);\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, {}, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getContacts = function(userId, excludeProjectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"user-contacts\", userId);\n      params = {};\n      if (excludeProjectId != null) {\n        params.exclude_project = excludeProjectId;\n      }\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getLiked = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-liked\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      params.only_relevant = true;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getVoted = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-voted\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getWatched = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-watched\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getProfileTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page\n      };\n      url = urlsService.resolve(\"timeline-profile\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getUserTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-user\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getNotifications = function(userId, page, onlyUnread) {\n      var params, url;\n      params = {\n        page: page\n      };\n      if (onlyUnread) {\n        params['only_unread'] = true;\n      }\n      url = urlsService.resolve(\"notifications\");\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        var paginateResponse;\n        result = Immutable.fromJS(result);\n        paginateResponse = Immutable.Map({\n          \"data\": result.get(\"data\").get(\"objects\"),\n          \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n          \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n          \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n          \"count\": result.get(\"headers\")(\"x-pagination-count\"),\n          \"total\": result.get(\"data\").get(\"total\")\n        });\n        return paginateResponse;\n      });\n    };\n    service.setNotificationAsRead = function(notificationId) {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/\" + notificationId + \"/set-as-read\";\n      return http.patch(url).then(function(result) {\n        return result;\n      });\n    };\n    service.setNotificationsAsRead = function() {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/set-as-read\";\n      return http.post(url).then(function(result) {\n        return result;\n      });\n    };\n    return function() {\n      return {\n        \"users\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUsersResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (pagination == null) {\n        pagination = false;\n      }\n      url = urlsService.resolve(\"userstories\");\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-disable-pagination\": \"1\"\n          }\n        };\n      }\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listAllInProject = function(projectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        project: projectId\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listInEpic = function(epicIid) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        epic: epicIid,\n        order_by: 'epic_order',\n        include_tasks: true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"userstories\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserstoriesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AppMetaService, taiga, truncate;\n\n  taiga = this.taiga;\n\n  truncate = taiga.truncate;\n\n  AppMetaService = (function() {\n    AppMetaService.$inject = [\"$rootScope\"];\n\n    function AppMetaService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    AppMetaService.prototype._set = function(key, value) {\n      var meta;\n      if (!key) {\n        return;\n      }\n      if (key === \"title\") {\n        meta = $(\"head title\");\n        if (meta.length === 0) {\n          meta = $(\"<title></title>\");\n          $(\"head\").append(meta);\n        }\n        return meta.html(value || \"\");\n      } else if (key.indexOf(\"og:\") === 0) {\n        meta = $(\"head meta[property='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta property='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      } else {\n        meta = $(\"head meta[name='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta name='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      }\n    };\n\n    AppMetaService.prototype.setTitle = function(title) {\n      return this._set('title', title);\n    };\n\n    AppMetaService.prototype.setDescription = function(description) {\n      return this._set(\"description\", truncate(description, 250));\n    };\n\n    AppMetaService.prototype.setTwitterMetas = function(title, description) {\n      this._set(\"twitter:card\", \"summary\");\n      this._set(\"twitter:site\", \"@taigaio\");\n      this._set(\"twitter:title\", title);\n      this._set(\"twitter:description\", truncate(description, 300));\n      return this._set(\"twitter:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n    };\n\n    AppMetaService.prototype.setOpenGraphMetas = function(title, description) {\n      this._set(\"og:type\", \"object\");\n      this._set(\"og:site_name\", \"Taiga - Love your projects\");\n      this._set(\"og:title\", title);\n      this._set(\"og:description\", truncate(description, 300));\n      this._set(\"og:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n      return this._set(\"og:url\", window.location.href);\n    };\n\n    AppMetaService.prototype.setAll = function(title, description) {\n      this.setTitle(title);\n      this.setDescription(description);\n      this.setTwitterMetas(title, description);\n      return this.setOpenGraphMetas(title, description);\n    };\n\n    AppMetaService.prototype.addMobileViewport = function() {\n      return $(\"head\").append(\"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\");\n    };\n\n    AppMetaService.prototype.removeMobileViewport = function() {\n      return $(\"head meta[name=\\\"viewport\\\"]\").remove();\n    };\n\n    AppMetaService.prototype.setfn = function(fn) {\n      if (this.listener) {\n        this._listener();\n      }\n      return this._listener = this.rootScope.$watchCollection(fn, (function(_this) {\n        return function(metas) {\n          if (metas) {\n            _this.setAll(metas.title, metas.description);\n            return _this._listener();\n          }\n        };\n      })(this));\n    };\n\n    return AppMetaService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsService, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsService = (function() {\n    AttachmentsService.$inject = [\"$tgConfirm\", \"$tgConfig\", \"$translate\", \"tgResources\"];\n\n    function AttachmentsService(confirm, config, translate, rs) {\n      this.confirm = confirm;\n      this.config = config;\n      this.translate = translate;\n      this.rs = rs;\n      this.types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\",\n        wiki: \"wiki\",\n        wikipage: \"wiki\"\n      };\n      this.maxFileSize = this.getMaxFileSize();\n      if (this.maxFileSize) {\n        this.maxFileSizeFormated = sizeFormat(this.maxFileSize);\n      }\n    }\n\n    AttachmentsService.prototype.sizeError = function(file) {\n      var message;\n      message = this.translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\n        fileName: file.name,\n        fileSize: sizeFormat(file.size),\n        maxFileSize: this.maxFileSizeFormated\n      });\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.validate = function(file) {\n      if (this.maxFileSize && file.size > this.maxFileSize) {\n        this.sizeError(file);\n        return false;\n      }\n      return true;\n    };\n\n    AttachmentsService.prototype.getMaxFileSize = function() {\n      return this.config.get(\"maxUploadFileSize\", null);\n    };\n\n    AttachmentsService.prototype.list = function(type, objId, projectId) {\n      return this.rs.attachments.list(type, objId, projectId).then((function(_this) {\n        return function(attachments) {\n          return attachments.sortBy(function(attachment) {\n            return attachment.get('order');\n          });\n        };\n      })(this));\n    };\n\n    AttachmentsService.prototype.get = function(type, id) {\n      return this.rs.attachments.get(this.types[type], id);\n    };\n\n    AttachmentsService.prototype[\"delete\"] = function(type, id) {\n      return this.rs.attachments[\"delete\"](type, id);\n    };\n\n    AttachmentsService.prototype.saveError = function(file, data) {\n      var message;\n      message = \"\";\n      if (file) {\n        message = this.translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\n          fileName: file.name,\n          errorMessage: data.data._error_message\n        });\n      }\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.upload = function(file, objId, projectId, type, from_comment) {\n      var promise;\n      if (from_comment == null) {\n        from_comment = false;\n      }\n      promise = this.rs.attachments.create(type, projectId, objId, file, from_comment);\n      promise.then(null, this.saveError.bind(this, file));\n      return promise;\n    };\n\n    AttachmentsService.prototype.bulkUpdateOrder = function(objectId, type, afterAttachmentId, bulkAttachments) {\n      var promise;\n      promise = this.rs.attachments.bulkAttachments(objectId, type, afterAttachmentId, bulkAttachments);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    AttachmentsService.prototype.patch = function(id, type, patch) {\n      var promise;\n      promise = this.rs.attachments.patch(type, id, patch);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    return AttachmentsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  AvatarService = (function() {\n    function AvatarService(config) {\n      var COLORS, IMAGES;\n      this.config = config;\n      IMAGES = [\"/\" + window._version + \"/images/user-avatars/user-avatar-01.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-02.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-03.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-04.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-05.png\"];\n      COLORS = [\"rgba( 178, 176, 204, 1 )\", \"rgba( 183, 203, 131, 1 )\", \"rgba( 210, 198, 139, 1 )\", \"rgba( 214, 161, 212, 1 )\", \"rgba( 247, 154, 154, 1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    AvatarService.prototype.getDefault = function(key) {\n      var idx, logo;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    AvatarService.prototype.getUnnamed = function() {\n      return {\n        url: \"/\" + window._version + \"/images/unnamed.png\",\n        username: ''\n      };\n    };\n\n    AvatarService.prototype.getAvatar = function(user, type) {\n      var avatarParamName, fullName, gravatar, logo, logoUrl, photo, root, username;\n      if (!user) {\n        return this.getUnnamed();\n      }\n      avatarParamName = 'photo';\n      if (type === 'avatarBig') {\n        avatarParamName = 'big_photo';\n      }\n      photo = null;\n      if (user instanceof Immutable.Map) {\n        gravatar = user.get('gravatar_id');\n        photo = user.get(avatarParamName);\n        username = \"@\" + (user.get('username'));\n        fullName = user.get('full_name_display');\n      } else {\n        gravatar = user.gravatar_id;\n        photo = user[avatarParamName];\n        username = \"@\" + user.username;\n        fullName = user.full_name_display;\n      }\n      if (!gravatar) {\n        return this.getUnnamed();\n      }\n      if (photo) {\n        return {\n          url: photo,\n          username: username,\n          fullName: fullName\n        };\n      } else if (location.host.indexOf('localhost') !== -1 || !this.config.get(\"gravatar\", true)) {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        return {\n          url: root + logo.src,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      } else {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        logoUrl = encodeURIComponent(root + logo.src);\n        return {\n          url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      }\n    };\n\n    return AvatarService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CheckPermissionsService, taiga;\n\n  taiga = this.taiga;\n\n  CheckPermissionsService = (function() {\n    CheckPermissionsService.$inject = [\"tgProjectService\"];\n\n    function CheckPermissionsService(projectService) {\n      this.projectService = projectService;\n    }\n\n    CheckPermissionsService.prototype.check = function(permission) {\n      if (!this.projectService.project) {\n        return false;\n      }\n      return this.projectService.project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    return CheckPermissionsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CurrentUserService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  CurrentUserService = (function() {\n    CurrentUserService.$inject = [\"tgProjectsService\", \"$tgStorage\", \"tgResources\", \"$q\"];\n\n    function CurrentUserService(projectsService, storageService, rs, q) {\n      this.projectsService = projectsService;\n      this.storageService = storageService;\n      this.rs = rs;\n      this.q = q;\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      this._joyride = null;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this._projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsById\", (function(_this) {\n        return function() {\n          return _this._projectsById;\n        };\n      })(this));\n    }\n\n    CurrentUserService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    CurrentUserService.prototype.getUser = function() {\n      var userData;\n      if (!this._user) {\n        userData = this.storageService.get(\"userInfo\");\n        if (userData) {\n          userData = Immutable.fromJS(userData);\n          this.setUser(userData);\n        }\n      }\n      return this._user;\n    };\n\n    CurrentUserService.prototype.removeUser = function() {\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      return this._joyride = null;\n    };\n\n    CurrentUserService.prototype.setUser = function(user) {\n      this._user = user;\n      return this._loadUserInfo();\n    };\n\n    CurrentUserService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.projectsService.bulkUpdateProjectsOrder(sortData).then((function(_this) {\n        return function() {\n          return _this.loadProjects();\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this._user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjectsList = function() {\n      return this.projectsService.getListProjectsByUserId(this._user.get(\"id\"), null).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.disableJoyRide = function(section) {\n      if (!this.isAuthenticated()) {\n        return;\n      }\n      if (section) {\n        this._joyride[section] = false;\n      } else {\n        this._joyride = {\n          backlog: false,\n          kanban: false,\n          dashboard: false\n        };\n      }\n      return this.rs.user.setUserStorage('joyride', this._joyride);\n    };\n\n    CurrentUserService.prototype.loadJoyRideConfig = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          if (_this._joyride !== null) {\n            resolve(_this._joyride);\n            return;\n          }\n          return _this.rs.user.getUserStorage('joyride').then(function(config) {\n            _this._joyride = config;\n            return resolve(_this._joyride);\n          })[\"catch\"](function() {\n            _this._joyride = {\n              backlog: true,\n              kanban: true,\n              dashboard: true\n            };\n            _this.rs.user.createUserStorage('joyride', _this._joyride);\n            return resolve(_this._joyride);\n          });\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype._loadUserInfo = function() {\n      return this.q.all([this.loadProjectsList()]);\n    };\n\n    CurrentUserService.prototype.setProjects = function(projects) {\n      this._projects = this._projects.set(\"all\", projects);\n      this._projects = this._projects.set(\"recents\", projects.slice(0, 4));\n      this._projects = this._projects.set(\"unblocked\", projects.filter(function(project) {\n        return project.toJS().blocked_code === null;\n      }));\n      this._projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n        return p.id;\n      }));\n      return this.projects;\n    };\n\n    CurrentUserService.prototype.canCreatePrivateProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user.get('max_private_projects') !== null && user.get('total_private_projects') >= user.get('max_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_private_projects',\n          type: 'private_project',\n          current: user.get('total_private_projects'),\n          max: user.get('max_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canCreatePublicProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user && user.get('max_public_projects') !== null && user.get('total_public_projects') >= user.get('max_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_public_projects',\n          type: 'public_project',\n          current: user.get('total_public_projects'),\n          max: user.get('max_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPublicProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_public_projects') !== null && totalMembers > user.get('max_memberships_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_public_projects',\n          type: 'public_project',\n          current: totalMembers,\n          max: user.get('max_memberships_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPrivateProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_private_projects') !== null && totalMembers > user.get('max_memberships_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_private_projects',\n          type: 'private_project',\n          current: totalMembers,\n          max: user.get('max_memberships_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canOwnProject = function(project) {\n      var membersResult, result, user;\n      user = this.getUser();\n      if (project.get('is_private')) {\n        result = this.canCreatePrivateProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPrivateProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      } else {\n        result = this.canCreatePublicProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPublicProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      }\n      return {\n        valid: true\n      };\n    };\n\n    return CurrentUserService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ErrorHandlingService, taiga;\n\n  taiga = this.taiga;\n\n  ErrorHandlingService = (function() {\n    ErrorHandlingService.$inject = [\"$rootScope\"];\n\n    function ErrorHandlingService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    ErrorHandlingService.prototype.init = function() {\n      return this.rootScope.errorHandling = {};\n    };\n\n    ErrorHandlingService.prototype.notfound = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.notfound = true;\n    };\n\n    ErrorHandlingService.prototype.error = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.error = true;\n    };\n\n    ErrorHandlingService.prototype.permissionDenied = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.permissionDenied = true;\n    };\n\n    ErrorHandlingService.prototype.block = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.blocked = true;\n    };\n\n    return ErrorHandlingService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxFactory;\n\n  LightboxFactory = (function() {\n    LightboxFactory.$inject = [\"$rootScope\", \"$compile\"];\n\n    function LightboxFactory(rootScope, compile) {\n      this.rootScope = rootScope;\n      this.compile = compile;\n    }\n\n    LightboxFactory.prototype.create = function(name, attrs, scopeAttrs) {\n      var elm, html, scope;\n      scope = this.rootScope.$new();\n      scope = _.merge(scope, scopeAttrs);\n      elm = $(\"<div>\").attr(name, true).attr(\"tg-bind-scope\", true);\n      if (attrs) {\n        elm.attr(attrs);\n      }\n      elm.addClass(\"remove-on-close\");\n      html = this.compile(elm)(scope);\n      $(document.body).append(html);\n    };\n\n    return LightboxFactory;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PaginateResponse;\n\n  PaginateResponse = function() {\n    return function(result) {\n      var paginateResponse;\n      paginateResponse = Immutable.Map({\n        \"data\": result.get(\"data\"),\n        \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n        \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n        \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n        \"count\": result.get(\"headers\")(\"x-pagination-count\")\n      });\n      return paginateResponse;\n    };\n  };\n\n  angular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  ProjectLogoService = (function() {\n    function ProjectLogoService() {\n      var COLORS, IMAGES;\n      IMAGES = [\"/\" + window._version + \"/images/project-logos/project-logo-01.png\", \"/\" + window._version + \"/images/project-logos/project-logo-02.png\", \"/\" + window._version + \"/images/project-logos/project-logo-03.png\", \"/\" + window._version + \"/images/project-logos/project-logo-04.png\", \"/\" + window._version + \"/images/project-logos/project-logo-05.png\"];\n      COLORS = [\"rgba( 153,  214, 220, 1 )\", \"rgba( 213,  156,  156, 1 )\", \"rgba( 214, 161, 212,  1 )\", \"rgba( 164, 162, 219, 1 )\", \"rgba( 152, 224, 168,  1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    ProjectLogoService.prototype.getDefaultProjectLogo = function(slug, id) {\n      var idx, key, logo;\n      key = slug + \"-\" + id;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    return ProjectLogoService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectService, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  ProjectService = (function() {\n    ProjectService.$inject = [\"$rootScope\", \"tgProjectsService\", \"tgXhrErrorService\", \"tgUserActivityService\", \"$interval\", \"$q\"];\n\n    function ProjectService(rootScope, projectsService, xhrError, userActivityService, interval, q) {\n      this.rootScope = rootScope;\n      this.projectsService = projectsService;\n      this.xhrError = xhrError;\n      this.userActivityService = userActivityService;\n      this.interval = interval;\n      this.q = q;\n      this.manageProjectSignal = bind(this.manageProjectSignal, this);\n      this._project = null;\n      this._section = null;\n      this._sectionsBreadcrumb = Immutable.List();\n      this._activeMembers = Immutable.List();\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this._project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"section\", (function(_this) {\n        return function() {\n          return _this._section;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"sectionsBreadcrumb\", (function(_this) {\n        return function() {\n          return _this._sectionsBreadcrumb;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"activeMembers\", (function(_this) {\n        return function() {\n          return _this._activeMembers;\n        };\n      })(this));\n      if (!window.localStorage.e2e) {\n        this.autoRefresh();\n      }\n      this.watchSignals();\n    }\n\n    ProjectService.prototype.watchSignals = function() {\n      var fetchRequiredSignals, i, len, results, signal;\n      fetchRequiredSignals = [\"admin:project-modules:updated\", \"admin:project-roles:updated\", \"admin:project-default-values:updated\", \"admin:project-values:updated\", \"admin:project-values:move\", \"admin:project-custom-attributes:updated\", \"sprintform:create:success\", \"sprintform:edit:success\", \"sprintform:remove:success\", \"tags:updated\"];\n      results = [];\n      for (i = 0, len = fetchRequiredSignals.length; i < len; i++) {\n        signal = fetchRequiredSignals[i];\n        results.push(this.rootScope.$on(signal, this.manageProjectSignal));\n      }\n      return results;\n    };\n\n    ProjectService.prototype.manageProjectSignal = function(ctx) {\n      return this.fetchProject();\n    };\n\n    ProjectService.prototype.cleanProject = function() {\n      this._project = null;\n      this._activeMembers = Immutable.List();\n      this._section = null;\n      return this._sectionsBreadcrumb = Immutable.List();\n    };\n\n    ProjectService.prototype.autoRefresh = function() {\n      var intervalId;\n      intervalId = this.interval((function(_this) {\n        return function() {\n          return _this.fetchProject();\n        };\n      })(this), 60 * 10 * 1000);\n      this.userActivityService.onInactive((function(_this) {\n        return function() {\n          return _this.interval.cancel(intervalId);\n        };\n      })(this));\n      return this.userActivityService.onActive((function(_this) {\n        return function() {\n          _this.fetchProject();\n          return _this.autoRefresh();\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.setSection = function(section) {\n      this._section = section;\n      if (section) {\n        return this._sectionsBreadcrumb = this._sectionsBreadcrumb.push(this._section);\n      } else {\n        return this._sectionsBreadcrumb = Immutable.List();\n      }\n    };\n\n    ProjectService.prototype.setProject = function(project) {\n      this._project = project;\n      return this._activeMembers = this._project.get('members').filter(function(member) {\n        return member.get('is_active');\n      });\n    };\n\n    ProjectService.prototype.setProjectBySlug = function(pslug) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          if (!_this.project || _this.project.get('slug') !== pslug) {\n            return _this.projectsService.getProjectBySlug(pslug).then(function(project) {\n              _this.setProject(project);\n              return resolve();\n            })[\"catch\"](function(xhr) {\n              return _this.xhrError.response(xhr);\n            });\n          } else {\n            return resolve();\n          }\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.fetchProject = function() {\n      var pslug;\n      if (!this.project) {\n        return;\n      }\n      pslug = this.project.get('slug');\n      return this.projectsService.getProjectBySlug(pslug).then((function(_this) {\n        return function(project) {\n          return _this.setProject(project);\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.hasPermission = function(permission) {\n      return this._project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    ProjectService.prototype.isEpicsDashboardEnabled = function() {\n      return this._project.get(\"is_epics_activated\");\n    };\n\n    return ProjectService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ThemeService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ThemeService = (function(superClass) {\n    extend(ThemeService, superClass);\n\n    function ThemeService() {\n      return ThemeService.__super__.constructor.apply(this, arguments);\n    }\n\n    ThemeService.prototype.use = function(themeName) {\n      var stylesheetEl;\n      stylesheetEl = $(\"link[rel='stylesheet']:first\");\n      if (stylesheetEl.length === 0) {\n        stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\");\n        $(\"head\").append(stylesheetEl);\n      }\n      return stylesheetEl.attr(\"href\", \"/\" + window._version + \"/styles/theme-\" + themeName + \".css\");\n    };\n\n    return ThemeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserActivityService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  UserActivityService = (function() {\n    UserActivityService.$inject = ['$timeout'];\n\n    UserActivityService.prototype.idleTimeout = 60 * 5 * 1000;\n\n    function UserActivityService(timeout) {\n      this.timeout = timeout;\n      if (window.localStorage.e2e) {\n        return null;\n      }\n      window.addEventListener('mousemove', this.resetTimer.bind(this), false);\n      window.addEventListener('mousedown', this.resetTimer.bind(this), false);\n      window.addEventListener('keypress', this.resetTimer.bind(this), false);\n      window.addEventListener('mousewheel', this.resetTimer.bind(this), false);\n      window.addEventListener('touchmove', this.resetTimer.bind(this), false);\n      this.subscriptionsActive = [];\n      this.subscriptionsInactive = [];\n      this.isActive = true;\n      this.startTimer();\n    }\n\n    UserActivityService.prototype.startTimer = function() {\n      return this.timerId = this.timeout(this._fireInactive.bind(this), this.idleTimeout);\n    };\n\n    UserActivityService.prototype.resetTimer = function() {\n      if (!this.isActive) {\n        this._fireActive();\n      }\n      this.timeout.cancel(this.timerId);\n      this.startTimer();\n      return this.isActive = true;\n    };\n\n    UserActivityService.prototype.onActive = function(cb) {\n      this.subscriptionsActive.push(cb);\n      return this._unSubscriptionsActive.bind(this, cb);\n    };\n\n    UserActivityService.prototype.onInactive = function(cb) {\n      this.subscriptionsInactive.push(cb);\n      return this._unSubscriptionsInactive.bind(this, cb);\n    };\n\n    UserActivityService.prototype._fireActive = function() {\n      return this.subscriptionsActive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._fireInactive = function() {\n      this.isActive = false;\n      return this.subscriptionsInactive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsActive = function(cb) {\n      return this.subscriptionsActive = this.subscriptionsActive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsInactive = function(cb) {\n      return this.subscriptionsInactive = this.subscriptionsInactive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    return UserActivityService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserListService, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  normalizeString = this.taiga.normalizeString;\n\n  UserListService = (function() {\n    UserListService.$inject = [\"tgCurrentUserService\", \"tgProjectService\"];\n\n    function UserListService(currentUserService, projectService) {\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    UserListService.prototype.filterUsers = function(text, user) {\n      var username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = text.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    UserListService.prototype.searchUsers = function(text, excludedUser) {\n      var users;\n      this.currentUser = this.currentUserService.getUser();\n      users = _.clone(this.projectService.activeMembers.toJS(), true);\n      if (excludedUser) {\n        users = _.reject(users, {\n          \"id\": excludedUser.id\n        });\n      }\n      users = _.sortBy(users, (function(_this) {\n        return function(o) {\n          var ref;\n          if (o.id === ((ref = _this.currentUser) != null ? ref.get('id') : void 0)) {\n            return 0;\n          } else {\n            return o.id;\n          }\n        };\n      })(this));\n      if (text != null) {\n        users = _.filter(users, _.partial(this.filterUsers, text));\n      }\n      return users;\n    };\n\n    return UserListService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserService, bindMethods, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = taiga.bindMethods;\n\n  UserService = (function(superClass) {\n    extend(UserService, superClass);\n\n    UserService.$inject = [\"tgResources\"];\n\n    function UserService(rs) {\n      this.rs = rs;\n      bindMethods(this);\n    }\n\n    UserService.prototype.getUserByUserName = function(username) {\n      return this.rs.users.getUserByUsername(username);\n    };\n\n    UserService.prototype.getContacts = function(userId, excludeProjectId) {\n      return this.rs.users.getContacts(userId, excludeProjectId);\n    };\n\n    UserService.prototype.getLiked = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getLiked(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getVoted = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getVoted(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getWatched = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getWatched(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getStats = function(userId) {\n      return this.rs.users.getStats(userId);\n    };\n\n    UserService.prototype.attachUserContactsToProjects = function(userId, projects) {\n      return this.getContacts(userId).then(function(contacts) {\n        projects = projects.map(function(project) {\n          var contactsFiltered;\n          contactsFiltered = contacts.filter(function(contact) {\n            var contactId;\n            contactId = contact.get(\"id\");\n            return project.get('members').indexOf(contactId) !== -1;\n          });\n          project = project.set(\"contacts\", contactsFiltered);\n          return project;\n        });\n        return projects;\n      });\n    };\n\n    return UserService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgUserService\", UserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var xhrError,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  xhrError = (function(superClass) {\n    extend(xhrError, superClass);\n\n    xhrError.$inject = [\"$q\", \"tgErrorHandlingService\"];\n\n    function xhrError(q, errorHandlingService) {\n      this.q = q;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    xhrError.prototype.notFound = function() {\n      return this.errorHandlingService.notfound();\n    };\n\n    xhrError.prototype.permissionDenied = function() {\n      return this.errorHandlingService.permissionDenied();\n    };\n\n    xhrError.prototype.response = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.notFound();\n        } else if (xhr.status === 403) {\n          this.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return xhrError;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineAttachmentDirective;\n\n  UserTimelineAttachmentDirective = function(template, $compile) {\n    var isImage, link, validFileExtensions;\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"];\n    isImage = function(url) {\n      url = url.toLowerCase();\n      return _.some(validFileExtensions, function(extension) {\n        return url.indexOf(extension, url - extension.length) !== -1;\n      });\n    };\n    link = function(scope, el) {\n      var is_image, templateHtml;\n      is_image = isImage(scope.attachment.get('url'));\n      if (is_image) {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\");\n      } else {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\");\n      }\n      el.html(templateHtml);\n      $compile(el.contents())(scope);\n      return el.find(\"img\").error(function() {\n        return this.remove();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        attachment: \"=tgUserTimelineAttachment\"\n      }\n    };\n  };\n\n  UserTimelineAttachmentDirective.$inject = [\"$tgTemplate\", \"$compile\"];\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemTitle, unslugify;\n\n  unslugify = this.taiga.unslugify;\n\n  UserTimelineItemTitle = (function() {\n    UserTimelineItemTitle.$inject = [\"$translate\", \"$sce\"];\n\n    UserTimelineItemTitle.prototype._fieldTranslationKey = {\n      'status': 'COMMON.FIELDS.STATUS',\n      'subject': 'COMMON.FIELDS.SUBJECT',\n      'description_diff': 'COMMON.FIELDS.DESCRIPTION',\n      'points': 'COMMON.FIELDS.POINTS',\n      'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\n      'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\n      'severity': 'ISSUES.FIELDS.SEVERITY',\n      'priority': 'ISSUES.FIELDS.PRIORITY',\n      'type': 'ISSUES.FIELDS.TYPE',\n      'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\n      'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\n      'color': 'COMMON.FIELDS.COLOR',\n      'due_date': 'COMMON.FIELDS.DUE_DATE',\n      'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\n      'milestone': 'COMMON.FIELDS.SPRINT'\n    };\n\n    UserTimelineItemTitle.prototype._params = {\n      username: function(timeline, event) {\n        var title_attr, url, user;\n        user = timeline.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\";\n          return this._getLink(url, user.get('name'), title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      field_name: function(timeline, event) {\n        var field_name;\n        field_name = timeline.getIn(['data', 'value_diff', 'key']);\n        return this.translate.instant(this._fieldTranslationKey[field_name]);\n      },\n      project_name: function(timeline, event) {\n        var url;\n        url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\";\n        return this._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]));\n      },\n      new_value: function(timeline, event) {\n        var new_value, prettyDate, value;\n        if (_.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())) {\n          value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1);\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_to') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          }\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_users') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          } else if (timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'due_date') {\n            if (value) {\n              prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n              value = moment(value, \"YYYY-MM-DD\").format(prettyDate);\n            } else {\n              value = this.translate.instant('ACTIVITY.VALUES.NOT_SET');\n            }\n          }\n          new_value = value;\n        } else {\n          new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1);\n        }\n        return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML');\n      },\n      sprint_name: function(timeline, event) {\n        var url;\n        url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\";\n        return this._getLink(url, timeline.getIn(['data', 'milestone', 'name']));\n      },\n      us_name: function(timeline, event) {\n        var event_us, obj, text, url;\n        obj = this._getTimelineObj(timeline, event).get('userstory');\n        event_us = {\n          obj: 'parent_userstory'\n        };\n        url = this._getDetailObjUrl(event_us);\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      related_us_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"userstory\"]);\n        url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      epic_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"epic\"]);\n        url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      obj_name: function(timeline, event) {\n        var obj, text, url;\n        obj = this._getTimelineObj(timeline, event);\n        url = this._getDetailObjUrl(event);\n        if (event.obj === 'wikipage') {\n          text = unslugify(obj.get('slug'));\n        } else if (event.obj === 'milestone') {\n          text = obj.get('name');\n        } else {\n          text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        }\n        return this._getLink(url, text);\n      },\n      role_name: function(timeline, event) {\n        return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first());\n      }\n    };\n\n    function UserTimelineItemTitle(translate, sce) {\n      this.translate = translate;\n      this.sce = sce;\n    }\n\n    UserTimelineItemTitle.prototype._translateTitleParams = function(param, timeline, event) {\n      return this._params[param].call(this, timeline, event);\n    };\n\n    UserTimelineItemTitle.prototype._getTimelineObj = function(timeline, event) {\n      return timeline.getIn(['data', event.obj]);\n    };\n\n    UserTimelineItemTitle.prototype._getDetailObjUrl = function(event) {\n      var url;\n      url = {\n        \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\n        \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\n        \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\n        \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\n      };\n      return url[event.obj][0] + url[event.obj][1];\n    };\n\n    UserTimelineItemTitle.prototype._getLink = function(url, text, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a>').attr('tg-nav', url).append(span).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getParams = function(timeline, event, timeline_type) {\n      var params;\n      params = {};\n      timeline_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, timeline, event);\n        };\n      })(this));\n      return params;\n    };\n\n    UserTimelineItemTitle.prototype.getTitle = function(timeline, event, type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(timeline, event, type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return UserTimelineItemTitle;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineType, timelineType;\n\n  timelineType = function(timeline, event) {\n    var types;\n    types = [\n      {\n        check: function(timeline, event) {\n          return event.obj === 'membership';\n        },\n        key: 'TIMELINE.NEW_MEMBER',\n        translate_params: ['project_name'],\n        member: function(timeline) {\n          return Immutable.Map({\n            user: timeline.getIn(['data', 'user']),\n            role: timeline.getIn(['data', 'role'])\n          });\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'project' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_PROJECT',\n        translate_params: ['username', 'project_name'],\n        description: function(timeline) {\n          return timeline.getIn(['data', 'project', 'description']);\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'attachments';\n        },\n        key: 'TIMELINE.UPLOAD_ATTACHMENT',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.US_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'create';\n        },\n        key: 'TIMELINE.ISSUE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'create';\n        },\n        key: 'TIMELINE.WIKI_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED_WITH_US',\n        translate_params: ['username', 'project_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'create';\n        },\n        key: 'TIMELINE.MILESTONE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'relateduserstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\n        translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.NEW_COMMENT_US',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'issue';\n        },\n        key: 'TIMELINE.NEW_COMMENT_ISSUE',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'task';\n        },\n        key: 'TIMELINE.NEW_COMMENT_TASK',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'epic';\n        },\n        key: 'TIMELINE.NEW_COMMENT_EPIC',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) && event.type === 'change';\n        },\n        key: 'TIMELINE.US_MOVED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) === null;\n          }\n          return false;\n        },\n        key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.US_ADDED_MILESTONE',\n        translate_params: ['username', 'obj_name', 'sprint_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === true;\n          }\n          return false;\n        },\n        key: 'TIMELINE.BLOCKED',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          if (timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])) {\n            text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1);\n            return $($.parseHTML(text)).text();\n          } else {\n            return false;\n          }\n        }\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === false;\n          }\n          return false;\n        },\n        key: 'TIMELINE.UNBLOCKED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'change';\n        },\n        key: 'TIMELINE.MILESTONE_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'change';\n        },\n        key: 'TIMELINE.WIKI_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'points';\n        },\n        key: 'TIMELINE.US_UPDATED_POINTS',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.US_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change';\n        },\n        key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.EPIC_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'color';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'user' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_USER',\n        translate_params: ['username']\n      }\n    ];\n    return _.find(types, function(obj) {\n      return obj.check(timeline, event);\n    });\n  };\n\n  UserTimelineType = (function() {\n    function UserTimelineType() {}\n\n    UserTimelineType.prototype.getType = function(timeline, event) {\n      return timelineType(timeline, event);\n    };\n\n    return UserTimelineType;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemType\", UserTimelineType);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemDirective;\n\n  UserTimelineItemDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\",\n      scope: {\n        timeline: \"=tgUserTimelineItem\"\n      }\n    };\n  };\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineItem\", UserTimelineItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelinePaginationSequence;\n\n  UserTimelinePaginationSequence = function() {\n    var obj;\n    obj = {};\n    obj.generate = function(config) {\n      var getContent, items, next, page;\n      page = 1;\n      items = Immutable.List();\n      config.minItems = config.minItems || 20;\n      next = function() {\n        items = Immutable.List();\n        return getContent();\n      };\n      getContent = function() {\n        return config.fetch(page).then(function(response) {\n          var data, pagination;\n          page++;\n          data = response.get(\"data\");\n          if (config.filter) {\n            data = config.filter(data);\n          }\n          if (config.map && data) {\n            data = data.map(config.map);\n          }\n          items = items.concat(data);\n          if (items.size < config.minItems && response.get(\"next\")) {\n            return getContent();\n          }\n          pagination = Immutable.Map({\n            items: items,\n            total: response.get(\"total\"),\n            next: response.get(\"next\")\n          });\n          return pagination;\n        });\n      };\n      return {\n        next: function() {\n          return next();\n        }\n      };\n    };\n    return obj;\n  };\n\n  angular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineController, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  UserTimelineController = (function(superClass) {\n    extend(UserTimelineController, superClass);\n\n    UserTimelineController.$inject = [\"tgUserTimelineService\"];\n\n    function UserTimelineController(userTimelineService) {\n      this.userTimelineService = userTimelineService;\n      this.timelineList = Immutable.List();\n      this.scrollDisabled = false;\n      this.timeline = null;\n      if (this.projectId) {\n        this.timeline = this.userTimelineService.getProjectTimeline(this.projectId);\n      } else if (this.currentUser) {\n        this.timeline = this.userTimelineService.getProfileTimeline(this.user.get(\"id\"));\n      } else {\n        this.timeline = this.userTimelineService.getUserTimeline(this.user.get(\"id\"));\n      }\n      this.loadTimeline();\n    }\n\n    UserTimelineController.prototype.loadTimeline = function() {\n      this.scrollDisabled = true;\n      return this.timeline.next().then((function(_this) {\n        return function(response) {\n          _this.timelineList = _this.timelineList.concat(response.get(\"items\"));\n          if (response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          return _this.timelineList;\n        };\n      })(this));\n    };\n\n    return UserTimelineController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaUserTimeline\").controller(\"UserTimeline\", UserTimelineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineDirective;\n\n  UserTimelineDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\n      controller: \"UserTimeline\",\n      controllerAs: \"vm\",\n      scope: {\n        projectId: \"=projectid\",\n        user: \"=\",\n        currentUser: \"=\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  UserTimelineService = (function(superClass) {\n    extend(UserTimelineService, superClass);\n\n    UserTimelineService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"tgUserTimelineItemType\", \"tgUserTimelineItemTitle\"];\n\n    function UserTimelineService(rs, userTimelinePaginationSequenceService, userTimelineItemType, userTimelineItemTitle) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.userTimelineItemType = userTimelineItemType;\n      this.userTimelineItemTitle = userTimelineItemTitle;\n    }\n\n    UserTimelineService.prototype._valid_fields = ['status', 'subject', 'description_diff', 'assigned_users', 'assigned_to', 'points', 'severity', 'priority', 'type', 'attachments', 'is_iocaine', 'content_diff', 'name', 'estimated_finish', 'estimated_start', 'blocked', 'moveInBacklog', 'milestone', 'color', 'due_date', 'due_date_reason'];\n\n    UserTimelineService.prototype._invalid = [\n      {\n        check: function(timeline) {\n          var fieldKey, value_diff;\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff) {\n            fieldKey = value_diff.get('key');\n            if (this._valid_fields.indexOf(fieldKey) === -1) {\n              return true;\n            } else if (fieldKey === 'attachments' && value_diff.get('value').get('new').size === 0) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          return event[2] === 'change' && value_diff === void 0;\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[2] === 'delete';\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[1] === 'project' && event[2] === 'change';\n        }\n      }, {\n        check: function(timeline) {\n          return !!timeline.get(\"data\").get(\"comment_deleted\");\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff && event[1] === \"task\" && event[2] === \"change\" && value_diff.get(\"key\") === \"milestone\") {\n            return timeline.get(\"data\").get(\"value_diff\").get(\"value\");\n          }\n          return false;\n        }\n      }\n    ];\n\n    UserTimelineService.prototype._isInValidTimeline = function(timeline) {\n      return _.some(this._invalid, (function(_this) {\n        return function(invalid) {\n          return invalid.check.call(_this, timeline);\n        };\n      })(this));\n    };\n\n    UserTimelineService.prototype._parseEventType = function(event_type) {\n      event_type = event_type.split(\".\");\n      return {\n        section: event_type[0],\n        obj: event_type[1],\n        type: event_type[2]\n      };\n    };\n\n    UserTimelineService.prototype._getTimelineObject = function(timeline, event) {\n      if (timeline.get('data').get(event.obj)) {\n        return timeline.get('data').get(event.obj);\n      }\n    };\n\n    UserTimelineService.prototype._attachExtraInfoToTimelineEntry = function(timeline, event, type) {\n      var title;\n      title = this.userTimelineItemTitle.getTitle(timeline, event, type);\n      timeline = timeline.set('title_html', title);\n      timeline = timeline.set('obj', this._getTimelineObject(timeline, event));\n      if (type.description) {\n        timeline = timeline.set('description', type.description(timeline));\n      }\n      if (type.member) {\n        timeline = timeline.set('member', type.member(timeline));\n      }\n      if (timeline.getIn(['data', 'value_diff', 'key']) === 'attachments' && timeline.hasIn(['data', 'value_diff', 'value', 'new'])) {\n        timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']));\n      }\n      return timeline;\n    };\n\n    UserTimelineService.prototype._parseTimeline = function(response) {\n      var newdata;\n      newdata = Immutable.List();\n      response.get('data').forEach((function(_this) {\n        return function(item) {\n          var data, event, newItem, values_diff;\n          event = _this._parseEventType(item.get('event_type'));\n          data = item.get('data');\n          values_diff = data.get('values_diff');\n          if (values_diff && values_diff.count()) {\n            if (values_diff.has('is_blocked')) {\n              values_diff = Immutable.Map({\n                'blocked': values_diff\n              });\n            }\n            if (values_diff.has('milestone')) {\n              if (event.obj === 'userstory') {\n                values_diff = Immutable.Map({\n                  'moveInBacklog': values_diff\n                });\n              } else {\n                values_diff = values_diff.deleteIn(['values_diff', 'milestone']);\n              }\n            } else if (event.obj === 'milestone') {\n              values_diff = Immutable.Map({\n                'milestone': values_diff\n              });\n            }\n            return values_diff.forEach(function(value, key) {\n              var newItem, obj;\n              obj = Immutable.Map({\n                key: key,\n                value: value\n              });\n              newItem = item.setIn(['data', 'value_diff'], obj);\n              newItem = newItem.deleteIn(['data', 'values_diff']);\n              return newdata = newdata.push(newItem);\n            });\n          } else {\n            newItem = item.deleteIn(['data', 'values_diff']);\n            return newdata = newdata.push(newItem);\n          }\n        };\n      })(this));\n      return response.set('data', newdata);\n    };\n\n    UserTimelineService.prototype._addEntyAttributes = function(item) {\n      var event, type;\n      event = this._parseEventType(item.get('event_type'));\n      type = this.userTimelineItemType.getType(item, event);\n      return this._attachExtraInfoToTimelineEntry(item, event, type);\n    };\n\n    UserTimelineService.prototype.getProfileTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getProfileTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getUserTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getUserTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getProjectTimeline = function(projectId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.projects.getTimeline(projectId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    return UserTimelineService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IsolateClickDirective;\n\n  IsolateClickDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {\n      return el.on('click', (function(_this) {\n        return function(e) {\n          return e.stopPropagation();\n        };\n      })(this));\n    };\n    return {\n      link: link\n    };\n  };\n\n  angular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDiffDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDiffDirective = function() {\n    return {\n      templateUrl: \"wiki/history/wiki-history-diff.html\",\n      scope: {\n        key: \"<\",\n        diff: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryEntryDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryEntryDirective = function() {\n    var link;\n    link = function(scope, el, attr) {\n      return scope.singleHistoryEntry = scope.historyEntry.toJS();\n    };\n    return {\n      link: link,\n      templateUrl: \"wiki/history/wiki-history-entry.html\",\n      scope: {\n        historyEntry: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryController, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaWikiHistory\");\n\n  WikiHistoryController = (function() {\n    WikiHistoryController.$inject = [\"tgActivityService\"];\n\n    function WikiHistoryController(activityService) {\n      this.activityService = activityService;\n      taiga.defineImmutableProperty(this, 'historyEntries', (function(_this) {\n        return function() {\n          return _this.activityService.entries;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disablePagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      this.toggle = false;\n    }\n\n    WikiHistoryController.prototype.initializeHistory = function(wikiId) {\n      if (wikiId) {\n        this.activityService.init('wiki', wikiId);\n      }\n      return this.loadHistory();\n    };\n\n    WikiHistoryController.prototype.loadHistory = function() {\n      return this.activityService.fetchEntries();\n    };\n\n    WikiHistoryController.prototype.nextPage = function() {\n      return this.activityService.nextPage();\n    };\n\n    return WikiHistoryController;\n\n  })();\n\n  module.controller(\"WikiHistoryCtrl\", WikiHistoryController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return bindOnce(scope, 'vm.wikiId', function(value) {\n        return ctrl.initializeHistory(value);\n      });\n    };\n    return {\n      scope: {},\n      bindToController: {\n        wikiId: \"<\"\n      },\n      controller: \"WikiHistoryCtrl\",\n      controllerAs: \"vm\",\n      templateUrl: \"wiki/history/wiki-history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiHistory\", WikiHistoryDirective);\n\n}).call(this);\n\n//# sourceMappingURL=maps/app.js.map\n"],"names":["configure","i18nInit","init","pluginsWithModule","taiga","this","emojis","window","taigaContribPlugins","generateHash","components","_","map","x","JSON","stringify","hex_sha1","join","generateUniqueSessionIdentifier","date","Date","getTime","randomNumber","Math","floor","random","sessionId","$routeProvider","$locationProvider","$httpProvider","$provide","$tgEventsProvider","$compileProvider","$translateProvider","$translatePartialLoaderProvider","$animateProvider","$logProvider","originalWhen","userInfo","classNameFilter","when","path","route","resolve","angular","extend","languageLoad","$q","$translate","deferred","defer","then","promise","projectLoaded","projectService","$route","setSection","ref","current","$$route","section","params","pslug","setProjectBySlug","cleanProject","call","templateUrl","controller","controllerAs","loader","title","description","joyride","reloadOnSearch","access","requiresLogin","template","redirectTo","disableHeader","taigaConfig","publicRegisterEnabled","mobileViewport","otherwise","html5Mode","enabled","requireBase","defaultHeaders","Content-Type","Accept-Language","defaultLanguage","X-Session-Id","defaults","headers","patch","post","put","get","useApplyAsync","setSessionId","authHttpIntercept","$location","$navUrls","$lightboxService","errorHandlingService","responseError","response","nextUrl","search","status","config","cancelable","closeAll","error","url","indexOf","force_next","unauthorized","next","reject","factory","interceptors","push","loaderIntercept","loaderService","request","logRequest","requestError","rejection","logResponse","versionCheckHttpIntercept","data","version","element","injector","invoke","$confirm","versionErrorMsg","instant","notify","blockingIntercept","redirectToBlockedPage","block","blocked_code","debugInfoEnabled","debugInfo","localStorage","parse","preferedLangCode","lang","addPart","useLoader","urlTemplate","_version","useSanitizeValueStrategy","addInterpolation","preferredLanguage","useMissingTranslationHandlerLog","fallbackLanguage","decorators","getDecorators","each","decorator","provider","debugEnabled","debug","console","info","moment","locale","document","querySelector","setAttribute","ljs","load","messages","defaultMessage","type","email","urlstrict","number","digits","dateIso","alphanum","phone","notnull","notblank","required","regexp","min","max","range","minlength","maxlength","rangelength","mincheck","maxcheck","rangecheck","equalto","linewidth","pikaday","checksley","updateMessages","$log","$rootscope","$auth","$events","$analytics","$tagManager","$userPilot","appMetaService","navigationBarService","lightboxService","$tgConfig","un","$on","refresh","validators","val","width","lines","nl2br","split","every","line","length","prettyDate","isValid","RegExp","test","updateValidators","contribPlugins","adminPlugins","filter","authPlugins","userSettingsPlugins","e","ctx","language","rtlLanguages","isRTL","translations","translationTable","getTranslationTable","lan","setupConnection","isAuthenticated","getUser","initialize","identify","event","getLightboxOpen","preventDefault","start","project","setAll","addMobileViewport","removeMobileViewport","enableHeader","module","value","plugin","pluginsModules","modules","concat","run","TaigaBase","TaigaService","child","parent","key","hasProp","ctor","constructor","prototype","__super__","hasOwnProperty","bind","fn","me","apply","arguments","TaigaController","onInitialDataError","xhr","notfound","permissionDenied","q","Base","Service","Controller","DEFAULT_COLOR_LIST","findScope","getDefaulColorList","getMatches","getRandomDefaultColor","isEmail","isImage","isPdf","normalizeString","randomInt","item","i","l","slice","addClass","el","className","classList","add","str","replace","bindMethods","object","dependencies","keys","methods","forIn","isFunction","bindAll","bindOnce","scope","attr","continuation","delBind","$eval","$watch","mixOf","Mixed","base","method","mixins","name","trim","char","slugify","toString","toLowerCase","unslugify","capitalize","toggleText","texts","nextTextPosition","text","groupBy","coll","pred","result","len","timeout","wait","setTimeout","cancelTimeout","timeoutVar","clearTimeout","scopeDefer","func","$apply","isNumber","isString","isPlainObject","isUndefined","joinStr","debounce","leading","trailing","debounceLeading","startswith","str1","str2","startsWith","truncate","maxLength","suffix","out","String","substring","lastIndexOf","sizeFormat","input","precision","units","isNaN","parseFloat","isFinite","log","pow","toFixed","stripTags","exception","pattern","replaceTags","tags","defineImmutableProperty","obj","Object","defineProperty","fn_result","isObject","size","mixin","removeKeys","chain","flatten","reduce","cartesianProduct","reduceRight","a","b","y","match","oldImmutable","newImmutable","pathObj","forEach","newValue","toJS","sample","clone","string","regex","index","matches","exec","end","interval","normalizedString","$scope","condition","$parent","PageMixin","FiltersMixin","UsFiltersMixin","fillUsersAndRoles","users","roles","computableRoles","activeUsers","user","is_active","sortBy","activeUsersById","id","usersById","members","uniq","includes","loadUsersAndRoles","_this","all","rs","projects","usersList","projectId","rolesList","results","excludePrefix","selectFilter","mode","location","existing","compact","isInCurrentRouteParams","noreload","replaceFilter","replaceAllFilters","filters","unselectFilter","parsedValues","newValues","isEmpty","applyStoredFilters","projectSlug","validKeys","getFilters","pick","storeFilters","filtersHashSuffix","ns","hash","storage","set","formatSelectedFilters","list","urlIds","selectedFilters","selectedIds","it","invalidTags","find","sit","invalidAppliedTags","dataType","validAppliedTags","color","filterCategories","excludeFilters","changeQ","filterQ","filtersReloadContent","removeFilter","generateFilters","addFilter","newFilter","category","selectCustomFilter","customFilter","saveCustomFilter","excludeKey","urlfilters","filterRemoteStorageService","storeCustomFiltersName","userFilters","removeCustomFilter","isFilterDataTypeSelected","filterDataType","milestone","loadFilters","storeFiltersName","userstories","filtersData","j","len1","ref1","selected","customFiltersRaw","dataCollection","statuses","tagsWithAtLeastOneElement","tag","count","assigned_users","full_name","assigned_to","role","owner","owners","epic","epics","subject","translate","content","hideEmpty","totalTaggedElements","customFilters","forOwn","$translateMissingTranslationHandlerLog","translationId","$inject","displayName","LoginPage","currentUserService","$routeParams","decodeURIComponent","clear","removeToken","AuthService","rootscope","model","http","urls","config1","userpilot","currentUserService1","themeService","analytics","userModel","_currentTheme","_getUserTheme","setUserdata","userData","Immutable","fromJS","getAttrs","setUser","setUserId","ref2","compiledThemes","_taigaAvailableThemes","defaultTheme","theme","_setTheme","newTheme","use","_setLocales","make_model","auth","remove","setToken","token","getToken","auth_token","$broadcast","login","logout","removeUser","register","getInvitation","invitations","acceptInvitiationWithNewUser","forgotPassword","changePasswordFromRecovery","changeEmail","cancelAccount","exportProfile","sendVerificationEmail","service","PublicRegisterMessageDirective","$config","templates","restrict","encodeURIComponent","directive","LoginDirective","$window","link","$el","$attrs","onError","onSuccess","submit","form","Form","defaultLoginEnabled","trackEvent","href","onKeyUp","currentTarget","iscapsLockActivated","validate","username","password","loginFormType","on","prerenderReady","off","RegisterDirective","onErrorSubmit","onSuccessSubmit","onlyOneErrorElement","_error_message","setErrors","RegisterOptionsDirective","ForgotPasswordDirective","message","success","ChangePasswordFromRecoveryDirective","$params","tokenInParams","InvitationDirective","loginForm","onErrorSubmitLogin","onErrorSubmitRegister","onSuccessSubmitLogin","onSuccessSubmitRegister","registerForm","submitLogin","invitation","dataLogin","project_slug","project_name","invitation_token","dataRegister","submitRegister","VerifyEmailDirective","$repo","$model","email_token","queryOne","ChangeEmailDirective","CancelAccountDirective","cancel_token","TaigaMainDirective","onresize","home","not-found","permission-denied","discover","discover-search","forgot-password","change-password","change-email","verified-email","cancel-account","create-project","create-project-scrum","create-project-kanban","create-project-duplicate","create-project-import","create-project-import-platform","profile","user-profile","blocked-project","project-detail-ref","project-backlog","project-taskboard","project-kanban","project-issues","project-epics","project-search","project-timeline","project-epics-detail","project-userstories-detail","project-tasks-detail","project-issues-detail","project-wiki","project-wiki-list","project-wiki-page","project-team","project-admin-home","project-admin-project-profile-details","project-admin-project-profile-default-values","project-admin-project-profile-modules","project-admin-project-profile-export","project-admin-project-profile-reports","project-admin-project-values-status","project-admin-project-values-points","project-admin-project-values-priorities","project-admin-project-values-severities","project-admin-project-values-types","project-admin-project-values-custom-fields","project-admin-project-values-tags","project-admin-project-values-due-dates","project-admin-project-values-kanban-power-ups","project-admin-memberships","project-admin-roles","project-admin-third-parties-webhooks","project-admin-third-parties-github","project-admin-third-parties-gitlab","project-admin-third-parties-bitbucket","project-admin-third-parties-gogs","project-admin-contrib","user-settings-user-profile","user-settings-user-change-password","user-settings-user-avatar","user-settings-user-project-settings","user-settings-mail-notifications","user-settings-live-notifications","user-settings-web-notifications","user-settings-contrib","notifications","$navurls","update","ToggleCommentDirective","QueueModelTransformation","qqueue1","repo","model1","qqueue","DataPickerConfig","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","firstDay","parseInt","format","SelectedText","$document","getSelection","selection","createRange","CheckPermissionDirective","render","permission","removeClass","unObserve","unwatch","tgCheckPermission","$observe","ClassPermissionDirective","unbindWatcher","checkPermissions","negation","my_permissions","tgClassPermissionWatchAction","classes","AnimationFrame","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","performAnimation","time","tail","shift","ProjectUrl","slug","is_backlog_activated","is_kanban_activated","is_wiki_activated","is_issues_activated","Qqueue","lastPromise","bindAdd","args","setObject","scope1","prop","attrs","cloneDeep","_attrs","_name","getObj","save","transformation","defered","comment","modified","omit","_modifiedAttrs","assign","Template","$templateCache","lodash","tmp","Capslock","Svg","svgIcon","svgTitle","svgTitleTranslate","svgTitleTranslateValues","svgFill","Autofocus","$timeout","$parse","$element","ngShow","focus","spinner","preload","src","onLoad","image","Image","onload","transclude","show","prepend","hide","DetailController","navurls","issue","task","us","wikipage","EventsService","win","liveAnnouncementService1","rootScope","liveAnnouncementService","processMessage","EventsProvider","subscriptions","connected","pendingMessages","missedHeartbeats","heartbeatInterval","WebSocket","loc","scheme","stopExistingConnection","protocol","trimStart","host","ws","addEventListener","onOpen","onMessage","onClose","removeEventListener","stopHeartBeatMessages","close","subscribe","desc","$digest","liveNotifications","userId","notification","Notification","icon","body","onshow","onclick","open","requestPermission","webNotifications","routingKey","startHeartBeatMessages","maxMissedHeartbeats","heartbeatIntervalTime","setInterval","Error","sendMessage","cmd","error1","clearInterval","processHeartBeatPongMessage","serialize","msg","send","subscription","routing_key","callback","options","unsubscribe","reconnectTryInterval","$get","$win","$conf","$rootScope","FeedbackDirective","$loading","feedbackService","currentLoading","target","submitButton","create","feedback","finish","openLightbox","RelatedTaskRowDirective","$compile","$template","$emojis","templateView","templateEdit","saveTask","renderEdit","childScope","$destroy","$new","html","keyCode","$modelValue","renderView","perms","modify_task","delete_task","emojify","replaceEmojiNameByHtmlImgs","escape","select","askOnDelete","askResponse","$emit","ngModel","require","RelatedTaskCreateFormDirective","$tgmodel","newTask","createTask","default_task_status","openNewRelatedTask","reset","RelatedTaskCreateButtonDirective","RelatedTasksDirective","$rs","loadTasks","tasks","usId","_isVisible","reorderTask","newIndex","showAddTaks","showRelatedTasks","RelatedTaskAssignedToInlineEditionDirective","avatarService","$lightboxFactory","updateRelatedTask","member","avatar","getAvatar","imgurl","bg","full_name_display","tgRelatedTaskAssignedToInlineEdition","autoSave","notAutoSave","stopPropagation","assignedUsers","pop","class","currentUsers","single","lbTitle","unbind","ResourcesService","initResources","initUrls","auth-register","by_username","users-password-recovery","users-change-password-from-recovery","users-change-password","users-change-email","users-cancel-account","users-export","user-stats","user-liked","user-voted","user-watched","user-contacts","user-me","user-send-verification-email","permissions","notify-policies","user-project-settings","user-storage","memberships","bulk-create-memberships","resolver","project-templates","project-modules","bulk-update-projects-order","project-like","project-unlike","project-watch","project-unwatch","project-contact","project-transfer-validate-token","project-transfer-accept","project-transfer-reject","project-transfer-request","project-transfer-start","epic-statuses","userstory-statuses","userstory-due-dates","userstory-due-dates-create-default","points","task-statuses","task-due-dates","task-due-dates-create-default","issue-statuses","issue-due-dates","issue-due-dates-create-default","issue-types","priorities","severities","milestones","move-userstories-to-milestone","move-tasks-to-milestone","move-issues-to-milestone","epic-upvote","epic-downvote","epic-watch","epic-unwatch","epic-related-userstories","epic-related-userstories-bulk-create","bulk-create-us","bulk-update-us-backlog-order","bulk-update-us-milestone","bulk-update-us-miles-order","bulk-update-us-kanban-order","userstories-filters","userstory-upvote","userstory-downvote","userstory-watch","userstory-unwatch","bulk-create-tasks","bulk-update-task-taskboard-order","bulk-update-task-milestone","task-upvote","task-downvote","task-watch","task-unwatch","task-filters","promote-task-to-us","issues","bulk-create-issues","bulk-update-issue-milestone","issues-filters","issue-upvote","issue-downvote","issue-watch","issue-unwatch","promote-issue-to-us","swimlanes","swimlane-userstory-statuses","wiki","wiki-restore","wiki-links","history/epic","history/us","history/issue","history/task","history/wiki","attachments/epic","attachments/us","attachments/issue","attachments/task","attachments/wiki_page","attachments/wikipage","custom-attributes/epic","custom-attributes/userstory","custom-attributes/task","custom-attributes/issue","custom-attributes-values/epic","custom-attributes-values/userstory","custom-attributes-values/task","custom-attributes-values/issue","webhooks","webhooks-test","webhooklogs","webhooklogs-resend","epics-csv","userstories-csv","tasks-csv","issues-csv","timeline-profile","timeline-user","timeline-project","exporter","importer","locales","applications","application-tokens","stats-discover","importers-trello-auth-url","importers-trello-authorize","importers-trello-list-projects","importers-trello-list-users","importers-trello-import-project","importers-jira-auth-url","importers-jira-authorize","importers-jira-list-projects","importers-jira-list-users","importers-jira-import-project","importers-github-auth-url","importers-github-authorize","importers-github-list-projects","importers-github-list-users","importers-github-import-project","importers-asana-auth-url","importers-asana-authorize","importers-asana-list-projects","importers-asana-list-users","importers-asana-import-project","$urls","providers","toArray","SearchController","navUrls","projectService1","sectionName","loadInitialData","projectName","projectDescription","searchTerm","t","loadSearchData","searchResults","term","loadProject","epicStatusById","epic_statuses","issueStatusById","issue_statuses","taskStatusById","task_statuses","severityById","priorityById","usStatusById","us_statuses","loading","_loadSearchData","_promise","abort","SearchBoxDirective","reload","SearchDirective","$templatecache","$routeparams","linkTable","$ctrl","applyAutoTab","activeSectionName","tabsDom","currentSearchResults","getActiveSection","maxVal","selectedSection","renderFilterTabs","markSectionTabActive","wikipages","renderTableContent","oldElements","children","oldScope","parseHTML","activeSection","trackPage","sectionData","searchText","AnalyticsService","doc","initialized","conf","accountId","pageEvent","trackRoutes","ignoreFirstPageLoad","injectAnalytics","ga","getUrl","uuid","s","o","g","r","m","createElement","getElementsByTagName","async","parentNode","insertBefore","page","action","label","ecViewPlan","plan","plan_id","quantity","position","ecClickPlan","ecListPlans","arg","plans","ecAddToCart","plan_name","plan_price","price","ecConfirmChange","step","ecPurchase","revenue","BindScope","jQuery","CompileHtmlDirective","tgCompileHtml","oldValue","contents","DateRangeDirective","renderRange","first","second","startDate","endDate","tgDateRange","valFirst","valSecond","DateSelectorDirective","datePickerConfigService","datePickerConfig","merge","field","picker","Pikaday","destroy","setDate","SprintProgressBarDirective","renderProgress","percentage","visual_percentage","hasClass","css","tgSprintProgressbar","sprint","closedPoints","closed_points","totalPoints","total_points","round","CreatedByDisplayDirective","owner_extra_info","created_date","UserDisplayDirective","tgUserId","BlockButtonDirective","isEditable","DeleteButtonDirective","onDeleteGoToUrl","onDeleteTitle","subtitle","ListItemEpicStatusDirective","tgListitemEpicStatus","ListItemUsStatusDirective","tgListitemUsStatus","ListItemTaskStatusDirective","tgListitemTaskStatus","ListItemAssignedtoDirective","tgListitemAssignedto","ListItemIssueStatusDirective","tgListitemIssueStatus","ListItemTypeDirective","issueTypeById","domNode","tgListitemType","ListItemPriorityDirective","priority","tgListitemPriority","ListItemSeverityDirective","severity","tgListitemSeverity","TgProgressBarDirective","tgProgressBar","TgMainTitleDirective","i18nSectionName","ConfirmService","NOTIFICATION_MSG","light-error","ask","lightboxSelector","currentWidth","ok","onEsc","askDelete","lightbox","askChoice","choices","replacement","warning","choicesField","append","detailImage","svgContainer","useSVG","$","createElementNS","setAttributeNS","appendChild","spin","stop","percent","selector","tsem","one","CHECKBOX_TYPE","CustomAttributesValuesController","DATE_TYPE","DROPDOWN_TYPE","NUMBER_TYPE","confirm","objectId","customAttributes","customAttributesValues","loadCustomAttributesValues","getAttributeValue","attribute","attributeValue","attributes_values","updateAttributeValue","attributesValues","CustomAttributesValuesDirective","$templates","$storage","collapsedHash","$ctrls","collapsed","toggleCollapse","requiredEditionPerm","CustomAttributeValueDirective","$selectedText","wysiwygService","setFocusAndSelectOnInputField","edit","editable","attributeHtml","getHTML","extra","onSelect","selectedDate","saveCustomRichText","markdown","cancelCustomRichText","formControl","checked","tgCustomAttributeValue","customAttributeValue","EmojisService","replaceEmojiNameByImgs","replaceImgsByEmojiName","getEmojiByName","getEmojiById","searchByName","emojisById","keyBy","emojisByName","emojiId","regexImgs","emojiIds","emoji","escapeRegExp","LbUsEstimationDirective","$tgEstimationsService","estimationProcess","onSelectedPointForRole","roleId","pointId","$setViewValue","calculateTotalPoints","calculateRoles","UsEstimationDirective","$modelTransform","$watchCollection","EstimationsService","$qqueue","EstimationProcess","pointsTemplate","$el1","us1","project1","bindClickEvents","pointsById","revert","values","v","k","notNullValues","acc","num","pointObj","renderPointsSelector","siblings","popover","point","horizontalList","some","horizontal","closest","offset","top","height","clientHeight","defaultFilter","defaultValue","yesNoFilter","momentFormat","momentFromNow","without_suffix","fromNow","toMutableFilter","toMutable","js","memoizedMutable","memoize","List","byRefFilter","$filterFilter","cleanRef","substr","darkerFilter","luminosity","c","newColor","markdownToHTML","wysiwigService","inArray","$filter","arrayFilter","listItem","textToHTML","superClass","LightboxService","LightboxKeyboardNavigationService","ignoreEsc","lightboxContent","not","firstField","activeElement","blur","which","$applyAsync","docEl","removeAttr","lightboxEl","dispatch","code","trigger","prev","LightboxDirective","$attr","visible","LightboxClose","elm","BlockLightboxDirective","$tgrepo","unblock","finishCallback","transform","is_blocked","blocked_note","BlockingMessageInputDirective","ngmodel","watch","CreateBulkUserstoriesDirective","getCurrentStatus","displayStatusSelector","currentStatus","statusId","toggleStatus","displayStatus","hideStatus","setStatus","swimlaneId","bulk","swimlane","default_swimlane","bulkCreate","swimlane_id","parents","LightboxLeaveProjectWarningDirective","SetDueDateDirective","due_date","new_due_date","unit","due_date_reason","CreateEditDirective","attachmentsService","checkClose","createAttachments","deleteAttachments","getSchema","isDisabledExisting","mount","resetAttachments","saveItem","sprintChangeConfirmAndSave","schema","attachmentsToAdd","attachmentsToDelete","schemas","objName","include_attachments","include_tasks","translationID","translationIDPlural","statusList","initialData","default_us_status","is_archived","sprintId","user_story","typeById","issue_types","typeList","severityList","priorityList","milestonesById","default_priority","default_severity","default_issue_status","default_issue_type","setMode","getOrCreate","existingFilterText","listInAllProjects","existingItems","copy","objType","attachments","lightboxOpen","addAttachment","attachment","deleteAttachment","addTag","projectTags","tags_colors","itemtags","deleteTag","pull","promises","upload","file","addExistingToSprint","oldSprintName","newSprintName","relatedObjectId","setAttr","relatedField","broadcastEvent","isLoading","getByRef","isModified","team_requirement","client_requirement","is_iocaine","isTeamRequirement","isClientRequirement","selectedStatus","is_closed","templateScope","compiledTemplate","RelateToEpicLightboxDirective","$tgCurrentUserService","tgResources","$tgResources","$epicsService","tgAnalytics","existingEpicForm","filterEpics","loadProjects","newEpicForm","selectProject","projectEpics","selectedProject","selectedProjectId","filterText","is_epics_activated","project__blocked_code","excludeIds","filteredData","selectedEpic","searchEpic","onUpdateSearchEpic","saveRelatedEpic","selectedEpicId","onSavedRelatedEpic","addRelatedUserstory","createEpic","epicSubject","onCreateEpic","errors","epicId","Loaded","compile","$event","LoaderDirective","tgLoader","onStart","onEnd","Loader","minTime","startLoadTime","requestCount","lastResponseDate","pageLoaded","force","timeoutValue","diff","autoClose","intervalAuto","auto","TgLoadingService","settings","removeClasses","classess","timeoutId","LoadingDirective","tgLoading","showLoading","UsStatusDirective","usStatusDomParent","usStatusDom","statusElement","tgUsStatus","onUpdate","RelatedTaskStatusDirective","selectionTemplate","updateTaskStatus","taskStatusDomParent","taskStatusDom","tgRelatedTaskStatus","isVisible","docViewBottom","docViewRight","docViewTop","elemBottom","elemLeft","elemTop","elemWidth","display","visibility","scrollTop","left","elemRight","closePopover","fadeOut","fadeIn","globalPopover","cb","createSvg","elementPosition","followElement","ul","wrapper","attrHref","tgSvg","svg","xlink","createAttribute","setAttributeNode","rect","getBoundingClientRect","right","paddingTop","paddingLeft","style","option","li","button","innerHTML","createTextNode","ExceptionHandlerFactory","ravenConfig","Raven","install","cause","captureException","SECTIONS","SectionsService","1","2","3","4","5","6","getPath","sectionId","defaultHomePage","p","TagManagerService","injectTagManager","w","d","gtm.start","f","dl","TagsDirective","formatter","isArray","parser","$formatters","$parsers","ColorizeTagsBacklogDirective","tgColorizeBacklogTags","LbTagLineDirective","templateTags","autocomplete","withoutColors","has","renderTags","tagsColors","showSaveButton","hideSaveButton","resetInput","addValue","deleteValue","saveInputTag","fromCharCode","Awesomplete","UserPilotService","checkZendeskConditions","hasPaidPlan","is_new_user","getJoinedLimit","userPilotId","getItem","calculateUserPilotId","userPilotCustomer","prepareUserPilotCustomer","zE","setZendeskWidgetStatus","created_at","now","taiga_id","taiga_username","taiga_date_joined","taiga_lang","taiga_max_private_projects","taiga_max_memberships_private_projects","taiga_verified_email","taiga_total_private_projects","taiga_total_public_projects","taiga_roles","maxPrivateProjects","limit","getDate","supress","webWidget","chat","suppress","contactForm","helpCenter","talk","answerBot","CreateEditSprint","getLastSprint","openFn","resetSprint","ussToAdd","hasErrors","createSprint","newSprint","createEditOpen","estimated_start","estimated_finish","estimated_end","realClone","sprintsCounter","sprints","__all__","milestonesCounter","openSprints","closed","sortedSprints","uss","estimatedStart","lastSprint","estimatedFinish","lastSprintNameDom","editSprint","BacklogController","params1","events","rs2","modelTransform","backlogOrder","milestonesOrder","disablePagination","firstLoadComplete","translationData","totalUserStories","pendingDrag","noSwimlaneUserStories","swimlanesList","validQueryParams","showTags","activeFilters","showGraphPlaceholder","displayVelocity","initializeEventHandlers","loadSwimlanes","getShowTags","newUs","loadUserstories","els","loadProjectStats","ussToMove","loadSprints","toggleVelocityForecasting","loadClosedSprints","findIndex","moveUs","unloadClosedSprints","initializeSubscription","routingKey1","loadAllPaginatedUserstories","routingKey2","selfNotification","toggleShowTags","storeShowTags","toggleActiveFilters","calculateForecasting","visibleUserStories","forecastedStories","stats","defined_points","completedPercentage","total_milestones","setMilestonesOrder","user_stories","results1","sprint_order","closedSprints","totalClosedMilestones","closedSprintsById","totalMilestones","totalOpenMilestones","sprintsById","currentSprint","findCurrentSprint","resetPagination","pageSize","loadingUserstories","storeQueryParams","lastLoadUserstoriesParams","listUnassigned","header","backlog_order","loadBacklog","getLinkParams","ParsedLastLoadUserstoriesParams","pickBy","identity","sprintTotalPoints","backlog_points_sum","assigned_points","forecastNewSprint","speed","closedMilestones","total_closed_milestones","usStatusList","toggleTags","prepareBulkUpdateData","uses","us_id","order","moveUsToTopOfBacklog","nextUs","usList","newUsIndex","newSprintId","previousUs","currentSprintId","len2","targetList","oldSprintId","bulkUserstories","splice","bulkUpdateBacklogOrder","updatedUs","n","len3","updateUserStoryStatus","editUserStory","deleteUserStory","without","addNewUs","addNewSprint","currentDate","addFilterBacklog","removeFilterBacklog","BacklogDirective","doomLineTemplate","linkDoomLine","reloadDoomLine","current_sum","domElement","removeDoomlineDom","addDoomLineDom","before","linkToolbar","checkSelected","lastChecked","shiftPressed","getUsToMove","ussDom","itemScope","moveUssToSprint","selectedUss","ussCurrent","extraPoints","totalExtraPoints","union","bulkUpdateMilestone","moveToCurrentSprint","moveToLatestSprint","partial","toggleClass","moveToSprintDom","shiftKey","elements","nextAll","prevAll","nextUntil","prevUntil","showHideTags","ussToMoveList","openFilterInit","showHideFilter","linkFilters","filtersSearch","UsEditSelector","$tgTemplate","mainTemplate","removePopupOpenState","contains","UsRolePointsSelectorDirective","roleName","is","UsPointsDirective","rolesTemplate","bindClickElements","renderRolesSelector","updatingSelectedRoleId","selectedRoleId","tgBacklogUsPoints","popRolesDom","ToggleBurndownVisibility","firstLoad","toggleGraph","isBurndownGraphCollapsed","BurndownBacklogGraphDirective","redrawChart","dataToDraw","milestonesRange","zero_line","ml","zip","fillColor","optimal_line","optimal","evolution_line","evolution","client_increment_line","team_increment_line","colors","grid","borderWidth","bottom","borderColor","hoverable","margin","xaxis","ticks","axisLabel","axisLabelUseCanvas","axisLabelFontSizePixels","axisLabelFontFamily","axisLabelPadding","tickFormatter","axis","yaxis","series","shadowSize","fill","radius","lineWidth","tooltip","tooltipOpts","xval","yval","flotItem","seriesIndex","sprintName","abs","empty","plot","TgBacklogProgressBarDirective","projectPointsPercentaje","closedPointsPercentaje","adjustPercentaje","adjusted","tgBacklogProgressBar","definedPoints","deleteElement","BacklogSortableDirective","ctrl","drake","initIsBacklog","oldIndex","emptyBacklog","dragula","copySortSource","isContainer","moves","source","sibling","dataset","Number","container","dragMultiple","firstElement","dragMultipleItems","getElements","parentEl","isBacklog","sameContainer","autoScroll","pixels","scrollWhenOutside","down","dragging","BacklogSprintDirective","slideOptions","duration","easing","toggleSprint","sprintTable","tgBacklogSprint","slideToggle","BacklogSprintHeaderDirective","taskboardUrl","estimatedDateRange","ToggleExcludeClosedSprintsVisualization","excludeClosedSprints","loadingElm","after","SprintDirective","SprintChartDirective","days","utc","day","unshift","open_points","optimal_points","tickSize","last","daysNames","formattedDate","roundedValue","CreateBulkTasksDirective","TaskboardController","rs1","q1","taskboardTasksService","taskboardIssuesService","lightboxFactory","timeout1","openFilter","backToBacklogUrl","usTasks","taskMap","milestoneIssues","tasksByUs","milestoneIssue","issuesRaw","rawIssue","getQueryParams","_setMeta","setZoom","zoomLevel","zoom","previousZoomLevel","isFirstLoad","resetFolds","zoomLoading","loadIssues","completedPoints","completedPointsSum","totalPointsSum","openTasks","totalTasks","total_tasks","refreshTagsColors","replaceModel","taskMove","onAssignedToChanged","itemsMoved","userid","getName","loadTaskboard","loadSprintStats","loadSprint","pointsList","roleById","taskStatusList","res","completed_points","remainingPointsSum","remainingTasks","completed_tasks","setUserstories","locationParams","listInProject","initIssues","notFoundTasks","initialLoad","sslug","getSprintShowTags","setRolePoints","storeSprintShowTags","showPlaceHolder","tasksRaw","editTask","getTask","getIn","editingTask","editIssue","getIssue","editingIssue","deleteTask","deletingTask","deleteIssue","deletingIssue","removeIssueFromSprint","removingIssue","oldStatusId","movingTask","getTaskModel","moveUpdateData","move","status__is_archived","set-orders","set_orders","reloadUserStory","assignOrders","userStoryId","addNewTask","addNewIssue","targetName","toggleFold","modelName","openUsersSelection","changeTaskAssignedTo","changeIssueAssignedTo","getIssueModel","getPoint","pointsByRole","getRole","getIssuesOrderBy","order_by","TaskboardDirective","scrollLeft","TaskboardSquishColumnDirective","getCeilWidth","recalculateStatusColumnWidth","recalculateTaskboardWidth","setStatusColumnWidth","statusesFolded","getStatusColumnModes","usFolded","getUsRowModes","foldStatus","storeStatusColumnModes","foldUs","rowId","storeUsRowModes","isStatusFolded","isUSFolded","columns","ceil","avatarWidth","statusFoldedWidth","initialWidth","total","TaskboardSortableDirective","filterError","initialContainer","itemEl","newParentScope","oldParentScope","$tgConfirm","containers","accepts","cancel","itemIndex","itemTask","newStatusId","newUsId","oldUsId","st","TaskboardIssuesService","foldStatusChanged","issueId","issueModel","images","thumbnail_card_url","colorized_tags","TaskboardTasksService","Map","taskId","refreshRawOrder","taskboard_order","invert","afterDestination","previous","previousWithTheSameOrder","setOrders","taksWithoutMoved","taskByUsStatus","beforeDestination","task_id","taskModel","KanbanUserstoriesService","resetSwimlanesList","resetArchivedStatus","userstoriesRaw","statusHide","usByStatus","usMap","usByStatusSwimlanes","archivedStatus","refreshUserStory","initUsByStatusList","usModel","Array","retrieveUserStoryData","refreshSwimlanes","addArchivedStatus","isUsInArchivedHiddenStatus","getUsModel","deleteStatus","showStatus","getStatus","toDelete","archived","difference","kanban_order","previousCard","nextCard","initialLength","previousUsIndex","previousUsOrder","usByStatusWithoutMoved","listIt","moveIt","afterUserstoryId","beforeUserstoryId","moveToEnd","usItem","getUs","assignedUserId","assignedUserData","assigned_users_preview","refreshUsMap","collection","emptySwimlaneExists","userstoriesNoSwimlane","emptySwimlane","insert","swimlaneUsByStatus","usListSwimlanes","CardSvgTemplate","KanbanController","kanbanUserstoriesService1","kanbanUserstoriesService","renderUserStories","changeUsAssignedUsers","foldedSwimlane","renderBatching","isLightboxOpened","isRefreshNeeded","cleanSelectedUss","toggleSelectedUs","openArchived","loadUserStoriesForStatus","lastUsId","newOrder","hideUserStoriesForStatus","refreshAfterSwimlanesOrUserstoryStatusesHaveChanged","fetchProject","randomTimeout","routingKeyUserstories","eventsLoadUserstories","routingKeyProject","editUs","editingUserStory","deleteUs","deletingUserStory","firstStatus","firstSwimlane","toggleSwimlane","kanban","storeSwimlanesModes","assignedUsersIds","renderBatch","clean","renderInProgress","take","queue","batchSize","rendered","drop","batchTimings","userstoriesMap","loadUserstoriesParams","modifiedUs","eventUserstories","pk","raw","listAll","newUss","lastSearch","loadPromises","archivedPromises","archivedStatusId","archivedRedult","notFoundUserstories","filteredStatus","waitEmptyQuote","loadKanban","swimlanesStatuses","usCardVisibility","getSwimlanesModes","newSwimlaneId","apiNewSwimlaneId","bulkUpdateKanbanOrder","KanbanDirective","_tableBody","watchKanbanSize","kanbanStyles","getComputedStyle","columnMargin","getPropertyValue","resizeObserver","ResizeObserver","entries","column","offsetWidth","unobserve","setProperty","observe","board","initBoard","visibleEntries","entry","$evalAsync","taskColumnLoaded","addSwimlane","cardLoaded","addCard","isTableLoaded","kanbanTableLoaded","tableHeaderDom","openSwimlane","tableBody","scroll","KanbanArchivedShowStatusHeaderDirective","tgKanbanArchivedShowStatusHeader","KanbanArchivedStatusIntroDirective","tgKanbanArchivedStatusIntro","userStoriesLoaded","KanbanSquishColumnDirective","folds","unfold","archivedFolds","KanbanWipLimitDirective","tgKanbanWipLimit","redrawWipLimit","cards","wipLimitClass","wip_limit","CardAssignedToDirective","svgTemplate","vm","avatars","checkPermission","svgData","initializeZoom","onChange","ctrlKey","metaKey","onClickAssignedTo","CardDataDirective","dueDateService","emptyTask","dueDateColor","dueDate","isClosed","dueDateTitle","totalAttachments","CardActionsDirective","openPopup","actions","getModifyPermisionKey","onClickEdit","getDeletePermisionKey","onClickDelete","KanbanSwimlaneDirective","currentSwimlane","mouseleaveSwimlane","mouseoverSwimlane","querySelectorAll","KanbanTaskboardColumnDirective","KanbanSortableDirective","dropTarget","finalUsList","newStatus","newSwimlane","oldSwimlaneId","oldStatus","tableLoaded","EpicDetailController","attachmentsFullService","epicRef","epicref","attachmentsReady","initializeOnDeleteGoToUrl","epicStatus","statusById","epicDescription","description_html","loadAttachments","loadEpic","immutableProject","immutableEpic","commentModel","neighbors","previousUrl","listInEpic","onUpvote","upvote","onDownvote","downvote","onWatch","onUnwatch","onSelectColor","onSelectColorSuccess","onSelectColorError","EpicStatusDisplayDirective","EpicStatusButtonDirective","IssueDetailController","issueRef","issueref","issueSubject","issueStatus","issueType","issueSeverity","issuePriority","ref3","issueDescription","loadIssue","milestoneId","IssueStatusDisplayDirective","IssueStatusButtonDirective","IssueTypeButtonDirective","typees","IssueSeverityButtonDirective","severityes","IssuePriorityButtonDirective","priorityes","AssignSprintToIssueButtonDirective","existsMilestone","avaliableMilestones","selectedSprint","needle","haystack","toUpperCase","filterMilestones","saveIssueToSprint","CreateBulkIssuesDirective","IssuesController","voting","isOrderedBy","myFiltersHashSuffix","storeIssuesShowTags","fieldName","orderBy","types","issueStatusList","issueTypes","loadIssuesRequests","models","paginatedBy","getIssuesShowTags","addIssuesInBulk","IssuesPaginationDirective","linkPagination","$pagEl","getNumPages","numPages","renderPagination","cpage","pages","showPrevious","showNext","pagenum","IssuesOrderingDirective","linkOrdering","colHeadElement","currentOrder","finalOrder","IssueStatusInlineEditionDirective","updateIssueStatus","issueStatusDomParent","issueStatusDom","tgIssueStatusInlineEdition","_isModified","IssueAssignedToInlineEditionDirective","updateIssue","tgIssueAssignedToInlineEdition","UserStoryDetailController","configService","tgmodel","sce","usRef","usref","tribeEnabled","tribeHost","closedTasks","progressPercentage","userStoryRef","userStorySubject","descriptionHtml","getTrustedHtml","userStoryStatus","userStoryPoints","userStoryDescription","userStoryClosedTasks","userStoryTotalTasks","userStoryProgressPercentage","relateToEpic","allClosed","loadUs","kanbanHttpParams","locationSearch","backlogHttpParams","legacyChannel","onTribeInfo","publishTitle","alt","publishDesc","withoutMoved","orderList","us_order","fromPairs","reorder","UsStatusDisplayDirective","UsStatusButtonDirective","UsTeamRequirementButtonDirective","canEdit","isRequired","UsClientRequirementButtonDirective","TaskDetailController","taskRef","taskref","taskSubject","taskStatus","taskDescription","loadTask","loadUserStory","TaskStatusDisplayDirective","TaskStatusButtonDirective","TaskIsIocaineButtonDirective","isIocaine","TeamController","setRole","filtersRole","loadMembers","totals","currentUser","issuesEnabled","tasksEnabled","wikiEnabled","loadMemberStats","memberStats","vals","statsKey","sum","_processStats","_processStat","stat","singleStat","userRoles","TeamFiltersDirective","TeamMemberStatsDirective","TeamMemberCurrentUserDirective","TeamMembersDirective","filtersQ","LeaveProjectDirective","leaveConfirm","leave_project_text","confirm_leave_project_text","leave","isCurrentUser","membersFilter","WikiDetailController","attachmentsFullService1","moveLink","loadWiki","wikiSlug","linksVisible","wikiPageName","wikiPageContent","totalEditions","editions","lastModifiedDate","modified_date","wikiId","getBySlug","loadWikiLinks","listLinks","wikiLinks","checkLinksPerms","saveAll","WikiSummaryDirective","last_modifier","wikiPage","WikiWysiwyg","activityService","editableDescription","saveDescription","fetchEntries","uploadFiles","default","storageKey","WikiNavDirective","linkWikiLinks","addWikiLinkPermission","tdom","deleteWikiLinkPermission","direction","mirrorContainer","linkId","newLink","loadPromise","WikiPagesListController","loadWikiPages","TransferProjectStartSuccessDirective","ChangeOwnerLightboxController","lightboxService1","commentOpen","LightboxAddMembersWarningMessageDirective","LbRequestOwnershipDirective","confirmService","transferRequest","filterUsers","getUsers","currentOwnerId","totalUsers","userSearch","selectUser","transferStart","ChangeOwnerLightboxDirective","lightboxKeyboardNavigationService","bindToController","MembershipsController","lightboxFactory1","i_am_admin","canAddUsers","max_memberships","total_memberships","httpFilters","getUrlFilters","membership","is_user_active","is_owner","projectOwnerEmail","user_email","addNewMembers","showLimitUsersWarningMessage","MembershipsDirective","MembershipsRowAvatarDirective","pending","isOwner","tgMembershipsRowAvatar","MembershipsRowAdminCheckboxDirective","tgMembershipsRowAdminCheckbox","inputId","is_admin","MembershipsRowRoleSelectorDirective","roleList","selectedRole","tgMembershipsRowRoleSelector","newRole","MembershipsRowActionsDirective","tgMembershipsRowActions","resendInvitation","defaultMsg","NoMoreMembershipsExplanationDirective","ownerEmail","AdminNavigationDirective","tgAdminNavigation","ProjectProfileDirective","ProjectProfileController","tgAuth","CsvExporterController","_deleteUuid","_generateUuid","setCsvUuid","csvUrl","resolveAbsolute","CsvExporterEpicsController","CsvExporterUserstoriesController","CsvExporterTasksController","CsvExporterIssuesController","epicStatusList","issueTypesList","prioritiesList","severitiesList","canCreatePrivateProjects","valid","openDeleteLightbox","privacyChanged","isAttributeModified","newUrl","is_private","ProjectDefaultValuesDirective","ProjectModulesDirective","initializeFields","newVal","oldVal","videoconferences_extra_data","videoconferences","isVideoconferenceActivated","ProjectExportDirective","buttonsEl","showButtons","hideButtons","resultEl","showResult","hideResult","spinnerEl","showSpinner","hideSpinner","resultTitleEl","loading_title","loading_msg","dump_ready_text","asyn_message","syn_message","setLoadingTitle","setAsyncTitle","setSyncTitle","resultMessageEl","setLoadingMessage","setAsyncMessage","setSyncMessage","showLoadingMode","showExportResultAsyncMode","showExportResultSyncMode","showErrorMode","dumpUrl","errorMsg","csvUuid","regenerateUuid","deleteUuid","CsvEpicDirective","sectionTitle","CsvUsDirective","CsvTaskDirective","CsvIssueDirective","ProjectLogoDirective","showSizeInfo","click","logoAttachment","changeLogo","removeLogo","ProjectLogoModelDirective","modelSetter","tgProjectLogoModel","files","AdminProjectRestrictionsDirective","AdminProjectRequestOwnershipDirective","requestOwnership","canRequest","AdminProjectChangeOwnerDirective","changeOwner","project-id","active-users","current-owner-id","ProjectValuesDirective","TYPE_CHOICES","ProjectValuesSectionController","ProjectValuesController","moveValue","loadValues","resource","ProjectSwimlanesValuesController","removeSwimlane","filterArchivedSwimlaneStatus","filterArchivedProjectStatuses","updatedSwimlanePosition","setDefaultSwimlane","updateSwimlane","ProjectDueDatesValuesController","displayValues","createDefaultValues","ProjectCustomAttributesController","moveCustomAttributes","deleteCustomAttribute","saveCustomAttribute","createCustomAttribute","loadCustomAttributes","_onCustomAttributesModified","ProjectTagsController","mixingClass","cancelMixingTags","confirmMixingTags","toggleMixingFromTags","startMixingTags","editTag","createTag","filterAndSortTags","loadTags","listValues","maxValueOrder","maxBy","itemValue","swimlaneAdded","hideSwimlaneForm","patch_default_swimlane","prevSwimlane","swimlanesOrderArrayFiltered","newSwimlanesOrder","bulkUpdateOrder","moveTo","ProjectSwimlanesValue","isFormVisible","isNewSwimlane","displaySwimlaneForm","ProjectSwimlanesSingle","$animate","displaySwimlaneSingleForm","swimlaneSingleForm","getDefaultTitle","removeSwimlaneTitle","editSwimlaneSingleForm","cancelEditSwimlaneSingleForm","removeSwimlaneDialog","phase","deletingSwimlane","SortableSwimlanes","days_to_due_abs","days_to_due","sign","linkDragAndDrop","linkValue","goToBottomList","saveNewValue","saveValue","valueType","objname","initializeNewValue","initializeTextTranslations","addNewElementText","table","formEl","row","editionRow","onSucces","ProjectDueDatesValues","parentDirective","linkDueDateStatusValue","_setDaysToDue","_valueFromEventTarget","due_date_status_name","_parseAttributesExtra","_parseAttributeExtra","maxOrder","attrValues","attrModel","idx","ProjectCustomAttributesDirective","_manageExtraFormEvent","_manageFormEvent","addExtraOption","cancelCreate","cancelUpdate","hideAddButton","hideCancelButton","hideCreateForm","hideEditForm","hideExtra","initAttrType","initDraggable","removeExtraOption","resetNewAttr","revertChangesInCustomAttribute","showAddButton","showCancelButton","showCreateForm","showEditForm","showExtra","isExtraVisible","sortableChildren","sortableEl","handle","itemAttr","attrExtra","sourceIndex","$index","targetIndex","newAttr","toggleExtraVisible","formExtraEl","formScope","projectTagsAll","tagsFilter","from_tag","to_tag","loadingDelete","mixingTags","toTag","fromTags","loadingMixing","mixTags","ProjectTagsDirective","initializeTagsFilter","initializeMixingTags","originalTag","loadingEdit","loadingCreate","ProjectSwimlanesWipDirective","wipClosed","toggleWipVisibility","publicPermissions","RolesController","_disableComputable","_enableComputable","anyComputableRole","computable","loadRoles","public_permission","external_user","public_permissions","forceLoadProject","askOnSuccess","askOnError","toggleComputable","EditRoleDirective","toggleView","toggle","RolesDirective","NewRoleDirective","DEFAULT_PERMISSIONS","insertPosition","RolePermissionsDirective","resumeTemplate","categoryTemplate","baseTemplate","generateCategoriesFromRole","setActivePermissions","active","isPermissionEditable","setActivePermissionsPerCategory","cat","activePermissions","categories","epicPermissions","milestonePermissions","userStoryPermissions","taskPermissions","issuePermissions","wikiPermissions","renderResume","renderCategory","renderPermissions","getActivePermissions","categoryId","anon_permissions","WebhooksController","loadWebhooks","GithubController","GitlabController","loadModules","BitbucketController","GogsController","WebhookDirective","webhook","tgWebhook","updateLogs","validStatus","prettySentHeaders","toPairs","request_headers","prettySentData","request_data","created","logs_counter","logs","updateShowHideHistoryText","textElement","showVisualizationMode","showEditMode","openHistory","resend","NewWebhookDirective","formDOMNode","addWebhookDOMNode","github","gitlab","bitbucket","SelectInputText","execCommand","GithubWebhooksDirective","saveAttribute","GitlabWebhooksDirective","BitbucketWebhooksDirective","ValidOriginIpsDirective","$ngModel","gogs","GogsWebhooksDirective","DeleteProjectDirective","projectToDelete","BindOnceBindDirective","tgBoBind","BindOnceHtmlDirective","tgBoHtml","BindOnceRefDirective","tgBoRef","BindOnceSrcDirective","tgBoSrc","BindOnceHrefDirective","tgBoHref","BindOnceAltDirective","tgBoAlt","BindOnceTitleDirective","tgBoTitle","BindTitleDirective","tgTitleHtml","BindHtmlDirective","tgBindHtml","ConfigurationService","ContribController","currentPlugin","head","ContribUserSettingsController","FiltersStorageService","HttpService","cacheFactory","cache","removeAll","responseType","LoadElementDirective","tgLoadElement","legacyObj","component","locationFactory","lastRoute","Model","dataTypes","_dataTypes","setAttrs","ModelService","instance","applyCasts","attrName","castName","castMethod","casts","getIdAttrName","self","getter","setter","enumerable","configurable","markSaved","desSerialize","sdata","ddata","$http","$gmUrls","$gmStorage","cls","int","float","NavigationUrlsService","formatUrl","replacer","NavigationUrlsDirective","tgSections","bindOnceP","parseNav","param","Promise","tgNavGetParams","tgNav","fullUrl","getURLParams","getURLParamsStr","RepositoryService","resolveUrlForModel","idAttrName","resolveUrlForAttributeModel","extraParams","_data","_status","returnHeaders","queryMany","httpOptions","enablePagination","queryOneAttribute","queryOneRaw","queryPaginated","queryOnePaginatedRaw","StorageService","_default","serializedValue","setItem","removeItem","UrlsService","mainUrl","fmt","trimEnd","resourceProvider","_get","userstory","_list","hashSuffix","contentType","entryType","editComment","activityId","commentData","getCommentHistory","deleteComment","undeleteComment","history","hashSprintShowTags","hashIssuesShowTags","project_id","milestone_id","bulk_issues","promoteToUserStory","hashSuffixStatusColumnModes","hashSuffixSwimlanesModes","mdrender","listByUser","bulkCreateMemberships","invitation_extra_text","bulk_memberships","notifyPolicies","listByMember","memberId","bulkData","regenerate_epics_csv_uuid","regenerate_userstories_csv_uuid","regenerate_tasks_csv_uuid","regenerate_issues_csv_uuid","delete_epics_csv_uuid","delete_userstories_csv_uuid","delete_tasks_csv_uuid","delete_issues_csv_uuid","from_tags","export","import","statusUpdater","complete","uploadComplete","uploadFailed","uploadProgress","maxFileSize","fileName","fileSize","evt","loaded","uploadedSize","totalSize","responseText","getResponseHeader","isPrivate","failed","FormData","XMLHttpRequest","setRequestHeader","transformRequest","do","deferredAbort","get_all","noop","u","moveUserStoriesMilestone","currentMilestoneId","bulk_stories","moveTasksMilestone","bulk_tasks","moveIssuesMilestone","swimlanesOrder","bulk_swimlanes","wipLimitUpdate","delete","hashSuffixUsRowModes","bulkUpdateTaskTaskboardOrder","userProjectSettings","changeAvatar","removeAvatar","changePassword","currentPassword","newPassword","current_password","userSettings","contacts","hashShowTags","page_size","status_id","bulk_userstories","after_userstory_id","before_userstory_id","editStatus","webhookId","webhooklogId","UserChangePasswordController","UserChangePasswordDirective","newPassword1","newPassword2","DeleteUserDirective","UserLiveNotificationsController","UserLiveNotificationsDirective","UserLiveNotificationsListDirective","policyIndex","policy","prev_level","live_notify_level","UserSettingsController","window1","getLan","getTheme","maxFileSizeMsg","availableThemes","verifyEmail","UserProfileDirective","UserAvatarDirective","avatarAttachment","TaigaAvatarModelDirective","tgAvatarModel","UserSettingsNavigationDirective","tgUserSettingsNavigation","UserNotificationsController","resources","isSaas","onPremiseSubscribed","loadPremise","subscribed","onPremise","subscribeOnPremiseNewsletter","origin_form","getUserStorage","storageState","setUserStorage","storageError","createUserStorage","UserNotificationsDirective","UserNotificationsListDirective","notify_level","UserProjectSettingsController","sections","updateCustomHomePage","projectSettings","filteredSections","allowed_sections","UserWebNotificationsController","UserWebNotificationsDirective","UserWebNotificationsListDirective","web_notify_level","AnimatedCounter","lastCount","renderData","transitionEnd","nextUp","renderCount","nextDown","counter","getCounter","wip","disabled","AssignedToInlineDirective","$currentUserService","$userListService","requiredPerm","renderUserList","selectedId","searchUsers","visibleUsers","showMore","renderUser","assignedObject","assigned_to_extra_info","fullName","isUnassigned","fullNameVisible","usersSearch","selfAssign","unassign","searchingText","AssignedUsersInlineDirective","currentAssignedIds","currentAssignedTo","isAssigned","renderUsersList","renderUsers","hiddenUsers","applyToModel","AttachmentLinkDirective","attachmentsPreviewService","tgAttachmentLink","fileId","AttachmentGalleryDirective","onDelete","AttachmentController","is_deprecated","editMode","mergeIn","AttachmentDirective","AttachmentsDropDirective","eventAttr","tgAttachmentsDrop","dataTransfer","originalEvent","AttachmentsFullController","deprecatedsCount","attachmentsVisible","deprecatedsVisible","uploadingAttachments","objId","toggleDeprecatedsVisible","addAttachments","toDeleteAttachment","errorMessage","reorderAttachment","updateAttachment","toUpdateAttachment","_isEditable","hasPermission","editPermission","showAttachments","AttachmentsFullDirective","displayAttachmentInput","AttachmentsFullService","_attachments","_deprecatedsCount","_attachmentsVisible","_deprecatedsVisible","regenerate","uploading","from_comment","setIn","afterAttachmentId","oldAttachment","setAttachments","AttachmentsPreviewController","getCurrent","hasPagination","getIndex","attachmentIndex","findLast","AttachmentPreviewLightboxDirective","AttachmentsPreviewService","AttachmentsSimpleController","onAdd","AttachmentsSimpleDirective","AttachmentSortableDirective","tgAttachmentsSortable","AutoSelectDirective","AvatarDirective","attributeName","tgAvatarBig","avatarBig","BelongToEpicsDirective","$rs2","updateEpics","userStory","removeEpicRelationship","deleteRelatedUserstory","epicsLength","immutable_epics","isIterable","BindCode","$sce","tElement","tAttrs","tgBindWysiwygHtmlGetter","tgBindWysiwygHtml","tgBindWysiwygHtmlWatch","$$addBindingClass","_extraValidHtmlElments","_extraValidAttrs","matchResult","blockClasses","hljs","getLanguage","highlightBlock","node","getAttribute","scrollIntoView","$$addBindingInfo","refreshAttachmentURL","BoardZoomDirective","levels","CardSlideshowController","cardSlideshowDirective","CardController","hasTasks","getTagColor","hasMultipleAssignedUsers","hasVisibleAttachments","onToggleFold","getClosedTasks","closedTasksPercent","_setVisibility","related","slides","isRelatedTasksVisible","isSlideshowVisible","getNavKey","cardDirective","onClickRemove","inViewPort","folded","ClickInputFile","inputFile","ColorSelectorController","colorList","checkIsColorRequired","displayColorList","userCanChangeColor","isColorRequired","dropRight","setColor","customColor","resetColor","initColor","toggleColorList","onSelectDropdownColor","onKeyDown","ColorSelectorDirective","_timeout","mouseenter","mouseleave","DetailHeaderController","loadingSubject","originalSubject","_checkPermissions","cancelEdit","editSubject","saveSubject","onEditSubjectSuccess","onEditSubjectError","DetailHeaderDirective","$tgWysiwygService","blocked_html_note","html_note","DetailNavController","_checkNav","project_extra_info","DetailNavDirective","DueDateController","tgLightboxFactory","_getScope","setDueDate","dueDatePopoverDirective","bound","getMoment","dueDateDirective","renderDatePicker","DueDateService","defaultConfig","by_default","_formatTitle","_getAppearance","_getDefaultAppearance","defaultAppearance","currentAppearance","appearance","formatedDate","FileChangeDirective","tgFileChange","FilterRemoteStorageService","myFilters","innerPromise","FilterSlideDownDirective","ngIf","contentHeight","outerHeight","context","nextSibling","FilterController","opened","filterModeOptions","filterModeLabels","include","exclude","filterMode","customFilterForm","customFilterName","$onChanges","changes","getIncludedFilters","getExcludedFilters","includedFilters","excludedFilters","activeCustomFilter","repeatedFilterError","lengthZeroError","toggleFilterCategory","filterName","isOpen","openCustomFilter","onSaveCustomFilter","onRemoveFilter","filterCategory","onAddFilter","onRemoveCustomFilter","onSelectCustomFilter","isFilterSelected","FilterDirective","onChangeQ","watchTaskboardHeight","taskboard","maxSize","currentMax","offsetHeight","InputSearchComponent","bindings","change","dirty","IssuesTableController","onEditIssue","onToggleTags","detach","onDetachIssue","onDeleteIssue","issuesTableDirective","onLoadIssues","onAddIssuesInBulk","onAddNewIssue","sprintIssues","issueOptions","displayOptions","hideOptions","JoyRideDirective","joyRideService","initJoyrRide","unsuscribe","intro","introJs","oncomplete","onexit","disableJoyRide","setOptions","exitOnEsc","exitOnOverlayClick","showStepNumbers","nextLabel","prevLabel","skipLabel","doneLabel","disableInteraction","setOption","loadJoyRideConfig","exit","JoyRideService","checkPermissionsService","getConfig","dashboard","steps","backlog","check","joyRide","KanbanBoardZoomDirective","onZoomChange","getZoomView","zooms","zoomIndex","SelectUserDirective","closeLightbox","confirmSelection","getFilteredUsers","available","_filterRows","userIds","roleUsers","userNames","addItem","clearSearch","LiveAnnouncementDirective","defineProperties","LiveAnnouncementService","MoveToSprintLightboxController","someSelected","selectedSprintId","typesSelected","itemsToMove","_loadSprints","openItems","_init","hasManyItemTypes","ussCount","updateSelected","tasksCount","issuesCount","itemType","itemsNotMoved","itemsList","itemsType","moveItems","displayWarning","totalItemsMoved","moveToSprintLightboxDirective","MoveToSprintController","hasOpenItems","getOpenUss","getOpenStorylessTasks","getOpenIssues","checkOpenItems","open-items","unnasignedTasks","issue_id","moveToSprintDirective","ProjectLogoBigSrcDirective","projectLogoService","projectLogo","logo","getDefaultProjectLogo","ProjectLogoSmallSrcDirective","ProjectMenuController","menu","_getActiveSection","projectMenu","_setVideoConference","_setMenuPermissions","videoconferenceUrl","_videoConferenceUrl","oldSectionName","sectionsBreadcrumb","indexBacklog","indexKanban","baseUrl","ProjectMenuDirective","fixed","projectChange","PromoteToUsButtonDirective","searchListDirective","avaliableItems","isContainedIn","itemsById","parseString","resetAll","resetSelected","currentSelected","filterClosed","showClosed","textShowClosed","textHideClosed","choiceId","items","toggleShowClosed","filterItems","filtering","itemAttrs","filterBy","placeholder","itemDisabled","SwimlaneSelector","getCurrentSwimlane","getSelectedSwimlane","displaySelector","selectedSwimlane","filteredSwimlanes","defaultSwimlaneId","selectSwimlane","hasUnclassifiedStories","TagOptionDirective","selectedPosition","containerHeight","onSelectTag","colorArray","TagLineCommonController","tagLineService","disableColorSelection","newTag","_createColorsArray","projectTagColors","createColorsArray","displayTagInput","addNewTag","onAddTag","selectColor","TagLineCommonDirective","tagName","loadingAddTag","loadingRemoveTag","onDeleteTag","TagLineController","onDeleteTagError","onDeleteTagSuccess","onAddTagError","onAddTagSuccess","TagLineDirective","TagLineService","myPermissions","projectPermissions","TagDirective","hasPermissions","TaskboardZoomDirective","TasksSortableDirective","tgTasksSortable","TermsOfServiceAndPrivacyPolicyNoticeDirective","privacyPolicyUrl","termsOfServiceUrl","AssignedToDirective","currentUserId","isSelfAssigned","assignedUser","openAssignedUsers","currentItem","AssignedUsersDirective","deleteAssignedUser","visibleAssignedUsersCount","displayHidden","assignedToUser","assignedUserIds","selfAssigned","TicketWatchersController","openWatchers","watchersIds","watchers","getPerms","_watch","_unwatch","deleteWatcher","watcherId","WatchersDirective","visibleWatchersCount","tipsDirective","tips","loadTip","waitingTimeout","tipLoaded","tip","TribeButtonDirective","locationService","port","TribeLinkedDirective","gigTitle","gigId","VoteButtonController","toggleVote","is_voter","VoteButtonDirective","ProjectSwimlanesWipLimitController","new_wip_limit","submitSwimlaneNewStatus","displayWipLimitSelector","swimlane_userstory_status_id","WipLimitSelector","toggleWipSelectorVisibility","CommentEditWysiwyg","CommentWysiwyg","saveComment","onAddComment","CustomFieldEditWysiwyg","ItemWysiwyg","Wysiwyg","$attachmentsFullService","htmlReadMode","editonly","onCancel","onSave","onUploadFile","discardLocalStorage","editorLinks","getCurrentContent","isDraft","isOutdated","linksEvents","localSave","saveEnd","setHtmlEditor","textEditor","throttleChange","unwatchContent","updateMarkdownWithCurrentHtml","isEditOnly","notPersist","parentElement","setEditMode","unwatchLoader","outdated","uploadFunction","fullNameDisplay","detail","refreshAttachmentURLFromMarkdown","saving","store","cancelWithConfirmation","getMarkdown","throttle","WysiwygService","projectDataConversion","dataConversion","angularDataConversion","setUp","toMarkdown","toHtml","getAttachmentData","tokens","getCachedAttachment","cache_key","attachmentId","cached_result","links","warn","DiscoverHomeOrderByController","is_open","week","month","year","currentText","currentOrderBy","DiscoverHomeOrderByDirective","DiscoverSearchBarController","discoverProjectsService","projectsCount","fetchStats","submitFilter","DiscoverSearchBarDirective","DiscoverSearchListHeaderController","like_is_open","activity_is_open","openLike","setOrderBy","openActivity","DiscoverSearchListHeaderDirective","FeaturedProjectsController","featured","fetchFeatured","FeaturedProjectsDirective","HighlightedDirective","highlighted","MostActiveController","mostActive","getOrderBy","fetch","fetchMostActive","MostActiveDirective","MostLikedController","mostLiked","fetchMostLiked","MostLikedDirective","DiscoverHomeController","onSubmit","DiscoverSearchController","routeParams","searchResult","nextSearchPage","loadingGlobal","loadingList","loadingPagination","resetSearchList","fetchByGlobalSearch","fetchByOrderBy","getFilter","fetchSearch","is_looking_for_people","onChangeFilter","updateParams","onChangeOrder","DiscoverSearchDirective","DiscoverProjectsService","_discoverParams","projectsService","_mostLiked","_mostActive","_featured","_searchResult","_projectsCount","decorate","_decorate","_nextSearchPage","discover_mode","_params","getProjects","is_featured","CreateEpicController","epicsService","newEpic","default_epic_status","validateForm","setFormErrors","CreateEpicDirective","EpicRowController","displayUserStories","displayAssignedTo","displayStatusList","loadingStatus","_calculateProgressBar","progress","canEditEpics","toggleUserStoryList","listRelatedUserStories","userStories","epicStories","updateStatus","updateEpicStatus","updateAssignedTo","assignLoader","updateEpicAssignedTo","EpicRowDirective","EpicsDashboardController","setfn","isEpicsDashboardEnabled","fetchEpics","notFound","canCreateEpics","on-create-epic","EpicsSortableDirective","tgEpicsSortable","EpicsTableController","displayVotes","votes","assigned","closed_us","_disablePagination","_loadingEpics","toggleEpicTableOptions","reorderEpic","nextPage","hoverEpicTableOption","timer","hideEpicTableOption","updateViewOptions","EpicsTableDirective","StoryRowController","totalTasksCompleted","story","StoryRowDirective","EpicsService","xhrError","_epics","_page","epicData","epics_order","reorderRelatedUserstory","epicUserstories","userstoryId","replaceEpic","RelatedUserStoriesController","showCreateRelatedUserstoriesLightbox","showRelatedUserStoriesSection","userCanSort","loadRelatedUserstories","RelatedUserstoriesCreateController","projectUserstories","filterUss","saveRelatedUserStory","selectedUserstoryId","onSavedRelatedUserstory","validateExistingUserstoryForm","setExistingUserstoryFormErrors","bulkCreateRelatedUserStories","userstoriesText","onCreatedRelatedUserstory","validateNewUserstoryForm","setNewUserstoryFormErrors","RelatedUserstoriesCreateDirective","newUserstoryForm","existingUserstoryForm","showLightbox","selectedUserstory","searchUserstory","relatedUserstoriesText","onUpdateSearchUserstory","RelatedUserstoriesSortableDirective","tgRelatedUserstoriesSortable","RelatedUserStoriesDirective","RelatedUserstoryRowController","setAvatarData","getAssignedToFullNameDisplay","onDeleteRelatedUserstory","RelatedUserstoryRowDirective","ExternalAppController","externalAppsService","createApplicationToken","_getApplicationToken","_redirect","_applicationId","application","_state","state","_user","_application","loginUrl","loginWithAnotherUserUrl","applicationToken","getApplicationToken","back","authorizeApplicationToken","ExternalAppsService","applicationId","externalapps","FeedbackService","sendFeedback","ActivityService","_contentType","_objectId","loadingEntries","getHistory","historyType","CommentController","permissionService","hiddenDeletedComment","showDeletedComment","hideDeletedComment","checkCancelComment","onEditMode","commentId","canEditDeleteComment","onEditComment","displayCommentHistory","CommentDirective","editing","deleting","onDeleteComment","onRestoreDeletedComment","CommentsController","initializePermissions","canAddCommentPermission","CommentsDirective","comments","reverse","LightboxDisplayHistoricController","_loadHistoric","commentHistoryEntries","LightboxDisplayHistoricDirective","HistoryEntryDirective","HistoryTabsDirective","showCommentTab","showActivityTab","onActiveComments","onActiveActivities","onOrderComments","activeTab","commentsNum","activitiesNum","onReverse","HistorySectionController","viewComments","_loadHistory","_loadComments","_loadActivity","activities","nextActivityPage","showHistorySection","toggleEditMode","onActiveHistoryTab","restoreDeletedComment","addComment","HistorySectionDirective","ActivitiesDiffController","diffTags","diffRemoveTags","diffAddTags","promotedTo","generated_user_stories","HistoryDiffDirective","HistoryDirective","DutyDirective","duty","isHidden","getDutyType","HomeController","HomeService","_attachProjectInfoToWorkInProgress","workInProgress","projectsById","_attachProjectInfoToDuty","_duties","_getValidDutiesAndAttachProjectInfo","assignedTo","watching","duties","dutyType","getWorkInProgress","projectsPromise","getListProjectsByUserId","params_epics","status__is_closed","params_uss","params_tasks","params_issues","assignedEpicsPromise","assignedUserStoriesPromise","assignedTasksPromise","assignedIssuesPromise","watchingEpicsPromise","watchingUserStoriesPromise","watchingTasksPromise","watchingIssuesPromise","HomeProjectListDirective","WorkingOnController","homeService","hiddenAssignedTo","showHiddenAssignedTo","showHiddenWatching","_setAssignedTo","elem","_setWatching","WorkingOnDirective","slot","slots","updateShowHiddenDuties","showHiddenDuties","getShowHiddenDuties","updateHiddenDuties","hiddenDuties","getHiddenDuties","toggleDutyHidden","toggleShowHiddenDuties","InviteMembersFormController","rolesValues","defaultMaxInvites","_areRolesValidated","contactsToInvite","emailsToInvite","_checkLimitMemberships","pendingMembersCount","membersLimit","showWarningMessage","sendInvites","setInvitedContacts","role_id","inviteContactsMessage","InviteMembersFormDirective","onDisplayContactList","onRemoveInvitedContact","onRemoveInvitedEmail","onSendInvites","AddMembersController","userService","displayContactList","_getContacts","excludeProjectId","getContacts","_filterContacts","invited","contact","inviteSuggested","removeContact","testEmptyContacts","inviteEmail","emailData","removeEmail","LightboxAddMembersDirective","SuggestAddMembersController","contactQuery","filterContacts","filteredContacts","setInvited","onInviteSuggested","SuggestAddMembersDirective","onInviteEmail","DropdownNotificationsDirective","notificationsService","notificationsList","newEvent","setAllAsRead","setNotificationsAsRead","DropdownProjectListDirective","newProject","updateLinks","DropdownUserDirective","authService","navUrlsService","isFeedbackEnabled","customSupportUrl","userMenu","NavigationBarDirective","attempts","loadUserPilot","userPilotInterval","isEnabledHeader","userPilotIframe","widget","contentWindow","userPilotTitle","innerText","TAIGA_USER_PILOT_TOKEN","userpilotEnabled","_taigaSendFeedback","NavigationBarService","enabledHeader","NotificationsListDirective","infiniteScrollContainer","infiniteScrollDistance","infiniteScrollDisabled","onlyUnread","NotificationsController","scrollDisabled","initList","loadNotifications","reloadList","getNotificationsList","setAsRead","setNotificationAsRead","$$url","NotificationsService","_notificationTypes","userTimelinePaginationSequenceService","translate_params","title_attr","_getLink","_getUsernameSpan","obj_name","_getNotificationObject","_getDetailObjUrl","getNotifications","_addNotificationAttributes","generate","notificationId","_getType","event_type","_getTitle","projectSectionPath","projectUrl","_translateTitleParams","urlMapping","span","_getParams","notification_type","translation","paramsKeys","ProfileBarController","loadStats","getStats","ProfileBarDirective","ProfileContactsController","loadContacts","ProfileContactsDirective","FavItemDirective","ProfileWatchedController","FavsBaseController","ProfileLikedController","tabName","enableFilterByAll","enableFilterByProjects","enableFilterByEpics","enableFilterByUserStories","enableFilterByTasks","enableFilterByIssues","enableFilterByTextQuery","_getItems","getLiked","ProfileVotedController","getVoted","getWatched","_resetList","_enableLoadingSpinner","_disableLoadingSpinner","_enableScroll","_disableScroll","_checkIfHasMorePages","hasNext","_checkIfHasNoResults","hasNoResults","loadItems","filterByTextQuery","showAll","showProjectsOnly","showEpicsOnly","showUserStoriesOnly","showTasksOnly","showIssuesOnly","ProfileLikedDirective","ProfileVotedDirective","ProfileWatchedDirective","ProfileHints","hintKey","HINTS","hint","linkText","ProfileProjectsController","getProjectsByUserId","attachUserContactsToProjects","ProfileProjectsDirective","ProfileTabDirective","tab","tabIcon","tabActive","tabDisabled","addTab","ProfileTabsController","tabs","toggleTab","ProfileTabsDirective","ProfileController","getUserByUserName","userFullName","userUsername","BlockedProjectExplanationDirective","ContactProjectButtonController","launchContactForm","ContactProjectButtonDirective","layout","ContactProjectLbController","contactProject","sendingFeedback","ContactProjectLbDirective","inject","LikeProjectButtonController","likeButtonService","isMouseOver","showTextWhenMouseIsOver","showTextWhenMouseIsLeave","toggleLike","_unlike","_like","like","unlike","LikeProjectButtonDirective","LikeProjectButtonService","_getProjectIndex","_updateProjects","isFan","projectIndex","totalFans","is_fan","total_fans","setProjects","_updateCurrentProject","setProject","likeProject","unlikeProject","SortProjectsDirective","sortData","sorted_project_ids","bulkUpdateProjectsOrder","WatchProjectButtonController","watchButtonService","showWatchOptions","toggleWatcherOptions","closeWatcherOptions","notifyLevel","WatchProjectButtonDirective","WatchProjectButtonService","isWatcher","totalWatchers","is_watcher","total_watchers","watchProject","unwatchProject","AsanaImportProjectFormController","canCreatePublicProjects","projectForm","platformName","keepExternalReference","project_type","checkUsersLimit","limitMembersPrivateProject","canAddMembersPrivateProject","limitMembersPublicProject","canAddMembersPublicProject","saveForm","onSaveProjectDetails","canCreateProject","isDisabled","AsanaImportProjectFormDirective","onCancelForm","fetchingUsers","AsanaImportController","asanaImportService","importProjectService","projectUsers","startProjectSelector","fetchProjects","onSelectProject","fetchUsers","onCancelMemberSelection","startImport","importProject","importPromise","submitUserSelection","AsanaImportDirective","AsanaImportService","asanaImporter","listProjects","listUsers","userBindings","projectType","getAuthUrl","authUrl","authorize","CreatetProjectFormController","errorList","creation_template","formSubmitLoading","CreateProjectFormDirective","createProjectMembersRestrictionsDirective","createProjectRestrictionsDirective","CreateProjectController","displayScrumDesc","dontAsk","displayOnPremise","displayHelp","displayKanbanDesc","DuplicateProjectController","refreshReferenceProject","getProjectBySlug","referenceProject","invitedMembers","toggleInvitedMember","duplicate","DuplicateProjectDirective","GithubImportProjectFormController","GithubImportProjectFormDirective","GithubImportController","githubImportService","GithubImportDirective","GithubImportService","githubImporter","callbackUri","ImportProjectMembersController","selectImportUserLightbox","warningImportUsers","displayEmailSelector","cancelledUsers","selectedUsers","selectableUsers","userContacts","fetchUser","refreshSelectableUsers","searchUser","searchingUser","beforeSubmitUsers","confirmUser","externalUser","taigaUser","discardSuggestedUser","unselectUser","getSelectedMember","isMemberSelected","userSelected","showSuggestedMatch","getDistinctSelectedTaigaUsers","ids","importMoreUsersDisabled","isImportMoreUsersDisabled","ImportProjectMembersDirective","platform","ImportProjectSelectorController","ImportProjectSelectorDirective","noProjectsMsg","ImportTaigaController","importTaiga","ImportTaigaDirective","LbImportErrorDirective","ImportProjectController","trelloService","jiraService","githubService","asanaService","tgNavUrls","jiraOauthVerifier","trelloOauthToken","from","asanaOauthToken","cancelCurrentImport","oauth_verifier","githubOauthToken","oauth_token","jiraUrl","err","absUrl","unfoldOptions","unfoldedOptions","isActiveImporter","backToCreate","ImportProjectDirective","onCancelImport","ImportProjectService","importSuccess","importError","restrictionError","getRestrictionError","error_message","errorKey","maxMemberships","membersError","publicError","privateError","InviteMembersController","InviteMembersDirective","onToggleInvitedMember","SingleMemberDirective","JiraImportProjectFormController","importer_type","create_subissues","JiraImportProjectFormDirective","JiraImportController","jiraImportService","JiraImportDirective","JiraImportService","jiraImporter","importerType","NewsletterEmailLightboxDirective","$storageService","openNewsletter","onSelectUser","preference","userEmail","setEmail","SelectImportUserLightboxCtrl","invalid","assignUser","SelectImportUserLightboxDirective","TrelloImportProjectFormController","TrelloImportProjectFormDirective","TrelloImportController","trelloImportService","TrelloImportDirective","TrelloImportService","trelloImporter","verifyCode","WarningUserImportDirective","onConfirm","ProjectsListingController","ProjectRouterController","getProjectHomepage","gotoDefaultProjectHomepage","homepage","ProjectController","activeMembers","registerUrl","ProjectsService","getProjectStats","paginate","transferValidateToken","transferAccept","reason","transferReject","CantOwnProjectExplanationDirective","TransferProject","showAddComment","_refreshUserData","_validateToken","_setProjectData","_checkOwnerData","canBeOwnedByUser","canOwnProject","ownerMessage","maxProjects","currentProjects","validNumberOfMemberships","loadingAccept","loadingReject","hideComment","TransferProjectDirective","Resource","urlsService","urlname","object_id","x-disable-pagination","bulkAttachments","after_attachment_id","bulk_attachments","progressMessage","progressPercent","AsanaResource","GithubResource","JiraResource","TrelloResource","users_bindings","keep_external_reference","jira_url","projectTemplate","requestParams","paginateResponseService","pagination","x-lazy-pagination","slight","getTimeline","only_relevant","services","Resources","$injector","serviceName","serviceProperty","serviceFn","getUserByUsername","exclude_project","getProfileTimeline","getUserTimeline","listAllInProject","epicIid","AppMetaService","_set","meta","setTitle","setDescription","setTwitterMetas","origin","setOpenGraphMetas","listener","_listener","metas","AttachmentsService","getMaxFileSize","maxFileSizeFormated","sizeError","saveError","AvatarService","IMAGES","COLORS","logos","getDefault","murmurhash3_32_gc","getUnnamed","avatarParamName","gravatar","root","photo","gravatar_id","CheckPermissionsService","CurrentUserService","storageService","_projects","_projectsById","_joyride","_loadUserInfo","loadProjectsList","totalMembers","membersResult","ErrorHandlingService","errorHandling","showingError","blocked","LightboxFactory","scopeAttrs","PaginateResponse","ProjectLogoService","ProjectService","userActivityService","manageProjectSignal","_project","_section","_sectionsBreadcrumb","_activeMembers","e2e","autoRefresh","watchSignals","signal","fetchRequiredSignals","intervalId","onInactive","onActive","ThemeService","themeName","stylesheetEl","UserActivityService","resetTimer","subscriptionsActive","subscriptionsInactive","isActive","startTimer","idleTimeout","timerId","_fireInactive","_fireActive","_unSubscriptionsActive","_unSubscriptionsInactive","UserListService","excludedUser","UserService","pageNumber","objectType","textQuery","contactsFiltered","contactId","UserTimelineAttachmentDirective","validFileExtensions","extension","templateHtml","UserTimelineItemTitle","_fieldTranslationKey","description_diff","timeline","field_name","new_value","sprint_name","us_name","_getTimelineObj","event_us","related_us_name","epic_name","role_name","keySeq","parent_userstory","timeline_type","getTitle","UserTimelineType","getType","hasIn","UserTimelineItemDirective","UserTimelinePaginationSequence","getContent","minItems","UserTimelineController","userTimelineService","timelineList","getProjectTimeline","loadTimeline","UserTimelineDirective","UserTimelineService","userTimelineItemType","userTimelineItemTitle","_valid_fields","_invalid","value_diff","fieldKey","_isInValidTimeline","_parseEventType","_getTimelineObject","_attachExtraInfoToTimelineEntry","_parseTimeline","newdata","values_diff","moveInBacklog","deleteIn","newItem","_addEntyAttributes","filterNot","IsolateClickDirective","WikiHistoryDiffDirective","WikiHistoryEntryDirective","singleHistoryEntry","historyEntry","WikiHistoryController","initializeHistory","loadHistory","WikiHistoryDirective"],"mappings":"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"}