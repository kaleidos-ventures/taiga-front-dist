{"version":3,"file":"../app.js","sources":["app.js"],"sourcesContent":["\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var configure, i18nInit, init, module, modules, pluginsModules, pluginsWithModule, taiga;\n\n  this.taiga = taiga = {};\n\n  taiga.emojis = window.emojis;\n\n  this.taigaContribPlugins = this.taigaContribPlugins || window.taigaContribPlugins || [];\n\n  taiga.generateHash = function(components) {\n    if (components == null) {\n      components = [];\n    }\n    components = _.map(components, function(x) {\n      return JSON.stringify(x);\n    });\n    return hex_sha1(components.join(\":\"));\n  };\n\n  taiga.generateUniqueSessionIdentifier = function() {\n    var date, randomNumber;\n    date = (new Date()).getTime();\n    randomNumber = Math.floor(Math.random() * 0x9000000);\n    return taiga.generateHash([date, randomNumber]);\n  };\n\n  taiga.sessionId = taiga.generateUniqueSessionIdentifier();\n\n  configure = function($routeProvider, $locationProvider, $httpProvider, $provide, $tgEventsProvider, $compileProvider, $translateProvider, $translatePartialLoaderProvider, $animateProvider, $logProvider) {\n    var authHttpIntercept, blockingIntercept, decorators, defaultHeaders, loaderIntercept, originalWhen, preferedLangCode, userInfo, versionCheckHttpIntercept;\n    $animateProvider.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/);\n    originalWhen = $routeProvider.when;\n    $routeProvider.when = function(path, route) {\n      route.resolve || (route.resolve = {});\n      angular.extend(route.resolve, {\n        languageLoad: [\n          \"$q\", \"$translate\", function($q, $translate) {\n            var deferred;\n            deferred = $q.defer();\n            $translate(\"COMMON.YES\").then(function() {\n              return deferred.resolve();\n            });\n            return deferred.promise;\n          }\n        ],\n        projectLoaded: [\n          \"$q\", \"tgProjectService\", \"$route\", function($q, projectService, $route) {\n            var deferred, ref;\n            deferred = $q.defer();\n            projectService.setSection((ref = $route.current.$$route) != null ? ref.section : void 0);\n            if ($route.current.params.pslug) {\n              projectService.setProjectBySlug($route.current.params.pslug).then(deferred.resolve);\n            } else {\n              projectService.cleanProject();\n              deferred.resolve();\n            }\n            return deferred.promise;\n          }\n        ]\n      });\n      return originalWhen.call($routeProvider, path, route);\n    };\n    $routeProvider.when(\"/\", {\n      templateUrl: \"home/home.html\",\n      controller: \"Home\",\n      controllerAs: \"vm\",\n      loader: true,\n      title: \"HOME.PAGE_TITLE\",\n      loader: true,\n      description: \"HOME.PAGE_DESCRIPTION\",\n      joyride: \"dashboard\"\n    });\n    $routeProvider.when(\"/discover\", {\n      templateUrl: \"discover/discover-home/discover-home.html\",\n      controller: \"DiscoverHome\",\n      controllerAs: \"vm\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true\n    });\n    $routeProvider.when(\"/discover/search\", {\n      templateUrl: \"discover/discover-search/discover-search.html\",\n      title: \"PROJECT.NAVIGATION.DISCOVER\",\n      loader: true,\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      reloadOnSearch: false\n    });\n    $routeProvider.when(\"/projects/\", {\n      templateUrl: \"projects/listing/projects-listing.html\",\n      access: {\n        requiresLogin: true\n      },\n      title: \"PROJECTS.PAGE_TITLE\",\n      description: \"PROJECTS.PAGE_DESCRIPTION\",\n      loader: true,\n      controller: \"ProjectsListing\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      templateUrl: \"projects/create/create-project.html\",\n      loader: true,\n      controller: \"CreateProjectCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/new/scrum\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"scrum\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/kanban\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-create-project-form type=\\\"kanban\\\"></tg-create-project-form>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/duplicate\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-duplicate-project></tg-duplicate-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/new/import/:platform?\", {\n      title: \"PROJECT.CREATE.TITLE\",\n      template: \"<tg-import-project></tg-import-project>\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/\", {\n      template: \"\",\n      loader: true,\n      controller: \"ProjectRouter\"\n    });\n    $routeProvider.when(\"/project/:pslug/timeline\", {\n      templateUrl: \"projects/project/project.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\",\n      section: \"project-timeline\"\n    });\n    $routeProvider.when(\"/project/:pslug/t/:ref\", {\n      loader: true,\n      controller: \"DetailController\",\n      template: \"\"\n    });\n    $routeProvider.when(\"/project/:pslug/search\", {\n      templateUrl: \"search/search.html\",\n      reloadOnSearch: false,\n      section: \"search\",\n      loader: true\n    });\n    $routeProvider.when(\"/project/:pslug/epics\", {\n      section: \"epics\",\n      templateUrl: \"epics/dashboard/epics-dashboard.html\",\n      loader: true,\n      controller: \"EpicsDashboardCtrl\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/project/:pslug/epic/:epicref\", {\n      templateUrl: \"epic/epic-detail.html\",\n      loader: true,\n      section: \"epics\"\n    });\n    $routeProvider.when(\"/project/:pslug/backlog\", {\n      templateUrl: \"backlog/backlog.html\",\n      loader: true,\n      section: \"backlog\",\n      joyride: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/kanban\", {\n      templateUrl: \"kanban/kanban.html\",\n      loader: true,\n      section: \"kanban\",\n      joyride: \"kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/taskboard/:sslug\", {\n      templateUrl: \"taskboard/taskboard.html\",\n      loader: true,\n      section: \"backlog\"\n    });\n    $routeProvider.when(\"/project/:pslug/us/:usref\", {\n      templateUrl: \"us/us-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/task/:taskref\", {\n      templateUrl: \"task/task-detail.html\",\n      loader: true,\n      section: \"backlog-kanban\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki\", {\n      redirectTo: function(params) {\n        return \"/project/\" + params.pslug + \"/wiki/home\";\n      }\n    });\n    $routeProvider.when(\"/project/:pslug/wiki-list\", {\n      templateUrl: \"wiki/wiki-list.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/wiki/:slug\", {\n      templateUrl: \"wiki/wiki.html\",\n      loader: true,\n      section: \"wiki\"\n    });\n    $routeProvider.when(\"/project/:pslug/team\", {\n      templateUrl: \"team/team.html\",\n      loader: true,\n      section: \"team\"\n    });\n    $routeProvider.when(\"/project/:pslug/issues\", {\n      templateUrl: \"issue/issues.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/issue/:issueref\", {\n      templateUrl: \"issue/issues-detail.html\",\n      loader: true,\n      section: \"issues\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/details\", {\n      templateUrl: \"admin/admin-project-profile.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/default-values\", {\n      templateUrl: \"admin/admin-project-default-values.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/modules\", {\n      templateUrl: \"admin/admin-project-modules.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/export\", {\n      templateUrl: \"admin/admin-project-export.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-profile/reports\", {\n      templateUrl: \"admin/admin-project-reports.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/status\", {\n      templateUrl: \"admin/admin-project-values-status.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/points\", {\n      templateUrl: \"admin/admin-project-values-points.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/priorities\", {\n      templateUrl: \"admin/admin-project-values-priorities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/severities\", {\n      templateUrl: \"admin/admin-project-values-severities.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/types\", {\n      templateUrl: \"admin/admin-project-values-types.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/custom-fields\", {\n      templateUrl: \"admin/admin-project-values-custom-fields.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/tags\", {\n      templateUrl: \"admin/admin-project-values-tags.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/due-dates\", {\n      templateUrl: \"admin/admin-project-values-due-dates.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/project-values/kanban-power-ups\", {\n      templateUrl: \"admin/admin-project-values-kanban-power-ups.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/memberships\", {\n      templateUrl: \"admin/admin-memberships.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/roles\", {\n      templateUrl: \"admin/admin-roles.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/webhooks\", {\n      templateUrl: \"admin/admin-third-parties-webhooks.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/github\", {\n      templateUrl: \"admin/admin-third-parties-github.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gitlab\", {\n      templateUrl: \"admin/admin-third-parties-gitlab.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/bitbucket\", {\n      templateUrl: \"admin/admin-third-parties-bitbucket.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/third-parties/gogs\", {\n      templateUrl: \"admin/admin-third-parties-gogs.html\",\n      section: \"admin\"\n    });\n    $routeProvider.when(\"/project/:pslug/admin/contrib/:plugin\", {\n      templateUrl: \"contrib/main.html\"\n    });\n    $routeProvider.when(\"/project/:pslug/transfer/:token\", {\n      templateUrl: \"projects/transfer/transfer-page.html\",\n      loader: true,\n      controller: \"Project\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/user-settings/user-profile\", {\n      templateUrl: \"user/user-profile.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-change-password\", {\n      templateUrl: \"user/user-change-password.html\"\n    });\n    $routeProvider.when(\"/user-settings/user-project-settings\", {\n      templateUrl: \"user/user-project-settings.html\"\n    });\n    $routeProvider.when(\"/user-settings/mail-notifications\", {\n      templateUrl: \"user/mail-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/live-notifications\", {\n      templateUrl: \"user/live-notifications.html\"\n    });\n    $routeProvider.when(\"/user-settings/web-notifications\", {\n      templateUrl: \"user/web-notifications.html\"\n    });\n    $routeProvider.when(\"/change-email/:email_token\", {\n      templateUrl: \"user/change-email.html\"\n    });\n    $routeProvider.when(\"/verify-email/:email_token\", {\n      templateUrl: \"user/verify-email.html\"\n    });\n    $routeProvider.when(\"/cancel-account/:cancel_token\", {\n      templateUrl: \"user/cancel-account.html\"\n    });\n    $routeProvider.when(\"/user-settings/contrib/:plugin\", {\n      templateUrl: \"contrib/user-settings.html\"\n    });\n    $routeProvider.when(\"/profile\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/notifications\", {\n      templateUrl: \"notifications/notifications.html\",\n      loader: true,\n      access: {\n        requiresLogin: true\n      },\n      controller: \"Notifications\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/profile/:slug\", {\n      templateUrl: \"profile/profile.html\",\n      loader: true,\n      controller: \"Profile\",\n      controllerAs: \"vm\"\n    });\n    $routeProvider.when(\"/login\", {\n      templateUrl: \"auth/login.html\",\n      title: \"LOGIN.PAGE_TITLE\",\n      description: \"LOGIN.PAGE_DESCRIPTION\",\n      disableHeader: true,\n      controller: \"LoginPage\"\n    });\n    if (window.taigaConfig.publicRegisterEnabled) {\n      $routeProvider.when(\"/register\", {\n        templateUrl: \"auth/register.html\",\n        title: \"REGISTER.PAGE_TITLE\",\n        description: \"REGISTER.PAGE_DESCRIPTION\",\n        disableHeader: true\n      });\n    }\n    $routeProvider.when(\"/forgot-password\", {\n      templateUrl: \"auth/forgot-password.html\",\n      title: \"FORGOT_PASSWORD.PAGE_TITLE\",\n      description: \"FORGOT_PASSWORD.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/change-password/:token\", {\n      templateUrl: \"auth/change-password-from-recovery.html\",\n      title: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      description: \"CHANGE_PASSWORD.PAGE_TITLE\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/invitation/:token\", {\n      templateUrl: \"auth/invitation.html\",\n      title: \"INVITATION.PAGE_TITLE\",\n      description: \"INVITATION.PAGE_DESCRIPTION\",\n      disableHeader: true\n    });\n    $routeProvider.when(\"/external-apps\", {\n      templateUrl: \"external-apps/external-app.html\",\n      title: \"EXTERNAL_APP.PAGE_TITLE\",\n      description: \"EXTERNAL_APP.PAGE_DESCRIPTION\",\n      controller: \"ExternalApp\",\n      controllerAs: \"vm\",\n      disableHeader: true,\n      mobileViewport: true\n    });\n    $routeProvider.when(\"/blocked-project/:pslug/\", {\n      templateUrl: \"projects/project/blocked-project.html\",\n      loader: true\n    });\n    $routeProvider.when(\"/error\", {\n      templateUrl: \"error/error.html\"\n    });\n    $routeProvider.when(\"/not-found\", {\n      templateUrl: \"error/not-found.html\"\n    });\n    $routeProvider.when(\"/permission-denied\", {\n      templateUrl: \"error/permission-denied.html\"\n    });\n    $routeProvider.otherwise({\n      templateUrl: \"error/not-found.html\"\n    });\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: false\n    });\n    defaultHeaders = {\n      \"Content-Type\": \"application/json\",\n      \"Accept-Language\": window.taigaConfig.defaultLanguage || \"en\",\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.defaults.headers[\"delete\"] = defaultHeaders;\n    $httpProvider.defaults.headers.patch = defaultHeaders;\n    $httpProvider.defaults.headers.post = defaultHeaders;\n    $httpProvider.defaults.headers.put = defaultHeaders;\n    $httpProvider.defaults.headers.get = {\n      \"X-Session-Id\": taiga.sessionId\n    };\n    $httpProvider.useApplyAsync(true);\n    $tgEventsProvider.setSessionId(taiga.sessionId);\n    authHttpIntercept = function($q, $location, $navUrls, $lightboxService, errorHandlingService) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var nextUrl, search;\n        if (response.status === 0 || (response.status === -1 && !response.config.cancelable)) {\n          $lightboxService.closeAll();\n          errorHandlingService.error();\n        } else if (response.status === 401 && $location.url().indexOf('/login') === -1) {\n          nextUrl = $location.url();\n          search = $location.search();\n          if (search.force_next) {\n            $location.url($navUrls.resolve(\"login\")).search(\"force_next\", search.force_next);\n          } else {\n            $location.url($navUrls.resolve(\"login\")).search({\n              \"unauthorized\": true,\n              \"next\": nextUrl\n            });\n          }\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"authHttpIntercept\", [\"$q\", \"$location\", \"$tgNavUrls\", \"lightboxService\", \"tgErrorHandlingService\", authHttpIntercept]);\n    $httpProvider.interceptors.push(\"authHttpIntercept\");\n    loaderIntercept = function($q, loaderService) {\n      return {\n        request: function(config) {\n          loaderService.logRequest();\n          return config;\n        },\n        requestError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        responseError: function(rejection) {\n          loaderService.logResponse();\n          return $q.reject(rejection);\n        },\n        response: function(response) {\n          loaderService.logResponse();\n          return response;\n        }\n      };\n    };\n    $provide.factory(\"loaderIntercept\", [\"$q\", \"tgLoader\", loaderIntercept]);\n    $httpProvider.interceptors.push(\"loaderIntercept\");\n    versionCheckHttpIntercept = function($q) {\n      var httpResponseError;\n      httpResponseError = function(response) {\n        var $injector;\n        if (response.status === 400 && response.data.version) {\n          $injector = angular.element(\"body\").injector();\n          $injector.invoke([\n            \"$tgConfirm\", \"$translate\", (function(_this) {\n              return function($confirm, $translate) {\n                var versionErrorMsg;\n                versionErrorMsg = $translate.instant(\"ERROR.VERSION_ERROR\");\n                return $confirm.notify(\"error\", versionErrorMsg, null, 10000);\n              };\n            })(this)\n          ]);\n        }\n        return $q.reject(response);\n      };\n      return {\n        responseError: httpResponseError\n      };\n    };\n    $provide.factory(\"versionCheckHttpIntercept\", [\"$q\", versionCheckHttpIntercept]);\n    $httpProvider.interceptors.push(\"versionCheckHttpIntercept\");\n    blockingIntercept = function($q, errorHandlingService) {\n      var redirectToBlockedPage, responseError, responseOk;\n      redirectToBlockedPage = function() {\n        return errorHandlingService.block();\n      };\n      responseOk = function(response) {\n        if (response.data.blocked_code) {\n          redirectToBlockedPage();\n        }\n        return response;\n      };\n      responseError = function(response) {\n        if (response.status === 451) {\n          redirectToBlockedPage();\n        }\n        return $q.reject(response);\n      };\n      return {\n        response: responseOk,\n        responseError: responseError\n      };\n    };\n    $provide.factory(\"blockingIntercept\", [\"$q\", \"tgErrorHandlingService\", blockingIntercept]);\n    $httpProvider.interceptors.push(\"blockingIntercept\");\n    $compileProvider.debugInfoEnabled(window.taigaConfig.debugInfo || false);\n    if (localStorage.userInfo) {\n      userInfo = JSON.parse(localStorage.userInfo);\n    }\n    preferedLangCode = (userInfo != null ? userInfo.lang : void 0) || window.taigaConfig.defaultLanguage || \"en\";\n    $translatePartialLoaderProvider.addPart('taiga');\n    $translateProvider.useLoader('$translatePartialLoader', {\n      urlTemplate: '/' + window._version + '/locales/{part}/locale-{lang}.json'\n    }).useSanitizeValueStrategy('escapeParameters').addInterpolation('$translateMessageFormatInterpolation').preferredLanguage(preferedLangCode).useMissingTranslationHandlerLog();\n    $translateProvider.fallbackLanguage(preferedLangCode);\n    decorators = window.getDecorators();\n    _.each(decorators, function(decorator) {\n      return $provide.decorator(decorator.provider, decorator.decorator);\n    });\n    $logProvider.debugEnabled(window.taigaConfig.debug);\n    if (window.taigaConfig.debug) {\n      return console.info(\"Debug mode is enable\");\n    }\n  };\n\n  i18nInit = function(lang, $translate) {\n    var messages;\n    moment.locale(lang);\n    document.querySelector('html').setAttribute('lang', lang);\n    if (lang !== 'en') {\n      ljs.load((\"/\" + window._version + \"/locales/moment-locales/\") + lang + \".js\");\n    }\n    messages = {\n      defaultMessage: $translate.instant(\"COMMON.FORM_ERRORS.DEFAULT_MESSAGE\"),\n      type: {\n        email: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_EMAIL\"),\n        url: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URL\"),\n        urlstrict: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_URLSTRICT\"),\n        number: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_NUMBER\"),\n        digits: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DIGITS\"),\n        dateIso: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_DATEISO\"),\n        alphanum: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_ALPHANUM\"),\n        phone: $translate.instant(\"COMMON.FORM_ERRORS.TYPE_PHONE\")\n      },\n      notnull: $translate.instant(\"COMMON.FORM_ERRORS.NOTNULL\"),\n      notblank: $translate.instant(\"COMMON.FORM_ERRORS.NOT_BLANK\"),\n      required: $translate.instant(\"COMMON.FORM_ERRORS.REQUIRED\"),\n      regexp: $translate.instant(\"COMMON.FORM_ERRORS.REGEXP\"),\n      min: $translate.instant(\"COMMON.FORM_ERRORS.MIN\"),\n      max: $translate.instant(\"COMMON.FORM_ERRORS.MAX\"),\n      range: $translate.instant(\"COMMON.FORM_ERRORS.RANGE\"),\n      minlength: $translate.instant(\"COMMON.FORM_ERRORS.MIN_LENGTH\"),\n      maxlength: $translate.instant(\"COMMON.FORM_ERRORS.MAX_LENGTH\"),\n      rangelength: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_LENGTH\"),\n      mincheck: $translate.instant(\"COMMON.FORM_ERRORS.MIN_CHECK\"),\n      maxcheck: $translate.instant(\"COMMON.FORM_ERRORS.MAX_CHECK\"),\n      rangecheck: $translate.instant(\"COMMON.FORM_ERRORS.RANGE_CHECK\"),\n      equalto: $translate.instant(\"COMMON.FORM_ERRORS.EQUAL_TO\"),\n      linewidth: $translate.instant(\"COMMON.FORM_ERRORS.LINEWIDTH\"),\n      pikaday: $translate.instant(\"COMMON.FORM_ERRORS.PIKADAY\")\n    };\n    return checksley.updateMessages('default', messages);\n  };\n\n  init = function($log, $rootscope, $auth, $events, $analytics, $tagManager, $userPilot, $translate, $location, $navUrls, appMetaService, loaderService, navigationBarService, errorHandlingService, lightboxService, $tgConfig, projectService) {\n    var lang, un, user, validators;\n    $log.debug(\"Initialize application\");\n    $rootscope.$on('$translatePartialLoaderStructureChanged', function() {\n      return $translate.refresh();\n    });\n    validators = {\n      linewidth: function(val, width) {\n        var lines, valid;\n        lines = taiga.nl2br(val).split(\"<br />\");\n        valid = _.every(lines, function(line) {\n          return line.length < width;\n        });\n        return valid;\n      },\n      pikaday: function(val) {\n        var prettyDate;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        return moment(val, prettyDate).isValid();\n      },\n      url: function(val) {\n        var re_weburl;\n        re_weburl = new RegExp(\"^\" + \"(?:(?:https?|ftp)://)\" + \"(?:\\\\S+(?::\\\\S*)?@)?\" + \"(?:\" + \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" + \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" + \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" + \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" + \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" + \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" + \"|\" + \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" + \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" + \"\\\\.?\" + \")\" + \"(?::\\\\d{2,5})?\" + \"(?:[/?#]\\\\S*)?\" + \"$\", \"i\");\n        return re_weburl.test(val);\n      }\n    };\n    checksley.updateValidators(validators);\n    $rootscope.contribPlugins = this.taigaContribPlugins;\n    $rootscope.adminPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"admin\"\n    });\n    $rootscope.authPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"auth\"\n    });\n    $rootscope.userSettingsPlugins = _.filter(this.taigaContribPlugins, {\n      \"type\": \"userSettings\"\n    });\n    lang = null;\n    $rootscope.$on(\"$translateChangeEnd\", function(e, ctx) {\n      var legacy, rtlLanguages;\n      if (lang !== ctx.language) {\n        lang = ctx.language;\n        i18nInit(lang, $translate);\n        rtlLanguages = $tgConfig.get(\"rtlLanguages\", []);\n        $rootscope.isRTL = rtlLanguages.indexOf(lang) > -1;\n        legacy = document.querySelector('tg-legacy');\n        return legacy.translations = {\n          translationTable: $translate.getTranslationTable(lang),\n          lan: lang\n        };\n      }\n    });\n    $events.setupConnection();\n    if ($auth.isAuthenticated()) {\n      user = $auth.getUser();\n    }\n    $analytics.initialize();\n    $tagManager.initialize();\n    $userPilot.initialize();\n    $userPilot.identify();\n    $rootscope.$on('$locationChangeStart', function(event) {\n      errorHandlingService.init();\n      if (lightboxService.getLightboxOpen().length) {\n        event.preventDefault();\n        return lightboxService.closeAll();\n      }\n    });\n    un = $rootscope.$on('$routeChangeStart', function(event, next) {\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      return un();\n    });\n    return $rootscope.$on('$routeChangeSuccess', function(event, next) {\n      var description, ref, title;\n      if ((ref = projectService.project) != null ? ref.get('blocked_code') : void 0) {\n        errorHandlingService.block();\n      }\n      if (next.loader) {\n        loaderService.start(true);\n      }\n      if (next.access && next.access.requiresLogin) {\n        if (!$auth.isAuthenticated()) {\n          $location.path($navUrls.resolve(\"login\"));\n        }\n      }\n      if (next.title || next.description) {\n        title = $translate.instant(next.title || \"\");\n        description = $translate.instant(next.description || \"\");\n        appMetaService.setAll(title, description);\n      }\n      if (next.mobileViewport) {\n        appMetaService.addMobileViewport();\n      } else {\n        appMetaService.removeMobileViewport();\n      }\n      if (next.disableHeader) {\n        return navigationBarService.disableHeader();\n      } else {\n        return navigationBarService.enableHeader();\n      }\n    });\n  };\n\n  angular.module('infinite-scroll').value('THROTTLE_MILLISECONDS', 500);\n\n  pluginsWithModule = _.filter(this.taigaContribPlugins, function(plugin) {\n    return plugin.module;\n  });\n\n  pluginsModules = _.map(pluginsWithModule, function(plugin) {\n    return plugin.module;\n  });\n\n  modules = [\"taigaBase\", \"taigaCommon\", \"taigaResources\", \"taigaResources2\", \"taigaAuth\", \"taigaEvents\", \"taigaHome\", \"taigaNavigationBar\", \"taigaProjects\", \"taigaRelatedTasks\", \"taigaBacklog\", \"taigaTaskboard\", \"taigaKanban\", \"taigaIssues\", \"taigaUserStories\", \"taigaTasks\", \"taigaTeam\", \"taigaWiki\", \"taigaSearch\", \"taigaAdmin\", \"taigaProject\", \"taigaUserSettings\", \"taigaFeedback\", \"taigaPlugins\", \"taigaIntegrations\", \"taigaComponents\", \"taigaProfile\", \"taigaHome\", \"taigaUserTimeline\", \"taigaExternalApps\", \"taigaDiscover\", \"taigaHistory\", \"taigaNotifications\", \"taigaWikiHistory\", \"taigaEpics\", \"taigaUtils\", \"templates\", \"ngSanitize\", \"ngRoute\", \"ngAnimate\", \"ngAria\", \"pascalprecht.translate\", \"infinite-scroll\", \"tgRepeat\"].concat(pluginsModules);\n\n  module = angular.module(\"taiga\", modules);\n\n  module.config([\"$routeProvider\", \"$locationProvider\", \"$httpProvider\", \"$provide\", \"$tgEventsProvider\", \"$compileProvider\", \"$translateProvider\", \"$translatePartialLoaderProvider\", \"$animateProvider\", \"$logProvider\", configure]);\n\n  module.run([\"$log\", \"$rootScope\", \"$tgAuth\", \"$tgEvents\", \"$tgAnalytics\", \"$tgTagManager\", \"$tgUserPilot\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"tgLoader\", \"tgNavigationBarService\", \"tgErrorHandlingService\", \"lightboxService\", \"$tgConfig\", \"tgProjectService\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaBase, TaigaController, TaigaService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  TaigaBase = (function() {\n    function TaigaBase() {}\n\n    return TaigaBase;\n\n  })();\n\n  TaigaService = (function(superClass) {\n    extend(TaigaService, superClass);\n\n    function TaigaService() {\n      return TaigaService.__super__.constructor.apply(this, arguments);\n    }\n\n    return TaigaService;\n\n  })(TaigaBase);\n\n  TaigaController = (function(superClass) {\n    extend(TaigaController, superClass);\n\n    function TaigaController() {\n      this.onInitialDataError = bind(this.onInitialDataError, this);\n      return TaigaController.__super__.constructor.apply(this, arguments);\n    }\n\n    TaigaController.prototype.onInitialDataError = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.errorHandlingService.notfound();\n        } else if (xhr.status === 403) {\n          this.errorHandlingService.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return TaigaController;\n\n  })(TaigaBase);\n\n  this.taiga.Base = TaigaBase;\n\n  this.taiga.Service = TaigaService;\n\n  this.taiga.Controller = TaigaController;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DEFAULT_COLOR_LIST, addClass, bindMethods, bindOnce, cancelTimeout, debounce, debounceLeading, defineImmutableProperty, getDefaulColorList, getMatches, getRandomDefaultColor, groupBy, isEmail, isImage, isPdf, joinStr, mixOf, nl2br, normalizeString, patch, randomInt, replaceTags, scopeDefer, sizeFormat, slugify, startswith, stripTags, taiga, timeout, toString, toggleText, trim, truncate, unslugify,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  addClass = function(el, className) {\n    if (el.classList) {\n      return el.classList.add(className);\n    } else {\n      return el.className += ' ' + className;\n    }\n  };\n\n  nl2br = (function(_this) {\n    return function(str) {\n      var breakTag;\n      breakTag = '<br />';\n      return (str + '').replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1' + breakTag + '$2');\n    };\n  })(this);\n\n  bindMethods = (function(_this) {\n    return function(object) {\n      var dependencies, methods;\n      dependencies = _.keys(object);\n      methods = [];\n      _.forIn(object, function(value, key) {\n        if (indexOf.call(dependencies, key) < 0 && _.isFunction(value)) {\n          return methods.push(key);\n        }\n      });\n      return _.bindAll(object, methods);\n    };\n  })(this);\n\n  bindOnce = (function(_this) {\n    return function(scope, attr, continuation) {\n      var delBind, val;\n      val = scope.$eval(attr);\n      if (val !== void 0) {\n        return continuation(val);\n      }\n      delBind = null;\n      return delBind = scope.$watch(attr, function(val) {\n        if (val === void 0) {\n          return;\n        }\n        continuation(val);\n        if (delBind) {\n          return delBind();\n        }\n      });\n    };\n  })(this);\n\n  mixOf = function() {\n    var Mixed, base, i, method, mixin, mixins, name, ref;\n    base = arguments[0], mixins = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    Mixed = (function(superClass) {\n      extend(Mixed, superClass);\n\n      function Mixed() {\n        return Mixed.__super__.constructor.apply(this, arguments);\n      }\n\n      return Mixed;\n\n    })(base);\n    for (i = mixins.length - 1; i >= 0; i += -1) {\n      mixin = mixins[i];\n      ref = mixin.prototype;\n      for (name in ref) {\n        method = ref[name];\n        Mixed.prototype[name] = method;\n      }\n    }\n    return Mixed;\n  };\n\n  trim = function(data, char) {\n    return _.trim(data, char);\n  };\n\n  slugify = function(data) {\n    return data.toString().toLowerCase().trim().replace(/\\s+/g, '-').replace(/&/g, '-and-').replace(/[^\\w\\-]+/g, '').replace(/\\-\\-+/g, '-');\n  };\n\n  unslugify = function(data) {\n    if (data) {\n      return _.capitalize(data.replace(/-/g, ' '));\n    }\n    return data;\n  };\n\n  toggleText = function(element, texts) {\n    var nextTextPosition, text;\n    nextTextPosition = element.data('nextTextPosition');\n    if ((nextTextPosition == null) || nextTextPosition >= texts.length) {\n      nextTextPosition = 0;\n    }\n    text = texts[nextTextPosition];\n    element.data('nextTextPosition', nextTextPosition + 1);\n    return element.text(text);\n  };\n\n  groupBy = function(coll, pred) {\n    var i, item, len, result;\n    result = {};\n    for (i = 0, len = coll.length; i < len; i++) {\n      item = coll[i];\n      result[pred(item)] = item;\n    }\n    return result;\n  };\n\n  timeout = function(wait, continuation) {\n    return window.setTimeout(continuation, wait);\n  };\n\n  cancelTimeout = function(timeoutVar) {\n    return window.clearTimeout(timeoutVar);\n  };\n\n  scopeDefer = function(scope, func) {\n    return _.defer((function(_this) {\n      return function() {\n        return scope.$apply(func);\n      };\n    })(this));\n  };\n\n  toString = function(value) {\n    if (_.isNumber(value)) {\n      return value + \"\";\n    } else if (_.isString(value)) {\n      return value;\n    } else if (_.isPlainObject(value)) {\n      return JSON.stringify(value);\n    } else if (_.isUndefined(value)) {\n      return \"\";\n    }\n    return value.toString();\n  };\n\n  joinStr = function(str, coll) {\n    return coll.join(str);\n  };\n\n  debounce = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: true,\n      trailing: false\n    });\n  };\n\n  debounceLeading = function(wait, func) {\n    return _.debounce(func, wait, {\n      leading: false,\n      trailing: true\n    });\n  };\n\n  startswith = function(str1, str2) {\n    return _.startsWith(str1, str2);\n  };\n\n  truncate = function(str, maxLength, suffix) {\n    var out;\n    if (suffix == null) {\n      suffix = \"...\";\n    }\n    if ((typeof str !== \"string\") && !(str instanceof String)) {\n      return str;\n    }\n    out = str.slice(0);\n    if (out.length > maxLength) {\n      out = out.substring(0, maxLength + 1);\n      out = out.substring(0, Math.min(out.length, out.lastIndexOf(\" \")));\n      out = out + suffix;\n    }\n    return out;\n  };\n\n  sizeFormat = function(input, precision) {\n    var number, size, units;\n    if (precision == null) {\n      precision = 1;\n    }\n    if (isNaN(parseFloat(input)) || !isFinite(input)) {\n      return \"-\";\n    }\n    if (input === 0) {\n      return \"0 bytes\";\n    }\n    units = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"];\n    number = Math.floor(Math.log(input) / Math.log(1024));\n    if (number > 5) {\n      number = 5;\n    }\n    size = (input / Math.pow(1024, number)).toFixed(precision);\n    return size + \" \" + units[number];\n  };\n\n  stripTags = function(str, exception) {\n    var pattern;\n    if (exception) {\n      pattern = new RegExp('<(?!' + exception + '\\s*\\/?)[^>]+>', 'gi');\n      return String(str).replace(pattern, '');\n    } else {\n      return String(str).replace(/<\\/?[^>]+>/g, '');\n    }\n  };\n\n  replaceTags = function(str, tags, replace) {\n    var pattern;\n    pattern = new RegExp('<(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '<' + replace + '>');\n    pattern = new RegExp('<\\/(' + tags + ')>', 'gi');\n    str = str.replace(pattern, '</' + replace + '>');\n    return str;\n  };\n\n  defineImmutableProperty = (function(_this) {\n    return function(obj, name, fn) {\n      return Object.defineProperty(obj, name, {\n        get: function() {\n          var fn_result;\n          if (!_.isFunction(fn)) {\n            throw \"defineImmutableProperty third param must be a function\";\n          }\n          fn_result = fn();\n          if (fn_result && _.isObject(fn_result)) {\n            if (fn_result.size === void 0) {\n              throw \"defineImmutableProperty must return immutable data\";\n            }\n          }\n          return fn_result;\n        }\n      });\n    };\n  })(this);\n\n  _.mixin({\n    removeKeys: function(obj, keys) {\n      return _.chain([keys]).flatten().reduce(function(obj, key) {\n        delete obj[key];\n        return obj;\n      }, obj).value();\n    },\n    cartesianProduct: function() {\n      return _.reduceRight(arguments, function(a, b) {\n        return _.flatten(_.map(a, function(x) {\n          return _.map(b, function(y) {\n            return [y].concat(x);\n          });\n        }), true);\n      }, [[]]);\n    }\n  });\n\n  isImage = function(name) {\n    return name.match(/\\.(jpe?g|png|gif|gifv|svg|psd|webp)/i) !== null;\n  };\n\n  isEmail = function(name) {\n    return (name != null) && name.match(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/) !== null;\n  };\n\n  isPdf = function(name) {\n    return name.match(/\\.(pdf)/i) !== null;\n  };\n\n  patch = function(oldImmutable, newImmutable) {\n    var pathObj;\n    pathObj = {};\n    newImmutable.forEach(function(newValue, key) {\n      if (newValue !== oldImmutable.get(key)) {\n        if (newValue.toJS) {\n          return pathObj[key] = newValue.toJS();\n        } else {\n          return pathObj[key] = newValue;\n        }\n      }\n    });\n    return pathObj;\n  };\n\n  DEFAULT_COLOR_LIST = ['#D35163', '#D351CF', '#AC51D3', '#8151D3', '#5551D3', '#5178D3', '#78D351', '#51D355', '#51D381', '#51D3AC', '#51CFD3', '#51A3D3', '#A3D350', '#CFD350', '#D3AC50', '#D38050', '#D35450', '#E44057', '#4C566A', '#70728F', '#A9AABC'];\n\n  getRandomDefaultColor = function() {\n    return _.sample(DEFAULT_COLOR_LIST);\n  };\n\n  getDefaulColorList = function() {\n    return _.clone(DEFAULT_COLOR_LIST);\n  };\n\n  getMatches = function(string, regex, index) {\n    var match, matches;\n    index || (index = 1);\n    matches = [];\n    match = null;\n    while (match = regex.exec(string)) {\n      if (index === -1) {\n        matches.push(match);\n      } else {\n        matches.push(match[index]);\n      }\n    }\n    return matches;\n  };\n\n  randomInt = function(start, end) {\n    var interval;\n    interval = end - start;\n    return start + Math.floor(Math.random() * (interval + 1));\n  };\n\n  normalizeString = function(string) {\n    var normalizedString;\n    normalizedString = string;\n    normalizedString = normalizedString.replace(\"Á\", \"A\").replace(\"Ä\", \"A\").replace(\"À\", \"A\");\n    normalizedString = normalizedString.replace(\"É\", \"E\").replace(\"Ë\", \"E\").replace(\"È\", \"E\");\n    normalizedString = normalizedString.replace(\"Í\", \"I\").replace(\"Ï\", \"I\").replace(\"Ì\", \"I\");\n    normalizedString = normalizedString.replace(\"Ó\", \"O\").replace(\"Ö\", \"O\").replace(\"Ò\", \"O\");\n    normalizedString = normalizedString.replace(\"Ú\", \"U\").replace(\"Ü\", \"U\").replace(\"Ù\", \"U\");\n    return normalizedString;\n  };\n\n  taiga = this.taiga;\n\n  taiga.addClass = addClass;\n\n  taiga.nl2br = nl2br;\n\n  taiga.bindMethods = bindMethods;\n\n  taiga.bindOnce = bindOnce;\n\n  taiga.mixOf = mixOf;\n\n  taiga.trim = trim;\n\n  taiga.slugify = slugify;\n\n  taiga.unslugify = unslugify;\n\n  taiga.toggleText = toggleText;\n\n  taiga.groupBy = groupBy;\n\n  taiga.timeout = timeout;\n\n  taiga.cancelTimeout = cancelTimeout;\n\n  taiga.scopeDefer = scopeDefer;\n\n  taiga.toString = toString;\n\n  taiga.joinStr = joinStr;\n\n  taiga.truncate = truncate;\n\n  taiga.debounce = debounce;\n\n  taiga.debounceLeading = debounceLeading;\n\n  taiga.startswith = startswith;\n\n  taiga.sizeFormat = sizeFormat;\n\n  taiga.stripTags = stripTags;\n\n  taiga.replaceTags = replaceTags;\n\n  taiga.defineImmutableProperty = defineImmutableProperty;\n\n  taiga.isImage = isImage;\n\n  taiga.isEmail = isEmail;\n\n  taiga.isPdf = isPdf;\n\n  taiga.patch = patch;\n\n  taiga.getRandomDefaultColor = getRandomDefaultColor;\n\n  taiga.getDefaulColorList = getDefaulColorList;\n\n  taiga.getMatches = getMatches;\n\n  taiga.randomInt = randomInt;\n\n  taiga.normalizeString = normalizeString;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersMixin, PageMixin, UsFiltersMixin, groupBy, joinStr, taiga, toString, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  joinStr = this.taiga.joinStr;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  PageMixin = (function() {\n    function PageMixin() {}\n\n    PageMixin.prototype.fillUsersAndRoles = function(users, roles) {\n      var activeUsers, computableRoles;\n      activeUsers = _.filter(users, (function(_this) {\n        return function(user) {\n          return user.is_active;\n        };\n      })(this));\n      this.scope.activeUsers = _.sortBy(activeUsers, \"full_name_display\");\n      this.scope.activeUsersById = groupBy(this.scope.activeUsers, function(e) {\n        return e.id;\n      });\n      this.scope.users = _.sortBy(users, \"full_name_display\");\n      this.scope.usersById = groupBy(users, function(e) {\n        return e.id;\n      });\n      this.scope.roles = _.sortBy(roles, \"order\");\n      computableRoles = _(this.scope.project.members).map(\"role\").uniq().value();\n      return this.scope.computableRoles = _(roles).filter(\"computable\").filter(function(x) {\n        return _.includes(computableRoles, x.id);\n      }).value();\n    };\n\n    PageMixin.prototype.loadUsersAndRoles = function() {\n      var promise;\n      promise = this.q.all([this.rs.projects.usersList(this.scope.projectId), this.rs.projects.rolesList(this.scope.projectId)]);\n      return promise.then((function(_this) {\n        return function(results) {\n          var roles, users;\n          users = results[0], roles = results[1];\n          _this.fillUsersAndRoles(users, roles);\n          return results;\n        };\n      })(this));\n    };\n\n    return PageMixin;\n\n  })();\n\n  taiga.PageMixin = PageMixin;\n\n  FiltersMixin = (function() {\n    function FiltersMixin() {}\n\n    FiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    FiltersMixin.prototype.selectFilter = function(name, value, load, mode) {\n      var existing, location, params;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = \"include\";\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] !== void 0 && name !== \"page\") {\n        existing = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n          return trim(x);\n        });\n        existing.push(taiga.toString(value));\n        existing = _.compact(existing);\n        value = joinStr(\",\", _.uniq(existing));\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceFilter = function(name, value, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      if (!this.location.isInCurrentRouteParams(name, value)) {\n        location = load ? this.location : this.location.noreload(this.scope);\n        return location.search(name, value);\n      }\n    };\n\n    FiltersMixin.prototype.replaceAllFilters = function(filters, load) {\n      var location;\n      if (load == null) {\n        load = false;\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(filters);\n    };\n\n    FiltersMixin.prototype.unselectFilter = function(name, value, load, mode) {\n      var location, newValues, params, parsedValues;\n      if (load == null) {\n        load = false;\n      }\n      if (mode == null) {\n        mode = 'include';\n      }\n      params = this.location.search();\n      if (mode === \"exclude\") {\n        name = this.excludePrefix.concat(name);\n      }\n      if (params[name] === void 0) {\n        return;\n      }\n      if (value === void 0 || value === null) {\n        delete params[name];\n      }\n      parsedValues = _.map(taiga.toString(params[name]).split(\",\"), function(x) {\n        return trim(x);\n      });\n      newValues = _.reject(parsedValues, function(x) {\n        return x === taiga.toString(value);\n      });\n      newValues = _.compact(newValues);\n      if (_.isEmpty(newValues)) {\n        value = null;\n      } else {\n        value = joinStr(\",\", _.uniq(newValues));\n      }\n      location = load ? this.location : this.location.noreload(this.scope);\n      return location.search(name, value);\n    };\n\n    FiltersMixin.prototype.applyStoredFilters = function(projectSlug, key, validKeys) {\n      var filters;\n      if (_.isEmpty(this.location.search())) {\n        filters = this.getFilters(projectSlug, key);\n        if (validKeys) {\n          filters = _.pick(filters, validKeys);\n        }\n        if (Object.keys(filters).length) {\n          this.location.search(filters);\n          this.location.replace();\n          return true;\n        }\n      }\n      return false;\n    };\n\n    FiltersMixin.prototype.storeFilters = function(projectSlug, params, filtersHashSuffix) {\n      var hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      return this.storage.set(hash, params);\n    };\n\n    FiltersMixin.prototype.getFilters = function(projectSlug, filtersHashSuffix) {\n      var data, hash, ns;\n      ns = projectSlug + \":\" + filtersHashSuffix;\n      hash = taiga.generateHash([projectSlug, ns]);\n      data = this.storage.get(hash) || {};\n      delete data.q;\n      return data;\n    };\n\n    FiltersMixin.prototype.formatSelectedFilters = function(type, list, urlIds, mode) {\n      var invalidAppliedTags, invalidTags, selectedFilters, selectedIds, validAppliedTags;\n      if (mode == null) {\n        mode = \"include\";\n      }\n      selectedIds = urlIds.split(',');\n      selectedFilters = _.filter(list, function(it) {\n        return selectedIds.indexOf(_.toString(it.id)) !== -1;\n      });\n      invalidTags = _.filter(selectedIds, function(it) {\n        return !_.find(selectedFilters, function(sit) {\n          return _.toString(sit.id) === it;\n        });\n      });\n      invalidAppliedTags = _.map(invalidTags, function(it) {\n        return {\n          id: it,\n          key: type + \":\" + it,\n          dataType: type,\n          name: it,\n          mode: mode\n        };\n      });\n      validAppliedTags = _.map(selectedFilters, function(it) {\n        return {\n          id: it.id,\n          key: type + \":\" + it.id,\n          dataType: type,\n          name: it.name,\n          color: it.color,\n          mode: mode\n        };\n      });\n      return invalidAppliedTags.concat(validAppliedTags);\n    };\n\n    return FiltersMixin;\n\n  })();\n\n  taiga.FiltersMixin = FiltersMixin;\n\n  UsFiltersMixin = (function() {\n    function UsFiltersMixin() {}\n\n    UsFiltersMixin.prototype.excludePrefix = \"exclude_\";\n\n    UsFiltersMixin.prototype.filterCategories = [\"tags\", \"status\", \"assigned_users\", \"assigned_to\", \"owner\", \"epic\", \"role\"];\n\n    UsFiltersMixin.prototype.excludeFilters = [];\n\n    UsFiltersMixin.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      return this.filtersReloadContent();\n    };\n\n    UsFiltersMixin.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.filtersReloadContent();\n      return this.generateFilters();\n    };\n\n    UsFiltersMixin.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.storeCustomFiltersName).then(_this.generateFilters);\n          return _this.generateFilters();\n        };\n      })(this));\n    };\n\n    UsFiltersMixin.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    UsFiltersMixin.prototype.generateFilters = function(milestone) {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      this.storeFilters(this.params.pslug, this.location.search(), this.storeFiltersName);\n      urlfilters = this.location.search();\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      if (milestone) {\n        loadFilters.milestone = milestone;\n      }\n      return this.q.all([this.rs.userstories.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.storeCustomFiltersName)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_users = _.map(data.assigned_users, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.epic = _.map(data.epics, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n              it.name = \"#\" + it.ref + \" \" + it.subject;\n            } else {\n              it.id = \"null\";\n              it.name = \"Not in an epic\";\n            }\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [];\n          if (!_this.excludeFilters.includes('status')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            });\n          }\n          if (!_this.excludeFilters.includes('tags')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            });\n          }\n          if (!_this.excludeFilters.includes('assigned_to')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_users\",\n              content: dataCollection.assigned_users\n            });\n          }\n          if (!_this.excludeFilters.includes('role')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            });\n          }\n          if (!_this.excludeFilters.includes('created_by')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            });\n          }\n          if (!_this.excludeFilters.includes('epic')) {\n            _this.filters.push({\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.EPIC\"),\n              dataType: \"epic\",\n              content: dataCollection.epic\n            });\n          }\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    return UsFiltersMixin;\n\n  })();\n\n  taiga.UsFiltersMixin = UsFiltersMixin;\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaAdmin\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var $translateMissingTranslationHandlerLog;\n\n  $translateMissingTranslationHandlerLog = function($log) {\n    return function(translationId) {};\n  };\n\n  $translateMissingTranslationHandlerLog.$inject = ['$log'];\n\n  angular.module('pascalprecht.translate').factory('$translateMissingTranslationHandlerLog', $translateMissingTranslationHandlerLog);\n\n  $translateMissingTranslationHandlerLog.displayName = '$translateMissingTranslationHandlerLog';\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AuthService, CancelAccountDirective, ChangeEmailDirective, ChangePasswordFromRecoveryDirective, ForgotPasswordDirective, InvitationDirective, LoginDirective, LoginPage, PublicRegisterMessageDirective, RegisterDirective, RegisterOptionsDirective, VerifyEmailDirective, debounce, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAuth\", [\"taigaResources\"]);\n\n  LoginPage = (function() {\n    LoginPage.$inject = ['tgCurrentUserService', '$location', '$tgNavUrls', '$routeParams', '$tgAuth'];\n\n    function LoginPage(currentUserService, $location, $navUrls, $routeParams, $auth) {\n      var url;\n      if (currentUserService.isAuthenticated()) {\n        if (!$routeParams['force_login']) {\n          url = $navUrls.resolve(\"home\");\n          if ($routeParams['next']) {\n            url = decodeURIComponent($routeParams['next']);\n            $location.search('next', null);\n          }\n          if ($routeParams['unauthorized']) {\n            $auth.clear();\n            $auth.removeToken();\n          } else {\n            $location.url(url);\n          }\n        }\n      }\n    }\n\n    return LoginPage;\n\n  })();\n\n  module.controller('LoginPage', LoginPage);\n\n  AuthService = (function(superClass) {\n    extend(AuthService, superClass);\n\n    AuthService.$inject = [\"$rootScope\", \"$tgStorage\", \"$tgModel\", \"$tgResources\", \"$tgHttp\", \"$tgUrls\", \"$tgConfig\", \"$tgUserPilot\", \"$translate\", \"tgCurrentUserService\", \"tgThemeService\", \"$tgAnalytics\"];\n\n    function AuthService(rootscope, storage, model, rs, http, urls, config1, userpilot, translate, currentUserService1, themeService, analytics) {\n      var userModel;\n      this.rootscope = rootscope;\n      this.storage = storage;\n      this.model = model;\n      this.rs = rs;\n      this.http = http;\n      this.urls = urls;\n      this.config = config1;\n      this.userpilot = userpilot;\n      this.translate = translate;\n      this.currentUserService = currentUserService1;\n      this.themeService = themeService;\n      this.analytics = analytics;\n      AuthService.__super__.constructor.call(this);\n      userModel = this.getUser();\n      this._currentTheme = this._getUserTheme();\n      this.setUserdata(userModel);\n    }\n\n    AuthService.prototype.setUserdata = function(userModel) {\n      if (userModel) {\n        this.userData = Immutable.fromJS(userModel.getAttrs());\n        this.currentUserService.setUser(this.userData);\n      } else {\n        this.userData = null;\n      }\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype._getUserTheme = function() {\n      var compiledThemes, defaultTheme, ref, ref1, ref2;\n      compiledThemes = window._taigaAvailableThemes;\n      defaultTheme = this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!_.includes(this.config.get(\"themes\"), (ref = this.rootscope.user) != null ? ref.theme : void 0) || !compiledThemes.includes((ref1 = this.rootscope.user) != null ? ref1.theme : void 0)) {\n        return defaultTheme;\n      }\n      return (ref2 = this.rootscope.user) != null ? ref2.theme : void 0;\n    };\n\n    AuthService.prototype._setTheme = function() {\n      var newTheme;\n      newTheme = this._getUserTheme();\n      if (this._currentTheme !== newTheme) {\n        this._currentTheme = newTheme;\n        return this.themeService.use(this._currentTheme);\n      }\n    };\n\n    AuthService.prototype._setLocales = function() {\n      var lang, ref;\n      lang = ((ref = this.rootscope.user) != null ? ref.lang : void 0) || this.config.get(\"defaultLanguage\") || \"en\";\n      this.translate.preferredLanguage(lang);\n      return this.translate.use(lang);\n    };\n\n    AuthService.prototype.getUser = function() {\n      var user, userData;\n      if (this.rootscope.user) {\n        return this.rootscope.user;\n      }\n      userData = this.storage.get(\"userInfo\");\n      if (userData) {\n        user = this.model.make_model(\"users\", userData);\n        this.rootscope.user = user;\n        this._setLocales();\n        this._setTheme();\n        return user;\n      } else {\n        this._setTheme();\n      }\n      return null;\n    };\n\n    AuthService.prototype.setUser = function(user) {\n      this.rootscope.auth = user;\n      this.storage.set(\"userInfo\", user.getAttrs());\n      this.rootscope.user = user;\n      this.setUserdata(user);\n      this._setLocales();\n      return this._setTheme();\n    };\n\n    AuthService.prototype.clear = function() {\n      this.rootscope.auth = null;\n      this.rootscope.user = null;\n      return this.storage.remove(\"userInfo\");\n    };\n\n    AuthService.prototype.setToken = function(token) {\n      return this.storage.set(\"token\", token);\n    };\n\n    AuthService.prototype.getToken = function() {\n      return this.storage.get(\"token\");\n    };\n\n    AuthService.prototype.removeToken = function() {\n      return this.storage.remove(\"token\");\n    };\n\n    AuthService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    AuthService.prototype.refresh = function() {\n      var url;\n      url = this.urls.resolve(\"user-me\");\n      return this.http.get(url).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = data.data;\n          user.token = _this.getUser().auth_token;\n          user = _this.model.make_model(\"users\", user);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:refresh\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.login = function(data, type) {\n      var url;\n      url = this.urls.resolve(\"auth\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"normal\";\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(data, status) {\n          var user;\n          user = _this.model.make_model(\"users\", data.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:login\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.logout = function() {\n      this.removeToken();\n      this.clear();\n      this.currentUserService.removeUser();\n      this._setTheme();\n      this._setLocales();\n      this.rootscope.$broadcast(\"auth:logout\");\n      return this.analytics.setUserId();\n    };\n\n    AuthService.prototype.register = function(data, type, existing) {\n      var url;\n      url = this.urls.resolve(\"auth-register\");\n      data = _.clone(data, false);\n      data.type = type ? type : \"public\";\n      if (type === \"private\") {\n        data.existing = existing ? existing : false;\n      }\n      this.removeToken();\n      return this.http.post(url, data).then((function(_this) {\n        return function(response) {\n          var user;\n          user = _this.model.make_model(\"users\", response.data);\n          _this.setToken(user.auth_token);\n          _this.setUser(user);\n          _this.rootscope.$broadcast(\"auth:register\", user);\n          return user;\n        };\n      })(this));\n    };\n\n    AuthService.prototype.getInvitation = function(token) {\n      return this.rs.invitations.get(token);\n    };\n\n    AuthService.prototype.acceptInvitiationWithNewUser = function(data) {\n      return this.register(data, \"private\", false);\n    };\n\n    AuthService.prototype.forgotPassword = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-password-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changePasswordFromRecovery = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-password-from-recovery\");\n      data = _.clone(data, false);\n      this.removeToken();\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.changeEmail = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-change-email\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.cancelAccount = function(data) {\n      var url;\n      url = this.urls.resolve(\"users-cancel-account\");\n      data = _.clone(data, false);\n      return this.http.post(url, data);\n    };\n\n    AuthService.prototype.exportProfile = function() {\n      var url;\n      url = this.urls.resolve(\"users-export\");\n      return this.http.post(url);\n    };\n\n    AuthService.prototype.sendVerificationEmail = function() {\n      var url;\n      url = this.urls.resolve(\"user-send-verification-email\");\n      return this.http.post(url);\n    };\n\n    return AuthService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAuth\", AuthService);\n\n  PublicRegisterMessageDirective = function($config, $navUrls, $routeParams, templates) {\n    var template, templateFn;\n    template = templates.get(\"auth/login-text.html\", true);\n    templateFn = function() {\n      var nextUrl, publicRegisterEnabled, url;\n      publicRegisterEnabled = $config.get(\"publicRegisterEnabled\");\n      if (!publicRegisterEnabled) {\n        return \"\";\n      }\n      url = $navUrls.resolve(\"register\");\n      if ($routeParams['force_next']) {\n        nextUrl = encodeURIComponent($routeParams['force_next']);\n        url += \"?next=\" + nextUrl;\n      }\n      return template({\n        url: url\n      });\n    };\n    return {\n      restrict: \"AE\",\n      scope: {},\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgPublicRegisterMessage\", [\"$tgConfig\", \"$tgNavUrls\", \"$routeParams\", \"$tgTemplate\", PublicRegisterMessageDirective]);\n\n  LoginDirective = function($auth, $confirm, $location, $config, $routeParams, $navUrls, $events, $translate, $window, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onError, onSuccess, submit;\n      form = new checksley.Form($el.find(\"form.login-form\"));\n      $scope.defaultLoginEnabled = $config.get(\"defaultLoginEnabled\", true);\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\") && !$routeParams['next'].startsWith(\"%2Fdiscover\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      if ($routeParams['force_next']) {\n        $scope.nextUrl = decodeURIComponent($routeParams['force_next']);\n      }\n      onSuccess = function(response) {\n        $events.setupConnection();\n        $analytics.trackEvent(\"auth\", \"login\", \"user login\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onError = function(response) {\n        return $confirm.notify(\"light-error\", $translate.instant(\"LOGIN_FORM.ERROR_AUTH_INCORRECT\"));\n      };\n      $scope.onKeyUp = function(event) {\n        var target, value;\n        target = angular.element(event.currentTarget);\n        value = target.val();\n        $scope.iscapsLockActivated = false;\n        if (value !== value.toLowerCase()) {\n          return $scope.iscapsLockActivated = true;\n        }\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          data = {\n            \"username\": $el.find(\"form.login-form input[name=username]\").val(),\n            \"password\": $el.find(\"form.login-form input[name=password]\").val()\n          };\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          promise = $auth.login(data, loginFormType);\n          return promise.then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      window.prerenderReady = true;\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLogin\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgEvents\", \"$translate\", \"$window\", \"$tgAnalytics\", LoginDirective]);\n\n  RegisterDirective = function($auth, $confirm, $location, $navUrls, $config, $routeParams, $analytics, $translate, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      if (!$config.get(\"publicRegisterEnabled\")) {\n        $location.path($navUrls.resolve(\"not-found\"));\n        $location.replace();\n      }\n      $scope.data = {};\n      form = $el.find(\"form\").checksley({\n        onlyOneErrorElement: true\n      });\n      if ($routeParams['next'] && $routeParams['next'] !== $navUrls.resolve(\"login\")) {\n        $scope.nextUrl = decodeURIComponent($routeParams['next']);\n      } else {\n        $scope.nextUrl = $navUrls.resolve(\"home\");\n      }\n      onSuccessSubmit = function(response) {\n        $analytics.trackEvent(\"auth\", \"register\", \"user registration\", 1);\n        if ($scope.nextUrl.indexOf('http') === 0) {\n          return $window.location.href = $scope.nextUrl;\n        } else {\n          return $location.url($scope.nextUrl);\n        }\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return form.setErrors(response.data);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.register($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRegister\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"$routeParams\", \"$tgAnalytics\", \"$translate\", \"$window\", RegisterDirective]);\n\n  RegisterOptionsDirective = function() {\n    return {};\n  };\n\n  module.directive(\"tgRegisterOptions\", [RegisterOptionsDirective]);\n\n  ForgotPasswordDirective = function($auth, $confirm, $location, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var message, title;\n        $location.path($navUrls.resolve(\"login\"));\n        title = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TITLE\");\n        message = $translate.instant(\"FORGOT_PASSWORD_FORM.SUCCESS_TEXT\");\n        return $confirm.success(title, message);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"FORGOT_PASSWORD_FORM.ERROR\");\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.forgotPassword($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return window.prerenderReady = true;\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgForgotPassword\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgNavUrls\", \"$translate\", ForgotPasswordDirective]);\n\n  ChangePasswordFromRecoveryDirective = function($auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit, text;\n      $scope.data = {};\n      if ($params.token != null) {\n        $scope.tokenInParams = true;\n        $scope.data.token = $params.token;\n      } else {\n        $location.path($navUrls.resolve(\"login\"));\n        text = '';\n        text = response.data.token.map(function(message) {\n          return text + \" \" + message;\n        });\n        $confirm.notify(\"light-error\", text);\n      }\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"CHANGE_PASSWORD_RECOVERY_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        text = '';\n        text = response.data.password.map(function(message) {\n          return text + \" \" + message;\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.changePasswordFromRecovery($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangePasswordFromRecovery\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangePasswordFromRecoveryDirective]);\n\n  InvitationDirective = function($auth, $confirm, $location, $config, $params, $navUrls, $analytics, $translate, config) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var loginForm, onErrorSubmitLogin, onErrorSubmitRegister, onSuccessSubmitLogin, onSuccessSubmitRegister, promise, registerForm, submitLogin, submitRegister, token;\n      token = $params.token;\n      promise = $auth.getInvitation(token);\n      promise.then(function(invitation) {\n        $scope.invitation = invitation;\n        return $scope.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      });\n      promise.then(null, function(response) {\n        var text;\n        $location.path($navUrls.resolve(\"login\"));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.NOT_FOUND\");\n        return $confirm.notify(\"light-error\", text);\n      });\n      $scope.dataLogin = {\n        token: token\n      };\n      loginForm = $el.find(\"form.login-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitLogin = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with existing user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitLogin = function(response) {\n        return $confirm.notify(\"light-error\", response.data._error_message);\n      };\n      submitLogin = debounce(2000, (function(_this) {\n        return function(event) {\n          var data, loginFormType;\n          event.preventDefault();\n          if (!loginForm.validate()) {\n            return;\n          }\n          loginFormType = $config.get(\"loginFormType\", \"normal\");\n          data = $scope.dataLogin;\n          promise = $auth.login({\n            username: data.username,\n            password: data.password,\n            invitation_token: data.token\n          }, loginFormType);\n          return promise.then(onSuccessSubmitLogin, onErrorSubmitLogin);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.login-form\", submitLogin);\n      $el.on(\"click\", \".button-login\", submitLogin);\n      $scope.dataRegister = {\n        token: token\n      };\n      registerForm = $el.find(\"form.register-form\").checksley({\n        onlyOneErrorElement: true\n      });\n      onSuccessSubmitRegister = function(response) {\n        var text;\n        $analytics.trackEvent(\"auth\", \"invitationAccept\", \"invitation accept with new user\", 1);\n        $location.path($navUrls.resolve(\"project\", {\n          project: $scope.invitation.project_slug\n        }));\n        text = $translate.instant(\"INVITATION_LOGIN_FORM.SUCCESS\", {\n          \"project_name\": $scope.invitation.project_name\n        });\n        return $confirm.notify(\"success\", text);\n      };\n      onErrorSubmitRegister = function(response) {\n        var text;\n        if (response.data._error_message) {\n          text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n            error: response.data._error_message\n          });\n          $confirm.notify(\"light-error\", text);\n        }\n        return registerForm.setErrors(response.data);\n      };\n      submitRegister = debounce(2000, (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          if (!registerForm.validate()) {\n            return;\n          }\n          promise = $auth.acceptInvitiationWithNewUser($scope.dataRegister);\n          return promise.then(onSuccessSubmitRegister, onErrorSubmitRegister);\n        };\n      })(this));\n      $el.on(\"submit\", \"form.register-form\", submitRegister);\n      $el.on(\"click\", \".button-register\", submitRegister);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgInvitation\", [\"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$tgConfig\", \"$routeParams\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgConfig\", InvitationDirective]);\n\n  VerifyEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"VERIFY_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgVerifyEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", VerifyEmailDirective]);\n\n  ChangeEmailDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.email_token = $params.email_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        if ($auth.isAuthenticated()) {\n          $repo.queryOne(\"users\", $auth.getUser().id).then((function(_this) {\n            return function(data) {\n              return $auth.setUser(data);\n            };\n          })(this));\n          $location.url($navUrls.resolve(\"home\"));\n        } else {\n          $location.url($navUrls.resolve(\"login\"));\n        }\n        text = $translate.instant(\"CHANGE_EMAIL_FORM.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"light-error\", text);\n      };\n      submit = function() {\n        var promise;\n        if (!form.validate()) {\n          return;\n        }\n        promise = $auth.changeEmail($scope.data);\n        return promise.then(onSuccessSubmit, onErrorSubmit);\n      };\n      $el.on(\"submit\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \"a.ng-submit-form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgChangeEmail\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", \"$translate\", ChangeEmailDirective]);\n\n  CancelAccountDirective = function($repo, $model, $auth, $confirm, $location, $params, $navUrls) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, onErrorSubmit, onSuccessSubmit, submit;\n      $scope.data = {};\n      $scope.data.cancel_token = $params.cancel_token;\n      form = $el.find(\"form\").checksley();\n      onSuccessSubmit = function(response) {\n        var text;\n        $auth.logout();\n        $location.path($navUrls.resolve(\"home\"));\n        text = $translate.instant(\"CANCEL_ACCOUNT.SUCCESS\");\n        return $confirm.success(text);\n      };\n      onErrorSubmit = function(response) {\n        var text;\n        text = $translate.instant(\"COMMON.GENERIC_ERROR\", {\n          error: response.data._error_message\n        });\n        return $confirm.notify(\"error\", text);\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $auth.cancelAccount($scope.data);\n          return promise.then(onSuccessSubmit, onErrorSubmit);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgCancelAccount\", [\"$tgRepo\", \"$tgModel\", \"$tgAuth\", \"$tgConfirm\", \"$tgLocation\", \"$routeParams\", \"$tgNavUrls\", CancelAccountDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaBacklog\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaMainDirective, bindOnce, groupBy, init, module, taiga, urls;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\", []);\n\n  TaigaMainDirective = function($rootscope, $window) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $window.onresize = function() {\n        return $rootscope.$broadcast(\"resize\");\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMain\", [\"$rootScope\", \"$window\", TaigaMainDirective]);\n\n  urls = {\n    \"home\": \"/\",\n    \"projects\": \"/projects\",\n    \"error\": \"/error\",\n    \"not-found\": \"/not-found\",\n    \"permission-denied\": \"/permission-denied\",\n    \"discover\": \"/discover\",\n    \"discover-search\": \"/discover/search\",\n    \"login\": \"/login\",\n    \"forgot-password\": \"/forgot-password\",\n    \"change-password\": \"/change-password/:token\",\n    \"change-email\": \"/change-email/:token\",\n    \"verified-email\": \"/change-email/:token\",\n    \"cancel-account\": \"/cancel-account/:token\",\n    \"register\": \"/register\",\n    \"invitation\": \"/invitation/:token\",\n    \"create-project\": \"/project/new\",\n    \"create-project-scrum\": \"/project/new/scrum\",\n    \"create-project-kanban\": \"/project/new/kanban\",\n    \"create-project-duplicate\": \"/project/new/duplicate\",\n    \"create-project-import\": \"/project/new/import\",\n    \"create-project-import-platform\": \"/project/new/import/:platform\",\n    \"profile\": \"/profile\",\n    \"user-profile\": \"/profile/:username\",\n    \"blocked-project\": \"/blocked-project/:project\",\n    \"project\": \"/project/:project\",\n    \"project-detail-ref\": \"/project/:project/t/:ref\",\n    \"project-backlog\": \"/project/:project/backlog\",\n    \"project-taskboard\": \"/project/:project/taskboard/:sprint\",\n    \"project-kanban\": \"/project/:project/kanban\",\n    \"project-issues\": \"/project/:project/issues\",\n    \"project-epics\": \"/project/:project/epics\",\n    \"project-search\": \"/project/:project/search\",\n    \"project-timeline\": \"/project/:project/timeline\",\n    \"project-epics-detail\": \"/project/:project/epic/:ref\",\n    \"project-userstories-detail\": \"/project/:project/us/:ref\",\n    \"project-tasks-detail\": \"/project/:project/task/:ref\",\n    \"project-issues-detail\": \"/project/:project/issue/:ref\",\n    \"project-wiki\": \"/project/:project/wiki\",\n    \"project-wiki-list\": \"/project/:project/wiki-list\",\n    \"project-wiki-page\": \"/project/:project/wiki/:slug\",\n    \"project-team\": \"/project/:project/team\",\n    \"project-admin-home\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-details\": \"/project/:project/admin/project-profile/details\",\n    \"project-admin-project-profile-default-values\": \"/project/:project/admin/project-profile/default-values\",\n    \"project-admin-project-profile-modules\": \"/project/:project/admin/project-profile/modules\",\n    \"project-admin-project-profile-export\": \"/project/:project/admin/project-profile/export\",\n    \"project-admin-project-profile-reports\": \"/project/:project/admin/project-profile/reports\",\n    \"project-admin-project-values-status\": \"/project/:project/admin/project-values/status\",\n    \"project-admin-project-values-points\": \"/project/:project/admin/project-values/points\",\n    \"project-admin-project-values-priorities\": \"/project/:project/admin/project-values/priorities\",\n    \"project-admin-project-values-severities\": \"/project/:project/admin/project-values/severities\",\n    \"project-admin-project-values-types\": \"/project/:project/admin/project-values/types\",\n    \"project-admin-project-values-custom-fields\": \"/project/:project/admin/project-values/custom-fields\",\n    \"project-admin-project-values-tags\": \"/project/:project/admin/project-values/tags\",\n    \"project-admin-project-values-due-dates\": \"/project/:project/admin/project-values/due-dates\",\n    \"project-admin-project-values-kanban-power-ups\": \"/project/:project/admin/project-values/kanban-power-ups\",\n    \"project-admin-memberships\": \"/project/:project/admin/memberships\",\n    \"project-admin-roles\": \"/project/:project/admin/roles\",\n    \"project-admin-third-parties-webhooks\": \"/project/:project/admin/third-parties/webhooks\",\n    \"project-admin-third-parties-github\": \"/project/:project/admin/third-parties/github\",\n    \"project-admin-third-parties-gitlab\": \"/project/:project/admin/third-parties/gitlab\",\n    \"project-admin-third-parties-bitbucket\": \"/project/:project/admin/third-parties/bitbucket\",\n    \"project-admin-third-parties-gogs\": \"/project/:project/admin/third-parties/gogs\",\n    \"project-admin-contrib\": \"/project/:project/admin/contrib/:plugin\",\n    \"user-settings-user-profile\": \"/user-settings/user-profile\",\n    \"user-settings-user-change-password\": \"/user-settings/user-change-password\",\n    \"user-settings-user-avatar\": \"/user-settings/user-avatar\",\n    \"user-settings-user-project-settings\": \"/user-settings/user-project-settings\",\n    \"user-settings-mail-notifications\": \"/user-settings/mail-notifications\",\n    \"user-settings-live-notifications\": \"/user-settings/live-notifications\",\n    \"user-settings-web-notifications\": \"/user-settings/web-notifications\",\n    \"user-settings-contrib\": \"/user-settings/contrib/:plugin\",\n    \"notifications\": \"/notifications\"\n  };\n\n  init = function($log, $navurls) {\n    $log.debug(\"Initialize navigation urls\");\n    return $navurls.update(urls);\n  };\n\n  module.run([\"$log\", \"$tgNavUrls\", init]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimationFrame, Autofocus, Capslock, CheckPermissionDirective, ClassPermissionDirective, DataPickerConfig, ProjectUrl, Qqueue, QueueModelTransformation, SelectedText, Svg, Template, ToggleCommentDirective, module, taiga,\n    slice = [].slice,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\", []);\n\n  DataPickerConfig = function($translate, $config, $auth) {\n    return {\n      get: function() {\n        var isRTL, lang, rtlLanguages, user;\n        user = $auth.getUser();\n        lang = (user != null ? user.lang : void 0) || $translate.preferredLanguage();\n        rtlLanguages = $config.get(\"rtlLanguages\", []);\n        isRTL = rtlLanguages.indexOf(lang) > -1;\n        return {\n          i18n: {\n            previousMonth: $translate.instant(\"COMMON.PICKERDATE.PREV_MONTH\"),\n            nextMonth: $translate.instant(\"COMMON.PICKERDATE.NEXT_MONTH\"),\n            months: [$translate.instant(\"COMMON.PICKERDATE.MONTHS.JAN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.FEB\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.APR\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.MAY\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUN\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.JUL\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.AUG\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.SEP\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.OCT\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.NOV\"), $translate.instant(\"COMMON.PICKERDATE.MONTHS.DEC\")],\n            weekdays: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS.SAT\")],\n            weekdaysShort: [$translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SUN\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.MON\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.TUE\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.WED\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.THU\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.FRI\"), $translate.instant(\"COMMON.PICKERDATE.WEEK_DAYS_SHORT.SAT\")]\n          },\n          isRTL: isRTL,\n          firstDay: parseInt($translate.instant(\"COMMON.PICKERDATE.FIRST_DAY_OF_WEEK\"), 10),\n          format: $translate.instant(\"COMMON.PICKERDATE.FORMAT\")\n        };\n      }\n    };\n  };\n\n  module.factory(\"tgDatePickerConfigService\", [\"$translate\", \"$tgConfig\", \"$tgAuth\", DataPickerConfig]);\n\n  SelectedText = function($window, $document) {\n    var get;\n    get = function() {\n      if ($window.getSelection) {\n        return $window.getSelection().toString();\n      } else if ($document.selection) {\n        return $document.selection.createRange().text;\n      }\n      return \"\";\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$selectedText\", [\"$window\", \"$document\", SelectedText]);\n\n  CheckPermissionDirective = function(projectService) {\n    var link, render;\n    render = function($el, project, permission) {\n      if (project && permission) {\n        if (project.get('my_permissions').indexOf(permission) > -1) {\n          return $el.removeClass('hidden');\n        }\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var permission, unObserve, unwatch;\n      $el.addClass('hidden');\n      permission = $attrs.tgCheckPermission;\n      unwatch = $scope.$watch(function() {\n        return projectService.project;\n      }, function() {\n        if (!projectService.project) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unwatch();\n      });\n      unObserve = $attrs.$observe(\"tgCheckPermission\", function(permission) {\n        if (!permission) {\n          return;\n        }\n        render($el, projectService.project, permission);\n        return unObserve();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CheckPermissionDirective.$inject = [\"tgProjectService\"];\n\n  module.directive(\"tgCheckPermission\", CheckPermissionDirective);\n\n  ClassPermissionDirective = function() {\n    var link, name;\n    name = \"tgClassPermission\";\n    link = function($scope, $el, $attrs) {\n      var checkPermissions, tgClassPermissionWatchAction, unbindWatcher;\n      checkPermissions = function(project, className, permission) {\n        var negation;\n        negation = permission[0] === \"!\";\n        if (negation) {\n          permission = permission.slice(1);\n        }\n        if (negation && project.my_permissions.indexOf(permission) === -1) {\n          return $el.addClass(className);\n        } else if (!negation && project.my_permissions.indexOf(permission) !== -1) {\n          return $el.addClass(className);\n        } else {\n          return $el.removeClass(className);\n        }\n      };\n      tgClassPermissionWatchAction = function(project) {\n        var className, classes, permission, results;\n        if (project) {\n          unbindWatcher();\n          classes = $scope.$eval($attrs[name]);\n          results = [];\n          for (className in classes) {\n            permission = classes[className];\n            results.push(checkPermissions(project, className, permission));\n          }\n          return results;\n        }\n      };\n      return unbindWatcher = $scope.$watch(\"project\", tgClassPermissionWatchAction);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgClassPermission\", ClassPermissionDirective);\n\n  AnimationFrame = function() {\n    var add, animationFrame, performAnimation, tail;\n    animationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n    performAnimation = (function(_this) {\n      return function(time) {\n        var fn;\n        fn = tail.shift();\n        fn();\n        if (tail.length) {\n          return animationFrame(performAnimation);\n        }\n      };\n    })(this);\n    tail = [];\n    add = function() {\n      var fn, i, len, results;\n      results = [];\n      for (i = 0, len = arguments.length; i < len; i++) {\n        fn = arguments[i];\n        tail.push(fn);\n        if (tail.length === 1) {\n          results.push(animationFrame(performAnimation));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n    return {\n      add: add\n    };\n  };\n\n  module.factory(\"animationFrame\", AnimationFrame);\n\n  ToggleCommentDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.find(\"textarea\").on(\"focus\", function() {\n        return $el.addClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleComment\", ToggleCommentDirective);\n\n  ProjectUrl = function($navurls) {\n    var get;\n    get = function(project) {\n      var ctx;\n      if (project.toJS) {\n        project = project.toJS();\n      }\n      ctx = {\n        project: project.slug\n      };\n      if (project.is_backlog_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-backlog\", ctx);\n      }\n      if (project.is_kanban_activated && project.my_permissions.indexOf(\"view_us\") > -1) {\n        return $navurls.resolve(\"project-kanban\", ctx);\n      }\n      if (project.is_wiki_activated && project.my_permissions.indexOf(\"view_wiki_pages\") > -1) {\n        return $navurls.resolve(\"project-wiki\", ctx);\n      }\n      if (project.is_issues_activated && project.my_permissions.indexOf(\"view_issues\") > -1) {\n        return $navurls.resolve(\"project-issues\", ctx);\n      }\n      return $navurls.resolve(\"project\", ctx);\n    };\n    return {\n      get: get\n    };\n  };\n\n  module.factory(\"$projectUrl\", [\"$tgNavUrls\", ProjectUrl]);\n\n  Qqueue = function($q) {\n    var deferred, lastPromise, qqueue;\n    deferred = $q.defer();\n    deferred.resolve();\n    lastPromise = deferred.promise;\n    qqueue = {\n      bindAdd: (function(_this) {\n        return function(fn) {\n          return function() {\n            var args;\n            args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n            return lastPromise = lastPromise.then(function() {\n              return fn.apply(_this, args);\n            });\n          };\n        };\n      })(this),\n      add: (function(_this) {\n        return function(fn) {\n          if (!lastPromise) {\n            lastPromise = fn();\n          } else {\n            lastPromise = lastPromise.then(fn);\n          }\n          return qqueue;\n        };\n      })(this)\n    };\n    return qqueue;\n  };\n\n  module.factory(\"$tgQqueue\", [\"$q\", Qqueue]);\n\n  QueueModelTransformation = (function(superClass) {\n    extend(QueueModelTransformation, superClass);\n\n    QueueModelTransformation.$inject = [\"$tgQqueue\", \"$tgRepo\", \"$q\", \"$tgModel\"];\n\n    function QueueModelTransformation(qqueue1, repo, q, model1) {\n      this.qqueue = qqueue1;\n      this.repo = repo;\n      this.q = q;\n      this.model = model1;\n    }\n\n    QueueModelTransformation.prototype.setObject = function(scope1, prop) {\n      this.scope = scope1;\n      this.prop = prop;\n    };\n\n    QueueModelTransformation.prototype.clone = function() {\n      var attrs, model;\n      attrs = _.cloneDeep(this.scope[this.prop]._attrs);\n      model = this.model.make_model(this.scope[this.prop]._name, attrs);\n      return model;\n    };\n\n    QueueModelTransformation.prototype.getObj = function() {\n      return this.scope[this.prop];\n    };\n\n    QueueModelTransformation.prototype.save = function(transformation) {\n      var defered;\n      defered = this.q.defer();\n      this.qqueue.add((function(_this) {\n        return function() {\n          var clone, comment, modified, obj, success;\n          obj = _this.getObj();\n          comment = obj.comment;\n          obj.comment = '';\n          clone = _this.clone();\n          modified = _.omit(obj._modifiedAttrs, ['version']);\n          clone = _.assign(clone, modified);\n          transformation(clone);\n          if (comment.length) {\n            clone.comment = comment;\n          }\n          success = function() {\n            _this.scope[_this.prop] = clone;\n            return defered.resolve.apply(null, arguments);\n          };\n          return _this.repo.save(clone).then(success, defered.reject);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    return QueueModelTransformation;\n\n  })(taiga.Service);\n\n  module.service(\"$tgQueueModelTransformation\", QueueModelTransformation);\n\n  Template = function($templateCache) {\n    return {\n      get: (function(_this) {\n        return function(name, lodash) {\n          var tmp;\n          if (lodash == null) {\n            lodash = false;\n          }\n          tmp = $templateCache.get(name);\n          if (lodash) {\n            tmp = _.template(tmp);\n          }\n          return tmp;\n        };\n      })(this)\n    };\n  };\n\n  module.factory(\"$tgTemplate\", [\"$templateCache\", Template]);\n\n  Capslock = function() {\n    var template;\n    template = \"<tg-svg class=\\\"capslock\\\" ng-if=\\\"capslockIcon && iscapsLockActivated\\\" svg-icon='icon-capslock' svg-title='COMMON.CAPSLOCK_WARNING'></tg-svg>\";\n    return {\n      template: template\n    };\n  };\n\n  module.directive(\"tgCapslock\", [Capslock]);\n\n  Svg = function() {\n    var template;\n    template = \"<svg class=\\\"{{ 'icon ' + svgIcon }}\\\" style=\\\"fill: {{ svgFill }}\\\">\\n    <use xlink:href=\\\"\\\" ng-attr-xlink:href=\\\"{{ '#' + svgIcon }}\\\" ng-attr-href=\\\"{{ '#' + svgIcon }}\\\">\\n        <title ng-if=\\\"svgTitle\\\">{{svgTitle}}</title>\\n        <title ng-if=\\\"svgTitleTranslate\\\">{{svgTitleTranslate | translate: svgTitleTranslateValues}}</title>\\n    </use>\\n</svg>\";\n    return {\n      scope: {\n        svgIcon: \"@\",\n        svgTitle: \"@\",\n        svgTitleTranslate: \"@\",\n        svgTitleTranslateValues: \"=\",\n        svgFill: \"=\"\n      },\n      template: template\n    };\n  };\n\n  module.directive(\"tgSvg\", [Svg]);\n\n  Autofocus = function($timeout, $parse, animationFrame) {\n    return {\n      restrict: 'A',\n      link: function($scope, $element, attrs) {\n        var model;\n        if (attrs.ngShow) {\n          model = $parse(attrs.ngShow);\n          return $scope.$watch(model, function(value) {\n            if (value === true) {\n              return $timeout(function() {\n                return $element[0].focus();\n              });\n            }\n          });\n        } else {\n          return $timeout(function() {\n            return $element[0].focus();\n          });\n        }\n      }\n    };\n  };\n\n  module.directive('tgAutofocus', ['$timeout', '$parse', \"animationFrame\", Autofocus]);\n\n  module.directive('tgPreloadImage', function() {\n    var preload, spinner, template;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    template = \"<div>\\n    <ng-transclude></ng-transclude>\\n</div>\";\n    preload = function(src, onLoad) {\n      var image;\n      image = new Image();\n      image.onload = onLoad;\n      image.src = src;\n      return image;\n    };\n    return {\n      template: template,\n      transclude: true,\n      replace: true,\n      link: function(scope, el, attrs) {\n        var image, onLoad, timeout;\n        image = el.find('img:last');\n        timeout = null;\n        onLoad = function() {\n          el.find('.loading-spinner').remove();\n          image.show();\n          if (timeout) {\n            clearTimeout(timeout);\n            return timeout = null;\n          }\n        };\n        return attrs.$observe('preloadSrc', function(src) {\n          if (timeout) {\n            clearTimeout(timeout);\n          }\n          el.find('.loading-spinner').remove();\n          timeout = setTimeout(function() {\n            return el.prepend(spinner);\n          }, 200);\n          image.hide();\n          return preload(src, onLoad);\n        });\n      }\n    };\n  });\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailController, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaCommon\");\n\n  DetailController = (function() {\n    DetailController.$inject = ['$routeParams', '$tgRepo', \"tgProjectService\", \"$tgNavUrls\", \"$location\"];\n\n    function DetailController(params, repo, projectService, navurls, location) {\n      this.params = params;\n      this.repo = repo;\n      this.projectService = projectService;\n      this.navurls = navurls;\n      this.location = location;\n      this.repo.resolve({\n        pslug: this.params.pslug,\n        ref: this.params.ref\n      }).then((function(_this) {\n        return function(result) {\n          var url;\n          if (result.issue) {\n            url = _this.navurls.resolve('project-issues-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.task) {\n            url = _this.navurls.resolve('project-tasks-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.us) {\n            url = _this.navurls.resolve('project-userstories-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.epic) {\n            url = _this.navurls.resolve('project-epics-detail', {\n              project: _this.projectService.project.get('slug'),\n              ref: _this.params.ref\n            });\n          } else if (result.wikipage) {\n            url = _this.navurls.resolve('project-wiki-page', {\n              project: _this.projectService.project.get('slug'),\n              slug: _this.params.ref\n            });\n          }\n          return _this.location.path(url);\n        };\n      })(this));\n    }\n\n    return DetailController;\n\n  })();\n\n  module.controller(\"DetailController\", DetailController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaEpics\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EventsProvider, EventsService, bindMethods, module, startswith, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEvents\", []);\n\n  EventsService = (function() {\n    function EventsService(win, log, config, auth, liveAnnouncementService1, rootScope) {\n      this.win = win;\n      this.log = log;\n      this.config = config;\n      this.auth = auth;\n      this.liveAnnouncementService = liveAnnouncementService1;\n      this.rootScope = rootScope;\n      this.processMessage = bind(this.processMessage, this);\n      bindMethods(this);\n    }\n\n    EventsService.prototype.initialize = function(sessionId) {\n      this.sessionId = sessionId;\n      this.subscriptions = {};\n      this.connected = false;\n      this.error = false;\n      this.pendingMessages = [];\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = null;\n      if (this.win.WebSocket === void 0) {\n        return this.log.info(\"WebSockets not supported on your browser\");\n      }\n    };\n\n    EventsService.prototype.setupConnection = function() {\n      var loc, path, scheme, url;\n      this.stopExistingConnection();\n      url = this.config.get(\"eventsUrl\");\n      if (!url) {\n        return;\n      }\n      if (!startswith(url, \"ws:\") && !startswith(url, \"wss:\")) {\n        loc = this.win.location;\n        scheme = loc.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n        path = _.trimStart(url, \"/\");\n        url = scheme + \"//\" + loc.host + \"/\" + path;\n      }\n      this.error = false;\n      this.ws = new this.win.WebSocket(url);\n      this.ws.addEventListener(\"open\", this.onOpen);\n      this.ws.addEventListener(\"message\", this.onMessage);\n      this.ws.addEventListener(\"error\", this.onError);\n      return this.ws.addEventListener(\"close\", this.onClose);\n    };\n\n    EventsService.prototype.stopExistingConnection = function() {\n      if (this.ws === void 0) {\n        return;\n      }\n      this.ws.removeEventListener(\"open\", this.onOpen);\n      this.ws.removeEventListener(\"close\", this.onClose);\n      this.ws.removeEventListener(\"error\", this.onError);\n      this.ws.removeEventListener(\"message\", this.onMessage);\n      this.stopHeartBeatMessages();\n      this.ws.close();\n      return delete this.ws;\n    };\n\n    EventsService.prototype.notifications = function() {\n      return this.subscribe(null, 'notifications', (function(_this) {\n        return function(data) {\n          _this.liveAnnouncementService.show(data.title, data.desc);\n          return _this.rootScope.$digest();\n        };\n      })(this));\n    };\n\n    EventsService.prototype.liveNotifications = function() {\n      var subscribe, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      subscribe = (function(_this) {\n        return function() {\n          return _this.subscribe(null, \"live_notifications.\" + userId, function(data) {\n            var notification;\n            notification = new Notification(data.title, {\n              icon: \"/\" + window._version + \"/images/favicon.png\",\n              body: data.body,\n              tag: data.id\n            });\n            notification.onshow = function() {\n              if (data.timeout && data.timeout > 0) {\n                return setTimeout(function() {\n                  return notification.close();\n                }, data.timeout);\n              }\n            };\n            if (data.url) {\n              return notification.onclick = function() {\n                return window.open(data.url);\n              };\n            }\n          });\n        };\n      })(this);\n      if (!window.Notification) {\n        return this.log.info(\"This browser does not support desktop notification\");\n      } else if (Notification.permission === \"granted\") {\n        return subscribe();\n      } else if (Notification.permission !== 'denied') {\n        return Notification.requestPermission((function(_this) {\n          return function(permission) {\n            if (permission === \"granted\") {\n              return subscribe();\n            }\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.webNotifications = function() {\n      var randomTimeout, routingKey, userId;\n      if (this.auth.userData == null) {\n        return;\n      }\n      userId = this.auth.userData.get('id');\n      routingKey = \"web_notifications.\" + userId;\n      randomTimeout = taiga.randomInt(700, 1000);\n      return this.subscribe(null, routingKey, (function(_this) {\n        return function(data) {\n          return _this.rootScope.$broadcast(\"notifications:new\");\n        };\n      })(this));\n    };\n\n    EventsService.prototype.startHeartBeatMessages = function() {\n      var heartbeatIntervalTime, maxMissedHeartbeats, reconnectTryInterval;\n      if (this.heartbeatInterval) {\n        return;\n      }\n      maxMissedHeartbeats = this.config.get(\"eventsMaxMissedHeartbeats\", 5);\n      heartbeatIntervalTime = this.config.get(\"eventsHeartbeatIntervalTime\", 60000);\n      reconnectTryInterval = this.config.get(\"eventsReconnectTryInterval\", 10000);\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = setInterval((function(_this) {\n        return function() {\n          var e;\n          try {\n            if (_this.missedHeartbeats >= maxMissedHeartbeats) {\n              throw new Error(\"Too many missed heartbeats PINGs.\");\n            }\n            _this.missedHeartbeats++;\n            _this.sendMessage({\n              cmd: \"ping\"\n            });\n            return _this.log.debug(\"HeartBeat send PING\");\n          } catch (error1) {\n            e = error1;\n            _this.log.error(\"HeartBeat error: \" + e.message);\n            return _this.setupConnection();\n          }\n        };\n      })(this), heartbeatIntervalTime);\n      return this.log.debug(\"HeartBeat enabled\");\n    };\n\n    EventsService.prototype.stopHeartBeatMessages = function() {\n      if (!this.heartbeatInterval) {\n        return;\n      }\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n      return this.log.debug(\"HeartBeat disabled\");\n    };\n\n    EventsService.prototype.processHeartBeatPongMessage = function(data) {\n      this.missedHeartbeats = 0;\n      return this.log.debug(\"HeartBeat received PONG\");\n    };\n\n    EventsService.prototype.serialize = function(message) {\n      if (_.isObject(message)) {\n        return JSON.stringify(message);\n      }\n      return message;\n    };\n\n    EventsService.prototype.sendMessage = function(message) {\n      var i, len, messages, msg, results;\n      this.pendingMessages.push(message);\n      if (!this.connected) {\n        return;\n      }\n      messages = _.map(this.pendingMessages, this.serialize);\n      this.pendingMessages = [];\n      results = [];\n      for (i = 0, len = messages.length; i < len; i++) {\n        msg = messages[i];\n        results.push(this.ws.send(msg));\n      }\n      return results;\n    };\n\n    EventsService.prototype.processMessage = function(data) {\n      var routingKey, subscription;\n      routingKey = data.routing_key;\n      if (this.subscriptions[routingKey] == null) {\n        return;\n      }\n      subscription = this.subscriptions[routingKey];\n      if (subscription.scope) {\n        return subscription.scope.$apply(function() {\n          return subscription.callback(data.data);\n        });\n      } else {\n        return subscription.callback(data.data);\n      }\n    };\n\n    EventsService.prototype.subscribe = function(scope, routingKey, callback) {\n      var message, subscription;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Subscribe to: \" + routingKey);\n      subscription = {\n        scope: scope,\n        routingKey: routingKey,\n        callback: callback\n      };\n      message = {\n        \"cmd\": \"subscribe\",\n        \"routing_key\": routingKey\n      };\n      this.subscriptions[routingKey] = subscription;\n      this.sendMessage(message);\n      if (scope) {\n        return scope.$on(\"$destroy\", (function(_this) {\n          return function() {\n            return _this.unsubscribe(routingKey);\n          };\n        })(this));\n      }\n    };\n\n    EventsService.prototype.unsubscribe = function(routingKey) {\n      var message;\n      if (this.error) {\n        return;\n      }\n      this.log.debug(\"Unsubscribe from: \" + routingKey);\n      message = {\n        \"cmd\": \"unsubscribe\",\n        \"routing_key\": routingKey\n      };\n      return this.sendMessage(message);\n    };\n\n    EventsService.prototype.onOpen = function() {\n      var message, token;\n      this.connected = true;\n      this.log.debug(\"WebSocket connection opened\");\n      token = this.auth.getToken();\n      message = {\n        cmd: \"auth\",\n        data: {\n          token: token,\n          sessionId: this.sessionId\n        }\n      };\n      this.sendMessage(message);\n      this.startHeartBeatMessages();\n      this.notifications();\n      this.liveNotifications();\n      return this.webNotifications();\n    };\n\n    EventsService.prototype.onMessage = function(event) {\n      var data;\n      this.log.debug(\"WebSocket message received: \" + event.data);\n      data = JSON.parse(event.data);\n      if (data.cmd === \"pong\") {\n        return this.processHeartBeatPongMessage(data);\n      } else {\n        return this.processMessage(data);\n      }\n    };\n\n    EventsService.prototype.onError = function(error) {\n      this.log.error(\"WebSocket error: \" + error);\n      this.error = true;\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    EventsService.prototype.onClose = function() {\n      this.log.debug(\"WebSocket closed.\");\n      this.connected = false;\n      this.stopHeartBeatMessages();\n      return setTimeout(this.setupConnection, this.reconnectTryInterval);\n    };\n\n    return EventsService;\n\n  })();\n\n  EventsProvider = (function() {\n    function EventsProvider() {}\n\n    EventsProvider.prototype.setSessionId = function(sessionId) {\n      return this.sessionId = sessionId;\n    };\n\n    EventsProvider.prototype.$get = function($win, $log, $conf, $auth, liveAnnouncementService, $rootScope) {\n      var service;\n      service = new EventsService($win, $log, $conf, $auth, liveAnnouncementService, $rootScope);\n      service.initialize(this.sessionId);\n      return service;\n    };\n\n    EventsProvider.prototype.$get.$inject = [\"$window\", \"$log\", \"$tgConfig\", \"$tgAuth\", \"tgLiveAnnouncementService\", \"$rootScope\"];\n\n    return EventsProvider;\n\n  })();\n\n  module.provider(\"$tgEvents\", EventsProvider);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackDirective, bindOnce, debounce, groupBy, mixOf, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaFeedback\", []);\n\n  FeedbackDirective = function($lightboxService, $repo, $confirm, $loading, feedbackService) {\n    var directive, link;\n    link = function($scope, $el, $attrs) {\n      var form, openLightbox, submit, submitButton;\n      form = $el.find(\"form\").checksley();\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.create(\"feedback\", $scope.feedback);\n          promise.then(function(data) {\n            currentLoading.finish();\n            $lightboxService.close($el);\n            return $confirm.notify(\"success\", \"\\\\o/ we'll be happy to read your\");\n          });\n          return promise.then(null, function() {\n            currentLoading.finish();\n            return $confirm.notify(\"error\");\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      openLightbox = function() {\n        $scope.feedback = {};\n        $lightboxService.open($el);\n        return $el.find(\"textarea\").focus();\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return openLightbox();\n    };\n    directive = {\n      link: link,\n      templateUrl: \"common/lightbox-feedback.html\",\n      scope: {}\n    };\n    return directive;\n  };\n\n  module.directive(\"tgLbFeedback\", [\"lightboxService\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"tgFeedbackService\", FeedbackDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIntegrations\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaIssues\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaKanban\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaPlugins\", [\"ngRoute\"]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProject\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskAssignedToInlineEditionDirective, RelatedTaskCreateButtonDirective, RelatedTaskCreateFormDirective, RelatedTaskRowDirective, RelatedTasksDirective, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaRelatedTasks\", []);\n\n  RelatedTaskRowDirective = function($repo, $compile, $confirm, $rootscope, $loading, $template, $translate, $emojis) {\n    var link, templateEdit, templateView;\n    templateView = $template.get(\"task/related-task-row.html\", true);\n    templateEdit = $template.get(\"task/related-task-row-edit.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var renderEdit, renderView, saveTask;\n      saveTask = debounce(2000, function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.save(task);\n        promise.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"related-tasks:update\");\n          };\n        })(this));\n        promise.then(null, (function(_this) {\n          return function() {\n            currentLoading.finish();\n            $el.find('input').val(task.subject);\n            return $confirm.notify(\"error\");\n          };\n        })(this));\n        return promise;\n      });\n      renderEdit = function(task) {\n        if (this.childScope) {\n          this.childScope.$destroy();\n        }\n        this.childScope = $scope.$new();\n        $el.off();\n        $el.html($compile(templateEdit({\n          task: task\n        }))(childScope));\n        $el.find(\".task-name input\").val(task.subject);\n        $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 13) {\n            return saveTask($model.$modelValue).then(function() {\n              return renderView($model.$modelValue);\n            });\n          } else if (event.keyCode === 27) {\n            return renderView($model.$modelValue);\n          }\n        });\n        $el.on(\"click\", \".save-task\", function(event) {\n          return saveTask($model.$modelValue).then(function() {\n            return renderView($model.$modelValue);\n          });\n        });\n        return $el.on(\"click\", \".cancel-edit\", function(event) {\n          return renderView($model.$modelValue);\n        });\n      };\n      renderView = function(task) {\n        var perms;\n        perms = {\n          modify_task: $scope.project.my_permissions.indexOf(\"modify_task\") !== -1,\n          delete_task: $scope.project.my_permissions.indexOf(\"delete_task\") !== -1\n        };\n        $el.html($compile(templateView({\n          task: task,\n          perms: perms,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        }))($scope));\n        $el.on(\"click\", \".edit-task\", function() {\n          renderEdit($model.$modelValue);\n          return $el.find('input').focus().select();\n        });\n        return $el.on(\"click\", \".delete-task\", function(event) {\n          var message, title;\n          title = $translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          task = $model.$modelValue;\n          message = task.subject;\n          return $confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = $repo.remove(task);\n            promise.then(function() {\n              askResponse.finish();\n              return $scope.$emit(\"related-tasks:delete\");\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          });\n        });\n      };\n      $scope.$watch($attrs.ngModel, function(val) {\n        if (!val) {\n          return;\n        }\n        return renderView(val);\n      });\n      $scope.$on(\"related-tasks:assigned-to-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      $scope.$on(\"related-tasks:status-changed\", function() {\n        return $rootscope.$broadcast(\"related-tasks:update\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgRelatedTaskRow\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"$tgTemplate\", \"$translate\", \"$tgEmojis\", RelatedTaskRowDirective]);\n\n  RelatedTaskCreateFormDirective = function($repo, $compile, $confirm, $tgmodel, $loading, $analytics) {\n    var link, newTask;\n    newTask = {\n      subject: \"\",\n      assigned_to: null\n    };\n    link = function($scope, $el, $attrs) {\n      var close, createTask, render, reset;\n      createTask = function(task) {\n        var currentLoading, promise;\n        task.subject = $el.find('input').val();\n        task.assigned_to = $scope.newTask.assigned_to;\n        task.status = $scope.newTask.status;\n        $scope.newTask.status = $scope.project.default_task_status;\n        $scope.newTask.assigned_to = null;\n        currentLoading = $loading().target($el.find('.task-name')).start();\n        promise = $repo.create(\"tasks\", task);\n        promise.then(function() {\n          $analytics.trackEvent(\"task\", \"create\", \"create task on userstory\", 1);\n          currentLoading.finish();\n          return $scope.$emit(\"related-tasks:add\");\n        });\n        promise.then(null, function() {\n          $el.find('input').val(task.subject);\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n        return promise;\n      };\n      close = function() {\n        $el.off();\n        return $scope.openNewRelatedTask = false;\n      };\n      reset = function() {\n        newTask = {\n          subject: \"\",\n          assigned_to: null\n        };\n        newTask[\"status\"] = $scope.project.default_task_status;\n        newTask[\"project\"] = $scope.project.id;\n        newTask[\"user_story\"] = $scope.us.id;\n        return $scope.newTask = $tgmodel.make_model(\"tasks\", newTask);\n      };\n      render = function() {\n        if ($scope.openNewRelatedTask) {\n          return;\n        }\n        $scope.openNewRelatedTask = true;\n        return $el.on(\"keyup\", \"input\", function(event) {\n          if (event.keyCode === 13) {\n            return createTask(newTask).then(function() {\n              reset();\n              return $el.find('input').focus();\n            });\n          } else if (event.keyCode === 27) {\n            return $scope.$apply(function() {\n              return close();\n            });\n          }\n        });\n      };\n      $scope.save = function() {\n        return createTask(newTask).then(function() {\n          return close();\n        });\n      };\n      taiga.bindOnce($scope, \"us\", reset);\n      $scope.$on(\"related-tasks:show-form\", function() {\n        return $scope.$apply(render);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: 'task/related-task-create-form.html'\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateForm\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgLoading\", \"$tgAnalytics\", RelatedTaskCreateFormDirective]);\n\n  RelatedTaskCreateButtonDirective = function($repo, $compile, $confirm, $tgmodel, $template) {\n    var link, template;\n    template = $template.get(\"common/components/add-button.html\", true);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch(\"project\", function(val) {\n        if (!val) {\n          return;\n        }\n        $el.off();\n        if ($scope.project.my_permissions.indexOf(\"add_task\") !== -1) {\n          $el.html($compile(template())($scope));\n        } else {\n          $el.html(\"\");\n        }\n        return $el.on(\"click\", \".add-button\", function(event) {\n          return $scope.$emit(\"related-tasks:add-new-clicked\");\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskCreateButton\", [\"$tgRepo\", \"$compile\", \"$tgConfirm\", \"$tgModel\", \"$tgTemplate\", RelatedTaskCreateButtonDirective]);\n\n  RelatedTasksDirective = function($repo, $rs, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _isEditable, _isVisible, loadTasks;\n      loadTasks = function() {\n        return $rs.tasks.list($scope.projectId, null, $scope.usId).then(function(result) {\n          return Immutable.fromJS(result.data);\n        });\n      };\n      _isVisible = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"view_tasks\") !== -1;\n        }\n        return false;\n      };\n      _isEditable = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.reorderTask = function(task, newIndex) {\n        return $rootscope.$broadcast('task:reorder', task, newIndex);\n      };\n      $scope.showAddTaks = function() {\n        if ($scope.project) {\n          return $scope.project.my_permissions.indexOf(\"add_task\") !== -1;\n        }\n        return false;\n      };\n      $scope.showRelatedTasks = function() {\n        return _isVisible();\n      };\n      $scope.$on(\"related-tasks:add\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:reordered\", function() {\n        return loadTasks();\n      });\n      $scope.$on(\"related-tasks:delete\", function() {\n        return loadTasks().then(function() {\n          return $rootscope.$broadcast(\"related-tasks:update\");\n        });\n      });\n      $scope.$on(\"related-tasks:add-new-clicked\", function() {\n        return $scope.$broadcast(\"related-tasks:show-form\");\n      });\n      taiga.bindOnce($scope, \"us\", function(val) {\n        return loadTasks();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", RelatedTasksDirective]);\n\n  RelatedTaskAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\\n<figcaption><%- name %></figcaption>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task, updateRelatedTask;\n      updateRelatedTask = function(task) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = $scope.usersById[task.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".task-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $scope.$watch($attrs.tgRelatedTaskAssignedToInlineEdition, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskAssignedToInlineEdition);\n        return updateRelatedTask(task);\n      });\n      updateRelatedTask(task);\n      $el.on(\"click\", \".task-assignedto\", function(event) {\n        var onClose;\n        event.preventDefault();\n        event.stopPropagation();\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            task.assigned_to = assignedUsers.pop() || null;\n            if (autoSave) {\n              return $repo.save(task).then(function() {\n                $scope.$emit(\"related-tasks:assigned-to-changed\");\n                return updateRelatedTask(task);\n              });\n            }\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [task.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", RelatedTaskAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ResourcesService, initResources, initUrls, module, taiga, urls,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ResourcesService = (function(superClass) {\n    extend(ResourcesService, superClass);\n\n    function ResourcesService() {\n      return ResourcesService.__super__.constructor.apply(this, arguments);\n    }\n\n    return ResourcesService;\n\n  })(taiga.Service);\n\n  urls = {\n    \"auth\": \"/auth\",\n    \"auth-register\": \"/auth/register\",\n    \"invitations\": \"/invitations\",\n    \"users\": \"/users\",\n    \"by_username\": \"/users/by_username\",\n    \"users-password-recovery\": \"/users/password_recovery\",\n    \"users-change-password-from-recovery\": \"/users/change_password_from_recovery\",\n    \"users-change-password\": \"/users/change_password\",\n    \"users-change-email\": \"/users/change_email\",\n    \"users-cancel-account\": \"/users/cancel\",\n    \"users-export\": \"/users/export\",\n    \"user-stats\": \"/users/%s/stats\",\n    \"user-liked\": \"/users/%s/liked\",\n    \"user-voted\": \"/users/%s/voted\",\n    \"user-watched\": \"/users/%s/watched\",\n    \"user-contacts\": \"/users/%s/contacts\",\n    \"user-me\": \"/users/me\",\n    \"user-send-verification-email\": \"/users/send_verification_email\",\n    \"permissions\": \"/permissions\",\n    \"notify-policies\": \"/notify-policies\",\n    \"notifications\": \"/web-notifications\",\n    \"user-project-settings\": \"/user-project-settings\",\n    \"user-storage\": \"/user-storage\",\n    \"memberships\": \"/memberships\",\n    \"bulk-create-memberships\": \"/memberships/bulk_create\",\n    \"roles\": \"/roles\",\n    \"permissions\": \"/permissions\",\n    \"resolver\": \"/resolver\",\n    \"projects\": \"/projects\",\n    \"project-templates\": \"/project-templates\",\n    \"project-modules\": \"/projects/%s/modules\",\n    \"bulk-update-projects-order\": \"/projects/bulk_update_order\",\n    \"project-like\": \"/projects/%s/like\",\n    \"project-unlike\": \"/projects/%s/unlike\",\n    \"project-watch\": \"/projects/%s/watch\",\n    \"project-unwatch\": \"/projects/%s/unwatch\",\n    \"project-contact\": \"contact\",\n    \"project-transfer-validate-token\": \"/projects/%s/transfer_validate_token\",\n    \"project-transfer-accept\": \"/projects/%s/transfer_accept\",\n    \"project-transfer-reject\": \"/projects/%s/transfer_reject\",\n    \"project-transfer-request\": \"/projects/%s/transfer_request\",\n    \"project-transfer-start\": \"/projects/%s/transfer_start\",\n    \"epic-statuses\": \"/epic-statuses\",\n    \"userstory-statuses\": \"/userstory-statuses\",\n    \"userstory-due-dates\": \"/userstory-due-dates\",\n    \"userstory-due-dates-create-default\": \"/userstory-due-dates/create_default\",\n    \"points\": \"/points\",\n    \"task-statuses\": \"/task-statuses\",\n    \"task-due-dates\": \"/task-due-dates\",\n    \"task-due-dates-create-default\": \"/task-due-dates/create_default\",\n    \"issue-statuses\": \"/issue-statuses\",\n    \"issue-due-dates\": \"/issue-due-dates\",\n    \"issue-due-dates-create-default\": \"/issue-due-dates/create_default\",\n    \"issue-types\": \"/issue-types\",\n    \"priorities\": \"/priorities\",\n    \"severities\": \"/severities\",\n    \"milestones\": \"/milestones\",\n    \"move-userstories-to-milestone\": \"/milestones/%s/move_userstories_to_sprint\",\n    \"move-tasks-to-milestone\": \"/milestones/%s/move_tasks_to_sprint\",\n    \"move-issues-to-milestone\": \"/milestones/%s/move_issues_to_sprint\",\n    \"epics\": \"/epics\",\n    \"epic-upvote\": \"/epics/%s/upvote\",\n    \"epic-downvote\": \"/epics/%s/downvote\",\n    \"epic-watch\": \"/epics/%s/watch\",\n    \"epic-unwatch\": \"/epics/%s/unwatch\",\n    \"epic-related-userstories\": \"/epics/%s/related_userstories\",\n    \"epic-related-userstories-bulk-create\": \"/epics/%s/related_userstories/bulk_create\",\n    \"userstories\": \"/userstories\",\n    \"bulk-create-us\": \"/userstories/bulk_create\",\n    \"bulk-update-us-backlog-order\": \"/userstories/bulk_update_backlog_order\",\n    \"bulk-update-us-milestone\": \"/userstories/bulk_update_milestone\",\n    \"bulk-update-us-miles-order\": \"/userstories/bulk_update_sprint_order\",\n    \"bulk-update-us-kanban-order\": \"/userstories/bulk_update_kanban_order\",\n    \"userstories-filters\": \"/userstories/filters_data\",\n    \"userstory-upvote\": \"/userstories/%s/upvote\",\n    \"userstory-downvote\": \"/userstories/%s/downvote\",\n    \"userstory-watch\": \"/userstories/%s/watch\",\n    \"userstory-unwatch\": \"/userstories/%s/unwatch\",\n    \"tasks\": \"/tasks\",\n    \"bulk-create-tasks\": \"/tasks/bulk_create\",\n    \"bulk-update-task-taskboard-order\": \"/tasks/bulk_update_taskboard_order\",\n    \"bulk-update-task-milestone\": \"/tasks/bulk_update_milestone\",\n    \"task-upvote\": \"/tasks/%s/upvote\",\n    \"task-downvote\": \"/tasks/%s/downvote\",\n    \"task-watch\": \"/tasks/%s/watch\",\n    \"task-unwatch\": \"/tasks/%s/unwatch\",\n    \"task-filters\": \"/tasks/filters_data\",\n    \"promote-task-to-us\": \"/tasks/%s/promote_to_user_story\",\n    \"issues\": \"/issues\",\n    \"bulk-create-issues\": \"/issues/bulk_create\",\n    \"bulk-update-issue-milestone\": \"/issues/bulk_update_milestone\",\n    \"issues-filters\": \"/issues/filters_data\",\n    \"issue-upvote\": \"/issues/%s/upvote\",\n    \"issue-downvote\": \"/issues/%s/downvote\",\n    \"issue-watch\": \"/issues/%s/watch\",\n    \"issue-unwatch\": \"/issues/%s/unwatch\",\n    \"promote-issue-to-us\": \"/issues/%s/promote_to_user_story\",\n    \"swimlanes\": \"/swimlanes\",\n    \"swimlane-userstory-statuses\": \"/swimlane-userstory-statuses\",\n    \"wiki\": \"/wiki\",\n    \"wiki-restore\": \"/wiki/%s/restore\",\n    \"wiki-links\": \"/wiki-links\",\n    \"history/epic\": \"/history/epic\",\n    \"history/us\": \"/history/userstory\",\n    \"history/issue\": \"/history/issue\",\n    \"history/task\": \"/history/task\",\n    \"history/wiki\": \"/history/wiki\",\n    \"attachments/epic\": \"/epics/attachments\",\n    \"attachments/us\": \"/userstories/attachments\",\n    \"attachments/issue\": \"/issues/attachments\",\n    \"attachments/task\": \"/tasks/attachments\",\n    \"attachments/wiki_page\": \"/wiki/attachments\",\n    \"attachments/wikipage\": \"/wiki/attachments\",\n    \"custom-attributes/epic\": \"/epic-custom-attributes\",\n    \"custom-attributes/userstory\": \"/userstory-custom-attributes\",\n    \"custom-attributes/task\": \"/task-custom-attributes\",\n    \"custom-attributes/issue\": \"/issue-custom-attributes\",\n    \"custom-attributes-values/epic\": \"/epics/custom-attributes-values\",\n    \"custom-attributes-values/userstory\": \"/userstories/custom-attributes-values\",\n    \"custom-attributes-values/task\": \"/tasks/custom-attributes-values\",\n    \"custom-attributes-values/issue\": \"/issues/custom-attributes-values\",\n    \"webhooks\": \"/webhooks\",\n    \"webhooks-test\": \"/webhooks/%s/test\",\n    \"webhooklogs\": \"/webhooklogs\",\n    \"webhooklogs-resend\": \"/webhooklogs/%s/resend\",\n    \"epics-csv\": \"/epics/csv?uuid=%s\",\n    \"userstories-csv\": \"/userstories/csv?uuid=%s\",\n    \"tasks-csv\": \"/tasks/csv?uuid=%s\",\n    \"issues-csv\": \"/issues/csv?uuid=%s\",\n    \"timeline-profile\": \"/timeline/profile\",\n    \"timeline-user\": \"/timeline/user\",\n    \"timeline-project\": \"/timeline/project\",\n    \"search\": \"/search\",\n    \"exporter\": \"/exporter\",\n    \"importer\": \"/importer/load_dump\",\n    \"feedback\": \"/feedback\",\n    \"locales\": \"/locales\",\n    \"applications\": \"/applications\",\n    \"application-tokens\": \"/application-tokens\",\n    \"stats-discover\": \"/stats/discover\",\n    \"importers-trello-auth-url\": \"/importers/trello/auth_url\",\n    \"importers-trello-authorize\": \"/importers/trello/authorize\",\n    \"importers-trello-list-projects\": \"/importers/trello/list_projects\",\n    \"importers-trello-list-users\": \"/importers/trello/list_users\",\n    \"importers-trello-import-project\": \"/importers/trello/import_project\",\n    \"importers-jira-auth-url\": \"/importers/jira/auth_url\",\n    \"importers-jira-authorize\": \"/importers/jira/authorize\",\n    \"importers-jira-list-projects\": \"/importers/jira/list_projects\",\n    \"importers-jira-list-users\": \"/importers/jira/list_users\",\n    \"importers-jira-import-project\": \"/importers/jira/import_project\",\n    \"importers-github-auth-url\": \"/importers/github/auth_url\",\n    \"importers-github-authorize\": \"/importers/github/authorize\",\n    \"importers-github-list-projects\": \"/importers/github/list_projects\",\n    \"importers-github-list-users\": \"/importers/github/list_users\",\n    \"importers-github-import-project\": \"/importers/github/import_project\",\n    \"importers-asana-auth-url\": \"/importers/asana/auth_url\",\n    \"importers-asana-authorize\": \"/importers/asana/authorize\",\n    \"importers-asana-list-projects\": \"/importers/asana/list_projects\",\n    \"importers-asana-list-users\": \"/importers/asana/list_users\",\n    \"importers-asana-import-project\": \"/importers/asana/import_project\"\n  };\n\n  initUrls = function($log, $urls) {\n    $log.debug(\"Initialize api urls\");\n    return $urls.update(urls);\n  };\n\n  initResources = function($log, $rs) {\n    var i, len, provider, providers, results;\n    $log.debug(\"Initialize resources\");\n    providers = _.toArray(arguments).slice(2);\n    results = [];\n    for (i = 0, len = providers.length; i < len; i++) {\n      provider = providers[i];\n      results.push(provider($rs));\n    }\n    return results;\n  };\n\n  module = angular.module(\"taigaResources\", [\"taigaBase\"]);\n\n  module.service(\"$tgResources\", ResourcesService);\n\n  module.run([\"$log\", \"$tgUrls\", initUrls]);\n\n  module.run([\"$log\", \"$tgResources\", \"$tgProjectsResourcesProvider\", \"$tgCustomAttributesResourcesProvider\", \"$tgCustomAttributesValuesResourcesProvider\", \"$tgMembershipsResourcesProvider\", \"$tgNotifyPoliciesResourcesProvider\", \"$tgInvitationsResourcesProvider\", \"$tgRolesResourcesProvider\", \"$tgUserProjectSettingsResourcesProvider\", \"$tgUserSettingsResourcesProvider\", \"$tgSprintsResourcesProvider\", \"$tgEpicsResourcesProvider\", \"$tgUserstoriesResourcesProvider\", \"$tgTasksResourcesProvider\", \"$tgIssuesResourcesProvider\", \"$tgSwimlanesResourcesProvider\", \"$tgWikiResourcesProvider\", \"$tgSearchResourcesProvider\", \"$tgMdRenderResourcesProvider\", \"$tgHistoryResourcesProvider\", \"$tgKanbanResourcesProvider\", \"$tgModulesResourcesProvider\", \"$tgWebhooksResourcesProvider\", \"$tgWebhookLogsResourcesProvider\", \"$tgLocalesResourcesProvider\", \"$tgUsersResourcesProvider\", initResources]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SearchBoxDirective, SearchController, SearchDirective, bindOnce, debounce, debounceLeading, groupBy, mixOf, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  trim = this.taiga.trim;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaSearch\", []);\n\n  SearchController = (function(superClass) {\n    extend(SearchController, superClass);\n\n    SearchController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function SearchController(scope1, repo, rs, params, q, location, appMetaService, navUrls, translate, errorHandlingService, projectService1) {\n      var description, loadSearchData, title;\n      this.scope = scope1;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.sectionName = \"Search\";\n      this.loadInitialData();\n      title = this.translate.instant(\"SEARCH.PAGE_TITLE\", {\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"SEARCH.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        projectDescription: this.scope.project.description\n      });\n      this.appMetaService.setAll(title, description);\n      this.scope.searchTerm = null;\n      loadSearchData = debounceLeading(100, (function(_this) {\n        return function(t) {\n          return _this.loadSearchData(t);\n        };\n      })(this));\n      bindOnce(this.scope, \"projectId\", (function(_this) {\n        return function(projectId) {\n          if (!_this.scope.searchResults && _this.scope.searchTerm) {\n            return _this.loadSearchData();\n          }\n        };\n      })(this));\n      this.scope.$watch(\"searchTerm\", (function(_this) {\n        return function(term) {\n          if (term !== void 0 && _this.scope.projectId) {\n            return _this.loadSearchData(term);\n          }\n        };\n      })(this));\n    }\n\n    SearchController.prototype.loadFilters = function() {\n      var defered;\n      defered = this.q.defer();\n      defered.resolve();\n      return defered.promise;\n    };\n\n    SearchController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.epicStatusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    SearchController.prototype.loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      this.scope.loading = true;\n      return this._loadSearchData(term).then((function(_this) {\n        return function(data) {\n          _this.scope.searchResults = data;\n          return _this.scope.loading = false;\n        };\n      })(this));\n    };\n\n    SearchController.prototype._loadSearchData = function(term) {\n      if (term == null) {\n        term = \"\";\n      }\n      if (this._promise) {\n        this._promise.abort();\n      }\n      this._promise = this.rs.search[\"do\"](this.scope.projectId, term);\n      return this._promise;\n    };\n\n    SearchController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.scope.projectId = project.id;\n      return this.fillUsersAndRoles(project.members, project.roles);\n    };\n\n    return SearchController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"SearchController\", SearchController);\n\n  SearchBoxDirective = function(projectService, $lightboxService, $navurls, $location, $route) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var openLightbox, project, submit;\n      project = null;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, text, url;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          text = $el.find(\"#search-text\").val();\n          url = $navurls.resolve(\"project-search\", {\n            project: project.get(\"slug\")\n          });\n          return $scope.$apply(function() {\n            $lightboxService.close($el);\n            $location.path(url);\n            $location.search(\"text\", text).path(url);\n            return $route.reload();\n          });\n        };\n      })(this));\n      openLightbox = function() {\n        project = projectService.project;\n        return $lightboxService.open($el).then(function() {\n          return $el.find(\"#search-text\").focus();\n        });\n      };\n      $el.on(\"submit\", \"form\", submit);\n      return openLightbox();\n    };\n    return {\n      templateUrl: \"search/lightbox-search.html\",\n      link: link\n    };\n  };\n\n  SearchBoxDirective.$inject = [\"tgProjectService\", \"lightboxService\", \"$tgNavUrls\", \"$tgLocation\", \"$route\"];\n\n  module.directive(\"tgSearchBox\", SearchBoxDirective);\n\n  SearchDirective = function($log, $compile, $templatecache, $routeparams, $location, $analytics) {\n    var link, linkTable;\n    linkTable = function($scope, $el, $attrs, $ctrl) {\n      var activeSectionName, applyAutoTab, currentSearchResults, getActiveSection, markSectionTabActive, renderFilterTabs, renderTableContent, tabsDom, templates;\n      applyAutoTab = true;\n      activeSectionName = \"userstories\";\n      tabsDom = $el.find(\".search-filter\");\n      currentSearchResults = null;\n      getActiveSection = function(data) {\n        var i, len, maxVal, name, ref, selectedSection, value;\n        maxVal = 0;\n        selectedSection = {};\n        selectedSection.name = \"userstories\";\n        selectedSection.value = [];\n        if (!applyAutoTab) {\n          selectedSection.name = activeSectionName;\n          selectedSection.value = data[activeSectionName];\n          return selectedSection;\n        }\n        if (data) {\n          ref = [\"userstories\", \"epics\", \"issues\", \"tasks\", \"wikipages\"];\n          for (i = 0, len = ref.length; i < len; i++) {\n            name = ref[i];\n            value = data[name];\n            if (value.length > maxVal) {\n              maxVal = value.length;\n              selectedSection.name = name;\n              selectedSection.value = value;\n              break;\n            }\n          }\n        }\n        if (maxVal === 0) {\n          return selectedSection;\n        }\n        return selectedSection;\n      };\n      renderFilterTabs = function(data) {\n        var name, results, value;\n        results = [];\n        for (name in data) {\n          value = data[name];\n          tabsDom.find(\"li.\" + name).show();\n          results.push(tabsDom.find(\"li.\" + name + \" .num\").html(value.length));\n        }\n        return results;\n      };\n      markSectionTabActive = function(section) {\n        tabsDom.find(\"a.active\").removeClass(\"active\");\n        tabsDom.find(\"li.\" + section.name + \" a\").addClass(\"active\");\n        applyAutoTab = false;\n        return activeSectionName = section.name;\n      };\n      templates = {\n        epics: $templatecache.get(\"search-epics\"),\n        issues: $templatecache.get(\"search-issues\"),\n        tasks: $templatecache.get(\"search-tasks\"),\n        userstories: $templatecache.get(\"search-userstories\"),\n        wikipages: $templatecache.get(\"search-wikipages\")\n      };\n      renderTableContent = function(section) {\n        var element, oldElements, oldScope, scope, template;\n        oldElements = $el.find(\".search-result-table\").children();\n        oldScope = oldElements.scope();\n        if (oldScope) {\n          oldScope.$destroy();\n          oldElements.remove();\n        }\n        scope = $scope.$new();\n        scope[section.name] = section.value;\n        template = angular.element.parseHTML(trim(templates[section.name]));\n        element = $compile(template)(scope);\n        return $el.find(\".search-result-table\").html(element);\n      };\n      $scope.$watch(\"searchResults\", function(data) {\n        var activeSection;\n        currentSearchResults = data;\n        if (!currentSearchResults) {\n          return;\n        }\n        activeSection = getActiveSection(data);\n        renderFilterTabs(data);\n        renderTableContent(activeSection);\n        return markSectionTabActive(activeSection);\n      });\n      $scope.$watch(\"searchTerm\", function(searchTerm) {\n        if (searchTerm !== void 0) {\n          $location.search(\"text\", searchTerm);\n        }\n        return $analytics.trackPage($location.url(), \"Search\");\n      });\n      return $el.on(\"click\", \".search-filter li > a\", function(event) {\n        var section, sectionData, sectionName, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        sectionName = target.parent().data(\"name\");\n        sectionData = !currentSearchResults ? [] : currentSearchResults[sectionName];\n        section = {\n          name: sectionName,\n          value: sectionData\n        };\n        return $scope.$apply(function() {\n          renderTableContent(section);\n          return markSectionTabActive(section);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, searchText;\n      $ctrl = $el.controller();\n      linkTable($scope, $el, $attrs, $ctrl);\n      searchText = $routeparams.text;\n      return $scope.$watch(\"projectId\", function(projectId) {\n        if (projectId != null) {\n          return $scope.searchTerm = searchText;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSearch\", [\"$log\", \"$compile\", \"$templateCache\", \"$routeParams\", \"$tgLocation\", \"$tgAnalytics\", SearchDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTaskboard\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTasks\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaTeam\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserSettings\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUserStories\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaWiki\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnalyticsService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  AnalyticsService = (function(superClass) {\n    extend(AnalyticsService, superClass);\n\n    AnalyticsService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function AnalyticsService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"analytics\", {});\n      this.accountId = conf.accountId;\n      this.pageEvent = conf.pageEvent || \"$routeChangeSuccess\";\n      this.trackRoutes = conf.trackRoutes || true;\n      this.ignoreFirstPageLoad = conf.ignoreFirstPageLoad || false;\n    }\n\n    AnalyticsService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Analytics: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectAnalytics();\n      this.win.ga(\"create\", this.accountId, \"auto\");\n      this.win.ga(\"require\", \"ec\");\n      this.win.ga(\"require\", \"displayfeatures\");\n      if (this.trackRoutes && (!this.ignoreFirstPageLoad)) {\n        this.win.ga(\"send\", \"pageview\", this.getUrl());\n      }\n      if (this.trackRoutes) {\n        this.rootscope.$on(this.pageEvent, (function(_this) {\n          return function() {\n            return _this.trackPage(_this.getUrl(), \"Taiga\");\n          };\n        })(this));\n      }\n      this.initialized = true;\n      return this.setUserId();\n    };\n\n    AnalyticsService.prototype.setUserId = function() {\n      var ref, ref1;\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga('set', 'userId', (ref = this.rootscope) != null ? (ref1 = ref.user) != null ? ref1.uuid : void 0 : void 0);\n    };\n\n    AnalyticsService.prototype.getUrl = function() {\n      return this.location.path();\n    };\n\n    AnalyticsService.prototype.injectAnalytics = function() {\n      var fn;\n      fn = (function(i,s,o,g,r,a,m){i[\"GoogleAnalyticsObject\"]=r;i[r]=i[r]||function(){\n              (i[r].q=i[r].q||[]).push(arguments);},i[r].l=1*new Date();a=s.createElement(o),\n              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m);});\n      return fn(window, document, \"script\", \"//www.google-analytics.com/analytics.js\", \"ga\");\n    };\n\n    AnalyticsService.prototype.trackPage = function(url, title) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      title = title || this.doc[0].title;\n      return this.win.ga(\"send\", \"pageview\", {\n        \"page\": url,\n        \"title\": title\n      });\n    };\n\n    AnalyticsService.prototype.trackEvent = function(category, action, label, value) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      return this.win.ga(\"send\", \"event\", category, action, label, value);\n    };\n\n    AnalyticsService.prototype.ecViewPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'detail');\n      return this.trackEvent(\"ecommerce\", \"view-product-detail\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecClickPlan = function(plan) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan.plan_id,\n        'name': plan.name,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'click');\n      return this.trackEvent(\"ecommerce\", \"click-product\", plan.name, plan.plan_id);\n    };\n\n    AnalyticsService.prototype.ecListPlans = function(arg, page) {\n      var i, len, plan, plans, position;\n      plans = arg[0];\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      position = 1;\n      for (i = 0, len = plans.length; i < len; i++) {\n        plan = plans[i];\n        this.win.ga('ec:addImpression', {\n          'id': plan.plan_id,\n          'name': plan.name,\n          'list': page,\n          'position': position\n        });\n        position++;\n      }\n      return this.trackEvent(\"ecommerce\", \"list-plans\");\n    };\n\n    AnalyticsService.prototype.ecAddToCart = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'add');\n      return this.trackEvent('ecommerce', 'add-to-cart', 'Collect Payment Info', null);\n    };\n\n    AnalyticsService.prototype.ecConfirmChange = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 1\n      });\n      return this.trackEvent(\"ecommerce\", \"start-checkout\", \"start\", 1);\n    };\n\n    AnalyticsService.prototype.ecPurchase = function(plan_id, plan_name, plan_price) {\n      if (!this.initialized) {\n        return;\n      }\n      if (!this.win.ga) {\n        return;\n      }\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'checkout', {\n        'step': 2\n      });\n      this.trackEvent(\"ecommerce\", \"end-checkout\", \"end\", 2);\n      this.win.ga('ec:addProduct', {\n        'id': plan_id,\n        'name': plan_name,\n        'price': plan_price,\n        'category': \"plans\",\n        'quantity': 1,\n        'position': 1\n      });\n      this.win.ga('ec:setAction', 'purchase', {\n        'id': plan_id,\n        'revenue': plan_price\n      });\n      return this.trackEvent('ecommerce', 'checkout', 'Plan checkout', null);\n    };\n\n    return AnalyticsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgAnalytics\", AnalyticsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindScope, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  BindScope = function(config) {\n    var link;\n    if (!config.debugInfo) {\n      jQuery.fn.scope = function() {\n        return this.data('scope');\n      };\n    }\n    link = function($scope, $el) {\n      if (!config.debugInfo) {\n        return $el.data('scope', $scope).addClass('tg-scope');\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBindScope\", [\"$tgConfig\", BindScope]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CompileHtmlDirective;\n\n  CompileHtmlDirective = function($compile) {\n    var link;\n    link = function(scope, element, attrs) {\n      return scope.$watch(attrs.tgCompileHtml, function(newValue, oldValue) {\n        element.html(newValue);\n        return $compile(element.contents())(scope);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  CompileHtmlDirective.$inject = [\"$compile\"];\n\n  angular.module(\"taigaCommon\").directive(\"tgCompileHtml\", CompileHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockButtonDirective, CreatedByDisplayDirective, DateRangeDirective, DateSelectorDirective, DeleteButtonDirective, ListItemAssignedtoDirective, ListItemEpicStatusDirective, ListItemIssueStatusDirective, ListItemPriorityDirective, ListItemSeverityDirective, ListItemTaskStatusDirective, ListItemTypeDirective, ListItemUsStatusDirective, SprintProgressBarDirective, TgMainTitleDirective, TgProgressBarDirective, UserDisplayDirective, bindOnce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  DateRangeDirective = function($translate) {\n    var link, renderRange;\n    renderRange = function($el, first, second) {\n      var endDate, prettyDate, startDate;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      startDate = moment(first).format(prettyDate);\n      endDate = moment(second).format(prettyDate);\n      return $el.html($translate.instant(\"TASKBOARD.TITLE_DATE_RANGE\", {\n        startDate: startDate,\n        endDate: endDate\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var first, ref, second;\n      ref = $attrs.tgDateRange.split(\",\"), first = ref[0], second = ref[1];\n      return bindOnce($scope, first, function(valFirst) {\n        return bindOnce($scope, second, function(valSecond) {\n          return renderRange($el, valFirst, valSecond);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateRange\", [\"$translate\", DateRangeDirective]);\n\n  DateSelectorDirective = function($rootscope, datePickerConfigService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var initialize, selectedDate, unbind;\n      selectedDate = null;\n      initialize = function() {\n        var datePickerConfig;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: $el[0]\n        });\n        return $el.picker = new Pikaday(datePickerConfig);\n      };\n      unbind = $rootscope.$on(\"$translateChangeEnd\", (function(_this) {\n        return function(ctx) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          return initialize();\n        };\n      })(this));\n      $attrs.$observe(\"pickerValue\", function(val) {\n        $el.val(val);\n        if (val != null) {\n          if ($el.picker) {\n            $el.picker.destroy();\n          }\n          initialize();\n        }\n        return $el.picker.setDate(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        unbind();\n        return $el.picker.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgDateSelector\", [\"$rootScope\", \"tgDatePickerConfigService\", DateSelectorDirective]);\n\n  SprintProgressBarDirective = function() {\n    var link, renderProgress;\n    renderProgress = function($el, percentage, visual_percentage) {\n      if ($el.hasClass(\".current-progress\")) {\n        return $el.css(\"width\", percentage + \"%\");\n      } else {\n        $el.find(\".current-progress\").css(\"width\", visual_percentage + \"%\");\n        return $el.find(\".number\").html(percentage + \" %\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.tgSprintProgressbar, function(sprint) {\n        var closedPoints, percentage, totalPoints, visual_percentage;\n        closedPoints = sprint.closed_points;\n        totalPoints = sprint.total_points;\n        percentage = 0;\n        if (totalPoints !== 0) {\n          percentage = Math.round(100 * (closedPoints / totalPoints));\n        }\n        visual_percentage = 0;\n        if (totalPoints !== 0) {\n          visual_percentage = Math.round(98 * (closedPoints / totalPoints));\n        }\n        return renderProgress($el, percentage, visual_percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintProgressbar\", SprintProgressBarDirective);\n\n  CreatedByDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      bindOnce($scope, $attrs.ngModel, function(model) {\n        var avatar, ref;\n        if (model != null) {\n          avatar = avatarService.getAvatar(model.owner_extra_info);\n          $scope.owner = model.owner_extra_info || {\n            full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n          };\n          $scope.owner.avatar = avatar.url;\n          $scope.owner.bg = avatar.bg;\n          $scope.url = ((ref = $scope.owner) != null ? ref.is_active : void 0) ? $navUrls.resolve(\"user-profile\", {\n            username: $scope.owner.username\n          }) : \"\";\n          return $scope.date = moment(model.created_date).format($translate.instant(\"COMMON.DATETIME\"));\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      scope: true,\n      templateUrl: \"common/components/created-by.html\"\n    };\n  };\n\n  module.directive(\"tgCreatedByDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", CreatedByDisplayDirective]);\n\n  UserDisplayDirective = function($template, $compile, $translate, $navUrls, avatarService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var avatar, id;\n      id = $attrs.tgUserId;\n      $scope.user = $scope.usersById[id] || {\n        full_name_display: $translate.instant(\"COMMON.EXTERNAL_USER\")\n      };\n      avatar = avatarService.getAvatar($scope.usersById[id] || null);\n      $scope.user.avatar = avatar.url;\n      $scope.user.bg = avatar.bg;\n      $scope.url = $scope.user.is_active ? $navUrls.resolve(\"user-profile\", {\n        username: $scope.user.username\n      }) : \"\";\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      scope: true,\n      templateUrl: \"common/components/user-display.html\"\n    };\n  };\n\n  module.directive(\"tgUserDisplay\", [\"$tgTemplate\", \"$compile\", \"$translate\", \"$tgNavUrls\", \"tgAvatarService\", UserDisplayDirective]);\n\n  BlockButtonDirective = function($rootscope, $loading, $template) {\n    var link, template;\n    template = $template.get(\"common/components/block-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        $scope.item = item;\n        if (isEditable()) {\n          return $el.find('.button-lock').addClass('editable');\n        }\n      });\n      $el.on(\"click\", \".item-block\", function(event) {\n        event.preventDefault();\n        return $rootscope.$broadcast(\"block\", $model.$modelValue);\n      });\n      $el.on(\"click\", \".item-unblock\", function(event) {\n        var currentLoading, finish;\n        event.preventDefault();\n        currentLoading = $loading().target($el.find(\".item-unblock\")).start();\n        finish = function() {\n          return currentLoading.finish();\n        };\n        return $rootscope.$broadcast(\"unblock\", $model.$modelValue, finish);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgBlockButton\", [\"$rootScope\", \"$tgLoading\", \"$tgTemplate\", BlockButtonDirective]);\n\n  DeleteButtonDirective = function($log, $repo, $confirm, $location, $template) {\n    var link, template;\n    template = $template.get(\"common/components/delete-button.html\");\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.onDeleteGoToUrl) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-go-to-url set in scope.\");\n      }\n      if (!$attrs.onDeleteTitle) {\n        return $log.error(\"DeleteButtonDirective requires on-delete-title set in scope.\");\n      }\n      $el.on(\"click\", \".button-delete\", function(event) {\n        var subtitle, title;\n        title = $attrs.onDeleteTitle;\n        subtitle = $model.$modelValue.subject;\n        return $confirm.askOnDelete(title, subtitle).then((function(_this) {\n          return function(askResponse) {\n            var promise;\n            promise = $repo.remove($model.$modelValue);\n            promise.then(function() {\n              var url;\n              askResponse.finish();\n              url = $scope.$eval($attrs.onDeleteGoToUrl);\n              return $location.path(url);\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            });\n          };\n        })(this));\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      template: template\n    };\n  };\n\n  module.directive(\"tgDeleteButton\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgTemplate\", DeleteButtonDirective]);\n\n  ListItemEpicStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var epic;\n      epic = $scope.$eval($attrs.tgListitemEpicStatus);\n      return bindOnce($scope, \"epicStatusById\", function(epicStatusById) {\n        return $el.html(epicStatusById[epic.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemEpicStatus\", ListItemEpicStatusDirective);\n\n  ListItemUsStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var us;\n      us = $scope.$eval($attrs.tgListitemUsStatus);\n      return bindOnce($scope, \"usStatusById\", function(usStatusById) {\n        return $el.html(usStatusById[us.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemUsStatus\", ListItemUsStatusDirective);\n\n  ListItemTaskStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var task;\n      task = $scope.$eval($attrs.tgListitemTaskStatus);\n      return bindOnce($scope, \"taskStatusById\", function(taskStatusById) {\n        return $el.html(taskStatusById[task.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemTaskStatus\", ListItemTaskStatusDirective);\n\n  ListItemAssignedtoDirective = function($template, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"common/components/list-item-assigned-to-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, \"usersById\", function(usersById) {\n        var avatar, ctx, item, member;\n        item = $scope.$eval($attrs.tgListitemAssignedto);\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\")\n        };\n        member = usersById[item.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = avatar.bg;\n        if (member) {\n          ctx.name = member.full_name_display;\n        }\n        return $el.html(template(ctx));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemAssignedto\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", ListItemAssignedtoDirective]);\n\n  ListItemIssueStatusDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var issue;\n      issue = $scope.$eval($attrs.tgListitemIssueStatus);\n      return bindOnce($scope, \"issueStatusById\", function(issueStatusById) {\n        return $el.html(issueStatusById[issue.status].name);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgListitemIssueStatus\", ListItemIssueStatusDirective);\n\n  ListItemTypeDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issueTypeById, issue) {\n        var domNode, type;\n        type = issueTypeById[issue.type];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", type.color);\n        return domNode.attr(\"title\", type.name);\n      };\n      bindOnce($scope, \"issueTypeById\", function(issueTypeById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemType);\n        return render(issueTypeById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemType, function(issue) {\n        return render($scope.issueTypeById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemType\", ListItemTypeDirective);\n\n  ListItemPriorityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(priorityById, issue) {\n        var domNode, priority;\n        priority = priorityById[issue.priority];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", priority.color);\n        return domNode.attr(\"title\", priority.name);\n      };\n      bindOnce($scope, \"priorityById\", function(priorityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemPriority);\n        return render(priorityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemPriority, function(issue) {\n        return render($scope.priorityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemPriority\", ListItemPriorityDirective);\n\n  ListItemSeverityDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(severityById, issue) {\n        var domNode, severity;\n        severity = severityById[issue.severity];\n        domNode = $el.find(\".level\");\n        domNode.css(\"background-color\", severity.color);\n        return domNode.attr(\"title\", severity.name);\n      };\n      bindOnce($scope, \"severityById\", function(severityById) {\n        var issue;\n        issue = $scope.$eval($attrs.tgListitemSeverity);\n        return render(severityById, issue);\n      });\n      return $scope.$watch($attrs.tgListitemSeverity, function(issue) {\n        return render($scope.severityById, issue);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/level.html\"\n    };\n  };\n\n  module.directive(\"tgListitemSeverity\", ListItemSeverityDirective);\n\n  TgProgressBarDirective = function($template) {\n    var link, render, template;\n    template = $template.get(\"common/components/progress-bar.html\", true);\n    render = function(el, percentage) {\n      return el.html(template({\n        percentage: percentage\n      }));\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgProgressBar, function(percentage) {\n        percentage = _.max([0, percentage]);\n        percentage = _.min([100, percentage]);\n        return render($el, percentage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProgressBar\", [\"$tgTemplate\", TgProgressBarDirective]);\n\n  TgMainTitleDirective = function($translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $attrs.$observe(\"i18nSectionName\", function(i18nSectionName) {\n        return $scope.sectionName = i18nSectionName;\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"common/components/main-title.html\"\n    };\n  };\n\n  module.directive(\"tgMainTitle\", [\"$translate\", TgMainTitleDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfirmService, NOTIFICATION_MSG, bindMethods, cancelTimeout, debounce, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  NOTIFICATION_MSG = {\n    \"success\": {\n      title: \"NOTIFICATION.OK\",\n      message: \"NOTIFICATION.SAVED\"\n    },\n    \"error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    },\n    \"light-error\": {\n      title: \"NOTIFICATION.WARNING\",\n      message: \"NOTIFICATION.WARNING_TEXT\"\n    }\n  };\n\n  ConfirmService = (function(superClass) {\n    extend(ConfirmService, superClass);\n\n    ConfirmService.$inject = [\"$q\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$filter\"];\n\n    function ConfirmService(q, lightboxService, loading, translate, filter) {\n      this.q = q;\n      this.lightboxService = lightboxService;\n      this.loading = loading;\n      this.translate = translate;\n      this.filter = filter;\n      bindMethods(this);\n    }\n\n    ConfirmService.prototype.hide = function(el) {\n      if (el) {\n        this.lightboxService.close(el);\n        return el.off(\".confirm-dialog\");\n      }\n    };\n\n    ConfirmService.prototype.ask = function(title, subtitle, message, lightboxSelector) {\n      var defered, el, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-ask\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title || '');\n      el.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      el.find(\".message\").html(message || '');\n      el.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(el);\n        };\n      })(this);\n      this.lightboxService.open(el, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askDelete = function(title, subtitle, message, lightboxSelector) {\n      var defered, lightbox, onEsc;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-generic-delete\";\n      }\n      defered = this.q.defer();\n      lightbox = angular.element(lightboxSelector);\n      lightbox.find(\".title\").text(title || '');\n      lightbox.find(\".subtitle\").text(subtitle || '');\n      if (message) {\n        message = this.filter('textToHTML')(message);\n      }\n      lightbox.find(\".message\").html(message || '');\n      lightbox.on(\"click.confirm-dialog\", \".js-confirm\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, currentWidth, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentWidth = target.width();\n          target.width(currentWidth);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              target.css(\"width\", \"\");\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(lightbox);\n              }\n            }\n          });\n        };\n      })(this)));\n      lightbox.on(\"click.confirm-dialog\", \".js-cancel\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(lightbox);\n        };\n      })(this));\n      onEsc = (function(_this) {\n        return function() {\n          return _this.hide(lightbox);\n        };\n      })(this);\n      this.lightboxService.open(lightbox, null, onEsc);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.askOnDelete = function(title, message, subtitle) {\n      if (subtitle == null) {\n        subtitle = this.translate.instant(\"NOTIFICATION.ASK_DELETE\");\n      }\n      return this.askDelete(title, subtitle, message);\n    };\n\n    ConfirmService.prototype.askChoice = function(title, subtitle, choices, replacement, warning, lightboxSelector) {\n      var choicesField, defered, el;\n      if (lightboxSelector == null) {\n        lightboxSelector = \".lightbox-ask-choice\";\n      }\n      defered = this.q.defer();\n      el = angular.element(lightboxSelector);\n      el.find(\".title\").text(title);\n      el.find(\".subtitle\").text(subtitle);\n      if (replacement) {\n        el.find(\".replacement\").text(replacement);\n      } else {\n        el.find(\".replacement\").remove();\n      }\n      if (warning) {\n        el.find(\".warning\").text(warning);\n      } else {\n        el.find(\".warning\").remove();\n      }\n      choicesField = el.find(\".choices\");\n      choicesField.html('');\n      _.each(choices, function(value, key) {\n        value = _.escape(value);\n        return choicesField.append(angular.element(\"<option value='\" + key + \"'>\" + value + \"</option>\"));\n      });\n      el.on(\"click.confirm-dialog\", \".js-confirm-ask\", debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          currentLoading = _this.loading().target(target).start();\n          return defered.resolve({\n            selected: choicesField.val(),\n            finish: function(ok) {\n              if (ok == null) {\n                ok = true;\n              }\n              currentLoading.finish();\n              if (ok) {\n                return _this.hide(el);\n              }\n            }\n          });\n        };\n      })(this)));\n      el.on(\"click.confirm-dialog\", \".js-cancel-ask\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.reject();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.error = function(message) {\n      var defered, el;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-error\");\n      el.find(\".title\").html(message);\n      el.on(\"click.confirm-dialog\", \".button-green\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.success = function(title, message, icon, action) {\n      var defered, detailImage, el, svgContainer, useSVG;\n      defered = this.q.defer();\n      el = angular.element(\".lightbox-generic-success\");\n      el.find(\"img\").remove();\n      el.find(\"svg\").remove();\n      if (icon) {\n        if (icon.type === \"img\") {\n          detailImage = $('<img>').addClass('lb-icon').attr('src', icon.name);\n        } else if (icon.type === \"svg\") {\n          detailImage = document.createElement(\"div\");\n          taiga.addClass(detailImage, \"icon\");\n          taiga.addClass(detailImage, icon.name);\n          taiga.addClass(detailImage, \"lb-icon\");\n          svgContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n          useSVG = document.createElementNS('http://www.w3.org/2000/svg', 'use');\n          useSVG.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '#' + icon.name);\n          detailImage.appendChild(svgContainer).appendChild(useSVG);\n        }\n        if (detailImage) {\n          el.find('section').prepend(detailImage);\n        }\n      }\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (action) {\n        el.find(\".js-confirm\").html(action);\n        el.find(\".js-confirm\").attr('title', action);\n      }\n      el.on(\"click.confirm-dialog\", \".js-confirm\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      el.on(\"click.confirm-dialog\", \".close\", (function(_this) {\n        return function(event) {\n          event.preventDefault();\n          defered.resolve();\n          return _this.hide(el);\n        };\n      })(this));\n      this.lightboxService.open(el);\n      return defered.promise;\n    };\n\n    ConfirmService.prototype.loader = function(title, message, spin) {\n      var el;\n      if (spin == null) {\n        spin = false;\n      }\n      el = angular.element(\".lightbox-generic-loading\");\n      if (title) {\n        el.find(\".title\").html(title);\n      }\n      if (message) {\n        el.find(\".message\").html(message);\n      }\n      if (spin) {\n        el.find(\".spin\").removeClass(\"hidden\");\n      }\n      return {\n        start: (function(_this) {\n          return function() {\n            return _this.lightboxService.open(el);\n          };\n        })(this),\n        stop: (function(_this) {\n          return function() {\n            return _this.lightboxService.close(el);\n          };\n        })(this),\n        update: (function(_this) {\n          return function(status, title, message, percent) {\n            if (title) {\n              el.find(\".title\").html(title);\n            }\n            if (message) {\n              el.find(\".message\").html(message);\n            }\n            if (percent) {\n              el.find(\".spin\").addClass(\"hidden\");\n              el.find(\".progress-bar-wrapper\").removeClass(\"hidden\");\n              el.find(\".progress-bar-wrapper > .bar\").width(percent + '%');\n              return el.find(\".progress-bar-wrapper > span\").html(percent + '%').css('left', (percent - 9) + '%');\n            } else {\n              el.find(\".spin\").removeClass(\"hidden\");\n              return el.find(\".progress-bar-wrapper\").addClass(\"hidden\");\n            }\n          };\n        })(this)\n      };\n    };\n\n    ConfirmService.prototype.notify = function(type, message, title, time) {\n      var body, el, selector;\n      selector = \".notification-message-\" + type;\n      el = angular.element(selector);\n      if (el.hasClass(\"active\")) {\n        return;\n      }\n      if (title) {\n        el.find(\"h4\").html(title);\n      } else {\n        el.find(\"h4\").html(this.translate.instant(NOTIFICATION_MSG[type].title));\n      }\n      if (message) {\n        el.find(\"p\").html(message);\n      } else {\n        el.find(\"p\").html(this.translate.instant(NOTIFICATION_MSG[type].message));\n      }\n      body = angular.element(\"body\");\n      body.find(\".notification-message .notification-light\").removeClass('active').addClass('inactive');\n      body.find(selector).removeClass('inactive').addClass('active');\n      if (this.tsem) {\n        cancelTimeout(this.tsem);\n      }\n      if (!time) {\n        time = type === 'error' || type === 'light-error' ? 3500 : 1500;\n      }\n      this.tsem = timeout(time, (function(_this) {\n        return function() {\n          body.find(selector).removeClass('active').addClass('inactive').one('animationend', function() {\n            return $(this).removeClass('inactive');\n          });\n          return delete _this.tsem;\n        };\n      })(this));\n      return el.on(\"click\", \".icon-close, .close\", (function(_this) {\n        return function(event) {\n          return body.find(selector).removeClass('active').addClass('inactive');\n        };\n      })(this));\n    };\n\n    return ConfirmService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaCommon\");\n\n  module.service(\"$tgConfirm\", ConfirmService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, CustomAttributeValueDirective, CustomAttributesValuesController, CustomAttributesValuesDirective, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, RICHTEXT_TYPE, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindMethods, bindOnce, debounce, generateHash, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = this.taiga.bindMethods;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  generateHash = taiga.generateHash;\n\n  module = angular.module(\"taigaCommon\");\n\n  TEXT_TYPE = \"text\";\n\n  RICHTEXT_TYPE = \"url\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  CustomAttributesValuesController = (function(superClass) {\n    extend(CustomAttributesValuesController, superClass);\n\n    CustomAttributesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$q\"];\n\n    function CustomAttributesValuesController(scope1, rootscope, repo, rs, confirm, q) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.q = q;\n      bindMethods(this);\n      this.type = null;\n      this.objectId = null;\n      this.projectId = null;\n      this.customAttributes = [];\n      this.customAttributesValues = null;\n    }\n\n    CustomAttributesValuesController.prototype.initialize = function(type, objectId) {\n      this.project = this.scope.project;\n      this.type = type;\n      this.objectId = objectId;\n      return this.projectId = this.scope.projectId;\n    };\n\n    CustomAttributesValuesController.prototype.loadCustomAttributesValues = function() {\n      if (!this.objectId) {\n        return this.customAttributesValues;\n      }\n      return this.rs.customAttributesValues[this.type].get(this.objectId).then((function(_this) {\n        return function(customAttributesValues) {\n          _this.customAttributes = _this.project[_this.type + \"_custom_attributes\"];\n          _this.customAttributesValues = customAttributesValues;\n          return customAttributesValues;\n        };\n      })(this));\n    };\n\n    CustomAttributesValuesController.prototype.getAttributeValue = function(attribute) {\n      var attributeValue;\n      attributeValue = _.clone(attribute, false);\n      attributeValue.value = this.customAttributesValues.attributes_values[attribute.id];\n      return attributeValue;\n    };\n\n    CustomAttributesValuesController.prototype.updateAttributeValue = function(attributeValue) {\n      var attributesValues, onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"custom-attributes-values:edit\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          _this.confirm.notify(\"error\");\n          return _this.q.reject();\n        };\n      })(this);\n      attributesValues = _.clone(this.customAttributesValues.attributes_values, true);\n      attributesValues[attributeValue.id] = attributeValue.value;\n      this.customAttributesValues.attributes_values = attributesValues;\n      this.customAttributesValues.id = this.objectId;\n      return this.repo.save(this.customAttributesValues).then(onSuccess, onError);\n    };\n\n    return CustomAttributesValuesController;\n\n  })(taiga.Controller);\n\n  CustomAttributesValuesDirective = function($templates, $storage) {\n    var collapsedHash, link, template, templateFn;\n    template = $templates.get(\"custom-attributes/custom-attributes-values.html\", true);\n    collapsedHash = function(type) {\n      return generateHash([\"custom-attributes-collapsed\", type]);\n    };\n    link = function($scope, $el, $attrs, $ctrls) {\n      var $ctrl, $model, hash;\n      $ctrl = $ctrls[0];\n      $model = $ctrls[1];\n      hash = collapsedHash($attrs.type);\n      $scope.collapsed = $storage.get(hash) || false;\n      bindOnce($scope, $attrs.ngModel, function(value) {\n        $ctrl.initialize($attrs.type, value.id);\n        return $ctrl.loadCustomAttributesValues();\n      });\n      $scope.toggleCollapse = function() {\n        $scope.collapsed = !$scope.collapsed;\n        return $storage.set(hash, $scope.collapsed);\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        requiredEditionPerm: $attrs.requiredEditionPerm\n      });\n    };\n    return {\n      require: [\"tgCustomAttributesValues\", \"ngModel\"],\n      controller: CustomAttributesValuesController,\n      controllerAs: \"ctrl\",\n      restrict: \"AE\",\n      scope: true,\n      link: link,\n      template: templateFn\n    };\n  };\n\n  module.directive(\"tgCustomAttributesValues\", [\"$tgTemplate\", \"$tgStorage\", \"$translate\", CustomAttributesValuesDirective]);\n\n  CustomAttributeValueDirective = function($template, $selectedText, $compile, $translate, datePickerConfigService, wysiwygService) {\n    var link, template, templateEdit;\n    template = $template.get(\"custom-attributes/custom-attribute-value.html\", true);\n    templateEdit = $template.get(\"custom-attributes/custom-attribute-value-edit.html\", true);\n    link = function($scope, $el, $attrs, $ctrl) {\n      var attributeValue, isEditable, prettyDate, render, setFocusAndSelectOnInputField, submit;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      render = function(attributeValue, edit) {\n        var ctx, datePickerConfig, editable, html, scope, value;\n        if (edit == null) {\n          edit = false;\n        }\n        if (attributeValue.type === DATE_TYPE && attributeValue.value) {\n          value = moment(attributeValue.value, \"YYYY-MM-DD\").format(prettyDate);\n        }\n        if (attributeValue.type === NUMBER_TYPE && attributeValue.value) {\n          value = parseFloat(attributeValue.value);\n        } else {\n          value = attributeValue.value;\n        }\n        editable = isEditable();\n        ctx = {\n          id: attributeValue.id,\n          name: attributeValue.name,\n          description: attributeValue.description,\n          value: value,\n          type: attributeValue.type,\n          isEditable: editable\n        };\n        scope = $scope.$new();\n        scope.attributeHtml = wysiwygService.getHTML(\"\" + value);\n        scope.extra = attributeValue.extra;\n        scope.model = value;\n        scope.project = $scope.project;\n        if (editable && (edit || !value)) {\n          html = templateEdit(ctx);\n          html = $compile(html)(scope);\n          $el.html(html);\n          if (attributeValue.type === DATE_TYPE) {\n            datePickerConfig = datePickerConfigService.get();\n            _.merge(datePickerConfig, {\n              field: $el.find(\"input[name=value]\")[0],\n              onSelect: (function(_this) {\n                return function(date) {\n                  var selectedDate;\n                  return selectedDate = date;\n                };\n              })(this),\n              onOpen: (function(_this) {\n                return function() {\n                  if (typeof selectedDate !== \"undefined\" && selectedDate !== null) {\n                    return $el.picker.setDate(selectedDate);\n                  }\n                };\n              })(this)\n            });\n            return $el.picker = new Pikaday(datePickerConfig);\n          }\n        } else {\n          html = template(ctx);\n          html = $compile(html)(scope);\n          return $el.html(html);\n        }\n      };\n      isEditable = function() {\n        var permissions, requiredEditionPerm;\n        permissions = $scope.project.my_permissions;\n        requiredEditionPerm = $attrs.requiredEditionPerm;\n        return permissions.indexOf(requiredEditionPerm) > -1;\n      };\n      $scope.saveCustomRichText = (function(_this) {\n        return function(markdown, callback) {\n          attributeValue.value = markdown;\n          return $ctrl.updateAttributeValue(attributeValue).then(function() {\n            callback();\n            return render(attributeValue, false);\n          });\n        };\n      })(this);\n      $scope.cancelCustomRichText = (function(_this) {\n        return function() {\n          render(attributeValue, false);\n          return null;\n        };\n      })(this);\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var form, formControl;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          if (attributeValue.type === DROPDOWN_TYPE) {\n            formControl = $el.find(\"select[name='value']\");\n            attributeValue.value = formControl.val();\n          } else if (attributeValue.type === CHECKBOX_TYPE) {\n            formControl = $el.find(\"input[name=value]\");\n            attributeValue.value = formControl[0].checked;\n          } else {\n            formControl = $el.find(\"input[name=value], textarea[name='value']\");\n            attributeValue.value = formControl.val();\n            if (attributeValue.type === DATE_TYPE && moment(attributeValue.value, prettyDate).isValid()) {\n              attributeValue.value = moment(attributeValue.value, prettyDate).format(\"YYYY-MM-DD\");\n            }\n            if (attributeValue.type === NUMBER_TYPE) {\n              attributeValue.value = parseFloat(attributeValue.value);\n            }\n          }\n          return $scope.$apply(function() {\n            return $ctrl.updateAttributeValue(attributeValue).then(function() {\n              return render(attributeValue, false);\n            });\n          });\n        };\n      })(this));\n      setFocusAndSelectOnInputField = function() {\n        return $el.find(\"input[name='value'], textarea[name='value']\").focus().select();\n      };\n      attributeValue = $scope.$eval($attrs.tgCustomAttributeValue);\n      if (attributeValue.value === null || attributeValue.value === void 0) {\n        attributeValue.value = \"\";\n      }\n      $scope.customAttributeValue = attributeValue;\n      render(attributeValue);\n      $el.on(\"click\", \".js-value-view-mode span a\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".js-value-view-mode\", function() {\n        if (!isEditable()) {\n          return;\n        }\n        if ($selectedText.get().length) {\n          return;\n        }\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"click\", \".js-edit-description\", function(event) {\n        event.preventDefault();\n        render(attributeValue, true);\n        return setFocusAndSelectOnInputField();\n      });\n      $el.on(\"keyup\", \"input[name=value], textarea[name='value']\", function(event) {\n        if (event.keyCode === 13 && event.currentTarget.type !== \"textarea\") {\n          return submit(event);\n        } else if (event.keyCode === 27) {\n          return render(attributeValue, false);\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".js-save-description\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"^tgCustomAttributesValues\",\n      restrict: \"AE\"\n    };\n  };\n\n  module.directive(\"tgCustomAttributeValue\", [\"$tgTemplate\", \"$selectedText\", \"$compile\", \"$translate\", \"tgDatePickerConfigService\", \"tgWysiwygService\", CustomAttributeValueDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EmojisService, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  EmojisService = (function(superClass) {\n    extend(EmojisService, superClass);\n\n    EmojisService.$inject = [];\n\n    function EmojisService() {\n      this.replaceEmojiNameByHtmlImgs = bind(this.replaceEmojiNameByHtmlImgs, this);\n      this.replaceEmojiNameByImgs = bind(this.replaceEmojiNameByImgs, this);\n      this.replaceImgsByEmojiName = bind(this.replaceImgsByEmojiName, this);\n      this.getEmojiByName = bind(this.getEmojiByName, this);\n      this.getEmojiById = bind(this.getEmojiById, this);\n      this.searchByName = bind(this.searchByName, this);\n      this.emojis = _.map(taiga.emojis, function(it) {\n        it.image = (\"/\" + window._version + \"/emojis/\") + it.image;\n        return it;\n      });\n      this.emojisById = _.keyBy(this.emojis, 'id');\n      this.emojisByName = _.keyBy(this.emojis, 'name');\n    }\n\n    EmojisService.prototype.searchByName = function(name) {\n      return _.filter(this.emojis, function(it) {\n        return it.name.indexOf(name) !== -1;\n      });\n    };\n\n    EmojisService.prototype.getEmojiById = function(id) {\n      return this.emojisById[id];\n    };\n\n    EmojisService.prototype.getEmojiByName = function(name) {\n      return this.emojisByName[name];\n    };\n\n    EmojisService.prototype.replaceImgsByEmojiName = function(html) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(html, /emojis\\/([^\"]+).png\"/gi);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp('<img(.*)' + emojiId + '[^>]+\\>', 'g');\n        emoji = this.getEmojiById(emojiId);\n        html = html.replace(regexImgs, ':' + emoji.name + ':');\n      }\n      return html;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + emojiId + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '![alt](' + emoji.image + ')');\n        }\n      }\n      return text;\n    };\n\n    EmojisService.prototype.replaceEmojiNameByHtmlImgs = function(text) {\n      var emoji, emojiId, emojiIds, i, len, regexImgs;\n      emojiIds = taiga.getMatches(text, /:([\\w +-]*):/g);\n      for (i = 0, len = emojiIds.length; i < len; i++) {\n        emojiId = emojiIds[i];\n        regexImgs = new RegExp(':' + _.escapeRegExp(emojiId) + ':', 'g');\n        emoji = this.getEmojiByName(emojiId);\n        if (emoji) {\n          text = text.replace(regexImgs, '<img src=\"' + emoji.image + '\" />');\n        }\n      }\n      return text;\n    };\n\n    return EmojisService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgEmojis\", EmojisService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EstimationsService, LbUsEstimationDirective, UsEstimationDirective, groupBy, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaCommon\");\n\n  LbUsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.$watch($attrs.ngModel, function(us) {\n        var estimationProcess;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return $scope.$apply(function() {\n              return $model.$setViewValue(us);\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: false\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", LbUsEstimationDirective]);\n\n  UsEstimationDirective = function($tgEstimationsService, $rootScope, $repo, $template, $compile, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var save;\n      save = function(points) {\n        var onError, transform;\n        transform = $modelTransform.save((function(_this) {\n          return function(us) {\n            us.points = points;\n            return us;\n          };\n        })(this));\n        onError = (function(_this) {\n          return function() {\n            return $confirm.notify(\"error\");\n          };\n        })(this);\n        return transform.then(null, onError);\n      };\n      $scope.$watchCollection(function() {\n        return $model.$modelValue && $model.$modelValue.points;\n      }, function() {\n        var estimationProcess, us;\n        us = $model.$modelValue;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            estimationProcess.loading = roleId;\n            estimationProcess.render();\n            return save(points).then(function() {\n              estimationProcess.loading = false;\n              $rootScope.$broadcast(\"object:updated\");\n              return estimationProcess.render();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, template;\n            ctx = {\n              totalPoints: this.calculateTotalPoints(),\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              loading: estimationProcess.loading\n            };\n            mainTemplate = \"common/estimation/us-estimation-points-per-role.html\";\n            template = $template.get(mainTemplate, true);\n            html = template(ctx);\n            html = $compile(html)($scope);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsEstimation\", [\"$tgEstimationsService\", \"$rootScope\", \"$tgRepo\", \"$tgTemplate\", \"$compile\", \"$tgQueueModelTransformation\", \"$tgConfirm\", UsEstimationDirective]);\n\n  EstimationsService = function($template, $repo, $confirm, $q, $qqueue) {\n    var EstimationProcess, create, pointsTemplate;\n    pointsTemplate = $template.get(\"common/estimation/us-estimation-points.html\", true);\n    EstimationProcess = (function() {\n      function EstimationProcess($el1, us1, project1) {\n        this.$el = $el1;\n        this.us = us1;\n        this.project = project1;\n        this.bindClickEvents = bind(this.bindClickEvents, this);\n        this.isEditable = this.project.my_permissions.indexOf(\"modify_us\") !== -1;\n        this.roles = this.project.roles;\n        this.points = this.project.points;\n        this.loading = false;\n        this.pointsById = groupBy(this.points, function(x) {\n          return x.id;\n        });\n        this.onSelectedPointForRole = function(roleId, pointId) {};\n        this.render = function() {};\n      }\n\n      EstimationProcess.prototype.save = function(roleId, pointId) {\n        var deferred;\n        deferred = $q.defer();\n        $qqueue.add((function(_this) {\n          return function() {\n            var onError, onSuccess;\n            onSuccess = function() {\n              deferred.resolve();\n              return _this.render();\n            };\n            onError = function() {\n              $confirm.notify(\"error\");\n              _this.us.revert();\n              _this.render();\n              return deferred.reject();\n            };\n            return $repo.save(_this.us).then(onSuccess, onError);\n          };\n        })(this));\n        return deferred.promise;\n      };\n\n      EstimationProcess.prototype.calculateTotalPoints = function() {\n        var notNullValues, values;\n        values = _.map(this.us.points, (function(_this) {\n          return function(v, k) {\n            var ref;\n            return (ref = _this.pointsById[v]) != null ? ref.value : void 0;\n          };\n        })(this));\n        if (values.length === 0) {\n          return \"?\";\n        }\n        notNullValues = _.filter(values, function(v) {\n          return v != null;\n        });\n        if (notNullValues.length === 0) {\n          return \"?\";\n        }\n        return _.reduce(notNullValues, function(acc, num) {\n          return acc + num;\n        });\n      };\n\n      EstimationProcess.prototype.calculateRoles = function() {\n        var computableRoles, roles;\n        computableRoles = _.filter(this.project.roles, \"computable\");\n        roles = _.map(computableRoles, (function(_this) {\n          return function(role) {\n            var pointId, pointObj;\n            pointId = _this.us.points[role.id];\n            pointObj = _this.pointsById[pointId];\n            role = _.clone(role, true);\n            role.points = (pointObj != null) && (pointObj.name != null) ? pointObj.name : \"?\";\n            return role;\n          };\n        })(this));\n        return roles;\n      };\n\n      EstimationProcess.prototype.bindClickEvents = function() {\n        this.$el.on(\"click\", \".total.clickable\", (function(_this) {\n          return function(event) {\n            var roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            _this.renderPointsSelector(roleId, target);\n            target.siblings().removeClass('active');\n            return target.addClass('active');\n          };\n        })(this));\n        return this.$el.on(\"click\", \".point\", (function(_this) {\n          return function(event) {\n            var pointId, points, roleId, target;\n            event.preventDefault();\n            event.stopPropagation();\n            target = angular.element(event.currentTarget);\n            roleId = target.data(\"role-id\");\n            pointId = target.data(\"point-id\");\n            _this.$el.find(\".popover\").popover().close();\n            points = _.clone(_this.us.points, true);\n            points[roleId] = pointId;\n            return _this.onSelectedPointForRole(roleId, pointId, points);\n          };\n        })(this));\n      };\n\n      EstimationProcess.prototype.renderPointsSelector = function(roleId, target) {\n        var horizontalList, html, maxPointLength, points, pop;\n        points = _.map(this.points, (function(_this) {\n          return function(point) {\n            point = _.clone(point, true);\n            point.selected = _this.us.points[roleId] === point.id ? false : true;\n            return point;\n          };\n        })(this));\n        maxPointLength = 5;\n        horizontalList = _.some(points, (function(_this) {\n          return function(point) {\n            return point.name.length > maxPointLength;\n          };\n        })(this));\n        html = pointsTemplate({\n          \"points\": points,\n          roleId: roleId,\n          horizontal: horizontalList\n        });\n        this.$el.find(\".popover\").popover().close();\n        this.$el.find(\".pop-points-open\").remove();\n        if (target != null) {\n          this.$el.find(target).append(html);\n        } else {\n          this.$el.append(html);\n        }\n        this.$el.find(\".pop-points-open\").popover().open(function() {\n          return $(this).removeClass(\"active\").closest(\"li\").removeClass(\"active\");\n        });\n        this.$el.find(\".pop-points-open\").show();\n        pop = this.$el.find(\".pop-points-open\");\n        if (pop.offset().top + pop.height() > document.body.clientHeight) {\n          return pop.addClass('pop-bottom');\n        }\n      };\n\n      return EstimationProcess;\n\n    })();\n    create = function($el, us, project) {\n      var estimationProcess;\n      $el.unbind(\"click\");\n      estimationProcess = new EstimationProcess($el, us, project);\n      if (estimationProcess.isEditable) {\n        estimationProcess.bindClickEvents();\n      }\n      return estimationProcess;\n    };\n    return {\n      create: create\n    };\n  };\n\n  module.factory(\"$tgEstimationsService\", [\"$tgTemplate\", \"$tgRepo\", \"$tgConfirm\", \"$q\", \"$tgQqueue\", EstimationsService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var byRefFilter, darkerFilter, defaultFilter, emojify, inArray, markdownToHTML, module, momentFormat, momentFromNow, sizeFormat, taiga, textToHTML, toMutableFilter, unslugify, yesNoFilter;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  defaultFilter = function() {\n    return function(value, defaultValue) {\n      if (value === [null, void 0]) {\n        return defaultValue;\n      }\n      return value;\n    };\n  };\n\n  module.filter(\"default\", defaultFilter);\n\n  yesNoFilter = function($translate) {\n    return function(value) {\n      if (value) {\n        return $translate.instant(\"COMMON.YES\");\n      }\n      return $translate.instant(\"COMMON.NO\");\n    };\n  };\n\n  module.filter(\"yesNo\", [\"$translate\", yesNoFilter]);\n\n  unslugify = function() {\n    return taiga.unslugify;\n  };\n\n  module.filter(\"unslugify\", unslugify);\n\n  momentFormat = function() {\n    return function(input, format) {\n      if (input) {\n        return moment(input).format(format);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFormat\", momentFormat);\n\n  momentFromNow = function() {\n    return function(input, without_suffix) {\n      if (input) {\n        return moment(input).fromNow(without_suffix || false);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"momentFromNow\", momentFromNow);\n\n  sizeFormat = (function(_this) {\n    return function() {\n      return _this.taiga.sizeFormat;\n    };\n  })(this);\n\n  module.filter(\"sizeFormat\", sizeFormat);\n\n  toMutableFilter = function() {\n    var memoizedMutable, toMutable;\n    toMutable = function(js) {\n      return js.toJS();\n    };\n    memoizedMutable = _.memoize(toMutable);\n    return function(input) {\n      if (input instanceof Immutable.List) {\n        return memoizedMutable(input);\n      }\n      return input;\n    };\n  };\n\n  module.filter(\"toMutable\", toMutableFilter);\n\n  byRefFilter = function($filterFilter) {\n    return function(userstories, filter) {\n      var cleanRef;\n      if (filter != null ? filter.startsWith(\"#\") : void 0) {\n        cleanRef = filter.substr(1);\n        return _.filter(userstories, (function(_this) {\n          return function(us) {\n            return String(us.ref).startsWith(cleanRef);\n          };\n        })(this));\n      }\n      return $filterFilter(userstories, filter);\n    };\n  };\n\n  module.filter(\"byRef\", [\"filterFilter\", byRefFilter]);\n\n  darkerFilter = function() {\n    return function(color, luminosity) {\n      var black, c, i, j, len, newColor, ref, white;\n      if (!color) {\n        return 'transparent';\n      }\n      color = new String(color).replace(/[^0-9a-f]/gi, '');\n      if (color.length < 6) {\n        color = color[0] + color[0] + color[1] + color[1] + color[2] + color[2];\n      }\n      luminosity = luminosity || 0;\n      newColor = \"#\";\n      c = 0;\n      i = 0;\n      black = 0;\n      white = 255;\n      ref = [0, 1, 2];\n      for (j = 0, len = ref.length; j < len; j++) {\n        i = ref[j];\n        c = parseInt(color.substr(i * 2, 2), 16);\n        c = Math.round(Math.min(Math.max(black, c + (luminosity * white)), white)).toString(16);\n        newColor += (\"00\" + c).substr(c.length);\n      }\n      return newColor;\n    };\n  };\n\n  module.filter(\"darker\", darkerFilter);\n\n  markdownToHTML = function(wysiwigService) {\n    return function(input) {\n      if (input) {\n        return wysiwigService.getHTML(input);\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"markdownToHTML\", [\"tgWysiwygService\", markdownToHTML]);\n\n  inArray = function($filter) {\n    return function(list, arrayFilter, element) {\n      var filter;\n      if (arrayFilter) {\n        filter = $filter(\"filter\");\n        return filter(list, function(listItem) {\n          return arrayFilter.indexOf(listItem[element]) !== -1;\n        });\n      }\n    };\n  };\n\n  module.filter(\"inArray\", [\"$filter\", inArray]);\n\n  emojify = function($emojis) {\n    return function(input) {\n      if (input) {\n        return $emojis.replaceEmojiNameByHtmlImgs(_.escape(input));\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"emojify\", [\"$tgEmojis\", emojify]);\n\n  textToHTML = function($filter) {\n    return function(input) {\n      if (input) {\n        return input.replace(/\\<(?!(\\/?)(strong|br)(\\/?)).*?\\>/g, \"\");\n      }\n      return \"\";\n    };\n  };\n\n  module.filter(\"textToHTML\", [\"$filter\", textToHTML]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockLightboxDirective, BlockingMessageInputDirective, CreateBulkUserstoriesDirective, CreateEditDirective, LightboxClose, LightboxDirective, LightboxKeyboardNavigationService, LightboxLeaveProjectWarningDirective, LightboxService, RelateToEpicLightboxDirective, SetDueDateDirective, bindOnce, debounce, debounceLeading, groupBy, module, normalizeString, sizeFormat, timeout, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  module = angular.module(\"taigaCommon\");\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  trim = this.taiga.trim;\n\n  normalizeString = this.taiga.normalizeString;\n\n  LightboxService = (function(superClass) {\n    extend(LightboxService, superClass);\n\n    function LightboxService(animationFrame, q, rootScope) {\n      this.animationFrame = animationFrame;\n      this.q = q;\n      this.rootScope = rootScope;\n    }\n\n    LightboxService.prototype.open = function($el, onClose, onEsc, ignoreEsc) {\n      var defered, docEl, lightboxContent;\n      this.onClose = onClose;\n      if (_.isString($el)) {\n        $el = $($el);\n      }\n      defered = this.q.defer();\n      lightboxContent = $el.children().not(\".close\");\n      lightboxContent.hide();\n      this.animationFrame.add(function() {\n        return $el.css('display', 'flex');\n      });\n      this.animationFrame.add(function() {\n        $el.addClass(\"open\");\n        return $el.one(\"transitionend\", (function(_this) {\n          return function() {\n            var firstField;\n            firstField = $el.find('input:not(.no-focus),textarea:not(.no-focus)').first();\n            if (firstField.length) {\n              return firstField.focus();\n            } else if (document.activeElement) {\n              return $(document.activeElement).blur();\n            }\n          };\n        })(this));\n      });\n      this.animationFrame.add((function(_this) {\n        return function() {\n          lightboxContent.show();\n          return defered.resolve();\n        };\n      })(this));\n      if (!ignoreEsc) {\n        docEl = angular.element(document);\n        docEl.on(\"keydown.lightbox\", (function(_this) {\n          return function(e) {\n            var code;\n            code = e.keyCode ? e.keyCode : e.which;\n            if (code === 27) {\n              if (onEsc) {\n                return _this.rootScope.$applyAsync(onEsc);\n              } else {\n                return _this.close($el);\n              }\n            }\n          };\n        })(this));\n      }\n      this.rootScope.$broadcast(\"lightbox:opened\");\n      return defered.promise;\n    };\n\n    LightboxService.prototype.close = function($el) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          var docEl, scope;\n          if (_.isString($el)) {\n            $el = $($el);\n          }\n          docEl = angular.element(document);\n          docEl.off(\".lightbox\");\n          docEl.off(\".keyboard-navigation\");\n          $el.addClass('close-started');\n          _this.animationFrame.add(function() {\n            $el.addClass('close');\n            return $el.one(\"transitionend\", function() {\n              $el.removeAttr('style');\n              $el.removeClass(\"open\").removeClass('close').removeClass('close-started');\n              if (_this.onClose) {\n                _this.rootScope.$apply(_this.onClose);\n              }\n              return resolve();\n            });\n          });\n          if ($el.hasClass(\"remove-on-close\")) {\n            scope = $el.data(\"scope\");\n            if (scope) {\n              scope.$destroy();\n            }\n            $el.remove();\n          }\n          return _this.rootScope.$broadcast(\"lightbox:closed\");\n        };\n      })(this));\n    };\n\n    LightboxService.prototype.getLightboxOpen = function() {\n      return $(\".lightbox.open:not(.close-started)\");\n    };\n\n    LightboxService.prototype.closeAll = function() {\n      var docEl, i, len, lightboxEl, ref, results;\n      docEl = angular.element(document);\n      ref = docEl.find(\".lightbox.open\");\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        lightboxEl = ref[i];\n        results.push(this.close($(lightboxEl)));\n      }\n      return results;\n    };\n\n    return LightboxService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxService\", [\"animationFrame\", \"$q\", \"$rootScope\", LightboxService]);\n\n  LightboxKeyboardNavigationService = (function(superClass) {\n    extend(LightboxKeyboardNavigationService, superClass);\n\n    function LightboxKeyboardNavigationService() {\n      return LightboxKeyboardNavigationService.__super__.constructor.apply(this, arguments);\n    }\n\n    LightboxKeyboardNavigationService.prototype.stop = function() {\n      var docEl;\n      docEl = angular.element(document);\n      return docEl.off(\".keyboard-navigation\");\n    };\n\n    LightboxKeyboardNavigationService.prototype.dispatch = function($el, code) {\n      var activeElement, next, prev;\n      activeElement = $el.find(\".selected\");\n      if (code === 13) {\n        if ($el.find(\".user-list-single\").length === 1) {\n          return $el.find('.user-list-single:first').trigger(\"click\");\n        } else {\n          return activeElement.trigger(\"click\");\n        }\n      } else if (code === 40) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:not(\".is-active\"):first').addClass('selected');\n        } else {\n          next = activeElement.next('.user-list-single');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return next.addClass('selected');\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return $el.find('.user-list-single:last').addClass('selected');\n        } else {\n          prev = activeElement.prev('.user-list-single:not(\".is-active\")');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return prev.addClass('selected');\n          }\n        }\n      }\n    };\n\n    LightboxKeyboardNavigationService.prototype.init = function($el) {\n      var docEl;\n      this.stop();\n      docEl = angular.element(document);\n      return docEl.on(\"keydown.keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38 || code === 13) {\n            event.preventDefault();\n            return _this.dispatch($el, code);\n          }\n        };\n      })(this));\n    };\n\n    return LightboxKeyboardNavigationService;\n\n  })(taiga.Service);\n\n  module.service(\"lightboxKeyboardNavigationService\", LightboxKeyboardNavigationService);\n\n  LightboxDirective = function(lightboxService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      if (!$attrs.$attr.visible) {\n        return $el.on(\"click\", \".close\", function(event) {\n          event.preventDefault();\n          return lightboxService.close($el);\n        });\n      }\n    };\n    return {\n      restrict: \"C\",\n      link: link\n    };\n  };\n\n  module.directive(\"lightbox\", [\"lightboxService\", LightboxDirective]);\n\n  LightboxClose = function() {\n    var link, template;\n    template = \"<a class=\\\"close\\\" ng-click=\\\"onClose()\\\" href=\\\"\\\" title=\\\"{{'COMMON.CLOSE' | translate}}\\\">\\n    <tg-svg svg-icon=\\\"icon-close\\\"></tg-svg>\\n</a>\";\n    link = function(scope, elm, attrs) {};\n    return {\n      scope: {\n        onClose: '&'\n      },\n      link: link,\n      template: template\n    };\n  };\n\n  module.directive(\"tgLightboxClose\", [LightboxClose]);\n\n  BlockLightboxDirective = function($rootscope, $tgrepo, $confirm, lightboxService, $loading, $modelTransform, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var block, title, unblock;\n      title = $translate.instant($attrs.title);\n      $el.find(\"h2.title\").text(title);\n      unblock = (function(_this) {\n        return function(finishCallback) {\n          var transform;\n          transform = $modelTransform.save(function(item) {\n            item.is_blocked = false;\n            item.blocked_note = \"\";\n            return item;\n          });\n          transform.then(function() {\n            $confirm.notify(\"success\");\n            $rootscope.$broadcast(\"object:updated\");\n            return finishCallback();\n          });\n          transform.then(null, function() {\n            $confirm.notify(\"error\");\n            return item.revert();\n          });\n          transform[\"finally\"](function() {\n            return finishCallback();\n          });\n          return transform;\n        };\n      })(this);\n      block = function() {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\".js-block-item\")).start();\n        transform = $modelTransform.save(function(item) {\n          item.is_blocked = true;\n          item.blocked_note = $el.find(\".reason\").val();\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          return lightboxService.close($el);\n        });\n      };\n      $scope.$on(\"block\", function() {\n        $el.find(\".reason\").val($model.$modelValue.blocked_note);\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"unblock\", (function(_this) {\n        return function(event, model, finishCallback) {\n          return unblock(finishCallback);\n        };\n      })(this));\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $el.on(\"click\", \".js-block-item\", function(event) {\n        event.preventDefault();\n        return block();\n      });\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-block.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgLbBlock\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"lightboxService\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$translate\", BlockLightboxDirective]);\n\n  BlockingMessageInputDirective = function($log, $template, $compile) {\n    var link, template, templateFn;\n    template = $template.get(\"common/lightbox/lightbox-blocking-message-input.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      if (!$attrs.watch) {\n        return $log.error(\"No watch attribute on tg-blocking-message-input directive\");\n      }\n      return $scope.$watch($attrs.watch, function(value) {\n        if (value === !void 0 && value === true) {\n          return $el.find(\".blocked-note\").removeClass(\"hidden\");\n        } else {\n          return $el.find(\".blocked-note\").addClass(\"hidden\");\n        }\n      });\n    };\n    templateFn = function($el, $attrs) {\n      return template({\n        ngmodel: $attrs.ngModel\n      });\n    };\n    return {\n      template: templateFn,\n      link: link,\n      require: \"ngModel\",\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBlockingMessageInput\", [\"$log\", \"$tgTemplate\", \"$compile\", BlockingMessageInputDirective]);\n\n  CreateBulkUserstoriesDirective = function($repo, $rs, $rootscope, lightboxService, $loading, $model, $timeout, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, getCurrentStatus, submit, submitButton;\n      form = null;\n      $scope.displayStatusSelector = false;\n      getCurrentStatus = (function(_this) {\n        return function() {\n          return $scope.currentStatus = $scope.project.us_statuses.filter(function(status) {\n            return status.id === $scope[\"new\"].statusId;\n          }).pop();\n        };\n      })(this);\n      $scope.toggleStatus = function() {\n        return $scope.displayStatusSelector = !$scope.displayStatusSelector;\n      };\n      $scope.displayStatus = function() {\n        return $scope.displayStatusSelector = true;\n      };\n      $scope.hideStatus = function() {\n        $scope.displayStatusSelector = false;\n        return $scope.$apply();\n      };\n      $scope.setStatus = (function(_this) {\n        return function(status) {\n          $scope[\"new\"].statusId = status.id;\n          getCurrentStatus();\n          return $scope.displayStatusSelector = false;\n        };\n      })(this);\n      $scope.$on(\"usform:bulk\", function(ctx, projectId, status, swimlaneId) {\n        if (form) {\n          form.reset();\n        }\n        $scope[\"new\"] = {\n          projectId: projectId,\n          statusId: status,\n          bulk: \"\",\n          swimlaneId: swimlaneId\n        };\n        getCurrentStatus();\n        return lightboxService.open($el);\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise, swimlaneId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley({\n            onlyOneErrorElement: true\n          });\n          if (!form.validate()) {\n            return;\n          }\n          swimlaneId = null;\n          if ($scope.project.is_kanban_activated) {\n            swimlaneId = $scope[\"new\"].swimlane;\n            if (swimlaneId === void 0) {\n              swimlaneId = $scope.project.default_swimlane;\n            }\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userstories.bulkCreate($scope[\"new\"].projectId, $scope[\"new\"].statusId, $scope[\"new\"].bulk, swimlaneId);\n          promise.then(function(result) {\n            result = _.map(result.data, (function(_this) {\n              return function(x) {\n                return $model.make_model('userstories', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"usform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function(response) {\n            var text;\n            currentLoading.finish();\n            form.setErrors(response);\n            if (response.data.status) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response.data.swimlane_id) {\n              text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n              $confirm.notify(\"error\", text);\n            }\n            if (response._error_message) {\n              return $confirm.notify(\"error\", response._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", (function(_this) {\n        return function(event) {\n          var parentNodes, target;\n          target = angular.element(event.target);\n          parentNodes = _.filter(target.parents(), function(parent) {\n            return parent.className === \"bulk-status-selector-wrapper\";\n          });\n          if (!parentNodes.length) {\n            return $scope.hideStatus();\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkUserstories\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$tgModel\", \"$timeout\", \"$tgConfirm\", \"$translate\", CreateBulkUserstoriesDirective]);\n\n  LightboxLeaveProjectWarningDirective = function(lightboxService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      return lightboxService.open($el);\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-leave-project-warning.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLightboxLeaveProjectWarning\", [\"lightboxService\", LightboxLeaveProjectWarningDirective]);\n\n  SetDueDateDirective = function($rootscope, lightboxService, $loading, $translate, $confirm, $modelTransform) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var prettyDate, remove, save;\n      prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      lightboxService.open($el);\n      if ($scope.object.due_date) {\n        $scope.new_due_date = moment($scope.object.due_date).format(prettyDate);\n      }\n      $el.on(\"click\", \".suggestion\", function(event) {\n        var quantity, target, unit, value;\n        target = angular.element(event.currentTarget);\n        quantity = target.data('quantity');\n        unit = target.data('unit');\n        value = moment().add(quantity, unit).format(prettyDate);\n        return $el.find(\".due-date\").val(value);\n      });\n      save = function() {\n        var currentLoading, new_due_date, transform;\n        currentLoading = $loading().target($el.find(\".submit-button\")).start();\n        if ($scope.notAutoSave) {\n          new_due_date = $('.due-date').val();\n          $scope.object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          $scope.$apply();\n          currentLoading.finish();\n          lightboxService.close($el);\n          return;\n        }\n        transform = $modelTransform.save(function(object) {\n          new_due_date = $('.due-date').val();\n          object.due_date = new_due_date ? moment(new_due_date, prettyDate).format(\"YYYY-MM-DD\") : null;\n          return object;\n        });\n        transform.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          currentLoading.finish();\n          lightboxService.close($el);\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n      };\n      $el.on(\"click\", \".submit-button\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      remove = function() {\n        var message, subtitle, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.TITLE\");\n        subtitle = $translate.instant(\"LIGHTBOX.DELETE_DUE_DATE.SUBTITLE\");\n        message = moment($scope.object.due_date).format(prettyDate);\n        return $confirm.askOnDelete(title, message, subtitle).then(function(askResponse) {\n          askResponse.finish();\n          $('.due-date').val(null);\n          $scope.object.due_date_reason = null;\n          if ($scope.notAutoSave) {\n            $scope.object.due_date = null;\n            return lightboxService.close($el);\n          } else {\n            return save();\n          }\n        });\n      };\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n    };\n    return {\n      templateUrl: 'common/lightbox/lightbox-due-date.html',\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgLbSetDueDate\", [\"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$tgQueueModelTransformation\", SetDueDateDirective]);\n\n  groupBy = this.taiga.groupBy;\n\n  CreateEditDirective = function($log, $repo, $model, $rs, $rootScope, lightboxService, $loading, $translate, $confirm, $q, attachmentsService, $template, $compile) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var addExistingToSprint, attachmentsToAdd, attachmentsToDelete, checkClose, close, createAttachments, deleteAttachments, docEl, form, getSchema, isDisabledExisting, mount, objType, render, resetAttachments, saveItem, schema, schemas, setStatus, sprintChangeConfirmAndSave, submit;\n      schema = null;\n      objType = null;\n      form = null;\n      attachmentsToAdd = Immutable.List();\n      attachmentsToDelete = Immutable.List();\n      schemas = {\n        us: {\n          objName: 'User Story',\n          model: 'userstories',\n          params: {\n            include_attachments: true,\n            include_tasks: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'US',\n              translationIDPlural: 'US',\n              statusList: _.sortBy(project.us_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              tags: [],\n              points: {},\n              swimlane: data.project.is_kanban_activated ? data.project.default_swimlane : null,\n              status: data.statusId ? data.statusId : data.project.default_us_status,\n              is_archived: false\n            };\n          }\n        },\n        task: {\n          objName: 'Task',\n          model: 'tasks',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'TASK',\n              translationIDPlural: 'TASKS',\n              statusList: _.sortBy(project.task_statuses, \"order\")\n            };\n          },\n          initialData: function(data) {\n            return {\n              project: data.project.id,\n              subject: \"\",\n              description: \"\",\n              assigned_to: null,\n              tags: [],\n              milestone: data.sprintId,\n              status: data.project.default_task_status,\n              user_story: data.usId,\n              is_archived: false\n            };\n          }\n        },\n        issue: {\n          objName: 'Issue',\n          model: 'issues',\n          params: {\n            include_attachments: true\n          },\n          data: function(project) {\n            return {\n              translationID: 'ISSUE',\n              translationIDPlural: 'ISSUES',\n              project: project,\n              statusList: _.sortBy(project.issue_statuses, \"order\"),\n              typeById: groupBy(project.issue_types, function(x) {\n                return x.id;\n              }),\n              typeList: _.sortBy(project.issue_types, \"order\"),\n              severityById: groupBy(project.severities, function(x) {\n                return x.id;\n              }),\n              severityList: _.sortBy(project.severities, \"order\"),\n              priorityById: groupBy(project.priorities, function(x) {\n                return x.id;\n              }),\n              priorityList: _.sortBy(project.priorities, \"order\"),\n              milestonesById: groupBy(project.milestones, function(x) {\n                return x.id;\n              })\n            };\n          },\n          initialData: function(data) {\n            return {\n              assigned_to: null,\n              milestone: data.sprintId,\n              priority: data.project.default_priority,\n              project: data.project.id,\n              severity: data.project.default_severity,\n              status: data.project.default_issue_status,\n              subject: \"\",\n              tags: [],\n              type: data.project.default_issue_type\n            };\n          }\n        }\n      };\n      $scope.setMode = function(value) {\n        return $scope.mode = value;\n      };\n      $scope.$on(\"genericform:new\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'new';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      $scope.$on(\"genericform:new-or-existing\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'add-existing';\n        $scope.getOrCreate = true;\n        $scope.existingFilterText = '';\n        $rs[schema.model].listInAllProjects({\n          project: $scope.project.id\n        }, true).then(function(data) {\n          return $scope.existingItems = angular.copy(data);\n        });\n        return mount(params);\n      });\n      $scope.$on(\"genericform:edit\", function(ctx, params) {\n        getSchema(params);\n        $scope.mode = 'edit';\n        $scope.getOrCreate = false;\n        return mount(params);\n      });\n      getSchema = function(params) {\n        _.map(params, function(value, key) {\n          return $scope[key] = value;\n        });\n        if (!$scope.objType || !schemas[$scope.objType]) {\n          return $log.error(\"Invalid objType `\" + $scope.objType + \"` for `genericform` event\");\n        }\n        return schema = schemas[$scope.objType];\n      };\n      mount = function(params) {\n        $scope.objName = schema.objName;\n        if ($scope.mode === 'edit') {\n          $scope.obj = params.obj;\n          $scope.attachments = Immutable.fromJS(params.attachments);\n        } else {\n          $scope.obj = $model.make_model(schema.model, schema.initialData(params));\n          $scope.attachments = Immutable.List();\n        }\n        _.map(schema.data($scope.project), function(value, key) {\n          return $scope[key] = value;\n        });\n        if (form) {\n          form.reset();\n        }\n        resetAttachments();\n        setStatus($scope.obj.status);\n        render();\n        $scope.lightboxOpen = true;\n        return lightboxService.open($el, null, null, true);\n      };\n      resetAttachments = function() {\n        attachmentsToAdd = Immutable.List();\n        return attachmentsToDelete = Immutable.List();\n      };\n      $scope.addAttachment = function(attachment) {\n        return attachmentsToAdd = attachmentsToAdd.push(attachment);\n      };\n      $scope.deleteAttachment = function(attachment) {\n        attachmentsToAdd = attachmentsToAdd.filter(function(it) {\n          return it.get('name') !== attachment.get('name');\n        });\n        if (attachment.get(\"id\")) {\n          return attachmentsToDelete = attachmentsToDelete.push(attachment);\n        }\n      };\n      $scope.addTag = function(tag, color) {\n        var inserted, itemtags, projectTags, tags, value;\n        value = trim(tag.toLowerCase());\n        tags = $scope.project.tags;\n        projectTags = $scope.project.tags_colors;\n        if (tags == null) {\n          tags = [];\n        }\n        if (projectTags == null) {\n          projectTags = {};\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        projectTags[tag] = color || null;\n        $scope.project.tags = tags;\n        itemtags = _.clone($scope.obj.tags);\n        inserted = _.find(itemtags, function(it) {\n          return it[0] === value;\n        });\n        if (!inserted) {\n          itemtags.push([value, color]);\n          return $scope.obj.tags = itemtags;\n        }\n      };\n      $scope.deleteTag = function(tag) {\n        var itemtags, tags, value;\n        value = trim(tag[0].toLowerCase());\n        tags = $scope.project.tags;\n        itemtags = _.clone($scope.obj.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === value;\n        });\n        $scope.obj.tags = itemtags;\n        return _.pull($scope.obj.tags, value);\n      };\n      createAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToAdd.toJS(), function(attachment) {\n          return attachmentsService.upload(attachment.file, obj.id, $scope.obj.project, $scope.objType);\n        });\n        return $q.all(promises);\n      };\n      deleteAttachments = function(obj) {\n        var promises;\n        promises = _.map(attachmentsToDelete.toJS(), function(attachment) {\n          return attachmentsService[\"delete\"]($scope.objType, attachment.id);\n        });\n        return $q.all(promises);\n      };\n      addExistingToSprint = function(item) {\n        var currentLoading, onError, onSuccess;\n        currentLoading = $loading().target($el.find(\".add-existing-button\")).start();\n        if (item.milestone) {\n          return sprintChangeConfirmAndSave(item);\n        } else {\n          onSuccess = function() {\n            close();\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            return close();\n          };\n          return saveItem(item, onSuccess, onError);\n        }\n      };\n      sprintChangeConfirmAndSave = function(item) {\n        var message, newSprintName, oldSprintName, title;\n        oldSprintName = $scope.milestonesById[item.milestone].name;\n        newSprintName = $scope.milestonesById[$scope.relatedObjectId].name;\n        title = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.TITLE\");\n        message = $translate.instant(\"ISSUES.CONFIRM_CHANGE_FROM_SPRINT.MESSAGE\", {\n          issue: item.subject,\n          oldSprintName: oldSprintName,\n          newSprintName: newSprintName\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            askResponse.finish();\n            lightboxService.closeAll();\n            $scope.lightboxOpen = false;\n            return $rootScope.$broadcast($scope.objType + \"form:add:success\", item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          return saveItem(item, onSuccess, onError);\n        });\n      };\n      saveItem = function(item, onSuccess, onError) {\n        item.setAttr($scope.relatedField, $scope.relatedObjectId);\n        return $repo.save(item, true).then(onSuccess, onError);\n      };\n      isDisabledExisting = function(item) {\n        return item && item[$scope.relatedField] === $scope.relatedObjectId;\n      };\n      $scope.isDisabledExisting = function(selectedItem) {\n        return isDisabledExisting(selectedItem);\n      };\n      $scope.addExistingToSprint = function(selectedItem) {\n        return addExistingToSprint(selectedItem);\n      };\n      submit = debounce(2000, function(event) {\n        var broadcastEvent, currentLoading, prettyDate, promise;\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target($el.find(\"#submitButton\")).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        if ($scope.mode === 'new') {\n          promise = $repo.create(schema.model, $scope.obj);\n          broadcastEvent = $scope.objType + \"form:new:success\";\n        } else {\n          if ($scope.obj.due_date instanceof moment) {\n            prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n            $scope.obj.due_date = $scope.obj.due_date.format(\"YYYY-MM-DD\");\n          }\n          promise = $repo.save($scope.obj, true);\n          broadcastEvent = $scope.objType + \"form:edit:success\";\n        }\n        promise.then(function(data) {\n          return deleteAttachments(data).then(function() {\n            return createAttachments(data).then(function() {\n              currentLoading.finish();\n              $confirm.notify(\"success\");\n              close();\n              if (data.ref) {\n                return $rs[schema.model].getByRef(data.project, data.ref, schema.params).then(function(obj) {\n                  return $rootScope.$broadcast(broadcastEvent, obj);\n                });\n              }\n            });\n          });\n        });\n        return promise.then(null, function(response) {\n          var text;\n          currentLoading.finish();\n          form.setErrors(response);\n          console.log({\n            response: response\n          });\n          if (response.status) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_STATUS\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response.swimlane) {\n            text = $translate.instant(\"LIGHTBOX.CREATE_EDIT.ERROR_SWIMLANE\");\n            $confirm.notify(\"error\", text);\n          }\n          if (response._error_message) {\n            return $confirm.notify(\"error\", response._error_message);\n          }\n        });\n      });\n      checkClose = function() {\n        if (!$scope.obj.isModified()) {\n          close();\n          return $scope.$apply(function() {\n            return $scope.obj.revert();\n          });\n        } else {\n          return $confirm.ask($translate.instant(\"LIGHTBOX.CREATE_EDIT.CONFIRM_CLOSE\")).then(function(result) {\n            result.finish();\n            return close();\n          });\n        }\n      };\n      close = function() {\n        lightboxService.closeAll();\n        return $scope.lightboxOpen = false;\n      };\n      docEl = angular.element(document);\n      docEl.on(\"keydown.lightbox-create-edit\", function(event) {\n        var code;\n        if ($scope.lightboxOpen) {\n          event.stopPropagation();\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 27) {\n            return checkClose();\n          }\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.find('.close').on(\"click\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return checkClose();\n      });\n      $el.on(\"click\", \".status-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        setStatus(angular.element(event.currentTarget).data(\"status-id\"));\n        $scope.$apply();\n        $scope.$broadcast(\"status:changed\", $scope.obj.status);\n        return $el.find(\".pop-status\").popover().close();\n      });\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        $scope.obj.team_requirement = !$scope.obj.team_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        $scope.obj.client_requirement = !$scope.obj.client_requirement;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".is-blocked\", function(event) {\n        $scope.obj.is_blocked = !$scope.obj.is_blocked;\n        return $scope.$apply();\n      });\n      $el.on(\"click\", \".iocaine\", function(event) {\n        $scope.obj.is_iocaine = !$scope.obj.is_iocaine;\n        $scope.$apply();\n        return $scope.$broadcast(\"isiocaine:changed\", $scope.obj);\n      });\n      $scope.isTeamRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.team_requirement : void 0;\n      };\n      $scope.isClientRequirement = function() {\n        var ref;\n        return (ref = $scope.obj) != null ? ref.client_requirement : void 0;\n      };\n      setStatus = function(id) {\n        $scope.obj.status = id;\n        $scope.selectedStatus = _.find($scope.statusList, function(item) {\n          return item.id === id;\n        });\n        return $scope.obj.is_closed = $scope.selectedStatus.is_closed;\n      };\n      return render = function(sprint) {\n        var compiledTemplate, template, templateScope;\n        template = $template.get(\"common/lightbox/lightbox-create-edit/lb-create-edit.html\");\n        templateScope = $scope.$new();\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEdit\", [\"$log\", \"$tgRepo\", \"$tgModel\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"$tgConfirm\", \"$q\", \"tgAttachmentsService\", \"$tgTemplate\", \"$compile\", CreateEditDirective]);\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelateToEpicLightboxDirective = function($rootScope, $confirm, lightboxService, $tgCurrentUserService, tgResources, $tgResources, $epicsService, tgAnalytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var existingEpicForm, filterEpics, loadProjects, newEpicForm, selectProject, us;\n      us = null;\n      $scope.projects = null;\n      $scope.projectEpics = Immutable.List();\n      $scope.loading = false;\n      $scope.selectedProject = $scope.project.id;\n      newEpicForm = $el.find(\".new-epic-form\").checksley();\n      existingEpicForm = $el.find(\".existing-epic-form\").checksley();\n      loadProjects = function() {\n        if ($scope.projects === null) {\n          return $scope.projects = $tgCurrentUserService.projects.get(\"unblocked\");\n        }\n      };\n      filterEpics = function(selectedProjectId, filterText) {\n        return tgResources.epics.listInAllProjects({\n          is_epics_activated: true,\n          project__blocked_code: 'null',\n          project: selectedProjectId,\n          q: filterText\n        }, true).then(function(data) {\n          var excludeIds, filteredData;\n          excludeIds = [];\n          if (us.epics) {\n            excludeIds = us.epics.map(function(epic) {\n              return epic.id;\n            });\n          }\n          filteredData = data.filter(function(epic) {\n            return excludeIds.indexOf(epic.get('id')) === -1;\n          });\n          return $scope.projectEpics = filteredData;\n        });\n      };\n      selectProject = function(selectedProjectId) {\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        return filterEpics(selectedProjectId, $scope.searchEpic);\n      };\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $scope.$on(\"relate-to-epic:add\", function(ctx, item) {\n        us = item;\n        $scope.selectedEpic = null;\n        $scope.searchEpic = \"\";\n        loadProjects();\n        return filterEpics($scope.selectedProject, $scope.searchEpic).then(function() {\n          return lightboxService.open($el).then(function() {\n            return $el.find('input').focus;\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.selectProject = function(selectedProjectId) {\n        return selectProject(selectedProjectId);\n      };\n      $scope.onUpdateSearchEpic = debounceLeading(300, function() {\n        $scope.selectedEpic = null;\n        return filterEpics($scope.selectedProject, $scope.searchEpic);\n      });\n      $scope.saveRelatedEpic = function(selectedEpicId, onSavedRelatedEpic) {\n        var onError, onSuccess, usId;\n        if (!existingEpicForm.validate()) {\n          return;\n        }\n        $scope.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return existingEpicForm.setErrors(data);\n        };\n        onSuccess = function(data) {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        usId = us.id;\n        return tgResources.epics.addRelatedUserstory(selectedEpicId, usId).then(onSuccess, onError);\n      };\n      return $scope.createEpic = function(selectedProjectId, epicSubject) {\n        var onCreateEpic, onError, onSuccess;\n        if (!newEpicForm.validate()) {\n          return;\n        }\n        this.loading = true;\n        onError = function(data) {\n          $scope.loading = false;\n          $confirm.notify(\"error\");\n          return newEpicForm.setErrors(errors);\n        };\n        onSuccess = function() {\n          tgAnalytics.trackEvent(\"user story related epic\", \"create\", \"create related epic on user story\", 1);\n          $scope.loading = false;\n          $rootScope.$broadcast(\"related-epics:changed\", us);\n          return lightboxService.close($el);\n        };\n        onCreateEpic = function(epic) {\n          var epicId, usId;\n          epicId = epic.get('id');\n          usId = us.id;\n          return tgResources.epics.addRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        };\n        return $epicsService.createEpic({\n          subject: epicSubject\n        }, null, selectedProjectId).then(onCreateEpic, onError);\n      };\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-relate-to-epic.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbRelatetoepic\", [\"$rootScope\", \"$tgConfirm\", \"lightboxService\", \"tgCurrentUserService\", \"tgResources\", \"$tgResources\", \"tgEpicsService\", \"$tgAnalytics\", RelateToEpicLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loaded, module;\n\n  module = angular.module(\"taigaCommon\");\n\n  Loaded = function($parse, $timeout) {\n    return {\n      restrict: 'A',\n      compile: function($element, $attrs) {\n        var fn;\n        fn = $parse($attrs['tgLoaded']);\n        return function($scope, $element) {\n          var callback;\n          callback = function() {\n            return fn($scope, {\n              $event: {\n                target: $element\n              }\n            });\n          };\n          $timeout(function() {\n            return callback();\n          });\n          return null;\n        };\n      }\n    };\n  };\n\n  module.directive(\"tgLoaded\", ['$parse', '$timeout', Loaded]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Loader, LoaderDirective, module, sizeFormat, taiga, timeout;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaCommon\");\n\n  LoaderDirective = function(tgLoader, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      tgLoader.onStart(function() {\n        $(document.body).addClass(\"loader-active\");\n        return $el.addClass(\"active\");\n      });\n      return tgLoader.onEnd(function() {\n        $(document.body).removeClass(\"loader-active\");\n        return $el.removeClass(\"active\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoader\", [\"tgLoader\", \"$rootScope\", LoaderDirective]);\n\n  Loader = function($rootscope) {\n    var autoClose, config, lastResponseDate, open, pageLoaded, requestCount, start, startLoadTime;\n    config = {\n      minTime: 300\n    };\n    open = false;\n    startLoadTime = 0;\n    requestCount = 0;\n    lastResponseDate = 0;\n    pageLoaded = function(force) {\n      var diff, endTime, timeoutValue;\n      if (force == null) {\n        force = false;\n      }\n      if (startLoadTime) {\n        timeoutValue = 0;\n        if (!force) {\n          endTime = new Date().getTime();\n          diff = endTime - startLoadTime;\n          if (diff < config.minTime) {\n            timeoutValue = config.minTime - diff;\n          }\n        }\n        timeout(timeoutValue, function() {\n          $rootscope.$broadcast(\"loader:end\");\n          open = false;\n          return window.prerenderReady = true;\n        });\n      }\n      startLoadTime = 0;\n      requestCount = 0;\n      return lastResponseDate = 0;\n    };\n    autoClose = function() {\n      var intervalAuto;\n      return intervalAuto = setInterval((function() {\n        if (lastResponseDate && requestCount === 0) {\n          pageLoaded();\n          return clearInterval(intervalAuto);\n        }\n      }), 50);\n    };\n    start = function() {\n      startLoadTime = new Date().getTime();\n      $rootscope.$broadcast(\"loader:start\");\n      return open = true;\n    };\n    return {\n      pageLoaded: pageLoaded,\n      open: function() {\n        return open;\n      },\n      start: function(auto) {\n        if (auto == null) {\n          auto = false;\n        }\n        if (!open) {\n          start();\n          if (auto) {\n            return autoClose();\n          }\n        }\n      },\n      onStart: function(fn) {\n        return $rootscope.$on(\"loader:start\", fn);\n      },\n      onEnd: function(fn) {\n        return $rootscope.$on(\"loader:end\", fn);\n      },\n      logRequest: function() {\n        return requestCount++;\n      },\n      logResponse: function() {\n        if (requestCount > 0) {\n          requestCount--;\n        }\n        return lastResponseDate = new Date().getTime();\n      }\n    };\n  };\n\n  Loader.$inject = [\"$rootScope\"];\n\n  module.factory(\"tgLoader\", Loader);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadingDirective, TgLoadingService, module,\n    slice = [].slice;\n\n  module = angular.module(\"taigaCommon\");\n\n  TgLoadingService = function($compile) {\n    var spinner;\n    spinner = \"<img class='loading-spinner' src='/\" + window._version + \"/svg/spinner-circle.svg' alt='loading...' />\";\n    return function() {\n      var service;\n      service = {\n        settings: {\n          target: null,\n          scope: null,\n          classes: [],\n          timeout: 0,\n          template: null\n        },\n        target: function(target) {\n          service.settings.target = target;\n          return service;\n        },\n        scope: function(scope) {\n          service.settings.scope = scope;\n          return service;\n        },\n        template: function(template) {\n          service.settings.template = template;\n          return service;\n        },\n        removeClasses: function() {\n          var classess;\n          classess = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n          service.settings.classes = classess;\n          return service;\n        },\n        timeout: function(timeout) {\n          service.settings.timeout = timeout;\n          return service;\n        },\n        isLoading: function() {\n          var target;\n          target = service.settings.target;\n          return target.hasClass('loading');\n        },\n        start: function() {\n          var target, timeoutId;\n          target = service.settings.target;\n          service.settings.classes.map(function(className) {\n            return target.removeClass(className);\n          });\n          if (!target.hasClass('loading') && !service.settings.template) {\n            service.settings.template = target.html();\n          }\n          timeoutId = setTimeout((function() {\n            if (!target.hasClass('loading')) {\n              target.addClass('loading');\n              return target.html(spinner);\n            }\n          }), service.settings.timeout);\n          service.settings.timeoutId = timeoutId;\n          return service;\n        },\n        finish: function() {\n          var removeClasses, target, timeoutId;\n          target = service.settings.target;\n          timeoutId = service.settings.timeoutId;\n          if (timeoutId) {\n            clearTimeout(timeoutId);\n            removeClasses = service.settings.classes;\n            removeClasses.map(function(className) {\n              return service.settings.target.addClass(className);\n            });\n            target.html(service.settings.template);\n            target.removeClass('loading');\n            if (service.settings.scope) {\n              $compile(target.contents())(service.settings.scope);\n            }\n          }\n          return service;\n        }\n      };\n      return service;\n    };\n  };\n\n  TgLoadingService.$inject = [\"$compile\"];\n\n  module.factory(\"$tgLoading\", TgLoadingService);\n\n  LoadingDirective = function($loading) {\n    var link;\n    link = function($scope, $el, attr) {\n      var currentLoading, template;\n      currentLoading = null;\n      template = $el.html();\n      return $scope.$watch(attr.tgLoading, (function(_this) {\n        return function(showLoading) {\n          if (showLoading) {\n            return currentLoading = $loading().target($el).timeout(100).template(template).scope($scope).start();\n          } else if (currentLoading) {\n            return currentLoading.finish();\n          }\n        };\n      })(this));\n    };\n    return {\n      priority: 99999,\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoading\", [\"$tgLoading\", LoadingDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedTaskStatusDirective, UsStatusDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaCommon\");\n\n  UsStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a US and a popover to change it.\n    - tg-us-status: The user story\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-us-status=\"us\" on-update=\"ctrl.loadSprintState()\")\n        a.us-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'usStatusById' and 'project'.\n     */\n    var link, template;\n    template = $template.get(\"common/popover/popover-us-status.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, render, us;\n      $ctrl = $el.controller();\n      render = function(us) {\n        var usStatusById, usStatusDom, usStatusDomParent;\n        usStatusDomParent = $el.find(\".us-status\");\n        usStatusDom = $el.find(\".us-status .us-status-bind\");\n        usStatusById = $scope.usStatusById;\n        if (usStatusById[us.status]) {\n          usStatusDom.text(usStatusById[us.status].name);\n          return usStatusDomParent.css(\"color\", usStatusById[us.status].color);\n        }\n      };\n      $el.on(\"click\", \".us-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".popover-status\", debounce(2000, function(event) {\n        var statusElement, target, us;\n        event.preventDefault();\n        event.stopPropagation();\n        statusElement = $(event.currentTarget).find('#js-status-btn');\n        target = angular.element(statusElement);\n        us = $scope.$eval($attrs.tgUsStatus);\n        us.status = target.data(\"status-id\");\n        render(us);\n        $el.find(\".pop-status\").popover().close();\n        return $scope.$apply(function() {\n          return $repo.save(us).then(function() {\n            return $scope.$eval($attrs.onUpdate);\n          });\n        });\n      }));\n      $scope.$on(\"userstories:loaded\", function() {\n        return render($scope.$eval($attrs.tgUsStatus));\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      us = $scope.$eval($attrs.tgUsStatus);\n      render(us);\n      return bindOnce($scope, \"project\", function(project) {\n        var html;\n        html = template({\n          \"statuses\": project.us_statuses,\n          \"currentStatus\": us.status\n        });\n        $el.append(html);\n        if ($scope.project.my_permissions.indexOf(\"modify_us\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsStatus\", [\"$tgRepo\", \"$tgTemplate\", UsStatusDirective]);\n\n  RelatedTaskStatusDirective = function($repo, $template) {\n\n    /*\n    Print the status of a related task and a popover to change it.\n    - tg-related-task-status: The related task\n    - on-update: Method call after US is updated\n    \n    Example:\n    \n      div.status(tg-related-task-status=\"task\" on-update=\"ctrl.loadSprintState()\")\n        a.task-status(href=\"\", title=\"Status Name\")\n    \n    NOTE: This directive need 'taskStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateTaskStatus;\n    selectionTemplate = $template.get(\"common/popover/popover-related-task-status.html\", true);\n    updateTaskStatus = function($el, task, taskStatusById) {\n      var taskStatusDom, taskStatusDomParent;\n      taskStatusDomParent = $el.find(\".us-status\");\n      taskStatusDom = $el.find(\".task-status .task-status-bind\");\n      if (taskStatusById[task.status]) {\n        taskStatusDom.text(taskStatusById[task.status].name);\n        return taskStatusDomParent.css('color', taskStatusById[task.status].color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, autoSave, notAutoSave, task;\n      $ctrl = $el.controller();\n      task = $scope.$eval($attrs.tgRelatedTaskStatus);\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      autoSave = !notAutoSave;\n      $el.on(\"click\", \".task-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        task.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (autoSave) {\n          return $scope.$apply(function() {\n            return $repo.save(task).then(function() {\n              $scope.$eval($attrs.onUpdate);\n              return $scope.$emit(\"related-tasks:status-changed\");\n            });\n          });\n        }\n      }));\n      $scope.$watch($attrs.tgRelatedTaskStatus, function() {\n        task = $scope.$eval($attrs.tgRelatedTaskStatus);\n        return updateTaskStatus($el, task, $scope.taskStatusById);\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.task_statuses\n        }));\n        updateTaskStatus($el, task, $scope.taskStatusById);\n        if (project.my_permissions.indexOf(\"modify_task\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRelatedTaskStatus\", [\"$tgRepo\", \"$tgTemplate\", RelatedTaskStatusDirective]);\n\n  $.fn.popover = function() {\n    var $el, close, closeAll, closePopover, isVisible, open;\n    $el = this;\n    isVisible = (function(_this) {\n      return function() {\n        var docViewBottom, docViewLeft, docViewRight, docViewTop, docViewWidth, elemBottom, elemLeft, elemRight, elemTop, elemWidth;\n        $el.css({\n          \"display\": \"block\",\n          \"visibility\": \"hidden\"\n        });\n        docViewTop = $(window).scrollTop();\n        docViewBottom = docViewTop + $(window).height();\n        docViewWidth = $(window).width();\n        docViewRight = docViewWidth;\n        docViewLeft = 0;\n        elemTop = $el.offset().top;\n        elemBottom = elemTop + $el.height();\n        elemWidth = $el.width();\n        elemLeft = $el.offset().left;\n        elemRight = $el.offset().left + elemWidth;\n        $el.css({\n          \"display\": \"none\",\n          \"visibility\": \"visible\"\n        });\n        return (elemBottom <= docViewBottom) && (elemTop >= docViewTop) && (elemLeft >= docViewLeft) && (elemRight <= docViewRight);\n      };\n    })(this);\n    closePopover = (function(_this) {\n      return function(onClose) {\n        if (onClose) {\n          onClose.call($el);\n        }\n        $el.fadeOut(function() {\n          return $el.removeClass(\"active\").removeClass(\"fix\");\n        });\n        return $el.off(\"popup:close\");\n      };\n    })(this);\n    closeAll = (function(_this) {\n      return function() {\n        return $(\".popover.active\").each(function() {\n          return $(this).trigger(\"popup:close\");\n        });\n      };\n    })(this);\n    open = (function(_this) {\n      return function(onClose) {\n        if ($el.hasClass(\"active\")) {\n          return close();\n        } else {\n          closeAll();\n          if (!isVisible()) {\n            $el.addClass(\"fix\");\n          }\n          $el.fadeIn(function() {\n            $el.addClass(\"active\");\n            $(document.body).off(\"popover\");\n            return $(document.body).one(\"click.popover\", function() {\n              return closeAll();\n            });\n          });\n          return $el.on(\"popup:close\", function(e) {\n            return closePopover(onClose);\n          });\n        }\n      };\n    })(this);\n    close = (function(_this) {\n      return function() {\n        return $el.trigger(\"popup:close\");\n      };\n    })(this);\n    return {\n      open: open,\n      close: close,\n      closeAll: closeAll\n    };\n  };\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExceptionHandlerFactory, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  ExceptionHandlerFactory = function($log, config) {\n    var ravenConfig;\n    this.config = config;\n    ravenConfig = this.config.get(\"ravenConfig\", null);\n    if (ravenConfig) {\n      $log.debug(\"Using the RavenJS exception handler.\");\n      Raven.config(ravenConfig).install();\n      return function(exception, cause) {\n        $log.error.apply($log, arguments);\n        return Raven.captureException(exception);\n      };\n    } else {\n      $log.debug(\"Using the default logging exception handler.\");\n      return function(exception, cause) {\n        return $log.error.apply($log, arguments);\n      };\n    }\n  };\n\n  module.factory(\"$exceptionHandler\", [\"$log\", \"$tgConfig\", ExceptionHandlerFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SectionsService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaCommon\");\n\n  SectionsService = (function(superClass) {\n    var SECTIONS;\n\n    extend(SectionsService, superClass);\n\n    SectionsService.$inject = [\"$translate\", \"tgCurrentUserService\"];\n\n    SECTIONS = {\n      1: {\n        id: 1,\n        title: 'TIMELINE',\n        path: 'timeline',\n        enabled: ''\n      },\n      2: {\n        id: 2,\n        title: 'EPICS',\n        path: 'epics',\n        enabled: 'is_epics_activated'\n      },\n      3: {\n        id: 3,\n        title: 'BACKLOG',\n        path: 'backlog',\n        enabled: 'is_backlog_activated'\n      },\n      4: {\n        id: 4,\n        title: 'KANBAN',\n        path: 'kanban',\n        enabled: 'is_kanban_activated'\n      },\n      5: {\n        id: 5,\n        title: 'ISSUES',\n        path: 'issues',\n        enabled: 'is_issues_activated'\n      },\n      6: {\n        id: 6,\n        title: 'WIKI',\n        path: 'wiki',\n        enabled: 'is_wiki_activated'\n      }\n    };\n\n    function SectionsService(translate, currentUserService) {\n      this.translate = translate;\n      this.currentUserService = currentUserService;\n      SectionsService.__super__.constructor.call(this);\n      _.map(SECTIONS, (function(_this) {\n        return function(x) {\n          return x.title = _this.translate.instant(\"PROJECT.SECTION.\" + x.title);\n        };\n      })(this));\n    }\n\n    SectionsService.prototype.list = function() {\n      return SECTIONS;\n    };\n\n    SectionsService.prototype.getPath = function(projectSlug, sectionId) {\n      var defaultHomePage, project, projects, ref, section;\n      defaultHomePage = \"timeline\";\n      projects = (ref = this.currentUserService.projects) != null ? ref.get(\"all\") : void 0;\n      if (!projects) {\n        return defaultHomePage;\n      }\n      project = projects.find(function(p) {\n        return p.get('slug') === projectSlug;\n      });\n      if (!project) {\n        return defaultHomePage;\n      }\n      if (!sectionId) {\n        sectionId = project.get('my_homepage');\n      }\n      section = _.find(SECTIONS, {\n        \"id\": sectionId\n      });\n      if (!section || (project != null ? project.get(section.enabled) : void 0) === !true) {\n        return defaultHomePage;\n      }\n      return section.path;\n    };\n\n    return SectionsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgSections\", SectionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagManagerService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagManagerService = (function(superClass) {\n    extend(TagManagerService, superClass);\n\n    TagManagerService.$inject = [\"$rootScope\", \"$log\", \"$tgConfig\", \"$window\", \"$document\", \"$location\"];\n\n    function TagManagerService(rootscope, log, config, win, doc, location) {\n      var conf;\n      this.rootscope = rootscope;\n      this.log = log;\n      this.config = config;\n      this.win = win;\n      this.doc = doc;\n      this.location = location;\n      this.initialized = false;\n      conf = this.config.get(\"tagManager\", {});\n      this.accountId = conf.accountId;\n    }\n\n    TagManagerService.prototype.initialize = function() {\n      if (!this.accountId) {\n        this.log.debug(\"Tag Manager: no account id provided. Disabling.\");\n        return;\n      }\n      this.injectTagManager();\n      return this.initialized = true;\n    };\n\n    TagManagerService.prototype.injectTagManager = function() {\n      var fn;\n      fn = (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;\n              j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\n              f.parentNode.insertBefore(j,f);});\n      return fn(window, document, \"script\", \"dataLayer\", this.accountId);\n    };\n\n    return TagManagerService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgTagManager\", TagManagerService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorizeTagsBacklogDirective, LbTagLineDirective, TagsDirective, bindOnce, module, taiga, trim,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaCommon\");\n\n  TagsDirective = function() {\n    var formatter, link, parser;\n    formatter = function(v) {\n      if (_.isArray(v)) {\n        return v.join(\", \");\n      }\n      return \"\";\n    };\n    parser = function(v) {\n      var result;\n      if (!v) {\n        return [];\n      }\n      result = _(v.split(\",\")).map(function(x) {\n        return _.trim(x);\n      });\n      return result.value();\n    };\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl.$formatters.push(formatter);\n      $ctrl.$parsers.push(parser);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      require: \"ngModel\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgTags\", TagsDirective);\n\n  ColorizeTagsBacklogDirective = function($emojis) {\n    var link, template;\n    template = _.template(\"<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] !== null) { %>\\n    <div class=\\\"tag\\\" style=\\\"background: <%- tag[1] %>\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\\n<% _.each(tags, function(tag) { %>\\n    <% if (tag[1] === null) { %>\\n    <div class=\\\"tag\\\">\\n        <%= emojify(tag[0]) %>\\n    </div>\\n    <% } %>\\n<% }) %>\");\n    link = function($scope, $el, $attrs, $ctrl) {\n      var render;\n      render = function(tags) {\n        var html;\n        html = template({\n          tags: tags,\n          emojify: function(text) {\n            return $emojis.replaceEmojiNameByHtmlImgs(_.escape(text));\n          }\n        });\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.tgColorizeBacklogTags, function(tags) {\n        if (tags != null) {\n          return render(tags);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgColorizeBacklogTags\", [\"$tgEmojis\", ColorizeTagsBacklogDirective]);\n\n  LbTagLineDirective = function($rs, $template, $compile) {\n    var COMMA_KEY, ENTER_KEY, autocomplete, link, templateTags;\n    ENTER_KEY = 13;\n    COMMA_KEY = 188;\n    templateTags = $template.get(\"common/tag/lb-tag-line-tags.html\", true);\n    autocomplete = null;\n    link = function($scope, $el, $attrs, $model) {\n      var addValue, deleteValue, hideSaveButton, renderTags, resetInput, saveInputTag, showSaveButton, withoutColors;\n      withoutColors = _.has($attrs, \"withoutColors\");\n      renderTags = function(tags, tagsColors) {\n        var color, ctx, html;\n        if (tagsColors == null) {\n          tagsColors = [];\n        }\n        color = !withoutColors ? tagsColors[t] : null;\n        ctx = {\n          tags: _.map(tags, function(t) {\n            return {\n              name: t,\n              style: color ? \"border-left: 5px solid \" + color : \"\"\n            };\n          })\n        };\n        html = $compile(templateTags(ctx))($scope);\n        return $el.find(\".tags-container\").html(html);\n      };\n      showSaveButton = function() {\n        return $el.find(\".save\").removeClass(\"hidden\");\n      };\n      hideSaveButton = function() {\n        return $el.find(\".save\").addClass(\"hidden\");\n      };\n      resetInput = function() {\n        $el.find(\"input\").val(\"\");\n        return autocomplete.close();\n      };\n      addValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        if (tags == null) {\n          tags = [];\n        }\n        if (indexOf.call(tags, value) < 0) {\n          tags.push(value);\n        }\n        $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n        return hideSaveButton();\n      };\n      deleteValue = function(value) {\n        var tags;\n        value = trim(value.toLowerCase());\n        if (value.length === 0) {\n          return;\n        }\n        tags = _.clone($model.$modelValue, false);\n        tags = _.pull(tags, value);\n        return $scope.$apply(function() {\n          return $model.$setViewValue(tags);\n        });\n      };\n      saveInputTag = function() {\n        var value;\n        value = $el.find(\"input\").val();\n        addValue(value);\n        return resetInput();\n      };\n      $el.on(\"keypress\", \"input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === ENTER_KEY) {\n          event.preventDefault();\n          return saveInputTag();\n        } else if (String.fromCharCode(event.keyCode) === ',') {\n          event.preventDefault();\n          return saveInputTag();\n        } else {\n          if (target.val().length) {\n            return showSaveButton();\n          } else {\n            return hideSaveButton();\n          }\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return saveInputTag();\n      });\n      $el.on(\"click\", \".remove-tag\", function(event) {\n        var target, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        value = target.siblings(\".tag-name\").text();\n        return deleteValue(value);\n      });\n      bindOnce($scope, \"project\", function(project) {\n        var input;\n        input = $el.find(\"input\");\n        autocomplete = new Awesomplete(input[0], {\n          list: _.keys(project.tags_colors)\n        });\n        return input.on(\"awesomplete-selectcomplete\", function() {\n          addValue(input.val());\n          return input.val(\"\");\n        });\n      });\n      $scope.$watch($attrs.ngModel, function(tags) {\n        var ref, tagsColors;\n        tagsColors = ((ref = $scope.project) != null ? ref.tags_colors : void 0) || [];\n        return renderTags(tags, tagsColors);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      require: \"ngModel\",\n      templateUrl: \"common/tag/lb-tag-line.html\"\n    };\n  };\n\n  module.directive(\"tgLbTagLine\", [\"$tgResources\", \"$tgTemplate\", \"$compile\", LbTagLineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserPilotService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaCommon\");\n\n  UserPilotService = (function(superClass) {\n    var JOINED_LIMIT_DAYS;\n\n    extend(UserPilotService, superClass);\n\n    UserPilotService.$inject = [\"$rootScope\", \"$window\"];\n\n    JOINED_LIMIT_DAYS = 42;\n\n    function UserPilotService(rootScope, win) {\n      this.rootScope = rootScope;\n      this.win = win;\n      this.initialized = false;\n    }\n\n    UserPilotService.prototype.initialize = function() {\n      if (this.initialized) {\n        return;\n      }\n      this.rootScope.$on('$locationChangeSuccess', (function(_this) {\n        return function() {\n          if (_this.win.userpilot) {\n            return _this.win.userpilot.reload();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"auth:refresh\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:register\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:login\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      this.rootScope.$on(\"auth:logout\", (function(_this) {\n        return function(ctx, user) {\n          return _this.identify();\n        };\n      })(this));\n      return this.initialized = true;\n    };\n\n    UserPilotService.prototype.checkZendeskConditions = function(userData) {\n      var hasPaidPlan, is_new_user, joined;\n      hasPaidPlan = this.hasPaidPlan(userData);\n      joined = new Date(userData[\"date_joined\"]);\n      is_new_user = joined > this.getJoinedLimit();\n      return hasPaidPlan && is_new_user;\n    };\n\n    UserPilotService.prototype.identify = function() {\n      var userData, userInfo, userPilotCustomer, userPilotId;\n      userInfo = this.win.localStorage.getItem(\"userInfo\") || \"{}\";\n      userData = JSON.parse(userInfo);\n      if (this.win.userpilot) {\n        userPilotId = this.calculateUserPilotId(userData);\n        userPilotCustomer = this.prepareUserPilotCustomer(userData);\n        this.win.userpilot.identify(userPilotId, userPilotCustomer);\n      }\n      if (this.win.zE) {\n        if (this.checkZendeskConditions(userData)) {\n          return this.setZendeskWidgetStatus({\n            enabled: true\n          });\n        } else {\n          return this.setZendeskWidgetStatus({\n            enabled: false\n          });\n        }\n      }\n    };\n\n    UserPilotService.prototype.prepareUserPilotCustomer = function(data) {\n      if (!data[\"id\"]) {\n        return {\n          created_at: Date.now()\n        };\n      }\n      return {\n        name: data[\"full_name_display\"],\n        email: data[\"email\"],\n        created_at: Date.now(),\n        taiga_id: data[\"id\"],\n        taiga_username: data[\"username\"],\n        taiga_date_joined: data[\"date_joined\"],\n        taiga_lang: data[\"lang\"],\n        taiga_max_private_projects: data[\"max_private_projects\"],\n        taiga_max_memberships_private_projects: data[\"max_memberships_private_projects\"],\n        taiga_verified_email: data[\"verified_email\"],\n        taiga_total_private_projects: data[\"total_private_projects\"],\n        taiga_total_public_projects: data[\"total_public_projects\"],\n        taiga_roles: data[\"roles\"] && data[\"roles\"].toString()\n      };\n    };\n\n    UserPilotService.prototype.hasPaidPlan = function(data) {\n      var maxPrivateProjects;\n      maxPrivateProjects = data[\"max_private_projects\"];\n      return maxPrivateProjects !== void 0 && maxPrivateProjects !== 1;\n    };\n\n    UserPilotService.prototype.calculateUserPilotId = function(data) {\n      var joined;\n      if (!data[\"id\"]) {\n        return 2;\n      }\n      joined = new Date(data[\"date_joined\"]);\n      if ((joined > this.getJoinedLimit()) || this.hasPaidPlan(data)) {\n        return data[\"id\"];\n      }\n      return 1;\n    };\n\n    UserPilotService.prototype.getJoinedLimit = function() {\n      var limit;\n      limit = new Date;\n      limit.setDate(limit.getDate() - JOINED_LIMIT_DAYS);\n      return limit;\n    };\n\n    UserPilotService.prototype.setZendeskWidgetStatus = function(config) {\n      var supress;\n      if (config == null) {\n        config = {\n          enabled: false\n        };\n      }\n      supress = !config.enabled;\n      return this.win.zE('webWidget', 'updateSettings', {\n        webWidget: {\n          chat: {\n            suppress: supress\n          },\n          contactForm: {\n            suppress: supress\n          },\n          helpCenter: {\n            suppress: supress\n          },\n          talk: {\n            suppress: supress\n          },\n          answerBot: {\n            suppress: supress\n          }\n        }\n      });\n    };\n\n    return UserPilotService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgUserPilot\", UserPilotService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEditSprint, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  CreateEditSprint = function($repo, $confirm, $rs, $rootscope, lightboxService, $loading, $translate, projectService) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var createSprint, form, getLastSprint, hasErrors, remove, resetSprint, submit, ussToAdd;\n      hasErrors = false;\n      createSprint = true;\n      form = null;\n      $scope.newSprint = {};\n      ussToAdd = null;\n      resetSprint = function() {\n        if (form) {\n          form.reset();\n        }\n        return $scope.newSprint = {\n          project: null,\n          name: null,\n          estimated_start: null,\n          estimated_finish: null\n        };\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var broadcastEvent, currentLoading, estimated_end, estimated_start, newSprint, prettyDate, promise, submitButton, target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          submitButton = $el.find(\".submit-button\");\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            hasErrors = true;\n            $el.find(\".last-sprint-name\").addClass(\"disappear\");\n            return;\n          }\n          hasErrors = false;\n          broadcastEvent = null;\n          estimated_start = $('.date-start').val();\n          estimated_end = $('.date-end').val();\n          if (createSprint) {\n            newSprint = angular.copy($scope.newSprint);\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.create(\"milestones\", newSprint);\n            broadcastEvent = \"sprintform:create:success\";\n          } else {\n            newSprint = $scope.newSprint.realClone();\n            newSprint.estimated_start = moment(estimated_start, prettyDate).format(\"YYYY-MM-DD\");\n            newSprint.estimated_finish = moment(estimated_end, prettyDate).format(\"YYYY-MM-DD\");\n            promise = $repo.save(newSprint);\n            broadcastEvent = \"sprintform:edit:success\";\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise.then(function(data) {\n            currentLoading.finish();\n            if (createSprint) {\n              $scope.sprintsCounter += 1;\n            }\n            $scope.sprints = _.map($scope.sprints, function(it) {\n              if (it.id === data.id) {\n                return data;\n              } else {\n                return it;\n              }\n            });\n            if (broadcastEvent === \"sprintform:create:success\" && ussToAdd) {\n              $rootscope.$broadcast(broadcastEvent, data, ussToAdd);\n            } else {\n              $rootscope.$broadcast(broadcastEvent, data);\n            }\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"light-error\", data._error_message);\n            } else if (data.__all__) {\n              return $confirm.notify(\"light-error\", data.__all__[0]);\n            }\n          });\n        };\n      })(this));\n      remove = function() {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.DELETE_SPRINT.TITLE\");\n        message = $scope.newSprint.name;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSuccess;\n            onSuccess = function() {\n              askResponse.finish();\n              $scope.milestonesCounter -= 1;\n              lightboxService.close($el);\n              return $rootscope.$broadcast(\"sprintform:remove:success\", $scope.newSprint);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove($scope.newSprint).then(onSuccess, onError);\n          };\n        })(this));\n      };\n      getLastSprint = function() {\n        var openSprints, sortedSprints;\n        openSprints = _.filter($scope.sprints, function(sprint) {\n          return !sprint.closed;\n        });\n        sortedSprints = _.sortBy(openSprints, function(sprint) {\n          return moment(sprint.estimated_finish, 'YYYY-MM-DD').format('X');\n        });\n        return sortedSprints[sortedSprints.length - 1];\n      };\n      $scope.$on(\"sprintform:create\", function(event, projectId, uss) {\n        var estimatedFinish, estimatedStart, lastSprint, lastSprintNameDom, prettyDate, text;\n        ussToAdd = uss;\n        resetSprint();\n        form = $el.find(\"form\").checksley();\n        form.reset();\n        createSprint = true;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        $scope.newSprint.project = projectId;\n        $scope.newSprint.name = null;\n        $scope.newSprint.slug = null;\n        lastSprint = getLastSprint();\n        estimatedStart = moment();\n        if (lastSprint) {\n          estimatedStart = moment(lastSprint.estimated_finish);\n        } else if ($scope.newSprint.estimated_start) {\n          estimatedStart = moment($scope.newSprint.estimated_start);\n        }\n        $scope.newSprint.estimated_start = estimatedStart.format(prettyDate);\n        estimatedFinish = moment().add(2, \"weeks\");\n        if (lastSprint) {\n          estimatedFinish = moment(lastSprint.estimated_finish).add(2, \"weeks\");\n        } else if ($scope.newSprint.estimated_finish) {\n          estimatedFinish = moment($scope.newSprint.estimated_finish);\n        }\n        $scope.newSprint.estimated_finish = estimatedFinish.format(prettyDate);\n        lastSprintNameDom = $el.find(\".last-sprint-name\");\n        if ((lastSprint != null ? lastSprint.name : void 0) != null) {\n          text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.LAST_SPRINT_NAME\", {\n            lastSprint: lastSprint.name\n          });\n          lastSprintNameDom.html(text);\n        }\n        $el.find(\".delete-sprint\").addClass(\"hidden\");\n        text = $translate.instant(\"LIGHTBOX.ADD_EDIT_SPRINT.TITLE\");\n        $el.find(\".title\").text(text);\n        text = $translate.instant(\"COMMON.CREATE\");\n        $el.find(\".button-green\").text(text);\n        lightboxService.open($el);\n        $el.find(\".sprint-name\").focus();\n        return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n      });\n      $scope.$on(\"sprintform:edit\", function(ctx, sprint) {\n        var editSprint, prettyDate, save;\n        resetSprint();\n        createSprint = false;\n        prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n        $scope.$apply(function() {\n          $scope.newSprint = sprint.realClone();\n          $scope.newSprint.estimated_start = moment($scope.newSprint.estimated_start).format(prettyDate);\n          return $scope.newSprint.estimated_finish = moment($scope.newSprint.estimated_finish).format(prettyDate);\n        });\n        if (projectService.project.get('my_permissions').indexOf('delete_milestone') > -1) {\n          $el.find(\".delete-sprint\").removeClass(\"hidden\");\n        }\n        editSprint = $translate.instant(\"BACKLOG.EDIT_SPRINT\");\n        $el.find(\".title\").text(editSprint);\n        save = $translate.instant(\"COMMON.SAVE\");\n        $el.find(\".button-green\").text(save);\n        lightboxService.open($el);\n        $el.find(\".sprint-name\").focus().select();\n        return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n      });\n      $el.on(\"keyup\", \".sprint-name\", function(event) {\n        if ($el.find(\".sprint-name\").val().length > 0 || hasErrors) {\n          return $el.find(\".last-sprint-name\").addClass(\"disappear\");\n        } else {\n          return $el.find(\".last-sprint-name\").removeClass(\"disappear\");\n        }\n      });\n      $el.on(\"submit\", \"form\", submit);\n      $el.on(\"click\", \".delete-sprint\", function(event) {\n        event.preventDefault();\n        return remove();\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return resetSprint();\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateEditSprint\", [\"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$rootScope\", \"lightboxService\", \"$tgLoading\", \"$translate\", \"tgProjectService\", CreateEditSprint]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogController, BacklogDirective, BurndownBacklogGraphDirective, TgBacklogProgressBarDirective, ToggleBurndownVisibility, UsEditSelector, UsPointsDirective, UsRolePointsSelectorDirective, bindMethods, bindOnce, generateHash, groupBy, mixOf, module, scopeDefer, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  generateHash = this.taiga.generateHash;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogController = (function(superClass) {\n    extend(BacklogController, superClass);\n\n    BacklogController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"$tgLoading\", \"tgResources\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLoader\"];\n\n    BacklogController.prototype.storeCustomFiltersName = 'backlog-custom-filters';\n\n    BacklogController.prototype.storeFiltersName = 'backlog-filters';\n\n    BacklogController.prototype.backlogOrder = {};\n\n    BacklogController.prototype.milestonesOrder = {};\n\n    BacklogController.prototype.newUs = [];\n\n    BacklogController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function BacklogController(scope1, rootscope, repo, confirm, rs, params1, q, location, appMetaService, navUrls, events, analytics, translate, loading, rs2, modelTransform, errorHandlingService, storage, filterRemoteStorageService, projectService, tgLoader) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.loading = loading;\n      this.rs2 = rs2;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.tgLoader = tgLoader;\n      bindMethods(this);\n      this.backlogOrder = {};\n      this.milestonesOrder = {};\n      this.page = 1;\n      this.disablePagination = false;\n      this.firstLoadComplete = false;\n      this.translationData = {\n        q: this.filterQ\n      };\n      this.scope.userstories = [];\n      this.totalUserStories = 0;\n      this.scope.noSwimlaneUserStories = false;\n      this.scope.swimlanesList = Immutable.List();\n      if (this.applyStoredFilters(this.params.pslug, \"backlog-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"BACKLOG.SECTION_NAME\");\n      this.showTags = true;\n      this.activeFilters = false;\n      this.scope.showGraphPlaceholder = null;\n      this.displayVelocity = false;\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          _this.loadSwimlanes();\n          _this.firstLoadComplete = true;\n          title = _this.translate.instant(\"BACKLOG.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"BACKLOG.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          _this.appMetaService.setAll(title, description);\n          if (_this.rs.userstories.getShowTags(_this.scope.projectId)) {\n            _this.showTags = true;\n            return _this.scope.$broadcast(\"showTags\", _this.showTags);\n          }\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    BacklogController.prototype.filtersReloadContent = function() {\n      return this.loadUserstories(true);\n    };\n\n    BacklogController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, els) {\n          _this.newUs = _.map(els, function(it) {\n            return it.id;\n          });\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:create:success\", (function(_this) {\n        return function(e, data, ussToMove) {\n          _this.loadSprints().then(function() {\n            return _this.scope.$broadcast(\"sprintform:create:success:callback\", ussToMove);\n          });\n          _this.loadProjectStats();\n          _this.confirm.notify(\"success\");\n          return _this.analytics.trackEvent(\"sprint\", \"create\", \"create sprint on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, el) {\n          _this.newUs = [el.id];\n          _this.loadUserstories(true);\n          _this.loadProjectStats();\n          _this.rootscope.$broadcast(\"filters:update\");\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on backlog\", 1);\n        };\n      })(this));\n      this.scope.$on(\"sprintform:edit:success\", (function(_this) {\n        return function() {\n          return _this.loadProjectStats();\n        };\n      })(this));\n      this.scope.$on(\"sprintform:remove:success\", (function(_this) {\n        return function(event, sprint) {\n          _this.loadSprints();\n          _this.loadProjectStats();\n          _this.loadUserstories(true);\n          if (sprint.closed) {\n            _this.loadClosedSprints();\n          }\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, data) {\n          var index;\n          index = _.findIndex(_this.scope.userstories, function(us) {\n            return us.id === data.id;\n          });\n          _this.scope.userstories[index] = data;\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"filters:update\", (function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this));\n      this.scope.$on(\"sprint:us:move\", this.moveUs);\n      this.scope.$on(\"sprint:us:moved\", (function(_this) {\n        return function() {\n          _this.loadSprints();\n          _this.loadProjectStats();\n          return _this.rootscope.$broadcast(\"filters:update\");\n        };\n      })(this));\n      this.scope.$on(\"backlog:load-closed-sprints\", this.loadClosedSprints);\n      return this.scope.$on(\"backlog:unload-closed-sprints\", this.unloadClosedSprints);\n    };\n\n    BacklogController.prototype.initializeSubscription = function() {\n      var routingKey1, routingKey2;\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.loadAllPaginatedUserstories();\n          return _this.loadSprints();\n        };\n      })(this));\n      routingKey2 = \"changes.project.\" + this.scope.projectId + \".milestones\";\n      return this.events.subscribe(this.scope, routingKey2, (function(_this) {\n        return function(message) {\n          return _this.loadSprints();\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleShowTags = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.showTags = !_this.showTags;\n          return _this.rs.userstories.storeShowTags(_this.scope.projectId, _this.showTags);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleActiveFilters = function() {\n      return this.activeFilters = !this.activeFilters;\n    };\n\n    BacklogController.prototype.toggleVelocityForecasting = function() {\n      this.displayVelocity = !this.displayVelocity;\n      if (!this.displayVelocity) {\n        this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n          return it.ref;\n        });\n      } else {\n        this.scope.visibleUserStories = _.map(this.forecastedStories, function(it) {\n          return it.ref;\n        });\n      }\n      return scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"userstories:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadProjectStats = function() {\n      return this.rs.projects.stats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totalPoints;\n          _this.scope.stats = stats;\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          if (totalPoints) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.closed_points / totalPoints);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.showGraphPlaceholder = !((stats.total_points != null) && (stats.total_milestones != null));\n          _this.calculateForecasting();\n          return stats;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.setMilestonesOrder = function(sprints) {\n      var it, j, len, results, sprint;\n      results = [];\n      for (j = 0, len = sprints.length; j < len; j++) {\n        sprint = sprints[j];\n        this.milestonesOrder[sprint.id] = {};\n        results.push((function() {\n          var l, len1, ref1, results1;\n          ref1 = sprint.user_stories;\n          results1 = [];\n          for (l = 0, len1 = ref1.length; l < len1; l++) {\n            it = ref1[l];\n            results1.push(this.milestonesOrder[sprint.id][it.id] = it.sprint_order);\n          }\n          return results1;\n        }).call(this));\n      }\n      return results;\n    };\n\n    BacklogController.prototype.unloadClosedSprints = function() {\n      return this.scope.$apply((function(_this) {\n        return function() {\n          _this.scope.closedSprints = [];\n          return _this.rootscope.$broadcast(\"closed-sprints:reloaded\", []);\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadClosedSprints = function() {\n      var params;\n      params = {\n        closed: true\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalClosedMilestones = result.closed;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.closedSprints = sprints;\n          _this.scope.closedSprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"closed-sprints:reloaded\", sprints);\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadSwimlanes = function() {\n      if (this.scope.project.swimlanes) {\n        return this.scope.project.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.scope.swimlanesList.includes(swimlane)) {\n              return _this.scope.swimlanesList = _this.scope.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n    };\n\n    BacklogController.prototype.loadSprints = function() {\n      var params;\n      params = {\n        closed: false\n      };\n      return this.rs.sprints.list(this.scope.projectId, params).then((function(_this) {\n        return function(result) {\n          var j, len, sprint, sprints;\n          sprints = result.milestones;\n          _this.setMilestonesOrder(sprints);\n          _this.scope.totalMilestones = sprints;\n          _this.scope.totalClosedMilestones = result.closed;\n          _this.scope.totalOpenMilestones = result.open;\n          _this.scope.totalMilestones = _this.scope.totalOpenMilestones + _this.scope.totalClosedMilestones;\n          for (j = 0, len = sprints.length; j < len; j++) {\n            sprint = sprints[j];\n            sprint.user_stories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          }\n          _this.scope.sprints = sprints;\n          if (!_this.scope.closedSprints) {\n            _this.scope.closedSprints = [];\n          }\n          _this.scope.sprintsCounter = sprints.length;\n          _this.scope.sprintsById = groupBy(sprints, function(x) {\n            return x.id;\n          });\n          _this.rootscope.$broadcast(\"sprints:loaded\", sprints);\n          _this.scope.currentSprint = _this.findCurrentSprint();\n          return sprints;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.openSprints = function() {\n      return _.filter(this.scope.sprints, (function(_this) {\n        return function(sprint) {\n          return !sprint.closed;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadAllPaginatedUserstories = function() {\n      var page;\n      page = this.page;\n      return this.loadUserstories(true, this.scope.userstories.length).then((function(_this) {\n        return function() {\n          return _this.page = page;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadUserstories = function(resetPagination, pageSize) {\n      var params, promise;\n      if (resetPagination == null) {\n        resetPagination = false;\n      }\n      if (!this.scope.projectId) {\n        return null;\n      }\n      this.loadingUserstories = true;\n      this.disablePagination = true;\n      params = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      this.rs.userstories.storeQueryParams(this.scope.projectId, params);\n      if (resetPagination) {\n        this.page = 1;\n      }\n      params.page = this.page;\n      params.q = this.filterQ;\n      this.translationData.q = params.q;\n      promise = this.rs.userstories.listUnassigned(this.scope.projectId, params, pageSize);\n      return promise.then((function(_this) {\n        return function(result) {\n          var header, it, j, len, ref1, userstories;\n          userstories = result[0];\n          header = result[1];\n          if (resetPagination) {\n            _this.scope.userstories = [];\n          }\n          _this.scope.userstories = _this.scope.userstories.concat(_.sortBy(userstories, \"backlog_order\"));\n          _this.scope.visibleUserStories = _.map(_this.scope.userstories, function(it) {\n            return it.ref;\n          });\n          ref1 = _this.scope.userstories;\n          for (j = 0, len = ref1.length; j < len; j++) {\n            it = ref1[j];\n            if (_this.newUs.includes(it.id)) {\n              it[\"new\"] = true;\n            }\n            _this.backlogOrder[it.id] = it.backlog_order;\n          }\n          _this.loadingUserstories = false;\n          if (header('x-pagination-next')) {\n            _this.disablePagination = false;\n            _this.page++;\n          }\n          if (header('Taiga-Info-Backlog-Total-Userstories')) {\n            _this.totalUserStories = header('Taiga-Info-Backlog-Total-Userstories');\n          }\n          if (header('Taiga-Info-Userstories-Without-Swimlane')) {\n            _this.scope.noSwimlaneUserStories = header('Taiga-Info-Userstories-Without-Swimlane');\n          }\n          _this.rootscope.$broadcast(\"backlog:userstories:loaded\");\n          scopeDefer(_this.scope, function() {\n            _this.scope.$broadcast(\"userstories:loaded\");\n            return _this.tgLoader.pageLoaded();\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.loadBacklog = function() {\n      return this.q.all([this.loadProjectStats(), this.loadSprints(), this.loadUserstories()]).then(this.calculateForecasting);\n    };\n\n    BacklogController.prototype.calculateForecasting = function() {\n      var backlog_points_sum, current_sum, j, len, ref1, results, stats, total_points, us;\n      stats = this.scope.stats;\n      total_points = stats.total_points;\n      current_sum = stats.assigned_points;\n      backlog_points_sum = 0;\n      this.forecastedStories = [];\n      ref1 = this.scope.userstories;\n      results = [];\n      for (j = 0, len = ref1.length; j < len; j++) {\n        us = ref1[j];\n        current_sum += us.total_points;\n        backlog_points_sum += us.total_points;\n        this.forecastedStories.push(us);\n        if (stats.speed > 0 && backlog_points_sum > stats.speed) {\n          break;\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    BacklogController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_backlog_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.closedMilestones = !!project.total_closed_milestones;\n      this.scope.$emit('project:loaded', project);\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"id\");\n      return project;\n    };\n\n    BacklogController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      if (this.rs.userstories.getShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadBacklog().then((function(_this) {\n        return function() {\n          var milestone;\n          return _this.generateFilters(milestone = \"null\");\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.scope.$emit(\"backlog:loaded\");\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.toggleTags = function() {\n      return this.rs.userstories.storeShowTags(this.scope.projectId, this.showTags);\n    };\n\n    BacklogController.prototype.prepareBulkUpdateData = function(uses, field) {\n      if (field == null) {\n        field = \"backlog_order\";\n      }\n      return _.map(uses, function(x) {\n        return {\n          \"us_id\": x.id,\n          \"order\": x[field]\n        };\n      });\n    };\n\n    BacklogController.prototype.moveUsToTopOfBacklog = function(us) {\n      var self;\n      self = this;\n      $('.first').each(function() {\n        return $(this).removeClass('first');\n      });\n      return this.moveUs('sprint:us:move', [us], 0, null);\n    };\n\n    BacklogController.prototype.moveUs = function(ctx, usList, newUsIndex, newSprintId) {\n      var afterDestination, beforeDestination, currentSprintId, data, it, j, key, l, len, len1, len2, len3, len4, len5, len6, len7, len8, list, m, modifiedUs, n, newSprint, o, oldSprintId, options, orderField, orderList, p, previous, previousWithTheSameOrder, project, promise, q, r, ref1, ref2, ref3, s, setNextOrders, setOrders, setPreviousOrders, sprint, startIndex, us, usListIds, userstory;\n      oldSprintId = usList[0].milestone;\n      project = usList[0].project;\n      if (oldSprintId) {\n        sprint = this.scope.sprintsById[oldSprintId] || this.scope.closedSprintsById[oldSprintId];\n      }\n      if (newSprintId) {\n        newSprint = this.scope.sprintsById[newSprintId] || this.scope.closedSprintsById[newSprintId];\n      }\n      currentSprintId = newSprintId !== oldSprintId ? newSprintId : oldSprintId;\n      orderList = null;\n      orderField = \"\";\n      if (newSprintId !== oldSprintId) {\n        if (newSprintId === null) {\n          for (key = j = 0, len = usList.length; j < len; key = ++j) {\n            us = usList[key];\n            _.remove(sprint.user_stories, function(it) {\n              return it.id === us.id;\n            });\n          }\n          orderField = \"backlog_order\";\n          orderList = this.backlogOrder;\n          beforeDestination = _.slice(this.scope.userstories, 0, newUsIndex);\n          afterDestination = _.slice(this.scope.userstories, newUsIndex);\n          this.scope.userstories = this.scope.userstories.concat(usList);\n        } else {\n          for (l = 0, len1 = usList.length; l < len1; l++) {\n            us = usList[l];\n            _.remove(this.scope.userstories, function(it) {\n              return it.id === us.id;\n            });\n          }\n          orderField = \"sprint_order\";\n          orderList = this.milestonesOrder[newSprint.id];\n          beforeDestination = _.slice(newSprint.user_stories, 0, newUsIndex);\n          afterDestination = _.slice(newSprint.user_stories, newUsIndex);\n          newSprint.user_stories = newSprint.user_stories.concat(usList);\n        }\n      } else {\n        if (oldSprintId === null) {\n          orderField = \"backlog_order\";\n          orderList = this.backlogOrder;\n          list = _.filter(this.scope.userstories, function(listIt) {\n            return !_.find(usList, function(moveIt) {\n              return listIt.id === moveIt.id;\n            });\n          });\n          beforeDestination = _.slice(list, 0, newUsIndex);\n          afterDestination = _.slice(list, newUsIndex);\n        } else {\n          orderField = \"sprint_order\";\n          orderList = this.milestonesOrder[sprint.id];\n          list = _.filter(newSprint.user_stories, function(listIt) {\n            return !_.find(usList, function(moveIt) {\n              return listIt.id === moveIt.id;\n            });\n          });\n          beforeDestination = _.slice(list, 0, newUsIndex);\n          afterDestination = _.slice(list, newUsIndex);\n        }\n      }\n      previous = beforeDestination[beforeDestination.length - 1];\n      setPreviousOrders = [];\n      if (!previous) {\n        startIndex = 0;\n      } else if (previous) {\n        startIndex = orderList[previous.id] + 1;\n        previousWithTheSameOrder = _.filter(beforeDestination, function(it) {\n          return it[orderField] === orderList[previous.id];\n        });\n        if (previousWithTheSameOrder.length > 1) {\n          setPreviousOrders = _.map(previousWithTheSameOrder, function(it) {\n            return {\n              us_id: it.id,\n              order: orderList[it.id]\n            };\n          });\n        }\n      }\n      modifiedUs = [];\n      for (key = m = 0, len2 = usList.length; m < len2; key = ++m) {\n        us = usList[key];\n        us.milestone = currentSprintId;\n        us[orderField] = startIndex + key;\n        orderList[us.id] = us[orderField];\n        modifiedUs.push({\n          us_id: us.id,\n          order: us[orderField]\n        });\n      }\n      startIndex = orderList[usList[usList.length - 1].id];\n      for (key = n = 0, len3 = afterDestination.length; n < len3; key = ++n) {\n        it = afterDestination[key];\n        orderList[it.id] = startIndex + key + 1;\n      }\n      setNextOrders = _.map(afterDestination, (function(_this) {\n        return function(it) {\n          return {\n            us_id: it.id,\n            order: orderList[it.id]\n          };\n        };\n      })(this));\n      this.scope.userstories = _.sortBy(this.scope.userstories, (function(_this) {\n        return function(it) {\n          return _this.backlogOrder[it.id];\n        };\n      })(this));\n      this.scope.visibleUserStories = _.map(this.scope.userstories, function(it) {\n        return it.ref;\n      });\n      usListIds = _.map(usList.map((function(_this) {\n        return function(it) {\n          return it.id;\n        };\n      })(this)));\n      ref1 = this.scope.userstories;\n      for (o = 0, len4 = ref1.length; o < len4; o++) {\n        userstory = ref1[o];\n        if (usListIds.includes(userstory.id)) {\n          userstory[\"new\"] = true;\n        } else {\n          userstory[\"new\"] = false;\n        }\n      }\n      ref2 = this.scope.sprints;\n      for (p = 0, len5 = ref2.length; p < len5; p++) {\n        sprint = ref2[p];\n        sprint.user_stories = _.sortBy(sprint.user_stories, (function(_this) {\n          return function(it) {\n            return _this.milestonesOrder[sprint.id][it.id];\n          };\n        })(this));\n      }\n      ref3 = this.scope.closedSprints;\n      for (q = 0, len6 = ref3.length; q < len6; q++) {\n        sprint = ref3[q];\n        sprint.user_stories = _.sortBy(sprint.user_stories, (function(_this) {\n          return function(it) {\n            return _this.milestonesOrder[sprint.id][it.id];\n          };\n        })(this));\n      }\n      if (usList.length > 1 && (newSprintId !== oldSprintId)) {\n        data = modifiedUs.concat(setPreviousOrders, setNextOrders);\n        promise = this.rs.userstories.bulkUpdateMilestone(project, newSprintId, data);\n      } else if (usList.length > 1) {\n        data = modifiedUs.concat(setPreviousOrders, setNextOrders);\n        promise = this.rs.userstories.bulkUpdateBacklogOrder(project, data);\n      } else {\n        setOrders = {};\n        for (r = 0, len7 = setPreviousOrders.length; r < len7; r++) {\n          it = setPreviousOrders[r];\n          setOrders[it.us_id] = it.order;\n        }\n        for (s = 0, len8 = setNextOrders.length; s < len8; s++) {\n          it = setNextOrders[s];\n          setOrders[it.us_id] = it.order;\n        }\n        options = {\n          headers: {\n            \"set-orders\": JSON.stringify(setOrders)\n          }\n        };\n        promise = this.repo.save(usList[0], true, {}, options, true);\n      }\n      promise.then((function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"sprint:us:moved\");\n          if (_this.scope.closedSprintsById && _this.scope.closedSprintsById[oldSprintId]) {\n            return _this.rootscope.$broadcast(\"backlog:load-closed-sprints\");\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    BacklogController.prototype.updateUserStoryStatus = function() {\n      return this.generateFilters().then((function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"filters:update\");\n          _this.loadProjectStats();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.editUserStory = function(projectId, ref, $event) {\n      return this.rs.userstories.getByRef(projectId, ref).then((function(_this) {\n        return function(us) {\n          return _this.rs2.attachments.list(\"us\", us.id, projectId).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': us,\n              'attachments': attachments.toJS()\n            });\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.deleteUserStory = function(us) {\n      var message, title;\n      title = this.translate.instant(\"US.TITLE_DELETE_ACTION\", {\n        projectName: this.scope.project.name\n      });\n      message = this.translate.instant(\"US.TITLE_DELETE_MESSAGE\", {\n        subject: us.subject\n      });\n      return this.confirm.askOnDelete(title, message, '').then((function(_this) {\n        return function(askResponse) {\n          var promise;\n          _this.scope.userstories = _.without(_this.scope.userstories, us);\n          promise = _this.repo.remove(us);\n          promise.then(function() {\n            askResponse.finish();\n            return _this.q.all([_this.loadProjectStats(), _this.loadSprints()]);\n          });\n          return promise.then(null, function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          });\n        };\n      })(this));\n    };\n\n    BacklogController.prototype.addNewUs = function(type) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, this.scope.project.default_us_status);\n      }\n    };\n\n    BacklogController.prototype.addNewSprint = function() {\n      return this.rootscope.$broadcast(\"sprintform:create\", this.scope.projectId);\n    };\n\n    BacklogController.prototype.findCurrentSprint = function() {\n      var currentDate;\n      currentDate = new Date().getTime();\n      return _.find(this.scope.sprints, function(sprint) {\n        var end, start;\n        start = moment(sprint.estimated_start, 'YYYY-MM-DD').format('x');\n        end = moment(sprint.estimated_finish, 'YYYY-MM-DD').format('x');\n        return currentDate >= start && currentDate <= end;\n      });\n    };\n\n    BacklogController.prototype.addFilterBacklog = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    BacklogController.prototype.removeFilterBacklog = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.filtersReloadContent();\n      return this.generateFilters('null');\n    };\n\n    return BacklogController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"BacklogController\", BacklogController);\n\n  BacklogDirective = function($repo, $rootscope, $translate, $rs) {\n    var doomLineTemplate, link, linkDoomLine, linkFilters, linkToolbar, openFilterInit, showHideFilter, showHideTags;\n    doomLineTemplate = _.template(\"<div class=\\\"doom-line\\\"><span><%- text %></span></div>\");\n    linkDoomLine = function($scope, $el, $attrs, $ctrl) {\n      var addDoomLineDom, getUsItems, reloadDoomLine, removeDoomlineDom;\n      reloadDoomLine = function() {\n        var current_sum, domElement, i, j, len, ref1, results, stats, total_points, us;\n        if ($scope.displayVelocity) {\n          removeDoomlineDom();\n        }\n        if (($scope.stats != null) && ($scope.stats.total_points != null) && $scope.stats.total_points !== 0 && ($scope.displayVelocity == null)) {\n          removeDoomlineDom();\n          stats = $scope.stats;\n          total_points = stats.total_points;\n          current_sum = stats.assigned_points;\n          if (!$scope.userstories) {\n            return;\n          }\n          ref1 = $scope.userstories;\n          results = [];\n          for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n            us = ref1[i];\n            current_sum += us.total_points;\n            if (current_sum > total_points) {\n              domElement = $el.find('.backlog-table-body .us-item-row')[i];\n              addDoomLineDom(domElement);\n              break;\n            } else {\n              results.push(void 0);\n            }\n          }\n          return results;\n        }\n      };\n      removeDoomlineDom = function() {\n        return $el.find(\".doom-line\").remove();\n      };\n      addDoomLineDom = function(element) {\n        var text;\n        text = $translate.instant(\"BACKLOG.DOOMLINE\");\n        return $(element).before(doomLineTemplate({\n          \"text\": text\n        }));\n      };\n      getUsItems = function() {\n        var rowElements;\n        rowElements = $el.find('.backlog-table-body .us-item-row');\n        return _.map(rowElements, function(x) {\n          return angular.element(x);\n        });\n      };\n      $scope.$on(\"userstories:loaded\", reloadDoomLine);\n      $scope.$on(\"userstories:forecast\", removeDoomlineDom);\n      return $scope.$watch(\"stats\", reloadDoomLine);\n    };\n    linkToolbar = function($scope, $el, $attrs, $ctrl) {\n      var checkSelected, getUsToMove, lastChecked, moveToCurrentSprint, moveToLatestSprint, moveUssToSprint, shiftPressed;\n      getUsToMove = function() {\n        var ussDom;\n        ussDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        return _.map(ussDom, function(item) {\n          var itemScope;\n          item = $(item).closest('.tg-scope');\n          itemScope = item.scope();\n          itemScope.us.milestone = $scope.sprints[0].id;\n          return itemScope.us;\n        });\n      };\n      moveUssToSprint = function(selectedUss, sprint) {\n        var data, extraPoints, totalExtraPoints, ussCurrent;\n        ussCurrent = _($scope.userstories);\n        $scope.userstories = ussCurrent.without.apply(ussCurrent, selectedUss).value();\n        extraPoints = _.map(selectedUss, function(v, k) {\n          return v.total_points;\n        });\n        totalExtraPoints = _.reduce(extraPoints, function(acc, num) {\n          return acc + num;\n        });\n        sprint.user_stories = _.union(sprint.user_stories, selectedUss);\n        sprint.total_points += totalExtraPoints;\n        data = _.map(selectedUss, function(us) {\n          return {\n            us_id: us.id,\n            order: us.sprint_order\n          };\n        });\n        $rs.userstories.bulkUpdateMilestone($scope.project.id, $scope.sprints[0].id, data).then((function(_this) {\n          return function() {\n            $ctrl.loadSprints();\n            $ctrl.loadProjectStats();\n            $ctrl.toggleVelocityForecasting();\n            return $ctrl.calculateForecasting();\n          };\n        })(this));\n        return $el.find(\".move-to-sprint\").hide();\n      };\n      moveToCurrentSprint = function(selectedUss) {\n        return moveUssToSprint(selectedUss, $scope.currentSprint);\n      };\n      moveToLatestSprint = function(selectedUss) {\n        return moveUssToSprint(selectedUss, $scope.sprints[0]);\n      };\n      $scope.$on(\"sprintform:create:success:callback\", function(e, ussToMove) {\n        if (ussToMove) {\n          return _.partial(moveToCurrentSprint, ussToMove)();\n        }\n      });\n      shiftPressed = false;\n      lastChecked = null;\n      checkSelected = function(target) {\n        var moveToSprintDom, selectedUsDom;\n        lastChecked = target.closest(\".us-item-row\");\n        target.closest('.us-item-row').toggleClass('ui-multisortable-multiple');\n        moveToSprintDom = $el.find(\".move-to-sprint\");\n        selectedUsDom = $el.find(\".backlog-table-body input:checkbox:checked\");\n        if (selectedUsDom.length > 0 && $scope.sprints.length > 0) {\n          return moveToSprintDom.css('display', 'flex');\n        } else {\n          return moveToSprintDom.hide();\n        }\n      };\n      $(window).on(\"keydown.shift-pressed keyup.shift-pressed\", function(event) {\n        shiftPressed = !!event.shiftKey;\n        return true;\n      });\n      $el.on(\"change\", \".backlog-table-body input:checkbox\", function(event) {\n        var current, elements, nextAll, prevAll, target;\n        if (lastChecked && shiftPressed) {\n          elements = [];\n          current = $(event.currentTarget).closest(\".us-item-row\");\n          nextAll = lastChecked.nextAll();\n          prevAll = lastChecked.prevAll();\n          if (_.some(nextAll, function(next) {\n            return next === current[0];\n          })) {\n            elements = lastChecked.nextUntil(current);\n          } else if (_.some(prevAll, function(prev) {\n            return prev === current[0];\n          })) {\n            elements = lastChecked.prevUntil(current);\n          }\n          _.map(elements, function(elm) {\n            var input;\n            input = $(elm).find(\"input:checkbox\");\n            input.prop('checked', true);\n            return checkSelected(input);\n          });\n        }\n        target = angular.element(event.currentTarget);\n        target.closest(\".us-item-row\").toggleClass('is-checked');\n        return checkSelected(target);\n      });\n      $el.on(\"click\", \"#move-to-latest-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToLatestSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"click\", \"#move-to-current-sprint\", (function(_this) {\n        return function(event) {\n          var ussToMove;\n          ussToMove = getUsToMove();\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        };\n      })(this));\n      $el.on(\"change\", \"#show-tags > input\", function(event) {\n        event.preventDefault();\n        $ctrl.toggleShowTags();\n        return showHideTags($ctrl);\n      });\n      return $el.on(\"click\", \".forecasting-add-sprint\", function(event) {\n        var ussToMove, ussToMoveList;\n        ussToMoveList = $ctrl.forecastedStories;\n        if ($scope.currentSprint) {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.milestone = $scope.currentSprint.id;\n            us.order = index;\n            return us;\n          });\n          return $scope.$apply(_.partial(moveToCurrentSprint, ussToMove));\n        } else {\n          ussToMove = _.map(ussToMoveList, function(us, index) {\n            us.order = index;\n            return us;\n          });\n          return $rootscope.$broadcast(\"sprintform:create\", $scope.projectId, ussToMove);\n        }\n      });\n    };\n    showHideTags = function($ctrl) {\n      var elm;\n      elm = angular.element(\"#show-tags\");\n      if ($ctrl.showTags) {\n        return elm.addClass(\"active\");\n      } else {\n        return elm.removeClass(\"active\");\n      }\n    };\n    openFilterInit = function($scope, $el, $ctrl) {\n      var sidebar;\n      sidebar = $el.find(\".backlog-filter\");\n      sidebar.addClass(\"active\");\n      return $ctrl.activeFilters = true;\n    };\n    showHideFilter = function($scope, $el, $ctrl) {\n      var filter, target;\n      filter = $el.find(\".backlog-filter\");\n      target = angular.element(\"#show-filters-button\");\n      filter.toggleClass(\"active\");\n      target.toggleClass(\"active\");\n      return $ctrl.toggleActiveFilters();\n    };\n    linkFilters = function($scope, $el, $attrs, $ctrl) {\n      $scope.filtersSearch = {};\n      return $el.on(\"click\", \"#show-filters-button\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          return showHideFilter($scope, $el, $ctrl);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs, $rootscope) {\n      var $ctrl, filters;\n      $ctrl = $el.controller();\n      linkToolbar($scope, $el, $attrs, $ctrl);\n      linkFilters($scope, $el, $attrs, $ctrl);\n      linkDoomLine($scope, $el, $attrs, $ctrl);\n      filters = $ctrl.location.search();\n      if (filters.status || filters.tags || filters.assigned_to || filters.owner) {\n        openFilterInit($scope, $el, $ctrl);\n      }\n      $scope.$on(\"showTags\", function() {\n        return showHideTags($ctrl);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $(window).off(\".shift-pressed\");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklog\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"$tgResources\", BacklogDirective]);\n\n  UsEditSelector = function($rootscope, $tgTemplate, $compile, $translate) {\n    var link, mainTemplate;\n    mainTemplate = $tgTemplate.get(\"backlog/us-edit-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, removePopupOpenState;\n      $ctrl = $el.controller();\n      removePopupOpenState = function() {\n        $el.find(\".js-popup-button\").removeClass('popover-open');\n        return $(this).remove();\n      };\n      $el.on(\"click\", function(event) {\n        var html;\n        html = $compile(mainTemplate())($scope);\n        $el.find(\".js-popup-button\").addClass('popover-open');\n        $el.append(html);\n        $el.find(\".us-option-popup\").popover().open(function() {\n          return removePopupOpenState();\n        });\n        if (event.target.parentNode.classList.contains('first')) {\n          return $el.find(\".us-option-popup\").addClass('first');\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsEditSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsEditSelector]);\n\n  UsRolePointsSelectorDirective = function($rootscope, $template, $compile, $translate) {\n    var link, selectionTemplate;\n    selectionTemplate = $template.get(\"backlog/us-role-points-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var removePopupOpenState;\n      removePopupOpenState = function() {\n        return $el.removeClass('popover-open');\n      };\n      bindOnce($scope, \"project\", function(project) {\n        var numberOfRoles, roles;\n        roles = _.filter(project.roles, \"computable\");\n        numberOfRoles = _.size(roles);\n        if (numberOfRoles > 1) {\n          return $el.append($compile(selectionTemplate({\n            \"roles\": roles\n          }))($scope));\n        } else {\n          $el.find(\".icon-arrow-down\").remove();\n          return $el.find(\".header-points\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        $el.find(\".popover\").popover().close();\n        return $el.find(\".header-points\").html(\"\" + roleName);\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx, roleId) {\n        var text;\n        $el.find(\".popover\").popover().close();\n        text = $translate.instant(\"COMMON.FIELDS.POINTS\");\n        return $el.find(\".header-points\").text(text);\n      });\n      $el.on(\"click\", function(event) {\n        var target;\n        target = angular.element(event.target);\n        if (target.is(\"span\") || target.is(\"div\")) {\n          event.stopPropagation();\n        }\n        $el.addClass('popover-open');\n        return $el.find(\".popover\").popover().open(function() {\n          return removePopupOpenState();\n        });\n      });\n      $el.on(\"click\", \".clear-selection\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $rootscope.$broadcast(\"uspoints:clear-selection\");\n        $el.find('.active-popover').removeClass('active-popover');\n        return target.addClass('active-popover');\n      });\n      $el.on(\"click\", \".role\", function(event) {\n        var rolScope, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        $el.find('.active-popover').removeClass('active-popover');\n        target.addClass('active-popover');\n        rolScope = target.scope();\n        return $rootscope.$broadcast(\"uspoints:select\", target.data(\"role-id\"), target.text());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUsRolePointsSelector\", [\"$rootScope\", \"$tgTemplate\", \"$compile\", \"$translate\", UsRolePointsSelectorDirective]);\n\n  UsPointsDirective = function($tgEstimationsService, $repo, $tgTemplate) {\n    var link, rolesTemplate;\n    rolesTemplate = $tgTemplate.get(\"common/estimation/us-points-roles-popover.html\", true);\n    link = function($scope, $el, $attrs) {\n      var $ctrl, bindClickElements, estimationProcess, filteringRoleId, renderRolesSelector, selectedRoleId, updatingSelectedRoleId;\n      $ctrl = $el.controller();\n      updatingSelectedRoleId = null;\n      selectedRoleId = null;\n      filteringRoleId = null;\n      estimationProcess = null;\n      $scope.$on(\"uspoints:select\", function(ctx, roleId, roleName) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = roleId;\n        return estimationProcess.render();\n      });\n      $scope.$on(\"uspoints:clear-selection\", function(ctx) {\n        var us;\n        us = $scope.$eval($attrs.tgBacklogUsPoints);\n        selectedRoleId = null;\n        return estimationProcess.render();\n      });\n      $scope.$watch($attrs.tgBacklogUsPoints, function(us) {\n        var roles;\n        if (us) {\n          estimationProcess = $tgEstimationsService.create($el, us, $scope.project);\n          roles = estimationProcess.calculateRoles();\n          if (roles.length === 0) {\n            $el.find(\".icon-arrow-bottom\").remove();\n            $el.find(\"a.us-points\").addClass(\"not-clickable\");\n          } else if (roles.length === 1) {\n            selectedRoleId = _.keys(us.points)[0];\n          }\n          if (estimationProcess.isEditable) {\n            bindClickElements();\n          }\n          estimationProcess.onSelectedPointForRole = function(roleId, pointId, points) {\n            us.points = points;\n            estimationProcess.render();\n            return this.save(roleId, pointId).then(function() {\n              return $ctrl.loadProjectStats();\n            });\n          };\n          estimationProcess.render = function() {\n            var ctx, html, mainTemplate, pointId, pointObj, template, text, title, totalPoints;\n            totalPoints = this.calculateTotalPoints();\n            if ((selectedRoleId == null) || roles.length === 1) {\n              text = totalPoints;\n              title = totalPoints;\n            } else {\n              pointId = this.us.points[selectedRoleId];\n              pointObj = this.pointsById[pointId];\n              text = pointObj.name + \" / <span>\" + totalPoints + \"</span>\";\n              title = pointObj.name + \" / \" + totalPoints;\n            }\n            ctx = {\n              totalPoints: totalPoints,\n              roles: this.calculateRoles(),\n              editable: this.isEditable,\n              text: text,\n              title: title\n            };\n            mainTemplate = \"common/estimation/us-estimation-total.html\";\n            template = $tgTemplate.get(mainTemplate, true);\n            html = template(ctx);\n            return this.$el.html(html);\n          };\n          return estimationProcess.render();\n        }\n      });\n      renderRolesSelector = function() {\n        var html, roles;\n        roles = estimationProcess.calculateRoles();\n        html = rolesTemplate({\n          \"roles\": roles\n        });\n        $el.append(html);\n        return $el.find(\".pop-role\").popover().open(function() {\n          return $(this).remove();\n        });\n      };\n      bindClickElements = function() {\n        $el.on(\"click\", \".us-points\", function(event) {\n          var us;\n          event.preventDefault();\n          event.stopPropagation();\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = selectedRoleId;\n          if (selectedRoleId != null) {\n            return estimationProcess.renderPointsSelector(selectedRoleId);\n          } else {\n            return renderRolesSelector();\n          }\n        });\n        return $el.on(\"click\", \".role\", function(event) {\n          var popRolesDom, target, us;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          us = $scope.$eval($attrs.tgBacklogUsPoints);\n          updatingSelectedRoleId = target.data(\"role-id\");\n          popRolesDom = $el.find(\".pop-role\");\n          popRolesDom.find(\"a\").removeClass(\"active\");\n          popRolesDom.find(\"a[data-role-id='\" + updatingSelectedRoleId + \"']\").addClass(\"active\");\n          return estimationProcess.renderPointsSelector(updatingSelectedRoleId);\n        });\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogUsPoints\", [\"$tgEstimationsService\", \"$tgRepo\", \"$tgTemplate\", UsPointsDirective]);\n\n  ToggleBurndownVisibility = function($storage) {\n    var hide, link, show;\n    hide = function() {\n      $(\".js-burndown-graph\").removeClass(\"shown\");\n      $(\".js-toggle-burndown-visibility-button\").removeClass(\"active\");\n      return $(\".js-burndown-graph\").removeClass(\"open\");\n    };\n    show = function(firstLoad) {\n      $(\".js-toggle-burndown-visibility-button\").addClass(\"active\");\n      if (firstLoad) {\n        return $(\".js-burndown-graph\").addClass(\"shown\");\n      } else {\n        return $(\".js-burndown-graph\").addClass(\"open\");\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var firstLoad, hash, toggleGraph;\n      firstLoad = true;\n      hash = generateHash([\"is-burndown-grpahs-collapsed\"]);\n      $scope.isBurndownGraphCollapsed = $storage.get(hash) || false;\n      toggleGraph = function() {\n        if ($scope.isBurndownGraphCollapsed) {\n          hide(firstLoad);\n        } else {\n          show(firstLoad);\n        }\n        return firstLoad = false;\n      };\n      $scope.$watch(\"showGraphPlaceholder\", function() {\n        if ($scope.showGraphPlaceholder != null) {\n          $scope.isBurndownGraphCollapsed = $scope.isBurndownGraphCollapsed || $scope.showGraphPlaceholder;\n          return toggleGraph();\n        }\n      });\n      $el.on(\"click\", \".js-toggle-burndown-visibility-button\", function() {\n        $scope.isBurndownGraphCollapsed = !$scope.isBurndownGraphCollapsed;\n        $storage.set(hash, $scope.isBurndownGraphCollapsed);\n        return toggleGraph();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgToggleBurndownVisibility\", [\"$tgStorage\", ToggleBurndownVisibility]);\n\n  BurndownBacklogGraphDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var client_increment_line, colors, data, evolution_line, j, milestonesRange, optimal_line, options, ref1, results, team_increment_line, width, zero_line;\n      width = element.width();\n      element.height(width / 6);\n      milestonesRange = (function() {\n        results = [];\n        for (var j = 0, ref1 = dataToDraw.milestones.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; 0 <= ref1 ? j++ : j--){ results.push(j); }\n        return results;\n      }).apply(this);\n      data = [];\n      zero_line = _.map(dataToDraw.milestones, function(ml) {\n        return 0;\n      });\n      data.push({\n        data: _.zip(milestonesRange, zero_line),\n        lines: {\n          fillColor: \"rgba(0,0,0,0)\"\n        },\n        points: {\n          show: false\n        }\n      });\n      optimal_line = _.map(dataToDraw.milestones, function(ml) {\n        return ml.optimal;\n      });\n      data.push({\n        data: _.zip(milestonesRange, optimal_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      evolution_line = _.filter(_.map(dataToDraw.milestones, function(ml) {\n        return ml.evolution;\n      }), function(evolution) {\n        return evolution != null;\n      });\n      data.push({\n        data: _.zip(milestonesRange, evolution_line),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      client_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"] - ml[\"client-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, client_increment_line),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      team_increment_line = _.map(dataToDraw.milestones, function(ml) {\n        return -ml[\"team-increment\"];\n      });\n      data.push({\n        data: _.zip(milestonesRange, team_increment_line),\n        lines: {\n          fillColor: \"rgba(255,160,160,0.2)\"\n        }\n      });\n      colors = [\"rgba(200,201,196,0.2)\", \"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\", \"rgba(216,222,233,1)\", \"rgba(255,160,160,1)\"];\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 20,\n            left: 5,\n            bottom: 0\n          }\n        },\n        xaxis: {\n          ticks: dataToDraw.milestones.length,\n          axisLabel: $translate.instant(\"BACKLOG.CHART.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5,\n          tickFormatter: function(val, axis) {\n            return \"\";\n          }\n        },\n        yaxis: {\n          axisLabel: $translate.instant(\"BACKLOG.CHART.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: \"Verdana, Arial, Helvetica, Tahoma, sans-serif\",\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: colors,\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var ctx;\n            if (flotItem.seriesIndex === 1) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.OPTIMAL\", ctx);\n            } else if (flotItem.seriesIndex === 2) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.REAL\", ctx);\n            } else if (flotItem.seriesIndex === 3) {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_CLIENT\", ctx);\n            } else {\n              ctx = {\n                sprintName: dataToDraw.milestones[xval].name,\n                value: Math.abs(yval * 10) / 10\n              };\n              return $translate.instant(\"BACKLOG.CHART.INCREMENT_TEAM\", ctx);\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch(\"stats\", function(value) {\n        if ($scope.stats != null) {\n          redrawChart(element, $scope.stats);\n          return $scope.$on(\"resize\", function() {\n            return redrawChart(element, $scope.stats);\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBurndownBacklogGraph\", [\"$translate\", BurndownBacklogGraphDirective]);\n\n  TgBacklogProgressBarDirective = function($template, $compile) {\n    var adjustPercentaje, link, render, template;\n    template = $template.get(\"backlog/progress-bar.html\", true);\n    render = function(scope, el, projectPointsPercentaje, closedPointsPercentaje) {\n      var html;\n      html = template({\n        projectPointsPercentaje: projectPointsPercentaje,\n        closedPointsPercentaje: closedPointsPercentaje\n      });\n      html = $compile(html)(scope);\n      return el.html(html);\n    };\n    adjustPercentaje = function(percentage) {\n      var adjusted;\n      adjusted = _.max([0, percentage]);\n      adjusted = _.min([100, adjusted]);\n      return Math.round(adjusted);\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$watch($attrs.tgBacklogProgressBar, function(stats) {\n        var closedPoints, closedPointsPercentaje, definedPoints, projectPointsPercentaje, totalPoints;\n        if (stats != null) {\n          totalPoints = stats.total_points ? stats.total_points : stats.defined_points;\n          definedPoints = stats.defined_points;\n          closedPoints = stats.closed_points;\n          if (definedPoints > totalPoints) {\n            projectPointsPercentaje = totalPoints * 100 / definedPoints;\n            closedPointsPercentaje = closedPoints * 100 / definedPoints;\n          } else {\n            projectPointsPercentaje = 100;\n            closedPointsPercentaje = closedPoints * 100 / totalPoints;\n          }\n          projectPointsPercentaje = adjustPercentaje(projectPointsPercentaje - 3);\n          closedPointsPercentaje = adjustPercentaje(closedPointsPercentaje - 3);\n          return render($scope, $el, projectPointsPercentaje, closedPointsPercentaje);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogProgressBar\", [\"$tgTemplate\", \"$compile\", TgBacklogProgressBarDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSortableDirective, bindOnce, deleteElement, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBacklog\");\n\n  deleteElement = function(el) {\n    $(el).scope().$destroy();\n    $(el).off();\n    return $(el).remove();\n  };\n\n  BacklogSortableDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, \"project\", function(project) {\n        var drake, emptyBacklog, initIsBacklog, scroll;\n        if (!(project.my_permissions.indexOf(\"modify_us\") > -1)) {\n          return;\n        }\n        initIsBacklog = false;\n        emptyBacklog = $('.js-empty-backlog');\n        drake = dragula([$el[0], emptyBacklog[0], emptyBacklog[1]], {\n          copySortSource: false,\n          copy: false,\n          isContainer: function(el) {\n            return el.classList.contains('sprint-table');\n          },\n          moves: function(item) {\n            if (!$(item).hasClass('row')) {\n              return false;\n            }\n            return true;\n          }\n        });\n        drake.on('drag', function(item, container) {\n          var isChecked, parent;\n          parent = $(item).parent();\n          initIsBacklog = parent.hasClass('backlog-table-body');\n          $(document.body).addClass(\"drag-active\");\n          isChecked = $(item).find(\"input[type='checkbox']\").is(\":checked\");\n          return window.dragMultiple.start(item, container);\n        });\n        drake.on('cloned', function(item) {\n          return $(item).addClass('multiple-drag-mirror');\n        });\n        drake.on('dragend', function(item) {\n          var dragMultipleItems, firstElement, index, isBacklog, parent, ref, sameContainer, sprint, usList;\n          $('.doom-line').remove();\n          parent = $(item).parent();\n          isBacklog = parent.hasClass('backlog-table-body') || parent.hasClass('js-empty-backlog');\n          if (initIsBacklog || isBacklog) {\n            sameContainer = initIsBacklog === isBacklog;\n          } else {\n            sameContainer = parent && $(item).scope().sprint.id === parent.scope().sprint.id;\n          }\n          dragMultipleItems = window.dragMultiple.stop();\n          $(document.body).removeClass(\"drag-active\");\n          sprint = null;\n          firstElement = dragMultipleItems.length ? dragMultipleItems[0] : item;\n          if (isBacklog) {\n            index = $(firstElement).index(\".backlog-table-body .row\");\n          } else {\n            index = $(firstElement).index();\n            sprint = (ref = parent.scope()) != null ? ref.sprint.id : void 0;\n          }\n          if (!sameContainer) {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n            if (dragMultipleItems.length) {\n              _.each(dragMultipleItems, function(item) {\n                return deleteElement(item);\n              });\n            } else {\n              deleteElement(item);\n            }\n          } else {\n            if (dragMultipleItems.length) {\n              usList = _.map(dragMultipleItems, function(item) {\n                return item = $(item).scope().us;\n              });\n            } else if ($(item).scope()) {\n              usList = [$(item).scope().us];\n            }\n          }\n          return $scope.$emit(\"sprint:us:move\", usList, index, sprint);\n        });\n        scroll = autoScroll([window], {\n          margin: 20,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSortable\", BacklogSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BacklogSprintDirective, BacklogSprintHeaderDirective, ToggleExcludeClosedSprintsVisualization, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBacklog\");\n\n  BacklogSprintDirective = function($repo, $rootscope) {\n    var link, slideOptions, sprintTableMinHeight, toggleSprint;\n    sprintTableMinHeight = 50;\n    slideOptions = {\n      duration: 500,\n      easing: 'linear'\n    };\n    toggleSprint = (function(_this) {\n      return function($el) {\n        var sprintArrow, sprintTable;\n        sprintTable = $el.find(\".sprint-table\");\n        sprintArrow = $el.find(\".compact-sprint\");\n        sprintArrow.toggleClass('active');\n        return sprintTable.toggleClass('open');\n      };\n    })(this);\n    link = function($scope, $el, $attrs) {\n      $scope.$watch($attrs.tgBacklogSprint, function(sprint) {\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        if (sprint.closed) {\n          return $el.addClass(\"sprint-closed\");\n        } else {\n          return toggleSprint($el);\n        }\n      });\n      $el.on(\"click\", \".sprint-name > .compact-sprint\", function(event) {\n        event.preventDefault();\n        toggleSprint($el);\n        return $el.find(\".sprint-table\").slideToggle(slideOptions);\n      });\n      $el.on(\"click\", \".edit-sprint\", function(event) {\n        var sprint;\n        event.preventDefault();\n        sprint = $scope.$eval($attrs.tgBacklogSprint);\n        return $rootscope.$broadcast(\"sprintform:edit\", sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogSprint\", [\"$tgRepo\", \"$rootScope\", BacklogSprintDirective]);\n\n  BacklogSprintHeaderDirective = function($navUrls, $template, $compile, $translate) {\n    var link, template;\n    template = $template.get(\"backlog/sprint-header.html\");\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, isVisible, prettyDate, render;\n      prettyDate = $translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_milestone\") !== -1;\n      };\n      isVisible = function() {\n        return $scope.project.my_permissions.indexOf(\"view_milestones\") !== -1;\n      };\n      render = function(sprint) {\n        var compiledTemplate, ctx, estimatedDateRange, finish, start, taskboardUrl, templateScope;\n        taskboardUrl = $navUrls.resolve(\"project-taskboard\", {\n          project: $scope.project.slug,\n          sprint: sprint.slug\n        });\n        start = moment(sprint.estimated_start).format(prettyDate);\n        finish = moment(sprint.estimated_finish).format(prettyDate);\n        estimatedDateRange = start + \"-\" + finish;\n        ctx = {\n          name: sprint.name,\n          taskboardUrl: taskboardUrl,\n          estimatedDateRange: estimatedDateRange,\n          closedPoints: sprint.closed_points || 0,\n          totalPoints: sprint.total_points || 0,\n          isVisible: isVisible(),\n          isEditable: isEditable()\n        };\n        templateScope = $scope.$new();\n        _.assign(templateScope, ctx);\n        compiledTemplate = $compile(template)(templateScope);\n        return $el.html(compiledTemplate);\n      };\n      $scope.$watch(\"sprint\", function(sprint) {\n        return render(sprint);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\"\n    };\n  };\n\n  module.directive(\"tgBacklogSprintHeader\", [\"$tgNavUrls\", \"$tgTemplate\", \"$compile\", \"$translate\", BacklogSprintHeaderDirective]);\n\n  ToggleExcludeClosedSprintsVisualization = function($rootscope, $loading, $translate) {\n    var excludeClosedSprints, link;\n    excludeClosedSprints = true;\n    link = function($scope, $el, $attrs) {\n      var currentLoading, loadingElm;\n      loadingElm = $(\"<div>\");\n      $el.after(loadingElm);\n      currentLoading = null;\n      $el.on(\"click\", function(event) {\n        event.preventDefault();\n        excludeClosedSprints = !excludeClosedSprints;\n        currentLoading = $loading().target(loadingElm).start();\n        if (excludeClosedSprints) {\n          return $rootscope.$broadcast(\"backlog:unload-closed-sprints\");\n        } else {\n          return $rootscope.$broadcast(\"backlog:load-closed-sprints\");\n        }\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return $scope.$on(\"closed-sprints:reloaded\", function(ctx, sprints) {\n        var key, text;\n        if (currentLoading) {\n          currentLoading.finish();\n        }\n        if (sprints.length > 0) {\n          key = \"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\";\n        } else {\n          key = \"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\";\n        }\n        text = $translate.instant(key);\n        return $el.find(\".text\").text(text);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBacklogToggleClosedSprintsVisualization\", [\"$rootScope\", \"$tgLoading\", \"$translate\", ToggleExcludeClosedSprintsVisualization]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SprintChartDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  SprintChartDirective = function($translate) {\n    var link, redrawChart;\n    redrawChart = function(element, dataToDraw) {\n      var data, days, options, width;\n      width = element.width();\n      element.height(240);\n      days = _.map(dataToDraw, function(x) {\n        return moment.utc(x.day);\n      });\n      data = [];\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.open_points;\n        })),\n        lines: {\n          fillColor: \"rgba(147,196,0,0.2)\"\n        }\n      });\n      data.unshift({\n        data: _.zip(days, _.map(dataToDraw, function(d) {\n          return d.optimal_points;\n        })),\n        lines: {\n          fillColor: \"rgba(200,201,196,0.2)\"\n        }\n      });\n      options = {\n        grid: {\n          borderWidth: {\n            top: 0,\n            right: 1,\n            left: 0,\n            bottom: 0\n          },\n          borderColor: \"#D8DEE9\",\n          color: \"#D8DEE9\",\n          hoverable: true,\n          margin: {\n            top: 0,\n            right: 30,\n            left: 5,\n            bottom: 5\n          }\n        },\n        xaxis: {\n          tickSize: [1, \"day\"],\n          min: days[0],\n          max: _.last(days),\n          mode: \"time\",\n          daysNames: days,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.XAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        yaxis: {\n          min: 0,\n          axisLabel: $translate.instant(\"TASKBOARD.CHARTS.YAXIS_LABEL\"),\n          axisLabelUseCanvas: true,\n          axisLabelFontSizePixels: 12,\n          axisLabelFontFamily: 'Verdana, Arial, Helvetica, Tahoma, sans-serif',\n          axisLabelPadding: 5\n        },\n        series: {\n          shadowSize: 0,\n          lines: {\n            show: true,\n            fill: true\n          },\n          points: {\n            show: true,\n            fill: true,\n            radius: 4,\n            lineWidth: 2\n          }\n        },\n        colors: [\"rgba(216,222,233,1)\", \"rgba(168,228,64,1)\"],\n        tooltip: true,\n        tooltipOpts: {\n          content: function(label, xval, yval, flotItem) {\n            var formattedDate, roundedValue;\n            formattedDate = moment(xval).format($translate.instant(\"TASKBOARD.CHARTS.DATE\"));\n            roundedValue = Math.round(yval * 10) / 10;\n            if (flotItem.seriesIndex === 1) {\n              return $translate.instant(\"TASKBOARD.CHARTS.REAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            } else {\n              return $translate.instant(\"TASKBOARD.CHARTS.OPTIMAL\", {\n                formattedDate: formattedDate,\n                roundedValue: roundedValue\n              });\n            }\n          }\n        }\n      };\n      element.empty();\n      return element.plot(data, options).data(\"plot\");\n    };\n    link = function($scope, $el, $attrs) {\n      var element;\n      element = angular.element($el);\n      $scope.$on(\"resize\", function() {\n        if ($scope.stats) {\n          return redrawChart(element, $scope.stats.days);\n        }\n      });\n      $scope.$on(\"taskboard:graph:toggle-visibility\", function() {\n        $el.parent().toggleClass('open');\n        return timeout(100, function() {\n          if ($scope.stats) {\n            return redrawChart(element, $scope.stats.days);\n          }\n        });\n      });\n      $scope.$watch('stats', function(value) {\n        if ($scope.stats == null) {\n          return;\n        }\n        return redrawChart(element, $scope.stats.days);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSprintChart\", [\"$translate\", SprintChartDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkTasksDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  CreateBulkTasksDirective = function($repo, $rs, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var submit, submitButton;\n      $scope.form = {\n        data: \"\",\n        usId: null\n      };\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, data, form, projectId, promise, sprintId, usId;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          data = $scope.form.data;\n          projectId = $scope.projectId;\n          sprintId = $scope.form.sprintId;\n          usId = $scope.form.usId;\n          promise = $rs.tasks.bulkCreate(projectId, sprintId, usId, data);\n          promise.then(function(result) {\n            result = _.map(result, (function(_this) {\n              return function(x) {\n                return $model.make_model('tasks', x);\n              };\n            })(this));\n            currentLoading.finish();\n            $rootscope.$broadcast(\"taskform:bulk:success\", result);\n            return lightboxService.close($el);\n          });\n          return promise.then(null, function() {\n            return currentLoading.finish();\n          });\n        };\n      })(this));\n      $scope.$on(\"taskform:bulk\", function(ctx, sprintId, usId) {\n        lightboxService.open($el);\n        return $scope.form = {\n          data: \"\",\n          sprintId: sprintId,\n          usId: usId\n        };\n      });\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkTasks\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkTasksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardController, TaskboardDirective, TaskboardSquishColumnDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  toggleText = this.taiga.toggleText;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaTaskboard\");\n\n  TaskboardController = (function(superClass) {\n    extend(TaskboardController, superClass);\n\n    TaskboardController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"tgAppMetaService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgTaskboardTasks\", \"tgTaskboardIssues\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgLightboxFactory\", \"$timeout\", \"tgProjectService\"];\n\n    TaskboardController.prototype.excludePrefix = \"exclude_\";\n\n    TaskboardController.prototype.filterCategories = [\"status\", \"assigned_to\", \"owner\", \"role\"];\n\n    TaskboardController.prototype.validQueryParams = ['exclude_status', 'status', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by'];\n\n    function TaskboardController(scope, rootscope, repo, confirm, rs1, rs2, params1, q1, appMetaService, location, navUrls, events, analytics, translate, errorHandlingService, taskboardTasksService, taskboardIssuesService, storage, filterRemoteStorageService, lightboxFactory, timeout1, projectService) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q1;\n      this.appMetaService = appMetaService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.taskboardTasksService = taskboardTasksService;\n      this.taskboardIssuesService = taskboardIssuesService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.lightboxFactory = lightboxFactory;\n      this.timeout = timeout1;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.taskboardTasksService.reset();\n      this.scope.userstories = [];\n      this.openFilter = false;\n      this.filterQ = '';\n      this.backToBacklogUrl = this.navUrls.resolve('project-backlog', {\n        project: this.projectService.project.get('slug'),\n        ref: this.params.ref\n      });\n      if (this.applyStoredFilters(this.params.pslug, \"tasks-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"TASKBOARD.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usTasks\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.usTasks;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"taskMap\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.taskMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"milestoneIssues\", (function(_this) {\n        return function() {\n          return _this.taskboardIssuesService.milestoneIssues;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"tasksByUs\", (function(_this) {\n        return function() {\n          return _this.taskboardTasksService.tasksByUs;\n        };\n      })(this));\n      this.scope.issues = [];\n      this.scope.showTags = true;\n      this.scope.$watch('milestoneIssues', (function(_this) {\n        return function() {\n          if (_this.scope.milestoneIssues) {\n            return _this.scope.issues = _this.scope.milestoneIssues.toJS().map(function(milestoneIssue) {\n              return _this.taskboardIssuesService.issuesRaw.find(function(rawIssue) {\n                return milestoneIssue.model.id === rawIssue.id;\n              });\n            });\n          } else {\n            return _this.scope.issues = [];\n          }\n        };\n      })(this));\n    }\n\n    TaskboardController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    TaskboardController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    TaskboardController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      if (this.zoomLevel === Number(zoomLevel)) {\n        return null;\n      }\n      this.isFirstLoad = !this.zoomLevel;\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 1 && previousZoomLevel <= 1) {\n        this.zoomLoading = true;\n        return this.q.all([this.loadTasks(), this.loadIssues()]).then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.taskboardTasksService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.changeQ = function(q) {\n      this.filterQ = q;\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.addFilter = function(newFilter) {\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.selectCustomFilter = function(customFilter) {\n      this.replaceAllFilters(customFilter.filter);\n      this.loadTasks();\n      return this.generateFilters();\n    };\n\n    TaskboardController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, i, len, ref;\n      ref = this.selectedFilters;\n      for (i = 0, len = ref.length; i < len; i++) {\n        filter = ref[i];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, i, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.getQueryParams();\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters').then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, 'tasks-custom-filters').then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.generateFilters = function() {\n      var excludeKey, i, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, \"tasks-filters\");\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.milestone = this.scope.sprintId;\n      ref = this.filterCategories;\n      for (i = 0, len = ref.length; i < len; i++) {\n        key = ref[i];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.tasks.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, 'tasks-custom-filters')]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, j, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (j = 0, len1 = ref1.length; j < len1; j++) {\n            key = ref1[j];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype._setMeta = function() {\n      var description, prettyDate, title;\n      prettyDate = this.translate.instant(\"BACKLOG.SPRINTS.DATE\");\n      title = this.translate.instant(\"TASKBOARD.PAGE_TITLE\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name\n      });\n      description = this.translate.instant(\"TASKBOARD.PAGE_DESCRIPTION\", {\n        projectName: this.scope.project.name,\n        sprintName: this.scope.sprint.name,\n        startDate: moment(this.scope.sprint.estimated_start).format(prettyDate),\n        endDate: moment(this.scope.sprint.estimated_finish).format(prettyDate),\n        completedPercentage: this.scope.stats.completedPercentage || \"0\",\n        completedPoints: this.scope.stats.completedPointsSum || \"--\",\n        totalPoints: this.scope.stats.totalPointsSum || \"--\",\n        openTasks: this.scope.stats.openTasks || \"--\",\n        totalTasks: this.scope.stats.total_tasks || \"--\"\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskboardController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"taskform:bulk:success\", (function(_this) {\n        return function(event, tasks) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(tasks);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"bulk create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:new:success\", (function(_this) {\n        return function(event, task) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.add(task);\n          });\n          return _this.analytics.trackEvent(\"task\", \"create\", \"create task on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"taskform:edit:success\", (function(_this) {\n        return function(event, task) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardTasksService.replaceModel(task);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function(event, issue) {\n          _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n          return _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on taskboard\", 1);\n        };\n      })(this));\n      this.scope.$on(\"issueform:add:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.add(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"issueform:edit:success\", (function(_this) {\n        return function(event, issue) {\n          return _this.refreshTagsColors().then(function() {\n            return _this.taskboardIssuesService.replaceModel(issue);\n          });\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:deleted\", (function(_this) {\n        return function(event, task) {\n          return _this.loadTasks();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:issue:deleted\", (function(_this) {\n        return function(event, issue) {\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"taskboard:task:move\", this.taskMove);\n      this.scope.$on(\"assigned-to:added\", this.onAssignedToChanged);\n      return this.scope.$on(\"taskboard:items:move\", (function(_this) {\n        return function(event, itemsMoved) {\n          if (itemsMoved.uss) {\n            return _this.firstLoad();\n          } else {\n            if (itemsMoved.tasks) {\n              _this.loadTasks();\n            }\n            if (itemsMoved.issues) {\n              return _this.loadIssues();\n            }\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.onAssignedToChanged = function(ctx, userid, model) {\n      if (model.getName() === 'tasks') {\n        model.assigned_to = userid;\n        this.taskboardTasksService.replaceModel(model);\n        this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadTasks();\n            }\n          };\n        })(this));\n      }\n      if (model.getName() === 'issues') {\n        model.assigned_to = userid;\n        this.taskboardIssuesService.replaceModel(model);\n        return this.repo.save(model).then((function(_this) {\n          return function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n              return _this.loadIssues();\n            }\n          };\n        })(this));\n      }\n    };\n\n    TaskboardController.prototype.initializeSubscription = function() {\n      var routingKey, routingKey1;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".tasks\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadTaskboard();\n        };\n      })(this)));\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n      routingKey1 = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      return this.events.subscribe(this.scope, routingKey1, (function(_this) {\n        return function(message) {\n          _this.refreshTagsColors();\n          _this.loadSprintStats();\n          return _this.loadSprint();\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadProject = function() {\n      return this.rs.projects.get(this.scope.projectId).then((function(_this) {\n        return function(project) {\n          if (!project.is_backlog_activated) {\n            _this.errorHandlingService.permissionDenied();\n          }\n          _this.scope.project = project;\n          _this.scope.pointsList = _.sortBy(project.points, \"order\");\n          _this.scope.pointsById = groupBy(project.points, function(e) {\n            return e.id;\n          });\n          _this.scope.roleById = groupBy(project.roles, function(e) {\n            return e.id;\n          });\n          _this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n          _this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n          _this.scope.usStatusById = groupBy(project.us_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.issueStatusById = groupBy(project.issue_statuses, function(e) {\n            return e.id;\n          });\n          _this.scope.$emit('project:loaded', project);\n          _this.fillUsersAndRoles(project.members, project.roles);\n          return project;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprintStats = function() {\n      return this.rs.sprints.stats(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(stats) {\n          var completedPointsSum, remainingPointsSum, remainingTasks, totalPointsSum;\n          totalPointsSum = _.reduce(_.values(stats.total_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          completedPointsSum = _.reduce(_.values(stats.completed_points), (function(res, n) {\n            return res + n;\n          }), 0);\n          remainingPointsSum = totalPointsSum - completedPointsSum;\n          remainingTasks = stats.total_tasks - stats.completed_tasks;\n          _this.scope.stats = stats;\n          _this.scope.stats.totalPointsSum = totalPointsSum;\n          _this.scope.stats.completedPointsSum = completedPointsSum;\n          _this.scope.stats.remainingPointsSum = remainingPointsSum;\n          _this.scope.stats.remainingTasks = remainingTasks;\n          if (stats.totalPointsSum) {\n            _this.scope.stats.completedPercentage = Math.round(100 * stats.completedPointsSum / stats.totalPointsSum);\n          } else {\n            _this.scope.stats.completedPercentage = 0;\n          }\n          _this.scope.stats.openTasks = stats.total_tasks - stats.completed_tasks;\n          return stats;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadSprint = function() {\n      return this.rs.sprints.get(this.scope.projectId, this.scope.sprintId).then((function(_this) {\n        return function(sprint) {\n          _this.scope.sprint = sprint;\n          _this.scope.userstories = _.sortBy(sprint.user_stories, \"sprint_order\");\n          _this.taskboardTasksService.setUserstories(_this.scope.userstories);\n          _this.rootscope.$broadcast(\"taskboard:userstories:loaded\", _this.scope.userstories);\n          return sprint;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadIssues = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      return this.rs.issues.listInProject(this.scope.projectId, this.scope.sprintId, params).then((function(_this) {\n        return function(issues) {\n          _this.taskboardIssuesService.init(_this.scope.project, _this.scope.usersById, _this.scope.issueStatusById);\n          _this.taskboardIssuesService.set(issues);\n          return _this.initIssues = true;\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTasks = function() {\n      var locationParams, params;\n      params = {};\n      if (this.zoomLevel > 1) {\n        params.include_attachments = 1;\n      }\n      locationParams = this.getQueryParams();\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      return this.rs.tasks.list(this.scope.projectId, this.scope.sprintId, null, params).then((function(_this) {\n        return function(tasks) {\n          _this.notFoundTasks = false;\n          if (!tasks.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(locationParams).length)) {\n            _this.notFoundTasks = true;\n          }\n          _this.taskboardTasksService.init(_this.scope.project, _this.scope.usersById);\n          return _this.taskboardTasksService.set(tasks);\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.loadTaskboard = function() {\n      return this.q.all([\n        this.refreshTagsColors(), this.loadSprintStats(), this.loadSprint().then((function(_this) {\n          return function() {\n            _this.loadTasks();\n            return _this.loadIssues();\n          };\n        })(this))\n      ]);\n    };\n\n    TaskboardController.prototype.loadInitialData = function() {\n      var params, promise;\n      this.initialLoad = false;\n      this.initIssues = false;\n      params = {\n        pslug: this.params.pslug,\n        sslug: this.params.sslug\n      };\n      promise = this.repo.resolve(params).then((function(_this) {\n        return function(data) {\n          _this.scope.projectId = data.project;\n          _this.scope.sprintId = data.milestone;\n          _this.initializeSubscription();\n          return data;\n        };\n      })(this));\n      return promise.then((function(_this) {\n        return function() {\n          return _this.loadProject();\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.rs.issues.getSprintShowTags(_this.scope.projectId) === false) {\n            _this.scope.showTags = false;\n          }\n          return _this.loadTaskboard().then(function() {\n            _this.timeout(function() {\n              return _this.initialLoad = true;\n            }, 0, false);\n            return _this.setRolePoints();\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.toggleTags = function(tags) {\n      return this.rs.issues.storeSprintShowTags(this.scope.projectId, tags);\n    };\n\n    TaskboardController.prototype.showPlaceHolder = function(statusId, usId) {\n      if (!this.taskboardTasksService.tasksRaw.length) {\n        if (this.scope.taskStatusList[0].id === statusId && (!this.scope.userstories.length || this.scope.userstories[0].id === usId)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    TaskboardController.prototype.editTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-edit', true);\n      this.taskboardTasksService.replace(task);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingTask) {\n          return _this.rs2.attachments.list(\"task\", task.get('id'), task.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'task',\n              'obj': editingTask,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            task = task.set('loading-edit', false);\n            return _this.taskboardTasksService.replace(task);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.editIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-edit', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingIssue) {\n          return _this.rs2.attachments.list(\"issue\", issue.get('id'), issue.getIn(['model', 'project'])).then(function(attachments) {\n            _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'issue',\n              'obj': editingIssue,\n              'project': _this.scope.project,\n              'sprintId': _this.scope.sprintId,\n              'attachments': attachments.toJS()\n            });\n            return issue = issue.set('loading-edit', false);\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteTask = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTask(id);\n      task = task.set('loading-delete', true);\n      return this.rs.tasks.getByRef(task.getIn(['model', 'project']), task.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingTask) {\n          var message, title;\n          task = task.set('loading-delete', false);\n          title = _this.translate.instant(\"TASK.TITLE_DELETE_ACTION\");\n          message = deletingTask.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingTask);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:task:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.deleteIssue = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.ACTION_DELETE\");\n          message = deletingIssue.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingIssue);\n            promise.then(function() {\n              _this.scope.$broadcast(\"taskboard:issue:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.removeIssueFromSprint = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssue(id);\n      issue = issue.set('loading-delete', true);\n      return this.rs.issues.getByRef(issue.getIn(['model', 'project']), issue.getIn(['model', 'ref'])).then((function(_this) {\n        return function(removingIssue) {\n          var message, title;\n          issue = issue.set('loading-delete', false);\n          title = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\");\n          message = _this.translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: _this.scope.sprint.name\n          });\n          return _this.confirm.ask(title, null, message).then(function(askResponse) {\n            var promise;\n            removingIssue.milestone = null;\n            promise = _this.repo.save(removingIssue);\n            promise.then(function() {\n              _this.taskboardIssuesService.remove(removingIssue);\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.taskMove = function(ctx, task, oldStatusId, usId, statusId, order) {\n      var moveUpdateData, options, params, promise;\n      this.scope.movingTask = true;\n      task = this.taskboardTasksService.getTaskModel(task.get('id'));\n      moveUpdateData = this.taskboardTasksService.move(task.id, usId, statusId, order);\n      params = {\n        status__is_archived: false,\n        include_attachments: true\n      };\n      options = {\n        headers: {\n          \"set-orders\": JSON.stringify(moveUpdateData.set_orders)\n        }\n      };\n      return promise = this.repo.save(task, true, params, options, true).then((function(_this) {\n        return function(result) {\n          var headers;\n          if (result[0] && result[0].user_story) {\n            _this.reloadUserStory(result[0].user_story);\n          }\n          _this.scope.movingTask = false;\n          headers = result[1];\n          if (headers && headers['taiga-info-order-updated']) {\n            order = JSON.parse(headers['taiga-info-order-updated']);\n            _this.taskboardTasksService.assignOrders(order);\n          }\n          _this.loadSprintStats();\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.loadTasks();\n          }\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.reloadUserStory = function(userStoryId) {\n      return this.rs.userstories.get(this.scope.project.id, userStoryId).then((function(_this) {\n        return function(us) {\n          return _this.scope.userstories = _.map(_this.scope.userstories, function(x) {\n            if (x.id === us.id) {\n              return us;\n            } else {\n              return x;\n            }\n          });\n        };\n      })(this));\n    };\n\n    TaskboardController.prototype.addNewTask = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'task',\n            'project': this.scope.project,\n            'sprintId': this.scope.sprintId,\n            'usId': us != null ? us.id : void 0\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"taskform:bulk\", this.scope.sprintId, us != null ? us.id : void 0);\n      }\n    };\n\n    TaskboardController.prototype.addNewIssue = function(type, us) {\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new-or-existing\", {\n            objType: 'issue',\n            project: this.scope.project,\n            sprintId: this.scope.sprintId,\n            relatedField: 'milestone',\n            relatedObjectId: this.scope.sprintId,\n            targetName: this.scope.sprint.name\n          });\n        case \"standard\":\n          return this.rootscope.$broadcast(\"taskform:new\", this.scope.sprintId, us != null ? us.id : void 0);\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"issueform:bulk\", this.scope.projectId, this.scope.sprintId);\n      }\n    };\n\n    TaskboardController.prototype.toggleFold = function(id, modelName) {\n      if (modelName === 'issues') {\n        return this.taskboardIssuesService.toggleFold(id);\n      } else if (modelName === 'tasks') {\n        return this.taskboardTasksService.toggleFold(id);\n      }\n    };\n\n    TaskboardController.prototype.openUsersSelection = function(item) {\n      var onClose;\n      onClose = (function(_this) {\n        return function(assignedUsers) {\n          var userId;\n          userId = assignedUsers.pop() || null;\n          if (item.getName() === 'tasks') {\n            item.assigned_to = userId;\n            _this.taskboardTasksService.replaceModel(item);\n            _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadTasks();\n              }\n            });\n          }\n          if (item.getName() === 'issues') {\n            item.assigned_to = userId;\n            _this.taskboardIssuesService.replaceModel(item);\n            return _this.repo.save(item).then(function() {\n              _this.generateFilters();\n              if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role')) {\n                return _this.loadIssues();\n              }\n            });\n          }\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": [item.assigned_to],\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"single\": true,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    TaskboardController.prototype.changeTaskAssignedTo = function(id) {\n      var task;\n      task = this.taskboardTasksService.getTaskModel(id);\n      return this.openUsersSelection(task);\n    };\n\n    TaskboardController.prototype.changeIssueAssignedTo = function(id) {\n      var issue;\n      issue = this.taskboardIssuesService.getIssueModel(id);\n      return this.openUsersSelection(issue);\n    };\n\n    TaskboardController.prototype.setRolePoints = function() {\n      var computableRoles, getPoint, getRole, pointsByRole;\n      computableRoles = _.filter(this.scope.project.roles, \"computable\");\n      getRole = (function(_this) {\n        return function(roleId) {\n          roleId = parseInt(roleId, 10);\n          return _.find(computableRoles, function(role) {\n            return role.id === roleId;\n          });\n        };\n      })(this);\n      getPoint = (function(_this) {\n        return function(pointId) {\n          var poitnId;\n          poitnId = parseInt(pointId, 10);\n          return _.find(_this.scope.project.points, function(point) {\n            return point.id === pointId;\n          });\n        };\n      })(this);\n      pointsByRole = _.reduce(this.scope.userstories, (function(_this) {\n        return function(result, us, key) {\n          _.forOwn(us.points, function(pointId, roleId) {\n            var point, role;\n            role = getRole(roleId);\n            point = getPoint(pointId) || {\n              value: 0\n            };\n            if (role) {\n              if (!result[role.id]) {\n                result[role.id] = role;\n                result[role.id].points = 0;\n              }\n              return result[role.id].points += point.value;\n            }\n          });\n          return result;\n        };\n      })(this), {});\n      return this.scope.pointsByRole = Object.keys(pointsByRole).map(function(key) {\n        return pointsByRole[key];\n      });\n    };\n\n    TaskboardController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return TaskboardController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"TaskboardController\", TaskboardController);\n\n  TaskboardDirective = function($rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, tableBodyDom;\n      $ctrl = $el.controller();\n      $el.on(\"click\", \".toggle-analytics-visibility\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        target.toggleClass('active');\n        return $rootscope.$broadcast(\"taskboard:graph:toggle-visibility\");\n      });\n      tableBodyDom = $el.find('[data-js=\"taskboard-table-hscroll\"]');\n      tableBodyDom.on(\"scroll\", function(event) {\n        var tableHeaderDom, target;\n        target = angular.element(event.currentTarget);\n        tableHeaderDom = $el.find(\".taskboard-table-inner\");\n        return tableHeaderDom.css(\"left\", -1 * target.scrollLeft());\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboard\", [\"$rootScope\", TaskboardDirective]);\n\n  TaskboardSquishColumnDirective = function(rs) {\n    var avatarWidth, firstLoad, gridGap, horizontalPadding, link, maxColumnWidth, maxRows, minWidth, zoom0ColumnWidth;\n    gridGap = 5;\n    horizontalPadding = 32;\n    avatarWidth = 30;\n    maxColumnWidth = 292;\n    zoom0ColumnWidth = 182;\n    minWidth = avatarWidth + horizontalPadding;\n    maxRows = 3;\n    firstLoad = false;\n    link = function($scope, $el, $attrs) {\n      var $foldStatusArchived, getCeilWidth, recalculateStatusColumnWidth, recalculateTaskboardWidth, setStatusColumnWidth;\n      $scope.$watch(\"ctrl.zoom\", (function(_this) {\n        return function() {\n          if (firstLoad) {\n            return recalculateTaskboardWidth();\n          }\n        };\n      })(this));\n      $scope.$on(\"sprint:task:moved\", (function(_this) {\n        return function() {\n          return recalculateTaskboardWidth();\n        };\n      })(this));\n      $scope.$watch(\"usTasks\", function() {\n        if ($scope.project) {\n          $scope.statusesFolded = rs.tasks.getStatusColumnModes($scope.project.id);\n          $scope.usFolded = rs.tasks.getUsRowModes($scope.project.id, $scope.sprintId);\n          return recalculateTaskboardWidth();\n        }\n      });\n      $scope.foldStatus = function(status) {\n        $scope.statusesFolded[status.id] = !!!$scope.statusesFolded[status.id];\n        rs.tasks.storeStatusColumnModes($scope.projectId, $scope.statusesFolded);\n        return recalculateTaskboardWidth();\n      };\n      $foldStatusArchived = function(status) {\n        return $scope.foldStatus(status);\n      };\n      $scope.foldUs = function(rowId) {\n        $scope.usFolded[rowId] = !!!$scope.usFolded[rowId];\n        rs.tasks.storeUsRowModes($scope.projectId, $scope.sprintId, $scope.usFolded);\n        return recalculateTaskboardWidth();\n      };\n      getCeilWidth = (function(_this) {\n        return function(usId, statusId) {\n          var columns, isStatusFolded, isUSFolded, tasks, width;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          isUSFolded = !!$scope.usFolded[usId];\n          if (usId) {\n            tasks = $scope.usTasks.getIn([usId.toString(), statusId.toString()]).size;\n          } else {\n            tasks = $scope.usTasks.getIn(['null', statusId.toString()]).size;\n          }\n          if (tasks && (isUSFolded || isStatusFolded)) {\n            if (isUSFolded) {\n              columns = Math.ceil(tasks / maxRows);\n              width = avatarWidth * columns + ((columns - 1) * gridGap) + horizontalPadding;\n            } else if (isStatusFolded) {\n              width = avatarWidth;\n            }\n          } else {\n            width = 0;\n          }\n          return width;\n        };\n      })(this);\n      setStatusColumnWidth = (function(_this) {\n        return function(statusId, width) {\n          var column;\n          column = $el.find(\".squish-status-\" + statusId);\n          if (width < minWidth) {\n            width = minWidth;\n          }\n          column.css('max-width', width);\n          return width;\n        };\n      })(this);\n      recalculateStatusColumnWidth = (function(_this) {\n        return function(statusId) {\n          var folded, initialWidth, isStatusFolded, statusFoldedWidth;\n          isStatusFolded = !!$scope.statusesFolded[statusId];\n          initialWidth = 0;\n          if (isStatusFolded) {\n            initialWidth = avatarWidth;\n          } else {\n            initialWidth = maxColumnWidth;\n            if (Number($scope.ctrl.zoomLevel) === 0) {\n              initialWidth = zoom0ColumnWidth;\n            }\n          }\n          folded = !!$scope.statusesFolded[statusId];\n          statusFoldedWidth = getCeilWidth(null, statusId);\n          if (statusFoldedWidth < initialWidth) {\n            statusFoldedWidth = initialWidth;\n          }\n          _.forEach($scope.userstories, function(us) {\n            var isUSFolded, width;\n            isUSFolded = !!$scope.usFolded[us.id];\n            width = getCeilWidth(us.id, statusId);\n            if (width > statusFoldedWidth) {\n              return statusFoldedWidth = width;\n            }\n          });\n          return setStatusColumnWidth(statusId, statusFoldedWidth);\n        };\n      })(this);\n      return recalculateTaskboardWidth = (function(_this) {\n        return function() {\n          var total;\n          total = _.reduce($scope.taskStatusList, function(acc, status) {\n            return acc + recalculateStatusColumnWidth(status.id) + 5;\n          }, 0);\n          $el.find('.taskboard-table-inner').css(\"width\", maxColumnWidth + total);\n          if (!firstLoad) {\n            requestAnimationFrame(function() {\n              return $el.addClass('animations');\n            });\n          }\n          firstLoad = true;\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSquishColumn\", [\"$tgResources\", TaskboardSquishColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  module = angular.module(\"taigaBacklog\");\n\n  TaskboardSortableDirective = function($repo, $rs, $rootscope, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      return unwatch = $scope.$watch(\"usTasks\", function(usTasks) {\n        var containers, deleteElement, drake, filterError, initialContainer, itemEl, newParentScope, oldParentScope, scroll, tdom;\n        if (!usTasks || !usTasks.size) {\n          return;\n        }\n        unwatch();\n        if (!($scope.project.my_permissions.indexOf(\"modify_task\") > -1)) {\n          return;\n        }\n        oldParentScope = null;\n        newParentScope = null;\n        itemEl = null;\n        tdom = $el;\n        filterError = function() {\n          var text;\n          text = $translate.instant(\"BACKLOG.SORTABLE_FILTER_ERROR\");\n          return $tgConfirm.notify(\"error\", text);\n        };\n        deleteElement = function(itemEl) {\n          itemEl.off();\n          return itemEl.remove();\n        };\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        drake = dragula(containers, {\n          copySortSource: false,\n          copy: false,\n          accepts: function(el, target) {\n            return !$(target).hasClass('taskboard-row-title-box');\n          },\n          moves: function(item) {\n            return $(item).is('tg-card');\n          }\n        });\n        initialContainer = null;\n        drake.on('shadow', function(item) {\n          return $(item).removeClass('folded-dragging');\n        });\n        drake.on('over', function(item, container) {\n          if (!initialContainer) {\n            return initialContainer = container;\n          } else if (container !== initialContainer) {\n            return $(container).addClass('target-drop');\n          }\n        });\n        drake.on('out', function(item, container) {\n          if (container !== initialContainer) {\n            return $(container).removeClass('target-drop');\n          }\n        });\n        drake.on('drag', function(item) {\n          oldParentScope = $(item).parent().scope();\n          if ($(item).width() === 30) {\n            $(item).addClass('folded-dragging');\n          }\n          if ($el.hasClass(\"active-filters\")) {\n            filterError();\n            setTimeout((function() {\n              return drake.cancel(true);\n            }), 0);\n            return false;\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemIndex, itemTask, newStatusId, newUsId, oldStatusId, oldUsId, parentEl;\n          parentEl = $(item).parent();\n          itemEl = $(item);\n          itemTask = $scope.taskMap.get(Number(item.dataset.id));\n          itemIndex = itemEl.index();\n          newParentScope = parentEl.scope();\n          oldUsId = oldParentScope.us ? oldParentScope.us.id : null;\n          oldStatusId = oldParentScope.st.id;\n          newUsId = newParentScope.us ? newParentScope.us.id : null;\n          newStatusId = newParentScope.st.id;\n          if (initialContainer !== parentEl) {\n            $(parentEl).addClass('new');\n            $(parentEl).one('animationend', function() {\n              return $(parentEl).removeClass('new');\n            });\n          }\n          if (newStatusId !== oldStatusId || newUsId !== oldUsId) {\n            deleteElement(itemEl);\n          }\n          return $scope.$apply(function() {\n            return $rootscope.$broadcast(\"taskboard:task:move\", itemTask, itemTask.getIn(['model', 'status']), newUsId, newStatusId, itemIndex);\n          });\n        });\n        scroll = autoScroll([$('.taskboard-table-body')[0]], {\n          margin: 100,\n          pixels: 30,\n          scrollWhenOutside: true,\n          autoScroll: function() {\n            return this.down && drake.dragging;\n          }\n        });\n        return $scope.$on(\"$destroy\", function() {\n          $el.off();\n          return drake.destroy();\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgTaskboardSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"$translate\", TaskboardSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardIssuesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardIssuesService = (function(superClass) {\n    extend(TaskboardIssuesService, superClass);\n\n    TaskboardIssuesService.$inject = [];\n\n    function TaskboardIssuesService() {\n      this.reset();\n    }\n\n    TaskboardIssuesService.prototype.reset = function() {\n      this.foldStatusChanged = {};\n      return this.issuesRaw = [];\n    };\n\n    TaskboardIssuesService.prototype.init = function(project, usersById, issueStatusById) {\n      this.issueStatusById = issueStatusById;\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardIssuesService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.toggleFold = function(issueId) {\n      this.foldStatusChanged[issueId] = !this.foldStatusChanged[issueId];\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.add = function(issue) {\n      this.issuesRaw = this.issuesRaw.concat(issue);\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.remove = function(issue) {\n      var item, key, ref;\n      ref = this.issuesRaw;\n      for (key in ref) {\n        item = ref[key];\n        if (issue.id === item.id) {\n          this.issuesRaw.splice(key, 1);\n          this.refresh();\n          return;\n        }\n      }\n    };\n\n    TaskboardIssuesService.prototype.set = function(issues) {\n      this.issuesRaw = issues;\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.getIssue = function(id) {\n      return this.milestoneIssues.find(function(issue) {\n        return issue.get('id') === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.getIssueModel = function(id) {\n      return _.find(this.issuesRaw, function(issue) {\n        return issue.id === id;\n      });\n    };\n\n    TaskboardIssuesService.prototype.replaceModel = function(issue) {\n      this.issuesRaw = _.map(this.issuesRaw, function(item) {\n        if (issue.id === item.id) {\n          return issue;\n        } else {\n          return item;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardIssuesService.prototype.refresh = function() {\n      var i, issue, issueModel, issues, len, ref;\n      issues = [];\n      ref = this.issuesRaw;\n      for (i = 0, len = ref.length; i < len; i++) {\n        issueModel = ref[i];\n        issue = {};\n        issue.foldStatusChanged = this.foldStatusChanged[issueModel.id];\n        issue.model = issueModel.getAttrs();\n        issue.modelName = issueModel.getName();\n        issue.id = issueModel.id;\n        issue.status = this.issueStatusById[issueModel.status];\n        issue.images = _.filter(issue.model.attachments, function(it) {\n          return !!it.thumbnail_card_url;\n        });\n        issue.assigned_to = this.usersById[issueModel.assigned_to];\n        issue.colorized_tags = _.map(issue.model.tags, function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        });\n        issues.push(issue);\n      }\n      return this.milestoneIssues = Immutable.fromJS(issues);\n    };\n\n    return TaskboardIssuesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardIssues\", TaskboardIssuesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardTasksService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  TaskboardTasksService = (function(superClass) {\n    extend(TaskboardTasksService, superClass);\n\n    TaskboardTasksService.$inject = [];\n\n    function TaskboardTasksService() {\n      this.reset();\n    }\n\n    TaskboardTasksService.prototype.reset = function() {\n      this.tasksRaw = [];\n      this.foldStatusChanged = {};\n      this.usTasks = Immutable.Map();\n      this.tasksByUs = Immutable.Map();\n      return this.taskMap = Immutable.Map();\n    };\n\n    TaskboardTasksService.prototype.init = function(project, usersById) {\n      this.project = project;\n      return this.usersById = usersById;\n    };\n\n    TaskboardTasksService.prototype.resetFolds = function() {\n      this.foldStatusChanged = {};\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.toggleFold = function(taskId) {\n      this.foldStatusChanged[taskId] = !this.foldStatusChanged[taskId];\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.add = function(task) {\n      this.tasksRaw = this.tasksRaw.concat(task);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.set = function(tasks) {\n      this.tasksRaw = tasks;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.setUserstories = function(userstories) {\n      return this.userstories = userstories;\n    };\n\n    TaskboardTasksService.prototype.refreshRawOrder = function() {\n      var i, len, ref, results, task;\n      this.order = {};\n      ref = this.tasksRaw;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        task = ref[i];\n        results.push(this.order[task.id] = task.taskboard_order);\n      }\n      return results;\n    };\n\n    TaskboardTasksService.prototype.assignOrders = function(order) {\n      order = _.invert(order);\n      this.order = _.assign(this.order, order);\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.getTask = function(id) {\n      return this.taskMap.get(id);\n    };\n\n    TaskboardTasksService.prototype.replace = function(task) {\n      return this.taskMap = this.taskMap.set(task.get('id'), task);\n    };\n\n    TaskboardTasksService.prototype.getTaskModel = function(id) {\n      return _.find(this.tasksRaw, function(task) {\n        return task.id === id;\n      });\n    };\n\n    TaskboardTasksService.prototype.replaceModel = function(task) {\n      this.tasksRaw = _.map(this.tasksRaw, function(it) {\n        if (task.id === it.id) {\n          return task;\n        } else {\n          return it;\n        }\n      });\n      return this.refresh();\n    };\n\n    TaskboardTasksService.prototype.move = function(id, usId, statusId, index) {\n      var afterDestination, beforeDestination, i, it, j, key, len, len1, previous, previousWithTheSameOrder, setOrders, taksWithoutMoved, task, taskByUsStatus;\n      task = this.getTaskModel(id);\n      taskByUsStatus = _.filter(this.tasksRaw, (function(_this) {\n        return function(task) {\n          return task.status === statusId && task.user_story === usId;\n        };\n      })(this));\n      taskByUsStatus = _.sortBy(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      taksWithoutMoved = _.filter(taskByUsStatus, (function(_this) {\n        return function(it) {\n          return it.id !== id;\n        };\n      })(this));\n      beforeDestination = _.slice(taksWithoutMoved, 0, index);\n      afterDestination = _.slice(taksWithoutMoved, index);\n      setOrders = {};\n      previous = beforeDestination[beforeDestination.length - 1];\n      previousWithTheSameOrder = _.filter(beforeDestination, (function(_this) {\n        return function(it) {\n          return _this.order[it.id] === _this.order[previous.id];\n        };\n      })(this));\n      if (previousWithTheSameOrder.length > 1) {\n        for (i = 0, len = previousWithTheSameOrder.length; i < len; i++) {\n          it = previousWithTheSameOrder[i];\n          setOrders[it.id] = this.order[it.id];\n        }\n      }\n      if (!previous) {\n        this.order[task.id] = 0;\n      } else if (previous) {\n        this.order[task.id] = this.order[previous.id] + 1;\n      }\n      for (key = j = 0, len1 = afterDestination.length; j < len1; key = ++j) {\n        it = afterDestination[key];\n        this.order[it.id] = this.order[task.id] + key + 1;\n      }\n      task.status = statusId;\n      task.user_story = usId;\n      task.taskboard_order = this.order[task.id];\n      this.refresh();\n      return {\n        \"task_id\": task.id,\n        \"order\": this.order[task.id],\n        \"set_orders\": setOrders\n      };\n    };\n\n    TaskboardTasksService.prototype.refresh = function() {\n      var i, j, k, len, len1, len2, model, ref, status, task, taskModel, taskStatusList, tasks, us, usTasks;\n      if (!this.project) {\n        return;\n      }\n      this.tasksRaw = _.sortBy(this.tasksRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      tasks = this.tasksRaw;\n      taskStatusList = _.sortBy(this.project.task_statuses, \"order\");\n      usTasks = {};\n      ref = _.union(this.userstories, [\n        {\n          id: null\n        }\n      ]);\n      for (i = 0, len = ref.length; i < len; i++) {\n        us = ref[i];\n        usTasks[us.id] = {};\n        for (j = 0, len1 = taskStatusList.length; j < len1; j++) {\n          status = taskStatusList[j];\n          usTasks[us.id][status.id] = [];\n        }\n      }\n      for (k = 0, len2 = tasks.length; k < len2; k++) {\n        taskModel = tasks[k];\n        if ((usTasks[taskModel.user_story] != null) && (usTasks[taskModel.user_story][taskModel.status] != null)) {\n          task = {};\n          if (!this.tasksByUs.get(taskModel.user_story)) {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, Immutable.fromJS([taskModel.id]));\n          } else {\n            this.tasksByUs = this.tasksByUs.set(taskModel.user_story, this.tasksByUs.get(taskModel.user_story).push(taskModel.id));\n          }\n          model = taskModel.getAttrs();\n          task.foldStatusChanged = this.foldStatusChanged[taskModel.id];\n          task.model = model;\n          task.images = _.filter(model.attachments, function(it) {\n            return !!it.thumbnail_card_url;\n          });\n          task.id = taskModel.id;\n          task.assigned_to = this.usersById[taskModel.assigned_to];\n          task.colorized_tags = _.map(task.model.tags, (function(_this) {\n            return function(tag) {\n              return {\n                name: tag[0],\n                color: tag[1]\n              };\n            };\n          })(this));\n          this.taskMap = this.taskMap.set(task.id, Immutable.fromJS(task));\n          usTasks[taskModel.user_story][taskModel.status].push(task.id);\n        }\n      }\n      return this.usTasks = Immutable.fromJS(usTasks);\n    };\n\n    return TaskboardTasksService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgTaskboardTasks\", TaskboardTasksService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanUserstoriesService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  KanbanUserstoriesService = (function(superClass) {\n    extend(KanbanUserstoriesService, superClass);\n\n    KanbanUserstoriesService.$inject = [\"$translate\"];\n\n    function KanbanUserstoriesService(translate) {\n      this.translate = translate;\n      this.reset();\n    }\n\n    KanbanUserstoriesService.prototype.reset = function(resetSwimlanesList) {\n      if (resetSwimlanesList == null) {\n        resetSwimlanesList = true;\n      }\n      this.userstoriesRaw = [];\n      this.archivedStatus = [];\n      this.statusHide = [];\n      this.swimlanes = [];\n      this.foldStatusChanged = {};\n      this.usByStatus = Immutable.Map();\n      this.usMap = Immutable.Map();\n      this.usByStatusSwimlanes = Immutable.Map();\n      if (resetSwimlanesList) {\n        return this.swimlanesList = Immutable.List();\n      }\n    };\n\n    KanbanUserstoriesService.prototype.init = function(project, swimlanes, usersById) {\n      this.project = project;\n      this.swimlanes = swimlanes;\n      return this.usersById = usersById;\n    };\n\n    KanbanUserstoriesService.prototype.resetFolds = function() {\n      return this.foldStatusChanged = {};\n    };\n\n    KanbanUserstoriesService.prototype.toggleFold = function(usId) {\n      this.foldStatusChanged[usId] = !this.foldStatusChanged[usId];\n      return this.refreshUserStory(usId);\n    };\n\n    KanbanUserstoriesService.prototype.set = function(userstories) {\n      this.userstoriesRaw = userstories;\n      this.refreshRawOrder();\n      return this.refresh();\n    };\n\n    KanbanUserstoriesService.prototype.initUsByStatusList = function(userstories) {\n      var key, results, status, usModel;\n      results = [];\n      for (key in userstories) {\n        usModel = userstories[key];\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          results.push(this.usByStatus = this.usByStatus.set(status, Immutable.List()));\n        } else {\n          results.push(void 0);\n        }\n      }\n      return results;\n    };\n\n    KanbanUserstoriesService.prototype.add = function(usList) {\n      var key, status, us, usModel;\n      if (!Array.isArray(usList)) {\n        usList = [usList];\n      }\n      this.userstoriesRaw = this.userstoriesRaw.concat(usList);\n      this.userstoriesRaw = this.userstoriesRaw.map((function(_this) {\n        return function(us) {\n          return us;\n        };\n      })(this));\n      this.refreshRawOrder();\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      for (key in usList) {\n        usModel = usList[key];\n        us = this.retrieveUserStoryData(usModel);\n        status = String(usModel.status);\n        if (!this.usByStatus.has(status)) {\n          this.usByStatus = this.usByStatus.set(status, Immutable.List());\n        }\n        if (!this.usMap.get(usModel.id)) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n          this.usByStatus = this.usByStatus.set(status, this.usByStatus.get(status).push(usModel.id));\n        }\n      }\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.addArchivedStatus = function(statusId) {\n      return this.archivedStatus.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      var us;\n      us = this.getUsModel(usId);\n      return this.archivedStatus.indexOf(us != null ? us.status : void 0) !== -1 && this.statusHide.indexOf(us != null ? us.status : void 0) !== -1;\n    };\n\n    KanbanUserstoriesService.prototype.hideStatus = function(statusId) {\n      this.deleteStatus(statusId);\n      return this.statusHide.push(statusId);\n    };\n\n    KanbanUserstoriesService.prototype.showStatus = function(statusId) {\n      return _.remove(this.statusHide, function(it) {\n        return it === statusId;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.getStatus = function(statusId, swimlaneId) {\n      return _.filter(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return it.status === statusId && (!swimlaneId || it.swimlane === swimlaneId);\n        };\n      })(this));\n    };\n\n    KanbanUserstoriesService.prototype.deleteStatus = function(statusId) {\n      var toDelete;\n      toDelete = _.filter(this.userstoriesRaw, function(us) {\n        return us.status === statusId;\n      });\n      toDelete = _.map(function(it) {\n        return it.id;\n      });\n      return this.archived = _.difference(this.archived, toDelete);\n    };\n\n    KanbanUserstoriesService.prototype.refreshRawOrder = function() {\n      var i, it, len, ref, results;\n      this.order = {};\n      if (this.userstoriesRaw) {\n        ref = this.userstoriesRaw;\n        results = [];\n        for (i = 0, len = ref.length; i < len; i++) {\n          it = ref[i];\n          results.push(this.order[it.id] = it.kanban_order);\n        }\n        return results;\n      }\n    };\n\n    KanbanUserstoriesService.prototype.assignOrders = function(order) {\n      this.order = _.assign(this.order, order);\n      return this.refresh(false);\n    };\n\n    KanbanUserstoriesService.prototype.move = function(usList, statusId, swimlaneId, index, previousCard, nextCard) {\n      var afterDestination, i, initialLength, j, key, len, len1, previousUsIndex, previousUsOrder, us, usByStatus, usByStatusWithoutMoved, usId, usModel;\n      usByStatus = this.getStatus(statusId, swimlaneId);\n      usByStatus = _.sortBy(usByStatus, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      if (previousCard) {\n        previousUsOrder = this.order[previousCard] + 1;\n        previousUsIndex = (usByStatus.findIndex((function(_this) {\n          return function(it) {\n            return it.id === previousCard;\n          };\n        })(this))) + 1;\n      } else {\n        previousUsOrder = 0;\n        previousUsIndex = 0;\n      }\n      usByStatusWithoutMoved = _.filter(usByStatus, function(listIt) {\n        return !_.find(usList, function(moveIt) {\n          return listIt.id === moveIt;\n        });\n      });\n      afterDestination = _.slice(usByStatusWithoutMoved, previousUsIndex);\n      initialLength = usList.length + 1;\n      for (key = i = 0, len = afterDestination.length; i < len; key = ++i) {\n        usModel = afterDestination[key];\n        this.order[usModel.id] = previousUsOrder + initialLength + key;\n      }\n      for (key = j = 0, len1 = usList.length; j < len1; key = ++j) {\n        usId = usList[key];\n        usModel = this.getUsModel(usId);\n        usModel.status = statusId;\n        usModel.swimlane = swimlaneId;\n        this.order[usModel.id] = previousUsOrder + key;\n        us = this.retrieveUserStoryData(usModel);\n        this.usMap = this.usMap.set(us.id, Immutable.fromJS(us));\n      }\n      this.refresh(false);\n      return {\n        statusId: statusId,\n        swimlaneId: swimlaneId,\n        afterUserstoryId: previousCard,\n        beforeUserstoryId: nextCard,\n        bulkUserstories: usList\n      };\n    };\n\n    KanbanUserstoriesService.prototype.moveToEnd = function(id, statusId) {\n      var us;\n      us = this.getUsModel(id);\n      this.order[us.id] = -1;\n      us.status = statusId;\n      us.kanban_order = this.order[us.id];\n      this.refresh(false);\n      return {\n        \"us_id\": us.id,\n        \"order\": -1\n      };\n    };\n\n    KanbanUserstoriesService.prototype.replace = function(us) {\n      return this.usMap = this.usMap.set(us.get('id'), us);\n    };\n\n    KanbanUserstoriesService.prototype.replaceModel = function(usModel) {\n      var us;\n      this.userstoriesRaw = _.map(this.userstoriesRaw, function(usItem) {\n        if (usModel.id === usItem.id) {\n          return usModel;\n        } else {\n          return usItem;\n        }\n      });\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.getUs = function(id) {\n      return this.usMap.get(id);\n    };\n\n    KanbanUserstoriesService.prototype.getUsModel = function(id) {\n      return _.find(this.userstoriesRaw, function(us) {\n        return us.id === id;\n      });\n    };\n\n    KanbanUserstoriesService.prototype.refreshUserStory = function(usId) {\n      var us, usModel;\n      usModel = this.getUsModel(usId);\n      us = this.retrieveUserStoryData(usModel);\n      return this.usMap = this.usMap.set(usId, Immutable.fromJS(us));\n    };\n\n    KanbanUserstoriesService.prototype.retrieveUserStoryData = function(usModel) {\n      var model, us;\n      us = {};\n      model = usModel.getAttrs();\n      us.foldStatusChanged = this.foldStatusChanged[usModel.id];\n      us.model = model;\n      us.images = _.filter(model.attachments, function(it) {\n        return !!it.thumbnail_card_url;\n      });\n      us.id = usModel.id;\n      us.swimlane = usModel.swimlane;\n      us.assigned_to = this.usersById[usModel.assigned_to];\n      us.assigned_users = [];\n      usModel.assigned_users.forEach((function(_this) {\n        return function(assignedUserId) {\n          var assignedUserData;\n          assignedUserData = _this.usersById[assignedUserId];\n          if (assignedUserData) {\n            return us.assigned_users.push(assignedUserData);\n          }\n        };\n      })(this));\n      us.assigned_users_preview = us.assigned_users.slice(0, 3);\n      us.colorized_tags = _.map(us.model.tags, (function(_this) {\n        return function(tag) {\n          return {\n            name: tag[0],\n            color: tag[1]\n          };\n        };\n      })(this));\n      return us;\n    };\n\n    KanbanUserstoriesService.prototype.refresh = function(refreshUsMap) {\n      var collection, key, ref, us, usModel;\n      if (refreshUsMap == null) {\n        refreshUsMap = true;\n      }\n      this.userstoriesRaw = _.sortBy(this.userstoriesRaw, (function(_this) {\n        return function(it) {\n          return _this.order[it.id];\n        };\n      })(this));\n      collection = {};\n      ref = this.userstoriesRaw;\n      for (key in ref) {\n        usModel = ref[key];\n        us = this.retrieveUserStoryData(usModel);\n        if (!collection[usModel.status]) {\n          collection[usModel.status] = [];\n        }\n        collection[usModel.status].push(usModel.id);\n        if (refreshUsMap) {\n          this.usMap = this.usMap.set(usModel.id, Immutable.fromJS(us));\n        }\n      }\n      this.usByStatus = Immutable.fromJS(collection);\n      return this.refreshSwimlanes();\n    };\n\n    KanbanUserstoriesService.prototype.refreshSwimlanes = function() {\n      var emptySwimlane, emptySwimlaneExists, userstoriesNoSwimlane;\n      if (!this.swimlanes || !this.swimlanes.length) {\n        return;\n      }\n      this.swimlanesList = Immutable.List();\n      this.usByStatusSwimlanes = Immutable.Map();\n      userstoriesNoSwimlane = this.userstoriesRaw.filter((function(_this) {\n        return function(us) {\n          return us.swimlane === null;\n        };\n      })(this));\n      emptySwimlaneExists = this.swimlanesList.filter((function(_this) {\n        return function(swimlane) {\n          return swimlane.id === null;\n        };\n      })(this));\n      if (userstoriesNoSwimlane.length && !emptySwimlaneExists.size) {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n        emptySwimlane = {\n          id: -1,\n          kanban_order: 1,\n          name: this.translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n        };\n        this.swimlanesList = this.swimlanesList.insert(0, emptySwimlane);\n      } else {\n        this.swimlanes.forEach((function(_this) {\n          return function(swimlane) {\n            if (!_this.swimlanesList.includes(swimlane)) {\n              return _this.swimlanesList = _this.swimlanesList.push(swimlane);\n            }\n          };\n        })(this));\n      }\n      return this.swimlanesList.forEach((function(_this) {\n        return function(swimlane) {\n          var swimlaneUsByStatus;\n          swimlaneUsByStatus = Immutable.Map();\n          _this.usByStatus.forEach(function(usList, statusId) {\n            var usListSwimlanes;\n            usListSwimlanes = usList.filter(function(usId) {\n              var swimlaneId, us;\n              us = _this.usMap.get(usId);\n              swimlaneId = swimlane.id === -1 ? null : swimlane.id;\n              return us.getIn(['model', 'swimlane']) === swimlaneId;\n            });\n            return swimlaneUsByStatus = swimlaneUsByStatus.set(Number(statusId), usListSwimlanes);\n          });\n          return _this.usByStatusSwimlanes = _this.usByStatusSwimlanes.set(swimlane.id, swimlaneUsByStatus);\n        };\n      })(this));\n    };\n\n    return KanbanUserstoriesService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaKanban\").service(\"tgKanbanUserstories\", KanbanUserstoriesService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardAssignedToDirective, CardDataDirective, CardSvgTemplate, KanbanArchivedShowStatusHeaderDirective, KanbanArchivedStatusIntroDirective, KanbanController, KanbanDirective, KanbanSquishColumnDirective, KanbanSwimlaneDirective, KanbanTaskboardColumnDirective, KanbanWipLimitDirective, bindMethods, bindOnce, debounceLeading, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanController = (function(superClass) {\n    extend(KanbanController, superClass);\n\n    KanbanController.prototype.excludeFilters = [\"status\"];\n\n    KanbanController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgModel\", \"tgKanbanUserstories\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgLightboxFactory\", \"tgLoader\", \"$timeout\"];\n\n    KanbanController.prototype.storeCustomFiltersName = 'kanban-custom-filters';\n\n    KanbanController.prototype.storeFiltersName = 'kanban-filters';\n\n    KanbanController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_assigned_users', 'assigned_users', 'exclude_role', 'role', 'exclude_epic', 'epic', 'exclude_owner', 'owner'];\n\n    function KanbanController(scope, rootscope, repo, confirm, rs1, rs2, params1, q, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, model, kanbanUserstoriesService1, storage, filterRemoteStorageService, projectService1, lightboxFactory, tgLoader, timeout1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs1;\n      this.rs2 = rs2;\n      this.params = params1;\n      this.q = q;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.model = model;\n      this.kanbanUserstoriesService = kanbanUserstoriesService1;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService1;\n      this.lightboxFactory = lightboxFactory;\n      this.tgLoader = tgLoader;\n      this.timeout = timeout1;\n      this.renderUserStories = bind(this.renderUserStories, this);\n      this.changeUsAssignedUsers = bind(this.changeUsAssignedUsers, this);\n      bindMethods(this);\n      this.kanbanUserstoriesService.reset();\n      this.openFilter = false;\n      this.selectedUss = {};\n      this.foldedSwimlane = Immutable.Map();\n      this.isFirstLoad = true;\n      this.renderBatching = true;\n      this.isLightboxOpened = false;\n      this.isRefreshNeeded = false;\n      if (this.applyStoredFilters(this.params.pslug, \"kanban-filters\", this.validQueryParams)) {\n        return;\n      }\n      this.scope.sectionName = this.translate.instant(\"KANBAN.SECTION_NAME\");\n      this.initializeEventHandlers();\n      taiga.defineImmutableProperty(this.scope, \"usByStatus\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatus;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usMap\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usMap;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"usByStatusSwimlanes\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.usByStatusSwimlanes;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this.scope, \"swimlanesList\", (function(_this) {\n        return function() {\n          return _this.kanbanUserstoriesService.swimlanesList;\n        };\n      })(this));\n    }\n\n    KanbanController.prototype.cleanSelectedUss = function() {\n      var key, results;\n      results = [];\n      for (key in this.selectedUss) {\n        results.push(this.selectedUss[key] = false);\n      }\n      return results;\n    };\n\n    KanbanController.prototype.toggleSelectedUs = function(usId) {\n      return this.selectedUss[usId] = !this.selectedUss[usId];\n    };\n\n    KanbanController.prototype.firstLoad = function() {\n      var promise;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"KANBAN.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"KANBAN.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      return promise.then(null, this.onInitialDataError.bind(this));\n    };\n\n    KanbanController.prototype.setZoom = function(zoomLevel, zoom) {\n      var previousZoomLevel;\n      zoomLevel = Number(zoomLevel);\n      if (this.zoomLevel === zoomLevel) {\n        return null;\n      }\n      previousZoomLevel = this.zoomLevel;\n      this.zoomLevel = zoomLevel;\n      this.zoom = zoom;\n      if (this.isFirstLoad) {\n        return this.firstLoad().then((function(_this) {\n          return function() {\n            _this.isFirstLoad = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      } else if (this.zoomLevel > 2 && previousZoomLevel <= 2) {\n        this.zoomLoading = true;\n        return this.loadUserstories().then((function(_this) {\n          return function() {\n            _this.zoomLoading = false;\n            return _this.kanbanUserstoriesService.resetFolds();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.filtersReloadContent = debounceLeading(100, function() {\n      return this.loadUserstories().then((function(_this) {\n        return function(result) {\n          var i, len, openArchived, results, statusId;\n          if (!result) {\n            return;\n          }\n          if (_this.scope.swimlanesList.size && !result.length) {\n            _this.foldedSwimlane = _this.foldedSwimlane.set(_this.scope.swimlanesList.first().id.toString(), false);\n          }\n          openArchived = _.difference(_this.kanbanUserstoriesService.archivedStatus, _this.kanbanUserstoriesService.statusHide);\n          if (openArchived.length) {\n            results = [];\n            for (i = 0, len = openArchived.length; i < len; i++) {\n              statusId = openArchived[i];\n              results.push(_this.loadUserStoriesForStatus({}, statusId));\n            }\n            return results;\n          }\n        };\n      })(this));\n    });\n\n    KanbanController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"usform:new:success\", (function(_this) {\n        return function(event, us) {\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(us);\n            return _this.scope.$broadcast(\"redraw:wip\");\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:bulk:success\", (function(_this) {\n        return function(event, uss) {\n          _this.confirm.notify(\"success\");\n          _this.refreshTagsColors().then(function() {\n            _this.kanbanUserstoriesService.add(uss);\n            return _this.scope.$broadcast(\"redraw:wip\");\n          });\n          return _this.analytics.trackEvent(\"userstory\", \"create\", \"bulk create userstory on kanban\", 1);\n        };\n      })(this));\n      this.scope.$on(\"usform:edit:success\", (function(_this) {\n        return function(event, us) {\n          return _this.refreshTagsColors().then(function() {\n            var lastUsId, newOrder, oldStatus, status;\n            oldStatus = _this.kanbanUserstoriesService.getUsModel(us.id).status;\n            if (oldStatus !== us.status) {\n              status = _this.scope.usByStatus.get(us.status.toString());\n              if (status) {\n                lastUsId = status.last();\n                newOrder = _this.scope.usMap.get(lastUsId).getIn(['model', 'kanban_order']) + 1;\n                us.kanban_order = newOrder;\n              }\n            }\n            _this.kanbanUserstoriesService.replaceModel(us);\n            _this.kanbanUserstoriesService.refreshRawOrder();\n            return _this.kanbanUserstoriesService.refresh(false);\n          });\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:deleted\", (function(_this) {\n        return function(event, us) {\n          _this.filtersReloadContent();\n          return _this.kanbanUserstoriesService.refreshSwimlanes();\n        };\n      })(this));\n      this.scope.$on(\"kanban:us:move\", this.moveUs);\n      this.scope.$on(\"kanban:show-userstories-for-status\", this.loadUserStoriesForStatus);\n      this.scope.$on(\"kanban:hide-userstories-for-status\", this.hideUserStoriesForStatus);\n      this.scope.$on(\"lightbox:opened\", (function(_this) {\n        return function() {\n          return _this.isLightboxOpened = true;\n        };\n      })(this));\n      return this.scope.$on(\"lightbox:closed\", (function(_this) {\n        return function() {\n          _this.isLightboxOpened = false;\n          if (_this.isRefreshNeeded) {\n            _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            return _this.isRefreshNeeded = false;\n          }\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged = function() {\n      this.tgLoader.start();\n      return this.projectService.fetchProject().then((function(_this) {\n        return function() {\n          return _this.loadInitialData();\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.initializeSubscription = function() {\n      var randomTimeout, routingKeyProject, routingKeyUserstories;\n      randomTimeout = taiga.randomInt(700, 1000);\n      routingKeyUserstories = \"changes.project.\" + this.scope.projectId + \".userstories\";\n      this.events.subscribe(this.scope, routingKeyUserstories, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          return _this.loadUserstories();\n        };\n      })(this)));\n      routingKeyProject = \"changes.project.\" + this.scope.projectId + \".projects\";\n      return this.events.subscribe(this.scope, routingKeyProject, debounceLeading(randomTimeout, (function(_this) {\n        return function(message) {\n          var ref;\n          if ((ref = message.matches) === \"projects.swimlane\" || ref === \"projects.swimlaneuserstorystatus\" || ref === \"projects.userstorystatus\") {\n            if (_this.isLightboxOpened) {\n              return _this.isRefreshNeeded = true;\n            } else {\n              return _this.refreshAfterSwimlanesOrUserstoryStatusesHaveChanged();\n            }\n          }\n        };\n      })(this)));\n    };\n\n    KanbanController.prototype.addNewUs = function(type, statusId) {\n      var swimlane;\n      swimlane = null;\n      switch (type) {\n        case \"standard\":\n          return this.rootscope.$broadcast(\"genericform:new\", {\n            'objType': 'us',\n            'project': this.scope.project,\n            'statusId': statusId,\n            'swimlane': swimlane\n          });\n        case \"bulk\":\n          return this.rootscope.$broadcast(\"usform:bulk\", this.scope.projectId, statusId, swimlane);\n      }\n    };\n\n    KanbanController.prototype.editUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-edit', true);\n      this.kanbanUserstoriesService.replace(us);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(editingUserStory) {\n          _this.rs2.attachments.list(\"us\", us.get('id'), us.getIn(['model', 'project'])).then(function(attachments) {\n            return _this.rootscope.$broadcast(\"genericform:edit\", {\n              'objType': 'us',\n              'obj': editingUserStory,\n              'statusList': _this.scope.usStatusList,\n              'attachments': attachments.toJS()\n            });\n          });\n          us = us.set('loading-edit', false);\n          return _this.kanbanUserstoriesService.replace(us);\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.deleteUs = function(id) {\n      var us;\n      us = this.kanbanUserstoriesService.getUs(id);\n      us = us.set('loading-delete', true);\n      return this.rs.userstories.getByRef(us.getIn(['model', 'project']), us.getIn(['model', 'ref'])).then((function(_this) {\n        return function(deletingUserStory) {\n          var message, title;\n          us = us.set('loading-delete', false);\n          title = _this.translate.instant(\"US.TITLE_DELETE_ACTION\");\n          message = deletingUserStory.subject;\n          return _this.confirm.askOnDelete(title, message).then(function(askResponse) {\n            var promise;\n            promise = _this.repo.remove(deletingUserStory);\n            promise.then(function() {\n              _this.scope.$broadcast(\"kanban:us:deleted\");\n              return askResponse.finish();\n            });\n            return promise.then(null, function() {\n              askResponse.finish(false);\n              return this.confirm.notify(\"error\");\n            });\n          });\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.showPlaceHolder = function(statusId, swimlaneId) {\n      var firstStatus, firstSwimlane;\n      firstStatus = this.scope.usStatusList[0].id === statusId && !this.kanbanUserstoriesService.userstoriesRaw.length;\n      if (swimlaneId) {\n        firstSwimlane = this.scope.swimlanesList.first().id === swimlaneId;\n        return firstStatus && firstSwimlane;\n      }\n      return firstStatus;\n    };\n\n    KanbanController.prototype.toggleFold = function(id) {\n      return this.kanbanUserstoriesService.toggleFold(id);\n    };\n\n    KanbanController.prototype.toggleSwimlane = function(id) {\n      this.foldedSwimlane = this.foldedSwimlane.set(id.toString(), !this.foldedSwimlane.get(id.toString()));\n      this.rs.kanban.storeSwimlanesModes(this.scope.projectId, this.foldedSwimlane.toJS());\n      return this.timeout((function(_this) {\n        return function() {\n          return _this.scope.$broadcast(\"redraw:wip\");\n        };\n      })(this), 100, false);\n    };\n\n    KanbanController.prototype.isUsInArchivedHiddenStatus = function(usId) {\n      return this.kanbanUserstoriesService.isUsInArchivedHiddenStatus(usId);\n    };\n\n    KanbanController.prototype.changeUsAssignedUsers = function(id) {\n      var item, onClose;\n      item = this.kanbanUserstoriesService.getUsModel(id);\n      onClose = (function(_this) {\n        return function(assignedUsersIds) {\n          var ref;\n          item.assigned_users = assignedUsersIds;\n          if ((ref = item.assigned_to, indexOf.call(assignedUsersIds, ref) < 0) && assignedUsersIds.length > 0) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          if (assignedUsersIds.length === 0) {\n            item.assigned_to = null;\n          }\n          _this.kanbanUserstoriesService.replaceModel(item);\n          return _this.repo.save(item).then(function() {\n            _this.generateFilters();\n            if (_this.isFilterDataTypeSelected('assigned_users') || _this.isFilterDataTypeSelected('role')) {\n              return _this.filtersReloadContent();\n            }\n          });\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": _.compact(_.union(item.assigned_users, [item.assigned_to])),\n        \"activeUsers\": this.scope.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n      });\n    };\n\n    KanbanController.prototype.refreshTagsColors = function() {\n      return this.rs.projects.tagsColors(this.scope.projectId).then((function(_this) {\n        return function(tags_colors) {\n          return _this.scope.project.tags_colors = tags_colors._attrs;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.renderBatch = function(clean) {\n      var newUs;\n      if (clean == null) {\n        clean = false;\n      }\n      newUs = _.take(this.queue, this.batchSize);\n      this.rendered = _.concat(this.rendered, newUs);\n      this.queue = _.drop(this.queue, this.batchSize);\n      if (clean) {\n        this.kanbanUserstoriesService.set(newUs);\n        this.batchTimings = [200, 100, 50];\n      } else {\n        this.kanbanUserstoriesService.add(newUs);\n      }\n      if (this.queue.length > 0) {\n        timeout = this.batchTimings.shift() || 0;\n        return this.timeout(this.renderBatch, timeout);\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            _this.rootscope.$broadcast(\"kanban:userstories:loaded\", _this.rendered);\n            _this.scope.$broadcast(\"userstories:loaded\", _this.rendered);\n            return _this.timeout(function() {\n              return _this.scope.$broadcast(\"redraw:wip\");\n            }, 100, false);\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.renderUserStories = function(userstories) {\n      var userstoriesMap;\n      userstories = _.sortBy(userstories, 'kanban_order');\n      this.kanbanUserstoriesService.initUsByStatusList(userstories);\n      if (this.renderBatching) {\n        userstoriesMap = _.groupBy(userstories, 'status');\n        this.rendered = [];\n        this.queue = [];\n        this.batchSize = 0;\n        while (this.queue.length < userstories.length) {\n          _.each(this.scope.project.us_statuses, (function(_this) {\n            return function(x) {\n              var ref;\n              if (((ref = userstoriesMap[x.id]) != null ? ref.length : void 0) > 0) {\n                _this.queue = _.concat(_this.queue, _.take(userstoriesMap[x.id], 10));\n                return userstoriesMap[x.id] = _.drop(userstoriesMap[x.id], 10);\n              }\n            };\n          })(this));\n          if (!this.batchSize) {\n            this.batchSize = this.queue.length;\n          }\n        }\n        return this.renderBatch(true);\n      } else {\n        return this.kanbanUserstoriesService.set(userstories);\n      }\n    };\n\n    KanbanController.prototype.loadUserstories = function() {\n      var lastSearch, locationParams, params, promise;\n      params = {\n        status__is_archived: false\n      };\n      if (this.zoomLevel >= 2) {\n        params.include_attachments = 1;\n        params.include_tasks = 1;\n      }\n      locationParams = _.pick(_.clone(this.location.search()), this.validQueryParams);\n      params = _.merge(params, locationParams);\n      params.q = this.filterQ;\n      this.lastSearch = this.filterQ;\n      lastSearch = this.filterQ;\n      promise = this.q.all([this.rs.userstories.listAll(this.scope.projectId, params), this.loadSwimlanes()]).then((function(_this) {\n        return function(result) {\n          var swimlanes, userstories;\n          if (lastSearch !== _this.lastSearch) {\n            return;\n          }\n          _this.kanbanUserstoriesService.reset(false);\n          userstories = result[0];\n          swimlanes = result[1];\n          _this.notFoundUserstories = false;\n          if (!userstories.length && ((_this.filterQ && _this.filterQ.length) || Object.keys(_this.location.search()).length)) {\n            _this.notFoundUserstories = true;\n          }\n          _this.kanbanUserstoriesService.init(_this.scope.project, swimlanes, _this.scope.usersById);\n          _this.tgLoader.pageLoaded();\n          _this.renderUserStories(userstories);\n          return userstories;\n        };\n      })(this));\n      return promise;\n    };\n\n    KanbanController.prototype.loadUserStoriesForStatus = function(ctx, statusId) {\n      var filteredStatus, params;\n      filteredStatus = this.location.search().status;\n      if (filteredStatus) {\n        filteredStatus = filteredStatus.split(\",\").map(function(it) {\n          return parseInt(it, 10);\n        });\n        if (filteredStatus.indexOf(statusId) === -1) {\n          return;\n        }\n      }\n      params = {\n        status: statusId,\n        include_attachments: true,\n        include_tasks: true\n      };\n      if (this.filterQ) {\n        params.q = this.filterQ;\n      }\n      params = _.merge(params, this.location.search());\n      return this.rs.userstories.listAll(this.scope.projectId, params).then((function(_this) {\n        return function(userstories) {\n          _this.waitEmptyQuote(function() {\n            return _this.scope.$broadcast(\"kanban:shown-userstories-for-status\", statusId, userstories);\n          });\n          return userstories;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.waitEmptyQuote = function(cb) {\n      if (this.queue.length > 0) {\n        return requestAnimationFrame((function(_this) {\n          return function() {\n            return _this.waitEmptyQuote(cb);\n          };\n        })(this));\n      } else {\n        return scopeDefer(this.scope, (function(_this) {\n          return function() {\n            return cb();\n          };\n        })(this));\n      }\n    };\n\n    KanbanController.prototype.hideUserStoriesForStatus = function(ctx, statusId) {\n      return this.scope.$broadcast(\"kanban:hidden-userstories-for-status\", statusId);\n    };\n\n    KanbanController.prototype.loadKanban = function() {\n      return this.q.all([this.refreshTagsColors(), this.loadUserstories()]);\n    };\n\n    KanbanController.prototype.loadSwimlanes = function() {\n      return this.rs.swimlanes.list(this.scope.projectId).then((function(_this) {\n        return function(swimlanes) {\n          _this.scope.swimlanes = swimlanes;\n          _this.scope.swimlanesStatuses = {};\n          _this.scope.swimlanes.forEach(function(swimlane) {\n            return _this.scope.swimlanesStatuses[swimlane.id] = swimlane.statuses;\n          });\n          _this.scope.swimlanesStatuses[-1] = _this.scope.project.us_statuses;\n          return _this.scope.swimlanes;\n        };\n      })(this));\n    };\n\n    KanbanController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_kanban_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.projectId = project.id;\n      this.scope.points = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(project.points, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.usCardVisibility = {};\n      this.scope.$emit(\"project:loaded\", project);\n      return project;\n    };\n\n    KanbanController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.foldedSwimlane = Immutable.fromJS(this.rs.kanban.getSwimlanesModes(project.id));\n      this.initialLoad = false;\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.loadKanban().then((function(_this) {\n        return function() {\n          return _this.timeout(function() {\n            return _this.initialLoad = true;\n          }, 0, true);\n        };\n      })(this));\n      return this.generateFilters();\n    };\n\n    KanbanController.prototype.moveUs = function(ctx, usList, newStatusId, newSwimlaneId, index, previousCard, nextCard) {\n      var apiNewSwimlaneId, data, promise;\n      this.cleanSelectedUss();\n      usList = _.map(usList, (function(_this) {\n        return function(us) {\n          return _this.kanbanUserstoriesService.getUsModel(us.id);\n        };\n      })(this));\n      this.rootscope.$broadcast(\"kanban:userstories:loaded\", usList, newStatusId, newSwimlaneId, index);\n      apiNewSwimlaneId = newSwimlaneId;\n      if (newSwimlaneId === -1) {\n        apiNewSwimlaneId = null;\n      }\n      data = this.kanbanUserstoriesService.move(usList.map((function(_this) {\n        return function(it) {\n          return it.id;\n        };\n      })(this)), newStatusId, apiNewSwimlaneId, index, previousCard, nextCard);\n      promise = this.rs.userstories.bulkUpdateKanbanOrder(this.scope.projectId, newStatusId, apiNewSwimlaneId, data.afterUserstoryId, data.beforeUserstoryId, data.bulkUserstories);\n      return promise.then((function(_this) {\n        return function() {\n          _this.scope.$broadcast(\"redraw:wip\");\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status')) {\n            return _this.filtersReloadContent();\n          }\n        };\n      })(this));\n    };\n\n    return KanbanController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin, taiga.UsFiltersMixin));\n\n  module.controller(\"KanbanController\", KanbanController);\n\n  KanbanDirective = function($repo, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var _tableBody, board, watchKanbanSize;\n      watchKanbanSize = (function(_this) {\n        return function() {\n          var columnMargin, columns, kanbanStyles, resizeCb, resizeObserver;\n          columns = $el.find(\".task-colum-name\");\n          kanbanStyles = getComputedStyle($el[0]);\n          columnMargin = Number(kanbanStyles.getPropertyValue('--kanban-column-margin').trim().replace('px', '').split(' ')[1]);\n          resizeCb = function(entries) {\n            var width;\n            width = columns.toArray().reduce(function(acc, column) {\n              if (document.body.contains(column)) {\n                return acc + column.offsetWidth + columnMargin;\n              }\n              resizeObserver.unobserve(column);\n              return acc;\n            }, 0);\n            if (width > 0) {\n              return document.body.style.setProperty('--kanban-width', (width - columnMargin) + 'px');\n            }\n          };\n          resizeObserver = new ResizeObserver(resizeCb);\n          return columns.each(function(index, column) {\n            return resizeObserver.observe(column);\n          });\n        };\n      })(this);\n      board = initBoard();\n      board.events((function(_this) {\n        return function(event, entries) {\n          var visibleEntries;\n          if (event === 'SHOW_CARD') {\n            visibleEntries = entries.filter(function(entry) {\n              return entry.visible && !$scope.usCardVisibility[entry.id];\n            });\n            if (visibleEntries.length) {\n              $scope.$evalAsync(function() {\n                return visibleEntries.forEach(function(entry) {\n                  return $scope.usCardVisibility[entry.id] = true;\n                });\n              });\n            }\n          }\n        };\n      })(this));\n      $scope.taskColumnLoaded = function(event, status, swimlane) {\n        var column;\n        column = event.target[0];\n        return board.addSwimlane(column, status, swimlane);\n      };\n      $scope.cardLoaded = function(event, status, swimlane) {\n        return board.addCard(event.target[0], status, swimlane);\n      };\n      _tableBody = null;\n      $scope.isTableLoaded = false;\n      $scope.kanbanTableLoaded = function(event, swimlaneId) {\n        var tableBody, tableHeaderDom;\n        $scope.$evalAsync((function(_this) {\n          return function() {\n            if (swimlaneId) {\n              $scope.openSwimlane(swimlaneId);\n            }\n            return $scope.isTableLoaded = true;\n          };\n        })(this));\n        tableBody = event.target;\n        _tableBody = tableBody;\n        tableHeaderDom = $el.find(\".kanban-table-header .kanban-table-inner\");\n        tableBody.on(\"scroll\", function(event) {\n          var scroll;\n          scroll = -1 * event.currentTarget.scrollLeft;\n          return tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        });\n        watchKanbanSize();\n      };\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (_tableBody) {\n          return _tableBody.off();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanban\", [\"$tgRepo\", \"$rootScope\", KanbanDirective]);\n\n  KanbanArchivedShowStatusHeaderDirective = function($rootscope, $translate, kanbanUserstoriesService) {\n    var link, showArchivedText;\n    showArchivedText = $translate.instant(\"KANBAN.ACTION_SHOW_ARCHIVED\");\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch('ctrl.initialLoad', (function(_this) {\n        return function(initialLoad) {\n          var show, status;\n          if (!initialLoad) {\n            return;\n          }\n          unwatch();\n          status = $scope.$eval($attrs.tgKanbanArchivedShowStatusHeader);\n          show = false;\n          kanbanUserstoriesService.addArchivedStatus(status.id);\n          kanbanUserstoriesService.hideStatus(status.id);\n          return $el.on(\"click\", function(event) {\n            return $scope.$apply(function() {\n              if (!show) {\n                $rootscope.$broadcast(\"kanban:show-userstories-for-status\", status.id);\n                kanbanUserstoriesService.showStatus(status.id);\n                return show = true;\n              }\n            });\n          });\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedShowStatusHeader\", [\"$rootScope\", \"$translate\", \"tgKanbanUserstories\", KanbanArchivedShowStatusHeaderDirective]);\n\n  KanbanArchivedStatusIntroDirective = function($translate, kanbanUserstoriesService) {\n    var link, userStories;\n    userStories = [];\n    link = function($scope, $el, $attrs) {\n      var status;\n      status = $scope.$eval($attrs.tgKanbanArchivedStatusIntro);\n      $scope.$on(\"kanban:shown-userstories-for-status\", function(ctx, statusId, userStoriesLoaded) {\n        if (statusId === status.id) {\n          kanbanUserstoriesService.deleteStatus(statusId);\n          return kanbanUserstoriesService.add(userStoriesLoaded);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanArchivedStatusIntro\", [\"$translate\", \"tgKanbanUserstories\", KanbanArchivedStatusIntroDirective]);\n\n  KanbanSquishColumnDirective = function(rs, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      $scope.foldStatus = function(status) {\n        if (!$scope.folds) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n        }\n        $scope.unfold = null;\n        $scope.folds[status.id] = !!!$scope.folds[status.id];\n        if (!$scope.folds[status.id]) {\n          $scope.unfold = status.id;\n        }\n        rs.kanban.storeStatusColumnModes($scope.projectId, $scope.folds);\n      };\n      return unwatch = $scope.$watch('ctrl.initialLoad', function(load) {\n        var archivedFolds, i, len, ref, status;\n        if (load && ((ref = $scope.usByStatus) != null ? ref.size : void 0)) {\n          $scope.folds = rs.kanban.getStatusColumnModes(projectService.project.get('id'));\n          archivedFolds = $scope.usStatusList.filter(function(status) {\n            return status.is_archived;\n          });\n          for (i = 0, len = archivedFolds.length; i < len; i++) {\n            status = archivedFolds[i];\n            $scope.folds[status.id] = true;\n          }\n          return unwatch();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSquishColumn\", [\"$tgResources\", \"tgProjectService\", KanbanSquishColumnDirective]);\n\n  KanbanWipLimitDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var redrawWipLimit, status;\n      status = $scope.$eval($attrs.tgKanbanWipLimit);\n      redrawWipLimit = (function(_this) {\n        return function() {\n          return $timeout(function() {\n            var cards, element, wipLimitClass;\n            cards = $el.find(\"tg-card\");\n            wipLimitClass = '';\n            element = null;\n            if (cards.length + 1 === status.wip_limit) {\n              wipLimitClass = 'one-left';\n              element = cards[cards.length - 1];\n            } else if (cards.length === status.wip_limit) {\n              wipLimitClass = 'reached';\n              element = cards[cards.length - 1];\n            } else if (cards.length > status.wip_limit) {\n              wipLimitClass = 'exceeded';\n              element = cards[status.wip_limit - 1];\n            }\n            $el.find(\".kanban-wip-limit\").remove();\n            if (element) {\n              return angular.element(element).after(\"<div class='kanban-wip-limit \" + wipLimitClass + \"'><span>WIP Limit</span></div>\");\n            }\n          }, 0, false);\n        };\n      })(this);\n      if (status && !status.is_archived) {\n        $scope.$on(\"redraw:wip\", redrawWipLimit);\n        $scope.$on(\"kanban:us:move\", redrawWipLimit);\n        $scope.$on(\"usform:new:success\", redrawWipLimit);\n        $scope.$on(\"usform:bulk:success\", redrawWipLimit);\n      }\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanWipLimit\", [\"$timeout\", KanbanWipLimitDirective]);\n\n  CardSvgTemplate = \"<tg-svg>\\n    <svg class=\\\"icon <%- svgIcon %>\\\" style=\\\"fill: <%- svgFill %>\\\">\\n        <use xlink:href=\\\"#<%- svgIcon %>\\\" attr-href=\\\"#<%- svgIcon %>\\\">\\n            <% if(svgTitle) { %>\\n            <title><%- svgTitle %></title>\\n            <% } %>\\n        </use>\\n    </svg>\\n</tg-svg>\";\n\n  CardAssignedToDirective = function($template, $translate, avatarService, projectService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-assigned-to.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || [vm.item.get('assigned_to')]).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          checkPermission: function(permission) {\n            return projectService.project.get('my_permissions').indexOf(permission) > -1;\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          },\n          loading: \"<img\\n    class='loading-spinner'\\n    src='/\" + window._version + \"/svg/spinner-circle.svg'\\n    alt='loading...'\\n/>\"\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            $el.html(html);\n            $el.find('.card-assigned-to-action').on('click', function(event) {\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickAssignedTo({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n            $el.find('.js-card-edit-content').on('click', function(event) {\n              event.preventDefault();\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickEdit({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n            $el.find('.js-card-remove').on('click', function(event) {\n              event.preventDefault();\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickRemove({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n            return $el.find('.js-card-delete').on('click', function(event) {\n              event.preventDefault();\n              if (!event.ctrlKey && !event.metaKey) {\n                return $scope.vm.onClickDelete({\n                  id: $scope.vm.item.get('id')\n                });\n              }\n            });\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardAssignedTo\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", CardAssignedToDirective]);\n\n  CardDataDirective = function($template, $translate, avatarService, projectService, dueDateService) {\n    var render, svgTemplate, template;\n    template = $template.get(\"components/card/card-templates/card-data.html\", true);\n    svgTemplate = _.template(CardSvgTemplate);\n    render = (function(_this) {\n      return function(vm) {\n        var avatars;\n        avatars = {};\n        (vm.item.get('assigned_users') || []).forEach(function(user) {\n          if (user) {\n            return avatars[user.get('id')] = avatarService.getAvatar(user, 'avatar');\n          } else {\n            return console.error('invalid assigned_users', vm.item.get('assigned_users').toJS());\n          }\n        });\n        return template({\n          vm: vm,\n          avatars: avatars,\n          emptyTask: function() {\n            var tasks;\n            tasks = vm.item.getIn(['model', 'tasks']);\n            return !tasks || !tasks.size;\n          },\n          dueDateColor: function() {\n            return dueDateService.color({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          dueDateTitle: function() {\n            return dueDateService.title({\n              dueDate: vm.item.getIn(['model', 'due_date']),\n              isClosed: vm.item.getIn(['model', 'is_closed']),\n              objType: vm.type\n            });\n          },\n          totalAttachments: function() {\n            if (vm.type === 'task') {\n              return vm.item.getIn(['model', 'attachments']).size;\n            } else {\n              return vm.item.getIn(['model', 'total_attachments']);\n            }\n          },\n          translate: function(key, params) {\n            return $translate.instant(key, params);\n          },\n          svg: function(svgData) {\n            return svgTemplate(Object.assign({\n              svgTitle: '',\n              svgFill: ''\n            }, svgData));\n          }\n        });\n      };\n    })(this);\n    return {\n      scope: {\n        zoomLevel: '<',\n        item: '<',\n        vm: '<'\n      },\n      link: function($scope, $el) {\n        var initializeZoom, onChange;\n        initializeZoom = false;\n        onChange = (function(_this) {\n          return function() {\n            var html;\n            html = render($scope.vm);\n            $el.off();\n            return $el.html(html);\n          };\n        })(this);\n        $scope.$watch('item', onChange);\n        $scope.$watch('zoomLevel', (function(_this) {\n          return function() {\n            if (initializeZoom) {\n              return onChange();\n            } else {\n              return initializeZoom = true;\n            }\n          };\n        })(this));\n        return $scope.$on(\"$destroy\", function() {\n          return $el.off();\n        });\n      }\n    };\n  };\n\n  module.directive(\"tgCardData\", [\"$tgTemplate\", \"$translate\", \"tgAvatarService\", \"tgProjectService\", \"tgDueDateService\", CardDataDirective]);\n\n  KanbanSwimlaneDirective = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addSwimlane, className, ctrl, currentSwimlane, tableHeaderDom;\n      tableHeaderDom = [];\n      addSwimlane = null;\n      ctrl = $scope.$parent.ctrl;\n      if (!ctrl) {\n        throw new Error('KanbanSwimlaneDirective ctrl not found');\n      }\n      $el.on(\"scroll\", function(event) {\n        var scroll;\n        if (!tableHeaderDom.length) {\n          tableHeaderDom = $el.find(\".kanban-swimlane-title\");\n        }\n        if (!addSwimlane) {\n          addSwimlane = $el.find(\".kanban-swimlane-add\");\n        }\n        scroll = event.currentTarget.scrollLeft;\n        tableHeaderDom.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n        return addSwimlane.css(\"transform\", \"translateX(\" + scroll + \"px)\");\n      });\n      currentSwimlane = null;\n      className = 'pending-to-open';\n      $scope.mouseleaveSwimlane = (function(_this) {\n        return function(event) {\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n            return currentSwimlane = null;\n          }\n        };\n      })(this);\n      $scope.mouseoverSwimlane = (function(_this) {\n        return function(event, swimlaneId) {\n          var isDragging, swimlane, timeoutId;\n          if (currentSwimlane && currentSwimlane.id === swimlaneId) {\n            return;\n          }\n          if (currentSwimlane) {\n            $timeout.cancel(currentSwimlane.timeoutId);\n            currentSwimlane.el.classList.remove(className);\n          }\n          swimlane = event.currentTarget;\n          if (swimlane.classList.contains('folded')) {\n            isDragging = !!document.querySelectorAll('tg-card.gu-mirror').length;\n            if (!isDragging) {\n              return;\n            }\n            swimlane.classList.add(className);\n            timeoutId = $timeout(function() {\n              swimlane.classList.remove(className);\n              return ctrl.toggleSwimlane(swimlaneId);\n            }, 1000);\n            return currentSwimlane = {\n              id: swimlaneId,\n              timeoutId: timeoutId,\n              el: swimlane\n            };\n          }\n        };\n      })(this);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSwimlane\", ['$timeout', KanbanSwimlaneDirective]);\n\n  KanbanTaskboardColumnDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $el.on(\"scroll\", function(event) {\n        var scroll, taskCounterDom;\n        scroll = event.currentTarget.scrollTop;\n        taskCounterDom = $el.find(\".kanban-task-counter\");\n        return taskCounterDom.css(\"transform\", \"translateY(\" + scroll + \"px)\");\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanTaskboardColumn\", [KanbanTaskboardColumnDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanSortableDirective, bindOnce, groupBy, mixOf, module, scopeDefer, taiga, timeout, toggleText;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toggleText = this.taiga.toggleText;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  bindOnce = this.taiga.bindOnce;\n\n  groupBy = this.taiga.groupBy;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaKanban\");\n\n  KanbanSortableDirective = function($repo, $rs, $rootscope, kanbanUserstoriesService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var drake, init, unwatch;\n      drake = null;\n      $scope.openSwimlane = (function(_this) {\n        return function(id) {\n          var containers;\n          containers = _.map($('.kanban-swimlane[data-swimlane=\"' + id + '\"] .taskboard-column'), function(item) {\n            return item;\n          });\n          return init(containers);\n        };\n      })(this);\n      init = (function(_this) {\n        return function(containers) {\n          var deleteElement, initialContainer, itemEl, newParentScope, nextCard, previousCard, scroll, tdom;\n          if (!($scope.project.my_permissions.indexOf(\"modify_us\") > -1)) {\n            return;\n          }\n          if (drake) {\n            containers.forEach(function(container) {\n              return drake.containers.push(container);\n            });\n            return;\n          }\n          newParentScope = null;\n          itemEl = null;\n          tdom = $el;\n          deleteElement = function(itemEl) {\n            itemEl.off();\n            return itemEl.remove();\n          };\n          drake = dragula(containers, {\n            copySortSource: false,\n            copy: false,\n            moves: function(item) {\n              return $(item).is('tg-card');\n            }\n          });\n          initialContainer = null;\n          drake.on('over', function(item, container) {\n            if (!initialContainer) {\n              return initialContainer = container;\n            } else if (container !== initialContainer) {\n              return $(container).addClass('target-drop');\n            }\n          });\n          drake.on('out', function(item, container) {\n            if (container !== initialContainer) {\n              return $(container).removeClass('target-drop');\n            }\n          });\n          drake.on('drag', function(item) {\n            initialContainer = null;\n            return window.dragMultiple.start(item, containers);\n          });\n          drake.on('cloned', function(item, dropTarget) {\n            return $(item).addClass('multiple-drag-mirror');\n          });\n          previousCard = null;\n          nextCard = null;\n          drake.on('drop', function(item, target, source, sibling) {\n            var next, prev;\n            previousCard = null;\n            nextCard = null;\n            prev = $(item).prevAll('tg-card:not(.gu-transit)');\n            next = $(item).nextAll('tg-card:not(.gu-transit)');\n            previousCard = null;\n            if (prev.length && prev[0].dataset.id) {\n              previousCard = Number(prev[0].dataset.id);\n            }\n            nextCard = null;\n            if (!previousCard && next.length && next[0].dataset.id) {\n              return nextCard = Number(next[0].dataset.id);\n            }\n          });\n          drake.on('dragend', function(item, target, source, sibling) {\n            var dragMultipleItems, finalUsList, firstElement, firstElementId, index, newStatus, newSwimlane, parentEl, usList;\n            parentEl = item.parentNode;\n            dragMultipleItems = window.dragMultiple.stop();\n            if (!dragMultipleItems.length) {\n              dragMultipleItems = [item];\n            }\n            firstElementId = dragMultipleItems[0].dataset.id;\n            firstElement = dragMultipleItems[0];\n            index = $(parentEl).find('tg-card').index(firstElement);\n            newStatus = Number(parentEl.dataset.status);\n            newSwimlane = Number(parentEl.dataset.swimlane);\n            if (initialContainer !== parentEl) {\n              $(parentEl).addClass('new');\n              $(parentEl).one('animationend', function() {\n                return $(parentEl).removeClass('new');\n              });\n            }\n            usList = _.map(dragMultipleItems, function(item) {\n              return kanbanUserstoriesService.usMap.get(Number(item.dataset.id));\n            });\n            finalUsList = _.map(usList, function(item) {\n              return {\n                id: item.get('id'),\n                oldStatusId: item.getIn(['model', 'status']),\n                oldSwimlaneId: item.getIn(['model', 'swimlane'])\n              };\n            });\n            return $scope.$apply(function() {\n              _.each(usList, (function(_this) {\n                return function(item, key) {\n                  var oldStatus, oldSwimlaneId, sameContainer;\n                  oldStatus = item.getIn(['model', 'status']);\n                  oldSwimlaneId = item.getIn(['model', 'swimlane']) || -1;\n                  sameContainer = newStatus === oldStatus && newSwimlane === oldSwimlaneId;\n                  if (!sameContainer) {\n                    itemEl = $(dragMultipleItems[key]);\n                    return deleteElement(itemEl);\n                  }\n                };\n              })(this));\n              return $rootscope.$broadcast(\"kanban:us:move\", finalUsList, newStatus, newSwimlane, index, previousCard, nextCard);\n            });\n          });\n          return scroll = autoScroll(containers, {\n            margin: 100,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        };\n      })(this);\n      unwatch = $scope.$watch(\"isTableLoaded\", function(tableLoaded) {\n        var containers, isSwimlane;\n        if (!tableLoaded) {\n          return;\n        }\n        isSwimlane = $('.swimlane').length;\n        if (isSwimlane) {\n          return;\n        }\n        unwatch();\n        containers = _.map($el.find('.taskboard-column'), function(item) {\n          return item;\n        });\n        return init(containers);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        if (drake) {\n          return drake.destroy();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgKanbanSortable\", [\"$tgRepo\", \"$tgResources\", \"$rootScope\", \"tgKanbanUserstories\", KanbanSortableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicDetailController, EpicStatusButtonDirective, EpicStatusDisplayDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaEpics\");\n\n  EpicDetailController = (function(superClass) {\n    extend(EpicDetailController, superClass);\n\n    EpicDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function EpicDetailController(scope, rootscope, repo, confirm, rs, rs2, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.rs2 = rs2;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.epicRef = this.params.epicref;\n      this.scope.sectionName = this.translate.instant(\"EPIC.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    EpicDetailController.prototype._setMeta = function() {\n      var description, ref, title;\n      title = this.translate.instant(\"EPIC.PAGE_TITLE\", {\n        epicRef: \"#\" + this.scope.epic.ref,\n        epicSubject: this.scope.epic.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"EPIC.PAGE_DESCRIPTION\", {\n        epicStatus: ((ref = this.scope.statusById[this.scope.epic.status]) != null ? ref.name : void 0) || \"--\",\n        epicDescription: angular.element(this.scope.epic.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    EpicDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('epic', this.scope.epicId, this.scope.projectId);\n    };\n\n    EpicDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on epic\", 1);\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadEpic();\n        };\n      })(this));\n      return this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-epics\", ctx);\n    };\n\n    EpicDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.immutableProject = this.projectService.project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.epic_statuses;\n      this.scope.statusById = groupBy(project.epic_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    EpicDetailController.prototype.loadEpic = function() {\n      return this.rs.epics.getByRef(this.scope.projectId, this.params.epicref).then((function(_this) {\n        return function(epic) {\n          var ctx, ref, ref1;\n          _this.scope.epic = epic;\n          _this.scope.immutableEpic = Immutable.fromJS(epic._attrs);\n          _this.scope.epicId = epic.id;\n          _this.scope.commentModel = epic;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'epic');\n          if (((ref = _this.scope.epic.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.epic.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.epic.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-epics-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadUserstories = function() {\n      return this.rs2.userstories.listInEpic(this.scope.epicId).then((function(_this) {\n        return function(data) {\n          return _this.scope.userstories = data;\n        };\n      })(this));\n    };\n\n    EpicDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadEpic().then((function(_this) {\n        return function() {\n          return _this.loadUserstories();\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    EpicDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.upvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.downvote(this.scope.epicId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    EpicDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.watch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadEpic();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.epics.unwatch(this.scope.epicId).then(onSuccess, onError);\n    };\n\n    EpicDetailController.prototype.onSelectColor = function(color) {\n      var onSelectColorError, onSelectColorSuccess, transform;\n      onSelectColorSuccess = (function(_this) {\n        return function() {\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.confirm.notify('success');\n        };\n      })(this);\n      onSelectColorError = (function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      transform = this.modelTransform.save(function(epic) {\n        epic.color = color;\n        return epic;\n      });\n      return transform.then(onSelectColorSuccess, onSelectColorError);\n    };\n\n    return EpicDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"EpicDetailController\", EpicDetailController);\n\n  EpicStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(epic) {\n        var html, status;\n        status = $scope.statusById[epic.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(epic) {\n        if (epic != null) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusDisplay\", [\"$tgTemplate\", \"$compile\", EpicStatusDisplayDirective]);\n\n  EpicStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_epic\") !== -1;\n      };\n      render = (function(_this) {\n        return function(epic) {\n          var html, status;\n          status = $scope.statusById[epic.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(epic) {\n          epic.status = status;\n          return epic;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var epic;\n        epic = $model.$modelValue;\n        if (epic) {\n          return render(epic);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgEpicStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", EpicStatusButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignSprintToIssueButtonDirective, IssueDetailController, IssuePriorityButtonDirective, IssueSeverityButtonDirective, IssueStatusButtonDirective, IssueStatusDisplayDirective, IssueTypeButtonDirective, bindMethods, bindOnce, groupBy, joinStr, mixOf, module, normalizeString, taiga, toString,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssueDetailController = (function(superClass) {\n    extend(IssueDetailController, superClass);\n\n    IssueDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgAnalytics\", \"$tgNavUrls\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function IssueDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, analytics, navUrls, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.analytics = analytics;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.issueRef = this.params.issueref;\n      this.scope.sectionName = this.translate.instant(\"ISSUES.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    IssueDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, ref3, title;\n      title = this.translate.instant(\"ISSUE.PAGE_TITLE\", {\n        issueRef: \"#\" + this.scope.issue.ref,\n        issueSubject: this.scope.issue.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"ISSUE.PAGE_DESCRIPTION\", {\n        issueStatus: ((ref = this.scope.statusById[this.scope.issue.status]) != null ? ref.name : void 0) || \"--\",\n        issueType: ((ref1 = this.scope.typeById[this.scope.issue.type]) != null ? ref1.name : void 0) || \"--\",\n        issueSeverity: ((ref2 = this.scope.severityById[this.scope.issue.severity]) != null ? ref2.name : void 0) || \"--\",\n        issuePriority: ((ref3 = this.scope.priorityById[this.scope.issue.priority]) != null ? ref3.name : void 0) || \"--\",\n        issueDescription: angular.element(this.scope.issue.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    IssueDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('issue', this.scope.issueId, this.scope.projectId);\n    };\n\n    IssueDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on issue\", 1);\n        };\n      })(this));\n      this.scope.$on(\"promote-issue-to-us:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"promoteToUserstory\", \"promote issue to userstory\", 1);\n          _this.rootscope.$broadcast(\"object:updated\");\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadIssue();\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"assign-sprint-to-issue:success\", (function(_this) {\n        return function(ctx, milestoneId) {\n          _this.scope.issue.milestone = milestoneId;\n          _this.rootscope.$broadcast(\"object:updated\");\n          if (milestoneId) {\n            return _this.loadSprint();\n          } else {\n            return _this.scope.sprint = null;\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      if (this.scope.project.is_issues_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-issues\", ctx);\n      } else {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      }\n    };\n\n    IssueDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.issue_statuses;\n      this.scope.statusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.typeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      this.scope.typeList = _.sortBy(project.issue_types, \"order\");\n      this.scope.severityList = project.severities;\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = project.priorities;\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssueDetailController.prototype.loadIssue = function() {\n      return this.rs.issues.getByRef(this.scope.projectId, this.params.issueref).then((function(_this) {\n        return function(issue) {\n          var ctx, ref, ref1;\n          _this.scope.issue = issue;\n          _this.scope.issueId = issue.id;\n          _this.scope.commentModel = issue;\n          _this.loadAttachments();\n          _this.modelTransform.setObject(_this.scope, 'issue');\n          if (((ref = _this.scope.issue.neighbors.previous) != null ? ref.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n          if (((ref1 = _this.scope.issue.neighbors.next) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.issue.neighbors.next.ref\n            };\n            return _this.scope.nextUrl = _this.navUrls.resolve(\"project-issues-detail\", ctx);\n          }\n        };\n      })(this));\n    };\n\n    IssueDetailController.prototype.loadSprint = function() {\n      if (this.scope.issue.milestone) {\n        return this.rs.sprints.get(this.scope.issue.project, this.scope.issue.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    IssueDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadIssue().then((function(_this) {\n        return function() {\n          return _this.loadSprint();\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    IssueDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.upvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.downvote(this.scope.issueId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    IssueDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.watch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    IssueDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadIssue();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.issues.unwatch(this.scope.issueId).then(onSuccess, onError);\n    };\n\n    return IssueDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"IssueDetailController\", IssueDetailController);\n\n  IssueStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(issue) {\n        var html, status;\n        status = $scope.statusById[issue.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(issue) {\n        if (issue != null) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusDisplay\", [\"$tgTemplate\", \"$compile\", IssueStatusDisplayDirective]);\n\n  IssueStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = (function(_this) {\n        return function(issue) {\n          var html, status;\n          status = $scope.statusById[issue.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          html = $compile(html)($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(statusId) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.status = statusId;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueStatusButtonDirective]);\n\n  IssueTypeButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-type-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, type;\n        type = $scope.typeById[issue.type];\n        html = template({\n          type: type,\n          typees: $scope.typeList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(type) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.type = type;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.type = type;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".type-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-type\").popover().open();\n      });\n      $el.on(\"click\", \".type\", function(event) {\n        var target, type;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        type = target.data(\"type-id\");\n        return save(type);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.type : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueTypeButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueTypeButtonDirective]);\n\n  IssueSeverityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-severity-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, severity;\n        severity = $scope.severityById[issue.severity];\n        html = template({\n          severity: severity,\n          severityes: $scope.severityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(severity) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.severity = severity;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.severity = severity;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".severity-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-severity\").popover().open();\n      });\n      $el.on(\"click\", \".severity\", function(event) {\n        var severity, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        severity = target.data(\"severity-id\");\n        return save(severity);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.severity : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssueSeverityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssueSeverityButtonDirective]);\n\n  IssuePriorityButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"issue/issue-priority-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, notAutoSave, render, save;\n      notAutoSave = $scope.$eval($attrs.notAutoSave);\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_issue\") !== -1;\n      };\n      render = function(issue) {\n        var html, priority;\n        priority = $scope.priorityById[issue.priority];\n        html = template({\n          priority: priority,\n          priorityes: $scope.priorityList,\n          editable: isEditable()\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(priority) {\n        var currentLoading, onError, onSuccess, transform;\n        $.fn.popover().closeAll();\n        if (notAutoSave) {\n          $model.$modelValue.priority = priority;\n          $scope.$apply();\n          return;\n        }\n        currentLoading = $loading().target($el.find(\".level-name\")).start();\n        transform = $modelTransform.save(function(issue) {\n          issue.priority = priority;\n          return issue;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".priority-data\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-priority\").popover().open();\n      });\n      $el.on(\"click\", \".priority\", function(event) {\n        var priority, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        priority = target.data(\"priority-id\");\n        return save(priority);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.priority : void 0;\n      }, function() {\n        var issue;\n        issue = $model.$modelValue;\n        if (issue) {\n          return render(issue);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgIssuePriorityButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", IssuePriorityButtonDirective]);\n\n  AssignSprintToIssueButtonDirective = function($rootscope, $rs, $repo, $loading, $translate, lightboxService, $modelTransform, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var avaliableMilestones, existsMilestone, issue;\n      avaliableMilestones = [];\n      issue = null;\n      $scope.$watch($attrs.ngModel, function(item) {\n        if (!item) {\n          return;\n        }\n        if (item.milestone) {\n          $el.find('.assign-issue-button.button-unset').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-set').addClass('is-active');\n        } else {\n          $el.find('.assign-issue-button.button-set').removeClass('is-active');\n          return $el.find('.assign-issue-button.button-unset').addClass('is-active');\n        }\n      });\n      $el.on(\"click\", \".assign-issue-button.button-unset\", function(event) {\n        var title;\n        event.preventDefault();\n        event.stopPropagation();\n        title = $translate.instant(\"ISSUES.ACTION_ATTACH_SPRINT\");\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          $scope.milestones = data.milestones;\n          $scope.selectedSprint = issue.milestone;\n          avaliableMilestones = angular.copy($scope.milestones);\n          return lightboxService.open($el.find(\".lightbox-assign-sprint-to-issue\"));\n        });\n      });\n      $el.on(\"click\", \".assign-issue-button.button-set\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        issue = $model.$modelValue;\n        return $rs.sprints.list($scope.projectId, null).then(function(data) {\n          var currentSprint, message, title;\n          currentSprint = _.find(data.milestones, {\n            \"id\": issue.milestone\n          });\n          title = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.TITLE\");\n          message = $translate.instant(\"ISSUES.CONFIRM_DETACH_FROM_SPRINT.MESSAGE\", {\n            sprintName: currentSprint.name\n          });\n          return $confirm.ask(title, null, message).then(function(askResponse) {\n            var onError, onSuccess, transform;\n            onSuccess = function() {\n              $rootscope.$broadcast(\"assign-sprint-to-issue:success\", null);\n              askResponse.finish();\n              return lightboxService.close($el);\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            transform = $modelTransform.save(function(issue) {\n              issue.setAttr('milestone', null);\n              return issue;\n            });\n            return transform.then(onSuccess, onError);\n          });\n        });\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      existsMilestone = function(needle, haystack) {\n        haystack = normalizeString(haystack.toUpperCase());\n        needle = normalizeString(needle.toUpperCase());\n        return _.includes(haystack, needle);\n      };\n      $scope.filterMilestones = function(filterText) {\n        return $scope.milestones = avaliableMilestones.filter(function(milestone) {\n          return existsMilestone(filterText, milestone.name);\n        });\n      };\n      return $scope.saveIssueToSprint = function(selectedSprint, event) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($(event.currentTarget)).start();\n        issue.setAttr('milestone', selectedSprint.id);\n        transform = $modelTransform.save(function(item) {\n          issue.setAttr('milestone', selectedSprint.id);\n          return item;\n        });\n        return transform.then(function() {\n          currentLoading.finish();\n          lightboxService.close($el.find(\".lightbox-assign-sprint-to-issue\"));\n          return $rootscope.$broadcast(\"assign-sprint-to-issue:success\", selectedSprint.id);\n        });\n      };\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\",\n      templateUrl: \"issue/assign-sprint-to-issue-button.html\"\n    };\n  };\n\n  module.directive(\"tgAssignSprintToIssueButton\", [\"$rootScope\", \"$tgResources\", \"$tgRepo\", \"$tgLoading\", \"$translate\", \"lightboxService\", \"$tgQueueModelTransformation\", \"$tgConfirm\", AssignSprintToIssueButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateBulkIssuesDirective, bindOnce, debounce, module, taiga, trim;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  trim = this.taiga.trim;\n\n  module = angular.module(\"taigaIssues\");\n\n  CreateBulkIssuesDirective = function($repo, $rs, $confirm, $rootscope, $loading, lightboxService, $model) {\n    var link;\n    link = function($scope, $el, attrs) {\n      var form, submit, submitButton;\n      form = null;\n      $scope.$on(\"issueform:bulk\", function(ctx, projectId, milestoneId, status) {\n        if (form) {\n          form.reset();\n        }\n        lightboxService.open($el);\n        return $scope[\"new\"] = {\n          projectId: projectId,\n          milestoneId: milestoneId,\n          bulk: \"\"\n        };\n      });\n      submit = debounce(2000, function(event) {\n        var currentLoading, data, milestoneId, projectId, promise;\n        event.preventDefault();\n        form = $el.find(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        currentLoading = $loading().target(submitButton).start();\n        if (currentLoading.isLoading()) {\n          return;\n        }\n        data = $scope[\"new\"].bulk;\n        projectId = $scope[\"new\"].projectId;\n        milestoneId = $scope[\"new\"].milestoneId;\n        promise = $rs.issues.bulkCreate(projectId, milestoneId, data);\n        promise.then(function(result) {\n          result = _.map(result.data, function(x) {\n            return $model.make_model('issues', x);\n          });\n          currentLoading.finish();\n          $rootscope.$broadcast(\"issueform:new:success\", result);\n          lightboxService.close($el);\n          return $confirm.notify(\"success\");\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      });\n      submitButton = $el.find(\"button[type='submit']\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbCreateBulkIssues\", [\"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$rootScope\", \"$tgLoading\", \"lightboxService\", \"$tgModel\", CreateBulkIssuesDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssueAssignedToInlineEditionDirective, IssueStatusInlineEditionDirective, IssuesController, IssuesOrderingDirective, IssuesPaginationDirective, bindMethods, bindOnce, debounceLeading, groupBy, joinStr, mixOf, module, startswith, taiga, toString, trim,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  startswith = this.taiga.startswith;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  module = angular.module(\"taigaIssues\");\n\n  IssuesController = (function(superClass) {\n    extend(IssuesController, superClass);\n\n    IssuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgUrls\", \"$routeParams\", \"$q\", \"$tgLocation\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgEvents\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"$tgStorage\", \"tgFilterRemoteStorageService\", \"tgProjectService\", \"tgUserActivityService\"];\n\n    IssuesController.prototype.filtersHashSuffix = \"issues-filters\";\n\n    IssuesController.prototype.myFiltersHashSuffix = \"issues-my-filters\";\n\n    IssuesController.prototype.excludePrefix = \"exclude_\";\n\n    IssuesController.prototype.filterCategories = [\"tags\", \"status\", \"type\", \"severity\", \"priority\", \"assigned_to\", \"owner\", \"role\"];\n\n    IssuesController.prototype.validQueryParams = ['exclude_tags', 'tags', 'exclude_status', 'status', 'exclude_type', 'type', 'exclude_severity', 'severity', 'exclude_priority', 'priority', 'exclude_assigned_to', 'assigned_to', 'exclude_role', 'role', 'exclude_owner', 'owner', 'order_by'];\n\n    function IssuesController(scope, rootscope, repo, confirm, rs, urls, params1, q1, location, appMetaService, navUrls, events, analytics, translate, errorHandlingService, storage, filterRemoteStorageService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.urls = urls;\n      this.params = params1;\n      this.q = q1;\n      this.location = location;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.events = events;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.storage = storage;\n      this.filterRemoteStorageService = filterRemoteStorageService;\n      this.projectService = projectService;\n      this.loadIssues = bind(this.loadIssues, this);\n      bindMethods(this);\n      this.showTags = true;\n      this.scope.sectionName = this.translate.instant(\"PROJECT.SECTION.ISSUES\");\n      this.voting = false;\n      this.openFilter = false;\n      if (this.applyStoredFilters(this.params.pslug, this.filtersHashSuffix, this.validQueryParams)) {\n        return;\n      }\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ISSUES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"ISSUES.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"issueform:new:success\", (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"issue\", \"create\", \"create issue on issues list\", 1);\n          return _this.loadIssues();\n        };\n      })(this));\n      this.scope.$on(\"assigned-to:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('assigned_to') || _this.isFilterDataTypeSelected('role') || _this.isOrderedBy('assigned_to') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n      this.scope.$on(\"status:changed\", (function(_this) {\n        return function() {\n          _this.generateFilters();\n          if (_this.isFilterDataTypeSelected('status') || _this.isOrderedBy('status') || _this.isOrderedBy('modified')) {\n            return _this.loadIssues();\n          }\n        };\n      })(this));\n    }\n\n    IssuesController.prototype.toggleShowTags = function() {\n      return this.rs.issues.storeIssuesShowTags(this.scope.projectId, this.showTags);\n    };\n\n    IssuesController.prototype.isOrderedBy = function(fieldName) {\n      var pattern;\n      pattern = new RegExp(\"-*\" + fieldName);\n      return pattern.test(this.location.search().order_by);\n    };\n\n    IssuesController.prototype.changeQ = function(q) {\n      this.unselectFilter(\"page\");\n      this.replaceFilter(\"q\", q);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeFilter = function(filter) {\n      this.unselectFilter(\"page\");\n      this.unselectFilter(filter.dataType, filter.id, false, filter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.addFilter = function(newFilter) {\n      this.unselectFilter(\"page\");\n      this.selectFilter(newFilter.category.dataType, newFilter.filter.id, false, newFilter.mode);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.selectCustomFilter = function(customFilter) {\n      var orderBy;\n      orderBy = this.location.search().order_by;\n      if (orderBy) {\n        customFilter.filter.order_by = orderBy;\n      }\n      this.unselectFilter(\"page\");\n      this.replaceAllFilters(customFilter.filter);\n      this.loadIssues();\n      return this.generateFilters();\n    };\n\n    IssuesController.prototype.removeCustomFilter = function(customFilter) {\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          delete userFilters[customFilter.id];\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.isFilterDataTypeSelected = function(filterDataType) {\n      var filter, j, len, ref;\n      ref = this.selectedFilters;\n      for (j = 0, len = ref.length; j < len; j++) {\n        filter = ref[j];\n        if (filter['dataType'] === filterDataType) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    IssuesController.prototype.saveCustomFilter = function(name) {\n      var excludeKey, filters, j, key, len, ref, urlfilters;\n      filters = {};\n      urlfilters = this.location.search();\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        filters[key] = urlfilters[key];\n        filters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix).then((function(_this) {\n        return function(userFilters) {\n          userFilters[name] = filters;\n          return _this.filterRemoteStorageService.storeFilters(_this.scope.projectId, userFilters, _this.myFiltersHashSuffix).then(_this.generateFilters);\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.getQueryParams = function() {\n      return _.pick(_.clone(this.location.search()), this.validQueryParams);\n    };\n\n    IssuesController.prototype.generateFilters = function() {\n      var excludeKey, j, key, len, loadFilters, ref, urlfilters;\n      urlfilters = this.getQueryParams();\n      this.storeFilters(this.params.pslug, urlfilters, this.filtersHashSuffix);\n      loadFilters = {};\n      loadFilters.project = this.scope.projectId;\n      loadFilters.q = urlfilters.q;\n      ref = this.filterCategories;\n      for (j = 0, len = ref.length; j < len; j++) {\n        key = ref[j];\n        excludeKey = this.excludePrefix.concat(key);\n        loadFilters[key] = urlfilters[key];\n        loadFilters[excludeKey] = urlfilters[excludeKey];\n      }\n      return this.q.all([this.rs.issues.filtersData(loadFilters), this.filterRemoteStorageService.getFilters(this.scope.projectId, this.myFiltersHashSuffix)]).then((function(_this) {\n        return function(result) {\n          var customFiltersRaw, data, dataCollection, k, len1, ref1, selected, tagsWithAtLeastOneElement;\n          data = result[0];\n          customFiltersRaw = result[1];\n          dataCollection = {};\n          dataCollection.status = _.map(data.statuses, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.type = _.map(data.types, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.severity = _.map(data.severities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.priority = _.map(data.priorities, function(it) {\n            it.id = it.id.toString();\n            return it;\n          });\n          dataCollection.tags = _.map(data.tags, function(it) {\n            it.id = it.name;\n            return it;\n          });\n          tagsWithAtLeastOneElement = _.filter(dataCollection.tags, function(tag) {\n            return tag.count > 0;\n          });\n          dataCollection.assigned_to = _.map(data.assigned_to, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.full_name || \"Unassigned\";\n            return it;\n          });\n          dataCollection.owner = _.map(data.owners, function(it) {\n            it.id = it.id.toString();\n            it.name = it.full_name;\n            return it;\n          });\n          dataCollection.role = _.map(data.roles, function(it) {\n            if (it.id) {\n              it.id = it.id.toString();\n            } else {\n              it.id = \"null\";\n            }\n            it.name = it.name || \"Unassigned\";\n            return it;\n          });\n          _this.selectedFilters = [];\n          ref1 = _this.filterCategories;\n          for (k = 0, len1 = ref1.length; k < len1; k++) {\n            key = ref1[k];\n            excludeKey = _this.excludePrefix.concat(key);\n            if (loadFilters[key]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[key]);\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n            if (loadFilters[excludeKey]) {\n              selected = _this.formatSelectedFilters(key, dataCollection[key], loadFilters[excludeKey], \"exclude\");\n              _this.selectedFilters = _this.selectedFilters.concat(selected);\n            }\n          }\n          _this.filterQ = loadFilters.q;\n          _this.filters = [\n            {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TYPE\"),\n              dataType: \"type\",\n              content: dataCollection.type\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.SEVERITY\"),\n              dataType: \"severity\",\n              content: dataCollection.severity\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.PRIORITIES\"),\n              dataType: \"priority\",\n              content: dataCollection.priority\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.STATUS\"),\n              dataType: \"status\",\n              content: dataCollection.status\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.TAGS\"),\n              dataType: \"tags\",\n              content: dataCollection.tags,\n              hideEmpty: true,\n              totalTaggedElements: tagsWithAtLeastOneElement.length\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ASSIGNED_TO\"),\n              dataType: \"assigned_to\",\n              content: dataCollection.assigned_to\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.ROLE\"),\n              dataType: \"role\",\n              content: dataCollection.role\n            }, {\n              title: _this.translate.instant(\"COMMON.FILTERS.CATEGORIES.CREATED_BY\"),\n              dataType: \"owner\",\n              content: dataCollection.owner\n            }\n          ];\n          _this.customFilters = [];\n          return _.forOwn(customFiltersRaw, function(value, key) {\n            return _this.customFilters.push({\n              id: key,\n              name: key,\n              filter: value\n            });\n          });\n        };\n      })(this));\n    };\n\n    IssuesController.prototype.initializeSubscription = function() {\n      var routingKey;\n      routingKey = \"changes.project.\" + this.scope.projectId + \".issues\";\n      return this.events.subscribe(this.scope, routingKey, debounceLeading(500, (function(_this) {\n        return function(message) {\n          return _this.loadIssues();\n        };\n      })(this)));\n    };\n\n    IssuesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_issues_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issueStatusById = groupBy(project.issue_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.severityById = groupBy(project.severities, function(x) {\n        return x.id;\n      });\n      this.scope.severityList = _.sortBy(project.severities, \"order\");\n      this.scope.priorityById = groupBy(project.priorities, function(x) {\n        return x.id;\n      });\n      this.scope.priorityList = _.sortBy(project.priorities, \"order\");\n      this.scope.issueTypes = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueTypeById = groupBy(project.issue_types, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    IssuesController.prototype.loadIssuesRequests = 0;\n\n    IssuesController.prototype.loadIssues = function() {\n      var params, promise;\n      params = this.location.search();\n      promise = this.rs.issues.list(this.scope.projectId, params);\n      this.loadIssuesRequests += 1;\n      promise.index = this.loadIssuesRequests;\n      promise.then((function(_this) {\n        return function(data) {\n          if (promise.index === _this.loadIssuesRequests) {\n            _this.scope.issues = data.models;\n            _this.scope.page = data.current;\n            _this.scope.count = data.count;\n            _this.scope.paginatedBy = data.paginatedBy;\n          }\n          return data;\n        };\n      })(this));\n      return promise;\n    };\n\n    IssuesController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.initializeSubscription();\n      this.generateFilters();\n      if (this.rs.issues.getIssuesShowTags(this.scope.projectId) === false) {\n        this.showTags = false;\n      }\n      return this.loadIssues();\n    };\n\n    IssuesController.prototype.addNewIssue = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"genericform:new\", {\n        'objType': 'issue',\n        'project': project\n      });\n    };\n\n    IssuesController.prototype.addIssuesInBulk = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rootscope.$broadcast(\"issueform:bulk\", project.id);\n    };\n\n    IssuesController.prototype.getIssuesOrderBy = function() {\n      if (_.isString(this.location.search().order_by)) {\n        return this.location.search().order_by;\n      } else {\n        return \"created_date\";\n      }\n    };\n\n    return IssuesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"IssuesController\", IssuesController);\n\n  IssuesPaginationDirective = function($log, $location, $template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"issue/issue-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".issues-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        $pagEl.show();\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        return $pagEl.html(html);\n      };\n      $scope.$watch(\"issues\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".issues-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      $el.on(\"click\", \".issues-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadIssues();\n        });\n      });\n      return $el.on(\"click\", \".issues-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadIssues();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesPagination\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesPaginationDirective]);\n\n  IssuesOrderingDirective = function($log, $location, $template, $compile) {\n    var link, linkOrdering;\n    linkOrdering = function($scope, $el, $attrs, $ctrl) {\n      var colHeadElement, currentOrder, icon, svg;\n      currentOrder = $ctrl.getIssuesOrderBy();\n      if (currentOrder) {\n        icon = startswith(currentOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n        colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(currentOrder, \"-\")) + \"']\");\n        svg = colHeadElement.find('svg');\n        svg.addClass(icon);\n        $compile(colHeadElement.contents())($scope);\n      }\n      return $el.on(\"click\", \".row.title > div:not(.skip-order)\", function(event) {\n        var finalOrder, newOrder, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        currentOrder = $ctrl.getIssuesOrderBy();\n        newOrder = target.data(\"fieldname\");\n        if (newOrder === 'total_voters' && currentOrder !== \"-total_voters\") {\n          currentOrder = \"total_voters\";\n        }\n        finalOrder = currentOrder === newOrder ? \"-\" + newOrder : newOrder;\n        return $scope.$apply(function() {\n          var urlfilters;\n          $ctrl.replaceFilter(\"order_by\", finalOrder);\n          if ($ctrl.filtersHashSuffix) {\n            urlfilters = $ctrl.getQueryParams();\n            $ctrl.storeFilters($ctrl.params.pslug, urlfilters, $ctrl.filtersHashSuffix);\n          }\n          return $ctrl.loadIssues().then(function() {\n            $el.find('.row.title svg').removeClass();\n            colHeadElement = $el.find(\".row.title > div[data-fieldname='\" + (trim(finalOrder, \"-\")) + \"']\");\n            icon = startswith(finalOrder, \"-\") ? \"icon-arrow-up\" : \"icon-arrow-down\";\n            colHeadElement.find('svg').addClass(icon);\n            return $compile(target.contents())($scope);\n          });\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkOrdering($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssuesOrdering\", [\"$log\", \"$tgLocation\", \"$tgTemplate\", \"$compile\", IssuesOrderingDirective]);\n\n  IssueStatusInlineEditionDirective = function($repo, $template, $rootscope) {\n\n    /*\n    Print the status of an Issue and a popover to change it.\n    - tg-issue-status-inline-edition: The issue\n    \n    Example:\n    \n      div.status(tg-issue-status-inline-edition=\"issue\")\n        a.issue-status(href=\"\")\n    \n    NOTE: This directive need 'issueStatusById' and 'project'.\n     */\n    var link, selectionTemplate, updateIssueStatus;\n    selectionTemplate = $template.get(\"issue/issue-status-inline-edition-selection.html\", true);\n    updateIssueStatus = function($el, issue, issueStatusById) {\n      var issueStatusDom, issueStatusDomParent, status;\n      issueStatusDomParent = $el.find(\".issue-status\");\n      issueStatusDom = $el.find(\".issue-status .issue-status-bind\");\n      status = issueStatusById[issue.status];\n      if (status) {\n        issueStatusDom.text(status.name);\n        issueStatusDom.prop(\"title\", status.name);\n        return issueStatusDomParent.css('color', status.color);\n      }\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue;\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueStatusInlineEdition);\n      $el.on(\"click\", \".issue-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var attachments, target;\n        event.preventDefault();\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        issue.status = target.data(\"status-id\");\n        $el.find(\".pop-status\").popover().close();\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        attachments = issue.attachments;\n        return $scope.$apply(function() {\n          return $repo.save(issue).then(function(response) {\n            issue.attachments = attachments;\n            issue._isModified = false;\n            issue._attrs = _.extend(issue.getAttrs(), issue);\n            issue._modifiedAttrs = {};\n            return $rootscope.$broadcast(\"status:changed\", response);\n          });\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        $el.append(selectionTemplate({\n          'statuses': project.issue_statuses\n        }));\n        updateIssueStatus($el, issue, $scope.issueStatusById);\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueStatusInlineEdition, (function(_this) {\n        return function(val) {\n          return updateIssueStatus($el, val, $scope.issueStatusById);\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueStatusInlineEdition\", [\"$tgRepo\", \"$tgTemplate\", \"$rootScope\", IssueStatusInlineEditionDirective]);\n\n  IssueAssignedToInlineEditionDirective = function($repo, $rootscope, $translate, avatarService, $lightboxFactory) {\n    var link, template;\n    template = _.template(\"<img style=\\\"background-color: <%- bg %>\\\" src=\\\"<%- imgurl %>\\\" alt=\\\"<%- name %>\\\"/>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, issue, updateIssue;\n      updateIssue = function(issue) {\n        var avatar, ctx, member;\n        ctx = {\n          name: $translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\"),\n          imgurl: \"/\" + window._version + \"/images/unnamed.png\"\n        };\n        member = $scope.usersById[issue.assigned_to];\n        avatar = avatarService.getAvatar(member);\n        ctx.imgurl = avatar.url;\n        ctx.bg = null;\n        if (member) {\n          ctx.name = member.full_name_display;\n          ctx.bg = avatar.bg;\n        }\n        $el.find(\".avatar\").html(template(ctx));\n        return $el.find(\".issue-assignedto\").attr('title', ctx.name);\n      };\n      $ctrl = $el.controller();\n      issue = $scope.$eval($attrs.tgIssueAssignedToInlineEdition);\n      updateIssue(issue);\n      $el.on(\"click\", \".issue-assignedto\", function(event) {\n        var onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            var attachments;\n            issue.assigned_to = assignedUsers.pop() || null;\n            attachments = issue.attachments;\n            return $repo.save(issue).then(function() {\n              issue.attachments = attachments;\n              issue._isModified = false;\n              issue._attrs = _.extend(issue.getAttrs(), issue);\n              issue._modifiedAttrs = {};\n              updateIssue(issue);\n              return $rootscope.$broadcast(\"assigned-to:changed\", issue);\n            });\n          };\n        })(this);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [issue.assigned_to],\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      });\n      taiga.bindOnce($scope, \"project\", function(project) {\n        if (project.my_permissions.indexOf(\"modify_issue\") === -1) {\n          $el.unbind(\"click\");\n          return $el.find(\"a\").addClass(\"not-clickable\");\n        }\n      });\n      $scope.$watch($attrs.tgIssueAssignedToInlineEdition, function(val) {\n        return updateIssue(val);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgIssueAssignedToInlineEdition\", [\"$tgRepo\", \"$rootScope\", \"$translate\", \"tgAvatarService\", \"tgLightboxFactory\", IssueAssignedToInlineEditionDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UsClientRequirementButtonDirective, UsStatusButtonDirective, UsStatusDisplayDirective, UsTeamRequirementButtonDirective, UserStoryDetailController, bindMethods, bindOnce, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaUserStories\");\n\n  UserStoryDetailController = (function(superClass) {\n    extend(UserStoryDetailController, superClass);\n\n    UserStoryDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"$tgConfig\", \"tgProjectService\", \"tgWysiwygService\", \"tgAttachmentsFullService\", \"$tgModel\", \"$sce\"];\n\n    function UserStoryDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, configService, projectService, wysiwigService, attachmentsFullService, tgmodel, sce) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.configService = configService;\n      this.projectService = projectService;\n      this.wysiwigService = wysiwigService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.tgmodel = tgmodel;\n      this.sce = sce;\n      bindMethods(this);\n      this.scope.usRef = this.params.usref;\n      this.scope.sectionName = this.translate.instant(\"US.SECTION_NAME\");\n      this.scope.tribeEnabled = this.configService.config.tribeHost;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserStoryDetailController.prototype._setMeta = function() {\n      var closedTasks, description, descriptionHtml, progressPercentage, ref, title, totalTasks;\n      totalTasks = this.scope.tasks.length;\n      closedTasks = _.filter(this.scope.tasks, (function(_this) {\n        return function(t) {\n          return _this.scope.taskStatusById[t.status].is_closed;\n        };\n      })(this)).length;\n      progressPercentage = totalTasks > 0 ? Math.round(100 * closedTasks / totalTasks) : 0;\n      title = this.translate.instant(\"US.PAGE_TITLE\", {\n        userStoryRef: \"#\" + this.scope.us.ref,\n        userStorySubject: this.scope.us.subject,\n        projectName: this.scope.project.name\n      });\n      descriptionHtml = this.sce.getTrustedHtml(this.wysiwigService.getHTML(this.scope.us.description) || \"\");\n      description = this.translate.instant(\"US.PAGE_DESCRIPTION\", {\n        userStoryStatus: ((ref = this.scope.statusById[this.scope.us.status]) != null ? ref.name : void 0) || \"--\",\n        userStoryPoints: this.scope.us.total_points,\n        userStoryDescription: angular.element(descriptionHtml).text(),\n        userStoryClosedTasks: closedTasks,\n        userStoryTotalTasks: totalTasks,\n        userStoryProgressPercentage: progressPercentage\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    UserStoryDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('us', this.scope.usId, this.scope.projectId);\n    };\n\n    UserStoryDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.relateToEpic = (function(_this) {\n        return function(us) {\n          return _this.scope.$broadcast(\"relate-to-epic:add\", us);\n        };\n      })(this);\n      this.scope.$on(\"related-tasks:update\", (function(_this) {\n        return function() {\n          var allClosed;\n          _this.loadTasks();\n          _this.scope.tasks = _.clone(_this.scope.tasks, false);\n          allClosed = _.every(_this.scope.tasks, function(task) {\n            return task.is_closed;\n          });\n          if (_this.scope.us.is_closed !== allClosed) {\n            return _this.loadUs();\n          }\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on userstory\", 1);\n        };\n      })(this));\n      this.scope.$on(\"task:reorder\", (function(_this) {\n        return function(event, task, newIndex) {\n          return _this.reorderTask(task, newIndex);\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadUs();\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.params[\"kanban-status\"] && this.scope.project.is_kanban_activated) {\n        return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-kanban\", ctx);\n      } else {\n        if (this.scope.project.is_backlog_activated) {\n          if (this.scope.us.milestone) {\n            ctx.sprint = this.scope.sprint.slug;\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n          } else {\n            return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-backlog\", ctx);\n          }\n        }\n      }\n    };\n\n    UserStoryDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.us_statuses;\n      this.scope.statusById = groupBy(project.us_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.taskStatusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.pointsById = groupBy(this.scope.pointsList, function(e) {\n        return e.id;\n      });\n      return project;\n    };\n\n    UserStoryDetailController.prototype.loadUs = function() {\n      var httpParams, kanbanStaus, milestone, noMilestone;\n      httpParams = _.pick(this.location.search(), \"milestone\", \"no-milestone\", \"kanban-status\");\n      milestone = httpParams.milestone;\n      if (milestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, {\n          milestone: milestone,\n          order_by: \"sprint_order\"\n        });\n      }\n      noMilestone = httpParams[\"no-milestone\"];\n      if (noMilestone) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, {\n          milestone: \"null\",\n          order_by: \"backlog_order\"\n        });\n      }\n      kanbanStaus = httpParams[\"kanban-status\"];\n      if (kanbanStaus) {\n        this.rs.userstories.storeQueryParams(this.scope.projectId, {\n          status: kanbanStaus,\n          order_by: \"kanban_order\"\n        });\n      }\n      return this.rs.userstories.getByRef(this.scope.projectId, this.params.usref).then((function(_this) {\n        return function(us) {\n          _this.rootscope.$broadcast(\"userstory:loaded\", us);\n          _this.scope.us = us;\n          _this.scope.usId = us.id;\n          _this.scope.commentModel = us;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: us._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'us');\n          return us;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadSprint = function() {\n      if (this.scope.us.milestone) {\n        return this.rs.sprints.get(this.scope.us.project, this.scope.us.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    UserStoryDetailController.prototype.loadTasks = function() {\n      return this.rs.tasks.list(this.scope.projectId, null, this.scope.usId).then((function(_this) {\n        return function(tasks) {\n          _this.scope.tasks = tasks;\n          return tasks;\n        };\n      })(this));\n    };\n\n    UserStoryDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadUs().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadTasks()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    UserStoryDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.upvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.downvote(this.scope.usId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    UserStoryDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.watch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadUs();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.userstories.unwatch(this.scope.usId).then(onSuccess, onError);\n    };\n\n    UserStoryDetailController.prototype.onTribeInfo = function() {\n      var image, publishDesc, publishTitle, text;\n      publishTitle = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\");\n      image = $('<img />').attr({\n        'src': \"/\" + window._version + \"/images/monster-fight.png\",\n        'alt': this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TITLE\")\n      });\n      text = this.translate.instant(\"US.TRIBE.PUBLISH_MORE_INFO_TEXT\");\n      publishDesc = $('<div></div>').append(image).append(text);\n      return this.confirm.success(publishTitle, publishDesc);\n    };\n\n    UserStoryDetailController.prototype.reorderTask = function(task, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this.scope.tasks.forEach(function(it) {\n        return orderList[it.id] = it.us_order;\n      });\n      withoutMoved = this.scope.tasks.filter(function(it) {\n        return it.id !== task.id;\n      });\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination[beforeDestination.length - 1];\n      newOrder = !previous ? 0 : previous.us_order + 1;\n      orderList[task.id] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter(function(it) {\n        return it.us_order === previous.us_order;\n      });\n      setOrders = _.fromPairs(previousWithTheSameOrder.map(function(it) {\n        return [it.id, it.us_order];\n      }));\n      afterDestination.forEach(function(it) {\n        return orderList[it.id] = it.us_order + 1;\n      });\n      this.scope.tasks = _.map(this.scope.tasks, function(it) {\n        it.us_order = orderList[it.id];\n        return it;\n      });\n      this.scope.tasks = _.sortBy(this.scope.tasks, \"us_order\");\n      data = {\n        us_order: newOrder,\n        version: task.version\n      };\n      return this.rs.tasks.reorder(task.id, data, setOrders).then((function(_this) {\n        return function(newTask) {\n          newTask = _this.tgmodel.make_model(\"tasks\", newTask);\n          _this.scope.tasks = _.map(_this.scope.tasks, function(it) {\n            if (it.id === newTask.id) {\n              return newTask;\n            } else {\n              return it;\n            }\n          });\n          return _this.rootscope.$broadcast(\"related-tasks:reordered\");\n        };\n      })(this));\n    };\n\n    return UserStoryDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserStoryDetailController\", UserStoryDetailController);\n\n  UsStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(us) {\n        var html, status;\n        status = $scope.statusById[us.status];\n        html = template({\n          is_closed: us.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(us) {\n        if (us != null) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusDisplay\", [\"$tgTemplate\", \"$compile\", UsStatusDisplayDirective]);\n\n  UsStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = (function(_this) {\n        return function(us) {\n          var html, status;\n          status = $scope.statusById[us.status];\n          html = template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          });\n          $el.html(html);\n          return $compile($el.contents())($scope);\n        };\n      })(this);\n      save = (function(_this) {\n        return function(status) {\n          var currentLoading, onError, onSuccess, transform;\n          $el.find(\".pop-status\").popover().close();\n          currentLoading = $loading().target($el.find('.js-edit-status')).start();\n          transform = $modelTransform.save(function(us) {\n            us.status = status;\n            return us;\n          });\n          onSuccess = function() {\n            $rootScope.$broadcast(\"object:updated\");\n            return currentLoading.finish();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return currentLoading.finish();\n          };\n          return transform.then(onSuccess, onError);\n        };\n      })(this);\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var status, target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        status = target.data(\"status-id\");\n        return save(status);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.status : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsStatusButtonDirective]);\n\n  UsTeamRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-team-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.team_requirement\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      save = function(team_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.team_requirement = team_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          currentLoading.finish();\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".team-requirement\", function(event) {\n        var team_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        team_requirement = !$model.$modelValue.team_requirement;\n        return save(team_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.team_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsTeamRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsTeamRequirementButtonDirective]);\n\n  UsClientRequirementButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $template, $compile) {\n    var link, template;\n    template = $template.get(\"us/us-client-requirement-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var canEdit, render, save;\n      canEdit = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_us\") !== -1;\n      };\n      render = function(us) {\n        var ctx, html;\n        ctx = {\n          canEdit: canEdit(),\n          isRequired: us.client_requirement\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(client_requirement) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find(\"label\")).start();\n        transform = $modelTransform.save(function(us) {\n          us.client_requirement = client_requirement;\n          return us;\n        });\n        transform.then((function(_this) {\n          return function() {\n            currentLoading.finish();\n            return $rootscope.$broadcast(\"object:updated\");\n          };\n        })(this));\n        return transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n      };\n      $el.on(\"click\", \".client-requirement\", function(event) {\n        var client_requirement;\n        if (!canEdit()) {\n          return;\n        }\n        client_requirement = !$model.$modelValue.client_requirement;\n        return save(client_requirement);\n      });\n      $scope.$watch(function() {\n        var ref;\n        return (ref = $model.$modelValue) != null ? ref.client_requirement : void 0;\n      }, function() {\n        var us;\n        us = $model.$modelValue;\n        if (us) {\n          return render(us);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgUsClientRequirementButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", UsClientRequirementButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskDetailController, TaskIsIocaineButtonDirective, TaskStatusButtonDirective, TaskStatusDisplayDirective, bindMethods, groupBy, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaTasks\");\n\n  TaskDetailController = (function(superClass) {\n    extend(TaskDetailController, superClass);\n\n    TaskDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"$tgQueueModelTransformation\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function TaskDetailController(scope, rootscope, repo, confirm, rs, params, q, location, log, appMetaService, navUrls, analytics, translate, modelTransform, errorHandlingService, projectService, attachmentsFullService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      bindMethods(this);\n      this.scope.taskRef = this.params.taskref;\n      this.scope.sectionName = this.translate.instant(\"TASK.SECTION_NAME\");\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      this.initializeEventHandlers();\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          _this._setMeta();\n          return _this.initializeOnDeleteGoToUrl();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TaskDetailController.prototype._setMeta = function() {\n      var description, ref1, title;\n      title = this.translate.instant(\"TASK.PAGE_TITLE\", {\n        taskRef: \"#\" + this.scope.task.ref,\n        taskSubject: this.scope.task.subject,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"TASK.PAGE_DESCRIPTION\", {\n        taskStatus: ((ref1 = this.scope.statusById[this.scope.task.status]) != null ? ref1.name : void 0) || \"--\",\n        taskDescription: angular.element(this.scope.task.description_html || \"\").text()\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    TaskDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('task', this.scope.taskId, this.scope.projectId);\n    };\n\n    TaskDetailController.prototype.initializeEventHandlers = function() {\n      this.scope.$on(\"promote-task-to-us:success\", (function(_this) {\n        return function(e, ref) {\n          var ctx;\n          _this.analytics.trackEvent(\"task\", \"promoteToUserstory\", \"promote task to userstory\", 1);\n          ctx = {\n            project: _this.scope.project.slug,\n            ref: ref\n          };\n          return _this.location.path(_this.navUrls.resolve(\"project-userstories-detail\", ctx));\n        };\n      })(this));\n      this.scope.$on(\"attachment:create\", (function(_this) {\n        return function() {\n          return _this.analytics.trackEvent(\"attachment\", \"create\", \"create attachment on task\", 1);\n        };\n      })(this));\n      this.scope.$on(\"custom-attributes-values:edit\", (function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return this.scope.$on(\"comment:new\", (function(_this) {\n        return function() {\n          return _this.loadTask();\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.initializeOnDeleteGoToUrl = function() {\n      var ctx;\n      ctx = {\n        project: this.scope.project.slug\n      };\n      this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project\", ctx);\n      if (this.scope.project.is_backlog_activated) {\n        if (this.scope.task.milestone) {\n          ctx.sprint = this.scope.sprint.slug;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-taskboard\", ctx);\n        } else if (this.scope.task.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      } else if (this.scope.project.is_kanban_activated) {\n        if (this.scope.us) {\n          ctx.ref = this.scope.us.ref;\n          return this.scope.onDeleteGoToUrl = this.navUrls.resolve(\"project-userstories-detail\", ctx);\n        }\n      }\n    };\n\n    TaskDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.statusList = project.task_statuses;\n      this.scope.statusById = groupBy(project.task_statuses, function(x) {\n        return x.id;\n      });\n      return project;\n    };\n\n    TaskDetailController.prototype.loadTask = function() {\n      return this.rs.tasks.getByRef(this.scope.projectId, this.params.taskref).then((function(_this) {\n        return function(task) {\n          var ctx, ref1, ref2;\n          _this.scope.task = task;\n          _this.scope.taskId = task.id;\n          _this.scope.commentModel = task;\n          _this.loadAttachments();\n          window.legacyChannel.next({\n            type: 'SET_DETAIL_OBJ',\n            value: task._attrs\n          });\n          _this.modelTransform.setObject(_this.scope, 'task');\n          if (((ref1 = _this.scope.task.neighbors.previous) != null ? ref1.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.previous.ref\n            };\n            _this.scope.previousUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          if (((ref2 = _this.scope.task.neighbors.next) != null ? ref2.ref : void 0) != null) {\n            ctx = {\n              project: _this.scope.project.slug,\n              ref: _this.scope.task.neighbors.next.ref\n            };\n            _this.scope.nextUrl = _this.navUrls.resolve(\"project-tasks-detail\", ctx);\n          }\n          return task;\n        };\n      })(this));\n    };\n\n    TaskDetailController.prototype.loadSprint = function() {\n      if (this.scope.task.milestone) {\n        return this.rs.sprints.get(this.scope.task.project, this.scope.task.milestone).then((function(_this) {\n          return function(sprint) {\n            _this.scope.sprint = sprint;\n            return sprint;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadUserStory = function() {\n      if (this.scope.task.user_story) {\n        return this.rs.userstories.get(this.scope.task.project, this.scope.task.user_story).then((function(_this) {\n          return function(us) {\n            _this.scope.us = us;\n            return us;\n          };\n        })(this));\n      }\n    };\n\n    TaskDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.loadTask().then((function(_this) {\n        return function() {\n          return _this.q.all([_this.loadSprint(), _this.loadUserStory()]);\n        };\n      })(this));\n    };\n\n\n    /*\n     * Note: This methods (onUpvote() and onDownvote()) are related to tg-vote-button.\n     *       See app/modules/components/vote-button for more info\n     */\n\n    TaskDetailController.prototype.onUpvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.upvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onDownvote = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.downvote(this.scope.taskId).then(onSuccess, onError);\n    };\n\n\n    /*\n     * Note: This methods (onWatch() and onUnwatch()) are related to tg-watch-button.\n     *       See app/modules/components/watch-button for more info\n     */\n\n    TaskDetailController.prototype.onWatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.watch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    TaskDetailController.prototype.onUnwatch = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.loadTask();\n          return _this.rootscope.$broadcast(\"object:updated\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.rs.tasks.unwatch(this.scope.taskId).then(onSuccess, onError);\n    };\n\n    return TaskDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TaskDetailController\", TaskDetailController);\n\n  TaskStatusDisplayDirective = function($template, $compile) {\n    var link, template;\n    template = $template.get(\"common/components/status-display.html\", true);\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function(task) {\n        var html, status;\n        status = $scope.statusById[task.status];\n        html = template({\n          is_closed: status.is_closed,\n          status: status\n        });\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(task) {\n        if (task != null) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusDisplay\", [\"$tgTemplate\", \"$compile\", TaskStatusDisplayDirective]);\n\n  TaskStatusButtonDirective = function($rootScope, $repo, $confirm, $loading, $modelTransform, $compile, $translate, $template) {\n    var link, template;\n    template = $template.get(\"common/components/status-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = (function(_this) {\n        return function(task) {\n          var html, status;\n          status = $scope.statusById[task.status];\n          html = $compile(template({\n            status: status,\n            statuses: $scope.statusList,\n            editable: isEditable()\n          }))($scope);\n          return $el.html(html);\n        };\n      })(this);\n      save = function(status) {\n        var currentLoading, onError, onSuccess, transform;\n        currentLoading = $loading().target($el).start();\n        transform = $modelTransform.save(function(task) {\n          task.status = status;\n          return task;\n        });\n        onSuccess = function() {\n          $rootScope.$broadcast(\"object:updated\");\n          return currentLoading.finish();\n        };\n        onError = function() {\n          $confirm.notify(\"error\");\n          return currentLoading.finish();\n        };\n        return transform.then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".js-edit-status\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        return $el.find(\".pop-status\").popover().open();\n      });\n      $el.on(\"click\", \".status\", function(event) {\n        var target;\n        event.preventDefault();\n        event.stopPropagation();\n        if (!isEditable()) {\n          return;\n        }\n        target = angular.element(event.currentTarget);\n        $.fn.popover().closeAll();\n        return save(target.data(\"status-id\"));\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.status : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskStatusButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$translate\", \"$tgTemplate\", TaskStatusButtonDirective]);\n\n  TaskIsIocaineButtonDirective = function($rootscope, $tgrepo, $confirm, $loading, $modelTransform, $compile, $template) {\n    var link, template;\n    template = $template.get(\"issue/iocaine-button.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var isEditable, render, save;\n      isEditable = function() {\n        return $scope.project.my_permissions.indexOf(\"modify_task\") !== -1;\n      };\n      render = function(task) {\n        var ctx, html;\n        if (!isEditable() && !task.is_iocaine) {\n          $el.html(\"\");\n          return;\n        }\n        ctx = {\n          isIocaine: task.is_iocaine,\n          isEditable: isEditable()\n        };\n        html = $compile(template(ctx))($scope);\n        return $el.html(html);\n      };\n      save = function(is_iocaine) {\n        var currentLoading, transform;\n        currentLoading = $loading().target($el.find('label')).start();\n        transform = $modelTransform.save(function(task) {\n          task.is_iocaine = is_iocaine;\n          return task;\n        });\n        transform.then(function() {\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return currentLoading.finish();\n        });\n      };\n      $el.on(\"click\", \".is-iocaine\", function(event) {\n        var is_iocaine;\n        if (!isEditable()) {\n          return;\n        }\n        is_iocaine = !$model.$modelValue.is_iocaine;\n        return save(is_iocaine);\n      });\n      $scope.$watch(function() {\n        var ref1;\n        return (ref1 = $model.$modelValue) != null ? ref1.is_iocaine : void 0;\n      }, function() {\n        var task;\n        task = $model.$modelValue;\n        if (task) {\n          return render(task);\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgTaskIsIocaineButton\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$compile\", \"$tgTemplate\", TaskIsIocaineButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LeaveProjectDirective, TeamController, TeamFiltersDirective, TeamMemberCurrentUserDirective, TeamMemberStatsDirective, TeamMembersDirective, membersFilter, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaTeam\");\n\n  TeamController = (function(superClass) {\n    extend(TeamController, superClass);\n\n    TeamController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$location\", \"$tgNavUrls\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function TeamController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, auth, translate, projectService, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"TEAM.SECTION_NAME\";\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"TEAM.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.translate.instant(\"TEAM.PAGE_DESCRIPTION\", {\n            projectName: _this.scope.project.name,\n            projectDescription: _this.scope.project.description\n          });\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    TeamController.prototype.setRole = function(role) {\n      if (role) {\n        return this.scope.filtersRole = role;\n      } else {\n        return this.scope.filtersRole = null;\n      }\n    };\n\n    TeamController.prototype.loadMembers = function() {\n      var i, len, member, ref, user;\n      user = this.auth.getUser();\n      this.scope.totals = {};\n      ref = this.scope.activeUsers;\n      for (i = 0, len = ref.length; i < len; i++) {\n        member = ref[i];\n        this.scope.totals[member.id] = 0;\n      }\n      this.scope.currentUser = _.find(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n      return this.scope.memberships = _.reject(this.scope.activeUsers, {\n        id: user != null ? user.id : void 0\n      });\n    };\n\n    TeamController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.issuesEnabled = project.is_issues_activated;\n      this.scope.tasksEnabled = project.is_kanban_activated || project.is_backlog_activated;\n      this.scope.wikiEnabled = project.is_wiki_activated;\n      this.scope.owner = project.owner.id;\n      return project;\n    };\n\n    TeamController.prototype.loadMemberStats = function() {\n      return this.rs.projects.memberStats(this.scope.projectId).then((function(_this) {\n        return function(stats) {\n          var totals;\n          totals = {};\n          _.forEach(_this.scope.totals, function(total, userId) {\n            var vals;\n            vals = _.map(stats, function(memberStats, statsKey) {\n              return memberStats[userId];\n            });\n            total = _.reduce(vals, function(sum, el) {\n              return sum + el;\n            });\n            return _this.scope.totals[userId] = total;\n          });\n          _this.scope.stats = _this._processStats(stats);\n          return _this.scope.stats.totals = _this.scope.totals;\n        };\n      })(this));\n    };\n\n    TeamController.prototype._processStat = function(stat) {\n      var key, max, min, singleStat, value;\n      max = _.max(_.toArray(stat));\n      min = _.min(_.toArray(stat));\n      singleStat = Object();\n      for (key in stat) {\n        if (!hasProp.call(stat, key)) continue;\n        value = stat[key];\n        if (value === min) {\n          singleStat[key] = 0.1;\n        } else if (value === max) {\n          singleStat[key] = 1;\n        } else {\n          singleStat[key] = (value * 0.5) / max;\n        }\n      }\n      return singleStat;\n    };\n\n    TeamController.prototype._processStats = function(stats) {\n      var key, value;\n      for (key in stats) {\n        value = stats[key];\n        stats[key] = this._processStat(value);\n      }\n      return stats;\n    };\n\n    TeamController.prototype.loadInitialData = function() {\n      var project, userRoles;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      this.loadMembers();\n      userRoles = _.map(this.scope.users, function(user) {\n        return user.role;\n      });\n      this.scope.roles = _.filter(this.scope.roles, function(role) {\n        return userRoles.indexOf(role.id) !== -1;\n      });\n      return this.loadMemberStats();\n    };\n\n    return TeamController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"TeamController\", TeamController);\n\n  TeamFiltersDirective = function() {\n    return {\n      templateUrl: \"team/team-filter.html\"\n    };\n  };\n\n  module.directive(\"tgTeamFilters\", [TeamFiltersDirective]);\n\n  TeamMemberStatsDirective = function() {\n    return {\n      templateUrl: \"team/team-member-stats.html\",\n      scope: {\n        stats: \"=\",\n        userId: \"=user\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMemberStats\", TeamMemberStatsDirective);\n\n  TeamMemberCurrentUserDirective = function() {\n    return {\n      templateUrl: \"team/team-member-current-user.html\",\n      scope: {\n        project: \"=project\",\n        currentUser: \"=currentuser\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamCurrentUser\", TeamMemberCurrentUserDirective);\n\n  TeamMembersDirective = function() {\n    var template;\n    template = \"team/team-members.html\";\n    return {\n      templateUrl: template,\n      scope: {\n        memberships: \"=\",\n        filtersQ: \"=filtersq\",\n        filtersRole: \"=filtersrole\",\n        stats: \"=\",\n        issuesEnabled: \"=issuesenabled\",\n        tasksEnabled: \"=tasksenabled\",\n        wikiEnabled: \"=wikienabled\",\n        owner: \"=owner\"\n      }\n    };\n  };\n\n  module.directive(\"tgTeamMembers\", TeamMembersDirective);\n\n  LeaveProjectDirective = function($repo, $confirm, $location, $rs, $navurls, $translate, lightboxFactory, currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var leaveConfirm;\n      leaveConfirm = function() {\n        var confirm_leave_project_text, leave_project_text;\n        leave_project_text = $translate.instant(\"TEAM.ACTION_LEAVE_PROJECT\");\n        confirm_leave_project_text = $translate.instant(\"TEAM.CONFIRM_LEAVE_PROJECT\");\n        return $confirm.ask(leave_project_text, confirm_leave_project_text).then((function(_this) {\n          return function(response) {\n            var promise;\n            promise = $rs.projects.leave($scope.project.id);\n            promise.then(function() {\n              return currentUserService.loadProjects().then(function() {\n                response.finish();\n                $confirm.notify(\"success\");\n                return $location.path($navurls.resolve(\"home\"));\n              });\n            });\n            return promise.then(null, function(response) {\n              response.finish();\n              return $confirm.notify('error', response.data._error_message);\n            });\n          };\n        })(this));\n      };\n      return $scope.leave = function() {\n        if ($scope.project.owner.id === $scope.user.id) {\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: true,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      };\n    };\n    return {\n      scope: {\n        user: \"=\",\n        project: \"=\"\n      },\n      templateUrl: \"team/leave-project.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLeaveProject\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"$tgResources\", \"$tgNavUrls\", \"$translate\", \"tgLightboxFactory\", \"tgCurrentUserService\", LeaveProjectDirective]);\n\n  membersFilter = function() {\n    return function(members, filtersQ, filtersRole) {\n      return _.filter(members, function(m) {\n        return (!filtersRole || m.role === filtersRole.id) && (!filtersQ || m.full_name.search(new RegExp(filtersQ, \"i\")) >= 0);\n      });\n    };\n  };\n\n  module.filter('membersFilter', membersFilter);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiDetailController, WikiSummaryDirective, WikiWysiwyg, bindOnce, debounce, groupBy, mixOf, module, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiDetailController = (function(superClass) {\n    extend(WikiDetailController, superClass);\n\n    WikiDetailController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$filter\", \"$log\", \"tgAppMetaService\", \"$tgNavUrls\", \"$tgAnalytics\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\", \"tgAttachmentsFullService\"];\n\n    function WikiDetailController(scope, rootscope, repo, model, confirm, rs, params, q, location, filter, log, appMetaService, navUrls, analytics, translate, errorHandlingService, projectService, attachmentsFullService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.filter = filter;\n      this.log = log;\n      this.appMetaService = appMetaService;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService1;\n      this.moveLink = bind(this.moveLink, this);\n      this.loadWiki = bind(this.loadWiki, this);\n      this.scope.$on(\"wiki:links:move\", this.moveLink);\n      this.scope.$on(\"wikipage:add\", this.loadWiki);\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      this.scope.attachmentsReady = false;\n      this.scope.$on(\"attachments:loaded\", (function(_this) {\n        return function() {\n          return _this.scope.attachmentsReady = true;\n        };\n      })(this));\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          return _this._setMeta();\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiDetailController.prototype._setMeta = function() {\n      var description, ref, ref1, ref2, title;\n      title = this.translate.instant(\"WIKI.PAGE_TITLE\", {\n        wikiPageName: this.scope.wikiSlug,\n        projectName: this.scope.project.name\n      });\n      description = this.translate.instant(\"WIKI.PAGE_DESCRIPTION\", {\n        wikiPageContent: angular.element(((ref = this.scope.wiki) != null ? ref.html : void 0) || \"\").text(),\n        totalEditions: ((ref1 = this.scope.wiki) != null ? ref1.editions : void 0) || 0,\n        lastModifiedDate: moment((ref2 = this.scope.wiki) != null ? ref2.modified_date : void 0).format(this.translate.instant(\"WIKI.DATETIME\"))\n      });\n      return this.appMetaService.setAll(title, description);\n    };\n\n    WikiDetailController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments('wikipage', this.scope.wikiId, this.scope.projectId);\n    };\n\n    WikiDetailController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiDetailController.prototype.loadWiki = function() {\n      var promise;\n      promise = this.rs.wiki.getBySlug(this.scope.projectId, this.params.slug);\n      promise.then((function(_this) {\n        return function(wiki) {\n          _this.scope.wiki = wiki;\n          _this.scope.wikiId = wiki.id;\n          _this.loadAttachments();\n          return _this.scope.wiki;\n        };\n      })(this));\n      return promise.then(null, (function(_this) {\n        return function(xhr) {\n          var data;\n          _this.scope.wikiId = null;\n          _this.scope.attachmentsReady = true;\n          if (_this.scope.project.my_permissions.indexOf(\"add_wiki_page\") === -1) {\n            return null;\n          }\n          data = {\n            project: _this.scope.projectId,\n            slug: _this.scope.wikiSlug,\n            content: \"\"\n          };\n          _this.scope.wiki = _this.model.make_model(\"wiki\", data);\n          return _this.scope.wiki;\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWiki()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiDetailController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    WikiDetailController.prototype[\"delete\"] = function() {\n      var message, title;\n      title = this.translate.instant(\"WIKI.DELETE_LIGHTBOX_TITLE\");\n      message = this.scope.wikiSlug;\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            var ctx;\n            askResponse.finish();\n            ctx = {\n              project: _this.scope.projectSlug\n            };\n            _this.location.path(_this.navUrls.resolve(\"project-wiki\", ctx));\n            _this.confirm.notify(\"success\");\n            return _this.loadWiki();\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return _this.confirm.notify(\"error\");\n          };\n          return _this.repo.remove(_this.scope.wiki).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    WikiDetailController.prototype.moveLink = function(ctx, item, itemIndex) {\n      var r, values;\n      values = this.scope.wikiLinks;\n      r = values.indexOf(item);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, item);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values);\n    };\n\n    return WikiDetailController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiDetailController\", WikiDetailController);\n\n  WikiSummaryDirective = function($log, $template, $compile, $translate, avatarService) {\n    var link, template;\n    template = $template.get(\"wiki/wiki-summary.html\", true);\n    link = function($scope, $el, $attrs, $model) {\n      var render;\n      render = function(wiki) {\n        var avatar, ctx, html, user;\n        if ($scope.usersById == null) {\n          $log.error(\"WikiSummaryDirective requires userById set in scope.\");\n        } else {\n          user = $scope.usersById[wiki.last_modifier];\n        }\n        avatar = avatarService.getAvatar(user);\n        if (user === void 0) {\n          user = {\n            name: \"unknown\",\n            avatar: avatar\n          };\n        } else {\n          user = {\n            name: user.full_name_display,\n            avatar: avatar\n          };\n        }\n        ctx = {\n          totalEditions: wiki.editions,\n          lastModifiedDate: moment(wiki.modified_date).format($translate.instant(\"WIKI.DATETIME\")),\n          user: user\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $scope.$watch($attrs.ngModel, function(wikiPage) {\n        if (!wikiPage) {\n          return;\n        }\n        return render(wikiPage);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgWikiSummary\", [\"$log\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgAvatarService\", WikiSummaryDirective]);\n\n  WikiWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $qqueue, $repo, $analytics, activityService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      $scope.editableDescription = false;\n      $scope.saveDescription = $qqueue.bindAdd(function(description, cb) {\n        var onError, onSuccess, promise;\n        onSuccess = function(wikiPage) {\n          if ($scope.item.id == null) {\n            $analytics.trackEvent(\"wikipage\", \"create\", \"create wiki page\", 1);\n            $scope.$emit(\"wikipage:add\");\n            $scope.editableDescription = $scope.project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n          }\n          activityService.fetchEntries(true);\n          return $confirm.notify(\"success\");\n        };\n        onError = function() {\n          return $confirm.notify(\"error\");\n        };\n        $scope.item.content = description;\n        if ($scope.item.id != null) {\n          promise = $repo.save($scope.item).then(onSuccess, onError);\n        } else {\n          promise = $repo.create(\"wiki\", $scope.item).then(onSuccess, onError);\n        }\n        return promise[\"finally\"](cb);\n      });\n      $scope.uploadFiles = function(file, cb) {\n        attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, 'wiki_page', file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-wiki\";\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        if ($scope.item.id != null) {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"modify_wiki_page\") !== -1;\n        } else {\n          return $scope.editableDescription = project.my_permissions.indexOf(\"add_wiki_page\") !== -1;\n        }\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription\\\"\\n        html-read-mode=\\\"true\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        project=\\\"project\\\"\\n        storage-key='storageKey'\\n        content='item.content'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.content.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.content\\\"></div>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && !item.content.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  module.directive(\"tgWikiWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$tgQqueue\", \"$tgRepo\", \"$tgAnalytics\", \"tgActivityService\", WikiWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiNavDirective, bindOnce, groupBy, mixOf, module, taiga;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiNavDirective = function($tgrepo, $log, $location, $confirm, $analytics, $loading, $template, $compile, $translate) {\n    var link, linkWikiLinks, template;\n    template = $template.get(\"wiki/wiki-nav.html\", true);\n    linkWikiLinks = function($scope, $el, $attrs) {\n      var $ctrl, addWikiLinkPermission, drake, render;\n      $ctrl = $el.controller();\n      if ($attrs.ngModel == null) {\n        return $log.error(\"WikiNavDirective: no ng-model attr is defined\");\n      }\n      addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n      drake = null;\n      render = function(wikiLinks) {\n        var deleteWikiLinkPermission, html, itemEl, scroll, tdom;\n        addWikiLinkPermission = $scope.project.my_permissions.indexOf(\"add_wiki_link\") > -1;\n        deleteWikiLinkPermission = $scope.project.my_permissions.indexOf(\"delete_wiki_link\") > -1;\n        html = template({\n          wikiLinks: wikiLinks,\n          projectSlug: $scope.projectSlug,\n          addWikiLinkPermission: addWikiLinkPermission,\n          deleteWikiLinkPermission: deleteWikiLinkPermission\n        });\n        html = $compile(html)($scope);\n        $el.off();\n        if (addWikiLinkPermission && drake) {\n          drake.destroy();\n        }\n        $el.html(html);\n        if (addWikiLinkPermission) {\n          itemEl = null;\n          tdom = $el.find(\".sortable\");\n          drake = dragula([tdom[0]], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: tdom[0],\n            moves: function(item) {\n              return $(item).is('li');\n            }\n          });\n          drake.on('dragend', function(item) {\n            var itemIndex;\n            itemEl = $(item);\n            item = itemEl.scope().link;\n            itemIndex = itemEl.index();\n            return $scope.$emit(\"wiki:links:move\", item, itemIndex);\n          });\n          scroll = autoScroll(window, {\n            margin: 20,\n            pixels: 30,\n            scrollWhenOutside: true,\n            autoScroll: function() {\n              return this.down && drake.dragging;\n            }\n          });\n        }\n        $el.on(\"click\", \".add-button\", function(event) {\n          event.preventDefault();\n          $el.find(\".new\").removeClass(\"hidden\");\n          $el.find(\".new input\").focus();\n          return $el.find(\".add-button\").hide();\n        });\n        $el.on(\"click\", \".js-delete-link\", function(event) {\n          var linkId, message, target, title;\n          event.preventDefault();\n          event.stopPropagation();\n          target = angular.element(event.currentTarget);\n          linkId = target.parents('.wiki-link').data('id');\n          title = $translate.instant(\"WIKI.DELETE_LINK_TITLE\");\n          message = $scope.wikiLinks[linkId].title;\n          return $confirm.askOnDelete(title, message).then((function(_this) {\n            return function(askResponse) {\n              var promise;\n              promise = $tgrepo.remove($scope.wikiLinks[linkId]);\n              promise.then(function() {\n                promise = $ctrl.loadWikiLinks();\n                promise.then(function() {\n                  askResponse.finish();\n                  return render($scope.wikiLinks);\n                });\n                return promise.then(null, function() {\n                  return askResponse.finish();\n                });\n              });\n              return promise.then(null, function() {\n                askResponse.finish(false);\n                return $confirm.notify(\"error\");\n              });\n            };\n          })(this));\n        });\n        return $el.on(\"keyup\", \".new input\", function(event) {\n          var currentLoading, newLink, promise, target;\n          event.preventDefault();\n          if (event.keyCode === 13) {\n            target = angular.element(event.currentTarget);\n            newLink = target.val();\n            currentLoading = $loading().target($el.find(\".new\")).start();\n            promise = $tgrepo.create(\"wiki-links\", {\n              project: $scope.projectId,\n              title: newLink\n            });\n            promise.then(function() {\n              var loadPromise;\n              $analytics.trackEvent(\"wikilink\", \"create\", \"create wiki link\", 1);\n              loadPromise = $ctrl.loadWikiLinks();\n              loadPromise.then(function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return render($scope.wikiLinks);\n              });\n              return loadPromise.then(null, function() {\n                currentLoading.finish();\n                $el.find(\".new\").addClass(\"hidden\");\n                $el.find(\".new input\").val('');\n                $el.find(\".add-button\").show();\n                return $confirm.notify(\"error\", \"Error loading wiki links\");\n              });\n            });\n            return promise.then(null, function(error) {\n              var ref;\n              currentLoading.finish();\n              $el.find(\".new input\").val(newLink);\n              $el.find(\".new input\").focus().select();\n              if ((error != null ? (ref = error.__all__) != null ? ref[0] : void 0 : void 0) != null) {\n                return $confirm.notify(\"error\", \"The link already exists\");\n              } else {\n                return $confirm.notify(\"error\");\n              }\n            });\n          } else if (event.keyCode === 27) {\n            target = angular.element(event.currentTarget);\n            $el.find(\".new\").addClass(\"hidden\");\n            $el.find(\".new input\").val('');\n            return $el.find(\".add-button\").show();\n          }\n        });\n      };\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    link = function($scope, $el, $attrs) {\n      linkWikiLinks($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiNav\", [\"$tgRepo\", \"$log\", \"$tgLocation\", \"$tgConfirm\", \"$tgAnalytics\", \"$tgLoading\", \"$tgTemplate\", \"$compile\", \"$translate\", WikiNavDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiPagesListController, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  module = angular.module(\"taigaWiki\");\n\n  WikiPagesListController = (function(superClass) {\n    extend(WikiPagesListController, superClass);\n\n    WikiPagesListController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgModel\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgNavUrls\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WikiPagesListController(scope, rootscope, repo, model, confirm, rs, params, q, navUrls, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.model = model;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.navUrls = navUrls;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this.scope.projectSlug = this.params.pslug;\n      this.scope.wikiSlug = this.params.slug;\n      this.scope.sectionName = \"Wiki\";\n      this.scope.linksVisible = false;\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    WikiPagesListController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.is_wiki_activated) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WikiPagesListController.prototype.loadWikiPages = function() {\n      var promise;\n      return promise = this.rs.wiki.list(this.scope.projectId).then((function(_this) {\n        return function(wikipages) {\n          return _this.scope.wikipages = wikipages;\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadWikiLinks = function() {\n      return this.rs.wiki.listLinks(this.scope.projectId).then((function(_this) {\n        return function(wikiLinks) {\n          var i, len, link, ref, selectedWikiLink;\n          _this.scope.wikiLinks = wikiLinks;\n          ref = _this.scope.wikiLinks;\n          for (i = 0, len = ref.length; i < len; i++) {\n            link = ref[i];\n            link.url = _this.navUrls.resolve(\"project-wiki-page\", {\n              project: _this.scope.projectSlug,\n              slug: link.href\n            });\n          }\n          return selectedWikiLink = _.find(wikiLinks, {\n            href: _this.scope.wikiSlug\n          });\n        };\n      })(this));\n    };\n\n    WikiPagesListController.prototype.loadInitialData = function() {\n      var project;\n      project = this.loadProject();\n      this.fillUsersAndRoles(project.members, project.roles);\n      return this.q.all([this.loadWikiLinks(), this.loadWikiPages()]).then(this.checkLinksPerms.bind(this));\n    };\n\n    WikiPagesListController.prototype.checkLinksPerms = function() {\n      if (this.scope.project.my_permissions.indexOf(\"add_wiki_link\") !== -1 || (this.scope.project.my_permissions.indexOf(\"view_wiki_links\") !== -1 && this.scope.wikiLinks.length)) {\n        return this.scope.linksVisible = true;\n      }\n    };\n\n    return WikiPagesListController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"WikiPagesListController\", WikiPagesListController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ChangeOwnerLightboxController, ChangeOwnerLightboxDirective, LbRequestOwnershipDirective, LightboxAddMembersWarningMessageDirective, TransferProjectStartSuccessDirective, debounce, module, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  debounce = this.taiga.debounce;\n\n  normalizeString = this.taiga.normalizeString;\n\n  module = angular.module(\"taigaKanban\");\n\n  LightboxAddMembersWarningMessageDirective = function() {\n    return {\n      templateUrl: \"admin/memberships-warning-message.html\",\n      scope: {\n        project: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgLightboxAddMembersWarningMessage\", [LightboxAddMembersWarningMessageDirective]);\n\n  LbRequestOwnershipDirective = function(lightboxService, rs, confirmService, $translate) {\n    return {\n      link: function(scope, el) {\n        lightboxService.open(el);\n        return scope.request = function() {\n          scope.loading = true;\n          return rs.projects.transferRequest(scope.projectId).then(function() {\n            scope.loading = false;\n            lightboxService.close(el);\n            return confirmService.notify(\"success\", $translate.instant(\"ADMIN.PROJECT_PROFILE.REQUEST_OWNERSHIP_SUCCESS\"));\n          });\n        };\n      },\n      templateUrl: \"common/lightbox/lightbox-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgLbRequestOwnership', [\"lightboxService\", \"tgResources\", \"$tgConfirm\", \"$translate\", LbRequestOwnershipDirective]);\n\n  ChangeOwnerLightboxController = (function() {\n    function ChangeOwnerLightboxController(rs1, lightboxService1, confirm, translate) {\n      this.rs = rs1;\n      this.lightboxService = lightboxService1;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.users = [];\n      this.q = \"\";\n      this.commentOpen = false;\n    }\n\n    ChangeOwnerLightboxController.prototype.limit = 3;\n\n    ChangeOwnerLightboxController.prototype.filterUsers = function(user) {\n      var text, username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = this.q.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    ChangeOwnerLightboxController.prototype.getUsers = function() {\n      var users;\n      if (!this.users.length && !this.q.length) {\n        users = this.activeUsers;\n      } else {\n        users = this.users;\n      }\n      users = _.reject(users, {\n        \"id\": this.currentOwnerId\n      });\n      users = _.reject(users, {\n        \"selected\": true\n      });\n      this.totalUsers = _.size(users);\n      return users.slice(0, this.limit);\n    };\n\n    ChangeOwnerLightboxController.prototype.userSearch = function() {\n      this.users = this.activeUsers;\n      this.selected = _.find(this.users, {\n        \"selected\": true\n      });\n      if (this.q) {\n        return this.users = _.filter(this.users, this.filterUsers.bind(this));\n      }\n    };\n\n    ChangeOwnerLightboxController.prototype.selectUser = function(user) {\n      this.activeUsers = _.map(this.activeUsers, function(user) {\n        user.selected = false;\n        return user;\n      });\n      user.selected = true;\n      return this.userSearch();\n    };\n\n    ChangeOwnerLightboxController.prototype.submit = function() {\n      this.loading = true;\n      return this.rs.projects.transferStart(this.projectId, this.selected.id, this.comment).then((function(_this) {\n        return function() {\n          var desc, title;\n          _this.loading = false;\n          _this.lightboxService.closeAll();\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_TITLE\");\n          desc = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.CHANGE_OWNER_SUCCESS_DESC\");\n          return _this.confirm.success(title, desc, {\n            type: \"svg\",\n            name: \"icon-speak-up\"\n          });\n        };\n      })(this));\n    };\n\n    return ChangeOwnerLightboxController;\n\n  })();\n\n  ChangeOwnerLightboxController.$inject = [\"tgResources\", \"lightboxService\", \"$tgConfirm\", \"$translate\"];\n\n  module.controller('ChangeOwnerLightbox', ChangeOwnerLightboxController);\n\n  ChangeOwnerLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $template, $compile) {\n    var link;\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: true,\n      controller: \"ChangeOwnerLightbox\",\n      controllerAs: \"vm\",\n      bindToController: {\n        currentOwnerId: \"=\",\n        projectId: \"=\",\n        activeUsers: \"=\"\n      },\n      templateUrl: \"common/lightbox/lightbox-change-owner.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbChangeOwner\", [\"lightboxService\", \"lightboxKeyboardNavigationService\", \"$tgTemplate\", \"$compile\", ChangeOwnerLightboxDirective]);\n\n  TransferProjectStartSuccessDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el) {\n      scope.close = function() {\n        return lightboxService.close(el);\n      };\n      return lightboxService.open(el);\n    };\n    return {\n      templateUrl: \"common/lightbox/lightbox-transfer-project-start-success.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbTransferProjectStartSuccess\", [\"lightboxService\", TransferProjectStartSuccessDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MembershipsController, MembershipsDirective, MembershipsRowActionsDirective, MembershipsRowAdminCheckboxDirective, MembershipsRowAvatarDirective, MembershipsRowRoleSelectorDirective, NoMoreMembershipsExplanationDirective, bindMethods, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  MembershipsController = (function(superClass) {\n    extend(MembershipsController, superClass);\n\n    MembershipsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAnalytics\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgLightboxFactory\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function MembershipsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, analytics, appMetaService, translate, auth, lightboxFactory1, errorHandlingService, projectService1) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.auth = auth;\n      this.lightboxFactory = lightboxFactory1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      bindMethods(this);\n      this.scope.project = {};\n      this.scope.filters = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.MEMBERSHIPS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"membersform:new:success\", (function(_this) {\n        return function() {\n          _this.loadInitialData();\n          return _this.analytics.trackEvent(\"membership\", \"create\", \"create memberships on admin\", 1);\n        };\n      })(this));\n    }\n\n    MembershipsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.canAddUsers = project.max_memberships === null || project.max_memberships > project.total_memberships;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    MembershipsController.prototype.loadMembers = function() {\n      var httpFilters;\n      httpFilters = this.getUrlFilters();\n      return this.rs.memberships.list(this.scope.projectId, httpFilters).then((function(_this) {\n        return function(data) {\n          _this.scope.memberships = _.filter(data.models, function(membership) {\n            return membership.user === null || membership.is_user_active;\n          });\n          _.map(_this.scope.memberships, function(member) {\n            if (member.is_owner) {\n              return _this.scope.projectOwnerEmail = member.user_email;\n            }\n          });\n          _this.scope.page = data.current;\n          _this.scope.count = data.count;\n          _this.scope.paginatedBy = data.paginatedBy;\n          return data;\n        };\n      })(this));\n    };\n\n    MembershipsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.q.all([this.loadMembers(), this.auth.refresh()]);\n    };\n\n    MembershipsController.prototype.getUrlFilters = function() {\n      var filters;\n      filters = _.pick(this.location.search(), \"page\");\n      if (!filters.page) {\n        filters.page = 1;\n      }\n      return filters;\n    };\n\n    MembershipsController.prototype.addNewMembers = function() {\n      return this.lightboxFactory.create('tg-lb-add-members', {\n        \"class\": \"lightbox lightbox-add-member\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.scope.project\n      });\n    };\n\n    MembershipsController.prototype.showLimitUsersWarningMessage = function() {\n      var icon, message, title;\n      title = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING\");\n      message = this.translate.instant(\"ADMIN.MEMBERSHIPS.LIMIT_USERS_WARNING_MESSAGE\", {\n        members: this.scope.project.max_memberships\n      });\n      icon = \"/\" + window._version + \"/svg/icons/team-question.svg\";\n      return this.confirm.success(title, message, {\n        name: icon,\n        type: \"img\"\n      });\n    };\n\n    return MembershipsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"MembershipsController\", MembershipsController);\n\n  MembershipsDirective = function($template, $compile) {\n    var link, linkPagination, template;\n    template = $template.get(\"admin/admin-membership-paginator.html\", true);\n    linkPagination = function($scope, $el, $attrs, $ctrl) {\n      var $pagEl, afterCurrent, atBegin, atEnd, beforeCurrent, getNumPages, renderPagination;\n      afterCurrent = 2;\n      beforeCurrent = 4;\n      atBegin = 2;\n      atEnd = 2;\n      $pagEl = $el.find(\".memberships-paginator\");\n      getNumPages = function() {\n        var numPages;\n        numPages = $scope.count / $scope.paginatedBy;\n        if (parseInt(numPages, 10) < numPages) {\n          numPages = parseInt(numPages, 10) + 1;\n        } else {\n          numPages = parseInt(numPages, 10);\n        }\n        return numPages;\n      };\n      renderPagination = function() {\n        var cpage, html, i, j, numPages, options, pages, ref;\n        numPages = getNumPages();\n        if (numPages <= 1) {\n          $pagEl.hide();\n          return;\n        }\n        pages = [];\n        options = {};\n        options.pages = pages;\n        options.showPrevious = $scope.page > 1;\n        options.showNext = !($scope.page === numPages);\n        cpage = $scope.page;\n        for (i = j = 1, ref = numPages; 1 <= ref ? j <= ref : j >= ref; i = 1 <= ref ? ++j : --j) {\n          if (i === (cpage + afterCurrent) && numPages > (cpage + afterCurrent + atEnd)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i === (cpage - beforeCurrent) && cpage > (atBegin + beforeCurrent)) {\n            pages.push({\n              classes: \"dots\",\n              type: \"dots\"\n            });\n          } else if (i > (cpage + afterCurrent) && i <= (numPages - atEnd)) {\n\n          } else if (i < (cpage - beforeCurrent) && i > atBegin) {\n\n          } else if (i === cpage) {\n            pages.push({\n              classes: \"active\",\n              num: i,\n              type: \"page-active\"\n            });\n          } else {\n            pages.push({\n              classes: \"page\",\n              num: i,\n              type: \"page\"\n            });\n          }\n        }\n        html = template(options);\n        html = $compile(html)($scope);\n        $pagEl.html(html);\n        return $pagEl.show();\n      };\n      $scope.$watch(\"memberships\", function(value) {\n        if (!value) {\n          return;\n        }\n        return renderPagination();\n      });\n      $el.on(\"click\", \".memberships-paginator a.next\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page + 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      $el.on(\"click\", \".memberships-paginator a.previous\", function(event) {\n        event.preventDefault();\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", $scope.page - 1);\n          return $ctrl.loadMembers();\n        });\n      });\n      return $el.on(\"click\", \".memberships-paginator li.page > a\", function(event) {\n        var pagenum, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        pagenum = target.data(\"pagenum\");\n        return $scope.$apply(function() {\n          $ctrl.selectFilter(\"page\", pagenum);\n          return $ctrl.loadMembers();\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      linkPagination($scope, $el, $attrs, $ctrl);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMemberships\", [\"$tgTemplate\", \"$compile\", MembershipsDirective]);\n\n  MembershipsRowAvatarDirective = function($log, $template, $translate, $compile, avatarService) {\n    var link, template;\n    template = $template.get(\"admin/memberships-row-avatar.html\", true);\n    link = function($scope, $el, $attrs) {\n      var member, pending, render;\n      pending = $translate.instant(\"ADMIN.MEMBERSHIP.STATUS_PENDING\");\n      render = function(member) {\n        var avatar, ctx, html;\n        avatar = avatarService.getAvatar(member);\n        ctx = {\n          full_name: member.full_name ? member.full_name : \"\",\n          email: member.user_email ? member.user_email : member.email,\n          imgurl: avatar.url,\n          bg: avatar.bg,\n          pending: !member.is_user_active ? pending : \"\",\n          isOwner: member.is_owner\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowAvatar == null) {\n        return $log.error(\"MembershipsRowAvatarDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAvatar);\n      render(member);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAvatar\", [\"$log\", \"$tgTemplate\", '$translate', \"$compile\", \"tgAvatarService\", MembershipsRowAvatarDirective]);\n\n  MembershipsRowAdminCheckboxDirective = function($log, $repo, $confirm, $template, $compile) {\n    var link, template;\n    template = $template.get(\"admin/admin-memberships-row-checkbox.html\", true);\n    link = function($scope, $el, $attrs) {\n      var html, member, render;\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      if ($attrs.tgMembershipsRowAdminCheckbox == null) {\n        return $log.error(\"MembershipsRowAdminCheckboxDirective: the directive need a member\");\n      }\n      member = $scope.$eval($attrs.tgMembershipsRowAdminCheckbox);\n      if (member.is_owner) {\n        $el.find(\".js-check\").remove();\n        return;\n      }\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          inputId: \"is-admin-\" + member.id\n        };\n        html = template(ctx);\n        html = $compile(html)($scope);\n        return $el.html(html);\n      };\n      $el.on(\"click\", \":checkbox\", (function(_this) {\n        return function(event) {\n          var onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function(data) {\n            member.revert();\n            $el.find(\":checkbox\").prop(\"checked\", member.is_admin);\n            return $confirm.notify(\"error\", data.is_admin[0]);\n          };\n          target = angular.element(event.currentTarget);\n          member.is_admin = target.prop(\"checked\");\n          return $repo.save(member).then(onSuccess, onError);\n        };\n      })(this));\n      html = render(member);\n      if (member.is_admin) {\n        return $el.find(\":checkbox\").prop(\"checked\", true);\n      }\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowAdminCheckbox\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgTemplate\", \"$compile\", MembershipsRowAdminCheckboxDirective]);\n\n  MembershipsRowRoleSelectorDirective = function($log, $repo, $confirm) {\n    var link, template;\n    template = _.template(\"<select>\\n    <% _.each(roleList, function(role) { %>\\n    <option value=\\\"<%- role.id %>\\\" <% if(selectedRole === role.id){ %>selected=\\\"selected\\\"<% } %>>\\n        <%- role.name %>\\n    </option>\\n    <% }); %>\\n</select>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, html, member, render;\n      render = function(member) {\n        var ctx, html;\n        ctx = {\n          roleList: $scope.project.roles,\n          selectedRole: member.role\n        };\n        html = template(ctx);\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowRoleSelector == null) {\n        return $log.error(\"MembershipsRowRoleSelectorDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowRoleSelector);\n      html = render(member);\n      $el.on(\"change\", \"select\", (function(_this) {\n        return function(event) {\n          var newRole, onError, onSuccess, target;\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          target = angular.element(event.currentTarget);\n          newRole = parseInt(target.val(), 10);\n          if (member.role !== newRole) {\n            member.role = newRole;\n            return $repo.save(member).then(onSuccess, onError);\n          }\n        };\n      })(this));\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowRoleSelector\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", MembershipsRowRoleSelectorDirective]);\n\n  MembershipsRowActionsDirective = function($log, $repo, $rs, $confirm, $compile, $translate, $location, $navUrls, lightboxFactory, projectService) {\n    var activedTemplate, link, pendingTemplate;\n    activedTemplate = \"<div class=\\\"active\\\"\\n     translate=\\\"ADMIN.MEMBERSHIP.STATUS_ACTIVE\\\">\\n</div>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    pendingTemplate = \"<a class=\\\"resend js-resend\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.RESEND' | translate }}\\\"\\n   translate=\\\"ADMIN.MEMBERSHIP.RESEND\\\">\\n</a>\\n<a class=\\\"delete\\\" href=\\\"\\\"\\n   title=\\\"{{ 'ADMIN.MEMBERSHIP.DELETE_MEMBER' | translate }}\\\">\\n    <tg-svg svg-icon=\\\"icon-trash\\\"></tg-svg>\\n</a>\";\n    link = function($scope, $el, $attrs) {\n      var $ctrl, leaveConfirm, member, render;\n      render = function(member) {\n        var html;\n        if (member.user) {\n          html = $compile(activedTemplate)($scope);\n        } else {\n          html = $compile(pendingTemplate)($scope);\n        }\n        return $el.html(html);\n      };\n      if ($attrs.tgMembershipsRowActions == null) {\n        return $log.error(\"MembershipsRowActionsDirective: the directive need a member\");\n      }\n      $ctrl = $el.controller();\n      member = $scope.$eval($attrs.tgMembershipsRowActions);\n      render(member);\n      $el.on(\"click\", \".js-resend\", function(event) {\n        var onError, onSuccess;\n        event.preventDefault();\n        onSuccess = function() {\n          var text;\n          text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_SEND_INVITATION\", {\n            email: $scope.member.email\n          });\n          return $confirm.notify(\"success\", text);\n        };\n        onError = function() {\n          var text;\n          text = $translate.instant(\"ADMIM.MEMBERSHIP.ERROR_SEND_INVITATION\");\n          return $confirm.notify(\"error\", text);\n        };\n        return $rs.memberships.resendInvitation($scope.member.id).then(onSuccess, onError);\n      });\n      leaveConfirm = function() {\n        var defaultMsg, message, title;\n        title = $translate.instant(\"ADMIN.MEMBERSHIP.DELETE_MEMBER\");\n        defaultMsg = $translate.instant(\"ADMIN.MEMBERSHIP.DEFAULT_DELETE_MESSAGE\", {\n          email: member.email\n        });\n        message = member.user ? member.full_name : defaultMsg;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var onError, onSuccess;\n          onSuccess = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish();\n              if (member.user !== $scope.user.id) {\n                if ($scope.page > 1 && ($scope.count - 1) <= $scope.paginatedBy) {\n                  $ctrl.selectFilter(\"page\", $scope.page - 1);\n                }\n                projectService.fetchProject().then(function() {\n                  return $ctrl.loadInitialData();\n                });\n              } else {\n                $location.path($navUrls.resolve(\"home\"));\n              }\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.SUCCESS_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"success\", text, null, 5000);\n            };\n          })(this);\n          onError = (function(_this) {\n            return function() {\n              var text;\n              askResponse.finish(false);\n              text = $translate.instant(\"ADMIN.MEMBERSHIP.ERROR_DELETE\", {\n                message: message\n              });\n              return $confirm.notify(\"error\", text);\n            };\n          })(this);\n          return $repo.remove(member).then(onSuccess, onError);\n        });\n      };\n      $el.on(\"click\", \".delete\", function(event) {\n        var isCurrentUser;\n        event.preventDefault();\n        if ($scope.project.owner.id === member.user) {\n          isCurrentUser = $scope.user.id === member.user;\n          return lightboxFactory.create(\"tg-lightbox-leave-project-warning\", {\n            \"class\": \"lightbox lightbox-leave-project-warning\"\n          }, {\n            isCurrentUser: isCurrentUser,\n            project: $scope.project\n          });\n        } else {\n          return leaveConfirm();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgMembershipsRowActions\", [\"$log\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"$compile\", \"$translate\", \"$tgLocation\", \"$tgNavUrls\", \"tgLightboxFactory\", \"tgProjectService\", MembershipsRowActionsDirective]);\n\n  NoMoreMembershipsExplanationDirective = function() {\n    return {\n      templateUrl: \"admin/no-more-memberships-explanation.html\",\n      scope: {\n        project: \"=\",\n        ownerEmail: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgNoMoreMembershipsExplanation\", [NoMoreMembershipsExplanationDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminNavigationDirective, module;\n\n  AdminNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgAdminNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#adminmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaAdmin\");\n\n  module.directive(\"tgAdminNavigation\", AdminNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AdminProjectChangeOwnerDirective, AdminProjectRequestOwnershipDirective, AdminProjectRestrictionsDirective, CsvEpicDirective, CsvExporterController, CsvExporterEpicsController, CsvExporterIssuesController, CsvExporterTasksController, CsvExporterUserstoriesController, CsvIssueDirective, CsvTaskDirective, CsvUsDirective, ProjectDefaultValuesDirective, ProjectExportDirective, ProjectLogoDirective, ProjectLogoModelDirective, ProjectModulesDirective, ProjectProfileController, ProjectProfileDirective, bindOnce, debounce, groupBy, joinStr, mixOf, module, scopeDefer, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  scopeDefer = this.taiga.scopeDefer;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectProfileController = (function(superClass) {\n    extend(ProjectProfileController, superClass);\n\n    ProjectProfileController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"$tgAuth\", \"tgCurrentUserService\", \"tgErrorHandlingService\", \"tgProjectService\", \"$tgModel\"];\n\n    function ProjectProfileController(scope1, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, tgAuth, currentUserService1, errorHandlingService, projectService1, model1) {\n      var promise;\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.tgAuth = tgAuth;\n      this.currentUserService = currentUserService1;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.model = model1;\n      this.scope.project = {};\n      this.scope.projectTags = [];\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          _this.appMetaService.setAll(title, description);\n          return _this.fillUsersAndRoles(_this.scope.project.members, _this.scope.project.roles);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:loaded\", (function(_this) {\n        return function() {\n          var description, sectionName, title;\n          sectionName = _this.translate.instant(_this.scope.sectionName);\n          title = _this.translate.instant(\"ADMIN.PROJECT_PROFILE.PAGE_TITLE\", {\n            sectionName: sectionName,\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n    }\n\n    ProjectProfileController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.epicStatusList = _.sortBy(project.epic_statuses, \"order\");\n      this.scope.usStatusList = _.sortBy(project.us_statuses, \"order\");\n      this.scope.pointsList = _.sortBy(project.points, \"order\");\n      this.scope.taskStatusList = _.sortBy(project.task_statuses, \"order\");\n      this.scope.issueTypesList = _.sortBy(project.issue_types, \"order\");\n      this.scope.issueStatusList = _.sortBy(project.issue_statuses, \"order\");\n      this.scope.prioritiesList = _.sortBy(project.priorities, \"order\");\n      this.scope.severitiesList = _.sortBy(project.severities, \"order\");\n      scopeDefer(this.scope, (function(_this) {\n        return function() {\n          return _this.scope.$emit('project:loaded', project);\n        };\n      })(this));\n      this.scope.projectTags = _.map(this.scope.project.tags, (function(_this) {\n        return function(it) {\n          return [it, _this.scope.project.tags_colors[it]];\n        };\n      })(this));\n      return project;\n    };\n\n    ProjectProfileController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.tgAuth.refresh();\n    };\n\n    ProjectProfileController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.project);\n    };\n\n    ProjectProfileController.prototype.addTag = function(name, color) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      tags.push(name);\n      this.scope.projectTags.push([name, null]);\n      return this.scope.project.tags = tags;\n    };\n\n    ProjectProfileController.prototype.deleteTag = function(tag) {\n      var tags;\n      tags = _.clone(this.scope.project.tags);\n      _.pull(tags, tag[0]);\n      _.remove(this.scope.projectTags, (function(_this) {\n        return function(it) {\n          return it[0] === tag[0];\n        };\n      })(this));\n      return this.scope.project.tags = tags;\n    };\n\n    return ProjectProfileController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectProfileController\", ProjectProfileController);\n\n  ProjectProfileDirective = function($repo, $confirm, $loading, $navurls, $location, projectService, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, form, submit, submitButton;\n      $ctrl = $el.controller();\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, privacyChanged, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          privacyChanged = $scope.project.isAttributeModified(\"is_private\");\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            var newUrl;\n            currentLoading.finish();\n            if (privacyChanged && $scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-public-to-private\", \"Change project privacy from public to private\", 1);\n            } else if (privacyChanged && !$scope.project.is_private) {\n              $analytics.trackEvent(\"project-privacy-changed\", \"from-private-to-public\", \"Change project privacy from private to public\", 1);\n            }\n            $confirm.notify(\"success\");\n            newUrl = $navurls.resolve(\"project-admin-project-profile-details\", {\n              project: $scope.project.slug\n            });\n            $location.path(newUrl);\n            projectService.fetchProject().then((function(_this) {\n              return function() {\n                return $ctrl.loadInitialData();\n              };\n            })(this));\n            return currentUserService.loadProjects();\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectProfile\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgNavUrls\", \"$tgLocation\", \"tgProjectService\", \"tgCurrentUserService\", \"$tgAnalytics\", ProjectProfileDirective]);\n\n  ProjectDefaultValuesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $rootScope.$broadcast(\"admin:project-default-values:updated\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectDefaultValues\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectDefaultValuesDirective]);\n\n  ProjectModulesDirective = function($rootScope, $repo, $confirm, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = (function(_this) {\n        return function() {\n          var form, promise;\n          form = $el.find(\"form\").checksley();\n          form.initializeFields();\n          form.reset();\n          if (!form.validate()) {\n            return;\n          }\n          promise = $repo.save($scope.project);\n          promise.then(function() {\n            $scope.$emit(\"project:loaded\", $scope.project);\n            $rootScope.$broadcast(\"admin:project-modules:updated\");\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this);\n      $el.on(\"change\", \".module-activation.module-direct-active input\", function(event) {\n        event.preventDefault();\n        return $scope.$applyAsync(submit);\n      });\n      $el.on(\"submit\", \"form\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n      $el.on(\"keydown\", \".videoconference-attributes input\", function(e) {\n        return e.which !== 32;\n      });\n      $scope.$watch(\"project.videoconferences\", function(newVal, oldVal) {\n        if ((newVal != null) && (oldVal != null) && newVal !== oldVal) {\n          return $scope.project.videoconferences_extra_data = \"\";\n        }\n      });\n      $scope.$watch(\"isVideoconferenceActivated\", function(newValue, oldValue) {\n        if (newValue === false) {\n          $scope.project.videoconferences = null;\n          $scope.project.videoconferences_extra_data = \"\";\n          if (oldValue === true) {\n            return submit();\n          }\n        }\n      });\n      return $scope.$watch(\"project\", function(project) {\n        if (project.videoconferences != null) {\n          return $scope.isVideoconferenceActivated = true;\n        } else {\n          return $scope.isVideoconferenceActivated = false;\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectModules\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", ProjectModulesDirective]);\n\n  ProjectExportDirective = function($window, $rs, $confirm, $translate, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var asyn_message, buttonsEl, dump_ready_text, hideButtons, hideResult, hideSpinner, loading_msg, loading_title, resultEl, resultMessageEl, resultTitleEl, setAsyncMessage, setAsyncTitle, setLoadingMessage, setLoadingTitle, setSyncMessage, setSyncTitle, showButtons, showErrorMode, showExportResultAsyncMode, showExportResultSyncMode, showLoadingMode, showResult, showSpinner, spinnerEl, syn_message;\n      buttonsEl = $el.find(\".admin-project-export-buttons\");\n      showButtons = function() {\n        return buttonsEl.removeClass(\"hidden\");\n      };\n      hideButtons = function() {\n        return buttonsEl.addClass(\"hidden\");\n      };\n      resultEl = $el.find(\".admin-project-export-result\");\n      showResult = function() {\n        return resultEl.removeClass(\"hidden\");\n      };\n      hideResult = function() {\n        return resultEl.addClass(\"hidden\");\n      };\n      spinnerEl = $el.find(\".spin\");\n      showSpinner = function() {\n        return spinnerEl.removeClass(\"hidden\");\n      };\n      hideSpinner = function() {\n        return spinnerEl.addClass(\"hidden\");\n      };\n      resultTitleEl = $el.find(\".result-title\");\n      loading_title = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_TITLE\");\n      loading_msg = $translate.instant(\"ADMIN.PROJECT_EXPORT.LOADING_MESSAGE\");\n      dump_ready_text = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.DUMP_READY\"));\n      };\n      asyn_message = function() {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.ASYNC_MESSAGE\"));\n      };\n      syn_message = function(url) {\n        return resultTitleEl.html($translate.instant(\"ADMIN.PROJECT_EXPORT.SYNC_MESSAGE\", {\n          url: url\n        }));\n      };\n      setLoadingTitle = function() {\n        return resultTitleEl.html(loading_title);\n      };\n      setAsyncTitle = function() {\n        return resultTitleEl.html(loading_msg);\n      };\n      setSyncTitle = function() {\n        return resultTitleEl.html(dump_ready_text);\n      };\n      resultMessageEl = $el.find(\".result-message \");\n      setLoadingMessage = function() {\n        return resultMessageEl.html(loading_msg);\n      };\n      setAsyncMessage = function() {\n        return resultMessageEl.html(asyn_message);\n      };\n      setSyncMessage = function(url) {\n        return resultMessageEl.html(syn_message(url));\n      };\n      showLoadingMode = function() {\n        showSpinner();\n        setLoadingTitle();\n        setLoadingMessage();\n        hideButtons();\n        return showResult();\n      };\n      showExportResultAsyncMode = function() {\n        hideSpinner();\n        setAsyncTitle();\n        return setAsyncMessage();\n      };\n      showExportResultSyncMode = function(url) {\n        hideSpinner();\n        setSyncTitle();\n        return setSyncMessage(url);\n      };\n      showErrorMode = function() {\n        hideSpinner();\n        hideResult();\n        return showButtons();\n      };\n      return $el.on(\"click\", \".button-export\", debounce(2000, (function(_this) {\n        return function(event) {\n          var onError, onSuccess;\n          event.preventDefault();\n          onSuccess = function(result) {\n            var dumpUrl;\n            $analytics.trackEvent(\"exporter\", \"export-project\", \"Exported project\", 1);\n            if (result.status === 202) {\n              return showExportResultAsyncMode();\n            } else {\n              dumpUrl = result.data.url;\n              showExportResultSyncMode(dumpUrl);\n              return $window.open(dumpUrl, \"_blank\");\n            }\n          };\n          onError = function(result) {\n            var errorMsg, ref;\n            showErrorMode();\n            errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = $translate.instant(\"ADMIN.PROJECT_EXPORT.ERROR_BUSY\", {\n                message: result.data._error_message\n              });\n            }\n            return $confirm.notify(\"error\", errorMsg);\n          };\n          showLoadingMode();\n          return $rs.projects[\"export\"]($scope.projectId).then(onSuccess, onError);\n        };\n      })(this)));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectExport\", [\"$window\", \"$tgResources\", \"$tgConfirm\", \"$translate\", \"$tgAnalytics\", ProjectExportDirective]);\n\n  CsvExporterController = (function(superClass) {\n    extend(CsvExporterController, superClass);\n\n    CsvExporterController.$inject = [\"$scope\", \"$rootScope\", \"$tgUrls\", \"$tgConfirm\", \"$tgResources\", \"$translate\"];\n\n    function CsvExporterController(scope1, rootscope, urls, confirm, rs, translate) {\n      this.scope = scope1;\n      this.rootscope = rootscope;\n      this.urls = urls;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.translate = translate;\n      this._deleteUuid = bind(this._deleteUuid, this);\n      this._generateUuid = bind(this._generateUuid, this);\n      this.setCsvUuid = bind(this.setCsvUuid, this);\n      this.rootscope.$on(\"project:loaded\", this.setCsvUuid);\n      this.scope.$watch(\"csvUuid\", (function(_this) {\n        return function(value) {\n          if (value) {\n            return _this.scope.csvUrl = _this.urls.resolveAbsolute(_this.type + \"-csv\", value);\n          } else {\n            return _this.scope.csvUrl = \"\";\n          }\n        };\n      })(this));\n    }\n\n    CsvExporterController.prototype.setCsvUuid = function() {\n      return this.scope.csvUuid = this.scope.project[this.type + \"_csv_uuid\"];\n    };\n\n    CsvExporterController.prototype._generateUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"regenerate_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype._deleteUuid = function(response) {\n      var promise;\n      if (response == null) {\n        response = null;\n      }\n      promise = this.rs.projects[\"delete_\" + this.type + \"_csv_uuid\"](this.scope.projectId);\n      promise.then((function(_this) {\n        return function(data) {\n          var ref;\n          return _this.scope.csvUuid = (ref = data.data) != null ? ref.uuid : void 0;\n        };\n      })(this));\n      promise.then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n      promise[\"finally\"](function() {\n        if (response) {\n          return response.finish();\n        }\n      });\n      return promise;\n    };\n\n    CsvExporterController.prototype.regenerateUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.REGENERATE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._generateUuid);\n      } else {\n        return this._generateUuid();\n      }\n    };\n\n    CsvExporterController.prototype.deleteUuid = function() {\n      var subtitle, title;\n      if (this.scope.csvUuid) {\n        title = this.translate.instant(\"ADMIN.REPORTS.DELETE_TITLE\");\n        subtitle = this.translate.instant(\"ADMIN.REPORTS.DELETE_SUBTITLE\");\n        return this.confirm.ask(title, subtitle).then(this._deleteUuid);\n      } else {\n        return this._deleteUuid();\n      }\n    };\n\n    return CsvExporterController;\n\n  })(taiga.Controller);\n\n  CsvExporterEpicsController = (function(superClass) {\n    extend(CsvExporterEpicsController, superClass);\n\n    function CsvExporterEpicsController() {\n      return CsvExporterEpicsController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterEpicsController.prototype.type = \"epics\";\n\n    return CsvExporterEpicsController;\n\n  })(CsvExporterController);\n\n  CsvExporterUserstoriesController = (function(superClass) {\n    extend(CsvExporterUserstoriesController, superClass);\n\n    function CsvExporterUserstoriesController() {\n      return CsvExporterUserstoriesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterUserstoriesController.prototype.type = \"userstories\";\n\n    return CsvExporterUserstoriesController;\n\n  })(CsvExporterController);\n\n  CsvExporterTasksController = (function(superClass) {\n    extend(CsvExporterTasksController, superClass);\n\n    function CsvExporterTasksController() {\n      return CsvExporterTasksController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterTasksController.prototype.type = \"tasks\";\n\n    return CsvExporterTasksController;\n\n  })(CsvExporterController);\n\n  CsvExporterIssuesController = (function(superClass) {\n    extend(CsvExporterIssuesController, superClass);\n\n    function CsvExporterIssuesController() {\n      return CsvExporterIssuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    CsvExporterIssuesController.prototype.type = \"issues\";\n\n    return CsvExporterIssuesController;\n\n  })(CsvExporterController);\n\n  module.controller(\"CsvExporterEpicsController\", CsvExporterEpicsController);\n\n  module.controller(\"CsvExporterUserstoriesController\", CsvExporterUserstoriesController);\n\n  module.controller(\"CsvExporterTasksController\", CsvExporterTasksController);\n\n  module.controller(\"CsvExporterIssuesController\", CsvExporterIssuesController);\n\n  CsvEpicDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_EPIC\";\n    };\n    return {\n      controller: \"CsvExporterEpicsController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvEpic\", [\"$translate\", CsvEpicDirective]);\n\n  CsvUsDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_US\";\n    };\n    return {\n      controller: \"CsvExporterUserstoriesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvUs\", [\"$translate\", CsvUsDirective]);\n\n  CsvTaskDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_TASK\";\n    };\n    return {\n      controller: \"CsvExporterTasksController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvTask\", [\"$translate\", CsvTaskDirective]);\n\n  CsvIssueDirective = function($translate) {\n    var link;\n    link = function($scope) {\n      return $scope.sectionTitle = \"ADMIN.CSV.SECTION_TITLE_ISSUE\";\n    };\n    return {\n      controller: \"CsvExporterIssuesController\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"admin/project-csv.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  module.directive(\"tgCsvIssue\", [\"$translate\", CsvIssueDirective]);\n\n  ProjectLogoDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").addClass(\"active\");\n      };\n      onSuccess = function(response) {\n        var project;\n        project = $model.make_model(\"projects\", response.data);\n        $scope.project = project;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-logo\", function() {\n        return $el.find(\"#logo-field\").click();\n      });\n      $el.on(\"change\", \"#logo-field\", function(event) {\n        if ($scope.logoAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.projects.changeLogo($scope.project.id, $scope.logoAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-default-logo\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.projects.removeLogo($scope.project.id).then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectLogo\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", ProjectLogoDirective]);\n\n  ProjectLogoModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgProjectLogoModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgProjectLogoModel', ['$parse', ProjectLogoModelDirective]);\n\n  AdminProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        \"project\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRestrictions', [AdminProjectRestrictionsDirective]);\n\n  AdminProjectRequestOwnershipDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.requestOwnership = function() {\n          return lightboxFactory.create(\"tg-lb-request-ownership\", {\n            \"class\": \"lightbox lightbox-request-ownership\"\n          }, {\n            projectId: scope.projectId\n          });\n        };\n      },\n      scope: {\n        \"projectId\": \"=\",\n        \"owner\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-request-ownership.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectRequestOwnership', [\"tgLightboxFactory\", AdminProjectRequestOwnershipDirective]);\n\n  AdminProjectChangeOwnerDirective = function(lightboxFactory) {\n    return {\n      link: function(scope) {\n        return scope.changeOwner = function() {\n          return lightboxFactory.create(\"tg-lb-change-owner\", {\n            \"class\": \"lightbox lightbox-select-user\",\n            \"project-id\": \"projectId\",\n            \"active-users\": \"activeUsers\",\n            \"current-owner-id\": \"currentOwnerId\"\n          }, {\n            projectId: scope.projectId,\n            activeUsers: scope.activeUsers,\n            currentOwnerId: scope.owner.id,\n            members: scope.members\n          });\n        };\n      },\n      scope: {\n        \"activeUsers\": \"=\",\n        \"projectId\": \"=\",\n        \"owner\": \"=\",\n        \"members\": \"=\"\n      },\n      templateUrl: \"admin/admin-project-change-owner.html\"\n    };\n  };\n\n  module.directive('tgAdminProjectChangeOwner', [\"tgLightboxFactory\", AdminProjectChangeOwnerDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CHECKBOX_TYPE, DATE_TYPE, DROPDOWN_TYPE, MULTILINE_TYPE, NUMBER_TYPE, ProjectCustomAttributesController, ProjectCustomAttributesDirective, ProjectDueDatesValues, ProjectDueDatesValuesController, ProjectSwimlanesSingle, ProjectSwimlanesValue, ProjectSwimlanesValuesController, ProjectSwimlanesWipDirective, ProjectTagsController, ProjectTagsDirective, ProjectValuesController, ProjectValuesDirective, ProjectValuesSectionController, RICHTEXT_TYPE, SortableSwimlanes, TEXT_TYPE, TYPE_CHOICES, URL_TYPE, bindOnce, debounce, getDefaulColorList, groupBy, joinStr, mixOf, module, taiga, toString, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  trim = this.taiga.trim;\n\n  toString = this.taiga.toString;\n\n  joinStr = this.taiga.joinStr;\n\n  groupBy = this.taiga.groupBy;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  getDefaulColorList = this.taiga.getDefaulColorList;\n\n  module = angular.module(\"taigaAdmin\");\n\n  ProjectValuesSectionController = (function(superClass) {\n    extend(ProjectValuesSectionController, superClass);\n\n    ProjectValuesSectionController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function ProjectValuesSectionController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, appMetaService, translate, errorHandlingService, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService1;\n      this.scope.project = {};\n      this.scope.$on(\"project:load\", (function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            return _this.loadProject();\n          });\n        };\n      })(this));\n      this.loadInitialData();\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.PROJECT_VALUES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n    }\n\n    ProjectValuesSectionController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    ProjectValuesSectionController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return promise;\n    };\n\n    return ProjectValuesSectionController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectValuesSectionController\", ProjectValuesSectionController);\n\n  ProjectValuesController = (function(superClass) {\n    extend(ProjectValuesController, superClass);\n\n    ProjectValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    function ProjectValuesController(scope, rootscope, repo, confirm, rs) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.moveValue = bind(this.moveValue, this);\n      this.loadValues = bind(this.loadValues, this);\n      this.scope.$on(\"admin:project-values:move\", this.moveValue);\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadValues();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.values = values;\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectValuesController.prototype.moveValue = function(ctx, itemValue, itemIndex) {\n      var r, values;\n      values = this.scope.values;\n      r = values.indexOf(itemValue);\n      values.splice(r, 1);\n      values.splice(itemIndex, 0, itemValue);\n      _.each(values, function(value, index) {\n        return value.order = index;\n      });\n      return this.repo.saveAll(values).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"admin:project-values:updated\");\n        };\n      })(this));\n    };\n\n    return ProjectValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectValuesController\", ProjectValuesController);\n\n  ProjectSwimlanesValuesController = (function(superClass) {\n    extend(ProjectSwimlanesValuesController, superClass);\n\n    ProjectSwimlanesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgProjectService\"];\n\n    function ProjectSwimlanesValuesController(scope, rootscope, repo, translate, confirm, rs, projectService1) {\n      var unwatch;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.projectService = projectService1;\n      this.removeSwimlane = bind(this.removeSwimlane, this);\n      this.loadSwimlanes = bind(this.loadSwimlanes, this);\n      this.filterArchivedSwimlaneStatus = bind(this.filterArchivedSwimlaneStatus, this);\n      this.filterArchivedProjectStatuses = bind(this.filterArchivedProjectStatuses, this);\n      this.updatedSwimlanePosition = bind(this.updatedSwimlanePosition, this);\n      this.setDefaultSwimlane = bind(this.setDefaultSwimlane, this);\n      this.updateSwimlane = bind(this.updateSwimlane, this);\n      this.addSwimlane = bind(this.addSwimlane, this);\n      this.scope.$on(\"swimlane:load\", (function(_this) {\n        return function() {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n      unwatch = this.scope.$watch(\"resource\", (function(_this) {\n        return function(resource) {\n          if (resource) {\n            _this.loadSwimlanes();\n            return unwatch();\n          }\n        };\n      })(this));\n    }\n\n    ProjectSwimlanesValuesController.prototype.addSwimlane = function() {\n      var promise;\n      promise = this.rs[this.scope.resource].create(this.scope.projectId, this.scope.swimlane.name);\n      promise.success((function(_this) {\n        return function(values) {\n          _this.scope.swimlaneAdded();\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n      return promise.error((function(_this) {\n        return function() {\n          _this.confirm.notify('light-error', _this.translate.instant(\"ADMIN.PROJECT_KANBAN_OPTIONS.ACTION_ADD_SWIMLANE\"));\n          return _this.scope.hideSwimlaneForm();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updateSwimlane = function(swimlane, name) {\n      return this.rs[this.scope.resource].edit(swimlane.id, name).then((function(_this) {\n        return function(values) {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.setDefaultSwimlane = function(swimlane) {\n      return this.rs.projects.patch_default_swimlane(this.scope.projectId, swimlane.id).then((function(_this) {\n        return function() {\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.updatedSwimlanePosition = function(swimlane, position) {\n      var newSwimlanesOrder, prevSwimlane, swimlanesOrderArrayFiltered;\n      prevSwimlane = this.scope.values.find(function(value) {\n        return value.id === swimlane.id;\n      });\n      if (prevSwimlane.order === position) {\n        return;\n      }\n      swimlanesOrderArrayFiltered = this.scope.values.filter((function(_this) {\n        return function(value, index) {\n          return value.id !== swimlane.id;\n        };\n      })(this));\n      swimlanesOrderArrayFiltered.splice(position, 0, swimlane);\n      newSwimlanesOrder = swimlanesOrderArrayFiltered.map((function(_this) {\n        return function(swimlane, index) {\n          return [swimlane.id, index];\n        };\n      })(this));\n      return this.rs[this.scope.resource].bulkUpdateOrder(this.scope.projectId, newSwimlanesOrder).then((function(_this) {\n        return function(values) {\n          return _this.loadSwimlanes();\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedProjectStatuses = function() {\n      return this.scope.project.us_statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.filterArchivedSwimlaneStatus = function(swimlane) {\n      return swimlane.statuses.filter((function(_this) {\n        return function(status) {\n          return status.is_archived !== true;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.loadSwimlanes = function() {\n      return this.rs[this.scope.resource].list(this.scope.projectId).then((function(_this) {\n        return function(values) {\n          return _this.scope.values = values;\n        };\n      })(this));\n    };\n\n    ProjectSwimlanesValuesController.prototype.removeSwimlane = function(swimlaneId, moveTo) {\n      return this.rs[this.scope.resource][\"delete\"](swimlaneId, moveTo).then((function(_this) {\n        return function() {\n          _this.loadSwimlanes();\n          return _this.rootscope.$broadcast(\"project:load\");\n        };\n      })(this));\n    };\n\n    return ProjectSwimlanesValuesController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectSwimlanesValuesController\", ProjectSwimlanesValuesController);\n\n  ProjectSwimlanesValue = function($timeout) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.isFormVisible = false;\n      $scope.isNewSwimlane = false;\n      $scope.swimlane = {\n        name: ''\n      };\n      $scope.swimlaneAdded = function() {\n        $scope.swimlane = {\n          name: ''\n        };\n        $scope.isNewSwimlane = true;\n        $scope.isFormVisible = false;\n        return setTimeout(function() {\n          $scope.isNewSwimlane = false;\n          return $scope.$apply();\n        }, 10000);\n      };\n      $scope.displaySwimlaneForm = function() {\n        $scope.isFormVisible = true;\n        return $timeout(function() {\n          return $el.find(\"#admin-swimlanes-form-input\").focus();\n        });\n      };\n      $scope.hideSwimlaneForm = function() {\n        $scope.isFormVisible = false;\n        return $scope.swimlane = {\n          name: ''\n        };\n      };\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesValues\", [\"$timeout\", ProjectSwimlanesValue]);\n\n  ProjectSwimlanesSingle = function($translate, $confirm, $animate) {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $ctrl = $el.controller();\n      $scope.displaySwimlaneSingleForm = false;\n      $scope.swimlaneSingleForm = {\n        name: ''\n      };\n      $scope.updateSwimlane = function(swimlane) {\n        $scope.displaySwimlaneSingleForm = false;\n        return $ctrl.updateSwimlane(swimlane, $scope.swimlaneSingleForm.name);\n      };\n      $scope.setDefaultSwimlane = function(swimlane) {\n        return $ctrl.setDefaultSwimlane(swimlane);\n      };\n      $scope.getDefaultTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DEFAULT_SWIMLANE\");\n        } else {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SET_DEFAULT_SWIMLANE\");\n        }\n      };\n      $scope.removeSwimlaneTitle = function(swimlane) {\n        if (swimlane.id === $scope.project.default_swimlane) {\n          return $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.DISABLE_DELETE_SWIMLANE\");\n        }\n      };\n      $scope.editSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = true;\n      };\n      $scope.cancelEditSwimlaneSingleForm = function() {\n        return $scope.displaySwimlaneSingleForm = false;\n      };\n      return $scope.removeSwimlaneDialog = (function(_this) {\n        return function(event, swimlane) {\n          var choices, replacement, subtitle, title;\n          title = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.TITLE_ACTION_DELETE_SWIMLANE\");\n          $animate.on(\"leave\", $el[0], function(element, phase) {\n            if (phase === \"close\") {\n              $animate.off(\"leave\", $el[0]);\n              return $ctrl.scope.$evalAsync((function(_this) {\n                return function() {\n                  return $ctrl.scope.deletingSwimlane = false;\n                };\n              })(this));\n            }\n          });\n          if ($scope.values.length > 1) {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_OPTIONS\", {\n              swimlane: swimlane.name\n            });\n            replacement = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_REPLACEMENT\");\n            choices = {};\n            _.each($scope.values, function(option) {\n              if (swimlane.id !== option.id) {\n                return choices[option.id] = option.name;\n              }\n            });\n            return $confirm.askChoice(title, subtitle, choices, replacement).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id, response.selected);\n              return response.finish();\n            });\n          } else {\n            subtitle = $translate.instant(\"LIGHTBOX.ADMIN_KANBAN_POWERUPS.SUBTITLE_ACTION_DELETE_SWIMLANE_LAST\");\n            return $confirm.askDelete(title, subtitle).then(function(response) {\n              $ctrl.scope.deletingSwimlane = true;\n              $ctrl.removeSwimlane(swimlane.id);\n              return response.finish();\n            });\n          }\n        };\n      })(this);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesSingle\", [\"$translate\", \"$tgConfirm\", \"$animate\", ProjectSwimlanesSingle]);\n\n  SortableSwimlanes = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      var drake, itemEl, tdom;\n      $ctrl = $el.controller();\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemValue, newIndex;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        newIndex = itemEl.index();\n        return $scope.$apply(function() {\n          return $ctrl.updatedSwimlanePosition(itemValue, newIndex);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSortableSwimlanes\", [SortableSwimlanes]);\n\n  ProjectDueDatesValuesController = (function(superClass) {\n    extend(ProjectDueDatesValuesController, superClass);\n\n    function ProjectDueDatesValuesController() {\n      this.displayValues = bind(this.displayValues, this);\n      this.createDefaultValues = bind(this.createDefaultValues, this);\n      this.loadValues = bind(this.loadValues, this);\n      return ProjectDueDatesValuesController.__super__.constructor.apply(this, arguments);\n    }\n\n    ProjectDueDatesValuesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\"];\n\n    ProjectDueDatesValuesController.prototype.loadValues = function() {\n      return this.rs[this.scope.resource].listValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(values) {\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          } else {\n            _this.createDefaultValues();\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.createDefaultValues = function() {\n      if (this.rs[this.scope.resource].createDefaultValues == null) {\n        return;\n      }\n      return this.rs[this.scope.resource].createDefaultValues(this.scope.projectId, this.scope.type).then((function(_this) {\n        return function(response) {\n          var values;\n          _this.rootscope.$broadcast(\"admin:project-values:updated\");\n          values = response.data;\n          if (values.length) {\n            _this.scope.maxValueOrder = _.maxBy(values, \"order\").order;\n            _this.displayValues(values);\n          }\n          return values;\n        };\n      })(this));\n    };\n\n    ProjectDueDatesValuesController.prototype.displayValues = function(values) {\n      _.each(values, function(value, index) {\n        value.days_to_due_abs = value.days_to_due !== null ? Math.abs(value.days_to_due) : null;\n        return value.sign = value.days_to_due >= 0 ? 1 : -1;\n      });\n      return this.scope.values = values;\n    };\n\n    return ProjectDueDatesValuesController;\n\n  })(ProjectValuesController);\n\n  module.controller(\"ProjectDueDatesValuesController\", ProjectDueDatesValuesController);\n\n  ProjectValuesDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var link, linkDragAndDrop, linkValue;\n    linkDragAndDrop = function($scope, $el, $attrs) {\n      var drake, itemEl, newParentScope, oldParentScope, scroll, tdom;\n      oldParentScope = null;\n      newParentScope = null;\n      itemEl = null;\n      tdom = $el.find(\".sortable\");\n      drake = dragula([tdom[0]], {\n        direction: 'vertical',\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: tdom[0]\n      });\n      drake.on('dragend', function(item) {\n        var itemIndex, itemValue;\n        itemEl = $(item);\n        itemValue = itemEl.scope().value;\n        itemIndex = itemEl.index();\n        return $scope.$broadcast(\"admin:project-values:move\", itemValue, itemIndex);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return drake.destroy();\n      });\n    };\n    linkValue = function($scope, $el, $attrs) {\n      var $ctrl, cancel, goToBottomList, initializeNewValue, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"is_closed\": false,\n          \"is_archived\": false\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_\" + (objName.toUpperCase()) + \".ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, promise, value;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        value = formEl.scope().value;\n        promise = $repo.save(value);\n        promise.then(function() {\n          var row;\n          row = target.parents(\".row.table-main\");\n          row.addClass(\"hidden\");\n          row.siblings(\".visualization\").removeClass('hidden');\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return projectService.fetchProject();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          $scope.values.push(data);\n          $scope.maxValueOrder = data.order;\n          initializeNewValue();\n          return $rootscope.$broadcast(\"admin:project-values:updated\");\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, value;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          value.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").removeClass('hidden');\n        return goToBottomList(true);\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      return $el.on(\"click\", \".delete-value\", function(event) {\n        var choices, formEl, subtitle, target, text, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        choices = {};\n        _.each($scope.values, function(option) {\n          if (value.id !== option.id) {\n            return choices[option.id] = option.name;\n          }\n        });\n        subtitle = value.name;\n        if (_.keys(choices).length === 0) {\n          return $confirm.error($translate.instant(\"ADMIN.PROJECT_VALUES.ERROR_DELETE_ALL\"));\n        }\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_VALUE\");\n        text = $translate.instant(\"ADMIN.PROJECT_VALUES.REPLACEMENT\");\n        return $confirm.askChoice(title, subtitle, choices, text).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value, {\n            \"moveTo\": response.selected\n          }).then(onSucces, onError);\n        });\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      linkDragAndDrop($scope, $el, $attrs);\n      linkValue($scope, $el, $attrs);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectValuesDirective]);\n\n  ProjectDueDatesValues = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService) {\n    var linkDueDateStatusValue, parentDirective;\n    parentDirective = ProjectValuesDirective($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope, projectService);\n    linkDueDateStatusValue = function($scope, $el, $attrs, $ctrl) {\n      var _setDaysToDue, _valueFromEventTarget, initializeNewValue, saveNewValue, valueType;\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"days_to_due\": 0,\n          \"sign\": 1\n        };\n      };\n      initializeNewValue();\n      _setDaysToDue = function(value) {\n        return value.days_to_due = value.days_to_due_abs * value.sign;\n      };\n      _valueFromEventTarget = function(event) {\n        var formEl, row, target;\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        if (!formEl.scope().value) {\n          return formEl.scope().newValue;\n        } else {\n          return formEl.scope().value;\n        }\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        $scope.newValue.order = $scope.maxValueOrder ? $scope.maxValueOrder + 1 : 1;\n        promise = $repo.create(valueType, $scope.newValue);\n        promise.then(function(data) {\n          target.addClass(\"hidden\");\n          data.sign = $scope.newValue.sign;\n          data.days_to_due_abs = $scope.newValue.days_to_due_abs;\n          $scope.values.push(data);\n          $rootscope.$broadcast(\"admin:project-values:updated\");\n          return initializeNewValue();\n        });\n        return promise.then(null, function(data) {\n          return form.setErrors(data);\n        });\n      };\n      $el.on(\"input\", \".days-to-due-abs\", function(event) {\n        var value;\n        event.preventDefault();\n        value = _valueFromEventTarget(event);\n        return $scope.$apply(function() {\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".days-to-due-sign\", function(event) {\n        var value;\n        event.preventDefault();\n        value = _valueFromEventTarget(event);\n        return $scope.$apply(function() {\n          value.sign = value.sign * -1;\n          return _setDaysToDue(value);\n        });\n      });\n      $el.on(\"click\", \".add-new-due-date\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      return $el.on(\"click\", \".delete-due-date\", function(event) {\n        var formEl, subtitle, target, title, value;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        value = formEl.scope().value;\n        title = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.TITLE_ACTION_DELETE_DUE_DATE\");\n        subtitle = $translate.instant(\"LIGHTBOX.ADMIN_DUE_DATES.SUBTITLE_ACTION_DELETE_DUE_DATE\", {\n          due_date_status_name: value.name\n        });\n        return $confirm.askDelete(title, subtitle).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadValues()[\"finally\"](function() {\n              $rootscope.$broadcast(\"admin:project-values:updated\");\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.remove(value).then(onSucces, onError);\n        });\n      });\n    };\n    return {\n      link: function($scope, $el, $attrs) {\n        parentDirective.link($scope, $el, $attrs);\n        return linkDueDateStatusValue($scope, $el, $attrs);\n      }\n    };\n  };\n\n  module.directive(\"tgProjectDueDatesValues\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", \"tgProjectService\", ProjectDueDatesValues]);\n\n  TEXT_TYPE = \"text\";\n\n  MULTILINE_TYPE = \"multiline\";\n\n  RICHTEXT_TYPE = \"richtext\";\n\n  DATE_TYPE = \"date\";\n\n  URL_TYPE = \"url\";\n\n  DROPDOWN_TYPE = \"dropdown\";\n\n  CHECKBOX_TYPE = \"checkbox\";\n\n  NUMBER_TYPE = \"number\";\n\n  TYPE_CHOICES = [\n    {\n      key: TEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_TEXT\"\n    }, {\n      key: MULTILINE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_MULTI\"\n    }, {\n      key: RICHTEXT_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_RICHTEXT\"\n    }, {\n      key: DATE_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DATE\"\n    }, {\n      key: URL_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_URL\"\n    }, {\n      key: DROPDOWN_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_DROPDOWN\"\n    }, {\n      key: CHECKBOX_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_CHECKBOX\"\n    }, {\n      key: NUMBER_TYPE,\n      name: \"ADMIN.CUSTOM_FIELDS.FIELD_TYPE_NUMBER\"\n    }\n  ];\n\n  ProjectCustomAttributesController = (function(superClass) {\n    extend(ProjectCustomAttributesController, superClass);\n\n    ProjectCustomAttributesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function ProjectCustomAttributesController(scope, rootscope, repo, rs, params, q, location, navUrls, appMetaService, translate, projectService1) {\n      var description, sectionName, title;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService1;\n      this.moveCustomAttributes = bind(this.moveCustomAttributes, this);\n      this.deleteCustomAttribute = bind(this.deleteCustomAttribute, this);\n      this.saveCustomAttribute = bind(this.saveCustomAttribute, this);\n      this.createCustomAttribute = bind(this.createCustomAttribute, this);\n      this.loadCustomAttributes = bind(this.loadCustomAttributes, this);\n      this._onCustomAttributesModified = bind(this._onCustomAttributesModified, this);\n      this.scope.TYPE_CHOICES = TYPE_CHOICES;\n      this.scope.project = this.projectService.project.toJS();\n      this.scope.projectId = this.scope.project.id;\n      sectionName = this.translate.instant(this.scope.sectionName);\n      title = this.translate.instant(\"ADMIN.CUSTOM_ATTRIBUTES.PAGE_TITLE\", {\n        \"sectionName\": sectionName,\n        \"projectName\": this.scope.project.name\n      });\n      description = this.scope.project.description;\n      this.appMetaService.setAll(title, description);\n      this.scope.init = (function(_this) {\n        return function(type) {\n          _this.scope.type = type;\n          return _this.loadCustomAttributes();\n        };\n      })(this);\n    }\n\n    ProjectCustomAttributesController.prototype._parseAttributesExtra = function() {\n      return this.scope.customAttributes = _.map(this.scope.customAttributes, (function(_this) {\n        return function(x) {\n          return _this._parseAttributeExtra(x);\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype._parseAttributeExtra = function(attr) {\n      if (attr.type === 'dropdown' && !attr.extra) {\n        attr.extra = [''];\n      }\n      return attr;\n    };\n\n    ProjectCustomAttributesController.prototype._onCustomAttributesModified = function() {\n      return this.rootscope.$broadcast(\"admin:project-custom-attributes:updated\");\n    };\n\n    ProjectCustomAttributesController.prototype.loadCustomAttributes = function() {\n      return this.rs.customAttributes[this.scope.type].list(this.scope.projectId).then((function(_this) {\n        return function(customAttributes) {\n          var ref;\n          _this.scope.customAttributes = customAttributes;\n          _this.scope.maxOrder = (ref = _.maxBy(customAttributes, \"order\")) != null ? ref.order : void 0;\n          _this._parseAttributesExtra();\n          return customAttributes;\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.createCustomAttribute = function(attrValues) {\n      return this.repo.create(\"custom-attributes/\" + this.scope.type, attrValues).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.saveCustomAttribute = function(attrModel) {\n      return this.repo.save(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.deleteCustomAttribute = function(attrModel) {\n      return this.repo.remove(attrModel).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    ProjectCustomAttributesController.prototype.moveCustomAttributes = function(attrModel, newIndex) {\n      var customAttributes, r;\n      customAttributes = this.scope.customAttributes;\n      r = customAttributes.indexOf(attrModel);\n      customAttributes.splice(r, 1);\n      customAttributes.splice(newIndex, 0, attrModel);\n      _.each(customAttributes, function(val, idx) {\n        return val.order = idx;\n      });\n      return this.repo.saveAll(customAttributes).then((function(_this) {\n        return function() {\n          return _this._onCustomAttributesModified();\n        };\n      })(this));\n    };\n\n    return ProjectCustomAttributesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"ProjectCustomAttributesController\", ProjectCustomAttributesController);\n\n  ProjectCustomAttributesDirective = function($log, $confirm, animationFrame, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, _manageExtraFormEvent, _manageFormEvent, addExtraOption, cancelCreate, cancelUpdate, create, deleteCustomAttribute, hideAddButton, hideCancelButton, hideCreateForm, hideEditForm, hideExtra, initAttrType, initDraggable, removeExtraOption, resetNewAttr, revertChangesInCustomAttribute, showAddButton, showCancelButton, showCreateForm, showEditForm, showExtra, update;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.isExtraVisible = {};\n      _manageFormEvent = function(event, callback) {\n        var formEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        return callback(formEl);\n      };\n      initDraggable = function() {\n        var drake, el, i, len, results, sortableChildren, sortableEl;\n        sortableEl = $el.find(\".js-sortable\");\n        drake = dragula([sortableEl[0]], {\n          direction: 'vertical',\n          copySortSource: false,\n          copy: false,\n          mirrorContainer: sortableEl[0],\n          moves: function(item, source, handle) {\n            var childItem;\n            childItem = $(handle).closest('.js-child-sortable');\n            if (childItem[0]) {\n              return false;\n            }\n            return $(item).is('div[tg-bind-scope]');\n          }\n        });\n        drake.on('dragend', function(item) {\n          var itemAttr, itemEl, itemIndex;\n          itemEl = $(item);\n          itemAttr = itemEl.scope().attr;\n          itemIndex = itemEl.index();\n          return $ctrl.moveCustomAttributes(itemAttr, itemIndex);\n        });\n        sortableChildren = $el.find(\".js-child-sortable\");\n        results = [];\n        for (i = 0, len = sortableChildren.length; i < len; i++) {\n          el = sortableChildren[i];\n          drake[el] = dragula([el], {\n            direction: 'vertical',\n            copySortSource: false,\n            copy: false,\n            mirrorContainer: el,\n            moves: function(item) {\n              return $(item).is('div[tg-bind-scope]');\n            }\n          });\n          results.push(drake[el].on('dragend', function(item) {\n            var attrExtra, itemEl, sourceIndex, targetIndex, value;\n            itemEl = $(item);\n            attrExtra = itemEl.scope().attr.extra;\n            sourceIndex = itemEl.scope().$index;\n            targetIndex = itemEl.index();\n            value = attrExtra[sourceIndex];\n            attrExtra.splice(sourceIndex, 1);\n            attrExtra.splice(targetIndex, 0, value);\n            itemEl.scope().attr.setAttr('extra', attrExtra);\n            return $ctrl.saveCustomAttribute(itemEl.scope().attr).then(function() {\n              return $confirm.notify(\"success\");\n            });\n          }));\n        }\n        return results;\n      };\n      showCreateForm = function() {\n        $el.find(\".js-new-custom-field\").removeClass(\"hidden\");\n        return $el.find(\".js-new-custom-field input:visible\").first().focus();\n      };\n      hideCreateForm = function() {\n        return $el.find(\".js-new-custom-field\").addClass(\"hidden\");\n      };\n      showAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideAddButton = function() {\n        return $el.find(\".js-add-custom-field-button\").addClass(\"hidden\");\n      };\n      showCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").removeClass(\"hidden\");\n      };\n      hideCancelButton = function() {\n        return $el.find(\".js-cancel-new-custom-field-button\").addClass(\"hidden\");\n      };\n      resetNewAttr = function() {\n        return $scope.newAttr = {};\n      };\n      create = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideCreateForm();\n          resetNewAttr();\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = $scope.newAttr;\n        attr.project = $scope.projectId;\n        attr.order = $scope.maxOrder ? $scope.maxOrder + 1 : 1;\n        return $ctrl.createCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelCreate = function() {\n        hideCreateForm();\n        return resetNewAttr();\n      };\n      initAttrType = function(formEl) {\n        var attr, ref;\n        attr = formEl.scope().newAttr ? formEl.scope().newAttr : formEl.scope().attr;\n        if (attr.type !== \"dropdown\") {\n          return;\n        }\n        if ((ref = attr.extra) != null ? ref.length : void 0) {\n          return;\n        }\n        attr.extra = [''];\n        if (attr.id) {\n          return showEditForm(formEl);\n        } else {\n          showExtra(-1);\n          return formEl.scope().$apply();\n        }\n      };\n      $scope.$watch(\"customAttributes\", function(customAttributes) {\n        if (!customAttributes) {\n          return;\n        }\n        if (customAttributes.length === 0) {\n          hideCancelButton();\n          hideAddButton();\n          return showCreateForm();\n        } else {\n          hideCreateForm();\n          showAddButton();\n          showCancelButton();\n          return initDraggable();\n        }\n      });\n      $el.on(\"change\", \".custom-field-type select\", function(event) {\n        return _manageFormEvent(event, initAttrType);\n      });\n      $el.on(\"click\", \".js-add-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showCreateForm);\n      });\n      $el.on(\"click\", \".js-create-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, create);\n      }));\n      $el.on(\"click\", \".js-cancel-new-custom-field-button\", function(event) {\n        event.preventDefault();\n        return cancelCreate();\n      });\n      $el.on(\"keyup\", \".js-new-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      showEditForm = function(formEl) {\n        formEl.find(\".js-view-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field input:visible\").first().focus().select();\n        formEl.find(\".js-view-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").removeClass(\"hidden\");\n        formEl.find(\".custom-extra-actions\").removeClass(\"hidden\");\n        showExtra(formEl.scope().attr.id);\n        return $scope.$apply();\n      };\n      update = function(formEl) {\n        var attr, form, onError, onSucces;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        onSucces = function() {\n          $ctrl.loadCustomAttributes();\n          hideEditForm(formEl);\n          return $confirm.notify(\"success\");\n        };\n        onError = function(data) {\n          return form.setErrors(data);\n        };\n        attr = formEl.scope().attr;\n        attr.setAttr('extra', attr.extra);\n        return $ctrl.saveCustomAttribute(attr).then(onSucces, onError);\n      };\n      cancelUpdate = function(formEl) {\n        hideEditForm(formEl);\n        return revertChangesInCustomAttribute(formEl);\n      };\n      hideEditForm = function(formEl) {\n        formEl.find(\".js-edit-custom-field\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field\").removeClass(\"hidden\");\n        formEl.find(\".js-edit-custom-field-extra\").addClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").removeClass(\"hidden\");\n        return formEl.find(\".custom-extra-actions\").addClass(\"hidden\");\n      };\n      revertChangesInCustomAttribute = function(formEl) {\n        return $scope.$apply(function() {\n          return formEl.scope().attr.revert();\n        });\n      };\n      $el.on(\"click\", \".js-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, showEditForm);\n      });\n      $el.on(\"click\", \".js-update-custom-field-button\", debounce(1000, function(event) {\n        return _manageFormEvent(event, update);\n      }));\n      $el.on(\"click\", \".js-cancel-edit-custom-field-button\", function(event) {\n        return _manageFormEvent(event, cancelUpdate);\n      });\n      $el.on(\"keyup\", \".js-edit-custom-field input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      deleteCustomAttribute = function(formEl) {\n        var attr, message, text, title;\n        attr = formEl.scope().attr;\n        message = attr.name;\n        title = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.DELETE\");\n        text = $translate.instant(\"COMMON.CUSTOM_ATTRIBUTES.CONFIRM_DELETE\");\n        return $confirm.askDelete(title, text, message).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadCustomAttributes()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\", null, \"We have not been able to delete '\" + message + \"'.\");\n          };\n          return $ctrl.deleteCustomAttribute(attr).then(onSucces, onError);\n        });\n      };\n      $el.on(\"click\", \".js-delete-custom-field-button\", debounce(2000, function(event) {\n        return _manageFormEvent(event, deleteCustomAttribute);\n      }));\n      $scope.toggleExtraVisible = function(index) {\n        if (!$scope.isExtraVisible[index]) {\n          return showExtra(index);\n        } else {\n          return hideExtra(index);\n        }\n      };\n      showExtra = function(index) {\n        return $scope.isExtraVisible[index] = true;\n      };\n      hideExtra = function(index) {\n        return $scope.isExtraVisible[index] = false;\n      };\n      _manageExtraFormEvent = function(event, callback) {\n        var formEl, formExtraEl;\n        event.preventDefault();\n        formEl = angular.element(event.currentTarget).closest(\"form\");\n        formExtraEl = angular.element(event.currentTarget).closest(\".js-form\");\n        return callback(formEl, formExtraEl);\n      };\n      addExtraOption = function(formEl, formExtraEl) {\n        var attrExtra, formScope, ref;\n        formScope = formEl.scope();\n        attrExtra = ((ref = formScope.newAttr) != null ? ref.extra : void 0) ? formScope.newAttr.extra : formScope.attr.extra;\n        attrExtra.push(\"\");\n        formScope.$apply();\n        formEl.find(\".js-edit-custom-field-extra\").last().removeClass(\"hidden\");\n        formEl.find(\".js-view-custom-field-extra\").last().addClass(\"hidden\");\n        return formEl.find(\".js-edit-custom-field-extra input\").last().focus();\n      };\n      removeExtraOption = function(formEl, formExtraEl) {\n        var attrExtra;\n        attrExtra = formEl.scope().attr.extra;\n        attrExtra.splice(formExtraEl.scope().$index, 1);\n        return formExtraEl.scope().$apply();\n      };\n      $el.on(\"keyup\", \".js-edit-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, update);\n        } else if (event.keyCode === 27) {\n          return _manageFormEvent(event, cancelUpdate);\n        }\n      });\n      $el.on(\"keyup\", \".js-new-custom-field-extra input\", function(event) {\n        if (event.keyCode === 13) {\n          return _manageFormEvent(event, create);\n        } else if (event.keyCode === 27) {\n          return cancelCreate();\n        }\n      });\n      $el.on(\"click\", \".js-add-option-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, addExtraOption);\n      }));\n      return $el.on(\"click\", \".js-delete-custom-field-extra-button\", debounce(500, function(event) {\n        return _manageExtraFormEvent(event, removeExtraOption);\n      }));\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectCustomAttributes\", [\"$log\", \"$tgConfirm\", \"animationFrame\", \"$translate\", ProjectCustomAttributesDirective]);\n\n  ProjectTagsController = (function(superClass) {\n    extend(ProjectTagsController, superClass);\n\n    ProjectTagsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$tgModel\", \"tgProjectService\"];\n\n    function ProjectTagsController(scope, rootscope, repo, confirm, rs, model, projectService1) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.model = model;\n      this.projectService = projectService1;\n      this.mixingClass = bind(this.mixingClass, this);\n      this.cancelMixingTags = bind(this.cancelMixingTags, this);\n      this.confirmMixingTags = bind(this.confirmMixingTags, this);\n      this.toggleMixingFromTags = bind(this.toggleMixingFromTags, this);\n      this.startMixingTags = bind(this.startMixingTags, this);\n      this.deleteTag = bind(this.deleteTag, this);\n      this.editTag = bind(this.editTag, this);\n      this.createTag = bind(this.createTag, this);\n      this.filterAndSortTags = bind(this.filterAndSortTags, this);\n      this.loadTags = bind(this.loadTags, this);\n      this.loading = true;\n      this.loadTags();\n    }\n\n    ProjectTagsController.prototype.loadTags = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.projects.tagsColors(project.id).then((function(_this) {\n        return function(tags) {\n          _this.scope.projectTagsAll = _.map(tags.getAttrs(), function(color, name) {\n            return _this.model.make_model('tag', {\n              name: name,\n              color: color\n            });\n          });\n          _this.filterAndSortTags();\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.filterAndSortTags = function() {\n      this.scope.projectTags = _.sortBy(this.scope.projectTagsAll, function(it) {\n        return it.name.toLowerCase();\n      });\n      return this.scope.projectTags = _.filter(this.scope.projectTags, (function(_this) {\n        return function(tag) {\n          return tag.name.indexOf(_this.scope.tagsFilter.name) !== -1;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.createTag = function(tag, color) {\n      return this.rs.projects.createTag(this.scope.projectId, tag, color);\n    };\n\n    ProjectTagsController.prototype.editTag = function(from_tag, to_tag, color) {\n      if (from_tag === to_tag) {\n        to_tag = null;\n      }\n      return this.rs.projects.editTag(this.scope.projectId, from_tag, to_tag, color);\n    };\n\n    ProjectTagsController.prototype.deleteTag = function(tag) {\n      this.scope.loadingDelete = true;\n      return this.rs.projects.deleteTag(this.scope.projectId, tag)[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingDelete = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.startMixingTags = function(tag) {\n      return this.scope.mixingTags.toTag = tag.name;\n    };\n\n    ProjectTagsController.prototype.toggleMixingFromTags = function(tag) {\n      var index;\n      if (tag.name !== this.scope.mixingTags.toTag) {\n        index = this.scope.mixingTags.fromTags.indexOf(tag.name);\n        if (index === -1) {\n          return this.scope.mixingTags.fromTags.push(tag.name);\n        } else {\n          return this.scope.mixingTags.fromTags.splice(index, 1);\n        }\n      }\n    };\n\n    ProjectTagsController.prototype.confirmMixingTags = function() {\n      var fromTags, toTag;\n      toTag = this.scope.mixingTags.toTag;\n      fromTags = this.scope.mixingTags.fromTags;\n      this.scope.loadingMixing = true;\n      return this.rs.projects.mixTags(this.scope.projectId, toTag, fromTags).then((function(_this) {\n        return function() {\n          _this.cancelMixingTags();\n          return _this.loadTags();\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.scope.loadingMixing = false;\n        };\n      })(this));\n    };\n\n    ProjectTagsController.prototype.cancelMixingTags = function() {\n      this.scope.mixingTags.toTag = null;\n      return this.scope.mixingTags.fromTags = [];\n    };\n\n    ProjectTagsController.prototype.mixingClass = function(tag) {\n      if (this.scope.mixingTags.toTag !== null) {\n        if (tag.name === this.scope.mixingTags.toTag) {\n          return \"mixing-tags-to\";\n        } else if (this.scope.mixingTags.fromTags.indexOf(tag.name) !== -1) {\n          return \"mixing-tags-from\";\n        }\n      }\n    };\n\n    return ProjectTagsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ProjectTagsController\", ProjectTagsController);\n\n  ProjectTagsDirective = function($log, $repo, $confirm, $location, animationFrame, $translate, $rootscope) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl, $window, cancel, goToBottomList, initializeMixingTags, initializeNewValue, initializeTagsFilter, initializeTextTranslations, objName, saveNewValue, saveValue, valueType;\n      $window = $(window);\n      $ctrl = $el.controller();\n      valueType = $attrs.type;\n      objName = $attrs.objname;\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"tag\": \"\",\n          \"color\": \"\"\n        };\n      };\n      initializeTagsFilter = function() {\n        return $scope.tagsFilter = {\n          \"name\": \"\"\n        };\n      };\n      initializeMixingTags = function() {\n        return $scope.mixingTags = {\n          \"toTag\": null,\n          \"fromTags\": []\n        };\n      };\n      initializeTextTranslations = function() {\n        return $scope.addNewElementText = $translate.instant(\"ADMIN.PROJECT_VALUES_TAGS.ACTION_ADD\");\n      };\n      initializeNewValue();\n      initializeTagsFilter();\n      initializeMixingTags();\n      initializeTextTranslations();\n      $rootscope.$on(\"$translateChangeEnd\", function() {\n        return $scope.$evalAsync(initializeTextTranslations);\n      });\n      goToBottomList = (function(_this) {\n        return function(focus) {\n          var table;\n          if (focus == null) {\n            focus = false;\n          }\n          table = $el.find(\".table-main\");\n          $(document.body).scrollTop(table.offset().top + table.height());\n          if (focus) {\n            return $el.find(\".new-value input:visible\").first().focus();\n          }\n        };\n      })(this);\n      saveValue = function(target) {\n        var form, formEl, originalTag, promise, tag;\n        formEl = target.parents(\"form\");\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        tag = formEl.scope().tag;\n        originalTag = tag.clone();\n        originalTag.revert();\n        $scope.loadingEdit = true;\n        promise = $ctrl.editTag(originalTag.name, tag.name, tag.color);\n        promise.then(function() {\n          return $ctrl.loadTags().then(function() {\n            var row;\n            row = target.parents(\".row.table-main\");\n            row.addClass(\"hidden\");\n            $scope.loadingEdit = false;\n            $rootscope.$broadcast('tags:updated');\n            return row.siblings(\".visualization\").removeClass('hidden');\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingEdit = false;\n          return form.setErrors(response.data);\n        });\n      };\n      saveNewValue = function(target) {\n        var form, formEl, promise;\n        formEl = target.parents(\"form\");\n        formEl = target;\n        form = formEl.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.loadingCreate = true;\n        promise = $ctrl.createTag($scope.newValue.tag, $scope.newValue.color);\n        promise.then(function(data) {\n          return $ctrl.loadTags().then(function() {\n            $scope.loadingCreate = false;\n            target.addClass(\"hidden\");\n            $rootscope.$broadcast('tags:updated');\n            return initializeNewValue();\n          });\n        });\n        return promise.then(null, function(response) {\n          $scope.loadingCreate = false;\n          return form.setErrors(response.data);\n        });\n      };\n      cancel = function(target) {\n        var formEl, row, tag;\n        row = target.parents(\".row.table-main\");\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        return $scope.$apply(function() {\n          row.addClass(\"hidden\");\n          tag.revert();\n          return row.siblings(\".visualization\").removeClass('hidden');\n        });\n      };\n      $scope.$watch(\"tagsFilter.name\", function(tagsFilter) {\n        return $ctrl.filterAndSortTags();\n      });\n      $window.on(\"keyup\", function(event) {\n        if (event.keyCode === 27) {\n          return $scope.$apply(function() {\n            return initializeMixingTags();\n          });\n        }\n      });\n      $el.on(\"click\", \".show-add-new\", function(event) {\n        event.preventDefault();\n        return $el.find(\".new-value\").removeClass('hidden');\n      });\n      $el.on(\"click\", \".add-new\", debounce(2000, function(event) {\n        var target;\n        event.preventDefault();\n        target = $el.find(\".new-value\");\n        return saveNewValue(target);\n      }));\n      $el.on(\"click\", \".delete-new\", function(event) {\n        event.preventDefault();\n        $el.find(\".new-value\").addClass(\"hidden\");\n        return initializeNewValue();\n      });\n      $el.on(\"click\", \".mix-tags\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.startMixingTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-row\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return $scope.$apply(function() {\n          return $ctrl.toggleMixingFromTags(target.parents('form').scope().tag);\n        });\n      });\n      $el.on(\"click\", \".mixing-confirm\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.confirmMixingTags();\n        });\n      });\n      $el.on(\"click\", \".mixing-cancel\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        return $scope.$apply(function() {\n          return $ctrl.cancelMixingTags();\n        });\n      });\n      $el.on(\"click\", \".edit-value\", function(event) {\n        var editionRow, row, target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        row = target.parents(\".row.table-main\");\n        row.addClass(\"hidden\");\n        editionRow = row.siblings(\".edition\");\n        editionRow.removeClass('hidden');\n        return editionRow.find('input:visible').first().focus().select();\n      });\n      $el.on(\"keyup\", \".new-value input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = $el.find(\".new-value\");\n          return saveNewValue(target);\n        } else if (event.keyCode === 27) {\n          $el.find(\".new-value\").addClass(\"hidden\");\n          return initializeNewValue();\n        }\n      });\n      $el.on(\"keyup\", \".status-name input\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if (event.keyCode === 13) {\n          return saveValue(target);\n        } else if (event.keyCode === 27) {\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".save\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return saveValue(target);\n      });\n      $el.on(\"click\", \".cancel\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return cancel(target);\n      });\n      $el.on(\"click\", \".delete-tag\", function(event) {\n        var formEl, tag, target, title;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        formEl = target.parents(\"form\");\n        tag = formEl.scope().tag;\n        title = $translate.instant(\"ADMIN.COMMON.TITLE_ACTION_DELETE_TAG\");\n        return $confirm.askOnDelete(title, tag.name).then(function(response) {\n          var onError, onSucces;\n          onSucces = function() {\n            return $ctrl.loadTags()[\"finally\"](function() {\n              $rootscope.$broadcast('tags:updated');\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $ctrl.deleteTag(tag.name).then(onSucces, onError);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return $window.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectTags\", [\"$log\", \"$tgRepo\", \"$tgConfirm\", \"$tgLocation\", \"animationFrame\", \"$translate\", \"$rootScope\", ProjectTagsDirective]);\n\n  ProjectSwimlanesWipDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      $scope.wipClosed = false;\n      return $scope.toggleWipVisibility = function() {\n        return $scope.wipClosed = !$scope.wipClosed;\n      };\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgProjectSwimlanesWip\", ProjectSwimlanesWipDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EditRoleDirective, NewRoleDirective, RolePermissionsDirective, RolesController, RolesDirective, bindMethods, bindOnce, debounce, mixOf, module, publicPermissions, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  bindMethods = this.taiga.bindMethods;\n\n  module = angular.module(\"taigaAdmin\");\n\n  publicPermissions = ['view_epics', 'view_milestones', 'view_us', 'view_tasks', 'view_issues', 'view_wiki_pages', 'view_wiki_links'];\n\n  RolesController = (function(superClass) {\n    extend(RolesController, superClass);\n\n    RolesController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgModel\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function RolesController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, model, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.model = model;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      this._disableComputable = bind(this._disableComputable, this);\n      this._enableComputable = bind(this._enableComputable, this);\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.MENU.PERMISSIONS\";\n      this.scope.project = {};\n      this.scope.anyComputableRole = true;\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.ROLES.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    RolesController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      project = this.model.make_model(\"projects\", project);\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.anyComputableRole = _.some(_.map(project.roles, function(point) {\n        return point.computable;\n      }));\n      return project;\n    };\n\n    RolesController.prototype.loadRoles = function() {\n      return this.rs.roles.list(this.scope.projectId).then((function(_this) {\n        return function(roles) {\n          var public_permission;\n          roles = roles.map(function(role) {\n            role.external_user = false;\n            return role;\n          });\n          public_permission = {\n            \"name\": _this.translate.instant(\"ADMIN.ROLES.EXTERNAL_USER\"),\n            \"permissions\": _this.scope.project.public_permissions,\n            \"external_user\": true\n          };\n          roles.push(public_permission);\n          _this.scope.roles = roles;\n          _this.scope.role = _this.scope.roles[0];\n          if (!_this.scope.project.is_private) {\n            publicPermissions.forEach(function(permission) {\n              if (!_this.scope.role.permissions.includes(permission)) {\n                return _this.scope.role.permissions.push(permission);\n              }\n            });\n          }\n          return roles;\n        };\n      })(this));\n    };\n\n    RolesController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadRoles();\n    };\n\n    RolesController.prototype.forceLoadProject = function() {\n      return this.rootscope.$broadcast(\"admin:project-roles:updated\");\n    };\n\n    RolesController.prototype.setRole = function(role) {\n      this.scope.role = role;\n      return this.scope.$broadcast(\"role:changed\", this.scope.role);\n    };\n\n    RolesController.prototype[\"delete\"] = function() {\n      var choices, i, len, ref, replacement, role, subtitle, title, warning;\n      choices = {};\n      ref = this.scope.roles;\n      for (i = 0, len = ref.length; i < len; i++) {\n        role = ref[i];\n        if (role.id !== this.scope.role.id) {\n          choices[role.id] = role.name;\n        }\n      }\n      if (_.keys(choices).length === 0) {\n        return this.confirm.error(this.translate.instant(\"ADMIN.ROLES.ERROR_DELETE_ALL\"));\n      }\n      title = this.translate.instant(\"ADMIN.ROLES.TITLE_DELETE_ROLE\");\n      subtitle = this.scope.role.name;\n      replacement = this.translate.instant(\"ADMIN.ROLES.REPLACEMENT_ROLE\");\n      warning = this.translate.instant(\"ADMIN.ROLES.WARNING_DELETE_ROLE\");\n      return this.confirm.askChoice(title, subtitle, choices, replacement, warning).then((function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            _this.forceLoadProject();\n            return _this.loadRoles()[\"finally\"](function() {\n              return response.finish();\n            });\n          };\n          onError = function() {\n            return _this.confirm.notify('error');\n          };\n          return _this.repo.remove(_this.scope.role, {\n            moveTo: response.selected\n          }).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    RolesController.prototype._enableComputable = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"success\");\n          return _this.forceLoadProject();\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.scope.role.revert();\n        };\n      })(this);\n      return this.repo.save(this.scope.role).then(onSuccess, onError);\n    };\n\n    RolesController.prototype._disableComputable = function() {\n      var askOnError, askOnSuccess, subtitle, title;\n      askOnSuccess = (function(_this) {\n        return function(response) {\n          var onError, onSuccess;\n          onSuccess = function() {\n            response.finish();\n            _this.confirm.notify(\"success\");\n            return _this.forceLoadProject();\n          };\n          onError = function() {\n            response.finish();\n            _this.confirm.notify(\"error\");\n            return _this.scope.role.revert();\n          };\n          return _this.repo.save(_this.scope.role).then(onSuccess, onError);\n        };\n      })(this);\n      askOnError = (function(_this) {\n        return function(response) {\n          return _this.scope.role.revert();\n        };\n      })(this);\n      title = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_TITLE\");\n      subtitle = this.translate.instant(\"ADMIN.ROLES.DISABLE_COMPUTABLE_ALERT_SUBTITLE\", {\n        roleName: this.scope.role.name\n      });\n      return this.confirm.ask(title, subtitle, \"\").then(askOnSuccess, askOnError);\n    };\n\n    RolesController.prototype.toggleComputable = debounce(2000, function() {\n      if (!this.scope.role.computable) {\n        return this._disableComputable();\n      } else {\n        return this._enableComputable();\n      }\n    });\n\n    return RolesController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"RolesController\", RolesController);\n\n  EditRoleDirective = function($repo, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, toggleView;\n      toggleView = function() {\n        $el.find('.total').toggle();\n        return $el.find('.edit-role').toggle();\n      };\n      submit = function() {\n        var promise;\n        $scope.role.name = $el.find(\"input\").val();\n        promise = $repo.save($scope.role);\n        promise.then(function() {\n          return $confirm.notify(\"success\");\n        });\n        promise.then(null, function(data) {\n          return $confirm.notify(\"error\");\n        });\n        return toggleView();\n      };\n      $el.on(\"click\", \".edit-value\", function() {\n        toggleView();\n        $el.find(\"input\").focus();\n        return $el.find(\"input\").val($scope.role.name);\n      });\n      $el.on(\"click\", \"a.save\", submit);\n      $el.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return submit();\n        } else if (event.keyCode === 27) {\n          return toggleView();\n        }\n      });\n      $scope.$on(\"role:changed\", function() {\n        if ($el.find('.edit-role').is(\":visible\")) {\n          return toggleView();\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgEditRole\", [\"$tgRepo\", \"$tgConfirm\", EditRoleDirective]);\n\n  RolesDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRoles\", RolesDirective);\n\n  NewRoleDirective = function($tgrepo, $confirm) {\n    var DEFAULT_PERMISSIONS, link;\n    DEFAULT_PERMISSIONS = [\"view_project\", \"view_milestones\", \"view_us\", \"view_tasks\", \"view_issues\"];\n    link = function($scope, $el, $attrs) {\n      var $ctrl;\n      $ctrl = $el.controller();\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $el.on(\"click\", \"button.add-button\", function(event) {\n        event.preventDefault();\n        $el.find(\".new\").removeClass(\"hidden\");\n        $el.find(\".new\").focus();\n        return $el.find(\".add-button\").hide();\n      });\n      return $el.on(\"keyup\", \".new\", function(event) {\n        var newRole, onError, onSuccess, target;\n        event.preventDefault();\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          newRole = {\n            project: $scope.projectId,\n            name: target.val(),\n            permissions: DEFAULT_PERMISSIONS,\n            order: _.maxBy($scope.roles, function(r) {\n              return r.order;\n            }).order + 1,\n            computable: false\n          };\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          onSuccess = function(role) {\n            var insertPosition;\n            insertPosition = $scope.roles.length - 1;\n            $scope.roles.splice(insertPosition, 0, role);\n            $ctrl.setRole(role);\n            $el.find(\".add-button\").show();\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $tgrepo.create(\"roles\", newRole).then(onSuccess, onError);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          $el.find(\".new\").addClass(\"hidden\");\n          $el.find(\".new\").val('');\n          return $el.find(\".add-button\").show();\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewRole\", [\"$tgRepo\", \"$tgConfirm\", NewRoleDirective]);\n\n  RolePermissionsDirective = function($rootscope, $repo, $confirm, $compile) {\n    var baseTemplate, categoryTemplate, link, resumeTemplate;\n    resumeTemplate = _.template(\"<div class=\\\"resume-title\\\" translate=\\\"<%- category.name %>\\\"></div>\\n<div class=\\\"summary-role\\\">\\n    <div class=\\\"count\\\"><%- category.activePermissions %>/<%- category.permissions.length %></div>\\n    <% _.each(category.permissions, function(permission) { %>\\n        <div class=\\\"role-summary-single check-toggle <% if(permission.active) { %>active<% } %>\\\"\\n             title=\\\"{{ '<%- permission.name %>' | translate }}\\\"></div>\\n    <% }) %>\\n</div>\\n<tg-svg svg-icon=\\\"icon-arrow-right\\\"></tg-svg>\");\n    categoryTemplate = _.template(\"<div class=\\\"category-config\\\" data-id=\\\"<%- index %>\\\">\\n    <div class=\\\"resume\\\">\\n    </div>\\n    <div class=\\\"category-items\\\">\\n        <div class=\\\"items-container\\\">\\n        <% _.each(category.permissions, function(permission) { %>\\n            <div class=\\\"category-item\\\" data-id=\\\"<%- permission.key %>\\\">\\n                <span translate=\\\"<%- permission.name %>\\\"></span>\\n                <div class=\\\"check\\\">\\n                    <input type=\\\"checkbox\\\"\\n                           <% if(!permission.editable) { %> disabled=\\\"disabled\\\" <% } %>\\n                           <% if(permission.active) { %> checked=\\\"checked\\\" <% } %>/>\\n                    <div></div>\\n                    <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n                    <span class=\\\"check-text check-no\\\" translate=\\\"COMMON.NO\\\"></span>\\n                </div>\\n            </div>\\n        <% }) %>\\n        </div>\\n    </div>\\n</div>\");\n    baseTemplate = _.template(\"<div class=\\\"category-config-list\\\"></div>\");\n    link = function($scope, $el, $attrs) {\n      var $ctrl, generateCategoriesFromRole, renderCategory, renderPermissions, renderResume;\n      $ctrl = $el.controller();\n      generateCategoriesFromRole = function(role) {\n        var categories, epicPermissions, isPermissionEditable, issuePermissions, milestonePermissions, setActivePermissions, setActivePermissionsPerCategory, taskPermissions, userStoryPermissions, wikiPermissions;\n        setActivePermissions = function(permissions) {\n          return _.map(permissions, function(x) {\n            var ref;\n            return _.extend({}, x, {\n              active: (ref = x[\"key\"], indexOf.call(role.permissions, ref) >= 0)\n            });\n          });\n        };\n        isPermissionEditable = function(permission, role, project) {\n          if (role.external_user && !project.is_private && permission.key.indexOf(\"view_\") === 0) {\n            return false;\n          } else {\n            return true;\n          }\n        };\n        setActivePermissionsPerCategory = function(category) {\n          return _.map(category, function(cat) {\n            cat.permissions = cat.permissions.map(function(permission) {\n              permission.editable = isPermissionEditable(permission, role, $scope.project);\n              return permission;\n            });\n            return _.extend({}, cat, {\n              activePermissions: _.filter(cat[\"permissions\"], \"active\").length\n            });\n          });\n        };\n        categories = [];\n        epicPermissions = [\n          {\n            key: \"view_epics\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.VIEW_EPICS\"\n          }, {\n            key: \"add_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.ADD_EPICS\"\n          }, {\n            key: \"modify_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.MODIFY_EPICS\"\n          }, {\n            key: \"comment_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.COMMENT_EPICS\"\n          }, {\n            key: \"delete_epic\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.DELETE_EPICS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.EPICS.NAME\",\n          permissions: setActivePermissions(epicPermissions)\n        });\n        milestonePermissions = [\n          {\n            key: \"view_milestones\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.VIEW_SPRINTS\"\n          }, {\n            key: \"add_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.ADD_SPRINTS\"\n          }, {\n            key: \"modify_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.MODIFY_SPRINTS\"\n          }, {\n            key: \"delete_milestone\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.DELETE_SPRINTS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.SPRINTS.NAME\",\n          permissions: setActivePermissions(milestonePermissions)\n        });\n        userStoryPermissions = [\n          {\n            key: \"view_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.VIEW_USER_STORIES\"\n          }, {\n            key: \"add_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.ADD_USER_STORIES\"\n          }, {\n            key: \"modify_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.MODIFY_USER_STORIES\"\n          }, {\n            key: \"comment_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.COMMENT_USER_STORIES\"\n          }, {\n            key: \"delete_us\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.DELETE_USER_STORIES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.USER_STORIES.NAME\",\n          permissions: setActivePermissions(userStoryPermissions)\n        });\n        taskPermissions = [\n          {\n            key: \"view_tasks\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.VIEW_TASKS\"\n          }, {\n            key: \"add_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.ADD_TASKS\"\n          }, {\n            key: \"modify_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.MODIFY_TASKS\"\n          }, {\n            key: \"comment_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.COMMENT_TASKS\"\n          }, {\n            key: \"delete_task\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.DELETE_TASKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.TASKS.NAME\",\n          permissions: setActivePermissions(taskPermissions)\n        });\n        issuePermissions = [\n          {\n            key: \"view_issues\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.VIEW_ISSUES\"\n          }, {\n            key: \"add_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.ADD_ISSUES\"\n          }, {\n            key: \"modify_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.MODIFY_ISSUES\"\n          }, {\n            key: \"comment_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.COMMENT_ISSUES\"\n          }, {\n            key: \"delete_issue\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.DELETE_ISSUES\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.ISSUES.NAME\",\n          permissions: setActivePermissions(issuePermissions)\n        });\n        wikiPermissions = [\n          {\n            key: \"view_wiki_pages\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_PAGES\"\n          }, {\n            key: \"modify_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.MODIFY_WIKI_PAGES\"\n          }, {\n            key: \"delete_wiki_page\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_PAGES\"\n          }, {\n            key: \"add_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.ADD_WIKI_LINKS\"\n          }, {\n            key: \"delete_wiki_link\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.DELETE_WIKI_LINKS\"\n          }, {\n            key: \"view_wiki_links\",\n            name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.VIEW_WIKI_LINKS\"\n          }\n        ];\n        categories.push({\n          name: \"COMMON.PERMISIONS_CATEGORIES.WIKI.NAME\",\n          permissions: setActivePermissions(wikiPermissions)\n        });\n        return setActivePermissionsPerCategory(categories);\n      };\n      renderResume = function(element, category) {\n        return element.find(\".resume\").html($compile(resumeTemplate({\n          category: category\n        }))($scope));\n      };\n      renderCategory = function(category, index) {\n        var html;\n        html = categoryTemplate({\n          category: category,\n          index: index\n        });\n        html = angular.element(html);\n        renderResume(html, category);\n        return $compile(html)($scope);\n      };\n      renderPermissions = function() {\n        var html;\n        $el.off();\n        html = baseTemplate();\n        _.each(generateCategoriesFromRole($scope.role), function(category, index) {\n          if (!$scope.project.is_private) {\n            category.permissions.forEach((function(_this) {\n              return function(permission) {\n                if (publicPermissions.includes(permission.key)) {\n                  return permission.editable = false;\n                }\n              };\n            })(this));\n          }\n          return html = angular.element(html).append(renderCategory(category, index));\n        });\n        $el.html(html);\n        $el.on(\"click\", \".resume\", function(event) {\n          var target;\n          event.preventDefault();\n          target = angular.element(event.currentTarget);\n          target.toggleClass(\"open-drawer\");\n          return target.next().toggleClass(\"open\");\n        });\n        return $el.on(\"change\", \".category-item input\", function(event) {\n          var getActivePermissions, onError, onSuccess, target;\n          getActivePermissions = function() {\n            var activePermissions;\n            activePermissions = _.filter($el.find(\".category-item input\"), function(t) {\n              return angular.element(t).is(\":checked\");\n            });\n            activePermissions = _.sortBy(_.map(activePermissions, function(t) {\n              var permission;\n              return permission = angular.element(t).parents(\".category-item\").data(\"id\");\n            }));\n            if (activePermissions.length) {\n              activePermissions.push(\"view_project\");\n            }\n            return activePermissions;\n          };\n          target = angular.element(event.currentTarget);\n          $scope.role.permissions = getActivePermissions();\n          onSuccess = function() {\n            var categories, categoryId;\n            categories = generateCategoriesFromRole($scope.role);\n            categoryId = target.parents(\".category-config\").data(\"id\");\n            renderResume(target.parents(\".category-config\"), categories[categoryId]);\n            $rootscope.$broadcast(\"projects:reload\");\n            $confirm.notify(\"success\");\n            return $ctrl.forceLoadProject();\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            target.prop(\"checked\", !target.prop(\"checked\"));\n            return $scope.role.permissions = getActivePermissions();\n          };\n          if ($scope.role.external_user) {\n            $scope.project.public_permissions = $scope.role.permissions;\n            $scope.project.anon_permissions = $scope.role.permissions.filter(function(permission) {\n              return permission.indexOf(\"view_\") === 0;\n            });\n            return $repo.save($scope.project).then(onSuccess, onError);\n          } else {\n            return $repo.save($scope.role).then(onSuccess, onError);\n          }\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      $scope.$on(\"role:changed\", function() {\n        return renderPermissions();\n      });\n      return bindOnce($scope, $attrs.ngModel, renderPermissions);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgRolePermissions\", [\"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$compile\", RolePermissionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BitbucketController, BitbucketWebhooksDirective, GithubController, GithubWebhooksDirective, GitlabController, GitlabWebhooksDirective, GogsController, GogsWebhooksDirective, NewWebhookDirective, SelectInputText, ValidOriginIpsDirective, WebhookDirective, WebhooksController, bindMethods, debounce, mixOf, module, taiga, timeout,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindMethods = this.taiga.bindMethods;\n\n  debounce = this.taiga.debounce;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaAdmin\");\n\n  WebhooksController = (function(superClass) {\n    extend(WebhooksController, superClass);\n\n    WebhooksController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"$tgLocation\", \"$tgNavUrls\", \"tgAppMetaService\", \"$translate\", \"tgErrorHandlingService\", \"tgProjectService\"];\n\n    function WebhooksController(scope, repo, rs, params, location, navUrls, appMetaService, translate, errorHandlingService, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = \"ADMIN.WEBHOOKS.SECTION_NAME\";\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.WEBHOOKS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"webhooks:reload\", this.loadWebhooks);\n    }\n\n    WebhooksController.prototype.loadWebhooks = function() {\n      return this.rs.webhooks.list(this.scope.projectId).then((function(_this) {\n        return function(webhooks) {\n          return _this.scope.webhooks = webhooks;\n        };\n      })(this));\n    };\n\n    WebhooksController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    WebhooksController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadWebhooks();\n    };\n\n    return WebhooksController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"WebhooksController\", WebhooksController);\n\n  WebhookDirective = function($rs, $repo, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var cancel, openHistory, save, showEditMode, showVisualizationMode, updateLogs, updateShowHideHistoryText, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      updateLogs = function() {\n        var prettyDate;\n        prettyDate = $translate.instant(\"ADMIN.WEBHOOKS.DATE\");\n        return $rs.webhooklogs.list(webhook.id).then((function(_this) {\n          return function(webhooklogs) {\n            var i, len, log, ref;\n            for (i = 0, len = webhooklogs.length; i < len; i++) {\n              log = webhooklogs[i];\n              log.validStatus = (200 <= (ref = log.status) && ref < 300);\n              log.prettySentHeaders = _.map(_.toPairs(log.request_headers), function(arg) {\n                var header, value;\n                header = arg[0], value = arg[1];\n                return header + \": \" + value;\n              }).join(\"\\n\");\n              log.prettySentData = JSON.stringify(log.request_data);\n              log.prettyDate = moment(log.created).format(prettyDate);\n            }\n            webhook.logs_counter = webhooklogs.length;\n            webhook.logs = webhooklogs;\n            return updateShowHideHistoryText();\n          };\n        })(this));\n      };\n      updateShowHideHistoryText = function() {\n        var historyElement, text, textElement, title;\n        textElement = $el.find(\".toggle-history\");\n        historyElement = textElement.parents(\".single-webhook-wrapper\").find(\".webhooks-history\");\n        if (historyElement.hasClass(\"open\")) {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_HIDE_HISTORY_TITLE\");\n        } else {\n          text = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY\");\n          title = $translate.instant(\"ADMIN.WEBHOOKS.ACTION_SHOW_HISTORY_TITLE\");\n        }\n        textElement.text(text);\n        return textElement.prop(\"title\", title);\n      };\n      showVisualizationMode = function() {\n        $el.find(\".edition-mode\").addClass(\"hidden\");\n        return $el.find(\".visualization-mode\").removeClass(\"hidden\");\n      };\n      showEditMode = function() {\n        $el.find(\".visualization-mode\").addClass(\"hidden\");\n        return $el.find(\".edition-mode\").removeClass(\"hidden\");\n      };\n      openHistory = function() {\n        return $el.find(\".webhooks-history\").addClass(\"open\");\n      };\n      cancel = function() {\n        showVisualizationMode();\n        return $scope.$apply(function() {\n          return webhook.revert();\n        });\n      };\n      save = debounce(2000, function(target) {\n        var form, promise;\n        form = target.parents(\"form\").checksley();\n        if (!form.validate()) {\n          return;\n        }\n        promise = $repo.save(webhook);\n        promise.then((function(_this) {\n          return function() {\n            return showVisualizationMode();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      $el.on(\"click\", \".test-webhook\", function() {\n        openHistory();\n        return $rs.webhooks.test(webhook.id).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".edit-webhook\", function() {\n        return showEditMode();\n      });\n      $el.on(\"click\", \".cancel-existing\", function() {\n        return cancel();\n      });\n      $el.on(\"click\", \".edit-existing\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        return save(target);\n      });\n      $el.on(\"keyup\", \".edition-mode input\", function(event) {\n        var target;\n        if (event.keyCode === 13) {\n          target = angular.element(event.currentTarget);\n          return save(target);\n        } else if (event.keyCode === 27) {\n          target = angular.element(event.currentTarget);\n          return cancel(target);\n        }\n      });\n      $el.on(\"click\", \".delete-webhook\", function() {\n        var message, title;\n        title = $translate.instant(\"ADMIN.WEBHOOKS.DELETE\");\n        message = $translate.instant(\"ADMIN.WEBHOOKS.WEBHOOK_NAME\", {\n          name: webhook.name\n        });\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            var onError, onSucces;\n            onSucces = function() {\n              askResponse.finish();\n              return $scope.$emit(\"webhooks:reload\");\n            };\n            onError = function() {\n              askResponse.finish(false);\n              return $confirm.notify(\"error\");\n            };\n            return $repo.remove(webhook).then(onSucces, onError);\n          };\n        })(this));\n      });\n      $el.on(\"click\", \".toggle-history\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        if ((webhook.logs == null) || webhook.logs.length === 0) {\n          return updateLogs().then(function() {\n            return timeout(0, function() {\n              $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n              return updateShowHideHistoryText();\n            });\n          });\n        } else {\n          $el.find(\".webhooks-history\").toggleClass(\"open\").slideToggle();\n          return $scope.$apply(function() {\n            return updateShowHideHistoryText();\n          });\n        }\n      });\n      $el.on(\"click\", \".history-single\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        target.toggleClass(\"history-single-open\");\n        return target.siblings(\".history-single-response\").toggleClass(\"open\");\n      });\n      return $el.on(\"click\", \".resend-request\", function(event) {\n        var log, target;\n        target = angular.element(event.currentTarget);\n        log = target.data(\"log\");\n        return $rs.webhooklogs.resend(log).then((function(_this) {\n          return function() {\n            return updateLogs();\n          };\n        })(this));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", WebhookDirective]);\n\n  NewWebhookDirective = function($rs, $repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var addWebhookDOMNode, formDOMNode, initializeNewValue, save, webhook;\n      webhook = $scope.$eval($attrs.tgWebhook);\n      formDOMNode = $el.find(\".new-webhook-form\");\n      addWebhookDOMNode = $el.find(\".add-webhook\");\n      initializeNewValue = function() {\n        return $scope.newValue = {\n          \"name\": \"\",\n          \"url\": \"\",\n          \"key\": \"\"\n        };\n      };\n      initializeNewValue();\n      $scope.$watch(\"webhooks\", function(webhooks) {\n        if (webhooks != null) {\n          if (webhooks.length === 0) {\n            formDOMNode.removeClass(\"hidden\");\n            addWebhookDOMNode.addClass(\"hidden\");\n            return formDOMNode.find(\"input\")[0].focus();\n          } else {\n            formDOMNode.addClass(\"hidden\");\n            return addWebhookDOMNode.removeClass(\"hidden\");\n          }\n        }\n      });\n      save = debounce(2000, function() {\n        var form, promise;\n        form = formDOMNode.checksley();\n        if (!form.validate()) {\n          return;\n        }\n        $scope.newValue.project = $scope.project.id;\n        promise = $repo.create(\"webhooks\", $scope.newValue);\n        promise.then((function(_this) {\n          return function() {\n            $analytics.trackEvent(\"webhooks\", \"create\", \"Create new webhook\", 1);\n            $scope.$emit(\"webhooks:reload\");\n            return initializeNewValue();\n          };\n        })(this));\n        return promise.then(null, function(data) {\n          $confirm.notify(\"error\");\n          return form.setErrors(data);\n        });\n      });\n      formDOMNode.on(\"click\", \".add-new\", function(event) {\n        event.preventDefault();\n        return save();\n      });\n      formDOMNode.on(\"keyup\", \"input\", function(event) {\n        if (event.keyCode === 13) {\n          return save();\n        }\n      });\n      formDOMNode.on(\"click\", \".cancel-new\", function(event) {\n        return $scope.$apply(function() {\n          initializeNewValue();\n          if ($scope.webhooks.length >= 1) {\n            return formDOMNode.addClass(\"hidden\");\n          }\n        });\n      });\n      return addWebhookDOMNode.on(\"click\", function(event) {\n        formDOMNode.removeClass(\"hidden\");\n        return formDOMNode.find(\"input\")[0].focus();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNewWebhook\", [\"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", NewWebhookDirective]);\n\n  GithubController = (function(superClass) {\n    extend(GithubController, superClass);\n\n    GithubController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GithubController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITHUB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITHUB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GithubController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"github\").then((function(_this) {\n        return function(github) {\n          return _this.scope.github = github;\n        };\n      })(this));\n    };\n\n    GithubController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GithubController.prototype.loadInitialData = function() {\n      var promise;\n      promise = this.loadProject();\n      return this.loadModules();\n    };\n\n    return GithubController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GithubController\", GithubController);\n\n  GitlabController = (function(superClass) {\n    extend(GitlabController, superClass);\n\n    GitlabController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GitlabController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GITLAB.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GITLAB.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    GitlabController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gitlab\").then((function(_this) {\n        return function(gitlab) {\n          return _this.scope.gitlab = gitlab;\n        };\n      })(this));\n    };\n\n    GitlabController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GitlabController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GitlabController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"GitlabController\", GitlabController);\n\n  BitbucketController = (function(superClass) {\n    extend(BitbucketController, superClass);\n\n    BitbucketController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function BitbucketController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.BITBUCKET.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.BITBUCKET.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.scope.$on(\"project:modules:reload\", (function(_this) {\n        return function() {\n          return _this.loadModules();\n        };\n      })(this));\n    }\n\n    BitbucketController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"bitbucket\").then((function(_this) {\n        return function(bitbucket) {\n          return _this.scope.bitbucket = bitbucket;\n        };\n      })(this));\n    };\n\n    BitbucketController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    BitbucketController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return BitbucketController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  module.controller(\"BitbucketController\", BitbucketController);\n\n  SelectInputText = function($translate, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $el.on(\"click\", \".select-input-content\", function() {\n        var source;\n        source = $el.find(\"input\");\n        if (!source.val()) {\n          return;\n        }\n        source.select();\n        document.execCommand('copy');\n        return $confirm.notify(\"success\", $translate.instant(\"COMMON.COPIED_TO_CLIPBOARD\"));\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgSelectInputText\", [\"$translate\", \"$tgConfirm\", SelectInputText]);\n\n  GithubWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.github, \"github\");\n          promise.then(function() {\n            $analytics.trackEvent(\"github-webhook\", \"created-or-changed\", \"Create or changed github webhook\", 1);\n            currentLoading.finish();\n            return $confirm.notify(\"success\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGithubWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GithubWebhooksDirective]);\n\n  GitlabWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gitlab, \"gitlab\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gitlab-webhook\", \"created-or-changed\", \"Create or changed gitlab webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgGitlabWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GitlabWebhooksDirective]);\n\n  BitbucketWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.bitbucket, \"bitbucket\");\n          promise.then(function() {\n            $analytics.trackEvent(\"bitbucket-webhook\", \"created-or-changed\", \"Create or changed bitbucket webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      return $el.on(\"submit\", \"form\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgBitbucketWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", BitbucketWebhooksDirective]);\n\n  ValidOriginIpsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs, $ngModel) {\n      return $ngModel.$parsers.push(function(value) {\n        value = $.trim(value);\n        if (value === \"\") {\n          return [];\n        }\n        return value.split(\",\");\n      });\n    };\n    return {\n      link: link,\n      restrict: \"EA\",\n      require: \"ngModel\"\n    };\n  };\n\n  module.directive(\"tgValidOriginIps\", ValidOriginIpsDirective);\n\n  GogsController = (function(superClass) {\n    extend(GogsController, superClass);\n\n    GogsController.$inject = [\"$scope\", \"$tgRepo\", \"$tgResources\", \"$routeParams\", \"tgAppMetaService\", \"$translate\", \"tgProjectService\"];\n\n    function GogsController(scope, repo, rs, params, appMetaService, translate, projectService) {\n      var promise;\n      this.scope = scope;\n      this.repo = repo;\n      this.rs = rs;\n      this.params = params;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      bindMethods(this);\n      this.scope.sectionName = this.translate.instant(\"ADMIN.GOGS.SECTION_NAME\");\n      this.scope.project = {};\n      promise = this.loadInitialData();\n      promise.then((function(_this) {\n        return function() {\n          var description, title;\n          title = _this.translate.instant(\"ADMIN.GOGS.PAGE_TITLE\", {\n            projectName: _this.scope.project.name\n          });\n          description = _this.scope.project.description;\n          return _this.appMetaService.setAll(title, description);\n        };\n      })(this));\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    GogsController.prototype.loadModules = function() {\n      return this.rs.modules.list(this.scope.projectId, \"gogs\").then((function(_this) {\n        return function(gogs) {\n          return _this.scope.gogs = gogs;\n        };\n      })(this));\n    };\n\n    GogsController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      return project;\n    };\n\n    GogsController.prototype.loadInitialData = function() {\n      this.loadProject();\n      return this.loadModules();\n    };\n\n    return GogsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  GogsWebhooksDirective = function($repo, $confirm, $loading, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var form, submit, submitButton;\n      form = $el.find(\"form\").checksley({\n        \"onlyOneErrorElement\": true\n      });\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $repo.saveAttribute($scope.gogs, \"gogs\");\n          promise.then(function() {\n            $analytics.trackEvent(\"gogs-webhook\", \"create-or-change\", \"Create or change gogs webhook\", 1);\n            currentLoading.finish();\n            $confirm.notify(\"success\");\n            return $scope.$emit(\"project:modules:reload\");\n          });\n          return promise.then(null, function(data) {\n            currentLoading.finish();\n            form.setErrors(data);\n            if (data._error_message) {\n              return $confirm.notify(\"error\", data._error_message);\n            }\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $el.on(\"click\", \".submit-button\", submit);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.controller(\"GogsController\", GogsController);\n\n  module.directive(\"tgGogsWebhooks\", [\"$tgRepo\", \"$tgConfirm\", \"$tgLoading\", \"$tgAnalytics\", GogsWebhooksDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteProjectDirective, bindOnce, debounce, module, taiga, timeout;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  timeout = this.taiga.timeout;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaProject\");\n\n  DeleteProjectDirective = function($repo, $rootscope, $auth, $location, $navUrls, $confirm, lightboxService, tgLoader, currentUserService, $analytics) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var projectToDelete, submit;\n      projectToDelete = null;\n      $scope.$on(\"deletelightbox:new\", function(ctx, project) {\n        lightboxService.open($el);\n        return projectToDelete = project;\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var promise;\n        tgLoader.start();\n        lightboxService.close($el);\n        promise = $repo.remove(projectToDelete);\n        promise.then(function(data) {\n          $analytics.trackEvent(\"projects\", \"delete\", \"Delete project\", 1);\n          tgLoader.pageLoaded();\n          $rootscope.$broadcast(\"projects:reload\");\n          $location.path($navUrls.resolve(\"home\"));\n          $confirm.notify(\"success\");\n          return currentUserService.loadProjects();\n        });\n        return promise.then(null, function() {\n          $confirm.notify(\"error\");\n          return lightboxService.close($el);\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      return $el.on(\"click\", \".js-confirm\", function(event) {\n        event.preventDefault();\n        return submit();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLbDeleteProject\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfirm\", \"lightboxService\", \"tgLoader\", \"tgCurrentUserService\", \"$tgAnalytics\", DeleteProjectDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindHtmlDirective, BindOnceAltDirective, BindOnceBindDirective, BindOnceHrefDirective, BindOnceHtmlDirective, BindOnceRefDirective, BindOnceSrcDirective, BindOnceTitleDirective, BindTitleDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  BindOnceBindDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoBind, function(val) {\n        return $el.text(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHtml, function(val) {\n        return $el.html(val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceRefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoRef, function(val) {\n        return $el.html(\"#\" + val + \" \");\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceSrcDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoSrc, function(val) {\n        return $el.attr(\"src\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceHrefDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoHref, function(val) {\n        return $el.attr(\"href\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceAltDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoAlt, function(val) {\n        return $el.attr(\"alt\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindOnceTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return bindOnce($scope, $attrs.tgBoTitle, function(val) {\n        return $el.attr(\"title\", val);\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindTitleDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgTitleHtml, function(val) {\n        if (val != null) {\n          return $el.attr(\"title\", val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  BindHtmlDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$watch($attrs.tgBindHtml, function(val) {\n        if (val != null) {\n          return $el.html(val);\n        }\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.directive(\"tgBoBind\", BindOnceBindDirective);\n\n  module.directive(\"tgBoHtml\", BindOnceHtmlDirective);\n\n  module.directive(\"tgBoRef\", BindOnceRefDirective);\n\n  module.directive(\"tgBoSrc\", BindOnceSrcDirective);\n\n  module.directive(\"tgBoHref\", BindOnceHrefDirective);\n\n  module.directive(\"tgBoAlt\", BindOnceAltDirective);\n\n  module.directive(\"tgBoTitle\", BindOnceTitleDirective);\n\n  module.directive(\"tgBindTitle\", BindTitleDirective);\n\n  module.directive(\"tgBindHtml\", BindHtmlDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ConfigurationService, module;\n\n  ConfigurationService = (function() {\n    function ConfigurationService() {\n      this.config = window.taigaConfig;\n    }\n\n    ConfigurationService.prototype.get = function(key, defaultValue) {\n      if (defaultValue == null) {\n        defaultValue = null;\n      }\n      if (_.has(this.config, key)) {\n        return this.config[key];\n      }\n      return defaultValue;\n    };\n\n    return ConfigurationService;\n\n  })();\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgConfig\", ConfigurationService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContribController, ContribUserSettingsController, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module(\"taigaBase\");\n\n  ContribController = (function(superClass) {\n    extend(ContribController, superClass);\n\n    ContribController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\", \"$tgRepo\", \"$tgResources\", \"$tgConfirm\", \"tgProjectService\", \"tgErrorHandlingService\"];\n\n    function ContribController(rootScope, scope, params, repo, rs, confirm, projectService, errorHandlingService) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.repo = repo;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.adminPlugins, {\n        \"slug\": this.params.plugin\n      }));\n      this.scope.projectSlug = this.params.pslug;\n      this.loadInitialData();\n    }\n\n    ContribController.prototype.loadProject = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      if (!project.i_am_admin) {\n        this.errorHandlingService.permissionDenied();\n      }\n      this.scope.projectId = project.id;\n      this.scope.project = project;\n      this.scope.$emit('project:loaded', project);\n      this.scope.$broadcast('project:loaded', project);\n      return project;\n    };\n\n    ContribController.prototype.loadInitialData = function() {\n      return this.loadProject();\n    };\n\n    return ContribController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribController\", ContribController);\n\n  ContribUserSettingsController = (function(superClass) {\n    extend(ContribUserSettingsController, superClass);\n\n    ContribUserSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$routeParams\"];\n\n    function ContribUserSettingsController(rootScope, scope, params) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.params = params;\n      this.scope.currentPlugin = _.head(_.filter(this.rootScope.userSettingsPlugins, {\n        \"slug\": this.params.plugin\n      }));\n    }\n\n    return ContribUserSettingsController;\n\n  })(taiga.Controller);\n\n  module.controller(\"ContribUserSettingsController\", ContribUserSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FiltersStorageService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  FiltersStorageService = (function(superClass) {\n    extend(FiltersStorageService, superClass);\n\n    FiltersStorageService.$inject = [\"$tgStorage\", \"$routeParams\"];\n\n    function FiltersStorageService(storage, params) {\n      this.storage = storage;\n      this.params = params;\n    }\n\n    FiltersStorageService.prototype.generateHash = function(components) {\n      if (components == null) {\n        components = [];\n      }\n      components = _.map(components, function(x) {\n        return JSON.stringify(x);\n      });\n      return hex_sha1(components.join(\":\"));\n    };\n\n    return FiltersStorageService;\n\n  })(taiga.Service);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HttpService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  HttpService = (function(superClass) {\n    extend(HttpService, superClass);\n\n    HttpService.$inject = [\"$http\", \"$q\", \"tgLoader\", \"$tgStorage\", \"$rootScope\", \"$cacheFactory\", \"$translate\"];\n\n    function HttpService(http, q, tgLoader, storage, rootScope, cacheFactory, translate) {\n      this.http = http;\n      this.q = q;\n      this.tgLoader = tgLoader;\n      this.storage = storage;\n      this.rootScope = rootScope;\n      this.cacheFactory = cacheFactory;\n      this.translate = translate;\n      HttpService.__super__.constructor.call(this);\n      this.cache = this.cacheFactory(\"httpget\");\n    }\n\n    HttpService.prototype.headers = function() {\n      var headers, lang, token;\n      headers = {};\n      token = this.storage.get('token');\n      if (token) {\n        headers[\"Authorization\"] = \"Bearer \" + token;\n      }\n      lang = this.translate.preferredLanguage();\n      if (lang) {\n        headers[\"Accept-Language\"] = lang;\n      }\n      return headers;\n    };\n\n    HttpService.prototype.request = function(options) {\n      options.headers = _.assign({}, options.headers || {}, this.headers());\n      return this.http(options);\n    };\n\n    HttpService.prototype.get = function(url, params, options) {\n      options = _.assign({\n        method: \"GET\",\n        url: url\n      }, options);\n      if (params) {\n        options.params = params;\n      }\n      options.cache = this.cache;\n      return this.request(options)[\"finally\"]((function(_this) {\n        return function(data) {\n          return _this.cache.removeAll();\n        };\n      })(this));\n    };\n\n    HttpService.prototype.post = function(url, data, params, options) {\n      options = _.assign({\n        method: \"POST\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      options.responseType = 'text';\n      return this.request(options);\n    };\n\n    HttpService.prototype.put = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PUT\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype.patch = function(url, data, params, options) {\n      options = _.assign({\n        method: \"PATCH\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    HttpService.prototype[\"delete\"] = function(url, data, params, options) {\n      options = _.assign({\n        method: \"DELETE\",\n        url: url\n      }, options);\n      if (data) {\n        options.data = data;\n      }\n      if (params) {\n        options.params = params;\n      }\n      return this.request(options);\n    };\n\n    return HttpService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgHttp\", HttpService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LoadElementDirective, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaBase\");\n\n  LoadElementDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var unwatch;\n      unwatch = $scope.$watch($parse($attrs.tgLoadElement), function(val) {\n        var el, legacyObj;\n        if (val) {\n          legacyObj = $parse($attrs.tgLoadElement)($scope);\n          el = $el[0];\n          el.component = legacyObj.component;\n          if (legacyObj.params) {\n            el.params = legacyObj.params;\n          }\n          if (legacyObj.events) {\n            return el.events = legacyObj.events;\n          }\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return unwatch();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgLoadElement\", ['$parse', LoadElementDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var locationFactory, module;\n\n  locationFactory = function($location, $route, $rootscope) {\n    $location.noreload = function(scope) {\n      var lastRoute, un;\n      lastRoute = $route.current;\n      un = scope.$on(\"$locationChangeSuccess\", function() {\n        $route.current = lastRoute;\n        return un();\n      });\n      return $location;\n    };\n    $location.isInCurrentRouteParams = function(name, value) {\n      var params;\n      params = $location.search() || {};\n      return params[name] === value;\n    };\n    return $location;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgLocation\", [\"$location\", \"$route\", \"$rootScope\", locationFactory]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Model, ModelService, module, provider, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  Model = (function() {\n    function Model(name, data, dataTypes) {\n      this._attrs = data;\n      this._name = name;\n      this._dataTypes = dataTypes;\n      this.setAttrs(data);\n      this.initialize();\n    }\n\n    Model.prototype.realClone = function() {\n      var attrs, instance;\n      attrs = _.cloneDeep(this._attrs);\n      instance = new Model(this._name, attrs, this._dataTypes);\n      instance._modifiedAttrs = _.cloneDeep(this._modifiedAttrs);\n      instance._isModified = _.cloneDeep(this._isModified);\n      return instance;\n    };\n\n    Model.prototype.clone = function() {\n      var instance;\n      instance = new Model(this._name, this._attrs, this._dataTypes);\n      instance._modifiedAttrs = this._modifiedAttrs;\n      instance._isModified = this._isModified;\n      return instance;\n    };\n\n    Model.prototype.applyCasts = function() {\n      var attrName, castMethod, castName, ref, results;\n      ref = this._dataTypes;\n      results = [];\n      for (attrName in ref) {\n        castName = ref[attrName];\n        castMethod = service.casts[castName];\n        if (!castMethod) {\n          continue;\n        }\n        results.push(this._attrs[attrName] = castMethod(this._attrs[attrName]));\n      }\n      return results;\n    };\n\n    Model.prototype.getIdAttrName = function() {\n      return \"id\";\n    };\n\n    Model.prototype.getName = function() {\n      return this._name;\n    };\n\n    Model.prototype.getAttrs = function(patch) {\n      if (patch == null) {\n        patch = false;\n      }\n      if (this._attrs.version != null) {\n        this._modifiedAttrs.version = this._attrs.version;\n      }\n      if (patch) {\n        return _.extend({}, this._modifiedAttrs);\n      }\n      return _.extend({}, this._attrs, this._modifiedAttrs);\n    };\n\n    Model.prototype.setAttrs = function(attrs) {\n      this._attrs = attrs;\n      this._modifiedAttrs = {};\n      this.applyCasts();\n      return this._isModified = false;\n    };\n\n    Model.prototype.setAttr = function(name, value) {\n      this._modifiedAttrs[name] = value;\n      return this._isModified = true;\n    };\n\n    Model.prototype.initialize = function() {\n      var getter, self, setter;\n      self = this;\n      getter = function(name) {\n        return function() {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            return self[name];\n          }\n          if (indexOf.call(_.keys(self._modifiedAttrs), name) < 0) {\n            return self._attrs[name];\n          }\n          return self._modifiedAttrs[name];\n        };\n      };\n      setter = function(name) {\n        return function(value) {\n          if (typeof name === 'string' && name.substr(0, 2) === \"__\") {\n            self[name] = value;\n            return;\n          }\n          if (self._attrs[name] !== value) {\n            self._modifiedAttrs[name] = value;\n            self._isModified = true;\n          } else {\n            delete self._modifiedAttrs[name];\n          }\n        };\n      };\n      return _.each(this._attrs, function(value, name) {\n        var options;\n        options = {\n          get: getter(name),\n          set: setter(name),\n          enumerable: true,\n          configurable: true\n        };\n        return Object.defineProperty(self, name, options);\n      });\n    };\n\n    Model.prototype.serialize = function() {\n      var data;\n      data = {\n        \"data\": _.clone(this._attrs),\n        \"name\": this._name\n      };\n      return JSON.stringify(data);\n    };\n\n    Model.prototype.isModified = function() {\n      return this._isModified;\n    };\n\n    Model.prototype.isAttributeModified = function(attribute) {\n      return this._modifiedAttrs[attribute] != null;\n    };\n\n    Model.prototype.markSaved = function() {\n      this._isModified = false;\n      this._attrs = this.getAttrs();\n      return this._modifiedAttrs = {};\n    };\n\n    Model.prototype.revert = function() {\n      this._modifiedAttrs = {};\n      return this._isModified = false;\n    };\n\n    Model.desSerialize = function(sdata) {\n      var ddata, model;\n      ddata = JSON.parse(sdata);\n      model = new Model(ddata.url, ddata.data);\n      return model;\n    };\n\n    return Model;\n\n  })();\n\n  taiga = this.taiga;\n\n  ModelService = (function(superClass) {\n    extend(ModelService, superClass);\n\n    ModelService.$inject = [\"$q\", \"$tgUrls\", \"$tgStorage\", \"$tgHttp\"];\n\n    function ModelService(q, urls, storage, http) {\n      this.q = q;\n      this.urls = urls;\n      this.storage = storage;\n      this.http = http;\n      ModelService.__super__.constructor.call(this);\n    }\n\n    return ModelService;\n\n  })(taiga.Service);\n\n  provider = function($q, $http, $gmUrls, $gmStorage) {\n    var service;\n    service = {};\n    service.make_model = function(name, data, cls, dataTypes) {\n      if (cls == null) {\n        cls = Model;\n      }\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      return new cls(name, data, dataTypes);\n    };\n    service.cls = Model;\n    service.casts = {\n      int: function(value) {\n        return parseInt(value, 10);\n      },\n      float: function(value) {\n        return parseFloat(value, 10);\n      }\n    };\n    return service;\n  };\n\n  module = angular.module(\"taigaBase\");\n\n  module.factory(\"$tgModel\", [\"$q\", \"$http\", \"$tgUrls\", \"$tgStorage\", provider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationUrlsDirective, NavigationUrlsService, bindOnce, module, taiga, trim,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  trim = this.taiga.trim;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaBase\");\n\n  NavigationUrlsService = (function(superClass) {\n    extend(NavigationUrlsService, superClass);\n\n    function NavigationUrlsService() {\n      this.urls = {};\n    }\n\n    NavigationUrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge({}, this.urls, urls || {});\n    };\n\n    NavigationUrlsService.prototype.formatUrl = function(url, ctx) {\n      var replacer;\n      if (ctx == null) {\n        ctx = {};\n      }\n      replacer = function(match) {\n        match = trim(match, \":\");\n        return ctx[match] || \"undefined\";\n      };\n      return url.replace(/(:\\w+)/g, replacer);\n    };\n\n    NavigationUrlsService.prototype.resolve = function(name, ctx) {\n      var url;\n      url = this.urls[name];\n      if (!url) {\n        return \"\";\n      }\n      if (ctx) {\n        return this.formatUrl(url, ctx);\n      }\n      return url;\n    };\n\n    return NavigationUrlsService;\n\n  })(taiga.Service);\n\n  module.service(\"$tgNavUrls\", NavigationUrlsService);\n\n  NavigationUrlsDirective = function($navurls, $auth, $q, $location, lightboxService, tgSections) {\n    var bindOnceP, link, parseNav;\n    bindOnceP = function($scope, attr) {\n      var defered;\n      defered = $q.defer();\n      bindOnce($scope, attr, function(v) {\n        return defered.resolve(v);\n      });\n      return defered.promise;\n    };\n    parseNav = function(data, $scope) {\n      var index, name, obj, params, promises, ref, result, values;\n      ref = _.map(data.split(\":\"), trim), name = ref[0], params = ref[1];\n      if (params) {\n        result = params.split(/(\\w+)=/);\n        result = _.filter(result, function(str) {\n          return str.length;\n        });\n        result = _.map(result, function(str) {\n          return trim(str.replace(/,$/g, ''));\n        });\n        params = [];\n        index = 0;\n        while (index < result.length) {\n          obj = {};\n          obj[result[index]] = result[index + 1];\n          params.push(obj);\n          index = index + 2;\n        }\n      } else {\n        params = [];\n      }\n      values = _.map(params, function(param) {\n        return _.values(param)[0];\n      });\n      promises = _.map(values, function(x) {\n        return bindOnceP($scope, x);\n      });\n      return Promise.all(promises).then(function() {\n        var i, key, len, options, param, value;\n        options = {};\n        for (i = 0, len = params.length; i < len; i++) {\n          param = params[i];\n          key = Object.keys(param)[0];\n          value = param[key];\n          options[key] = $scope.$eval(value);\n        }\n        return [name, options];\n      });\n    };\n    link = function($scope, $el, $attrs) {\n      if ($el.is(\"a\")) {\n        $el.attr(\"href\", \"#\");\n      }\n      $el.on(\"mouseenter\", function(event) {\n        var target;\n        target = $(event.currentTarget);\n        if (!target.data(\"fullUrl\") || $attrs.tgNavGetParams !== target.data(\"params\")) {\n          return parseNav($attrs.tgNav, $scope).then(function(result) {\n            var fullUrl, getURLParams, getURLParamsStr, name, options, path, url, user;\n            name = result[0], options = result[1];\n            user = $auth.getUser();\n            if (user) {\n              options.user = user.username;\n            }\n            if (name === 'project') {\n              path = tgSections.getPath(options['project'], options['section']);\n              name = name + \"-\" + path;\n            }\n            url = $navurls.resolve(name);\n            fullUrl = $navurls.formatUrl(url, options);\n            if ($attrs.tgNavGetParams) {\n              getURLParams = JSON.parse($attrs.tgNavGetParams);\n              getURLParamsStr = $.param(getURLParams);\n              fullUrl = fullUrl + \"?\" + getURLParamsStr;\n              target.data(\"params\", $attrs.tgNavGetParams);\n            }\n            target.data(\"fullUrl\", fullUrl);\n            if (target.is(\"a\")) {\n              target.attr(\"href\", fullUrl);\n            }\n            return $el.on(\"click\", function(event) {\n              if (event.metaKey || event.ctrlKey) {\n                return;\n              }\n              event.preventDefault();\n              target = $(event.currentTarget);\n              if (target.hasClass('noclick')) {\n                return;\n              }\n              fullUrl = target.data(\"fullUrl\");\n              switch (event.which) {\n                case 1:\n                  $location.url(fullUrl);\n                  $scope.$apply();\n                  break;\n                case 2:\n                  window.open(fullUrl);\n              }\n              return lightboxService.closeAll();\n            });\n          });\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgNav\", [\"$tgNavUrls\", \"$tgAuth\", \"$q\", \"$tgLocation\", \"lightboxService\", \"$tgSections\", NavigationUrlsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RepositoryService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  RepositoryService = (function(superClass) {\n    extend(RepositoryService, superClass);\n\n    RepositoryService.$inject = [\"$q\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\"];\n\n    function RepositoryService(q, model1, storage, http, urls) {\n      this.q = q;\n      this.model = model1;\n      this.storage = storage;\n      this.http = http;\n      this.urls = urls;\n      RepositoryService.__super__.constructor.call(this);\n    }\n\n    RepositoryService.prototype.resolveUrlForModel = function(model) {\n      var idAttrName;\n      idAttrName = model.getIdAttrName();\n      return (this.urls.resolve(model.getName())) + \"/\" + model[idAttrName];\n    };\n\n    RepositoryService.prototype.resolveUrlForAttributeModel = function(model) {\n      return this.urls.resolve(model.getName(), model.parent);\n    };\n\n    RepositoryService.prototype.create = function(name, data, dataTypes, extraParams) {\n      var defered, promise, url;\n      if (dataTypes == null) {\n        dataTypes = {};\n      }\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      defered = this.q.defer();\n      url = this.urls.resolve(name);\n      promise = this.http.post(url, JSON.stringify(data), extraParams);\n      promise.success((function(_this) {\n        return function(_data, _status) {\n          return defered.resolve(_this.model.make_model(name, _data, null, dataTypes));\n        };\n      })(this));\n      promise.error((function(_this) {\n        return function(data, status) {\n          return defered.reject(data);\n        };\n      })(this));\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.remove = function(model, params) {\n      var defered, promise, url;\n      if (params == null) {\n        params = {};\n      }\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http[\"delete\"](url, {}, params);\n      promise.success(function(data, status) {\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(model);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAll = function(models, patch) {\n      var promises;\n      if (patch == null) {\n        patch = true;\n      }\n      promises = _.map(models, (function(_this) {\n        return function(x) {\n          return _this.save(x, true);\n        };\n      })(this));\n      return this.q.all(promises);\n    };\n\n    RepositoryService.prototype.save = function(model, patch, params, options, returnHeaders) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      if (params == null) {\n        params = {};\n      }\n      if (returnHeaders == null) {\n        returnHeaders = false;\n      }\n      defered = this.q.defer();\n      if (!model.isModified() && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForModel(model);\n      data = JSON.stringify(model.getAttrs(patch));\n      if (patch) {\n        promise = this.http.patch(url, data, params, options);\n      } else {\n        promise = this.http.put(url, data, params, options);\n      }\n      promise.success((function(_this) {\n        return function(data, status, headers, response) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          if (returnHeaders) {\n            return defered.resolve([model, headers()]);\n          } else {\n            return defered.resolve(model);\n          }\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.saveAttribute = function(model, attribute, patch) {\n      var data, defered, promise, url;\n      if (patch == null) {\n        patch = true;\n      }\n      defered = this.q.defer();\n      if (!(model != null ? model.isModified() : void 0) && patch) {\n        defered.resolve(model);\n        return defered.promise;\n      }\n      url = this.resolveUrlForAttributeModel(model);\n      data = {};\n      data[attribute] = model.getAttrs();\n      if (patch) {\n        promise = this.http.patch(url, data);\n      } else {\n        promise = this.http.put(url, data);\n      }\n      promise.success((function(_this) {\n        return function(data, status) {\n          model._isModified = false;\n          model._attrs = _.extend(model.getAttrs(), data);\n          model._modifiedAttrs = {};\n          model.applyCasts();\n          return defered.resolve(model);\n        };\n      })(this));\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.refresh = function(model) {\n      var defered, promise, url;\n      defered = this.q.defer();\n      url = this.resolveUrlForModel(model);\n      promise = this.http.get(url);\n      promise.success(function(data, status) {\n        model._modifiedAttrs = {};\n        model._attrs = data;\n        model._isModified = false;\n        model.applyCasts();\n        return defered.resolve(model);\n      });\n      promise.error(function(data, status) {\n        return defered.reject(data);\n      });\n      return defered.promise;\n    };\n\n    RepositoryService.prototype.queryMany = function(name, params, options, headers) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      if (headers == null) {\n        headers = false;\n      }\n      url = this.urls.resolve(name);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var result;\n          result = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          if (headers) {\n            return [result, data.headers];\n          }\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneAttribute = function(name, id, attribute, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name, id);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var model;\n          model = _this.model.make_model(name, data.data[attribute]);\n          model.parent = id;\n          return model;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOne = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return _this.model.make_model(name, data.data);\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOneRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryPaginated = function(name, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.models = _.map(data.data, function(x) {\n            return _this.model.make_model(name, x);\n          });\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.queryOnePaginatedRaw = function(name, id, params, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = this.urls.resolve(name);\n      if (id) {\n        url = url + \"/\" + id;\n      }\n      httpOptions = _.merge({\n        headers: {}\n      }, options);\n      return this.http.get(url, params, httpOptions).then((function(_this) {\n        return function(data) {\n          var headers, result;\n          headers = data.headers();\n          result = {};\n          result.data = data.data;\n          result.count = parseInt(headers[\"x-pagination-count\"], 10);\n          result.current = parseInt(headers[\"x-pagination-current\"] || 1, 10);\n          result.paginatedBy = parseInt(headers[\"x-paginated-by\"], 10);\n          return result;\n        };\n      })(this));\n    };\n\n    RepositoryService.prototype.resolve = function(options) {\n      var cache, params;\n      params = {};\n      if (options.pslug != null) {\n        params.project = options.pslug;\n      }\n      if (options.usref != null) {\n        params.us = options.usref;\n      }\n      if (options.taskref != null) {\n        params.task = options.taskref;\n      }\n      if (options.issueref != null) {\n        params.issue = options.issueref;\n      }\n      if (options.sslug != null) {\n        params.milestone = options.sslug;\n      }\n      if (options.wikipage != null) {\n        params.wikipage = options.wikipage;\n      }\n      if (options.ref != null) {\n        params.ref = options.ref;\n      }\n      cache = !(options.wikipage || options.sslug);\n      return this.queryOneRaw(\"resolver\", null, params, {\n        cache: cache\n      });\n    };\n\n    return RepositoryService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgRepo\", RepositoryService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StorageService, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  StorageService = (function(superClass) {\n    extend(StorageService, superClass);\n\n    StorageService.$inject = [\"$rootScope\"];\n\n    function StorageService($rootScope) {\n      StorageService.__super__.constructor.call(this);\n    }\n\n    StorageService.prototype.get = function(key, _default) {\n      var serializedValue;\n      serializedValue = localStorage.getItem(key);\n      if (serializedValue === null) {\n        return _default || null;\n      }\n      return JSON.parse(serializedValue);\n    };\n\n    StorageService.prototype.set = function(key, val) {\n      if (_.isObject(key)) {\n        return _.each(key, (function(_this) {\n          return function(val, key) {\n            return _this.set(key, val);\n          };\n        })(this));\n      } else {\n        return localStorage.setItem(key, JSON.stringify(val));\n      }\n    };\n\n    StorageService.prototype.contains = function(key) {\n      var value;\n      value = this.get(key);\n      return value !== null;\n    };\n\n    StorageService.prototype.remove = function(key) {\n      return localStorage.removeItem(key);\n    };\n\n    StorageService.prototype.clear = function() {\n      return localStorage.clear();\n    };\n\n    return StorageService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service(\"$tgStorage\", StorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UrlsService, format, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  format = function(fmt, obj) {\n    obj = _.clone(obj);\n    return fmt.replace(/%s/g, function(match) {\n      return String(obj.shift());\n    });\n  };\n\n  taiga = this.taiga;\n\n  UrlsService = (function(superClass) {\n    extend(UrlsService, superClass);\n\n    UrlsService.$inject = [\"$tgConfig\"];\n\n    function UrlsService(config) {\n      this.config = config;\n      this.urls = {};\n      this.mainUrl = this.config.get(\"api\");\n    }\n\n    UrlsService.prototype.update = function(urls) {\n      return this.urls = _.merge(this.urls, urls);\n    };\n\n    UrlsService.prototype.resolve = function() {\n      var args, name, url;\n      args = _.toArray(arguments);\n      if (args.length === 0) {\n        throw Error(\"wrong arguments to setUrls\");\n      }\n      name = args.slice(0, 1)[0];\n      url = format(this.urls[name], args.slice(1));\n      return format(\"%s/%s\", [_.trimEnd(this.mainUrl, \"/\"), _.trimStart(url, \"/\")]);\n    };\n\n    UrlsService.prototype.resolveAbsolute = function() {\n      var url;\n      url = this.resolve.apply(this, arguments);\n      if (/^https?:\\/\\//i.test(url)) {\n        return url;\n      }\n      if (/^\\//.test(url)) {\n        return window.location.protocol + \"//\" + window.location.host + url;\n      }\n      return window.location.protocol + \"//\" + window.location.host + \"/\" + url;\n    };\n\n    return UrlsService;\n\n  })(taiga.Service);\n\n  module = angular.module(\"taigaBase\");\n\n  module.service('$tgUrls', UrlsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var _get, service;\n    _get = function(objectId, resource) {\n      return $repo.queryOne(resource, objectId);\n    };\n    service = {\n      epic: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/epic\");\n        }\n      },\n      userstory: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/userstory\");\n        }\n      },\n      task: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/task\");\n        }\n      },\n      issue: {\n        get: function(objectId) {\n          return _get(objectId, \"custom-attributes-values/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributesValues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesValuesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var _list, service;\n    _list = function(projectId, resource) {\n      return $repo.queryMany(resource, {\n        project: projectId\n      });\n    };\n    service = {\n      epic: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/epic\");\n        }\n      },\n      userstory: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/userstory\");\n        }\n      },\n      task: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/task\");\n        }\n      },\n      issue: {\n        list: function(projectId) {\n          return _list(projectId, \"custom-attributes/issue\");\n        }\n      }\n    };\n    return function(instance) {\n      return instance.customAttributes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgCustomAttributesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"epics-queryparams\";\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"epics\", \"by_ref\", params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.upvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-upvote\", epicId);\n      return $http.post(url);\n    };\n    service.downvote = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-downvote\", epicId);\n      return $http.post(url);\n    };\n    service.watch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-watch\", epicId);\n      return $http.post(url);\n    };\n    service.unwatch = function(epicId) {\n      var url;\n      url = $urls.resolve(\"epic-unwatch\", epicId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.epics = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgEpicsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(contentType, objectId, entryType) {\n      return $repo.queryOneRaw(\"history/\" + contentType, objectId, {\n        type: entryType\n      });\n    };\n    service.editComment = function(type, objectId, activityId, comment) {\n      var commentData, params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/edit_comment\";\n      params = {\n        id: activityId\n      };\n      commentData = {\n        comment: comment\n      };\n      return $http.post(url, commentData, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.getCommentHistory = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/comment_versions\";\n      params = {\n        id: activityId\n      };\n      return $http.get(url, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.deleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/delete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    service.undeleteComment = function(type, objectId, activityId) {\n      var params, url;\n      url = $urls.resolve(\"history/\" + type);\n      url = url + \"/\" + objectId + \"/undelete_comment\";\n      params = {\n        id: activityId\n      };\n      return $http.post(url, null, params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.history = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgHistoryResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.get = function(token) {\n      return $repo.queryOne(\"invitations\", token);\n    };\n    return function(instance) {\n      return instance.invitations = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgInvitationsResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashIssuesShowTags, hashSprintShowTags, hashSuffix, service;\n    service = {};\n    hashSuffix = \"issues-queryparams\";\n    hashSprintShowTags = \"taskboard-issues\";\n    hashIssuesShowTags = \"issues-list\";\n    service.get = function(projectId, issueId) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      return $repo.queryOne(\"issues\", issueId, params);\n    };\n    service.getByRef = function(projectId, ref) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      return $repo.queryOne(\"issues\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"issues\", filters);\n    };\n    service.list = function(projectId, filters, options) {\n      var params;\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryPaginated(\"issues\", params, options);\n    };\n    service.listInProject = function(projectId, sprintId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      params = _.merge(params, {\n        project: projectId\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"issues\", params);\n    };\n    service.bulkCreate = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-issues\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.upvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-upvote\", issueId);\n      return $http.post(url);\n    };\n    service.downvote = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-downvote\", issueId);\n      return $http.post(url);\n    };\n    service.watch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-watch\", issueId);\n      return $http.post(url);\n    };\n    service.unwatch = function(issueId) {\n      var url;\n      url = $urls.resolve(\"issue-unwatch\", issueId);\n      return $http.post(url);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/issues_stats\");\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"issues-filters\", null, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-issue-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    service.promoteToUserStory = function(issueId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-issue-to-us\", issueId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    service.storeIssuesShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getIssuesShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashIssuesShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    service.storeSprintShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSprintShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSprintShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.issues = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgIssuesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($storage) {\n    var hashSuffixStatusColumnModes, hashSuffixStatusViewModes, hashSuffixSwimlanesModes, service;\n    service = {};\n    hashSuffixStatusViewModes = \"kanban-statusviewmodels\";\n    hashSuffixStatusColumnModes = \"kanban-statuscolumnmodels\";\n    hashSuffixSwimlanesModes = \"kanban-swimlanesmodels\";\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeSwimlanesModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getSwimlanesModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixSwimlanesModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    return function(instance) {\n      return instance.kanban = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgKanbanResourcesProvider\", [\"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {\n      list: function() {\n        return $repo.queryMany(\"locales\");\n      }\n    };\n    return function(instance) {\n      return instance.locales = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgLocalesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.render = function(projectId, content) {\n      var params, url;\n      if ((content == null) || content === \"\") {\n        content = ' ';\n      }\n      params = {\n        project_id: projectId,\n        content: content\n      };\n      url = $urls.resolve(\"wiki\");\n      return $http.post(url + \"/render\", params).then((function(_this) {\n        return function(data) {\n          return data.data;\n        };\n      })(this));\n    };\n    return function(instance) {\n      return instance.mdrender = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMdRenderResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"memberships\", id);\n    };\n    service.list = function(projectId, filters, enablePagination) {\n      var options, params;\n      if (enablePagination == null) {\n        enablePagination = true;\n      }\n      params = {\n        project: projectId\n      };\n      params = _.extend({}, params, filters || {});\n      if (enablePagination) {\n        return $repo.queryPaginated(\"memberships\", params);\n      }\n      return $repo.queryMany(\"memberships\", params, options = {\n        enablePagination: enablePagination\n      });\n    };\n    service.listByUser = function(userId, filters) {\n      var params;\n      params = {\n        user: userId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryPaginated(\"memberships\", params);\n    };\n    service.resendInvitation = function(id) {\n      var url;\n      url = $urls.resolve(\"memberships\");\n      return $http.post(url + \"/\" + id + \"/resend_invitation\", {});\n    };\n    service.bulkCreateMemberships = function(projectId, data, invitation_extra_text) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-memberships\");\n      params = {\n        project_id: projectId,\n        bulk_memberships: data,\n        invitation_extra_text: invitation_extra_text\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.memberships = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgMembershipsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo) {\n    var service;\n    service = {};\n    service.list = function(projectId, module) {\n      return $repo.queryOneAttribute(\"project-modules\", projectId, module);\n    };\n    return function(instance) {\n      return instance.modules = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgModulesResourcesProvider\", [\"$tgRepo\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"notify-policies\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"notify-policies\", params);\n    };\n    return function(instance) {\n      return instance.notifyPolicies = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgNotifyPoliciesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $auth, $q, $translate) {\n    var service;\n    service = {};\n    service.get = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId);\n    };\n    service.getBySlug = function(projectSlug) {\n      return $repo.queryOne(\"projects\", \"by_slug?slug=\" + projectSlug);\n    };\n    service.list = function(filters) {\n      var params;\n      params = {\n        \"order_by\": \"user_order\"\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.listByMember = function(memberId) {\n      var params;\n      params = {\n        \"member\": memberId,\n        \"order_by\": \"user_order\"\n      };\n      return $repo.queryMany(\"projects\", params);\n    };\n    service.templates = function() {\n      return $repo.queryMany(\"project-templates\");\n    };\n    service.usersList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"users\", params);\n    };\n    service.rolesList = function(projectId) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(\"roles\", params);\n    };\n    service.stats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/stats\");\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = $urls.resolve(\"bulk-update-projects-order\");\n      return $http.post(url, bulkData);\n    };\n    service.regenerate_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.regenerate_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/regenerate_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_epics_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_epics_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_userstories_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_userstories_csv_uuid\";\n      return $http.post(url);\n    };\n    service.delete_tasks_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tasks_csv_uuid\";\n      return $http.post(url);\n    };\n    service.patch_default_swimlane = function(projectId, swimlaneId) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId;\n      data = {\n        default_swimlane: swimlaneId\n      };\n      return $http.patch(url, data);\n    };\n    service.delete_issues_csv_uuid = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_issues_csv_uuid\";\n      return $http.post(url);\n    };\n    service.leave = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/leave\";\n      return $http.post(url);\n    };\n    service.memberStats = function(projectId) {\n      return $repo.queryOneRaw(\"projects\", projectId + \"/member_stats\");\n    };\n    service.tagsColors = function(projectId) {\n      return $repo.queryOne(\"projects\", projectId + \"/tags_colors\");\n    };\n    service.deleteTag = function(projectId, tag) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/delete_tag\";\n      return $http.post(url, {\n        tag: tag\n      });\n    };\n    service.createTag = function(projectId, tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/create_tag\";\n      data = {};\n      data.tag = tag;\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.editTag = function(projectId, from_tag, to_tag, color) {\n      var data, url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/edit_tag\";\n      data = {};\n      data.from_tag = from_tag;\n      if (to_tag) {\n        data.to_tag = to_tag;\n      }\n      data.color = null;\n      if (color) {\n        data.color = color;\n      }\n      return $http.post(url, data);\n    };\n    service.mixTags = function(projectId, to_tag, from_tags) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/mix_tags\";\n      return $http.post(url, {\n        to_tag: to_tag,\n        from_tags: from_tags\n      });\n    };\n    service[\"export\"] = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"exporter\")) + \"/\" + projectId;\n      return $http.get(url);\n    };\n    service[\"import\"] = function(file, statusUpdater) {\n      var complete, data, defered, errorMsg, failed, maxFileSize, response, uploadComplete, uploadFailed, uploadProgress, xhr;\n      defered = $q.defer();\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        errorMsg = $translate.instant(\"PROJECT.IMPORT.ERROR_MAX_SIZE_EXCEEDED\", {\n          fileName: file.name,\n          fileSize: sizeFormat(file.size),\n          maxFileSize: sizeFormat(maxFileSize)\n        });\n        response = {\n          status: 413,\n          data: {\n            _error_message: errorMsg\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          var message, percent;\n          percent = Math.round((evt.loaded / evt.total) * 100);\n          message = $translate.instant(\"PROJECT.IMPORT.UPLOAD_IN_PROGRESS_MESSAGE\", {\n            uploadedSize: sizeFormat(evt.loaded),\n            totalSize: sizeFormat(evt.total)\n          });\n          return statusUpdater(\"in-progress\", null, message, percent);\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"done\", $translate.instant(\"PROJECT.IMPORT.TITLE\"), $translate.instant(\"PROJECT.IMPORT.DESCRIPTION\"));\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return statusUpdater(\"error\");\n        };\n      })(this);\n      complete = (function(_this) {\n        return function(evt) {\n          var ref;\n          response = {};\n          try {\n            response.data = JSON.parse(evt.target.responseText);\n          } catch (error) {\n            response.data = {};\n          }\n          response.status = evt.target.status;\n          if (evt.target.getResponseHeader('Taiga-Info-Project-Is-Private')) {\n            response.headers = {\n              isPrivate: evt.target.getResponseHeader('Taiga-Info-Project-Is-Private') === 'True',\n              memberships: parseInt(evt.target.getResponseHeader('Taiga-Info-Project-Memberships'))\n            };\n          }\n          if ((ref = response.status) === 201 || ref === 202) {\n            defered.resolve(response);\n          }\n          return defered.reject(response);\n        };\n      })(this);\n      failed = (function(_this) {\n        return function(evt) {\n          return defered.reject(\"fail\");\n        };\n      })(this);\n      data = new FormData();\n      data.append('dump', file);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.upload.addEventListener(\"load\", uploadComplete, false);\n      xhr.upload.addEventListener(\"error\", uploadFailed, false);\n      xhr.upload.addEventListener(\"abort\", uploadFailed, false);\n      xhr.addEventListener(\"load\", complete, false);\n      xhr.addEventListener(\"error\", failed, false);\n      xhr.open(\"POST\", $urls.resolve(\"importer\"));\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + ($auth.getToken()));\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    service.changeLogo = function(projectId, file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('logo', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/change_logo\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeLogo = function(projectId) {\n      var url;\n      url = ($urls.resolve(\"projects\")) + \"/\" + projectId + \"/remove_logo\";\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.projects = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgProjectsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgAuth\", \"$q\", \"$translate\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"roles\", id);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"roles\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.roles = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgRolesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $urls, $http, $q) {\n    var service;\n    service = {};\n    service[\"do\"] = function(projectId, term) {\n      var deferredAbort, params, request, url;\n      deferredAbort = $q.defer();\n      url = $urls.resolve(\"search\");\n      params = {\n        url: url,\n        method: \"GET\",\n        timeout: deferredAbort.promise,\n        cancelable: true,\n        params: {\n          project: projectId,\n          text: term,\n          get_all: false\n        }\n      };\n      request = $http.request(params).then(function(data) {\n        return data.data;\n      });\n      request.abort = function() {\n        return deferredAbort.resolve();\n      };\n      request[\"finally\"] = function() {\n        request.abort = angular.noop;\n        return deferredAbort = request = null;\n      };\n      return request;\n    };\n    return function(instance) {\n      return instance.search = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSearchResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $model, $storage, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(projectId, sprintId) {\n      return $repo.queryOne(\"milestones\", sprintId).then(function(sprint) {\n        var uses;\n        uses = sprint.user_stories;\n        uses = _.map(uses, function(u) {\n          return $model.make_model(\"userstories\", u);\n        });\n        sprint._attrs.user_stories = uses;\n        return sprint;\n      });\n    };\n    service.stats = function(projectId, sprintId) {\n      return $repo.queryOneRaw(\"milestones\", sprintId + \"/stats\");\n    };\n    service.list = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"milestones\", params, {}, true).then((function(_this) {\n        return function(result) {\n          var headers, i, len, m, milestones, uses;\n          milestones = result[0];\n          headers = result[1];\n          for (i = 0, len = milestones.length; i < len; i++) {\n            m = milestones[i];\n            uses = m.user_stories;\n            uses = _.map(uses, function(u) {\n              return $model.make_model(\"userstories\", u);\n            });\n            m._attrs.user_stories = uses;\n          }\n          return {\n            milestones: milestones,\n            closed: parseInt(headers(\"Taiga-Info-Total-Closed-Milestones\"), 10),\n            open: parseInt(headers(\"Taiga-Info-Total-Opened-Milestones\"), 10)\n          };\n        };\n      })(this));\n    };\n    service.moveUserStoriesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-userstories-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveTasksMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-tasks-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.moveIssuesMilestone = function(currentMilestoneId, projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"move-issues-to-milestone\", currentMilestoneId);\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_issues: data\n      };\n      return $http.post(url, params);\n    };\n    return function(instance) {\n      return instance.sprints = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSprintsResourcesProvider\", [\"$tgRepo\", \"$tgModel\", \"$tgStorage\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"swimlanes\", params);\n    };\n    service.create = function(projectId, name, order) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      params = {\n        project: projectId,\n        name: name\n      };\n      if (order) {\n        params.order = order;\n      }\n      return $http.post(url, params);\n    };\n    service.edit = function(swimlaneId, name) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        name: name\n      };\n      return $http.patch(url, params);\n    };\n    service.bulkUpdateOrder = function(project, swimlanesOrder) {\n      var params, url;\n      url = $urls.resolve(\"swimlanes\");\n      url = url + \"/bulk_update_order\";\n      params = {\n        project: project,\n        bulk_swimlanes: swimlanesOrder\n      };\n      return $http.post(url, params);\n    };\n    service.wipLimitUpdate = function(swimlaneId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"swimlane-userstory-statuses\");\n      url = url + \"/\" + swimlaneId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service[\"delete\"] = function(swimlaneId, moveTo) {\n      var url;\n      url = $urls.resolve(\"swimlanes\");\n      if (moveTo) {\n        url = url + \"/\" + swimlaneId + \"?moveTo=\" + moveTo;\n      } else {\n        url = url + \"/\" + swimlaneId;\n      }\n      return $http[\"delete\"](url);\n    };\n    return function(instance) {\n      return instance.swimlanes = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgSwimlanesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  resourceProvider = function($repo, $http, $urls, $storage) {\n    var hashSuffix, hashSuffixStatusColumnModes, hashSuffixUsRowModes, service;\n    service = {};\n    hashSuffix = \"tasks-queryparams\";\n    hashSuffixStatusColumnModes = \"tasks-statuscolumnmodels\";\n    hashSuffixUsRowModes = \"tasks-usrowmodels\";\n    service.get = function(projectId, taskId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", taskId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"tasks\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"tasks\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"task-filters\", null, params);\n    };\n    service.list = function(projectId, sprintId, userStoryId, params) {\n      if (sprintId == null) {\n        sprintId = null;\n      }\n      if (userStoryId == null) {\n        userStoryId = null;\n      }\n      params = _.merge(params, {\n        project: projectId,\n        order_by: 'us_order'\n      });\n      if (sprintId) {\n        params.milestone = sprintId;\n      }\n      if (userStoryId) {\n        params.user_story = userStoryId;\n      }\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"tasks\", params);\n    };\n    service.bulkCreate = function(projectId, sprintId, usId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-create-tasks\");\n      params = {\n        project_id: projectId,\n        milestone_id: sprintId,\n        us_id: usId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params).then(function(result) {\n        return result.data;\n      });\n    };\n    service.upvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-upvote\", taskId);\n      return $http.post(url);\n    };\n    service.downvote = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-downvote\", taskId);\n      return $http.post(url);\n    };\n    service.watch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-watch\", taskId);\n      return $http.post(url);\n    };\n    service.unwatch = function(taskId) {\n      var url;\n      url = $urls.resolve(\"task-unwatch\", taskId);\n      return $http.post(url);\n    };\n    service.bulkUpdateTaskTaskboardOrder = function(projectId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-taskboard-order\");\n      params = {\n        project_id: projectId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-task-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_tasks: data\n      };\n      return $http.post(url, params);\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = $urls.resolve(\"tasks\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return $http.patch(url, data, null, options).then(function(result) {\n        return result.data;\n      });\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeStatusColumnModes = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getStatusColumnModes = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixStatusColumnModes;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeUsRowModes = function(projectId, sprintId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getUsRowModes = function(projectId, sprintId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffixUsRowModes;\n      hash = generateHash([projectId, sprintId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.promoteToUserStory = function(taskId, projectId) {\n      var data, url;\n      url = $urls.resolve(\"promote-task-to-us\", taskId);\n      data = {\n        project_id: projectId\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.tasks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgTasksResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(id) {\n      return $repo.queryOne(\"user-project-settings\", id);\n    };\n    service.list = function(filters) {\n      var params;\n      params = _.extend({}, params, filters || {});\n      return $repo.queryMany(\"user-project-settings\", params);\n    };\n    return function(instance) {\n      return instance.userProjectSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserProjectSettingsResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($config, $repo, $http, $urls, $q) {\n    var service;\n    service = {};\n    service.changeAvatar = function(file) {\n      var data, defered, maxFileSize, options, response, url;\n      maxFileSize = $config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered = $q.defer();\n        defered.reject(response);\n        return defered.promise;\n      }\n      data = new FormData();\n      data.append('avatar', file);\n      options = {\n        transformRequest: angular.identity,\n        headers: {\n          'Content-Type': void 0\n        }\n      };\n      url = ($urls.resolve(\"users\")) + \"/change_avatar\";\n      return $http.post(url, data, {}, options);\n    };\n    service.removeAvatar = function() {\n      var url;\n      url = ($urls.resolve(\"users\")) + \"/remove_avatar\";\n      return $http.post(url);\n    };\n    service.changePassword = function(currentPassword, newPassword) {\n      var data, url;\n      url = ($urls.resolve(\"users\")) + \"/change_password\";\n      data = {\n        current_password: currentPassword,\n        password: newPassword\n      };\n      return $http.post(url, data);\n    };\n    return function(instance) {\n      return instance.userSettings = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserSettingsResourcesProvider\", [\"$tgConfig\", \"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  resourceProvider = function($http, $urls) {\n    var service;\n    service = {};\n    service.contacts = function(userId, options) {\n      var httpOptions, url;\n      if (options == null) {\n        options = {};\n      }\n      url = $urls.resolve(\"user-contacts\", userId);\n      httpOptions = {\n        headers: {}\n      };\n      if (!options.enablePagination) {\n        httpOptions.headers[\"x-disable-pagination\"] = \"1\";\n      }\n      return $http.get(url, {}, httpOptions).then(function(result) {\n        return result.data;\n      });\n    };\n    return function(instance) {\n      return instance.users = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUsersResourcesProvider\", [\"$tgHttp\", \"$tgUrls\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var generateHash, hashShowTags, module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = taiga.generateHash;\n\n  hashShowTags = 'backlog-tags';\n\n  resourceProvider = function($repo, $http, $urls, $storage, $q) {\n    var hashSuffix, service;\n    service = {};\n    hashSuffix = \"userstories-queryparams\";\n    service.get = function(projectId, usId, extraParams) {\n      var params;\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", usId, params);\n    };\n    service.getByRef = function(projectId, ref, extraParams) {\n      var params;\n      if (extraParams == null) {\n        extraParams = {};\n      }\n      params = service.getQueryParams(projectId);\n      params.project = projectId;\n      params.ref = ref;\n      params = _.extend({}, params, extraParams);\n      return $repo.queryOne(\"userstories\", \"by_ref\", params);\n    };\n    service.listInAllProjects = function(filters) {\n      return $repo.queryMany(\"userstories\", filters);\n    };\n    service.filtersData = function(params) {\n      return $repo.queryOneRaw(\"userstories-filters\", null, params);\n    };\n    service.listUnassigned = function(projectId, filters, pageSize) {\n      var params;\n      params = {\n        \"project\": projectId,\n        \"milestone\": \"null\"\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", _.extend(params, {\n        page_size: pageSize\n      }), {\n        enablePagination: true\n      }, true);\n    };\n    service.listAll = function(projectId, filters) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      params = _.extend({}, params, filters || {});\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(\"userstories\", params);\n    };\n    service.bulkCreate = function(projectId, status, bulk, swimlane) {\n      var data, url;\n      data = {\n        project_id: projectId,\n        status_id: status,\n        bulk_stories: bulk,\n        swimlane_id: swimlane\n      };\n      url = $urls.resolve(\"bulk-create-us\");\n      return $http.post(url, data);\n    };\n    service.upvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-upvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.downvote = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-downvote\", userStoryId);\n      return $http.post(url);\n    };\n    service.watch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-watch\", userStoryId);\n      return $http.post(url);\n    };\n    service.unwatch = function(userStoryId) {\n      var url;\n      url = $urls.resolve(\"userstory-unwatch\", userStoryId);\n      return $http.post(url);\n    };\n    service.bulkUpdateBacklogOrder = function(projectId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-backlog-order\");\n      params = {\n        project_id: projectId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateMilestone = function(projectId, milestoneId, data) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-milestone\");\n      params = {\n        project_id: projectId,\n        milestone_id: milestoneId,\n        bulk_stories: data\n      };\n      return $http.post(url, params);\n    };\n    service.bulkUpdateKanbanOrder = function(projectId, statusId, swimlaneId, afterUserstoryId, beforeUserstoryId, bulkUserstories) {\n      var params, url;\n      url = $urls.resolve(\"bulk-update-us-kanban-order\");\n      params = {\n        project_id: projectId,\n        status_id: statusId,\n        bulk_userstories: bulkUserstories\n      };\n      if (afterUserstoryId) {\n        params.after_userstory_id = afterUserstoryId;\n      } else if (beforeUserstoryId) {\n        params.before_userstory_id = beforeUserstoryId;\n      }\n      if (swimlaneId) {\n        params.swimlane_id = swimlaneId;\n      }\n      return $http.post(url, params);\n    };\n    service.listValues = function(projectId, type) {\n      var params;\n      params = {\n        \"project\": projectId\n      };\n      service.storeQueryParams(projectId, params);\n      return $repo.queryMany(type, params);\n    };\n    service.createDefaultValues = function(projectId, type) {\n      var data, url;\n      data = {\n        \"project_id\": projectId\n      };\n      url = $urls.resolve(type + \"-create-default\");\n      return $http.post(url, data);\n    };\n    service.editStatus = function(statusId, wip_limit) {\n      var params, url;\n      url = $urls.resolve(\"userstory-statuses\");\n      url = url + \"/\" + statusId;\n      params = {\n        wip_limit: wip_limit\n      };\n      return $http.patch(url, params);\n    };\n    service.storeQueryParams = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getQueryParams = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashSuffix;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash) || {};\n    };\n    service.storeShowTags = function(projectId, params) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.set(hash, params);\n    };\n    service.getShowTags = function(projectId) {\n      var hash, ns;\n      ns = projectId + \":\" + hashShowTags;\n      hash = generateHash([projectId, ns]);\n      return $storage.get(hash);\n    };\n    return function(instance) {\n      return instance.userstories = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgUserstoriesResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", \"$tgStorage\", \"$q\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(webhookId) {\n      var params;\n      params = {\n        webhook: webhookId\n      };\n      return $repo.queryMany(\"webhooklogs\", params);\n    };\n    service.resend = function(webhooklogId) {\n      var url;\n      url = $urls.resolve(\"webhooklogs-resend\", webhooklogId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooklogs = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhookLogsResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider;\n\n  resourceProvider = function($repo, $urls, $http) {\n    var service;\n    service = {};\n    service.list = function(projectId) {\n      var params;\n      params = {\n        project: projectId\n      };\n      return $repo.queryMany(\"webhooks\", params);\n    };\n    service.test = function(webhookId) {\n      var url;\n      url = $urls.resolve(\"webhooks-test\", webhookId);\n      return $http.post(url);\n    };\n    return function(instance) {\n      return instance.webhooks = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWebhooksResourcesProvider\", [\"$tgRepo\", \"$tgUrls\", \"$tgHttp\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, resourceProvider, taiga;\n\n  taiga = this.taiga;\n\n  resourceProvider = function($repo, $http, $urls) {\n    var service;\n    service = {};\n    service.get = function(wikiId) {\n      return $repo.queryOne(\"wiki\", wikiId);\n    };\n    service.getBySlug = function(projectId, slug) {\n      return $repo.queryOne(\"wiki\", \"by_slug?project=\" + projectId + \"&slug=\" + slug);\n    };\n    service.list = function(projectId) {\n      return $repo.queryMany(\"wiki\", {\n        project: projectId\n      });\n    };\n    service.listLinks = function(projectId) {\n      return $repo.queryMany(\"wiki-links\", {\n        project: projectId\n      });\n    };\n    return function(instance) {\n      return instance.wiki = service;\n    };\n  };\n\n  module = angular.module(\"taigaResources\");\n\n  module.factory(\"$tgWikiResourcesProvider\", [\"$tgRepo\", \"$tgHttp\", \"$tgUrls\", resourceProvider]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserChangePasswordController, UserChangePasswordDirective, debounce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserChangePasswordController = (function(superClass) {\n    extend(UserChangePasswordController, superClass);\n\n    UserChangePasswordController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\"];\n\n    function UserChangePasswordController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, translate) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.scope.sectionName = this.translate.instant(\"CHANGE_PASSWORD.SECTION_NAME\");\n      this.scope.user = this.auth.getUser();\n    }\n\n    return UserChangePasswordController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserChangePasswordController\", UserChangePasswordController);\n\n  UserChangePasswordDirective = function($rs, $confirm, $loading, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, ctrl) {\n      var form, submit, submitButton;\n      form = new checksley.Form($el.find(\"form\"));\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var currentLoading, promise;\n          event.preventDefault();\n          if (!form.validate()) {\n            return;\n          }\n          if ($scope.newPassword1 !== $scope.newPassword2) {\n            $confirm.notify('error', $translate.instant(\"CHANGE_PASSWORD.ERROR_PASSWORD_MATCH\"));\n            return;\n          }\n          currentLoading = $loading().target(submitButton).start();\n          promise = $rs.userSettings.changePassword($scope.currentPassword, $scope.newPassword1);\n          promise.then(function() {\n            currentLoading.finish();\n            return $confirm.notify('success');\n          });\n          return promise.then(null, function(response) {\n            currentLoading.finish();\n            return $confirm.notify('error', response.data._error_message);\n          });\n        };\n      })(this));\n      submitButton = $el.find(\".submit-button\");\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserChangePassword\", [\"$tgResources\", \"$tgConfirm\", \"$tgLoading\", \"$translate\", UserChangePasswordDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DeleteUserDirective, bindOnce, debounce, module, taiga;\n\n  taiga = this.taiga;\n\n  bindOnce = this.taiga.bindOnce;\n\n  debounce = this.taiga.debounce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  DeleteUserDirective = function($repo, $rootscope, $auth, $location, $navUrls, lightboxService, $loading) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit, submitButton;\n      $scope.$on(\"deletelightbox:new\", function(ctx, user) {\n        return lightboxService.open($el);\n      });\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      submit = function() {\n        var currentLoading, promise;\n        currentLoading = $loading().target(submitButton).start();\n        promise = $repo.remove($scope.user);\n        promise.then(function(data) {\n          currentLoading.finish();\n          lightboxService.close($el);\n          $auth.logout();\n          return $location.path($navUrls.resolve(\"login\"));\n        });\n        return promise.then(null, function() {\n          currentLoading.finish();\n          return console.log(\"FAIL\");\n        });\n      };\n      $el.on(\"click\", \".js-cancel\", function(event) {\n        event.preventDefault();\n        return lightboxService.close($el);\n      });\n      $el.on(\"click\", \".js-confirm\", debounce(2000, function(event) {\n        event.preventDefault();\n        return submit();\n      }));\n      return submitButton = $el.find(\".js-confirm\");\n    };\n    return {\n      link: link,\n      templateUrl: \"user/lightbox/lightbox-delete-account.html\"\n    };\n  };\n\n  module.directive(\"tgLbDeleteUser\", [\"$tgRepo\", \"$rootScope\", \"$tgAuth\", \"$tgLocation\", \"$tgNavUrls\", \"lightboxService\", \"$tgLoading\", DeleteUserDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserLiveNotificationsController, UserLiveNotificationsDirective, UserLiveNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserLiveNotificationsController = (function(superClass) {\n    extend(UserLiveNotificationsController, superClass);\n\n    UserLiveNotificationsController.$inject = [\"$scope\", \"$rootScope\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"tgErrorHandlingService\"];\n\n    function UserLiveNotificationsController(scope, rootscope, repo, confirm, rs, params, q, location, navUrls, auth, errorHandlingService) {\n      var promise;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.errorHandlingService = errorHandlingService;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.LIVE_SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserLiveNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserLiveNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserLiveNotificationsController\", UserLiveNotificationsController);\n\n  UserLiveNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotifications\", UserLiveNotificationsDirective);\n\n  UserLiveNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.live_notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.live_notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.live_notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.live_notify_level;\n          policy.live_notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserLiveNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserLiveNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaigaAvatarModelDirective, UserAvatarDirective, UserProfileDirective, UserSettingsController, debounce, mixOf, module, sizeFormat, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  debounce = this.taiga.debounce;\n\n  UserSettingsController = (function(superClass) {\n    extend(UserSettingsController, superClass);\n\n    UserSettingsController.$inject = [\"$scope\", \"$rootScope\", \"$tgConfig\", \"$tgRepo\", \"$tgConfirm\", \"$tgResources\", \"$routeParams\", \"$q\", \"$tgLocation\", \"$tgNavUrls\", \"$tgAuth\", \"$translate\", \"tgErrorHandlingService\", \"$window\"];\n\n    function UserSettingsController(scope, rootscope, config, repo, confirm, rs, params, q, location, navUrls, auth, translate, errorHandlingService, window1) {\n      var maxFileSize, promise, text;\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.config = config;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.params = params;\n      this.q = q;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.auth = auth;\n      this.translate = translate;\n      this.errorHandlingService = errorHandlingService;\n      this.window = window1;\n      this.scope.sectionName = \"USER_SETTINGS.MENU.SECTION_TITLE\";\n      this.scope.project = {};\n      this.scope.user = this.auth.getUser();\n      if (!this.scope.user) {\n        this.errorHandlingService.permissionDenied();\n      } else {\n        this.scope.lang = this.getLan();\n        this.scope.theme = this.getTheme();\n      }\n      maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize) {\n        text = this.translate.instant(\"USER_SETTINGS.AVATAR_MAX_SIZE\", {\n          \"maxFileSize\": sizeFormat(maxFileSize)\n        });\n        this.scope.maxFileSizeMsg = text;\n      }\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserSettingsController.prototype.loadInitialData = function() {\n      var compiledThemes;\n      compiledThemes = window._taigaAvailableThemes;\n      this.scope.availableThemes = this.config.get(\"themes\", []).filter((function(_this) {\n        return function(theme) {\n          return compiledThemes.includes(theme);\n        };\n      })(this));\n      return this.rs.locales.list().then((function(_this) {\n        return function(locales) {\n          _this.scope.locales = locales;\n          return locales;\n        };\n      })(this));\n    };\n\n    UserSettingsController.prototype.openDeleteLightbox = function() {\n      return this.rootscope.$broadcast(\"deletelightbox:new\", this.scope.user);\n    };\n\n    UserSettingsController.prototype.getLan = function() {\n      return this.scope.user.lang || this.translate.preferredLanguage();\n    };\n\n    UserSettingsController.prototype.getTheme = function() {\n      var compiledThemes, theme;\n      compiledThemes = window._taigaAvailableThemes;\n      theme = this.scope.user.theme || this.config.get(\"defaultTheme\") || \"taiga\";\n      if (!compiledThemes.includes(theme)) {\n        theme = \"taiga\";\n      }\n      return theme;\n    };\n\n    UserSettingsController.prototype.exportProfile = function() {\n      var onError, onSuccess;\n      onSuccess = function(result) {\n        var dumpUrl;\n        dumpUrl = result.data.url;\n        return this.window.open(dumpUrl, \"_blank\");\n      };\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.exportProfile().then(onSuccess, onError);\n    };\n\n    UserSettingsController.prototype.verifyEmail = function() {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function(result) {\n          var text;\n          text = _this.translate.instant(\"USER_PROFILE.VERIFY_EMAIL_SUCCESS\");\n          return _this.confirm.notify(\"success\", text);\n        };\n      })(this);\n      onError = (function(_this) {\n        return function(response) {\n          var ref;\n          if ((ref = response.data) != null ? ref._error_message : void 0) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this);\n      return this.auth.sendVerificationEmail().then(onSuccess, onError);\n    };\n\n    return UserSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserSettingsController\", UserSettingsController);\n\n  UserProfileDirective = function($confirm, $auth, $repo, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var submit;\n      submit = debounce(2000, (function(_this) {\n        return function(event) {\n          var changeEmail, form, onError, onSuccess;\n          event.preventDefault();\n          form = $el.find(\"form\").checksley();\n          if (!form.validate()) {\n            return;\n          }\n          changeEmail = $scope.user.isAttributeModified(\"email\");\n          $scope.user.lang = $scope.lang;\n          $scope.user.theme = $scope.theme;\n          onSuccess = function(data) {\n            var text;\n            $auth.setUser(data);\n            if (changeEmail) {\n              text = $translate.instant(\"USER_PROFILE.CHANGE_EMAIL_SUCCESS\");\n              return $confirm.success(text);\n            } else {\n              return $confirm.notify('success');\n            }\n          };\n          onError = function(data) {\n            form.setErrors(data);\n            return $confirm.notify('error', data._error_message);\n          };\n          return $repo.save($scope.user).then(onSuccess, onError);\n        };\n      })(this));\n      $el.on(\"submit\", \"form\", submit);\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserProfile\", [\"$tgConfirm\", \"$tgAuth\", \"$tgRepo\", \"$translate\", UserProfileDirective]);\n\n  UserAvatarDirective = function($auth, $model, $rs, $confirm) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var onError, onSuccess, showSizeInfo;\n      showSizeInfo = function() {\n        return $el.find(\".size-info\").removeClass(\"hidden\");\n      };\n      onSuccess = function(response) {\n        var user;\n        user = $model.make_model(\"users\", response.data);\n        $auth.setUser(user);\n        $scope.user = user;\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('success');\n      };\n      onError = function(response) {\n        if (response.status === 413) {\n          showSizeInfo();\n        }\n        $el.find('.loading-overlay').removeClass('active');\n        return $confirm.notify('error', response.data._error_message);\n      };\n      $el.on(\"click\", \".js-change-avatar\", function(e) {\n        e.preventDefault();\n        return $el.find(\"#avatar-field\").click();\n      });\n      $el.on(\"change\", \"#avatar-field\", function(event) {\n        if ($scope.avatarAttachment) {\n          $el.find('.loading-overlay').addClass(\"active\");\n          return $rs.userSettings.changeAvatar($scope.avatarAttachment).then(onSuccess, onError);\n        }\n      });\n      $el.on(\"click\", \"a.js-use-gravatar\", function(event) {\n        $el.find('.loading-overlay').addClass(\"active\");\n        return $rs.userSettings.removeAvatar().then(onSuccess, onError);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserAvatar\", [\"$tgAuth\", \"$tgModel\", \"$tgResources\", \"$tgConfirm\", UserAvatarDirective]);\n\n  TaigaAvatarModelDirective = function($parse) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var model, modelSetter;\n      model = $parse($attrs.tgAvatarModel);\n      modelSetter = model.assign;\n      return $el.bind('change', function() {\n        return $scope.$apply(function() {\n          return modelSetter($scope, $el[0].files[0]);\n        });\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive('tgAvatarModel', ['$parse', TaigaAvatarModelDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserSettingsNavigationDirective, module;\n\n  UserSettingsNavigationDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var section;\n      section = $attrs.tgUserSettingsNavigation;\n      $el.find(\".active\").removeClass(\"active\");\n      $el.find(\"#usersettingsmenu-\" + section).addClass(\"active\");\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module = angular.module(\"taigaUserSettings\");\n\n  module.directive(\"tgUserSettingsNavigation\", UserSettingsNavigationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserNotificationsController, UserNotificationsDirective, UserNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserNotificationsController = (function(superClass) {\n    extend(UserNotificationsController, superClass);\n\n    UserNotificationsController.$inject = [\"$scope\", \"$tgConfirm\", \"$tgResources\", \"$tgAuth\", \"$tgConfig\", \"tgResources\", \"tgCurrentUserService\", \"$translate\"];\n\n    function UserNotificationsController(scope, confirm, rs, auth, config, resources, currentUserService, translate) {\n      var promise;\n      this.scope = scope;\n      this.confirm = confirm;\n      this.rs = rs;\n      this.auth = auth;\n      this.config = config;\n      this.resources = resources;\n      this.currentUserService = currentUserService;\n      this.translate = translate;\n      this.scope.sectionName = \"USER_SETTINGS.NOTIFICATIONS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n      this.isSaas = this.config.get(\"isSaas\");\n      this.onPremiseSubscribed = false;\n      this.loadPremise = false;\n    }\n\n    UserNotificationsController.prototype.subscribed = function() {\n      this.loadPremise = true;\n      return this.resources.onPremise.subscribeOnPremiseNewsletter({\n        \"email\": this.currentUserService.getUser().get('email'),\n        \"full_name\": this.currentUserService.getUser().get('full_name'),\n        \"origin_form\": 'Newsletter sign-up settings'\n      }).then((function(_this) {\n        return function() {\n          var text;\n          text = _this.translate.instant(\"PROJECT.NEWSLETTER_OPENING.SAVED_PREFERENCE\");\n          _this.confirm.notify(\"success\", \"Your preferences have been save successfully\");\n          _this.onPremiseSubscribed = true;\n          _this.loadPremise = false;\n          return _this.resources.user.getUserStorage('dont_ask_premise_newsletter').then(function(storageState) {\n            return _this.resources.user.setUserStorage('dont_ask_premise_newsletter', true);\n          })[\"catch\"](function(storageError) {\n            if (storageError.status = 404) {\n              return _this.resources.user.createUserStorage('dont_ask_premise_newsletter', false);\n            }\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this.confirm.notify(\"light-error\", \"\");\n          return _this.loadPremise = false;\n        };\n      })(this));\n    };\n\n    UserNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserNotificationsController\", UserNotificationsController);\n\n  UserNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotifications\", UserNotificationsDirective);\n\n  UserNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\" data-index=\\\"<%- index %>\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             value=\\\"2\\\" <% if (notifyPolicy.notify_level == 2) { %>checked=\\\"checked\\\"<% } %>/>\\n      <label for=\\\"policy-all-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_ALL\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-involved\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             value=\\\"1\\\" <% if (notifyPolicy.notify_level == 1) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-involved-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_INVOLVED\\\"></label>\\n    </div>\\n  </div>\\n  <div class=\\\"policy-table-none\\\">\\n    <div class=\\\"button-check\\\">\\n      <input type=\\\"radio\\\"\\n             name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             value=\\\"3\\\" <% if (notifyPolicy.notify_level == 3) { %>checked=\\\"checked\\\"<% } %> />\\n      <label for=\\\"policy-none-<%- notifyPolicy.id %>\\\"\\n             translate=\\\"USER_SETTINGS.NOTIFICATIONS.OPTION_NONE\\\"></label>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"change\", \"input[type=radio]\", function(event) {\n          var onError, onSuccess, policy, policyIndex, prev_level, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.parents(\".policy-table-row\").data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          prev_level = policy.notify_level;\n          policy.notify_level = parseInt(target.val(), 10);\n          onSuccess = function() {\n            return $confirm.notify(\"success\");\n          };\n          onError = function() {\n            $confirm.notify(\"error\");\n            return target.parents(\".policy-table-row\").find(\"input[value=\" + prev_level + \"]\").prop(\"checked\", true);\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserProjectSettingsController, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserProjectSettingsController = (function(superClass) {\n    extend(UserProjectSettingsController, superClass);\n\n    UserProjectSettingsController.$inject = [\"$rootScope\", \"$scope\", \"$tgSections\", \"$tgResources\", \"$tgRepo\", \"$tgConfirm\", \"tgCurrentUserService\"];\n\n    function UserProjectSettingsController(rootScope, scope, tgSections, rs, repo, confirm, currentUserService) {\n      var promise;\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.tgSections = tgSections;\n      this.rs = rs;\n      this.repo = repo;\n      this.confirm = confirm;\n      this.currentUserService = currentUserService;\n      this.scope.sections = this.tgSections.list();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserProjectSettingsController.prototype.loadInitialData = function() {\n      return this.rs.userProjectSettings.list().then((function(_this) {\n        return function(userProjectSettings) {\n          return _this.scope.userProjectSettings = userProjectSettings;\n        };\n      })(this));\n    };\n\n    UserProjectSettingsController.prototype.updateCustomHomePage = function(projectSettings) {\n      var onError, onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this.currentUserService.loadProjects();\n          _this.rootScope.$broadcast(\"dropdown-project-list:updated\");\n          return _this.confirm.notify(\"success\");\n        };\n      })(this);\n      onError = (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      return this.repo.save(projectSettings).then(onSuccess, onError);\n    };\n\n    UserProjectSettingsController.prototype.filteredSections = function(projectSettings) {\n      return _.filter(this.scope.sections, function(section) {\n        var ref;\n        return ref = section.id, indexOf.call(projectSettings.allowed_sections, ref) >= 0;\n      });\n    };\n\n    return UserProjectSettingsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserProjectSettingsController\", UserProjectSettingsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserWebNotificationsController, UserWebNotificationsDirective, UserWebNotificationsListDirective, bindOnce, mixOf, module, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module(\"taigaUserSettings\");\n\n  UserWebNotificationsController = (function(superClass) {\n    extend(UserWebNotificationsController, superClass);\n\n    UserWebNotificationsController.$inject = [\"$scope\", \"$tgResources\", \"$tgAuth\"];\n\n    function UserWebNotificationsController(scope, rs, auth) {\n      var promise;\n      this.scope = scope;\n      this.rs = rs;\n      this.auth = auth;\n      this.scope.sectionName = \"USER_SETTINGS.EVENTS.SECTION_NAME\";\n      this.scope.user = this.auth.getUser();\n      promise = this.loadInitialData();\n      promise.then(null, this.onInitialDataError.bind(this));\n    }\n\n    UserWebNotificationsController.prototype.loadInitialData = function() {\n      return this.rs.notifyPolicies.list().then((function(_this) {\n        return function(notifyPolicies) {\n          _this.scope.notifyPolicies = notifyPolicies;\n          return notifyPolicies;\n        };\n      })(this));\n    };\n\n    return UserWebNotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin));\n\n  module.controller(\"UserWebNotificationsController\", UserWebNotificationsController);\n\n  UserWebNotificationsDirective = function() {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotifications\", UserWebNotificationsDirective);\n\n  UserWebNotificationsListDirective = function($repo, $confirm, $compile) {\n    var link, template;\n    template = _.template(\"<% _.each(notifyPolicies, function (notifyPolicy, index) { %>\\n<div class=\\\"policy-table-row\\\">\\n  <div class=\\\"policy-table-project\\\"><span><%- notifyPolicy.project_name %></span></div>\\n  <div class=\\\"policy-table-all\\\">\\n    <div class=\\\"check\\\" data-index=\\\"<%- index %>\\\">\\n      <input type=\\\"checkbox\\\"\\n        <% if(notifyPolicy.web_notify_level) { %> checked=\\\"checked\\\" <% } %>\\n        name=\\\"policy-<%- notifyPolicy.id %>\\\" id=\\\"policy-<%- notifyPolicy.id %>\\\"/>\\n      <div></div>\\n      <span class=\\\"check-text check-yes\\\" translate=\\\"COMMON.YES\\\"></span>\\n      <span class=\\\"check-text check-no\\\"\\\" translate=\\\"COMMON.NO\\\"></span>\\n    </div>\\n  </div>\\n</div>\\n<% }) %>\");\n    link = function($scope, $el, $attrs) {\n      var render;\n      render = function() {\n        var ctx, html;\n        $el.off();\n        ctx = {\n          notifyPolicies: $scope.notifyPolicies\n        };\n        html = template(ctx);\n        $el.html($compile(html)($scope));\n        return $el.on(\"click\", \".check\", function(event) {\n          var onError, onSuccess, policy, policyIndex, target;\n          target = angular.element(event.currentTarget);\n          policyIndex = target.data('index');\n          policy = $scope.notifyPolicies[policyIndex];\n          policy.web_notify_level = !policy.web_notify_level;\n          onSuccess = function() {\n            $confirm.notify(\"success\");\n            return target.find(\"input\").prop(\"checked\", policy.web_notify_level);\n          };\n          onError = function() {\n            return $confirm.notify(\"error\");\n          };\n          return $repo.save(policy).then(onSuccess, onError);\n        });\n      };\n      $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n      return bindOnce($scope, $attrs.ngModel, render);\n    };\n    return {\n      link: link\n    };\n  };\n\n  module.directive(\"tgUserWebNotificationsList\", [\"$tgRepo\", \"$tgConfirm\", \"$compile\", UserWebNotificationsListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaComponents\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaDiscover\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaExternalApps\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaHome\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNavigationBar\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaNotifications\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaProfile\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaProjects\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaResources2\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaUserTimeline\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module;\n\n  module = angular.module(\"taigaUtils\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  angular.module(\"taigaWikiHistory\", []);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AnimatedCounter;\n\n  AnimatedCounter = function() {\n    var link, template;\n    template = \"<div\\n    ng-class=\\\"{'wip-amount': data.wip, 'limit-over': data.count > data.wip}\\\"\\n    class=\\\"animated-counter-inner\\\">\\n    <div class=\\\"counter-translator\\\">\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextUp.current || 0 }}</span><span ng-if=\\\"nextUp.wip\\\"> / {{ nextUp.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ renderCount.current || 0 }}</span><span ng-if=\\\"renderCount.wip\\\"> / {{ renderCount.wip }}</span>\\n        </div>\\n        <div class=\\\"result\\\">\\n            <span class=\\\"current\\\">{{ nextDown.current || 0 }}</span><span ng-if=\\\"nextDown.wip\\\"> / {{ nextDown.wip }}</span>\\n        </div>                \\n    </div>\\n</div>\";\n    link = function($scope, $el, $attrs) {\n      var counter, initialLoad, lastCount, transitionEnd, unwatch;\n      transitionEnd = function(event) {\n        return $scope.$evalAsync((function(_this) {\n          return function() {\n            if ($scope.nextUp !== void 0) {\n              $scope.renderCount = $scope.nextUp;\n            } else {\n              $scope.renderCount = $scope.nextDown;\n            }\n            return $(counter).removeClass('inc dec');\n          };\n        })(this));\n      };\n      counter = $el.find('.counter-translator');\n      counter.on('transitionend', transitionEnd);\n      initialLoad = false;\n      lastCount = void 0;\n      unwatch = $scope.$on('kanban:userstories:loaded', function() {\n        initialLoad = true;\n        return unwatch();\n      });\n      $scope.$watch('data', function(data) {\n        var getCounter;\n        getCounter = (function(_this) {\n          return function(num) {\n            return {\n              current: num,\n              wip: data.wip\n            };\n          };\n        })(this);\n        $scope.nextUp = void 0;\n        $scope.nextDown = void 0;\n        if (!$scope.data || $scope.data.count === void 0) {\n          lastCount = 0;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        } else if (lastCount === $scope.data.count) {\n          return;\n        } else if (!initialLoad || lastCount === void 0) {\n          lastCount = $scope.data.count;\n          $scope.renderCount = getCounter(lastCount);\n          return;\n        }\n        if ($scope.data.count > lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextUp = getCounter($scope.data.count);\n        } else if ($scope.data.count < lastCount) {\n          lastCount = $scope.data.count;\n          $scope.nextDown = getCounter($scope.data.count);\n        }\n        if ($scope.nextUp !== void 0 || $scope.nextDown !== void 0) {\n          counter.removeClass('inc dec');\n          return $scope.$evalAsync((function(_this) {\n            return function() {\n              if ($scope.nextUp !== void 0) {\n                return counter.addClass('inc');\n              } else if ($scope.nextDown !== void 0) {\n                return counter.addClass('dec');\n              }\n            };\n          })(this));\n        }\n      });\n      return $scope.$on(\"$destroy\", function() {\n        $el.off();\n        return counter.off();\n      });\n    };\n    return {\n      link: link,\n      template: template,\n      scope: {\n        data: '<'\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAnimatedCounter\", [AnimatedCounter]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToInlineDirective;\n\n  AssignedToInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attr, $model) {\n      var isEditable, renderUser, renderUserList;\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attr.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      renderUserList = function(text) {\n        var selectedId, users, visibleUsers;\n        selectedId = $model.$modelValue.assigned_to;\n        users = $userListService.searchUsers(text);\n        if (selectedId) {\n          users = _.reject(users, {\n            \"id\": selectedId\n          });\n        }\n        visibleUsers = _.slice(users, 0, 5);\n        visibleUsers = _.map(visibleUsers, function(user) {\n          return user.avatar = avatarService.getAvatar(user);\n        });\n        $scope.users = _.slice(users, 0, 5);\n        return $scope.showMore = users.length > 5;\n      };\n      renderUser = function(assignedObject) {\n        var assigned_to_extra_info;\n        if (assignedObject != null ? assignedObject.assigned_to : void 0) {\n          $scope.selected = assignedObject.assigned_to;\n          assigned_to_extra_info = $scope.usersById[$scope.selected];\n          $scope.fullName = assigned_to_extra_info != null ? assigned_to_extra_info.full_name_display : void 0;\n          $scope.isUnassigned = false;\n          $scope.avatar = avatarService.getAvatar(assigned_to_extra_info);\n          $scope.bg = $scope.avatar.bg;\n          $scope.isIocaine = assignedObject != null ? assignedObject.is_iocaine : void 0;\n        } else {\n          $scope.fullName = $translate.instant(\"COMMON.ASSIGNED_TO.ASSIGN\");\n          $scope.isUnassigned = true;\n          $scope.avatar = avatarService.getAvatar(null);\n          $scope.bg = null;\n          $scope.isIocaine = false;\n        }\n        $scope.fullNameVisible = !($scope.isUnassigned && !$currentUserService.isAuthenticated());\n        return $scope.isEditable = isEditable();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = \"\";\n        renderUserList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.selfAssign = function() {\n        $model.$modelValue.assigned_to = $currentUserService.getUser().get('id');\n        return renderUser($model.$modelValue);\n      };\n      $scope.unassign = function() {\n        $model.$modelValue.assigned_to = null;\n        return renderUser();\n      };\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUserList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        var target;\n        event.preventDefault();\n        target = angular.element(event.currentTarget);\n        $model.$modelValue.assigned_to = target.data(\"user-id\");\n        renderUser($model.$modelValue);\n        return $scope.$apply();\n      });\n      $scope.$watch($attr.ngModel, function(instance) {\n        return renderUser(instance);\n      });\n      $scope.$on(\"isiocaine:changed\", function(ctx, instance) {\n        return renderUser(instance);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-to-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedToInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedToInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersInlineDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersInlineDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $userListService) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var applyToModel, currentAssignedIds, currentAssignedTo, isAssigned, renderUsers, renderUsersList;\n      currentAssignedIds = [];\n      currentAssignedTo = null;\n      isAssigned = function() {\n        return currentAssignedIds.length > 0;\n      };\n      renderUsersList = function(text) {\n        var selected, users, visible;\n        users = $userListService.searchUsers(text);\n        selected = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) >= 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return selected.push(user);\n          }\n        });\n        visible = [];\n        _.map(users, function(user) {\n          var ref;\n          if (ref = user.id, indexOf.call(currentAssignedIds, ref) < 0) {\n            user.avatar = avatarService.getAvatar(user);\n            return visible.push(user);\n          }\n        });\n        $scope.selected = _.slice(selected, 0, 5);\n        if ($scope.selected.length < 5) {\n          $scope.users = _.slice(visible, 0, 5 - $scope.selected.length);\n        } else {\n          $scope.users = [];\n        }\n        return $scope.showMore = users.length > 5;\n      };\n      renderUsers = function() {\n        var assignedUsers;\n        assignedUsers = _.map(currentAssignedIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        assignedUsers = _.filter(assignedUsers, function(it) {\n          return !!it;\n        });\n        $scope.hiddenUsers = currentAssignedIds.length > 3 ? currentAssignedIds.length - 3 : 0;\n        $scope.assignedUsers = _.slice(assignedUsers, 0, 3);\n        return $scope.isAssigned = isAssigned();\n      };\n      applyToModel = function() {\n        _.map(currentAssignedIds, function(userId) {\n          if (!$scope.usersById[userId]) {\n            return currentAssignedIds.splice(currentAssignedIds.indexOf(userId), 1);\n          }\n        });\n        if (currentAssignedIds.length === 0) {\n          currentAssignedTo = null;\n        } else if (currentAssignedIds.indexOf(currentAssignedTo) === -1 || !currentAssignedTo) {\n          currentAssignedTo = currentAssignedIds[0];\n        }\n        if (!$model.$modelValue.assigned_users) {\n          $model.$modelValue.assigned_users = currentAssignedIds;\n        } else {\n          $model.$modelValue.setAttr('assigned_users', currentAssignedIds);\n        }\n        return $model.$modelValue.assigned_to = currentAssignedTo;\n      };\n      $el.on(\"click\", \".users-dropdown\", function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        $scope.usersSearch = null;\n        renderUsersList();\n        $scope.$apply();\n        return $el.find(\".pop-users\").popover().open();\n      });\n      $scope.assign = function(user) {\n        currentAssignedIds.push(user.id);\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.selfAssign = function() {\n        currentAssignedIds.push($currentUserService.getUser().get('id'));\n        renderUsers();\n        return applyToModel();\n      };\n      $scope.unassign = function(user) {\n        var index;\n        index = currentAssignedIds.indexOf(user.id);\n        currentAssignedIds.splice(index, 1);\n        renderUsers();\n        return applyToModel();\n      };\n      $el.on(\"click\", \".users-search\", function(event) {\n        return event.stopPropagation();\n      });\n      $scope.$watch(\"usersSearch\", function(searchingText) {\n        if (searchingText != null) {\n          renderUsersList(searchingText);\n          return $el.find('input').focus();\n        }\n      });\n      $scope.$watch($attrs.ngModel, function(item) {\n        var assigned_to;\n        if (item == null) {\n          return;\n        }\n        currentAssignedIds = [];\n        assigned_to = null;\n        if (item.assigned_users != null) {\n          currentAssignedIds = item.assigned_users;\n        }\n        assigned_to = item.assigned_to;\n        return renderUsers();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      templateUrl: \"components/assigned-inline/assigned-users-inline.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsersInline\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgUserListService\", AssignedUsersInlineDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentLinkDirective;\n\n  AttachmentLinkDirective = function($parse, attachmentsPreviewService, lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attachment;\n      attachment = $parse(attrs.tgAttachmentLink)(scope);\n      el.on(\"click\", function(event) {\n        if (taiga.isImage(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return scope.$apply(function() {\n            lightboxService.open($('tg-attachments-preview'));\n            return attachmentsPreviewService.fileId = attachment.getIn(['file', 'id']);\n          });\n        } else if (taiga.isPdf(attachment.getIn(['file', 'name']))) {\n          event.preventDefault();\n          return window.open(attachment.getIn(['file', 'url']));\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentLinkDirective.$inject = [\"$parse\", \"tgAttachmentsPreviewService\", \"lightboxService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentLink\", AttachmentLinkDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentGalleryDirective;\n\n  AttachmentGalleryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment-gallery.html\",\n      link: link\n    };\n  };\n\n  AttachmentGalleryDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentGallery\", AttachmentGalleryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentController;\n\n  AttachmentController = (function() {\n    AttachmentController.$inject = ['tgAttachmentsService', '$translate'];\n\n    function AttachmentController(attachmentsService, translate) {\n      this.attachmentsService = attachmentsService;\n      this.translate = translate;\n      this.form = {};\n      this.form.description = this.attachment.getIn(['file', 'description']);\n      this.form.is_deprecated = this.attachment.get(['file', 'is_deprecated']);\n      this.title = this.translate.instant(\"ATTACHMENT.TITLE\", {\n        fileName: this.attachment.get('name'),\n        date: moment(this.attachment.get('created_date')).format(this.translate.instant(\"ATTACHMENT.DATE\"))\n      });\n    }\n\n    AttachmentController.prototype.editMode = function(mode) {\n      var attachment;\n      attachment = this.attachment.set('editable', mode);\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    AttachmentController.prototype[\"delete\"] = function() {\n      return this.onDelete({\n        attachment: this.attachment\n      });\n    };\n\n    AttachmentController.prototype.save = function() {\n      var attachment;\n      attachment = this.attachment.set('loading', true);\n      this.onUpdate({\n        attachment: attachment\n      });\n      attachment = this.attachment.merge({\n        editable: false,\n        loading: false\n      });\n      attachment = attachment.mergeIn(['file'], {\n        description: this.form.description,\n        is_deprecated: !!this.form.is_deprecated\n      });\n      return this.onUpdate({\n        attachment: attachment\n      });\n    };\n\n    return AttachmentController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Attachment', AttachmentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentDirective;\n\n  AttachmentDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      scope: {},\n      bindToController: {\n        attachment: \"=\",\n        onDelete: \"&\",\n        onUpdate: \"&\",\n        type: \"=\"\n      },\n      controller: \"Attachment\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachment/attachment.html\",\n      link: link\n    };\n  };\n\n  AttachmentDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachment\", AttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsDropDirective;\n\n  AttachmentsDropDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgAttachmentsDrop);\n      el.on('dragover', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.add('attachment-dragover');\n        return false;\n      });\n      el.on('dragleave', function(e) {\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        return false;\n      });\n      el.on('drop', function(e) {\n        var dataTransfer;\n        e.stopPropagation();\n        e.preventDefault();\n        e.currentTarget.classList.remove('attachment-dragover');\n        dataTransfer = e.dataTransfer || (e.originalEvent && e.originalEvent.dataTransfer);\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: dataTransfer.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentsDropDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsDrop\", AttachmentsDropDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullController, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsFullController = (function() {\n    AttachmentsFullController.$inject = [\"$translate\", \"$tgConfirm\", \"$tgConfig\", \"$tgStorage\", \"tgAttachmentsFullService\", \"tgProjectService\", \"tgAttachmentsPreviewService\"];\n\n    function AttachmentsFullController(translate, confirm, config, storage, attachmentsFullService, projectService, attachmentsPreviewService) {\n      this.translate = translate;\n      this.confirm = confirm;\n      this.config = config;\n      this.storage = storage;\n      this.attachmentsFullService = attachmentsFullService;\n      this.projectService = projectService;\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      this.mode = this.storage.get('attachment-mode', 'list');\n      this.maxFileSize = this.config.get(\"maxUploadFileSize\", null);\n      if (this.maxFileSize) {\n        this.maxFileSize = sizeFormat(this.maxFileSize);\n      }\n      this.maxFileSizeMsg = this.maxFileSize ? this.translate.instant(\"ATTACHMENT.MAX_UPLOAD_SIZE\", {\n        maxFileSize: this.maxFileSize\n      }) : \"\";\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this.attachmentsFullService.deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullController.prototype.uploadingAttachments = function() {\n      return this.attachmentsFullService.uploadingAttachments;\n    };\n\n    AttachmentsFullController.prototype.addAttachment = function(file) {\n      var editable;\n      editable = this.mode === 'list';\n      return this.attachmentsFullService.addAttachment(this.projectId, this.objId, this.type, file, editable);\n    };\n\n    AttachmentsFullController.prototype.setMode = function(mode) {\n      this.mode = mode;\n      return this.storage.set('attachment-mode', mode);\n    };\n\n    AttachmentsFullController.prototype.toggleDeprecatedsVisible = function() {\n      return this.attachmentsFullService.toggleDeprecatedsVisible();\n    };\n\n    AttachmentsFullController.prototype.addAttachments = function(files) {\n      return _.forEach(files, (function(_this) {\n        return function(file) {\n          return _this.addAttachment(file);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.loadAttachments = function() {\n      return this.attachmentsFullService.loadAttachments(this.type, this.objId, this.projectId);\n    };\n\n    AttachmentsFullController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      var message, title;\n      this.attachmentsPreviewService.fileId = null;\n      title = this.translate.instant(\"ATTACHMENT.TITLE_LIGHTBOX_DELETE_ATTACHMENT\");\n      message = this.translate.instant(\"ATTACHMENT.MSG_LIGHTBOX_DELETE_ATTACHMENT\", {\n        fileName: toDeleteAttachment.getIn(['file', 'name'])\n      });\n      return this.confirm.askOnDelete(title, message).then((function(_this) {\n        return function(askResponse) {\n          var onError, onSuccess;\n          onError = function() {\n            message = _this.translate.instant(\"ATTACHMENT.ERROR_DELETE_ATTACHMENT\", {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            return askResponse.finish();\n          };\n          return _this.attachmentsFullService.deleteAttachment(toDeleteAttachment, _this.type).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    AttachmentsFullController.prototype.reorderAttachment = function(attachment, newIndex) {\n      return this.attachmentsFullService.reorderAttachment(this.type, attachment, newIndex);\n    };\n\n    AttachmentsFullController.prototype.updateAttachment = function(toUpdateAttachment) {\n      return this.attachmentsFullService.updateAttachment(toUpdateAttachment, this.type);\n    };\n\n    AttachmentsFullController.prototype._isEditable = function() {\n      if (this.projectService.project) {\n        return this.projectService.hasPermission(this.editPermission);\n      }\n      return false;\n    };\n\n    AttachmentsFullController.prototype.showAttachments = function() {\n      return this._isEditable() || this.attachmentsFullService.attachments.size;\n    };\n\n    return AttachmentsFullController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsFull\", AttachmentsFullController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  AttachmentsFullDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        type: \"@\",\n        objId: \"=\",\n        projectId: \"=\",\n        editPermission: \"@\"\n      },\n      controller: \"AttachmentsFull\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-full/attachments-full.html\",\n      link: link\n    };\n  };\n\n  AttachmentsFullDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsFull\", AttachmentsFullDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsFullService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsFullService = (function(superClass) {\n    extend(AttachmentsFullService, superClass);\n\n    AttachmentsFullService.$inject = [\"tgAttachmentsService\", \"$rootScope\", \"$q\"];\n\n    function AttachmentsFullService(attachmentsService, rootScope, q) {\n      this.attachmentsService = attachmentsService;\n      this.rootScope = rootScope;\n      this.q = q;\n      this._attachments = Immutable.List();\n      this._deprecatedsCount = 0;\n      this._attachmentsVisible = Immutable.List();\n      this._deprecatedsVisible = false;\n      this.uploadingAttachments = [];\n      this.types = this.attachmentsService.types;\n      taiga.defineImmutableProperty(this, 'attachments', (function(_this) {\n        return function() {\n          return _this._attachments;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsCount', (function(_this) {\n        return function() {\n          return _this._deprecatedsCount;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'attachmentsVisible', (function(_this) {\n        return function() {\n          return _this._attachmentsVisible;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'deprecatedsVisible', (function(_this) {\n        return function() {\n          return _this._deprecatedsVisible;\n        };\n      })(this));\n    }\n\n    AttachmentsFullService.prototype.toggleDeprecatedsVisible = function() {\n      this._deprecatedsVisible = !this._deprecatedsVisible;\n      return this.regenerate();\n    };\n\n    AttachmentsFullService.prototype.regenerate = function() {\n      this._deprecatedsCount = this._attachments.count(function(it) {\n        return it.getIn(['file', 'is_deprecated']);\n      });\n      if (this._deprecatedsVisible) {\n        return this._attachmentsVisible = this._attachments;\n      } else {\n        return this._attachmentsVisible = this._attachments.filter(function(it) {\n          return !it.getIn(['file', 'is_deprecated']);\n        });\n      }\n    };\n\n    AttachmentsFullService.prototype.addAttachment = function(projectId, objId, type, file, editable, comment) {\n      if (editable == null) {\n        editable = true;\n      }\n      if (comment == null) {\n        comment = false;\n      }\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          var promise;\n          if (_this.attachmentsService.validate(file)) {\n            _this.uploadingAttachments.push(file);\n            promise = _this.attachmentsService.upload(file, objId, projectId, type, comment);\n            return promise.then(function(file) {\n              var attachment;\n              _this.uploadingAttachments = _this.uploadingAttachments.filter(function(uploading) {\n                return uploading.name !== file.get('name');\n              });\n              attachment = Immutable.Map();\n              attachment = attachment.merge({\n                file: file,\n                editable: editable,\n                loading: false,\n                from_comment: comment\n              });\n              _this._attachments = _this._attachments.push(attachment);\n              _this.regenerate();\n              _this.rootScope.$broadcast(\"attachment:create\");\n              return resolve(attachment);\n            });\n          } else {\n            return reject(new Error(file));\n          }\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.loadAttachments = function(type, objId, projectId) {\n      return this.attachmentsService.list(type, objId, projectId).then((function(_this) {\n        return function(files) {\n          _this._attachments = files.map(function(file) {\n            var attachment;\n            attachment = Immutable.Map();\n            return attachment.merge({\n              loading: false,\n              editable: false,\n              file: file\n            });\n          });\n          _this.rootScope.$broadcast(\"attachments:loaded\", _this._attachments);\n          return _this.regenerate();\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.deleteAttachment = function(toDeleteAttachment, type) {\n      var onSuccess;\n      onSuccess = (function(_this) {\n        return function() {\n          _this._attachments = _this._attachments.filter(function(attachment) {\n            return attachment !== toDeleteAttachment;\n          });\n          return _this.regenerate();\n        };\n      })(this);\n      return this.attachmentsService[\"delete\"](type, toDeleteAttachment.getIn(['file', 'id'])).then(onSuccess);\n    };\n\n    AttachmentsFullService.prototype.reorderAttachment = function(type, attachment, newIndex) {\n      var attachments, oldIndex, promises;\n      oldIndex = this.attachments.findIndex(function(it) {\n        return it === attachment;\n      });\n      if (oldIndex === newIndex) {\n        return;\n      }\n      attachments = this.attachments.remove(oldIndex);\n      attachments = attachments.splice(newIndex, 0, attachment);\n      attachments = attachments.map(function(x, i) {\n        return x.setIn(['file', 'order'], i + 1);\n      });\n      promises = [];\n      attachments.forEach((function(_this) {\n        return function(attachment) {\n          var patch;\n          patch = {\n            order: attachment.getIn(['file', 'order'])\n          };\n          return promises.push(_this.attachmentsService.patch(attachment.getIn(['file', 'id']), type, patch));\n        };\n      })(this));\n      return this.q.all(promises).then((function(_this) {\n        return function() {\n          _this._attachments = attachments;\n          return _this.regenerate();\n        };\n      })(this));\n    };\n\n    AttachmentsFullService.prototype.updateAttachment = function(toUpdateAttachment, type) {\n      var index, oldAttachment, patch;\n      index = this._attachments.findIndex(function(attachment) {\n        return attachment.getIn(['file', 'id']) === toUpdateAttachment.getIn(['file', 'id']);\n      });\n      oldAttachment = this._attachments.get(index);\n      patch = taiga.patch(oldAttachment.get('file'), toUpdateAttachment.get('file'));\n      if (toUpdateAttachment.get('loading')) {\n        this._attachments = this._attachments.set(index, toUpdateAttachment);\n        return this.regenerate();\n      } else {\n        return this.attachmentsService.patch(toUpdateAttachment.getIn(['file', 'id']), type, patch).then((function(_this) {\n          return function() {\n            _this._attachments = _this._attachments.set(index, toUpdateAttachment);\n            return _this.regenerate();\n          };\n        })(this));\n      }\n    };\n\n    return AttachmentsFullService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsFullService\", AttachmentsFullService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewController;\n\n  AttachmentsPreviewController = (function() {\n    AttachmentsPreviewController.$inject = [\"tgAttachmentsPreviewService\"];\n\n    function AttachmentsPreviewController(attachmentsPreviewService) {\n      this.attachmentsPreviewService = attachmentsPreviewService;\n      taiga.defineImmutableProperty(this, \"current\", (function(_this) {\n        return function() {\n          if (!_this.attachmentsPreviewService.fileId) {\n            return null;\n          }\n          return _this.getCurrent();\n        };\n      })(this));\n    }\n\n    AttachmentsPreviewController.prototype.hasPagination = function() {\n      var images;\n      images = this.attachments.filter((function(_this) {\n        return function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        };\n      })(this));\n      return images.size > 1;\n    };\n\n    AttachmentsPreviewController.prototype.getCurrent = function() {\n      var attachment, file;\n      attachment = this.attachments.find((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n      if (!attachment) {\n        return null;\n      }\n      file = attachment.get('file');\n      return file;\n    };\n\n    AttachmentsPreviewController.prototype.getIndex = function() {\n      return this.attachments.findIndex((function(_this) {\n        return function(attachment) {\n          return _this.attachmentsPreviewService.fileId === attachment.getIn(['file', 'id']);\n        };\n      })(this));\n    };\n\n    AttachmentsPreviewController.prototype.next = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(attachmentIndex + 1).find(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.find(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    AttachmentsPreviewController.prototype.previous = function() {\n      var attachmentIndex, image;\n      attachmentIndex = this.getIndex();\n      image = this.attachments.slice(0, attachmentIndex).findLast(function(attachment) {\n        return taiga.isImage(attachment.getIn(['file', 'name']));\n      });\n      if (!image) {\n        image = this.attachments.findLast(function(attachment) {\n          return taiga.isImage(attachment.getIn(['file', 'name']));\n        });\n      }\n      return this.attachmentsPreviewService.fileId = image.getIn(['file', 'id']);\n    };\n\n    return AttachmentsPreviewController;\n\n  })();\n\n  angular.module('taigaComponents').controller('AttachmentsPreview', AttachmentsPreviewController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentPreviewLightboxDirective;\n\n  AttachmentPreviewLightboxDirective = function(lightboxService, attachmentsPreviewService) {\n    var link;\n    link = function($scope, el, attrs, ctrl) {\n      $(document.body).on(\"keydown.image-preview\", function(e) {\n        if (attachmentsPreviewService.fileId) {\n          if (e.keyCode === 39) {\n            ctrl.next();\n          } else if (e.keyCode === 37) {\n            ctrl.previous();\n          }\n        }\n        return $scope.$digest();\n      });\n      return $scope.$on('$destroy', function() {\n        return $(document.body).off('.image-preview');\n      });\n    };\n    return {\n      scope: {},\n      controller: 'AttachmentsPreview',\n      templateUrl: 'components/attachments-preview/attachments-preview.html',\n      link: link,\n      controllerAs: \"vm\",\n      bindToController: {\n        attachments: \"=\"\n      }\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAttachmentsPreview\", [\"lightboxService\", \"tgAttachmentsPreviewService\", AttachmentPreviewLightboxDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsPreviewService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AttachmentsPreviewService = (function(superClass) {\n    extend(AttachmentsPreviewService, superClass);\n\n    AttachmentsPreviewService.$inject = [];\n\n    function AttachmentsPreviewService() {}\n\n    return AttachmentsPreviewService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgAttachmentsPreviewService\", AttachmentsPreviewService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleController;\n\n  AttachmentsSimpleController = (function() {\n    AttachmentsSimpleController.$inject = [\"tgAttachmentsService\"];\n\n    function AttachmentsSimpleController(attachmentsService) {\n      this.attachmentsService = attachmentsService;\n    }\n\n    AttachmentsSimpleController.prototype.addAttachment = function(file) {\n      var attachment;\n      attachment = Immutable.fromJS({\n        file: file,\n        name: file.name,\n        size: file.size\n      });\n      if (this.attachmentsService.validate(file)) {\n        this.attachments = this.attachments.push(attachment);\n        if (this.onAdd) {\n          return this.onAdd({\n            attachment: attachment\n          });\n        }\n      }\n    };\n\n    AttachmentsSimpleController.prototype.addAttachments = function(files) {\n      return _.forEach(files, this.addAttachment.bind(this));\n    };\n\n    AttachmentsSimpleController.prototype.deleteAttachment = function(toDeleteAttachment) {\n      this.attachments = this.attachments.filter(function(attachment) {\n        return attachment !== toDeleteAttachment;\n      });\n      if (this.onDelete) {\n        return this.onDelete({\n          attachment: toDeleteAttachment\n        });\n      }\n    };\n\n    return AttachmentsSimpleController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"AttachmentsSimple\", AttachmentsSimpleController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsSimpleDirective;\n\n  AttachmentsSimpleDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.displayAttachmentInput = function(event) {\n        angular.element('#add-attach').click();\n        return false;\n      };\n    };\n    return {\n      scope: {},\n      bindToController: {\n        attachments: \"=\",\n        onAdd: \"&\",\n        onDelete: \"&\"\n      },\n      controller: \"AttachmentsSimple\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/attachments-simple/attachments-simple.html\",\n      link: link\n    };\n  };\n\n  AttachmentsSimpleDirective.$inject = [];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSimple\", AttachmentsSimpleDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentSortableDirective;\n\n  AttachmentSortableDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      callback = $parse(attrs.tgAttachmentsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div[tg-bind-scope]');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var attachment, newIndex;\n        item = $(item);\n        attachment = item.scope().attachment;\n        newIndex = item.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            attachment: attachment,\n            index: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  AttachmentSortableDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgAttachmentsSortable\", AttachmentSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AutoSelectDirective;\n\n  AutoSelectDirective = function($timeout) {\n    return {\n      link: function(scope, elm) {\n        return $timeout(function() {\n          return elm[0].select();\n        });\n      }\n    };\n  };\n\n  AutoSelectDirective.$inject = ['$timeout'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAutoSelect\", AutoSelectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarDirective;\n\n  AvatarDirective = function(avatarService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var attributeName;\n      if (attrs.tgAvatarBig) {\n        attributeName = 'avatarBig';\n      } else {\n        attributeName = 'avatar';\n      }\n      return scope.$watch(attributeName, function(user) {\n        var avatar;\n        avatar = avatarService.getAvatar(user, attributeName);\n        el.attr('src', avatar.url);\n        el.attr('title', \"\" + avatar.fullName);\n        el.attr('alt', \"\" + avatar.fullName);\n        return el.css('background', avatar.bg || \"\");\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        avatar: \"=tgAvatar\",\n        avatarBig: \"=tgAvatarBig\"\n      }\n    };\n  };\n\n  AvatarDirective.$inject = ['tgAvatarService'];\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatar\", AvatarDirective);\n\n  angular.module(\"taigaComponents\").directive(\"tgAvatarBig\", AvatarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BelongToEpicsDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  BelongToEpicsDirective = function($translate, $confirm, $rs, $rs2, lightboxService) {\n    var link, templateUrl;\n    link = function(scope, el, attrs) {\n      var updateEpics;\n      scope.$watch('epics', function(epics) {\n        return updateEpics(epics);\n      });\n      scope.$on(\"related-epics:changed\", function(ctx, userStory) {\n        return $rs.userstories.getByRef(userStory.project, userStory.ref, {}).then(function(us) {\n          scope.item.epics = us.epics;\n          return updateEpics(us.epics);\n        });\n      });\n      scope.removeEpicRelationship = function(epic) {\n        var message, title;\n        title = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n        message = $translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n          epicSubject: epic.get('subject')\n        });\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          var epicId, onError, onSuccess, usId;\n          onSuccess = function() {\n            askResponse.finish();\n            return scope.$broadcast(\"related-epics:changed\", scope.item);\n          };\n          onError = function() {\n            askResponse.finish(false);\n            return $confirm.notify(\"error\");\n          };\n          epicId = epic.get('id');\n          usId = scope.item.id;\n          return $rs2.epics.deleteRelatedUserstory(epicId, usId).then(onSuccess, onError);\n        });\n      };\n      return updateEpics = function(epics) {\n        scope.epicsLength = 0;\n        scope.immutable_epics = [];\n        if (epics && !epics.isIterable) {\n          scope.epicsLength = epics.length;\n          return scope.immutable_epics = Immutable.fromJS(epics);\n        }\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/belong-to-epics/belong-to-epics-\" + attrs.format + \".html\";\n      }\n      return \"components/belong-to-epics/belong-to-epics-pill.html\";\n    };\n    return {\n      link: link,\n      scope: {\n        epics: '=',\n        item: \"=\"\n      },\n      templateUrl: templateUrl\n    };\n  };\n\n  module.directive(\"tgBelongToEpics\", [\"$translate\", \"$tgConfirm\", \"$tgResources\", \"tgResources\", \"lightboxService\", BelongToEpicsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BindCode;\n\n  BindCode = function($sce, $parse, $compile, wysiwygService) {\n    return {\n      restrict: 'A',\n      compile: function(tElement, tAttrs) {\n        var render, tgBindWysiwygHtmlGetter, tgBindWysiwygHtmlWatch;\n        tgBindWysiwygHtmlGetter = $parse(tAttrs.tgBindWysiwygHtml);\n        tgBindWysiwygHtmlWatch = $parse(tAttrs.tgBindWysiwygHtml, function(value) {\n          return (value || '').toString();\n        });\n        $compile.$$addBindingClass(tElement);\n        render = (function(_this) {\n          return function(element, html) {\n            var anchor;\n            window._extraValidHtmlElments = {\n              input: true\n            };\n            window._extraValidAttrs = {\n              checked: true\n            };\n            element.html($sce.getTrustedHtml(html) || '');\n            element[0].querySelectorAll('pre code').forEach(function(block) {\n              var blockClasses, language, match, matchResult, resultHighlight;\n              blockClasses = block.className + ' ';\n              blockClasses += block.parentNode ? block.parentNode.className : '';\n              match = /\\blang(?:uage)?-([\\w-]+)\\b/i.exec(blockClasses);\n              matchResult = 'plaintext';\n              if (match && match.length) {\n                matchResult = match[1];\n              }\n              language = hljs.getLanguage(matchResult);\n              if (language) {\n                return resultHighlight = hljs.highlightBlock(block);\n              } else {\n                return ljs.load((\"/\" + window._version + \"/highlightjs-languages/\") + matchResult + \".min.js\", function() {\n                  return hljs.highlightBlock(block);\n                });\n              }\n            });\n            anchor = element[0].querySelectorAll('a[href^=\"#\"]');\n            return anchor.forEach(function(link) {\n              return link.addEventListener('click', function(e) {\n                var node;\n                e.preventDefault();\n                node = document.querySelector(link.getAttribute('href'));\n                if (node) {\n                  return node.scrollIntoView();\n                }\n              });\n            });\n          };\n        })(this);\n        return function(scope, element, attr) {\n          $compile.$$addBindingInfo(element, attr.tgBindWysiwygHtml);\n          return scope.$watch(tgBindWysiwygHtmlWatch, function() {\n            var html;\n            html = wysiwygService.getHTML(tgBindWysiwygHtmlGetter(scope));\n            wysiwygService.refreshAttachmentURL(html).then((function(_this) {\n              return function(html) {\n                return render(element, html);\n              };\n            })(this));\n            return render(element, html);\n          });\n        };\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgBindWysiwygHtml\", [\"$sce\", \"$parse\", \"$compile\", \"tgWysiwygService\", BindCode]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BoardZoomDirective;\n\n  BoardZoomDirective = function() {\n    return {\n      scope: {\n        levels: \"=\",\n        value: \"=\"\n      },\n      templateUrl: 'components/board-zoom/board-zoom.html'\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgBoardZoom\", [BoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardSlideshowController;\n\n  CardSlideshowController = (function() {\n    CardSlideshowController.$inject = [];\n\n    function CardSlideshowController() {\n      this.index = 0;\n    }\n\n    CardSlideshowController.prototype.next = function() {\n      this.index++;\n      if (this.index >= this.images.size) {\n        return this.index = 0;\n      }\n    };\n\n    CardSlideshowController.prototype.previous = function() {\n      this.index--;\n      if (this.index < 0) {\n        return this.index = this.images.size - 1;\n      }\n    };\n\n    return CardSlideshowController;\n\n  })();\n\n  angular.module('taigaComponents').controller('CardSlideshow', CardSlideshowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardSlideshowDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardSlideshowDirective = function() {\n    return {\n      controller: \"CardSlideshow\",\n      templateUrl: \"components/card-slideshow/card-slideshow.html\",\n      bindToController: true,\n      controllerAs: \"vm\",\n      scope: {\n        images: \"=\"\n      }\n    };\n  };\n\n  module.directive('tgCardSlideshow', cardSlideshowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CardController;\n\n  CardController = (function() {\n    function CardController() {}\n\n    CardController.$inject = [];\n\n    CardController.prototype.visible = function(name) {\n      return this.zoom.indexOf(name) !== -1;\n    };\n\n    CardController.prototype.hasTasks = function() {\n      var tasks;\n      tasks = this.item.getIn(['model', 'tasks']);\n      return tasks && tasks.size > 0;\n    };\n\n    CardController.prototype.getTagColor = function(color) {\n      if (color) {\n        return color;\n      }\n      return \"#A9AABC\";\n    };\n\n    CardController.prototype.hasMultipleAssignedUsers = function() {\n      var assignedUsers;\n      assignedUsers = this.item.getIn(['model', 'assigned_users']);\n      return assignedUsers && assignedUsers.size > 1;\n    };\n\n    CardController.prototype.hasVisibleAttachments = function() {\n      return this.item.get('images').size > 0;\n    };\n\n    CardController.prototype.toggleFold = function() {\n      return this.onToggleFold({\n        id: this.item.get('id')\n      });\n    };\n\n    CardController.prototype.getClosedTasks = function() {\n      return this.item.getIn(['model', 'tasks']).filter(function(task) {\n        return task.get('is_closed');\n      });\n    };\n\n    CardController.prototype.closedTasksPercent = function() {\n      return this.getClosedTasks().size * 100 / this.item.getIn(['model', 'tasks']).size;\n    };\n\n    CardController.prototype.getModifyPermisionKey = function() {\n      if (this.type === 'task') {\n        return 'modify_task';\n      } else {\n        return 'modify_us';\n      }\n    };\n\n    CardController.prototype.getDeletePermisionKey = function() {\n      if (this.type === 'task') {\n        return 'delete_task';\n      } else {\n        return 'delete_us';\n      }\n    };\n\n    CardController.prototype._setVisibility = function() {\n      var visibility;\n      visibility = {\n        related: this.visible('related_tasks'),\n        slides: this.visible('attachments')\n      };\n      if (!_.isUndefined(this.item.get('foldStatusChanged')) && this.visible('unfold')) {\n        if (this.zoomLevel === 2) {\n          visibility.related = this.item.get('foldStatusChanged');\n          visibility.slides = this.item.get('foldStatusChanged');\n        } else {\n          visibility.related = !this.item.get('foldStatusChanged');\n          visibility.slides = !this.item.get('foldStatusChanged');\n        }\n      }\n      if (!this.item.getIn(['model', 'tasks']) || !this.item.getIn(['model', 'tasks']).size) {\n        visibility.related = false;\n      }\n      if (!this.item.get('images') || !this.item.get('images').size) {\n        visibility.slides = false;\n      }\n      return visibility;\n    };\n\n    CardController.prototype.isRelatedTasksVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.related;\n    };\n\n    CardController.prototype.isSlideshowVisible = function() {\n      var visibility;\n      visibility = this._setVisibility();\n      return visibility.slides;\n    };\n\n    CardController.prototype.getNavKey = function() {\n      if (this.type === 'task') {\n        return 'project-tasks-detail';\n      } else if (this.type === 'issue') {\n        return 'project-issues-detail';\n      } else {\n        return 'project-userstories-detail';\n      }\n    };\n\n    return CardController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Card', CardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var cardDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  cardDirective = function() {\n    return {\n      controller: \"Card\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/card/card.html\",\n      bindToController: {\n        onToggleFold: \"&\",\n        onClickAssignedTo: \"&\",\n        onClickEdit: \"&\",\n        onClickRemove: \"&\",\n        onClickDelete: \"&\",\n        project: \"<\",\n        item: \"<\",\n        zoom: \"<\",\n        zoomLevel: \"<\",\n        archived: \"<\",\n        inViewPort: \"<\",\n        folded: \"<\",\n        type: \"@\"\n      }\n    };\n  };\n\n  module.directive('tgCard', cardDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ClickInputFile;\n\n  ClickInputFile = function() {\n    return {\n      link: function(scope, el) {\n        el.on('click', function(e) {\n          var inputFile;\n          if (!$(e.target).is('input')) {\n            e.preventDefault();\n            inputFile = el.find('input[type=\"file\"]');\n            inputFile.val('');\n            return inputFile.trigger('click');\n          }\n        });\n        return scope.$on(\"$destroy\", function() {\n          return el.off();\n        });\n      }\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgClickInputFile\", [ClickInputFile]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorController, getDefaulColorList, taiga;\n\n  taiga = this.taiga;\n\n  getDefaulColorList = taiga.getDefaulColorList;\n\n  ColorSelectorController = (function() {\n    ColorSelectorController.$inject = [\"tgProjectService\"];\n\n    function ColorSelectorController(projectService) {\n      this.projectService = projectService;\n      this.colorList = getDefaulColorList();\n      this.checkIsColorRequired();\n      this.displayColorList = false;\n    }\n\n    ColorSelectorController.prototype.userCanChangeColor = function() {\n      if (!this.requiredPerm) {\n        return true;\n      }\n      return this.projectService.hasPermission(this.requiredPerm);\n    };\n\n    ColorSelectorController.prototype.checkIsColorRequired = function() {\n      if (!this.isColorRequired) {\n        return this.colorList = _.dropRight(this.colorList);\n      }\n    };\n\n    ColorSelectorController.prototype.setColor = function(color) {\n      this.color = color;\n      return this.customColor = color;\n    };\n\n    ColorSelectorController.prototype.resetColor = function() {\n      if (this.isColorRequired && !this.color) {\n        return this.color = this.initColor;\n      }\n    };\n\n    ColorSelectorController.prototype.toggleColorList = function() {\n      this.displayColorList = !this.displayColorList;\n      this.customColor = this.color;\n      return this.resetColor();\n    };\n\n    ColorSelectorController.prototype.onSelectDropdownColor = function(color) {\n      this.color = color;\n      this.onSelectColor({\n        color: color\n      });\n      return this.toggleColorList();\n    };\n\n    ColorSelectorController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        if (this.customColor || !this.isColorRequired) {\n          this.onSelectDropdownColor(this.customColor);\n        }\n        return event.preventDefault();\n      }\n    };\n\n    return ColorSelectorController;\n\n  })();\n\n  angular.module('taigaComponents').controller(\"ColorSelectorCtrl\", ColorSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ColorSelectorDirective, bindOnce;\n\n  bindOnce = this.taiga.bindOnce;\n\n  ColorSelectorDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var _timeout, cancel, close;\n      _timeout = null;\n      cancel = function() {\n        $timeout.cancel(_timeout);\n        return _timeout = null;\n      };\n      close = function() {\n        if (_timeout) {\n          return;\n        }\n        return _timeout = $timeout((function() {\n          ctrl.displayColorList = false;\n          return ctrl.resetColor();\n        }), 400);\n      };\n      el.find('.color-selector').mouseenter(cancel).mouseleave(close);\n      el.find('.color-selector-dropdown').mouseenter(cancel).mouseleave(close);\n      return scope.$watch('vm.initColor', function(color) {\n        return ctrl.setColor(color);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/color-selector/color-selector.html\",\n      controller: \"ColorSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        isColorRequired: \"=\",\n        onSelectColor: \"&\",\n        initColor: \"=\",\n        requiredPerm: \"@\"\n      },\n      scope: {}\n    };\n  };\n\n  ColorSelectorDirective.$inject = [\"$timeout\"];\n\n  angular.module('taigaComponents').directive(\"tgColorSelector\", ColorSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderController, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderController = (function() {\n    DetailHeaderController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\", \"$tgNavUrls\", \"$window\"];\n\n    function DetailHeaderController(rootScope, confirm, modelTransform, navUrls, window) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.navUrls = navUrls;\n      this.window = window;\n      this.editMode = false;\n      this.loadingSubject = false;\n      this.originalSubject = this.item.subject;\n      this.objType = {\n        'tasks': 'task',\n        'issues': 'issue',\n        'userstories': 'us'\n      }[this.item._name];\n    }\n\n    DetailHeaderController.prototype._checkPermissions = function() {\n      return this.permissions = {\n        canEdit: _.includes(this.project.my_permissions, this.requiredPerm)\n      };\n    };\n\n    DetailHeaderController.prototype.cancelEdit = function() {\n      this.editMode = false;\n      return this.item.subject = this.originalSubject;\n    };\n\n    DetailHeaderController.prototype.editSubject = function(value) {\n      var selection;\n      selection = this.window.getSelection();\n      if (selection.type !== \"Range\") {\n        if (value) {\n          this.editMode = true;\n        }\n        if (!value) {\n          return this.editMode = false;\n        }\n      }\n    };\n\n    DetailHeaderController.prototype.onKeyDown = function(event) {\n      if (event.which === 13) {\n        this.saveSubject();\n      }\n      if (event.which === 27) {\n        this.item.subject = this.originalSubject;\n        return this.editSubject(false);\n      }\n    };\n\n    DetailHeaderController.prototype.saveSubject = function() {\n      var item, onEditSubjectError, onEditSubjectSuccess, transform;\n      onEditSubjectSuccess = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.confirm.notify('success');\n          return _this.originalSubject = _this.item.subject;\n        };\n      })(this);\n      onEditSubjectError = (function(_this) {\n        return function() {\n          _this.loadingSubject = false;\n          return _this.confirm.notify('error');\n        };\n      })(this);\n      this.editMode = false;\n      this.loadingSubject = true;\n      item = this.item;\n      transform = this.modelTransform.save(function(item) {\n        return item;\n      });\n      return transform.then(onEditSubjectSuccess, onEditSubjectError);\n    };\n\n    return DetailHeaderController;\n\n  })();\n\n  module.controller(\"DetailHeaderCtrl\", DetailHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailHeaderDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailHeaderDirective = function($tgWysiwygService) {\n    var link;\n    this.$inject = [];\n    link = function(scope, el, attrs, ctrl) {\n      scope.blocked_html_note = '';\n      scope.$watch(\"vm.item.blocked_note\", function(blocked_note) {\n        var html_note;\n        html_note = $tgWysiwygService.getHTML(blocked_note);\n        return scope.blocked_html_note = html_note;\n      });\n      return ctrl._checkPermissions();\n    };\n    return {\n      link: link,\n      controller: \"DetailHeaderCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\",\n        project: \"=\",\n        sectionName: \"=\",\n        requiredPerm: \"@\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/header/detail-header.html\"\n    };\n  };\n\n  module.directive(\"tgDetailHeader\", [\"tgWysiwygService\", DetailHeaderDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavController, module;\n\n  module = angular.module(\"taigaBase\");\n\n  DetailNavController = (function() {\n    DetailNavController.$inject = [\"$tgNavUrls\"];\n\n    function DetailNavController(navUrls) {\n      this.navUrls = navUrls;\n      return;\n    }\n\n    DetailNavController.prototype._checkNav = function() {\n      var ctx, ref, ref1;\n      if (((ref = this.item.neighbors.previous) != null ? ref.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.previous.ref\n        };\n        this.previousUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n      if (((ref1 = this.item.neighbors.next) != null ? ref1.ref : void 0) != null) {\n        ctx = {\n          project: this.item.project_extra_info.slug,\n          ref: this.item.neighbors.next.ref\n        };\n        return this.nextUrl = this.navUrls.resolve(\"project-\" + this.item._name + \"-detail\", ctx);\n      }\n    };\n\n    return DetailNavController;\n\n  })();\n\n  module.controller(\"DetailNavCtrl\", DetailNavController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DetailNavDirective, module;\n\n  module = angular.module('taigaBase');\n\n  DetailNavDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.item\", function(value) {\n        if (!value) {\n          return;\n        }\n        return ctrl._checkNav();\n      });\n    };\n    return {\n      link: link,\n      controller: \"DetailNavCtrl\",\n      bindToController: true,\n      scope: {\n        item: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/detail/nav/detail-nav.html\"\n    };\n  };\n\n  module.directive(\"tgDetailNav\", DetailNavDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateController;\n\n  DueDateController = (function() {\n    DueDateController.$inject = [\"tgDueDateService\", \"tgLightboxFactory\"];\n\n    function DueDateController(dueDateService, tgLightboxFactory) {\n      this.dueDateService = dueDateService;\n      this.tgLightboxFactory = tgLightboxFactory;\n    }\n\n    DueDateController.prototype.visible = function() {\n      return this.dueDateService.visible(this._getScope());\n    };\n\n    DueDateController.prototype.disabled = function() {\n      return this.dueDateService.disabled(this._getScope());\n    };\n\n    DueDateController.prototype.color = function() {\n      return this.dueDateService.color(this._getScope());\n    };\n\n    DueDateController.prototype.title = function() {\n      return this.dueDateService.title(this._getScope());\n    };\n\n    DueDateController.prototype.setDueDate = function() {\n      if (this.disabled()) {\n        return;\n      }\n      return this.tgLightboxFactory.create(\"tg-lb-set-due-date\", {\n        \"class\": \"lightbox lightbox-set-due-date\"\n      }, {\n        \"object\": this.item,\n        \"notAutoSave\": this.notAutoSave\n      });\n    };\n\n    DueDateController.prototype._getScope = function() {\n      return {\n        dueDate: this.dueDate,\n        isClosed: this.isClosed,\n        item: this.item,\n        objType: this.objType,\n        format: this.format,\n        notAutoSave: this.notAutoSave\n      };\n    };\n\n    return DueDateController;\n\n  })();\n\n  angular.module('taigaComponents').controller('DueDateCtrl', DueDateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDatePopoverDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDatePopoverDirective = function($translate, datePickerConfigService) {\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var datePickerConfig;\n        scope.open = false;\n        datePickerConfig = datePickerConfigService.get();\n        _.merge(datePickerConfig, {\n          field: el.find('.due-date-button')[0],\n          container: el.find('.date-picker-container')[0],\n          bound: true,\n          onClose: function() {\n            scope.open = false;\n            return scope.$apply();\n          },\n          onSelect: function() {\n            return ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n          }\n        });\n        el.picker = new Pikaday(datePickerConfig);\n        el.on(\"click\", \".due-date-button\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          if (scope.open) {\n            el.picker.hide();\n            return;\n          }\n          if (!el.picker.getDate() && ctrl.dueDate) {\n            el.picker.setDate(moment(ctrl.dueDate).format('YYYY-MM-DD'));\n          }\n          el.picker.show();\n          scope.open = true;\n          return scope.$apply();\n        });\n        el.on(\"click\", \".date-picker-clean\", function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          ctrl.dueDate = null;\n          el.picker.setDate(ctrl.dueDate);\n          scope.open = false;\n          el.picker.hide();\n          return scope.$apply();\n        });\n        return scope.$on(\"status:changed\", function(ctx, status) {\n          return ctrl.isClosed = ctrl.item.is_closed;\n        });\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"components/due-date/due-date-popover.html\",\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDatePopover', ['$translate', 'tgDatePickerConfigService', dueDatePopoverDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var dueDateDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  dueDateDirective = function($translate, datePickerConfigService) {\n    var templateUrl;\n    templateUrl = function(el, attrs) {\n      if (attrs.format) {\n        return \"components/due-date/due-date-\" + attrs.format + \".html\";\n      }\n      return \"components/due-date/due-date-icon.html\";\n    };\n    return {\n      link: function(scope, el, attrs, ctrl) {\n        var renderDatePicker;\n        renderDatePicker = function() {\n          var datePickerConfig, prettyDate;\n          prettyDate = $translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n          if (ctrl.dueDate) {\n            ctrl.dueDate = moment(ctrl.dueDate, prettyDate);\n          }\n          el.on(\"click\", \".date-picker-popover-trigger\", function(event) {\n            if (ctrl.disabled()) {\n              return;\n            }\n            event.preventDefault();\n            event.stopPropagation();\n            return el.find(\".date-picker-popover\").popover().open();\n          });\n          el.on(\"click\", \".date-picker-clean\", function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n            ctrl.dueDate = null;\n            scope.$apply();\n            return el.find(\".date-picker-popover\").popover().close();\n          });\n          datePickerConfig = datePickerConfigService.get();\n          _.merge(datePickerConfig, {\n            field: el.find('input.due-date')[0],\n            container: el.find('.date-picker-container')[0],\n            bound: false,\n            onSelect: function() {\n              ctrl.dueDate = this.getMoment().format('YYYY-MM-DD');\n              el.find(\".date-picker-popover\").popover().close();\n              return scope.$apply();\n            }\n          });\n          return el.picker = new Pikaday(datePickerConfig);\n        };\n        if (attrs.format === 'button-popover') {\n          return renderDatePicker();\n        }\n      },\n      controller: \"DueDateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: templateUrl,\n      scope: {\n        dueDate: '=',\n        isClosed: '=',\n        item: '=',\n        objType: '@',\n        format: '@',\n        notAutoSave: '='\n      }\n    };\n  };\n\n  module.directive('tgDueDate', ['$translate', 'tgDatePickerConfigService', dueDateDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DueDateService, taiga;\n\n  taiga = this.taiga;\n\n  DueDateService = (function() {\n    DueDateService.$inject = [\"$translate\", \"tgProjectService\"];\n\n    function DueDateService(translate, projectService) {\n      this.translate = translate;\n      this.projectService = projectService;\n      this.defaultConfig = [\n        {\n          \"color\": \"#93C45D\",\n          \"name\": \"normal due\",\n          \"days_to_due\": null,\n          \"by_default\": true\n        }, {\n          \"color\": \"#EA7B4B\",\n          \"name\": \"due soon\",\n          \"days_to_due\": 14,\n          \"by_default\": false\n        }, {\n          \"color\": \"#E44057\",\n          \"name\": \"past due\",\n          \"days_to_due\": 0,\n          \"by_default\": false\n        }\n      ];\n    }\n\n    DueDateService.prototype.visible = function(options) {\n      return options.format === 'button' || (options.dueDate != null);\n    };\n\n    DueDateService.prototype.disabled = function(options) {\n      return options.isClosed;\n    };\n\n    DueDateService.prototype.color = function(options) {\n      var ref;\n      return ((ref = this.getStatus(options)) != null ? ref.color : void 0) || null;\n    };\n\n    DueDateService.prototype.title = function(options) {\n      if (options.dueDate) {\n        return this._formatTitle(options);\n      } else if (options.format === 'button') {\n        return this.translate.instant('COMMON.DUE_DATE.TITLE_ACTION_SET_DUE_DATE');\n      }\n      return '';\n    };\n\n    DueDateService.prototype.getStatus = function(options) {\n      var config, project;\n      if (!options.dueDate) {\n        return null;\n      }\n      project = this.projectService.project.toJS();\n      config = project[options.objType + \"_duedates\"];\n      if (!config) {\n        config = this.defaultConfig;\n      }\n      return this._getAppearance(options, config);\n    };\n\n    DueDateService.prototype._getDefaultAppearance = function(config) {\n      var defaultAppearance;\n      defaultAppearance = null;\n      _.map(config, function(it) {\n        if (it.by_default === true) {\n          return defaultAppearance = it;\n        }\n      });\n      return defaultAppearance;\n    };\n\n    DueDateService.prototype._getAppearance = function(options, config) {\n      var currentAppearance, dueDate, now;\n      currentAppearance = this._getDefaultAppearance(config);\n      config = _.sortBy(config, function(o) {\n        return -o.days_to_due;\n      });\n      dueDate = moment(options.dueDate);\n      now = moment();\n      _.map(config, function(appearance) {\n        var limitDate;\n        if (appearance.days_to_due === null) {\n          return;\n        }\n        limitDate = moment(dueDate - moment.duration(appearance.days_to_due, \"days\"));\n        if (now >= limitDate) {\n          return currentAppearance = appearance;\n        }\n      });\n      return currentAppearance;\n    };\n\n    DueDateService.prototype._formatTitle = function(options) {\n      var formatedDate, prettyDate, status;\n      prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n      formatedDate = moment(options.dueDate).format(prettyDate);\n      status = this.getStatus(options);\n      if (status != null ? status.name : void 0) {\n        return formatedDate + \" (\" + status.name + \")\";\n      }\n      return formatedDate;\n    };\n\n    return DueDateService;\n\n  })();\n\n  taiga.DueDateService = DueDateService;\n\n  angular.module(\"taigaCommon\").service(\"tgDueDateService\", DueDateService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FileChangeDirective;\n\n  FileChangeDirective = function($parse) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var eventAttr;\n      eventAttr = $parse(attrs.tgFileChange);\n      el.on('change', function(event) {\n        return scope.$apply(function() {\n          return eventAttr(scope, {\n            files: event.currentTarget.files\n          });\n        });\n      });\n      return scope.$on(\"$destroy\", function() {\n        return el.off();\n      });\n    };\n    return {\n      restrict: \"A\",\n      link: link\n    };\n  };\n\n  FileChangeDirective.$inject = [\"$parse\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgFileChange\", FileChangeDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterRemoteStorageService, generateHash,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  generateHash = taiga.generateHash;\n\n  FilterRemoteStorageService = (function(superClass) {\n    extend(FilterRemoteStorageService, superClass);\n\n    FilterRemoteStorageService.$inject = [\"$q\", \"$tgUrls\", \"$tgHttp\"];\n\n    function FilterRemoteStorageService(q, urls, http) {\n      this.q = q;\n      this.urls = urls;\n      this.http = http;\n    }\n\n    FilterRemoteStorageService.prototype.storeFilters = function(projectId, myFilters, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      if (_.isEmpty(myFilters)) {\n        promise = this.http[\"delete\"](url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function() {\n          return deferred.resolve();\n        });\n        promise.then(null, function() {\n          return deferred.reject();\n        });\n      } else {\n        promise = this.http.put(url + \"/\" + hash, {\n          key: hash,\n          value: myFilters\n        });\n        promise.then(function(data) {\n          return deferred.resolve();\n        });\n        promise.then(null, (function(_this) {\n          return function(data) {\n            var innerPromise;\n            innerPromise = _this.http.post(\"\" + url, {\n              key: hash,\n              value: myFilters\n            });\n            innerPromise.then(function() {\n              return deferred.resolve();\n            });\n            return innerPromise.then(null, function() {\n              return deferred.reject();\n            });\n          };\n        })(this));\n      }\n      return deferred.promise;\n    };\n\n    FilterRemoteStorageService.prototype.getFilters = function(projectId, filtersHashSuffix) {\n      var deferred, hash, ns, promise, url;\n      deferred = this.q.defer();\n      url = this.urls.resolve(\"user-storage\");\n      ns = projectId + \":\" + filtersHashSuffix;\n      hash = generateHash([projectId, ns]);\n      promise = this.http.get(url + \"/\" + hash);\n      promise.then(function(data) {\n        return deferred.resolve(data.data.value);\n      });\n      promise.then(null, function(data) {\n        return deferred.resolve({});\n      });\n      return deferred.promise;\n    };\n\n    return FilterRemoteStorageService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgFilterRemoteStorageService\", FilterRemoteStorageService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterSlideDownDirective;\n\n  FilterSlideDownDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var filter;\n      filter = $('tg-filter');\n      return scope.$watch(attrs.ngIf, function(value) {\n        var contentHeight, wrapperHeight;\n        if (value) {\n          filter.find('.filter-list').hide();\n          wrapperHeight = filter.height();\n          contentHeight = 0;\n          filter.children().each(function() {\n            return contentHeight += $(this).outerHeight(true);\n          });\n          return $(el.context.nextSibling).css({\n            \"display\": \"block\"\n          });\n        }\n      });\n    };\n    return {\n      priority: 900,\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilterSlideDown\", [FilterSlideDownDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterController;\n\n  FilterController = (function() {\n    FilterController.$inject = ['$translate'];\n\n    FilterController.activeCustomFilter = null;\n\n    FilterController.repeatedFilterError = false;\n\n    FilterController.lengthZeroError = false;\n\n    function FilterController(translate) {\n      this.translate = translate;\n      this.opened = null;\n      this.filterModeOptions = [\"include\", \"exclude\"];\n      this.filterModeLabels = {\n        \"include\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.INCLUDE\"),\n        \"exclude\": this.translate.instant(\"COMMON.FILTERS.ADVANCED_FILTERS.EXCLUDE\")\n      };\n      this.filterMode = 'include';\n      this.customFilterForm = false;\n      this.customFilterName = '';\n      this.$onChanges = function(changes) {\n        if (changes.selectedFilters) {\n          this.getIncludedFilters();\n          return this.getExcludedFilters();\n        }\n      };\n      this.includedFilters = this.getIncludedFilters();\n      this.excludedFilters = this.getExcludedFilters();\n    }\n\n    FilterController.prototype.toggleFilterCategory = function(filterName) {\n      if (this.opened === filterName) {\n        return this.opened = null;\n      } else {\n        return this.opened = filterName;\n      }\n    };\n\n    FilterController.prototype.isOpen = function(filterName) {\n      return this.opened === filterName;\n    };\n\n    FilterController.prototype.openCustomFilter = function() {\n      this.customFilterForm = true;\n      this.lengthZeroError = false;\n      return this.repeatedFilterError = false;\n    };\n\n    FilterController.prototype.saveCustomFilter = function() {\n      if (this.customFilterName.length > 0 && !this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        this.lengthZeroError = false;\n        this.repeatedFilterError = false;\n        this.onSaveCustomFilter({\n          name: this.customFilterName\n        });\n        this.customFilterForm = false;\n        this.opened = 'custom-filter';\n        this.customFilterName = '';\n      }\n      if (this.customFilterName.length === 0) {\n        this.lengthZeroError = true;\n      } else {\n        this.lengthZeroError = false;\n      }\n      if (!this.customFilters.find((function(_this) {\n        return function(filter) {\n          return filter.name === _this.customFilterName;\n        };\n      })(this))) {\n        return this.repeatedFilterError = false;\n      } else {\n        return this.repeatedFilterError = true;\n      }\n    };\n\n    FilterController.prototype.unselectFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectFilter = function(filterCategory, filter) {\n      filter = {\n        category: filterCategory,\n        filter: filter,\n        mode: this.filterMode\n      };\n      this.activeCustomFilter = null;\n      return this.onAddFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.removeCustomFilter = function(filter) {\n      this.activeCustomFilter = null;\n      return this.onRemoveCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.selectCustomFilter = function(filter) {\n      this.activeCustomFilter = filter.id;\n      return this.onSelectCustomFilter({\n        filter: filter\n      });\n    };\n\n    FilterController.prototype.getIncludedFilters = function() {\n      return this.includedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'include';\n      });\n    };\n\n    FilterController.prototype.getExcludedFilters = function() {\n      return this.excludedFilters = _.filter(this.selectedFilters, function(it) {\n        return it.mode === 'exclude';\n      });\n    };\n\n    FilterController.prototype.isFilterSelected = function(filterCategory, filter) {\n      return !!_.find(this.selectedFilters, function(it) {\n        return filter.id === it.id && filterCategory.dataType === it.dataType;\n      });\n    };\n\n    return FilterController;\n\n  })();\n\n  angular.module('taigaComponents').controller('Filter', FilterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FilterDirective;\n\n  FilterDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var taskboard, watchTaskboardHeight;\n      watchTaskboardHeight = (function(_this) {\n        return function(taskboard) {\n          var resizeObserver;\n          resizeObserver = new ResizeObserver(function() {\n            var currentMax, maxSize;\n            maxSize = null;\n            currentMax = Number(el[0].style.getPropertyValue('--filter-list-max-height').replace('px', ''));\n            if (scope.vm.opened) {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight + currentMax;\n            } else {\n              maxSize = taskboard.offsetHeight - el[0].offsetHeight;\n            }\n            if (maxSize < 100) {\n              maxSize = 100;\n            } else if (maxSize > 380) {\n              maxSize = 380;\n            }\n            el[0].style.setProperty('--filter-list-max-height', maxSize + \"px\");\n            return resizeObserver.unobserve(el[0]);\n          });\n          return resizeObserver.observe(taskboard);\n        };\n      })(this);\n      attrs.$observe(\"open\", function(open) {\n        open = scope.$eval(open);\n        if (open) {\n          return el.addClass('open');\n        } else {\n          return el.removeClass('open');\n        }\n      });\n      taskboard = $('.js-taskboard-manager');\n      if (taskboard.length) {\n        return watchTaskboardHeight(taskboard[0]);\n      }\n    };\n    return {\n      scope: {\n        onChangeQ: \"&\",\n        onAddFilter: \"&\",\n        onSelectCustomFilter: \"&\",\n        onRemoveFilter: \"&\",\n        onRemoveCustomFilter: \"&\",\n        onSaveCustomFilter: \"&\",\n        customFilters: \"<\",\n        filters: \"<\",\n        customFilters: \"<\",\n        selectedFilters: \"<\"\n      },\n      bindToController: true,\n      controller: \"Filter\",\n      controllerAs: \"vm\",\n      templateUrl: 'components/filter/filter.html',\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgFilter\", [FilterDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InputSearchComponent;\n\n  InputSearchComponent = {\n    bindings: {\n      q: '<',\n      change: '&'\n    },\n    template: \"<input\\n    type=\\\"search\\\"\\n    placeholder=\\\"{{'COMMON.FILTERS.INPUT_PLACEHOLDER' | translate}}\\\"\\n    ng-model=\\\"$ctrl.searchText\\\"\\n    ng-change=\\\"$ctrl.onChange($ctrl.searchText)\\\" />\\n<tg-svg svg-icon=\\\"icon-search\\\"></tg-svg>\",\n    controller: function() {\n      this.searchText = '';\n      this.dirty = false;\n      this.$onChanges = function(changes) {\n        if (changes.q && !this.dirty) {\n          return this.searchText = this.q;\n        }\n      };\n      this.onChange = (function(_this) {\n        return function(text) {\n          _this.dirty = true;\n          return _this.change({\n            q: text\n          });\n        };\n      })(this);\n    }\n  };\n\n  angular.module(\"taigaComponents\").component(\"tgInputSearch\", InputSearchComponent);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IssuesTableController;\n\n  IssuesTableController = (function() {\n    function IssuesTableController() {}\n\n    IssuesTableController.prototype.edit = function(issue) {\n      return this.onEditIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype.toggleTags = function() {\n      return this.onToggleTags({\n        tags: this.showTags\n      });\n    };\n\n    IssuesTableController.prototype.detach = function(issue) {\n      return this.onDetachIssue({\n        id: issue.id\n      });\n    };\n\n    IssuesTableController.prototype[\"delete\"] = function(issue) {\n      return this.onDeleteIssue({\n        id: issue.id\n      });\n    };\n\n    return IssuesTableController;\n\n  })();\n\n  angular.module('taigaComponents').controller('IssuesTable', IssuesTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var issuesTableDirective, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  issuesTableDirective = function($timeout) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.issueOptions = null;\n      scope.displayOptions = function(id) {\n        var timeout;\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.issueOptions = id;\n      };\n      return scope.hideOptions = function() {\n        var timeout;\n        return timeout = $timeout((function() {\n          return scope.issueOptions = null;\n        }), 200);\n      };\n    };\n    return {\n      controller: \"IssuesTable\",\n      controllerAs: \"ctrl\",\n      templateUrl: \"components/issues-table/issues-table.html\",\n      bindToController: {\n        issues: \"<\",\n        showTags: \"=\",\n        onLoadIssues: '&',\n        onAddIssuesInBulk: '&',\n        onAddNewIssue: '&',\n        sprintIssues: '<',\n        onDeleteIssue: '&',\n        onEditIssue: '&',\n        onDetachIssue: '&',\n        onToggleTags: '&'\n      },\n      scope: true,\n      link: link\n    };\n  };\n\n  module.directive('tgIssuesTable', ['$timeout', issuesTableDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideDirective, taiga;\n\n  taiga = this.taiga;\n\n  JoyRideDirective = function($rootScope, currentUserService, joyRideService, $location, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var initJoyrRide, intro, unsuscribe;\n      unsuscribe = null;\n      intro = introJs();\n      intro.oncomplete(function() {\n        return $('html,body').scrollTop(0);\n      });\n      intro.onexit(function() {\n        return currentUserService.disableJoyRide();\n      });\n      initJoyrRide = function(next, config) {\n        if (!config[next.joyride]) {\n          return;\n        }\n        intro.setOptions({\n          exitOnEsc: false,\n          exitOnOverlayClick: false,\n          showStepNumbers: false,\n          nextLabel: $translate.instant('JOYRIDE.NAV.NEXT') + ' &rarr;',\n          prevLabel: '&larr; ' + $translate.instant('JOYRIDE.NAV.BACK'),\n          skipLabel: $translate.instant('JOYRIDE.NAV.SKIP'),\n          doneLabel: $translate.instant('JOYRIDE.NAV.DONE'),\n          disableInteraction: true\n        });\n        intro.setOption('steps', joyRideService.get(next.joyride));\n        return intro.start();\n      };\n      return $rootScope.$on('$routeChangeSuccess', function(event, next) {\n        if (!next.joyride || !currentUserService.isAuthenticated()) {\n          intro.exit();\n          if (unsuscribe) {\n            unsuscribe();\n          }\n          return;\n        }\n        intro.oncomplete(function() {\n          return currentUserService.disableJoyRide(next.joyride);\n        });\n        if (next.loader) {\n          return unsuscribe = $rootScope.$on('loader:end', function() {\n            currentUserService.loadJoyRideConfig().then(function(config) {\n              return initJoyrRide(next, config);\n            });\n            return unsuscribe();\n          });\n        } else {\n          return currentUserService.loadJoyRideConfig().then(function(config) {\n            return initJoyrRide(next, config);\n          });\n        }\n      });\n    };\n    return {\n      scope: {},\n      link: link\n    };\n  };\n\n  JoyRideDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgJoyRideService\", \"$location\", \"$translate\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgJoyRide\", JoyRideDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JoyRideService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JoyRideService = (function(superClass) {\n    extend(JoyRideService, superClass);\n\n    JoyRideService.$inject = ['$translate', 'tgCheckPermissionsService'];\n\n    function JoyRideService(translate, checkPermissionsService) {\n      this.translate = translate;\n      this.checkPermissionsService = checkPermissionsService;\n    }\n\n    JoyRideService.prototype.getConfig = function() {\n      return {\n        dashboard: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.project-list > section:not(.ng-hide)',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP1.TEXT')\n                }\n              }, {\n                element: '.working-on-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.DASHBOARD.STEP2.TEXT')\n                }\n              }, {\n                element: '.watching-container',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP3.TEXT2')]\n                }\n              }\n            ];\n            if (!$('.project-list .create-project-button').is(':hidden')) {\n              steps.push({\n                element: '.project-list .create-project-button',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT1'), _this.translate.instant('JOYRIDE.DASHBOARD.STEP4.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        backlog: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.summary',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT1'), _this.translate.instant('JOYRIDE.BACKLOG.STEP1.TEXT2')]\n                }\n              }, {\n                element: '.backlog-table-empty',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP2.TEXT')\n                }\n              }, {\n                element: '.sprints',\n                position: 'left',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP3.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.new-us',\n                position: 'rigth',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.BACKLOG.STEP4.TEXT')\n                }\n              });\n            }\n            return steps;\n          };\n        })(this),\n        kanban: (function(_this) {\n          return function() {\n            var steps;\n            steps = [\n              {\n                element: '.kanban-table-inner',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP1.TEXT')\n                }\n              }, {\n                element: '.card-placeholder',\n                position: 'right',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TITLE'),\n                  text: _this.translate.instant('JOYRIDE.KANBAN.STEP2.TEXT')\n                }\n              }\n            ];\n            if (_this.checkPermissionsService.check('add_us')) {\n              steps.push({\n                element: '.add-action',\n                position: 'bottom',\n                joyride: {\n                  title: _this.translate.instant('JOYRIDE.KANBAN.STEP3.TITLE'),\n                  text: [_this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT1'), _this.translate.instant('JOYRIDE.KANBAN.STEP3.TEXT2')]\n                }\n              });\n            }\n            return steps;\n          };\n        })(this)\n      };\n    };\n\n    JoyRideService.prototype.get = function(name) {\n      var joyRide, joyRides;\n      joyRides = this.getConfig();\n      joyRide = joyRides[name].call(this);\n      return _.map(joyRide, function(item) {\n        var html;\n        html = \"\";\n        if (item.joyride.title) {\n          html += \"<h3>\" + item.joyride.title + \"</h3>\";\n        }\n        if (_.isArray(item.joyride.text)) {\n          _.forEach(item.joyride.text, function(text) {\n            return html += \"<p>\" + text + \"</p>\";\n          });\n        } else {\n          html += \"<p>\" + item.joyride.text + \"</p>\";\n        }\n        item.intro = html;\n        return item;\n      });\n    };\n\n    return JoyRideService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgJoyRideService\", JoyRideService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var KanbanBoardZoomDirective;\n\n  KanbanBoardZoomDirective = function(storage, projectService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"kanban_zoom\", 1);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\", \"card-data\", \"assigned_to_extended\"], [\"tags\", \"extra_info\", \"unfold\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        if (zoomIndex > 3) {\n          zoomIndex = 3;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"kanban_zoom\")) !== zoomIndex) {\n          storage.set(\"kanban_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n    levels=\\\"levels\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgKanbanBoardZoom\", [\"$tgStorage\", \"tgProjectService\", KanbanBoardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectUserDirective, truncate;\n\n  truncate = taiga.truncate;\n\n  SelectUserDirective = function($rootScope, $repo, $translate, lightboxService, lightboxKeyboardNavigationService, avatarService, projectService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var closeLightbox, confirmSelection, getFilteredUsers, roles, users;\n      users = [];\n      roles = [];\n      lightboxService.open($el);\n      getFilteredUsers = function(text) {\n        var _filterRows, available, collection, selected;\n        if (text == null) {\n          text = \"\";\n        }\n        selected = _.compact(_.sortBy(_.filter(users, function(x) {\n          return _.includes($scope.currentUsers, x.id);\n        }), 'name'));\n        _filterRows = function(text, row) {\n          var name;\n          if (row.type === 'user' && _.find(selected, ['id', row.id])) {\n            return false;\n          }\n          name = row.name.toUpperCase();\n          text = text.toUpperCase();\n          return _.includes(name, text);\n        };\n        collection = _.union(users, _.filter(roles, (function(_this) {\n          return function(role) {\n            var difference;\n            difference = _.difference(role.userIds, _.map(selected, 'id'));\n            return difference.length > 0;\n          };\n        })(this)));\n        available = _.sortBy(_.filter(collection, _.partial(_filterRows, text)), 'name');\n        if (!text) {\n          $scope.selected = selected;\n          return $scope.collection = _.union(selected, available);\n        } else {\n          $scope.selected = [];\n          return $scope.collection = available;\n        }\n      };\n      closeLightbox = function() {\n        lightboxKeyboardNavigationService.stop();\n        return lightboxService.close($el);\n      };\n      $scope.$on(\"watcher:add\", function(ctx, item) {\n        $scope.item = item;\n        getFilteredUsers();\n        return lightboxService.open($el).then(function() {\n          $el.find(\"input\").focus();\n          return lightboxKeyboardNavigationService.init($el);\n        });\n      });\n      $scope.$watch(\"activeUsers\", function(activeUsers) {\n        var project;\n        if (!activeUsers) {\n          return;\n        }\n        users = _.map(activeUsers, function(user) {\n          return {\n            id: user.id,\n            type: 'user',\n            name: user.full_name_display,\n            avatar: avatarService.getAvatar(user)\n          };\n        });\n        if ($scope.single) {\n          return;\n        }\n        project = projectService.project.toJS();\n        return roles = _.map(project.roles, function(role) {\n          var roleUsers, suffix;\n          roleUsers = _.filter(activeUsers, {\n            'role': role.id\n          });\n          suffix = $translate.instant(\"LIGHTBOX.SELECT_USER.ROLE\");\n          return {\n            id: role.id,\n            type: 'role',\n            name: suffix + \": \" + role.name,\n            avatar: null,\n            userIds: _.map(roleUsers, 'id'),\n            userNames: truncate('(' + _.join(_.map(roleUsers, 'full_name_display'), ', ') + ')', 110)\n          };\n        });\n      });\n      $scope.$watch(\"currentUsers\", function(currentUsers) {\n        if (!currentUsers) {\n          return;\n        }\n        return getFilteredUsers();\n      });\n      $scope.$watch(\"searchText\", function(searchingText) {\n        getFilteredUsers(searchingText);\n        return $el.find(\"input\").focus();\n      });\n      $scope.removeItem = function(user, $event) {\n        $event.preventDefault();\n        $event.stopPropagation();\n        $event.currentTarget.remove();\n        $scope.searchText = null;\n        _.pull($scope.currentUsers, user.id);\n        return getFilteredUsers();\n      };\n      $scope.addItem = function(item) {\n        if (item.type === 'user') {\n          if ($scope.currentUsers.includes(item.id)) {\n            return;\n          }\n          if ($scope.single) {\n            $scope.currentUsers = [item.id];\n            confirmSelection();\n            return;\n          }\n          $scope.currentUsers.push(item.id);\n        }\n        if (item.type === 'role') {\n          $scope.currentUsers = _.union($scope.currentUsers, item.userIds);\n        }\n        $scope.searchText = null;\n        return getFilteredUsers();\n      };\n      $scope.clearSearch = function() {\n        return $scope.searchText = '';\n      };\n      confirmSelection = function() {\n        $scope.loading = true;\n        $scope.onClose($scope.currentUsers);\n        closeLightbox();\n        return $scope.loading = false;\n      };\n      $el.on(\"click\", \".lb-select-user-confirm\", function(event) {\n        if ($scope.loading) {\n          return;\n        }\n        event.preventDefault();\n        return confirmSelection();\n      });\n      $el.on(\"click\", \".close\", function(event) {\n        event.preventDefault();\n        closeLightbox();\n        return $scope.$apply(function() {\n          return $scope.searchText = null;\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      templateUrl: \"components/lb-select-user/lb-select-user.html\",\n      link: link,\n      scope: true\n    };\n  };\n\n  SelectUserDirective.$inject = [\"$rootScope\", \"$tgRepo\", \"$translate\", \"lightboxService\", \"lightboxKeyboardNavigationService\", \"tgAvatarService\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLbSelectUser\", SelectUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementDirective;\n\n  LiveAnnouncementDirective = function(liveAnnouncementService) {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      restrict: \"AE\",\n      scope: {},\n      controllerAs: 'vm',\n      controller: function() {\n        this.close = function() {\n          return liveAnnouncementService.open = false;\n        };\n        return Object.defineProperties(this, {\n          open: {\n            get: function() {\n              return liveAnnouncementService.open;\n            }\n          },\n          title: {\n            get: function() {\n              return liveAnnouncementService.title;\n            }\n          },\n          desc: {\n            get: function() {\n              return liveAnnouncementService.desc;\n            }\n          }\n        });\n      },\n      link: link,\n      templateUrl: \"components/live-announcement/live-announcement.html\"\n    };\n  };\n\n  LiveAnnouncementDirective.$inject = [\"tgLiveAnnouncementService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgLiveAnnouncement\", LiveAnnouncementDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LiveAnnouncementService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  LiveAnnouncementService = (function(superClass) {\n    extend(LiveAnnouncementService, superClass);\n\n    function LiveAnnouncementService() {\n      this.open = false;\n      this.title = \"\";\n      this.desc = \"\";\n    }\n\n    LiveAnnouncementService.prototype.show = function(title, desc) {\n      this.open = true;\n      this.title = title;\n      return this.desc = desc;\n    };\n\n    return LiveAnnouncementService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaComponents\").service(\"tgLiveAnnouncementService\", LiveAnnouncementService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintLightboxController, module;\n\n  module = angular.module(\"taigaComponents\");\n\n  MoveToSprintLightboxController = (function() {\n    MoveToSprintLightboxController.$inject = ['$rootScope', '$scope', '$tgResources', 'tgProjectService', '$translate', 'lightboxService', '$tgConfirm', '$q'];\n\n    function MoveToSprintLightboxController(rootScope, scope, rs, projectService, translate, lightboxService, confirm, q) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.rs = rs;\n      this.projectService = projectService;\n      this.translate = translate;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.q = q;\n      this.projectId = this.projectService.project.get('id');\n      this.loading = false;\n      this.someSelected = false;\n      this.selectedSprintId = null;\n      this.typesSelected = {\n        uss: false,\n        tasks: false,\n        issues: false\n      };\n      this.itemsToMove = {};\n      this._loadSprints();\n      this.scope.$watch(\"vm.openItems\", (function(_this) {\n        return function(openItems) {\n          if (!openItems) {\n            return;\n          }\n          return _this._init(openItems);\n        };\n      })(this));\n    }\n\n    MoveToSprintLightboxController.prototype._init = function(openItems) {\n      var ref, ref1, ref2;\n      this.hasManyItemTypes = _.size(this.openItems) > 1;\n      this.ussCount = parseInt((ref = openItems.uss) != null ? ref.length : void 0);\n      this.updateSelected('uss', this.ussCount > 0);\n      this.tasksCount = parseInt((ref1 = openItems.tasks) != null ? ref1.length : void 0);\n      this.updateSelected('tasks', this.tasksCount > 0);\n      this.issuesCount = parseInt((ref2 = openItems.issues) != null ? ref2.length : void 0);\n      return this.updateSelected('issues', this.issuesCount > 0);\n    };\n\n    MoveToSprintLightboxController.prototype._loadSprints = function() {\n      return this.rs.sprints.list(this.projectId, {\n        closed: false\n      }).then((function(_this) {\n        return function(data) {\n          return _this.sprints = _.filter(data.milestones, function(x) {\n            return x.id !== _this.sprint.id;\n          });\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.updateSelected = function(itemType, value) {\n      this.typesSelected[itemType] = value;\n      this.someSelected = _.some(this.typesSelected);\n      if (value === true) {\n        return this.itemsToMove[itemType] = this.openItems[itemType];\n      } else if (this.itemsToMove[itemType]) {\n        return delete this.itemsToMove[itemType];\n      }\n    };\n\n    MoveToSprintLightboxController.prototype.submit = function() {\n      var itemsNotMoved;\n      itemsNotMoved = {};\n      _.map(this.openItems, (function(_this) {\n        return function(itemsList, itemsType) {\n          if (!_this.itemsToMove[itemsType]) {\n            return itemsNotMoved[itemsType] = true;\n          }\n        };\n      })(this));\n      this.loading = true;\n      return this.moveItems().then((function(_this) {\n        return function() {\n          _this.rootScope.$broadcast(\"taskboard:items:move\", _this.typesSelected);\n          _this.lightboxService.closeAll();\n          _this.loading = false;\n          if (_.size(itemsNotMoved) > 0) {\n            return _this.displayWarning(itemsNotMoved);\n          }\n        };\n      })(this));\n    };\n\n    MoveToSprintLightboxController.prototype.moveItems = function() {\n      var promises;\n      promises = [];\n      if (this.itemsToMove.uss) {\n        promises.push(this.rs.sprints.moveUserStoriesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.uss));\n      }\n      if (this.itemsToMove.tasks) {\n        promises.push(this.rs.sprints.moveTasksMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.tasks));\n      }\n      if (this.itemsToMove.issues) {\n        promises.push(this.rs.sprints.moveIssuesMilestone(this.sprint.id, this.projectId, this.selectedSprintId, this.itemsToMove.issues));\n      }\n      return this.q.all(promises);\n    };\n\n    MoveToSprintLightboxController.prototype.displayWarning = function(itemsNotMoved) {\n      var action, desc, ref, title, totalItemsMoved;\n      action = this.translate.instant('COMMON.I_GET_IT');\n      if (_.size(itemsNotMoved) === 1 && itemsNotMoved.issues === true) {\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED_TITLE');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_ISSUES_NOT_MOVED');\n      } else {\n        totalItemsMoved = 0;\n        _.map(this.itemsToMove, function(itemsList, itemsType) {\n          return totalItemsMoved += itemsList.length;\n        });\n        title = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN_TITLE', {\n          total: totalItemsMoved\n        }, 'messageformat');\n        desc = this.translate.instant('TASKBOARD.MOVE_TO_SPRINT.WARNING_SPRINT_STILL_OPEN', {\n          sprintName: (ref = this.sprint) != null ? ref.name : void 0\n        });\n      }\n      return this.confirm.success(title, desc, null, action);\n    };\n\n    return MoveToSprintLightboxController;\n\n  })();\n\n  module.controller(\"MoveToSprintLbCtrl\", MoveToSprintLightboxController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintLightboxDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintLightboxDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        openItems: \"=\",\n        sprint: \"=\"\n      },\n      templateUrl: \"components/move-to-sprint/move-to-sprint-lb/move-to-sprint-lb.html\",\n      controller: \"MoveToSprintLbCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  moveToSprintLightboxDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgLbMoveToSprint\", moveToSprintLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MoveToSprintController, taiga;\n\n  taiga = this.taiga;\n\n  MoveToSprintController = (function() {\n    MoveToSprintController.$inject = ['$scope', 'tgLightboxFactory', 'tgProjectService'];\n\n    function MoveToSprintController(scope, lightboxFactory, projectService) {\n      this.scope = scope;\n      this.lightboxFactory = lightboxFactory;\n      this.projectService = projectService;\n      this.permissions = this.projectService.project.get('my_permissions');\n      this.hasOpenItems = false;\n      this.disabled = false;\n      this.openItems = {\n        uss: [],\n        tasks: [],\n        issues: []\n      };\n      this.scope.$watch(\"vm.uss\", (function(_this) {\n        return function() {\n          return _this.getOpenUss();\n        };\n      })(this));\n      this.scope.$watch(\"vm.unnasignedTasks\", (function(_this) {\n        return function() {\n          return _this.getOpenStorylessTasks();\n        };\n      })(this));\n      this.scope.$watch(\"vm.issues\", (function(_this) {\n        return function() {\n          return _this.getOpenIssues();\n        };\n      })(this));\n    }\n\n    MoveToSprintController.prototype.checkOpenItems = function() {\n      return _.some(Object.keys(this.openItems), (function(_this) {\n        return function(x) {\n          return _this.openItems[x].length > 0;\n        };\n      })(this));\n    };\n\n    MoveToSprintController.prototype.openLightbox = function() {\n      var openItems;\n      if (this.disabled === !true && this.hasOpenItems) {\n        openItems = {};\n        _.map(this.openItems, function(itemsList, itemsType) {\n          if (itemsList.length) {\n            return openItems[itemsType] = itemsList;\n          }\n        });\n        return this.lightboxFactory.create('tg-lb-move-to-sprint', {\n          \"class\": \"lightbox lightbox-move-to-sprint\",\n          \"sprint\": \"sprint\",\n          \"open-items\": \"openItems\"\n        }, {\n          sprint: this.sprint,\n          openItems: openItems\n        });\n      }\n    };\n\n    MoveToSprintController.prototype.getOpenUss = function() {\n      if (!this.uss || this.permissions.indexOf(\"modify_us\") === -1) {\n        return;\n      }\n      this.openItems.uss = [];\n      this.uss.map((function(_this) {\n        return function(us) {\n          if (us.is_closed === false) {\n            return _this.openItems.uss.push({\n              us_id: us.id,\n              order: us.sprint_order\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenStorylessTasks = function() {\n      if (!this.unnasignedTasks || this.permissions.indexOf(\"modify_task\") === -1) {\n        return;\n      }\n      this.openItems.tasks = [];\n      this.unnasignedTasks.map((function(_this) {\n        return function(column) {\n          return column.map(function(taskId) {\n            var task;\n            task = _this.taskMap.get(taskId);\n            if (task.get('model').get('is_closed') === false) {\n              return _this.openItems.tasks.push({\n                task_id: task.get('model').get('id'),\n                order: task.get('model').get('taskboard_order')\n              });\n            }\n          });\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    MoveToSprintController.prototype.getOpenIssues = function() {\n      if (!this.issues || this.permissions.indexOf(\"modify_issue\") === -1) {\n        return;\n      }\n      this.openItems.issues = [];\n      this.issues.map((function(_this) {\n        return function(issue) {\n          if (issue.get('status').get('is_closed') === false) {\n            return _this.openItems.issues.push({\n              issue_id: issue.get('id')\n            });\n          }\n        };\n      })(this));\n      return this.hasOpenItems = this.checkOpenItems();\n    };\n\n    return MoveToSprintController;\n\n  })();\n\n  angular.module('taigaComponents').controller('MoveToSprintCtrl', MoveToSprintController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, moveToSprintDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  moveToSprintDirective = function(taskboardTasksService) {\n    return {\n      controller: \"MoveToSprintCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: 'components/move-to-sprint/move-to-sprint.html',\n      scope: {\n        sprint: '=',\n        uss: '=',\n        unnasignedTasks: '=',\n        issues: '=',\n        disabled: '=',\n        taskMap: '='\n      }\n    };\n  };\n\n  moveToSprintDirective.$inject = ['tgTaskboardTasks'];\n\n  module.directive('tgMoveToSprint', [moveToSprintDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoBigSrcDirective;\n\n  ProjectLogoBigSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_big_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoBigSrc\"\n      }\n    };\n  };\n\n  ProjectLogoBigSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoBigSrc\", ProjectLogoBigSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoSmallSrcDirective;\n\n  ProjectLogoSmallSrcDirective = function(projectLogoService) {\n    var link;\n    link = function(scope, el, attrs) {\n      return scope.$watch('project', function(project) {\n        var logo, projectLogo;\n        project = Immutable.fromJS(project);\n        if (!project) {\n          return;\n        }\n        projectLogo = project.get('logo_small_url');\n        if (projectLogo) {\n          el.attr('src', projectLogo);\n          return el.css('background', \"\");\n        } else {\n          logo = projectLogoService.getDefaultProjectLogo(project.get('slug'), project.get('id'));\n          el.attr('src', logo.src);\n          return el.css('background', logo.color);\n        }\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        project: \"=tgProjectLogoSmallSrc\"\n      }\n    };\n  };\n\n  ProjectLogoSmallSrcDirective.$inject = [\"tgProjectLogoService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectLogoSmallSrc\", ProjectLogoSmallSrcDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuController;\n\n  ProjectMenuController = (function() {\n    ProjectMenuController.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n    function ProjectMenuController(projectService, lightboxFactory) {\n      this.projectService = projectService;\n      this.lightboxFactory = lightboxFactory;\n      this.project = null;\n      this.menu = Immutable.Map();\n    }\n\n    ProjectMenuController.prototype.show = function() {\n      var ref;\n      this.project = this.projectService.project;\n      this.sprints = (ref = this.project.get('milestones')) != null ? ref.toJS() : void 0;\n      this.active = this._getActiveSection();\n      this.projectMenu = {\n        component: 'tg-project-navigation',\n        params: {\n          project: this.projectService.project.toJS()\n        },\n        events: {\n          search: (function(_this) {\n            return function() {\n              return _this.search();\n            };\n          })(this)\n        }\n      };\n      this._setVideoConference();\n      return this._setMenuPermissions();\n    };\n\n    ProjectMenuController.prototype.hide = function() {\n      this.project = null;\n      return this.menu = {};\n    };\n\n    ProjectMenuController.prototype.search = function() {\n      return this.lightboxFactory.create(\"tg-search-box\", {\n        \"class\": \"lightbox lightbox-search\"\n      });\n    };\n\n    ProjectMenuController.prototype._setVideoConference = function() {\n      var videoconferenceUrl;\n      videoconferenceUrl = this._videoConferenceUrl();\n      if (videoconferenceUrl) {\n        return this.project = this.project.set(\"videoconferenceUrl\", videoconferenceUrl);\n      }\n    };\n\n    ProjectMenuController.prototype._setMenuPermissions = function() {\n      this.menu = Immutable.Map({\n        epics: false,\n        backlog: false,\n        kanban: false,\n        issues: false,\n        wiki: false\n      });\n      if (this.project.get(\"is_epics_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_epics\") !== -1) {\n        this.menu = this.menu.set(\"epics\", true);\n      }\n      if (this.project.get(\"is_backlog_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"backlog\", true);\n      }\n      if (this.project.get(\"is_kanban_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_us\") !== -1) {\n        this.menu = this.menu.set(\"kanban\", true);\n      }\n      if (this.project.get(\"is_issues_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_issues\") !== -1) {\n        this.menu = this.menu.set(\"issues\", true);\n      }\n      if (this.project.get(\"is_wiki_activated\") && this.project.get(\"my_permissions\").indexOf(\"view_wiki_pages\") !== -1) {\n        return this.menu = this.menu.set(\"wiki\", true);\n      }\n    };\n\n    ProjectMenuController.prototype._getActiveSection = function() {\n      var indexBacklog, indexKanban, oldSectionName, sectionName, sectionsBreadcrumb;\n      sectionName = this.projectService.section;\n      sectionsBreadcrumb = this.projectService.sectionsBreadcrumb;\n      indexBacklog = sectionsBreadcrumb.lastIndexOf(\"backlog\");\n      indexKanban = sectionsBreadcrumb.lastIndexOf(\"kanban\");\n      if (indexBacklog !== -1 || indexKanban !== -1) {\n        if (indexKanban === -1 || indexBacklog > indexKanban) {\n          oldSectionName = \"backlog\";\n        } else {\n          oldSectionName = \"kanban\";\n        }\n      }\n      if (sectionName === \"backlog-kanban\") {\n        if (oldSectionName === \"backlog\" || oldSectionName === \"kanban\") {\n          sectionName = oldSectionName;\n        } else if (this.project.get(\"is_backlog_activated\") && !this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"backlog\";\n        } else if (!this.project.get(\"is_backlog_activated\") && this.project.get(\"is_kanban_activated\")) {\n          sectionName = \"kanban\";\n        }\n      }\n      return sectionName;\n    };\n\n    ProjectMenuController.prototype._videoConferenceUrl = function() {\n      var baseUrl, url;\n      if (this.project.get(\"videoconferences\") === \"whereby-com\") {\n        baseUrl = \"https://whereby.com/\";\n      } else if (this.project.get(\"videoconferences\") === \"talky\") {\n        baseUrl = \"https://talky.io/\";\n      } else if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        baseUrl = \"https://meet.jit.si/\";\n      } else if (this.project.get(\"videoconferences\") === \"custom\") {\n        return this.project.get(\"videoconferences_extra_data\");\n      } else {\n        return \"\";\n      }\n      if (this.project.get(\"videoconferences_extra_data\")) {\n        url = this.project.get(\"slug\") + \"-\" + taiga.slugify(this.project.get(\"videoconferences_extra_data\"));\n      } else {\n        url = this.project.get(\"slug\");\n      }\n      if (this.project.get(\"videoconferences\") === \"jitsi\") {\n        url = url.replace(/-/g, \"\");\n      }\n      return baseUrl + url;\n    };\n\n    return ProjectMenuController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectMenu\", ProjectMenuController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectMenuDirective, taiga;\n\n  taiga = this.taiga;\n\n  ProjectMenuDirective = function(projectService, lightboxFactory) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var fixed, projectChange, topBarHeight;\n      projectChange = function() {\n        if (projectService.project) {\n          return ctrl.show();\n        } else {\n          return ctrl.hide();\n        }\n      };\n      scope.$watch((function() {\n        return projectService.project;\n      }), projectChange);\n      fixed = false;\n      topBarHeight = 48;\n      return window.addEventListener(\"scroll\", function() {\n        var position;\n        position = $(window).scrollTop();\n        if (position > topBarHeight && fixed === false) {\n          el.find('.sticky-project-menu').addClass('unblock');\n          return fixed = true;\n        } else if (position === 0 && fixed === true) {\n          el.find('.sticky-project-menu').removeClass('unblock');\n          return fixed = false;\n        }\n      });\n    };\n    return {\n      scope: {},\n      controller: \"ProjectMenu\",\n      controllerAs: \"vm\",\n      templateUrl: \"components/project-menu/project-menu.html\",\n      link: link\n    };\n  };\n\n  ProjectMenuDirective.$inject = [\"tgProjectService\", \"tgLightboxFactory\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgProjectMenu\", ProjectMenuDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PromoteToUsButtonDirective;\n\n  PromoteToUsButtonDirective = function($rootScope, $rs, $confirm, $translate) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var itemType, save;\n      itemType = null;\n      save = function(item, askResponse) {\n        var data, onError, onSuccess;\n        data = {\n          project: item.project\n        };\n        onSuccess = function(response) {\n          askResponse.finish();\n          $confirm.notify(\"success\");\n          return $rootScope.$broadcast(\"promote-\" + itemType + \"-to-us:success\", response.data[0]);\n        };\n        onError = function() {\n          askResponse.finish();\n          return $confirm.notify(\"error\");\n        };\n        return $rs[item._name].promoteToUserStory(item.id, item.project).then(onSuccess, onError);\n      };\n      $el.on(\"click\", \".promote-button\", function(event) {\n        var ctx, item, message, subtitle, title;\n        event.preventDefault();\n        item = $model.$modelValue;\n        itemType = _.get({\n          tasks: 'task',\n          issues: 'issue'\n        }, item._name);\n        ctx = \"COMMON.CONFIRM_PROMOTE.\" + (itemType.toUpperCase());\n        title = $translate.instant(ctx + \".TITLE\");\n        message = $translate.instant(ctx + \".MESSAGE\");\n        subtitle = item.subject;\n        return $confirm.ask(title, subtitle, message).then(function(response) {\n          return save(item, response);\n        });\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      require: \"ngModel\",\n      templateUrl: \"components/promote-to-us/promote-to-us.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgPromoteToUsButton\", [\"$rootScope\", \"$tgResources\", \"$tgConfirm\", \"$translate\", PromoteToUsButtonDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var groupBy, module, normalizeString, searchListDirective;\n\n  module = angular.module(\"taigaComponents\");\n\n  normalizeString = this.taiga.normalizeString;\n\n  groupBy = this.taiga.groupBy;\n\n  searchListDirective = function($translate) {\n    var link;\n    link = function(scope, el, attrs, model) {\n      var avaliableItems, filtering, isContainedIn, itemsById, parseString, resetAll, resetSelected;\n      scope.templateUrl = \"components/search-list/search-list-\" + scope.itemType + \"-choice.html\";\n      scope.currentSelected = null;\n      filtering = false;\n      avaliableItems = [];\n      itemsById = {};\n      if (scope.itemType === 'issue') {\n        scope.milestonesById = groupBy(scope.project.milestones, function(e) {\n          return e.id;\n        });\n      }\n      if (scope.filterClosed) {\n        scope.showClosed = false;\n        if (scope.itemType === 'sprint') {\n          scope.textShowClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_SHOW_CLOSED_SPRINTS\");\n          scope.textHideClosed = $translate.instant(\"BACKLOG.SPRINTS.ACTION_HIDE_CLOSED_SPRINTS\");\n        }\n      }\n      el.on(\"click\", \".choice\", function(event) {\n        var choiceId, ref, value;\n        choiceId = parseInt($(event.currentTarget).data(\"choice-id\"));\n        value = ((ref = attrs.ngModel) != null ? ref.id : void 0) !== choiceId ? itemsById[choiceId] : null;\n        model.$setViewValue(value);\n        scope.currentSelected = value;\n        return scope.$apply();\n      });\n      isContainedIn = function(needle, haystack) {\n        return _.includes(parseString(haystack), parseString(needle));\n      };\n      parseString = function(value) {\n        if (typeof value !== 'string') {\n          value = value.toString();\n        }\n        return normalizeString(value.toUpperCase());\n      };\n      resetSelected = function() {\n        scope.currentSelected = null;\n        return model.$setViewValue(null);\n      };\n      resetAll = function() {\n        resetSelected();\n        scope.searchText = '';\n        avaliableItems = angular.copy(scope.items);\n        return itemsById = groupBy(avaliableItems, function(x) {\n          return x.id;\n        });\n      };\n      scope.isVisible = function(item) {\n        var ref;\n        if (!scope.filterClosed || scope.showClosed) {\n          return true;\n        }\n        if (scope.itemType === 'sprint' && (item.closed || item.is_closed)) {\n          if (((ref = scope.currentSelected) != null ? ref.id : void 0) === item.id) {\n            resetSelected();\n          }\n          return false;\n        }\n        return true;\n      };\n      scope.toggleShowClosed = function(item) {\n        return scope.showClosed = !scope.showClosed;\n      };\n      scope.filterItems = function(searchText) {\n        scope.filtering = true;\n        scope.items = _.filter(avaliableItems, function(item) {\n          var itemAttrs;\n          itemAttrs = item.getAttrs();\n          if (Array.isArray(scope.filterBy)) {\n            return _.some(scope.filterBy, function(attr) {\n              return isContainedIn(searchText, itemAttrs[attr]);\n            });\n          } else {\n            return isContainedIn(searchText, itemAttrs[scope.filterBy]);\n          }\n        });\n        if (!_.find(scope.items, scope.currentSelected)) {\n          return resetSelected();\n        }\n      };\n      return scope.$watch('items', function(items) {\n        if (!scope.filtering && items) {\n          return resetAll();\n        }\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/search-list/search-list.html\",\n      require: \"ngModel\",\n      scope: {\n        label: '@',\n        placeholder: '@',\n        project: '=',\n        filterBy: '=',\n        items: '=',\n        itemType: '@',\n        filterClosed: '=',\n        itemDisabled: '='\n      }\n    };\n  };\n\n  module.directive('tgSearchList', ['$translate', searchListDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SwimlaneSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  SwimlaneSelector = function($timeout, $translate) {\n    var link;\n    link = function(scope, el, attrs) {\n      var getCurrentSwimlane, getSelectedSwimlane, mount;\n      scope.displaySelector = false;\n      scope.selectedSwimlane = null;\n      timeout = null;\n      mount = function() {\n        return getCurrentSwimlane();\n      };\n      getCurrentSwimlane = function() {\n        var filteredSwimlanes;\n        if (scope.userStory.id) {\n          if (scope.userStory.swimlane) {\n            filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n              return swimlane.id === scope.userStory.swimlane;\n            });\n            scope.currentSwimlane = filteredSwimlanes.get(0);\n          } else {\n            scope.currentSwimlane = null;\n          }\n        } else {\n          filteredSwimlanes = scope.swimlanes.filter(function(swimlane) {\n            return swimlane.id === scope.defaultSwimlaneId;\n          });\n          scope.currentSwimlane = filteredSwimlanes.get(0);\n        }\n        return getSelectedSwimlane();\n      };\n      getSelectedSwimlane = function() {\n        if (scope.userStory.id) {\n          if (scope.currentSwimlane) {\n            return scope.selectedSwimlane = scope.currentSwimlane.id;\n          } else {\n            return scope.selectedSwimlane = null;\n          }\n        } else {\n          return scope.selectedSwimlane = scope.currentSwimlane.id;\n        }\n      };\n      scope.displayOptions = function() {\n        if (timeout) {\n          $timeout.cancel(timeout);\n          timeout = null;\n        }\n        return scope.displaySelector = true;\n      };\n      scope.hideOptions = function() {\n        return timeout = $timeout((function() {\n          return scope.displaySelector = false;\n        }), 100);\n      };\n      scope.selectSwimlane = function(swimlane) {\n        if (swimlane === 'noSwimlane') {\n          swimlane = {\n            id: null,\n            kanban_order: 1,\n            name: $translate.instant(\"KANBAN.UNCLASSIFIED_USER_STORIES\")\n          };\n          scope.ngModel = swimlane.id;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        } else {\n          scope.ngModel = swimlane.id !== -1 ? swimlane.id : null;\n          scope.currentSwimlane = swimlane;\n          scope.hideOptions();\n        }\n        return getSelectedSwimlane();\n      };\n      scope.$watch('userStory', function(userStory) {\n        return getCurrentSwimlane();\n      });\n      return mount();\n    };\n    return {\n      link: link,\n      templateUrl: \"components/swimlane-selector/swimlane-selector.html\",\n      scope: {\n        swimlanes: '<',\n        defaultSwimlaneId: '<',\n        userStory: '<',\n        hasUnclassifiedStories: '<',\n        ngModel: '='\n      },\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgSwimlaneSelector\", ['$timeout', \"$translate\", SwimlaneSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagOptionDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagOptionDirective = function() {\n    var dispatch, link, select, stop;\n    select = function(selected) {\n      var containerHeight, diff, selectedPosition;\n      selected.addClass('selected');\n      selectedPosition = selected.position().top + selected.outerHeight();\n      containerHeight = selected.parent().outerHeight();\n      if (selectedPosition > containerHeight) {\n        diff = selectedPosition - containerHeight;\n        return selected.parent().scrollTop(selected.parent().scrollTop() + diff);\n      } else if (selected.position().top < 0) {\n        return selected.parent().scrollTop(selected.parent().scrollTop() + selected.position().top);\n      }\n    };\n    dispatch = function(el, code, scope) {\n      var activeElement, next, prev;\n      activeElement = el.find(\".selected\");\n      if (code === 40) {\n        if (!activeElement.length) {\n          return select(el.find('li:first'));\n        } else {\n          next = activeElement.next('li');\n          if (next.length) {\n            activeElement.removeClass('selected');\n            return select(next);\n          }\n        }\n      } else if (code === 38) {\n        if (!activeElement.length) {\n          return select(el.find('li:last'));\n        } else {\n          prev = activeElement.prev('li');\n          if (prev.length) {\n            activeElement.removeClass('selected');\n            return select(prev);\n          }\n        }\n      }\n    };\n    stop = function() {\n      return $(document).off(\".tags-keyboard-navigation\");\n    };\n    link = function(scope, el) {\n      stop();\n      $(el).parent().on(\"keydown.tags-keyboard-navigation\", (function(_this) {\n        return function(event) {\n          var code;\n          code = event.keyCode ? event.keyCode : event.which;\n          if (code === 40 || code === 38) {\n            event.preventDefault();\n            return dispatch(el, code, scope);\n          }\n        };\n      })(this));\n      return scope.$on(\"$destroy\", stop);\n    };\n    return {\n      link: link,\n      templateUrl: \"components/tags/tag-dropdown/tag-dropdown.html\",\n      scope: {\n        onSelectTag: \"&\",\n        colorArray: \"=\",\n        tag: \"=\"\n      }\n    };\n  };\n\n  module.directive(\"tgTagsDropdown\", TagOptionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonController = (function() {\n    TagLineCommonController.$inject = [\"tgTagLineService\"];\n\n    function TagLineCommonController(tagLineService) {\n      this.tagLineService = tagLineService;\n      this.disableColorSelection = false;\n      this.newTag = {\n        name: \"\",\n        color: null\n      };\n      this.colorArray = [];\n      this.addTag = false;\n    }\n\n    TagLineCommonController.prototype.checkPermissions = function() {\n      var hasPermissions;\n      hasPermissions = this.tagLineService.checkPermissions(this.project.my_permissions, this.permissions);\n      return hasPermissions;\n    };\n\n    TagLineCommonController.prototype._createColorsArray = function(projectTagColors) {\n      return this.colorArray = this.tagLineService.createColorsArray(projectTagColors);\n    };\n\n    TagLineCommonController.prototype.displayTagInput = function() {\n      return this.addTag = true;\n    };\n\n    TagLineCommonController.prototype.addNewTag = function(name, color) {\n      this.newTag.name = \"\";\n      this.newTag.color = null;\n      if (!name.length) {\n        return;\n      }\n      if (this.disableColorSelection) {\n        if (name.length) {\n          return this.onAddTag({\n            name: name,\n            color: color\n          });\n        }\n      } else {\n        if (this.project.tags_colors[name]) {\n          color = this.project.tags_colors[name];\n        }\n        return this.onAddTag({\n          name: name,\n          color: color\n        });\n      }\n    };\n\n    TagLineCommonController.prototype.selectColor = function(color) {\n      return this.newTag.color = color;\n    };\n\n    return TagLineCommonController;\n\n  })();\n\n  module.controller(\"TagLineCommonCtrl\", TagLineCommonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineCommonDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineCommonDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      var unwatch;\n      if (!_.isUndefined(attr.disableColorSelection)) {\n        ctrl.disableColorSelection = true;\n      }\n      unwatch = scope.$watch(\"vm.project\", function(project) {\n        if (!project || !Object.keys(project).length) {\n          return;\n        }\n        unwatch();\n        if (!ctrl.disableColorSelection) {\n          return ctrl.colorArray = ctrl._createColorsArray(ctrl.project.tags_colors);\n        }\n      });\n      return el.on(\"keydown\", \".tag-input\", function(event) {\n        var tagName;\n        if (event.keyCode === 27) {\n          ctrl.addTag = false;\n          ctrl.newTag.name = \"\";\n          ctrl.newTag.color = \"\";\n          event.stopPropagation();\n        } else if (event.keyCode === 13) {\n          event.preventDefault();\n          if (el.find('.tags-dropdown .selected').length) {\n            tagName = $('.tags-dropdown .selected .tags-dropdown-name').text();\n            ctrl.addNewTag(tagName, null);\n          } else {\n            ctrl.addNewTag(ctrl.newTag.name, ctrl.newTag.color);\n          }\n        }\n        return scope.$apply();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        permissions: \"@\",\n        loadingAddTag: \"=\",\n        loadingRemoveTag: \"=\",\n        tags: \"=\",\n        project: \"=\",\n        onAddTag: \"&\",\n        onDeleteTag: \"&\"\n      },\n      templateUrl: \"components/tags/tag-line-common/tag-line-common.html\",\n      controller: \"TagLineCommonCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLineCommon\", TagLineCommonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineController, module, trim;\n\n  trim = this.taiga.trim;\n\n  module = angular.module('taigaCommon');\n\n  TagLineController = (function() {\n    TagLineController.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgQueueModelTransformation\"];\n\n    function TagLineController(rootScope, confirm, modelTransform) {\n      this.rootScope = rootScope;\n      this.confirm = confirm;\n      this.modelTransform = modelTransform;\n      this.loadingAddTag = false;\n    }\n\n    TagLineController.prototype.onDeleteTag = function(tag) {\n      var onDeleteTagError, onDeleteTagSuccess, tagName, transform;\n      this.loadingRemoveTag = tag[0];\n      onDeleteTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.loadingRemoveTag = false;\n          return item;\n        };\n      })(this);\n      onDeleteTagError = (function(_this) {\n        return function() {\n          _this.confirm.notify(\"error\");\n          return _this.loadingRemoveTag = false;\n        };\n      })(this);\n      tagName = trim(tag[0].toLowerCase());\n      transform = this.modelTransform.save(function(item) {\n        var itemtags;\n        itemtags = _.clone(item.tags);\n        _.remove(itemtags, function(tag) {\n          return tag[0] === tagName;\n        });\n        item.tags = itemtags;\n        return item;\n      });\n      return transform.then(onDeleteTagSuccess, onDeleteTagError);\n    };\n\n    TagLineController.prototype.onAddTag = function(tag, color) {\n      var onAddTagError, onAddTagSuccess, transform;\n      this.loadingAddTag = true;\n      onAddTagSuccess = (function(_this) {\n        return function(item) {\n          _this.rootScope.$broadcast(\"object:updated\");\n          _this.rootScope.$broadcast(\"tags:updated\");\n          _this.addTag = false;\n          _this.loadingAddTag = false;\n          return item;\n        };\n      })(this);\n      onAddTagError = (function(_this) {\n        return function() {\n          _this.loadingAddTag = false;\n          return _this.confirm.notify(\"error\");\n        };\n      })(this);\n      transform = this.modelTransform.save((function(_this) {\n        return function(item) {\n          var itemtags, value;\n          value = trim(tag.toLowerCase());\n          itemtags = _.clone(item.tags);\n          itemtags.push([tag, color]);\n          item.tags = itemtags;\n          return item;\n        };\n      })(this));\n      return transform.then(onAddTagSuccess, onAddTagError);\n    };\n\n    return TagLineController;\n\n  })();\n\n  module.controller(\"TagLineCtrl\", TagLineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagLineDirective = function() {\n    return {\n      scope: {\n        item: \"=\",\n        permissions: \"@\",\n        project: \"=\"\n      },\n      templateUrl: \"components/tags/tag-line-detail/tag-line-detail.html\",\n      controller: \"TagLineCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true\n    };\n  };\n\n  module.directive(\"tgTagLine\", TagLineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagLineService, module,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  module = angular.module('taigaCommon');\n\n  TagLineService = (function(superClass) {\n    extend(TagLineService, superClass);\n\n    TagLineService.$inject = [];\n\n    function TagLineService() {}\n\n    TagLineService.prototype.checkPermissions = function(myPermissions, projectPermissions) {\n      return _.includes(myPermissions, projectPermissions);\n    };\n\n    TagLineService.prototype.createColorsArray = function(projectTagColors) {\n      return _.map(projectTagColors, function(index, value) {\n        return [value, index];\n      });\n    };\n\n    return TagLineService;\n\n  })(taiga.Service);\n\n  module.service(\"tgTagLineService\", TagLineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TagDirective, module;\n\n  module = angular.module('taigaCommon');\n\n  TagDirective = function() {\n    return {\n      templateUrl: \"components/tags/tag/tag.html\",\n      scope: {\n        tag: \"<\",\n        loadingRemoveTag: \"<\",\n        onDeleteTag: \"&\",\n        hasPermissions: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgTag\", TagDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TaskboardZoomDirective;\n\n  TaskboardZoomDirective = function(storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getZoomView, zooms;\n      scope.zoomIndex = storage.get(\"taskboard_zoom\", 2);\n      scope.levels = 4;\n      zooms = [[\"assigned_to\", \"ref\"], [\"subject\"], [\"tags\", \"extra_info\", \"unfold\", \"card-data\", \"assigned_to_extended\"], [\"related_tasks\", \"attachments\"]];\n      getZoomView = function(zoomIndex) {\n        if (zoomIndex == null) {\n          zoomIndex = 0;\n        }\n        zoomIndex = Number(zoomIndex);\n        if (Number(storage.get(\"taskboard_zoom\")) !== zoomIndex) {\n          storage.set(\"taskboard_zoom\", zoomIndex);\n        }\n        return _.reduce(zooms, function(result, value, key) {\n          if (key <= zoomIndex) {\n            result = result.concat(value);\n          }\n          return result;\n        });\n      };\n      return scope.$watch('zoomIndex', function(zoomLevel) {\n        var zoom;\n        zoom = getZoomView(zoomLevel);\n        return scope.onZoomChange({\n          zoomLevel: zoomLevel,\n          zoom: zoom\n        });\n      });\n    };\n    return {\n      scope: {\n        onZoomChange: \"&\"\n      },\n      template: \"<tg-board-zoom\\n    levels=\\\"levels\\\"\\n    class=\\\"board-zoom\\\"\\n    value=\\\"zoomIndex\\\"\\n></tg-board-zoom>\",\n      link: link\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgTaskboardZoom\", [\"$tgStorage\", TaskboardZoomDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TasksSortableDirective;\n\n  TasksSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_task\")) {\n        return;\n      }\n      callback = $parse(attrs.tgTasksSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.single-related-task.js-related-task');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, task;\n        itemEl = $(item);\n        task = itemEl.scope().task;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            task: task,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  TasksSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTasksSortable\", TasksSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TermsOfServiceAndPrivacyPolicyNoticeDirective;\n\n  TermsOfServiceAndPrivacyPolicyNoticeDirective = function($config) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.privacyPolicyUrl = $config.get(\"privacyPolicyUrl\");\n      scope.termsOfServiceUrl = $config.get(\"termsOfServiceUrl\");\n      scope.target = false;\n      if (!scope.privacyPolicyUrl || !scope.termsOfServiceUrl) {\n        scope.target = true;\n      }\n      return el.on(\"change\", \"input[name='accepted_terms']\", function(event) {\n        var target;\n        target = angular.element(event.currentTarget);\n        scope.target = target.is(\":checked\");\n        return scope.$apply();\n      });\n    };\n    return {\n      restrict: \"AE\",\n      link: link,\n      scope: {\n        target: \"=\"\n      },\n      templateUrl: \"components/terms-of-service-and-privacy-policy-notice/terms-of-service-and-privacy-policy-notice.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgTermsOfServiceAndPrivacyPolicyNotice\", [\"$tgConfig\", TermsOfServiceAndPrivacyPolicyNoticeDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedToDirective;\n\n  AssignedToDirective = function($rootscope, $confirm, $repo, $loading, $modelTransform, $template, $translate, $compile, $currentUserService, avatarService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, isEditable, isIocaine, isSelfAssigned, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      isIocaine = function(item) {\n        return item != null ? item.is_iocaine : void 0;\n      };\n      isSelfAssigned = function() {\n        return $scope.assignedUser && $scope.assignedUser.id === currentUserId;\n      };\n      save = function(userId) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_to = userId;\n          return item;\n        });\n        transform.then(function(item) {\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n        return transform;\n      };\n      render = function(item) {\n        $scope.assignedUser = $scope.usersById[item != null ? item.assigned_to : void 0];\n        $scope.isEditable = isEditable();\n        $scope.isIocaine = isIocaine(item);\n        return $scope.isSelfAssigned = isSelfAssigned();\n      };\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        title = $translate.instant(\"COMMON.ASSIGNED_TO.CONFIRM_UNASSIGNED\");\n        return $confirm.ask(title).then(function(response) {\n          response.finish();\n          return save(null);\n        });\n      });\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers.pop() || null);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": [item.assigned_to],\n          \"activeUsers\": this.activeUsers,\n          \"onClose\": onClose,\n          \"single\": true,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $scope.selfAssign = function() {\n        return save(currentUserId);\n      };\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"components/ticket-assigned/assigned-to.html\",\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedTo\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgLoading\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$translate\", \"$compile\", \"tgCurrentUserService\", \"tgAvatarService\", \"tgLightboxFactory\", AssignedToDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AssignedUsersDirective,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  AssignedUsersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService, $lightboxFactory) {\n    var link;\n    link = function($scope, $el, $attrs, $model) {\n      var currentUserId, deleteAssignedUser, isEditable, ref, render, save;\n      currentUserId = (ref = $currentUserService.getUser()) != null ? ref.get('id') : void 0;\n      $scope.visibleAssignedUsersCount = 4;\n      $scope.displayHidden = false;\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      isEditable = function() {\n        var ref1, ref2;\n        return ((ref1 = $scope.project) != null ? (ref2 = ref1.my_permissions) != null ? ref2.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      save = function(assignedUsersIds, assignedToUser) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          item.assigned_users = assignedUsersIds;\n          if (assignedToUser) {\n            item.assigned_to = assignedToUser;\n          } else if (!assignedUsersIds.length) {\n            item.assigned_to = null;\n          } else if (!_.includes(assignedUsersIds, item.assigned_to)) {\n            item.assigned_to = assignedUsersIds[0];\n          }\n          return item;\n        });\n        transform.then(function() {\n          var result;\n          return result = $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      $scope.openAssignedUsers = function() {\n        var item, onClose;\n        onClose = (function(_this) {\n          return function(assignedUsers) {\n            return save(assignedUsers);\n          };\n        })(this);\n        item = _.clone($model.$modelValue, false);\n        return $lightboxFactory.create('tg-lb-select-user', {\n          \"class\": \"lightbox lightbox-select-user\"\n        }, {\n          \"currentUsers\": item.assigned_users,\n          \"activeUsers\": $scope.activeUsers,\n          \"onClose\": onClose,\n          \"lbTitle\": $translate.instant(\"COMMON.ASSIGNED_USERS.ADD\")\n        });\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.openAssignedUsers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var assignedUserId, message, target, title;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        assignedUserId = target.data(\"user-id\");\n        title = $translate.instant(\"COMMON.ASSIGNED_USERS.TITLE_LIGHTBOX_DELETE_ASSIGNED\");\n        message = $scope.usersById[assignedUserId].full_name_display;\n        return $confirm.askOnDelete(title, message).then(function(askResponse) {\n          var assignedUserIds;\n          askResponse.finish();\n          assignedUserIds = _.clone($model.$modelValue.assigned_users, false);\n          assignedUserIds = _.pull(assignedUserIds, assignedUserId);\n          return deleteAssignedUser(assignedUserIds);\n        });\n      });\n      $scope.selfAssign = function() {\n        var assignedUsers;\n        if (!isEditable()) {\n          return;\n        }\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(currentUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, currentUserId);\n      };\n      deleteAssignedUser = function(assignedUserIds) {\n        var transform;\n        $scope.loading = true;\n        transform = $modelTransform.save(function(item) {\n          var ref1;\n          item.assigned_users = assignedUserIds;\n          if ((ref1 = item.assigned_to, indexOf.call(assignedUserIds, ref1) < 0) && assignedUserIds.length > 0) {\n            item.assigned_to = assignedUserIds[0];\n          }\n          if (assignedUserIds.length === 0) {\n            item.assigned_to = null;\n          }\n          return item;\n        });\n        transform.then(function() {\n          var item;\n          item = $modelTransform.getObj();\n          $attrs.ngModel = item;\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          item.revert();\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](function() {\n          return $scope.loading = false;\n        });\n      };\n      render = function(assignedUserIds) {\n        var assignedUsers;\n        assignedUsers = _.map(assignedUserIds, function(assignedUserId) {\n          return $scope.usersById[assignedUserId];\n        });\n        $scope.assignedUsers = _.compact(assignedUsers);\n        $scope.selfAssigned = _.includes(assignedUserIds, currentUserId);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.$on(\"assigned-user:deleted\", function(ctx, assignedUserId) {\n        var assignedUsersIds;\n        assignedUsersIds = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsersIds = _.pull(assignedUsersIds, assignedUserId);\n        assignedUsersIds = _.uniq(assignedUsersIds);\n        return deleteAssignedUser(assignedUsersIds);\n      });\n      $scope.$on(\"assigned-user:added\", function(ctx, assignedUserId) {\n        var assignedUsers;\n        assignedUsers = _.clone($model.$modelValue.assigned_users, false);\n        assignedUsers.push(assignedUserId);\n        assignedUsers = _.uniq(assignedUsers);\n        return save(assignedUsers, assignedUserId);\n      });\n      $scope.$watch($attrs.ngModel, function(item, currentItem) {\n        if (item == null) {\n          return;\n        }\n        return render(item.assigned_users);\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      templateUrl: \"components/ticket-assigned/assigned-users.html\",\n      link: link,\n      require: \"ngModel\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgAssignedUsers\", [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\", \"tgLightboxFactory\", AssignedUsersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TicketWatchersController;\n\n  TicketWatchersController = (function() {\n    TicketWatchersController.$inject = [\"tgCurrentUserService\", \"$rootScope\", \"tgLightboxFactory\", \"$translate\", \"$tgQueueModelTransformation\"];\n\n    function TicketWatchersController(currentUserService, rootScope, lightboxFactory, translate, modelTransform) {\n      this.currentUserService = currentUserService;\n      this.rootScope = rootScope;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.modelTransform = modelTransform;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    TicketWatchersController.prototype.openWatchers = function() {\n      var onClose;\n      onClose = (function(_this) {\n        return function(watchersIds) {\n          return _this.save(watchersIds);\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-lb-select-user', {\n        \"class\": \"lightbox lightbox-select-user\"\n      }, {\n        \"currentUsers\": this.item.watchers,\n        \"activeUsers\": this.activeUsers,\n        \"onClose\": onClose,\n        \"lbTitle\": this.translate.instant(\"COMMON.WATCHERS.ADD\")\n      });\n    };\n\n    TicketWatchersController.prototype.getPerms = function() {\n      var name, perms;\n      if (!this.item) {\n        return \"\";\n      }\n      name = this.item._name;\n      perms = {\n        userstories: 'modify_us',\n        issues: 'modify_issue',\n        tasks: 'modify_task',\n        epics: 'modify_epic'\n      };\n      return perms[name];\n    };\n\n    TicketWatchersController.prototype.watch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._watch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.unwatch = function() {\n      var promise;\n      this.loading = true;\n      promise = this._unwatch();\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    TicketWatchersController.prototype.deleteWatcher = function(watcherId) {\n      var watchersIds;\n      watchersIds = _.filter(this.item.watchers, (function(_this) {\n        return function(x) {\n          return x !== watcherId;\n        };\n      })(this));\n      return this.save(watchersIds);\n    };\n\n    TicketWatchersController.prototype.save = function(watchersIds) {\n      var transform;\n      this.loading = true;\n      transform = this.modelTransform.save(function(item) {\n        item.watchers = watchersIds;\n        return item;\n      });\n      transform.then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"object:updated\");\n        };\n      })(this));\n      return transform[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    TicketWatchersController.prototype._watch = function() {\n      return this.onWatch();\n    };\n\n    TicketWatchersController.prototype._unwatch = function() {\n      return this.onUnwatch();\n    };\n\n    return TicketWatchersController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"TicketWatchersController\", TicketWatchersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchersDirective;\n\n  WatchersDirective = function($rootscope, $confirm, $repo, $modelTransform, $template, $compile, $translate, $currentUserService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var isEditable, render;\n      $scope.visibleWatchersCount = 4;\n      $scope.displayHidden = false;\n      $scope.isAuthenticated = !!$currentUserService.getUser();\n      isEditable = function() {\n        var ref, ref1;\n        return ((ref = $scope.project) != null ? (ref1 = ref.my_permissions) != null ? ref1.indexOf($attrs.requiredPerm) : void 0 : void 0) !== -1;\n      };\n      render = function() {\n        var ref, watchers, watchersIds;\n        watchersIds = _.clone((ref = $scope.vm.item) != null ? ref.watchers : void 0, false);\n        watchers = _.map(watchersIds, function(watcherId) {\n          return $scope.usersById[watcherId];\n        });\n        watchers = _.filter(watchers, function(it) {\n          return !!it;\n        });\n        $scope.vm.watchers = _.compact(watchers);\n        return $scope.isEditable = isEditable();\n      };\n      $scope.toggleFold = function() {\n        return $scope.displayHidden = !$scope.displayHidden;\n      };\n      $el.on(\"click\", \".user-list-single\", function(event) {\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        return $scope.vm.openWatchers();\n      });\n      $el.on(\"click\", \".remove-user\", function(event) {\n        var message, target, title, watcherId;\n        if (!isEditable()) {\n          return;\n        }\n        event.stopPropagation();\n        target = angular.element(event.currentTarget);\n        watcherId = target.data(\"watcher-id\");\n        title = $translate.instant(\"COMMON.WATCHERS.TITLE_LIGHTBOX_DELETE_WARTCHER\");\n        message = $scope.usersById[watcherId].full_name_display;\n        return $confirm.askOnDelete(title, message).then((function(_this) {\n          return function(askResponse) {\n            askResponse.finish();\n            return $scope.vm.deleteWatcher(watcherId);\n          };\n        })(this));\n      });\n      $scope.$on(\"watcher:added\", function(ctx, watcherId) {\n        var watchersIds;\n        watchersIds = _.clone($scope.item.watchers, false);\n        watchersIds.push(watcherId);\n        watchersIds = _.uniq(watchers);\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$on(\"watchers:selected\", function(ctx, watchersIds) {\n        return $scope.vm.save(watchersIds);\n      });\n      $scope.$watch(\"vm.item\", function(item) {\n        if (!item) {\n          return;\n        }\n        return render();\n      });\n      return $scope.$on(\"$destroy\", function() {\n        return $el.off();\n      });\n    };\n    return {\n      scope: true,\n      controller: \"TicketWatchersController\",\n      bindToController: {\n        item: \"=\",\n        onWatch: \"=\",\n        onUnwatch: \"=\",\n        activeUsers: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/ticket-watchers/ticket-watchers.html\",\n      link: link\n    };\n  };\n\n  WatchersDirective.$inject = [\"$rootScope\", \"$tgConfirm\", \"$tgRepo\", \"$tgQueueModelTransformation\", \"$tgTemplate\", \"$compile\", \"$translate\", \"tgCurrentUserService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgWatchers\", WatchersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var module, timeout, tipsDirective;\n\n  timeout = this.taiga.timeout;\n\n  module = angular.module(\"taigaComponents\");\n\n  tipsDirective = function(tgLoader, $translate) {\n    var link, randomInt, tips;\n    tips = [\n      {\n        contentType: \"icon\",\n        icon: \"icon-project\",\n        message: \"PROJECTS_ORDER\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-upvote\",\n        message: \"VOTING\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-attach\",\n        message: \"ISSUES_TO_SPRINT\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-clock\",\n        message: \"DUE_DATE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-iocaine\",\n        message: \"IOCAIN\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-blocked-project\",\n        message: \"BLOCKED\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-promote\",\n        message: \"PROMOTE\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-bulk\",\n        message: \"BULK\"\n      }, {\n        contentType: \"range\",\n        message: \"ZOOM\"\n      }, {\n        contentType: \"icon\",\n        icon: \"icon-settings\",\n        message: \"CUSTOM_FIELDS\"\n      }, {\n        contentType: \"arrows\",\n        message: \"SLIDE_ARROWS\"\n      }\n    ];\n    randomInt = function(size) {\n      return Math.floor(Math.random() * size) + 1;\n    };\n    link = function(scope, el, attrs) {\n      var loadTip, waitingTimeout;\n      scope.tipLoaded = false;\n      waitingTimeout = null;\n      tgLoader.onStart(function() {\n        return waitingTimeout = timeout(1000, function() {\n          return loadTip();\n        });\n      });\n      tgLoader.onEnd(function() {\n        clearTimeout(waitingTimeout);\n        return scope.tipLoaded = false;\n      });\n      return loadTip = function() {\n        var tip;\n        scope.tipLoaded = true;\n        tip = tips[randomInt(tips.length - 1)];\n        return scope.tip = {\n          contentType: tip.contentType,\n          message: \"TIPS.TIP_\" + tip.message,\n          icon: tip.icon,\n          color: \"tip-color-\" + (randomInt(5))\n        };\n      };\n    };\n    return {\n      link: link,\n      scope: true,\n      templateUrl: \"components/tips/tip.html\"\n    };\n  };\n\n  module.directive('tgTips', ['tgLoader', '$translate', tipsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeButtonDirective;\n\n  TribeButtonDirective = function(configService, locationService) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.url = (locationService.protocol()) + \"://\" + (locationService.host());\n      if (locationService.protocol() === \"http\" && locationService.port() !== 80) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      } else if (locationService.protocol() === \"https\" && locationService.port() !== 443) {\n        return scope.vm.url = scope.vm.url + \":\" + (locationService.port());\n      }\n    };\n    return {\n      scope: {\n        usId: \"=\",\n        projectSlug: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/tribe-button/tribe-button.html\",\n      link: link\n    };\n  };\n\n  TribeButtonDirective.$inject = [\"$tgConfig\", \"$tgLocation\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeButton\", TribeButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TribeLinkedDirective;\n\n  TribeLinkedDirective = function(configService) {\n    var directive, link;\n    link = function(scope, el, attrs) {\n      scope.vm = {};\n      scope.vm.tribeHost = configService.config.tribeHost;\n      scope.vm.show = function() {\n        return scope.vm.open = true;\n      };\n      return scope.vm.hide = function(event) {\n        return scope.vm.open = false;\n      };\n    };\n    directive = {\n      templateUrl: \"components/tribe-button/tribe-linked.html\",\n      scope: {\n        gigTitle: \"=\",\n        gigId: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  TribeLinkedDirective.$inject = [\"$tgConfig\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgTribeLinked\", TribeLinkedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonController;\n\n  VoteButtonController = (function() {\n    VoteButtonController.$inject = [\"tgCurrentUserService\"];\n\n    function VoteButtonController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.user = this.currentUserService.getUser();\n      this.loading = false;\n    }\n\n    VoteButtonController.prototype.toggleVote = function() {\n      var promise;\n      this.loading = true;\n      if (!this.item.is_voter) {\n        promise = this.onUpvote();\n      } else {\n        promise = this.onDownvote();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    return VoteButtonController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"VoteButton\", VoteButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var VoteButtonDirective;\n\n  VoteButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"VoteButton\",\n      bindToController: {\n        item: \"=\",\n        onUpvote: \"=\",\n        onDownvote: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"components/vote-button/vote-button.html\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgVoteButton\", VoteButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectSwimlanesWipLimitController;\n\n  ProjectSwimlanesWipLimitController = (function() {\n    ProjectSwimlanesWipLimitController.$inject = [\"$scope\", \"$rootScope\", \"$tgResources\"];\n\n    function ProjectSwimlanesWipLimitController(scope, rootscope, rs) {\n      this.scope = scope;\n      this.rootscope = rootscope;\n      this.rs = rs;\n      this.new_wip_limit = this.status.wip_limit;\n    }\n\n    ProjectSwimlanesWipLimitController.prototype.submitSwimlaneNewStatus = function() {\n      this.scope.displayWipLimitSelector = false;\n      if (!!this.status.swimlane_userstory_status_id) {\n        return this.rs.swimlanes.wipLimitUpdate(this.status.swimlane_userstory_status_id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"swimlane:load\");\n          };\n        })(this));\n      } else {\n        return this.rs.userstories.editStatus(this.status.id, this.new_wip_limit).then((function(_this) {\n          return function() {\n            return _this.rootscope.$broadcast(\"project:load\");\n          };\n        })(this));\n      }\n    };\n\n    return ProjectSwimlanesWipLimitController;\n\n  })();\n\n  angular.module(\"taigaComponents\").controller(\"ProjectSwimlanesWipLimit\", ProjectSwimlanesWipLimitController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WipLimitSelector, cancelTimeout, taiga, timeout;\n\n  taiga = this.taiga;\n\n  timeout = this.taiga.timeout;\n\n  cancelTimeout = this.taiga.cancelTimeout;\n\n  WipLimitSelector = function($timeout) {\n    var link;\n    link = function(scope, el, attrs) {\n      scope.displayWipLimitSelector = false;\n      return scope.toggleWipSelectorVisibility = function() {\n        return scope.displayWipLimitSelector = !scope.displayWipLimitSelector;\n      };\n    };\n    return {\n      link: link,\n      scope: {},\n      templateUrl: \"components/wip-limit-selector/wip-limit-selector.html\",\n      controller: \"ProjectSwimlanesWipLimit\",\n      bindToController: {\n        status: '='\n      },\n      controllerAs: \"vm\"\n    };\n  };\n\n  angular.module('taigaComponents').directive(\"tgWipLimitSelector\", [WipLimitSelector]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentEditWysiwyg;\n\n  CommentEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      return $scope.uploadFiles = function(file, cb) {\n        var object, projectId;\n        projectId = parseInt($scope.vm.projectId, 10);\n        object = parseInt($scope.vm.object, 10);\n        if (!projectId) {\n          projectId = parseInt($scope.vm.project.id, 10);\n        }\n        return attachmentsFullService.addAttachment(projectId, object, attachmentsFullService.types[$scope.vm.name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        editonly\\n        required\\n        project=\\\"vm.project\\\"\\n        content='vm.comment.comment'\\n        on-save=\\\"vm.saveComment(text, cb)\\\"\\n        on-cancel=\\\"vm.onEditMode({commentId: vm.comment.id})\\\"\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentEditWysiwyg\", [\"tgAttachmentsFullService\", CommentEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentWysiwyg;\n\n  CommentWysiwyg = function($modelTransform, $rootscope, attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveComment = function(description, cb) {\n        var transform;\n        $scope.content = '';\n        $scope.vm.type.comment = description;\n        transform = $modelTransform.save(function(item) {});\n        transform.then(function() {\n          if ($scope.vm.onAddComment) {\n            $scope.vm.onAddComment();\n          }\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.onChange = function(markdown) {\n        return $scope.vm.type.comment = markdown;\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.vm.project.id, $scope.vm.type.id, types[$scope.vm.type._name], file, true, true).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.content = '';\n      return $scope.$watch(\"vm.type\", function(value) {\n        if (!value) {\n          return;\n        }\n        return $scope.storageKey = \"comment-\" + value.project + \"-\" + value.id + \"-\" + value._name;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        required\\n        not-persist\\n        project=\\\"vm.project\\\"\\n        placeholder=\\\"'COMMENTS.TYPE_NEW_COMMENT '| translate\\\"\\n        storage-key='storageKey'\\n        content='content'\\n        on-save='saveComment(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCommentWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"tgAttachmentsFullService\", CommentWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CustomFieldEditWysiwyg;\n\n  CustomFieldEditWysiwyg = function(attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      return $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.ctrl.objectId.toString(), types[$scope.ctrl.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<tg-wysiwyg\\n    class=\\\"custom-field\\\"\\n    editonly=\\\"!!customAttributeValue.value.length\\\"\\n    project=\\\"project\\\"\\n    content='customAttributeValue.value'\\n    on-save=\\\"saveCustomRichText(text, cb)\\\"\\n    on-cancel=\\\"cancelCustomRichText()\\\"\\n    on-upload-file='uploadFiles'>\\n</tg-wysiwyg>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgCustomFieldEditWysiwyg\", [\"tgAttachmentsFullService\", CustomFieldEditWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ItemWysiwyg;\n\n  ItemWysiwyg = function($modelTransform, $rootscope, $confirm, attachmentsFullService, $translate) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var types;\n      $scope.editableDescription = false;\n      $scope.saveDescription = function(description, cb) {\n        var transform;\n        transform = $modelTransform.save(function(item) {\n          item.description = description;\n          return item;\n        });\n        transform.then(function() {\n          $confirm.notify(\"success\");\n          return $rootscope.$broadcast(\"object:updated\");\n        });\n        transform.then(null, function() {\n          return $confirm.notify(\"error\");\n        });\n        return transform[\"finally\"](cb);\n      };\n      types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\"\n      };\n      $scope.uploadFiles = function(file, cb) {\n        return attachmentsFullService.addAttachment($scope.project.id, $scope.item.id, types[$attrs.type], file).then(function(result) {\n          return cb({\n            \"default\": result.getIn(['file', 'url'])\n          });\n        });\n      };\n      $scope.$watch($attrs.model, function(value) {\n        if (!value) {\n          return;\n        }\n        $scope.item = value;\n        $scope.version = value.version;\n        return $scope.storageKey = $scope.project.id + \"-\" + value.id + \"-\" + $attrs.type;\n      });\n      return $scope.$watch('project', function(project) {\n        if (!project) {\n          return;\n        }\n        return $scope.editableDescription = project.my_permissions.indexOf($attrs.requiredPerm) !== -1;\n      });\n    };\n    return {\n      scope: true,\n      link: link,\n      template: \"<div>\\n    <tg-wysiwyg\\n        ng-if=\\\"editableDescription && project\\\"\\n        html-read-mode=\\\"true\\\"\\n        project=\\\"project\\\"\\n        placeholder=\\\"'COMMON.DESCRIPTION.EMPTY '| translate\\\"\\n        version='version'\\n        storage-key='storageKey'\\n        content='item.description'\\n        on-save='saveDescription(text, cb)'\\n        on-upload-file='uploadFiles'>\\n    </tg-wysiwyg>\\n    <div\\n        class=\\\"wysiwyg\\\"\\n        ng-if=\\\"!editableDescription && item.description.length\\\"\\n        tg-bind-wysiwyg-html=\\\"item.description\\\"></div>\\n\\n    <div\\n        class=\\\"wysiwyg no-description\\\"\\n        ng-if=\\\"!editableDescription && !item.description.length\\\">\\n        {{'COMMON.DESCRIPTION.NO_DESCRIPTION' | translate}}\\n    </div>\\n</div>\"\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgItemWysiwyg\", [\"$tgQueueModelTransformation\", \"$rootScope\", \"$tgConfirm\", \"tgAttachmentsFullService\", \"$translate\", ItemWysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Wysiwyg, taiga;\n\n  taiga = this.taiga;\n\n  Wysiwyg = function($translate, $confirm, $storage, wysiwygService, animationFrame, tgLoader, analytics, $location, $attachmentsFullService) {\n    var link;\n    link = function($scope, $el, $attrs) {\n      var change, clean, create, discardLocalStorage, editorLinks, getCurrentContent, isDraft, isEditOnly, isOutdated, linksEvents, localSave, notPersist, pageAttachments, saveEnd, setHtmlEditor, textEditor, throttleChange, unwatchContent, updateMarkdownWithCurrentHtml;\n      isEditOnly = !!$attrs.$attr.editonly;\n      notPersist = !!$attrs.$attr.notPersist;\n      if ($scope.editonly !== void 0) {\n        isEditOnly = $scope.editonly;\n      }\n      $scope.required = !!$attrs.$attr.required;\n      $scope.editMode = isEditOnly || false;\n      $scope.mode = localStorage.getItem('editor-mode') || 'html';\n      if ($scope.mode !== 'html' && $scope.mode !== 'markdown') {\n        $scope.mode = 'html';\n      }\n      $scope.markdown = '';\n      $scope.html = '';\n      textEditor = null;\n      pageAttachments = $attachmentsFullService.attachments.toJS();\n      editorLinks = [];\n      linksEvents = function() {\n        $el.on('mousedown', '.js-wysiwyg-html', (function(_this) {\n          return function(e) {\n            if (e.target.tagName !== 'A' && e.target.parentElement.tagName !== 'A') {\n              return $scope.$applyAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          };\n        })(this));\n        editorLinks = textEditor.querySelectorAll('a[target=\"_blank\"]:not(.link-event)');\n        if (editorLinks.length) {\n          return editorLinks.forEach((function(_this) {\n            return function(link) {\n              link.classList.add('link-event');\n              link.addEventListener('mousedown', function(e) {\n                if (!$scope.editMode) {\n                  e.preventDefault();\n                  return e.stopPropagation();\n                }\n              });\n              return link.addEventListener('click', function(e) {\n                if (!$scope.editMode) {\n                  return window.open(e.currentTarget.getAttribute('href'), '_blank');\n                }\n              });\n            };\n          })(this));\n        }\n      };\n      unwatchContent = $scope.$watch('content', function(content) {\n        var unwatchLoader;\n        if (!_.isUndefined(content)) {\n          $scope.outdated = isOutdated();\n          if (($scope.markdown.length || content.length) && $scope.markdown === content) {\n            return;\n          }\n          content = getCurrentContent();\n          $scope.markdown = content;\n          if (tgLoader.open()) {\n            unwatchLoader = tgLoader.onEnd(function() {\n              return $scope.$evalAsync(function() {\n                create(content);\n                return unwatchLoader();\n              });\n            });\n          } else {\n            create(content);\n          }\n          return unwatchContent();\n        }\n      });\n      create = (function(_this) {\n        return function(text) {\n          if (textEditor) {\n            return;\n          }\n          textEditor = document.createElement('tg-text-editor');\n          textEditor.projectId = $scope.project.id;\n          textEditor.projectSlug = $scope.project.slug;\n          textEditor.placeholder = $scope.placeholder;\n          setHtmlEditor(text);\n          textEditor.mode = $scope.mode;\n          textEditor.lan = $translate.preferredLanguage();\n          textEditor.uploadFunction = $scope.onUploadFile;\n          textEditor.members = $scope.project.members.map(function(member) {\n            return Object.assign(member, {\n              fullNameDisplay: member.full_name_display\n            });\n          });\n          $scope.$applyAsync(function() {\n            return linksEvents();\n          });\n          if (isDraft()) {\n            $scope.setEditMode(true);\n          }\n          textEditor.addEventListener('modeChanged', function(event) {\n            return $scope.$evalAsync(function() {\n              $scope.mode = event.detail;\n              $scope.setEditMode(true);\n              return localStorage.setItem('editor-mode', $scope.mode);\n            });\n          });\n          textEditor.addEventListener('focusChanged', function(event) {\n            if (event.detail) {\n              return $scope.$evalAsync(function() {\n                return $scope.setEditMode(true);\n              });\n            }\n          });\n          textEditor.addEventListener('changed', function(event) {\n            if ($scope.mode === 'html') {\n              $scope.html = event.detail;\n            } else {\n              $scope.markdown = event.detail;\n            }\n            return throttleChange();\n          });\n          return $el.find('.editor-wrapper')[0].appendChild(textEditor);\n        };\n      })(this);\n      setHtmlEditor = function(markdown) {\n        return wysiwygService.refreshAttachmentURLFromMarkdown(markdown).then((function(_this) {\n          return function(markdown) {\n            return textEditor.markdown = markdown;\n          };\n        })(this));\n      };\n      $scope.setEditMode = function(editMode) {\n        $scope.editMode = editMode;\n        if (editMode) {\n          return textEditor.mode = $scope.mode;\n        } else {\n          return textEditor.mode = 'html';\n        }\n      };\n      $scope.save = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        setHtmlEditor($scope.markdown);\n        if ($scope.required && !$scope.markdown.length) {\n          return;\n        }\n        $scope.saving = true;\n        $scope.outdated = false;\n        $scope.onSave({\n          text: $scope.markdown,\n          cb: saveEnd\n        });\n        linksEvents();\n      };\n      $scope.cancel = function(e) {\n        if (e) {\n          e.preventDefault();\n        }\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        } else {\n          $scope.markdown = $scope.content;\n          setHtmlEditor($scope.content || '');\n        }\n        discardLocalStorage();\n        $scope.outdated = false;\n        $scope.onCancel();\n        linksEvents();\n      };\n      clean = function() {\n        $scope.markdown = '';\n        return setHtmlEditor('');\n      };\n      saveEnd = function() {\n        $scope.saving = false;\n        if (!isEditOnly) {\n          $scope.setEditMode(false);\n        }\n        if (notPersist) {\n          clean();\n        }\n        discardLocalStorage();\n        return analytics.trackEvent('develop', 'save wysiwyg', $scope.mode, 1);\n      };\n      isOutdated = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store && store.version && store.version !== $scope.version) {\n          return true;\n        }\n        return false;\n      };\n      isDraft = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return true;\n        }\n        return false;\n      };\n      getCurrentContent = function() {\n        var store;\n        store = $storage.get($scope.storageKey);\n        if (store) {\n          return store.text;\n        }\n        return $scope.content;\n      };\n      discardLocalStorage = function() {\n        return $storage.remove($scope.storageKey);\n      };\n      $scope.cancelWithConfirmation = function() {\n        var message, title;\n        if ($scope.content === $scope.markdown) {\n          $scope.cancel();\n          if (document.activeElement.blur) {\n            document.activeElement.blur();\n          }\n          document.body.click();\n          return null;\n        }\n        title = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_TITLE\");\n        message = $translate.instant(\"COMMON.CONFIRM_CLOSE_EDIT_MODE_MESSAGE\");\n        return $confirm.ask(title, null, message).then(function(askResponse) {\n          $scope.cancel();\n          return askResponse.finish();\n        });\n      };\n      updateMarkdownWithCurrentHtml = function() {\n        return $scope.markdown = wysiwygService.getMarkdown($scope.html);\n      };\n      localSave = function(markdown) {\n        var store;\n        if ($scope.storageKey) {\n          store = {};\n          store.version = $scope.version || 0;\n          store.text = markdown;\n          return $storage.set($scope.storageKey, store);\n        }\n      };\n      change = function() {\n        if (!$scope.editMode) {\n          return;\n        }\n        if ($scope.mode === 'html') {\n          updateMarkdownWithCurrentHtml();\n        }\n        localSave($scope.markdown);\n        return $scope.onChange({\n          markdown: $scope.markdown\n        });\n      };\n      return throttleChange = _.throttle(change, 200);\n    };\n    return {\n      templateUrl: \"common/components/wysiwyg-toolbar.html\",\n      scope: {\n        htmlReadMode: '<',\n        editonly: '<',\n        project: '<',\n        placeholder: '<',\n        version: '<',\n        storageKey: '<',\n        content: '<',\n        onCancel: '&',\n        onSave: '&',\n        onUploadFile: '<',\n        onChange: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaComponents\").directive(\"tgWysiwyg\", [\"$translate\", \"$tgConfirm\", \"$tgStorage\", \"tgWysiwygService\", \"animationFrame\", \"tgLoader\", \"$tgAnalytics\", \"$location\", \"tgAttachmentsFullService\", Wysiwyg]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WysiwygService;\n\n  WysiwygService = (function() {\n    WysiwygService.$inject = [\"tgProjectService\", \"tgAttachmentsFullService\", \"tgAttachmentsService\", \"$sce\"];\n\n    function WysiwygService(projectService, attachmentsFullService, attachmentsService, sce) {\n      this.projectService = projectService;\n      this.attachmentsFullService = attachmentsFullService;\n      this.attachmentsService = attachmentsService;\n      this.sce = sce;\n      this.projectDataConversion = {};\n      this.cache = {};\n    }\n\n    WysiwygService.prototype.getMarkdown = function(html) {\n      var projectId;\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toMarkdown(html);\n    };\n\n    WysiwygService.prototype.getHTML = function(text) {\n      var projectId;\n      if (!text || !text.length) {\n        return \"\";\n      }\n      projectId = this.projectService.project.get('id');\n      if (!this.projectDataConversion[projectId]) {\n        this.dataConversion = window.angularDataConversion();\n        this.dataConversion.setUp(this.projectService.project.get('slug'));\n        this.projectDataConversion[projectId] = this.dataConversion;\n      }\n      return this.projectDataConversion[projectId].toHtml(text);\n    };\n\n    WysiwygService.prototype.getAttachmentData = function(tokens) {\n      return this.attachmentsService.get(tokens[0], tokens[1]).then((function(_this) {\n        return function(response) {\n          return response.data.url;\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.getCachedAttachment = function(tokens) {\n      var attachment, attachmentId, attachments, cache_key, cached_result;\n      attachmentId = parseInt(tokens[1], 10);\n      attachments = this.attachmentsFullService.attachments.toJS();\n      attachment = attachments.find((function(_this) {\n        return function(attachment) {\n          return attachment.file.id === attachmentId;\n        };\n      })(this));\n      if (attachment) {\n        return Promise.resolve(attachment.file.url);\n      } else {\n        cache_key = tokens[0] + tokens[1];\n        cached_result = this.cache[cache_key];\n        if (cached_result) {\n          return Promise.resolve(cached_result);\n        } else {\n          return this.getAttachmentData(tokens).then((function(_this) {\n            return function(url) {\n              _this.cache[cache_key] = url;\n              return url;\n            };\n          })(this));\n        }\n      }\n    };\n\n    WysiwygService.prototype.refreshAttachmentURLFromMarkdown = function(markdown) {\n      var html;\n      html = this.getHTML(markdown);\n      return this.refreshAttachmentURL(html).then((function(_this) {\n        return function(html) {\n          return _this.getMarkdown(html);\n        };\n      })(this));\n    };\n\n    WysiwygService.prototype.refreshAttachmentURL = function(html) {\n      var el, images, links, promises, regex;\n      el = document.createElement('html');\n      window._extraValidHtmlElments = {\n        input: true\n      };\n      window._extraValidAttrs = {\n        checked: true\n      };\n      el.innerHTML = this.sce.getTrustedHtml(html) || '';\n      regex = /#_taiga-refresh=([a-zA-Z]*\\:\\d+)/;\n      links = {\n        \"elements\": el.querySelectorAll('a'),\n        \"attr\": \"href\"\n      };\n      images = {\n        \"elements\": el.querySelectorAll('img'),\n        \"attr\": \"src\"\n      };\n      promises = [];\n      _.map([links, images], (function(_this) {\n        return function(tag) {\n          return _.map(tag.elements, function(e) {\n            var match, promise, tokens;\n            if (e.getAttribute(tag.attr) && e.getAttribute(tag.attr).indexOf('#_taiga-refresh=') !== -1) {\n              match = e.getAttribute(tag.attr).match(regex);\n              if (match && match.length === 2) {\n                tokens = match[1].split(\":\");\n                promise = _this.getCachedAttachment(tokens).then(function(url) {\n                  return e.setAttribute(tag.attr, url);\n                })[\"catch\"](function() {\n                  return console.warn('attachment ref not found', e.getAttribute(tag.attr));\n                });\n                return promises.push(promise);\n              }\n            }\n          });\n        };\n      })(this));\n      return Promise.all(promises).then(function() {\n        return el.innerHTML;\n      });\n    };\n\n    return WysiwygService;\n\n  })();\n\n  angular.module(\"taigaComponents\").service(\"tgWysiwygService\", WysiwygService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByController;\n\n  DiscoverHomeOrderByController = (function() {\n    DiscoverHomeOrderByController.$inject = ['$translate'];\n\n    function DiscoverHomeOrderByController(translate) {\n      this.translate = translate;\n      this.is_open = false;\n      this.texts = {\n        week: this.translate.instant('DISCOVER.FILTERS.WEEK'),\n        month: this.translate.instant('DISCOVER.FILTERS.MONTH'),\n        year: this.translate.instant('DISCOVER.FILTERS.YEAR'),\n        all: this.translate.instant('DISCOVER.FILTERS.ALL_TIME')\n      };\n    }\n\n    DiscoverHomeOrderByController.prototype.currentText = function() {\n      return this.texts[this.currentOrderBy];\n    };\n\n    DiscoverHomeOrderByController.prototype.open = function() {\n      return this.is_open = true;\n    };\n\n    DiscoverHomeOrderByController.prototype.close = function() {\n      return this.is_open = false;\n    };\n\n    DiscoverHomeOrderByController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      this.is_open = false;\n      return this.onChange({\n        orderBy: this.currentOrderBy\n      });\n    };\n\n    return DiscoverHomeOrderByController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHomeOrderBy\", DiscoverHomeOrderByController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeOrderByDirective;\n\n  DiscoverHomeOrderByDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverHomeOrderBy\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-home-order-by/discover-home-order-by.html\",\n      scope: {\n        currentOrderBy: \"=orderBy\",\n        onChange: \"&\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverHomeOrderByDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverHomeOrderBy\", DiscoverHomeOrderByDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarController;\n\n  DiscoverSearchBarController = (function() {\n    DiscoverSearchBarController.$inject = ['tgDiscoverProjectsService'];\n\n    function DiscoverSearchBarController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.projectsCount;\n        };\n      })(this));\n      this.discoverProjectsService.fetchStats();\n    }\n\n    DiscoverSearchBarController.prototype.selectFilter = function(filter) {\n      return this.onChange({\n        filter: filter,\n        q: this.q\n      });\n    };\n\n    DiscoverSearchBarController.prototype.submitFilter = function() {\n      return this.onChange({\n        filter: this.filter,\n        q: this.q\n      });\n    };\n\n    return DiscoverSearchBarController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchBar\", DiscoverSearchBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchBarDirective;\n\n  DiscoverSearchBarDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {};\n    return {\n      controller: \"DiscoverSearchBar\",\n      controllerAs: \"vm\",\n      templateUrl: 'discover/components/discover-search-bar/discover-search-bar.html',\n      bindToController: true,\n      scope: {\n        q: \"=\",\n        filter: \"=\",\n        onChange: \"&\"\n      },\n      compile: function(element, attrs) {\n        if (!attrs.q) {\n          return attrs.q = '';\n        }\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchBarDirective.$inject = [];\n\n  angular.module('taigaDiscover').directive('tgDiscoverSearchBar', DiscoverSearchBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderController;\n\n  DiscoverSearchListHeaderController = (function() {\n    DiscoverSearchListHeaderController.$inject = [];\n\n    function DiscoverSearchListHeaderController() {\n      this.like_is_open = this.orderBy.indexOf('-total_fans') === 0;\n      this.activity_is_open = this.orderBy.indexOf('-total_activity') === 0;\n    }\n\n    DiscoverSearchListHeaderController.prototype.openLike = function() {\n      this.like_is_open = true;\n      this.activity_is_open = false;\n      return this.setOrderBy('-total_fans_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.openActivity = function() {\n      this.activity_is_open = true;\n      this.like_is_open = false;\n      return this.setOrderBy('-total_activity_last_week');\n    };\n\n    DiscoverSearchListHeaderController.prototype.setOrderBy = function(type) {\n      if (type == null) {\n        type = '';\n      }\n      if (!type) {\n        this.like_is_open = false;\n        this.activity_is_open = false;\n      }\n      return this.onChange({\n        orderBy: type\n      });\n    };\n\n    return DiscoverSearchListHeaderController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearchListHeader\", DiscoverSearchListHeaderController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchListHeaderDirective;\n\n  DiscoverSearchListHeaderDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"DiscoverSearchListHeader\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      templateUrl: \"discover/components/discover-search-list-header/discover-search-list-header.html\",\n      scope: {\n        onChange: \"&\",\n        orderBy: \"=\"\n      },\n      link: link\n    };\n  };\n\n  DiscoverSearchListHeaderDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearchListHeader\", DiscoverSearchListHeaderDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsController;\n\n  FeaturedProjectsController = (function() {\n    FeaturedProjectsController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function FeaturedProjectsController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.featured;\n        };\n      })(this));\n      this.discoverProjectsService.fetchFeatured();\n    }\n\n    return FeaturedProjectsController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"FeaturedProjects\", FeaturedProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeaturedProjectsDirective;\n\n  FeaturedProjectsDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      controller: \"FeaturedProjects\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/featured-projects/featured-projects.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  FeaturedProjectsDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgFeaturedProjects\", FeaturedProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HighlightedDirective;\n\n  HighlightedDirective = function() {\n    return {\n      templateUrl: \"discover/components/highlighted/highlighted.html\",\n      scope: {\n        loading: \"=\",\n        highlighted: \"=\",\n        orderBy: \"=\"\n      }\n    };\n  };\n\n  HighlightedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgHighlighted\", HighlightedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveController;\n\n  MostActiveController = (function() {\n    MostActiveController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostActiveController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostActive;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostActiveController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostActive({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostActiveController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostActiveController.prototype.getOrderBy = function(type) {\n      if (this.currentOrderBy === 'all') {\n        return '-total_activity';\n      } else {\n        return '-total_activity_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostActiveController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostActive\", MostActiveController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostActiveDirective;\n\n  MostActiveDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostActive\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-active/most-active.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostActiveDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostActive\", MostActiveDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedController;\n\n  MostLikedController = (function() {\n    MostLikedController.$inject = [\"tgDiscoverProjectsService\"];\n\n    function MostLikedController(discoverProjectsService) {\n      this.discoverProjectsService = discoverProjectsService;\n      taiga.defineImmutableProperty(this, \"highlighted\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.mostLiked;\n        };\n      })(this));\n      this.currentOrderBy = 'year';\n      this.order_by = this.getOrderBy();\n    }\n\n    MostLikedController.prototype.fetch = function() {\n      this.loading = true;\n      this.order_by = this.getOrderBy();\n      return this.discoverProjectsService.fetchMostLiked({\n        order_by: this.order_by\n      }).then((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    MostLikedController.prototype.orderBy = function(type) {\n      this.currentOrderBy = type;\n      return this.fetch();\n    };\n\n    MostLikedController.prototype.getOrderBy = function() {\n      if (this.currentOrderBy === 'all') {\n        return '-total_fans';\n      } else {\n        return '-total_fans_last_' + this.currentOrderBy;\n      }\n    };\n\n    return MostLikedController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"MostLiked\", MostLikedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var MostLikedDirective;\n\n  MostLikedDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"MostLiked\",\n      controllerAs: \"vm\",\n      templateUrl: \"discover/components/most-liked/most-liked.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  MostLikedDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgMostLiked\", MostLikedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverHomeController;\n\n  DiscoverHomeController = (function() {\n    DiscoverHomeController.$inject = ['$tgLocation', '$tgNavUrls', 'tgAppMetaService', '$translate'];\n\n    function DiscoverHomeController(location, navUrls, appMetaService, translate) {\n      var description, title;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      title = this.translate.instant(\"DISCOVER.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n    }\n\n    DiscoverHomeController.prototype.onSubmit = function(q) {\n      var url;\n      url = this.navUrls.resolve('discover-search');\n      return this.location.search('text', q).path(url);\n    };\n\n    return DiscoverHomeController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverHome\", DiscoverHomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchController;\n\n  DiscoverSearchController = (function() {\n    DiscoverSearchController.$inject = ['$routeParams', 'tgDiscoverProjectsService', '$route', '$tgLocation', '$tgAnalytics', 'tgAppMetaService', '$translate'];\n\n    function DiscoverSearchController(routeParams, discoverProjectsService, route, location, analytics, appMetaService, translate) {\n      var description, title;\n      this.routeParams = routeParams;\n      this.discoverProjectsService = discoverProjectsService;\n      this.route = route;\n      this.location = location;\n      this.analytics = analytics;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.page = 1;\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this.discoverProjectsService.nextSearchPage;\n        };\n      })(this));\n      this.q = this.routeParams.text;\n      this.filter = this.routeParams.filter || 'all';\n      this.orderBy = this.routeParams['order_by'] || '';\n      this.loadingGlobal = false;\n      this.loadingList = false;\n      this.loadingPagination = false;\n      title = this.translate.instant(\"DISCOVER.SEARCH.PAGE_TITLE\");\n      description = this.translate.instant(\"DISCOVER.SEARCH.PAGE_DESCRIPTION\");\n      this.appMetaService.setAll(title, description);\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n    }\n\n    DiscoverSearchController.prototype.fetch = function() {\n      this.page = 1;\n      this.discoverProjectsService.resetSearchList();\n      return this.search();\n    };\n\n    DiscoverSearchController.prototype.fetchByGlobalSearch = function() {\n      if (this.loadingGlobal) {\n        return;\n      }\n      this.loadingGlobal = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingGlobal = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.fetchByOrderBy = function() {\n      if (this.loadingList) {\n        return;\n      }\n      this.loadingList = true;\n      return this.fetch().then((function(_this) {\n        return function() {\n          return _this.loadingList = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.showMore = function() {\n      if (this.loadingPagination) {\n        return;\n      }\n      this.loadingPagination = true;\n      this.page++;\n      return this.search().then((function(_this) {\n        return function() {\n          return _this.loadingPagination = false;\n        };\n      })(this));\n    };\n\n    DiscoverSearchController.prototype.search = function() {\n      var filter, params;\n      filter = this.getFilter();\n      params = {\n        page: this.page,\n        q: this.q,\n        order_by: this.orderBy\n      };\n      _.assign(params, filter);\n      return this.discoverProjectsService.fetchSearch(params);\n    };\n\n    DiscoverSearchController.prototype.getFilter = function() {\n      if (this.filter === 'people') {\n        return {\n          is_looking_for_people: true\n        };\n      } else if (this.filter === 'scrum') {\n        return {\n          is_backlog_activated: true\n        };\n      } else if (this.filter === 'kanban') {\n        return {\n          is_kanban_activated: true\n        };\n      }\n      return {};\n    };\n\n    DiscoverSearchController.prototype.onChangeFilter = function(filter, q) {\n      this.filter = filter;\n      this.q = q;\n      this.route.updateParams({\n        filter: this.filter,\n        text: this.q\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByGlobalSearch();\n    };\n\n    DiscoverSearchController.prototype.onChangeOrder = function(orderBy) {\n      this.orderBy = orderBy;\n      this.route.updateParams({\n        order_by: orderBy\n      });\n      this.analytics.trackPage(this.location.url(), \"Discover Search\");\n      return this.fetchByOrderBy();\n    };\n\n    return DiscoverSearchController;\n\n  })();\n\n  angular.module(\"taigaDiscover\").controller(\"DiscoverSearch\", DiscoverSearchController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverSearchDirective;\n\n  DiscoverSearchDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl) {\n      return ctrl.fetch();\n    };\n    return {\n      controller: \"DiscoverSearch\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  DiscoverSearchDirective.$inject = [];\n\n  angular.module(\"taigaDiscover\").directive(\"tgDiscoverSearch\", DiscoverSearchDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DiscoverProjectsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  DiscoverProjectsService = (function(superClass) {\n    var _discoverParams;\n\n    extend(DiscoverProjectsService, superClass);\n\n    DiscoverProjectsService.$inject = [\"tgResources\", \"tgProjectsService\"];\n\n    _discoverParams = {\n      discover_mode: true\n    };\n\n    function DiscoverProjectsService(rs, projectsService) {\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this._mostLiked = Immutable.List();\n      this._mostActive = Immutable.List();\n      this._featured = Immutable.List();\n      this._searchResult = Immutable.List();\n      this._projectsCount = 0;\n      this.decorate = this.projectsService._decorate.bind(this.projectsService);\n      taiga.defineImmutableProperty(this, \"mostLiked\", (function(_this) {\n        return function() {\n          return _this._mostLiked;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"mostActive\", (function(_this) {\n        return function() {\n          return _this._mostActive;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"featured\", (function(_this) {\n        return function() {\n          return _this._featured;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"searchResult\", (function(_this) {\n        return function() {\n          return _this._searchResult;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"nextSearchPage\", (function(_this) {\n        return function() {\n          return _this._nextSearchPage;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsCount\", (function(_this) {\n        return function() {\n          return _this._projectsCount;\n        };\n      })(this));\n    }\n\n    DiscoverProjectsService.prototype.fetchMostLiked = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostLiked = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchMostActive = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._mostActive = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchFeatured = function() {\n      var _params;\n      _params = _.extend({}, _discoverParams);\n      _params.is_featured = true;\n      return this.rs.projects.getProjects(_params, false).then((function(_this) {\n        return function(result) {\n          var data, projects;\n          data = result.data.slice(0, 4);\n          projects = Immutable.fromJS(data);\n          projects = projects.map(_this.decorate);\n          return _this._featured = projects;\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.resetSearchList = function() {\n      return this._searchResult = Immutable.List();\n    };\n\n    DiscoverProjectsService.prototype.fetchStats = function() {\n      return this.rs.stats.discover().then((function(_this) {\n        return function(discover) {\n          return _this._projectsCount = discover.getIn(['projects', 'total']);\n        };\n      })(this));\n    };\n\n    DiscoverProjectsService.prototype.fetchSearch = function(params) {\n      var _params;\n      _params = _.extend({}, _discoverParams, params);\n      return this.rs.projects.getProjects(_params).then((function(_this) {\n        return function(result) {\n          var projects;\n          _this._nextSearchPage = !!result.headers('X-Pagination-Next');\n          projects = Immutable.fromJS(result.data);\n          projects = projects.map(_this.decorate);\n          return _this._searchResult = _this._searchResult.concat(projects);\n        };\n      })(this));\n    };\n\n    return DiscoverProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaDiscover\").service(\"tgDiscoverProjectsService\", DiscoverProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicController, getRandomDefaultColor, taiga, trim;\n\n  taiga = this.taiga;\n\n  trim = taiga.trim;\n\n  getRandomDefaultColor = taiga.getRandomDefaultColor;\n\n  CreateEpicController = (function() {\n    CreateEpicController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"$tgAnalytics\"];\n\n    function CreateEpicController(confirm, projectService, epicsService, analytics) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.analytics = analytics;\n      this.project = this.projectService.project.toJS();\n      this.newEpic = {\n        color: getRandomDefaultColor(),\n        status: this.project.default_epic_status,\n        tags: []\n      };\n      this.attachments = Immutable.List();\n      this.loading = false;\n    }\n\n    CreateEpicController.prototype.createEpic = function() {\n      if (!this.validateForm()) {\n        return;\n      }\n      this.loading = true;\n      return this.epicsService.createEpic(this.newEpic, this.attachments).then((function(_this) {\n        return function(response) {\n          _this.analytics.trackEvent(\"epic\", \"create\", \"create epic\", 1);\n          _this.onCreateEpic();\n          return _this.loading = false;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          _this.setFormErrors(response.data);\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          }\n        };\n      })(this));\n    };\n\n    CreateEpicController.prototype.selectColor = function(color) {\n      return this.newEpic.color = color;\n    };\n\n    CreateEpicController.prototype.addTag = function(name, color) {\n      name = trim(name.toLowerCase());\n      if (!_.find(this.newEpic.tags, function(it) {\n        return it[0] === name;\n      })) {\n        return this.newEpic.tags.push([name, color]);\n      }\n    };\n\n    CreateEpicController.prototype.deleteTag = function(tag) {\n      return _.remove(this.newEpic.tags, function(it) {\n        return it[0] === tag[0];\n      });\n    };\n\n    CreateEpicController.prototype.addAttachment = function(attachment) {\n      return this.attachments.push(attachment);\n    };\n\n    return CreateEpicController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"CreateEpicCtrl\", CreateEpicController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateEpicDirective;\n\n  CreateEpicDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var form;\n      form = el.find(\"form\").checksley();\n      ctrl.validateForm = (function(_this) {\n        return function() {\n          return form.validate();\n        };\n      })(this);\n      return ctrl.setFormErrors = (function(_this) {\n        return function(errors) {\n          return form.setErrors(errors);\n        };\n      })(this);\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/create-epic/create-epic.html\",\n      controller: \"CreateEpicCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        onCreateEpic: '&'\n      },\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgCreateEpic\", CreateEpicDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowController;\n\n  EpicRowController = (function() {\n    EpicRowController.$inject = [\"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\"];\n\n    function EpicRowController(confirm, projectService, epicsService) {\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.displayUserStories = false;\n      this.displayAssignedTo = false;\n      this.displayStatusList = false;\n      this.loadingStatus = false;\n      this.project = this.projectService.project.toJS();\n      this._calculateProgressBar();\n    }\n\n    EpicRowController.prototype._calculateProgressBar = function() {\n      var progress, total;\n      if (this.epic.getIn(['status_extra_info', 'is_closed']) === true) {\n        return this.percentage = \"100%\";\n      } else {\n        progress = this.epic.getIn(['user_stories_counts', 'progress']);\n        total = this.epic.getIn(['user_stories_counts', 'total']);\n        if (total === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (progress * 100 / total) + \"%\";\n        }\n      }\n    };\n\n    EpicRowController.prototype.canEditEpics = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    EpicRowController.prototype.toggleUserStoryList = function() {\n      if (!this.displayUserStories) {\n        return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n          return function(userStories) {\n            _this.epicStories = userStories;\n            return _this.displayUserStories = true;\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function() {\n            return _this.confirm.notify('error');\n          };\n        })(this));\n      } else {\n        return this.displayUserStories = false;\n      }\n    };\n\n    EpicRowController.prototype.updateStatus = function(statusId) {\n      this.displayStatusList = false;\n      this.loadingStatus = true;\n      return this.epicsService.updateEpicStatus(this.epic, statusId)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loadingStatus = false;\n        };\n      })(this));\n    };\n\n    EpicRowController.prototype.updateAssignedTo = function(member) {\n      this.assignLoader = true;\n      return this.epicsService.updateEpicAssignedTo(this.epic, (member != null ? member.id : void 0) || null)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify('error');\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          return _this.assignLoader = false;\n        };\n      })(this));\n    };\n\n    return EpicRowController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicRowCtrl\", EpicRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicRowDirective;\n\n  EpicRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epic-row/epic-row.html\",\n      controller: \"EpicRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        epic: '=',\n        options: '='\n      }\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicRow\", EpicRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsDashboardController, taiga;\n\n  taiga = this.taiga;\n\n  EpicsDashboardController = (function() {\n    EpicsDashboardController.$inject = [\"$routeParams\", \"tgErrorHandlingService\", \"tgLightboxFactory\", \"lightboxService\", \"$tgConfirm\", \"tgProjectService\", \"tgEpicsService\", \"tgAppMetaService\", \"$translate\"];\n\n    function EpicsDashboardController(params, errorHandlingService, lightboxFactory, lightboxService, confirm, projectService, epicsService, appMetaService, translate) {\n      this.params = params;\n      this.errorHandlingService = errorHandlingService;\n      this.lightboxFactory = lightboxFactory;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.sectionName = \"EPICS.SECTION_NAME\";\n      taiga.defineImmutableProperty(this, 'project', (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    EpicsDashboardController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\"),\n        projectDescription: this.project.get(\"description\")\n      };\n      return {\n        title: this.translate.instant(\"EPICS.PAGE_TITLE\", ctx),\n        description: this.translate.instant(\"EPICS.PAGE_DESCRIPTION\", ctx)\n      };\n    };\n\n    EpicsDashboardController.prototype.loadInitialData = function() {\n      this.epicsService.clear();\n      return this.projectService.setProjectBySlug(this.params.pslug).then((function(_this) {\n        return function() {\n          if (!_this.projectService.isEpicsDashboardEnabled()) {\n            return _this.errorHandlingService.notFound();\n          }\n          if (!_this.projectService.hasPermission(\"view_epics\")) {\n            return _this.errorHandlingService.permissionDenied();\n          }\n          return _this.epicsService.fetchEpics();\n        };\n      })(this));\n    };\n\n    EpicsDashboardController.prototype.canCreateEpics = function() {\n      return this.projectService.hasPermission(\"add_epic\");\n    };\n\n    EpicsDashboardController.prototype.onCreateEpic = function() {\n      var onCreateEpic;\n      onCreateEpic = (function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.confirm.notify(\"success\");\n        };\n      })(this);\n      return this.lightboxFactory.create('tg-create-epic', {\n        \"class\": \"lightbox lightbox-create-epic open\",\n        \"on-create-epic\": \"onCreateEpic()\"\n      }, {\n        \"onCreateEpic\": onCreateEpic.bind(this)\n      });\n    };\n\n    return EpicsDashboardController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsDashboardCtrl\", EpicsDashboardController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsSortableDirective;\n\n  EpicsSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgEpicsSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('div.epics-table-body-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var epic, itemEl, newIndex;\n        itemEl = $(item);\n        epic = itemEl.scope().epic;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            epic: epic,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  EpicsSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  angular.module(\"taigaComponents\").directive(\"tgEpicsSortable\", EpicsSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableController, generateHash, taiga;\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  EpicsTableController = (function() {\n    EpicsTableController.$inject = [\"$tgConfirm\", \"tgEpicsService\", \"$timeout\", \"$tgStorage\", \"tgProjectService\"];\n\n    function EpicsTableController(confirm, epicsService, timeout, storage, projectService) {\n      this.confirm = confirm;\n      this.epicsService = epicsService;\n      this.timeout = timeout;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.hash = generateHash([this.projectService.project.get('id'), 'epics']);\n      this.displayOptions = false;\n      this.displayVotes = true;\n      this.options = this.storage.get(this.hash, {\n        votes: true,\n        name: true,\n        project: true,\n        sprint: true,\n        assigned: true,\n        status: true,\n        progress: true,\n        closed: true,\n        closed_us: true\n      });\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this.epicsService.epics;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disabledEpicsPagination', (function(_this) {\n        return function() {\n          return _this.epicsService._disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingEpics', (function(_this) {\n        return function() {\n          return _this.epicsService._loadingEpics;\n        };\n      })(this));\n    }\n\n    EpicsTableController.prototype.toggleEpicTableOptions = function() {\n      return this.displayOptions = !this.displayOptions;\n    };\n\n    EpicsTableController.prototype.reorderEpic = function(epic, newIndex) {\n      if (epic.get('epics_order') === newIndex) {\n        return null;\n      }\n      return this.epicsService.reorderEpic(epic, newIndex).then(null, (function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    EpicsTableController.prototype.nextPage = function() {\n      return this.epicsService.nextPage();\n    };\n\n    EpicsTableController.prototype.hoverEpicTableOption = function() {\n      if (this.timer) {\n        return this.timeout.cancel(this.timer);\n      }\n    };\n\n    EpicsTableController.prototype.hideEpicTableOption = function() {\n      return this.timer = this.timeout(((function(_this) {\n        return function() {\n          return _this.displayOptions = false;\n        };\n      })(this)), 400);\n    };\n\n    EpicsTableController.prototype.updateViewOptions = function() {\n      return this.storage.set(this.hash, this.options);\n    };\n\n    return EpicsTableController;\n\n  })();\n\n  angular.module(\"taigaEpics\").controller(\"EpicsTableCtrl\", EpicsTableController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsTableDirective;\n\n  EpicsTableDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/epics-table/epics-table.html\",\n      controller: \"EpicsTableCtrl\",\n      controllerAs: \"vm\",\n      scope: {}\n    };\n  };\n\n  angular.module('taigaEpics').directive(\"tgEpicsTable\", EpicsTableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  StoryRowController = (function() {\n    StoryRowController.$inject = [];\n\n    function StoryRowController() {\n      this._calculateProgressBar();\n    }\n\n    StoryRowController.prototype._calculateProgressBar = function() {\n      var totalTasks, totalTasksCompleted;\n      if (this.story.get('is_closed') === true) {\n        return this.percentage = \"100%\";\n      } else {\n        totalTasks = this.story.get('tasks').size;\n        totalTasksCompleted = this.story.get('tasks').filter(function(it) {\n          return it.get(\"is_closed\");\n        }).size;\n        if (totalTasks === 0) {\n          return this.percentage = \"0%\";\n        } else {\n          return this.percentage = (totalTasksCompleted * 100 / totalTasks) + \"%\";\n        }\n      }\n    };\n\n    return StoryRowController;\n\n  })();\n\n  module.controller(\"StoryRowCtrl\", StoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var StoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  StoryRowDirective = function() {\n    return {\n      templateUrl: \"epics/dashboard/story-row/story-row.html\",\n      controller: \"StoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        story: '=',\n        options: '='\n      }\n    };\n  };\n\n  module.directive(\"tgStoryRow\", StoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var EpicsService, taiga;\n\n  taiga = this.taiga;\n\n  EpicsService = (function() {\n    EpicsService.$inject = ['tgProjectService', 'tgAttachmentsService', 'tgResources', 'tgXhrErrorService', '$q'];\n\n    function EpicsService(projectService, attachmentsService, resources, xhrError, q) {\n      this.projectService = projectService;\n      this.attachmentsService = attachmentsService;\n      this.resources = resources;\n      this.xhrError = xhrError;\n      this.q = q;\n      this.clear();\n      taiga.defineImmutableProperty(this, 'epics', (function(_this) {\n        return function() {\n          return _this._epics;\n        };\n      })(this));\n    }\n\n    EpicsService.prototype.clear = function() {\n      this._loadingEpics = false;\n      this._disablePagination = false;\n      this._page = 1;\n      return this._epics = Immutable.List();\n    };\n\n    EpicsService.prototype.fetchEpics = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      this._loadingEpics = true;\n      this._disablePagination = true;\n      return this.resources.epics.list(this.projectService.project.get('id'), this._page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this._epics = result.list;\n          } else {\n            _this._epics = _this._epics.concat(result.list);\n          }\n          _this._loadingEpics = false;\n          return _this._disablePagination = !result.headers('x-pagination-next');\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.nextPage = function() {\n      this._page++;\n      return this.fetchEpics();\n    };\n\n    EpicsService.prototype.listRelatedUserStories = function(epic) {\n      return this.resources.userstories.listInEpic(epic.get('id'));\n    };\n\n    EpicsService.prototype.createEpic = function(epicData, attachments, projectId) {\n      if (projectId) {\n        epicData.project = projectId;\n      } else {\n        epicData.project = this.projectService.project.get('id');\n      }\n      return this.resources.epics.post(epicData).then((function(_this) {\n        return function(epic) {\n          var promises;\n          if (!attachments) {\n            return epic;\n          } else {\n            promises = _.map(attachments.toJS(), function(attachment) {\n              return _this.attachmentsService.upload(attachment.file, epic.get('id'), epic.get('project'), 'epic');\n            });\n            return _this.q.all(promises).then(_this.fetchEpics.bind(_this, true));\n          }\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderEpic = function(epic, newIndex) {\n      var afterDestination, beforeDestination, data, newOrder, orderList, previous, previousWithTheSameOrder, setOrders, withoutMoved;\n      orderList = {};\n      this._epics.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order');\n      });\n      withoutMoved = this.epics.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== epic.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      afterDestination = withoutMoved.slice(newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epics_order') + 1;\n      orderList[epic.get('id')] = newOrder;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epics_order') === previous.get('epics_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epics_order')];\n        };\n      })(this)).toJS());\n      afterDestination.forEach(function(it) {\n        return orderList[it.get('id')] = it.get('epics_order') + 1;\n      });\n      this._epics = this._epics.map(function(it) {\n        return it.set('epics_order', orderList[it.get('id')]);\n      });\n      this._epics = this._epics.sortBy(function(it) {\n        return it.get('epics_order');\n      });\n      data = {\n        epics_order: newOrder,\n        version: epic.get('version')\n      };\n      return this.resources.epics.reorder(epic.get('id'), data, setOrders).then((function(_this) {\n        return function(newEpic) {\n          return _this._epics = _this._epics.map(function(it) {\n            if (it.get('id') === newEpic.get('id')) {\n              return newEpic;\n            }\n            return it;\n          });\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.reorderRelatedUserstory = function(epic, epicUserstories, userstory, newIndex) {\n      var beforeDestination, data, epicId, newOrder, previous, previousWithTheSameOrder, setOrders, userstoryId, withoutMoved;\n      withoutMoved = epicUserstories.filter((function(_this) {\n        return function(it) {\n          return it.get('id') !== userstory.get('id');\n        };\n      })(this));\n      beforeDestination = withoutMoved.slice(0, newIndex);\n      previous = beforeDestination.last();\n      newOrder = !previous ? 0 : previous.get('epic_order') + 1;\n      previousWithTheSameOrder = beforeDestination.filter((function(_this) {\n        return function(it) {\n          return it.get('epic_order') === previous.get('epic_order');\n        };\n      })(this));\n      setOrders = _.fromPairs(previousWithTheSameOrder.map((function(_this) {\n        return function(it) {\n          return [it.get('id'), it.get('epic_order')];\n        };\n      })(this)).toJS());\n      data = {\n        order: newOrder\n      };\n      epicId = epic.get('id');\n      userstoryId = userstory.get('id');\n      return this.resources.epics.reorderRelatedUserstory(epicId, userstoryId, data, setOrders).then((function(_this) {\n        return function() {\n          return _this.listRelatedUserStories(epic);\n        };\n      })(this));\n    };\n\n    EpicsService.prototype.replaceEpic = function(epic) {\n      return this._epics = this._epics.map(function(it) {\n        if (it.get('id') === epic.get('id')) {\n          return epic;\n        }\n        return it;\n      });\n    };\n\n    EpicsService.prototype.updateEpicStatus = function(epic, statusId) {\n      var data;\n      data = {\n        status: statusId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    EpicsService.prototype.updateEpicAssignedTo = function(epic, userId) {\n      var data;\n      data = {\n        assigned_to: userId,\n        version: epic.get('version')\n      };\n      return this.resources.epics.patch(epic.get('id'), data).then(this.replaceEpic.bind(this));\n    };\n\n    return EpicsService;\n\n  })();\n\n  angular.module('taigaEpics').service('tgEpicsService', EpicsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserStoriesController = (function() {\n    RelatedUserStoriesController.$inject = [\"tgProjectService\", \"tgEpicsService\"];\n\n    function RelatedUserStoriesController(projectService, epicsService) {\n      this.projectService = projectService;\n      this.epicsService = epicsService;\n      this.sectionName = \"Epics\";\n      this.showCreateRelatedUserstoriesLightbox = false;\n    }\n\n    RelatedUserStoriesController.prototype.showRelatedUserStoriesSection = function() {\n      var ref;\n      return this.projectService.hasPermission(\"view_epics\") || ((ref = this.userstories) != null ? ref.length : void 0) > 0;\n    };\n\n    RelatedUserStoriesController.prototype.userCanSort = function() {\n      return this.projectService.hasPermission(\"modify_epic\");\n    };\n\n    RelatedUserStoriesController.prototype.loadRelatedUserstories = function() {\n      return this.epicsService.listRelatedUserStories(this.epic).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    RelatedUserStoriesController.prototype.reorderRelatedUserstory = function(us, newIndex) {\n      return this.epicsService.reorderRelatedUserstory(this.epic, this.userstories, us, newIndex).then((function(_this) {\n        return function(userstories) {\n          return _this.userstories = userstories;\n        };\n      })(this));\n    };\n\n    return RelatedUserStoriesController;\n\n  })();\n\n  module.controller(\"RelatedUserStoriesCtrl\", RelatedUserStoriesController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoriesCreateController = (function() {\n    RelatedUserstoriesCreateController.$inject = [\"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\", \"$tgAnalytics\"];\n\n    function RelatedUserstoriesCreateController(currentUserService, rs, confirm, analytics) {\n      this.currentUserService = currentUserService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.analytics = analytics;\n      this.projects = null;\n      this.projectUserstories = Immutable.List();\n      this.loading = false;\n    }\n\n    RelatedUserstoriesCreateController.prototype.loadProjects = function() {\n      if (this.projects === null) {\n        return this.projects = this.currentUserService.projects.get(\"unblocked\");\n      }\n    };\n\n    RelatedUserstoriesCreateController.prototype.filterUss = function(selectedProjectId, filterText) {\n      var promise;\n      promise = this.rs.userstories.listInAllProjects({\n        project: selectedProjectId,\n        q: filterText\n      }, true).then((function(_this) {\n        return function(data) {\n          var excludeIds, filteredData;\n          excludeIds = _this.epicUserstories.map(function(us) {\n            return us.get('id');\n          });\n          filteredData = data.filter(function(us) {\n            return excludeIds.indexOf(us.get('id')) === -1;\n          });\n          return _this.projectUserstories = filteredData;\n        };\n      })(this));\n      return promise;\n    };\n\n    RelatedUserstoriesCreateController.prototype.saveRelatedUserStory = function(selectedUserstoryId, onSavedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateExistingUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setExistingUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onSavedRelatedUserstory) {\n            onSavedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.addRelatedUserstory(epicId, selectedUserstoryId).then(onSuccess, onError);\n    };\n\n    RelatedUserstoriesCreateController.prototype.bulkCreateRelatedUserStories = function(selectedProjectId, userstoriesText, onCreatedRelatedUserstory) {\n      var epicId, onError, onSuccess;\n      if (!this.validateNewUserstoryForm()) {\n        return;\n      }\n      this.loading = true;\n      onError = (function(_this) {\n        return function(data) {\n          _this.loading = false;\n          _this.confirm.notify(\"error\");\n          return _this.setNewUserstoryFormErrors(data);\n        };\n      })(this);\n      onSuccess = (function(_this) {\n        return function() {\n          _this.analytics.trackEvent(\"epic related user story\", \"create\", \"create related user story on epic\", 1);\n          _this.loading = false;\n          if (onCreatedRelatedUserstory) {\n            onCreatedRelatedUserstory();\n          }\n          return _this.loadRelatedUserstories();\n        };\n      })(this);\n      epicId = this.epic.get('id');\n      return this.rs.epics.bulkCreateRelatedUserStories(epicId, selectedProjectId, userstoriesText).then(onSuccess, onError);\n    };\n\n    return RelatedUserstoriesCreateController;\n\n  })();\n\n  module.controller(\"RelatedUserstoriesCreateCtrl\", RelatedUserstoriesCreateController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesCreateDirective, debounceLeading, module;\n\n  module = angular.module('taigaEpics');\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  RelatedUserstoriesCreateDirective = function(lightboxService1) {\n    var link;\n    this.lightboxService = lightboxService1;\n    link = function(scope, el, attrs, ctrl) {\n      var existingUserstoryForm, newUserstoryForm;\n      newUserstoryForm = el.find(\".new-user-story-form\").checksley();\n      existingUserstoryForm = el.find(\".existing-user-story-form\").checksley();\n      ctrl.validateNewUserstoryForm = (function(_this) {\n        return function() {\n          return newUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setNewUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return newUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      ctrl.validateExistingUserstoryForm = (function(_this) {\n        return function() {\n          return existingUserstoryForm.validate();\n        };\n      })(this);\n      ctrl.setExistingUserstoryFormErrors = (function(_this) {\n        return function(errors) {\n          return existingUserstoryForm.setErrors(errors);\n        };\n      })(this);\n      scope.showLightbox = function(selectedProjectId) {\n        ctrl.loadProjects();\n        return scope.selectProject(selectedProjectId).then((function(_this) {\n          return function() {\n            return lightboxService.open(el.find(\".lightbox-create-related-user-stories\"));\n          };\n        })(this));\n      };\n      scope.closeLightbox = function() {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        scope.relatedUserstoriesText = \"\";\n        return lightboxService.close(el.find(\".lightbox-create-related-user-stories\"));\n      };\n      scope.$watch('vm.project', function(project) {\n        if (project != null) {\n          return scope.selectedProject = project.get('id');\n        }\n      });\n      scope.selectProject = function(selectedProjectId) {\n        scope.selectedUserstory = null;\n        scope.searchUserstory = \"\";\n        return ctrl.filterUss(selectedProjectId, scope.searchUserstory);\n      };\n      return scope.onUpdateSearchUserstory = debounceLeading(300, function() {\n        scope.selectedUserstory = null;\n        return ctrl.filterUss(scope.selectedProject, scope.searchUserstory);\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstories-create/related-userstories-create.html\",\n      controller: \"RelatedUserstoriesCreateCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        showCreateRelatedUserstoriesLightbox: \"=\",\n        project: \"=\",\n        epic: \"=\",\n        epicUserstories: \"=\",\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoriesCreateDirective.$inject = [\"lightboxService\"];\n\n  module.directive(\"tgRelatedUserstoriesCreate\", RelatedUserstoriesCreateDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoriesSortableDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoriesSortableDirective = function($parse, projectService) {\n    var link;\n    link = function(scope, el, attrs) {\n      var callback, drake, scroll;\n      if (!projectService.hasPermission(\"modify_epic\")) {\n        return;\n      }\n      callback = $parse(attrs.tgRelatedUserstoriesSortable);\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).is('tg-related-userstory-row');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var itemEl, newIndex, us;\n        itemEl = $(item);\n        us = itemEl.scope().us;\n        newIndex = itemEl.index();\n        return scope.$apply(function() {\n          return callback(scope, {\n            us: us,\n            newIndex: newIndex\n          });\n        });\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    return {\n      link: link\n    };\n  };\n\n  RelatedUserstoriesSortableDirective.$inject = [\"$parse\", \"tgProjectService\"];\n\n  module.directive(\"tgRelatedUserstoriesSortable\", RelatedUserstoriesSortableDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserStoriesDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserStoriesDirective = function() {\n    return {\n      templateUrl: \"epics/related-userstories/related-userstories.html\",\n      controller: \"RelatedUserStoriesCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstories: '=',\n        project: '=',\n        epic: '='\n      }\n    };\n  };\n\n  RelatedUserStoriesDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstories\", RelatedUserStoriesDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowController, module;\n\n  module = angular.module(\"taigaEpics\");\n\n  RelatedUserstoryRowController = (function() {\n    RelatedUserstoryRowController.$inject = [\"tgAvatarService\", \"$translate\", \"$tgConfirm\", \"tgResources\"];\n\n    function RelatedUserstoryRowController(avatarService, translate, confirm, rs) {\n      this.avatarService = avatarService;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.rs = rs;\n    }\n\n    RelatedUserstoryRowController.prototype.setAvatarData = function() {\n      var member;\n      member = this.userstory.get('assigned_to_extra_info');\n      return this.avatar = this.avatarService.getAvatar(member);\n    };\n\n    RelatedUserstoryRowController.prototype.getAssignedToFullNameDisplay = function() {\n      if (this.userstory.get('assigned_to')) {\n        return this.userstory.getIn(['assigned_to_extra_info', 'full_name_display']);\n      }\n      return this.translate.instant(\"COMMON.ASSIGNED_TO.NOT_ASSIGNED\");\n    };\n\n    RelatedUserstoryRowController.prototype.onDeleteRelatedUserstory = function() {\n      var message, title;\n      title = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.TITLE\");\n      message = this.translate.instant(\"LIGHTBOX.REMOVE_RELATIONSHIP_WITH_EPIC.MESSAGE\", {\n        epicSubject: this.epic.get('subject')\n      });\n      return this.confirm.ask(title, null, message).then((function(_this) {\n        return function(askResponse) {\n          var epicId, onError, onSuccess, userstoryId;\n          onError = function() {\n            message = _this.translate.instant('EPIC.ERROR_UNLINK_RELATED_USERSTORY', {\n              errorMessage: message\n            });\n            _this.confirm.notify(\"error\", null, message);\n            return askResponse.finish(false);\n          };\n          onSuccess = function() {\n            _this.loadRelatedUserstories();\n            return askResponse.finish();\n          };\n          epicId = _this.epic.get('id');\n          userstoryId = _this.userstory.get('id');\n          return _this.rs.epics.deleteRelatedUserstory(epicId, userstoryId).then(onSuccess, onError);\n        };\n      })(this));\n    };\n\n    return RelatedUserstoryRowController;\n\n  })();\n\n  module.controller(\"RelatedUserstoryRowCtrl\", RelatedUserstoryRowController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var RelatedUserstoryRowDirective, module;\n\n  module = angular.module('taigaEpics');\n\n  RelatedUserstoryRowDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.setAvatarData();\n    };\n    return {\n      link: link,\n      templateUrl: \"epics/related-userstories/related-userstory-row/related-userstory-row.html\",\n      controller: \"RelatedUserstoryRowCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        userstory: '=',\n        epic: '=',\n        project: '=',\n        loadRelatedUserstories: \"&\"\n      }\n    };\n  };\n\n  RelatedUserstoryRowDirective.$inject = [];\n\n  module.directive(\"tgRelatedUserstoryRow\", RelatedUserstoryRowDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppController, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ExternalAppController = (function(superClass) {\n    extend(ExternalAppController, superClass);\n\n    ExternalAppController.$inject = [\"$routeParams\", \"tgExternalAppsService\", \"$window\", \"tgCurrentUserService\", \"$location\", \"$tgNavUrls\", \"tgXhrErrorService\", \"tgLoader\"];\n\n    function ExternalAppController(routeParams, externalAppsService, window, currentUserService, location, navUrls, xhrError, loader) {\n      var loginUrl, nextUrl;\n      this.routeParams = routeParams;\n      this.externalAppsService = externalAppsService;\n      this.window = window;\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.xhrError = xhrError;\n      this.loader = loader;\n      this.createApplicationToken = bind(this.createApplicationToken, this);\n      this._getApplicationToken = bind(this._getApplicationToken, this);\n      this._redirect = bind(this._redirect, this);\n      this.loader.start(false);\n      this._applicationId = this.routeParams.application;\n      this._state = this.routeParams.state;\n      this._getApplicationToken();\n      this._user = this.currentUserService.getUser();\n      this._application = null;\n      nextUrl = encodeURIComponent(this.location.url());\n      loginUrl = this.navUrls.resolve(\"login\");\n      this.loginWithAnotherUserUrl = loginUrl + \"?next=\" + nextUrl + \"&force_login=1\";\n      taiga.defineImmutableProperty(this, \"user\", (function(_this) {\n        return function() {\n          return _this._user;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"application\", (function(_this) {\n        return function() {\n          return _this._application;\n        };\n      })(this));\n    }\n\n    ExternalAppController.prototype._redirect = function(applicationToken) {\n      var nextUrl;\n      nextUrl = applicationToken.get(\"next_url\");\n      return this.window.open(nextUrl, \"_self\");\n    };\n\n    ExternalAppController.prototype._getApplicationToken = function() {\n      return this.externalAppsService.getApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          _this._application = data.get(\"application\");\n          if (data.get(\"auth_code\")) {\n            return _this._redirect(data);\n          } else {\n            return _this.loader.pageLoaded();\n          }\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          _this.loader.pageLoaded();\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    ExternalAppController.prototype.cancel = function() {\n      return this.window.history.back();\n    };\n\n    ExternalAppController.prototype.createApplicationToken = function() {\n      return this.externalAppsService.authorizeApplicationToken(this._applicationId, this._state).then((function(_this) {\n        return function(data) {\n          return _this._redirect(data);\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(xhr);\n        };\n      })(this));\n    };\n\n    return ExternalAppController;\n\n  })(taiga.Controller);\n\n  angular.module(\"taigaExternalApps\").controller(\"ExternalApp\", ExternalAppController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ExternalAppsService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ExternalAppsService = (function(superClass) {\n    extend(ExternalAppsService, superClass);\n\n    ExternalAppsService.$inject = [\"tgResources\"];\n\n    function ExternalAppsService(rs) {\n      this.rs = rs;\n    }\n\n    ExternalAppsService.prototype.getApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.getApplicationToken(applicationId, state);\n    };\n\n    ExternalAppsService.prototype.authorizeApplicationToken = function(applicationId, state) {\n      return this.rs.externalapps.authorizeApplicationToken(applicationId, state);\n    };\n\n    return ExternalAppsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaExternalApps\").service(\"tgExternalAppsService\", ExternalAppsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FeedbackService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  FeedbackService = (function(superClass) {\n    extend(FeedbackService, superClass);\n\n    FeedbackService.$inject = [\"tgLightboxFactory\"];\n\n    function FeedbackService(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    FeedbackService.prototype.sendFeedback = function() {\n      return this.lightboxFactory.create(\"tg-lb-feedback\", {\n        \"class\": \"lightbox lightbox-feedback lightbox-generic-form\"\n      });\n    };\n\n    return FeedbackService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaFeedback\").service(\"tgFeedbackService\", FeedbackService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivityService, taiga;\n\n  taiga = this.taiga;\n\n  ActivityService = (function() {\n    ActivityService.$inject = ['tgResources', 'tgXhrErrorService'];\n\n    function ActivityService(rs, xhrError) {\n      this.rs = rs;\n      this.xhrError = xhrError;\n      this._contentType = null;\n      this._objectId = null;\n      this.clear();\n    }\n\n    ActivityService.prototype.clear = function() {\n      this.page = 1;\n      this.loadingEntries = false;\n      this.disablePagination = false;\n      this.entries = Immutable.List();\n      return this.count = null;\n    };\n\n    ActivityService.prototype.fetchEntries = function(reset) {\n      if (reset == null) {\n        reset = false;\n      }\n      if (reset) {\n        this.page = 1;\n      }\n      this.loadingEntries = true;\n      this.disablePagination = true;\n      if (!this._contentType || !this._objectId) {\n        return;\n      }\n      return this.rs.history.getHistory('activity', this._contentType, this._objectId, this.page).then((function(_this) {\n        return function(result) {\n          if (reset) {\n            _this.clear();\n            _this.entries = result.list;\n          } else {\n            _this.entries = _this.entries.concat(result.list);\n          }\n          _this.loadingEntries = false;\n          _this.disablePagination = !result.headers('x-pagination-next');\n          _this.count = result.headers('x-pagination-count');\n          return _this.entries;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(xhr) {\n          return _this.xhrError.response(_this.entries);\n        };\n      })(this));\n    };\n\n    ActivityService.prototype.nextPage = function(historyType) {\n      if (historyType == null) {\n        historyType = 'comment';\n      }\n      this.page++;\n      return this.fetchEntries();\n    };\n\n    ActivityService.prototype.init = function(contentType, objectId) {\n      this._contentType = contentType;\n      this._objectId = objectId;\n      return this.clear();\n    };\n\n    return ActivityService;\n\n  })();\n\n  angular.module('taigaHistory').service('tgActivityService', ActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentController = (function() {\n    CommentController.$inject = [\"tgCurrentUserService\", \"tgCheckPermissionsService\", \"tgLightboxFactory\"];\n\n    function CommentController(currentUserService, permissionService, lightboxFactory) {\n      this.currentUserService = currentUserService;\n      this.permissionService = permissionService;\n      this.lightboxFactory = lightboxFactory;\n      this.hiddenDeletedComment = true;\n    }\n\n    CommentController.prototype.showDeletedComment = function() {\n      return this.hiddenDeletedComment = false;\n    };\n\n    CommentController.prototype.hideDeletedComment = function() {\n      return this.hiddenDeletedComment = true;\n    };\n\n    CommentController.prototype.checkCancelComment = function(event) {\n      if (event.keyCode === 27) {\n        return this.onEditMode({\n          commentId: this.comment.id\n        });\n      }\n    };\n\n    CommentController.prototype.canEditDeleteComment = function() {\n      if (this.currentUserService.getUser()) {\n        this.user = this.currentUserService.getUser();\n        return this.user.get('id') === this.comment.user.pk || this.permissionService.check('modify_project');\n      }\n    };\n\n    CommentController.prototype.saveComment = function(text, cb) {\n      return this.onEditComment({\n        commentId: this.comment.id,\n        commentData: text,\n        callback: cb\n      });\n    };\n\n    CommentController.prototype.displayCommentHistory = function() {\n      return this.lightboxFactory.create('tg-lb-display-historic', {\n        \"class\": \"lightbox lightbox-display-historic\",\n        \"comment\": \"comment\",\n        \"name\": \"name\",\n        \"object\": \"object\"\n      }, {\n        \"comment\": this.comment,\n        \"name\": this.name,\n        \"object\": this.object\n      });\n    };\n\n    return CommentController;\n\n  })();\n\n  module.controller(\"CommentCtrl\", CommentController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentDirective = function() {\n    return {\n      scope: {\n        name: \"@\",\n        projectId: \"@\",\n        object: \"@\",\n        comment: \"<\",\n        type: \"<\",\n        loading: \"<\",\n        editing: \"<\",\n        deleting: \"<\",\n        objectId: \"<\",\n        editMode: \"<\",\n        project: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onEditComment: \"&\"\n      },\n      templateUrl: \"history/comments/comment.html\",\n      bindToController: true,\n      controller: 'CommentCtrl',\n      controllerAs: \"vm\"\n    };\n  };\n\n  module.directive(\"tgComment\", CommentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  CommentsController = (function() {\n    CommentsController.$inject = [];\n\n    function CommentsController() {}\n\n    CommentsController.prototype.initializePermissions = function() {\n      return this.canAddCommentPermission = 'comment_' + this.name;\n    };\n\n    return CommentsController;\n\n  })();\n\n  module.controller(\"CommentsCtrl\", CommentsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CommentsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  CommentsDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initializePermissions();\n    };\n    return {\n      scope: {\n        type: \"<\",\n        name: \"@\",\n        object: \"@\",\n        comments: \"<\",\n        onEditMode: \"&\",\n        onDeleteComment: \"&\",\n        onRestoreDeletedComment: \"&\",\n        onAddComment: \"&\",\n        onEditComment: \"&\",\n        editMode: \"<\",\n        loading: \"<\",\n        deleting: \"<\",\n        editing: \"<\",\n        project: \"=\",\n        reverse: \"=\"\n      },\n      templateUrl: \"history/comments/comments.html\",\n      bindToController: true,\n      controller: 'CommentsCtrl',\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgComments\", CommentsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  LightboxDisplayHistoricController = (function() {\n    LightboxDisplayHistoricController.$inject = [\"$tgResources\"];\n\n    function LightboxDisplayHistoricController(rs) {\n      this.rs = rs;\n    }\n\n    LightboxDisplayHistoricController.prototype._loadHistoric = function() {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.object;\n      activityId = this.comment.id;\n      return this.rs.history.getCommentHistory(type, objectId, activityId).then((function(_this) {\n        return function(data) {\n          return _this.commentHistoryEntries = data;\n        };\n      })(this));\n    };\n\n    return LightboxDisplayHistoricController;\n\n  })();\n\n  module.controller(\"LightboxDisplayHistoricCtrl\", LightboxDisplayHistoricController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxDisplayHistoricDirective;\n\n  LightboxDisplayHistoricDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._loadHistoric();\n      return lightboxService.open(el);\n    };\n    return {\n      scope: {},\n      bindToController: {\n        name: '=',\n        object: '=',\n        comment: '='\n      },\n      templateUrl: \"history/history-lightbox/comment-history-lightbox.html\",\n      controller: \"LightboxDisplayHistoricCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  LightboxDisplayHistoricDirective.$inject = [\"lightboxService\"];\n\n  angular.module('taigaHistory').directive(\"tgLbDisplayHistoric\", LightboxDisplayHistoricDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryEntryDirective;\n\n  HistoryEntryDirective = function() {\n    return {\n      scope: {\n        entry: \"<\"\n      },\n      templateUrl: \"history/history-lightbox/history-entry.html\"\n    };\n  };\n\n  angular.module('taigaHistory').directive(\"tgHistoryEntry\", HistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryTabsDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryTabsDirective = function() {\n    return {\n      templateUrl: \"history/history-tabs/history-tabs.html\",\n      scope: {\n        showCommentTab: \"&\",\n        showActivityTab: \"&\",\n        onActiveComments: \"&\",\n        onActiveActivities: \"&\",\n        onOrderComments: \"&\",\n        activeTab: \"<\",\n        commentsNum: \"<\",\n        activitiesNum: \"<\",\n        onReverse: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgHistoryTabs\", HistoryTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  HistorySectionController = (function() {\n    HistorySectionController.$inject = [\"$tgResources\", \"$tgRepo\", \"$tgStorage\", \"tgProjectService\", \"tgActivityService\", \"tgWysiwygService\"];\n\n    function HistorySectionController(rs, repo, storage, projectService, activityService, wysiwygService) {\n      this.rs = rs;\n      this.repo = repo;\n      this.storage = storage;\n      this.projectService = projectService;\n      this.activityService = activityService;\n      this.wysiwygService = wysiwygService;\n      this.editing = null;\n      this.deleting = null;\n      this.editMode = {};\n      this.viewComments = true;\n      this.reverse = this.storage.get(\"orderComments\");\n      taiga.defineImmutableProperty(this, 'disabledActivityPagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'loadingActivity', (function(_this) {\n        return function() {\n          return _this.activityService.loading;\n        };\n      })(this));\n    }\n\n    HistorySectionController.prototype._loadHistory = function() {\n      this._loadComments();\n      return this._loadActivity();\n    };\n\n    HistorySectionController.prototype._loadActivity = function() {\n      this.activityService.init(this.name, this.id);\n      return this.activityService.fetchEntries().then((function(_this) {\n        return function(response) {\n          _this.activitiesNum = _this.activityService.count;\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype._loadComments = function() {\n      return this.rs.history.get(this.name, this.id, 'comment').then((function(_this) {\n        return function(comments) {\n          _this.comments = _.filter(comments, function(item) {\n            return item.comment !== \"\";\n          });\n          if (_this.reverse) {\n            _this.comments - _.reverse(_this.comments);\n          }\n          return _this.commentsNum = _this.comments.length;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.nextActivityPage = function() {\n      return this.activityService.nextPage().then((function(_this) {\n        return function(response) {\n          return _this.activities = response.toJS();\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.showHistorySection = function() {\n      return this.showCommentTab() || this.showActivityTab();\n    };\n\n    HistorySectionController.prototype.showCommentTab = function() {\n      return this.commentsNum > 0 || this.projectService.hasPermission(\"comment_\" + this.name);\n    };\n\n    HistorySectionController.prototype.showActivityTab = function() {\n      return this.activitiesNum > 0;\n    };\n\n    HistorySectionController.prototype.toggleEditMode = function(commentId) {\n      return this.editMode[commentId] = !this.editMode[commentId];\n    };\n\n    HistorySectionController.prototype.onActiveHistoryTab = function(active) {\n      return this.viewComments = active;\n    };\n\n    HistorySectionController.prototype.deleteComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.deleting = commentId;\n      return this.rs.history.deleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.deleting = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.editComment = function(commentId, comment) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.editComment(type, objectId, activityId, comment).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          _this.toggleEditMode(commentId);\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.restoreDeletedComment = function(commentId) {\n      var activityId, objectId, type;\n      type = this.name;\n      objectId = this.id;\n      activityId = commentId;\n      this.editing = commentId;\n      return this.rs.history.undeleteComment(type, objectId, activityId).then((function(_this) {\n        return function() {\n          _this._loadComments();\n          return _this.editing = null;\n        };\n      })(this));\n    };\n\n    HistorySectionController.prototype.addComment = function() {\n      this.editMode = {};\n      this.editing = null;\n      return this._loadComments();\n    };\n\n    HistorySectionController.prototype.onOrderComments = function() {\n      this.reverse = !this.reverse;\n      this.storage.set(\"orderComments\", this.reverse);\n      return this._loadComments();\n    };\n\n    return HistorySectionController;\n\n  })();\n\n  module.controller(\"HistorySection\", HistorySectionController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistorySectionDirective, bindOnce, module;\n\n  module = angular.module('taigaHistory');\n\n  bindOnce = this.taiga.bindOnce;\n\n  HistorySectionDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      scope.$on(\"object:updated\", function() {\n        return ctrl._loadActivity();\n      });\n      return scope.$watch('vm.id', function(value) {\n        return ctrl._loadHistory();\n      });\n    };\n    return {\n      link: link,\n      templateUrl: \"history/history.html\",\n      controller: \"HistorySection\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: \"=\",\n        name: \"@\",\n        id: \"=\",\n        project: \"=\"\n      }\n    };\n  };\n\n  HistorySectionDirective.$inject = [];\n\n  module.directive(\"tgHistorySection\", HistorySectionDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ActivitiesDiffController, module;\n\n  module = angular.module(\"taigaHistory\");\n\n  ActivitiesDiffController = (function() {\n    ActivitiesDiffController.$inject = [];\n\n    function ActivitiesDiffController() {}\n\n    ActivitiesDiffController.prototype.diffTags = function() {\n      var diff;\n      if (this.type === 'tags') {\n        this.diffRemoveTags = _.difference(this.diff[0], this.diff[1]).toString();\n        return this.diffAddTags = _.difference(this.diff[1], this.diff[0]).toString();\n      } else if (this.type === 'promoted_to') {\n        diff = _.difference(this.diff[1], this.diff[0]);\n        return this.promotedTo = _.filter(this.model.generated_user_stories, (function(_this) {\n          return function(x) {\n            return _.includes(diff, x.id);\n          };\n        })(this));\n      }\n    };\n\n    return ActivitiesDiffController;\n\n  })();\n\n  module.controller(\"ActivitiesDiffCtrl\", ActivitiesDiffController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDiffDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDiffDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.diffTags();\n    };\n    return {\n      scope: {\n        model: \"<\",\n        type: \"<\",\n        diff: \"<\"\n      },\n      templateUrl: \"history/history/history-diff.html\",\n      controller: \"ActivitiesDiffCtrl\",\n      controllerAs: 'vm',\n      bindToController: true,\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistoryDiff\", HistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HistoryDirective, module;\n\n  module = angular.module('taigaHistory');\n\n  HistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {};\n    return {\n      scope: {\n        activities: \"<\",\n        model: \"<\"\n      },\n      templateUrl: \"history/history/history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgHistory\", HistoryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DutyDirective;\n\n  DutyDirective = function(navurls, $translate) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.duty = scope.duty;\n      scope.vm.type = scope.type;\n      scope.vm.isHidden = scope.isHidden;\n      scope.vm.getDutyType = function() {\n        if (scope.vm.duty) {\n          if (scope.vm.duty.get('_name') === \"epics\") {\n            return $translate.instant(\"COMMON.EPIC\");\n          }\n          if (scope.vm.duty.get('_name') === \"userstories\") {\n            return $translate.instant(\"COMMON.USER_STORY\");\n          }\n          if (scope.vm.duty.get('_name') === \"tasks\") {\n            return $translate.instant(\"COMMON.TASK\");\n          }\n          if (scope.vm.duty.get('_name') === \"issues\") {\n            return $translate.instant(\"COMMON.ISSUE\");\n          }\n        }\n      };\n      return el.on(\"click\", \".button-hide\", function(event) {\n        event.preventDefault();\n        el.remove();\n        return scope.$emit('duty:toggle-hidden', scope.vm.duty, scope.vm.type);\n      });\n    };\n    return {\n      templateUrl: \"home/duties/duty.html\",\n      scope: {\n        \"duty\": \"=tgDuty\",\n        \"isHidden\": \"=\",\n        \"type\": \"@\"\n      },\n      link: link\n    };\n  };\n\n  DutyDirective.$inject = [\"$tgNavUrls\", \"$translate\"];\n\n  angular.module(\"taigaHome\").directive(\"tgDuty\", DutyDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeController;\n\n  HomeController = (function() {\n    HomeController.$inject = [\"tgCurrentUserService\", \"$location\", \"$tgNavUrls\"];\n\n    function HomeController(currentUserService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.location = location;\n      this.navUrls = navUrls;\n      if (!this.currentUserService.getUser()) {\n        this.location.path(this.navUrls.resolve(\"discover\"));\n      }\n    }\n\n    return HomeController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"Home\", HomeController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeService, groupBy,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  groupBy = this.taiga.groupBy;\n\n  HomeService = (function(superClass) {\n    extend(HomeService, superClass);\n\n    HomeService.$inject = [\"$tgNavUrls\", \"tgResources\", \"tgProjectsService\", \"$q\"];\n\n    function HomeService(navurls, rs, projectsService, q) {\n      this.navurls = navurls;\n      this.rs = rs;\n      this.projectsService = projectsService;\n      this.q = q;\n    }\n\n    HomeService.prototype._attachProjectInfoToWorkInProgress = function(workInProgress, projectsById) {\n      var _attachProjectInfoToDuty, _duties, _getValidDutiesAndAttachProjectInfo, assignedTo, watching;\n      _attachProjectInfoToDuty = (function(_this) {\n        return function(duty, objType) {\n          var ctx, project, url;\n          project = projectsById.get(String(duty.get('project')));\n          ctx = {\n            project: project.get('slug'),\n            ref: duty.get('ref')\n          };\n          url = _this.navurls.resolve(\"project-\" + objType + \"-detail\", ctx);\n          duty = duty.set('url', url);\n          duty = duty.set('project', project);\n          duty = duty.set(\"_name\", objType);\n          return duty;\n        };\n      })(this);\n      _getValidDutiesAndAttachProjectInfo = function(duties, dutyType) {\n        duties = duties.filter(function(duty) {\n          return projectsById.get(String(duty.get('project')));\n        });\n        duties = duties.map(function(duty) {\n          return _attachProjectInfoToDuty(duty, dutyType);\n        });\n        return duties;\n      };\n      assignedTo = workInProgress.get(\"assignedTo\");\n      if (assignedTo.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"epics\"), \"epics\");\n        assignedTo = assignedTo.set(\"epics\", _duties);\n      }\n      if (assignedTo.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"userStories\"), \"userstories\");\n        assignedTo = assignedTo.set(\"userStories\", _duties);\n      }\n      if (assignedTo.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"tasks\"), \"tasks\");\n        assignedTo = assignedTo.set(\"tasks\", _duties);\n      }\n      if (assignedTo.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(assignedTo.get(\"issues\"), \"issues\");\n        assignedTo = assignedTo.set(\"issues\", _duties);\n      }\n      watching = workInProgress.get(\"watching\");\n      if (watching.get(\"epics\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"epics\"), \"epics\");\n        watching = watching.set(\"epics\", _duties);\n      }\n      if (watching.get(\"userStories\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"userStories\"), \"userstories\");\n        watching = watching.set(\"userStories\", _duties);\n      }\n      if (watching.get(\"tasks\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"tasks\"), \"tasks\");\n        watching = watching.set(\"tasks\", _duties);\n      }\n      if (watching.get(\"issues\")) {\n        _duties = _getValidDutiesAndAttachProjectInfo(watching.get(\"issues\"), \"issues\");\n        watching = watching.set(\"issues\", _duties);\n      }\n      workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n      return workInProgress = workInProgress.set(\"watching\", watching);\n    };\n\n    HomeService.prototype.getWorkInProgress = function(userId) {\n      var assignedEpicsPromise, assignedIssuesPromise, assignedTasksPromise, assignedTo, assignedUserStoriesPromise, params_epics, params_issues, params_tasks, params_uss, projectsById, projectsPromise, watching, watchingEpicsPromise, watchingIssuesPromise, watchingTasksPromise, watchingUserStoriesPromise, workInProgress;\n      projectsById = Immutable.Map();\n      projectsPromise = this.projectsService.getListProjectsByUserId(userId).then(function(projects) {\n        return projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n          return p.id;\n        }));\n      });\n      assignedTo = Immutable.Map();\n      params_epics = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_uss = {\n        is_closed: false,\n        assigned_users: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        assigned_to: userId\n      };\n      assignedEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return assignedTo = assignedTo.set(\"epics\", epics);\n      });\n      assignedUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return assignedTo = assignedTo.set(\"userStories\", userstories);\n      });\n      assignedTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return assignedTo = assignedTo.set(\"tasks\", tasks);\n      });\n      assignedIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return assignedTo = assignedTo.set(\"issues\", issues);\n      });\n      params_epics = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_uss = {\n        is_closed: false,\n        watchers: userId,\n        dashboard: true\n      };\n      params_tasks = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      params_issues = {\n        status__is_closed: false,\n        watchers: userId\n      };\n      watching = Immutable.Map();\n      watchingEpicsPromise = this.rs.epics.listInAllProjects(params_epics).then(function(epics) {\n        return watching = watching.set(\"epics\", epics);\n      });\n      watchingUserStoriesPromise = this.rs.userstories.listInAllProjects(params_uss).then(function(userstories) {\n        return watching = watching.set(\"userStories\", userstories);\n      });\n      watchingTasksPromise = this.rs.tasks.listInAllProjects(params_tasks).then(function(tasks) {\n        return watching = watching.set(\"tasks\", tasks);\n      });\n      watchingIssuesPromise = this.rs.issues.listInAllProjects(params_issues).then(function(issues) {\n        return watching = watching.set(\"issues\", issues);\n      });\n      workInProgress = Immutable.Map();\n      return this.q.all([projectsPromise, assignedEpicsPromise, watchingEpicsPromise, assignedUserStoriesPromise, watchingUserStoriesPromise, assignedTasksPromise, watchingTasksPromise, assignedIssuesPromise, watchingIssuesPromise]).then((function(_this) {\n        return function() {\n          workInProgress = workInProgress.set(\"assignedTo\", assignedTo);\n          workInProgress = workInProgress.set(\"watching\", watching);\n          workInProgress = _this._attachProjectInfoToWorkInProgress(workInProgress, projectsById);\n          return workInProgress;\n        };\n      })(this));\n    };\n\n    return HomeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaHome\").service(\"tgHomeService\", HomeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var HomeProjectListDirective;\n\n  HomeProjectListDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      return taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n    };\n    directive = {\n      templateUrl: \"home/projects/home-project-list.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  HomeProjectListDirective.$inject = [\"tgCurrentUserService\"];\n\n  angular.module(\"taigaHome\").directive(\"tgHomeProjectList\", HomeProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnController;\n\n  WorkingOnController = (function() {\n    WorkingOnController.$inject = [\"tgHomeService\"];\n\n    function WorkingOnController(homeService) {\n      this.homeService = homeService;\n      this.assignedTo = Immutable.Map();\n      this.hiddenAssignedTo = [];\n      this.showHiddenAssignedTo = false;\n      this.watching = Immutable.Map();\n      this.showHiddenWatching = false;\n    }\n\n    WorkingOnController.prototype._setAssignedTo = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"assignedTo\").get(\"epics\");\n      userStories = workInProgress.get(\"assignedTo\").get(\"userStories\");\n      tasks = workInProgress.get(\"assignedTo\").get(\"tasks\");\n      issues = workInProgress.get(\"assignedTo\").get(\"issues\");\n      this.assignedTo = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.assignedTo.size > 0) {\n        return this.assignedTo = this.assignedTo.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype._setWatching = function(workInProgress) {\n      var epics, issues, tasks, userStories;\n      epics = workInProgress.get(\"watching\").get(\"epics\");\n      userStories = workInProgress.get(\"watching\").get(\"userStories\");\n      tasks = workInProgress.get(\"watching\").get(\"tasks\");\n      issues = workInProgress.get(\"watching\").get(\"issues\");\n      this.watching = userStories.concat(tasks).concat(issues).concat(epics);\n      if (this.watching.size > 0) {\n        return this.watching = this.watching.sortBy(function(elem) {\n          return elem.get(\"modified_date\");\n        }).reverse();\n      }\n    };\n\n    WorkingOnController.prototype.getWorkInProgress = function(userId) {\n      return this.homeService.getWorkInProgress(userId).then((function(_this) {\n        return function(workInProgress) {\n          _this._setAssignedTo(workInProgress);\n          return _this._setWatching(workInProgress);\n        };\n      })(this));\n    };\n\n    return WorkingOnController;\n\n  })();\n\n  angular.module(\"taigaHome\").controller(\"WorkingOn\", WorkingOnController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WorkingOnDirective, generateHash, taiga,\n    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  taiga = this.taiga;\n\n  generateHash = this.taiga.generateHash;\n\n  WorkingOnDirective = function(homeService, currentUserService, storage) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      var getHiddenDuties, getShowHiddenDuties, i, len, slot, slots, toggleDutyHidden, updateHiddenDuties, updateShowHiddenDuties, user, userId;\n      updateShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.showHiddenDuties[slot]);\n      };\n      getShowHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['ShowHiddenDashboardDuties', slot]);\n        return storage.get(hash) || false;\n      };\n      updateHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.set(hash, scope.hiddenDuties[slot]);\n      };\n      getHiddenDuties = function(slot) {\n        var hash;\n        hash = generateHash(['HiddenDashboardDuties', slot]);\n        return storage.get(hash) || [];\n      };\n      toggleDutyHidden = function(duty, slot) {\n        var ref;\n        if (ref = duty.get('id'), indexOf.call(scope.hiddenDuties[slot], ref) >= 0) {\n          scope.hiddenDuties[slot].splice(scope.hiddenDuties[slot].indexOf(duty.get('id')), 1);\n        } else {\n          scope.hiddenDuties[slot].push(duty.get('id'));\n        }\n        updateHiddenDuties(slot);\n        return scope.$apply();\n      };\n      user = currentUserService.getUser();\n      if (!user) {\n        return;\n      }\n      userId = user.get(\"id\");\n      ctrl.getWorkInProgress(userId);\n      slots = ['working-on', 'watching'];\n      scope.hiddenDuties = {};\n      scope.showHiddenDuties = {};\n      scope.toggleShowHiddenDuties = function(slot) {\n        if (!(indexOf.call(slots, slot) >= 0)) {\n          return console.error(\"Invalid duties slot `\" + slot + \"`\");\n        }\n        scope.showHiddenDuties[slot] = !scope.showHiddenDuties[slot];\n        return updateShowHiddenDuties(slot);\n      };\n      for (i = 0, len = slots.length; i < len; i++) {\n        slot = slots[i];\n        scope.hiddenDuties[slot] = getHiddenDuties(slot);\n        scope.showHiddenDuties[slot] = getShowHiddenDuties(slot);\n      }\n      return scope.$on(\"duty:toggle-hidden\", (function(_this) {\n        return function(event, duty, slot) {\n          if (!(indexOf.call(slots, slot) >= 0)) {\n            return console.error(\"Invalid duties slot `\" + slot + \"`\");\n          }\n          return toggleDutyHidden(duty, slot);\n        };\n      })(this));\n    };\n    return {\n      controller: \"WorkingOn\",\n      controllerAs: \"vm\",\n      templateUrl: \"home/working-on/working-on.html\",\n      scope: {},\n      link: link\n    };\n  };\n\n  WorkingOnDirective.$inject = [\"tgHomeService\", \"tgCurrentUserService\", \"$tgStorage\"];\n\n  angular.module(\"taigaHome\").directive(\"tgWorkingOn\", WorkingOnDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormController, taiga;\n\n  taiga = this.taiga;\n\n  InviteMembersFormController = (function() {\n    InviteMembersFormController.$inject = [\"tgProjectService\", \"$tgResources\", \"lightboxService\", \"$tgConfirm\", \"$rootScope\"];\n\n    function InviteMembersFormController(projectService, rs, lightboxService, confirm, rootScope) {\n      this.projectService = projectService;\n      this.rs = rs;\n      this.lightboxService = lightboxService;\n      this.confirm = confirm;\n      this.rootScope = rootScope;\n      this.project = this.projectService.project;\n      this.roles = this.projectService.project.get('roles');\n      this.rolesValues = {};\n      this.loading = false;\n      this.defaultMaxInvites = 4;\n    }\n\n    InviteMembersFormController.prototype._areRolesValidated = function() {\n      return Object.defineProperty(this, 'areRolesValidated', {\n        get: (function(_this) {\n          return function() {\n            var roleIds;\n            roleIds = _.filter(_.values(_this.rolesValues), function(it) {\n              return it;\n            });\n            return roleIds.length === _this.contactsToInvite.size + _this.emailsToInvite.size;\n          };\n        })(this)\n      });\n    };\n\n    InviteMembersFormController.prototype._checkLimitMemberships = function() {\n      var pendingMembersCount;\n      if (this.project.get('max_memberships') === null) {\n        this.membersLimit = this.defaultMaxInvites;\n      } else {\n        pendingMembersCount = Math.max(this.project.get('max_memberships') - this.project.get('total_memberships'), 0);\n        this.membersLimit = Math.min(pendingMembersCount, this.defaultMaxInvites);\n      }\n      return this.showWarningMessage = this.membersLimit < this.defaultMaxInvites;\n    };\n\n    InviteMembersFormController.prototype.sendInvites = function() {\n      this.setInvitedContacts = [];\n      _.forEach(this.rolesValues, (function(_this) {\n        return function(key, value) {\n          return _this.setInvitedContacts.push({\n            'role_id': key,\n            'username': value\n          });\n        };\n      })(this));\n      this.loading = true;\n      return this.rs.memberships.bulkCreateMemberships(this.project.get('id'), this.setInvitedContacts, this.inviteContactsMessage).then((function(_this) {\n        return function(response) {\n          return _this.projectService.fetchProject().then(function() {\n            _this.loading = false;\n            _this.lightboxService.closeAll();\n            _this.rootScope.$broadcast(\"membersform:new:success\");\n            return _this.confirm.notify('success');\n          });\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function(response) {\n          _this.loading = false;\n          if (response.data._error_message) {\n            return _this.confirm.notify(\"error\", response.data._error_message);\n          } else if (response.data.__all__) {\n            return _this.confirm.notify(\"error\", response.data.__all__[0]);\n          }\n        };\n      })(this));\n    };\n\n    return InviteMembersFormController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"InviteMembersFormCtrl\", InviteMembersFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersFormDirective;\n\n  InviteMembersFormDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      ctrl._areRolesValidated();\n      return ctrl._checkLimitMemberships();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/invite-members-form/invite-members-form.html\",\n      controller: \"InviteMembersFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contactsToInvite: '<',\n        emailsToInvite: '=',\n        onDisplayContactList: '&',\n        onRemoveInvitedContact: '&',\n        onRemoveInvitedEmail: '&',\n        onSendInvites: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgInviteMembersForm\", InviteMembersFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  AddMembersController = (function() {\n    AddMembersController.$inject = [\"tgUserService\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function AddMembersController(userService, currentUserService, projectService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n      this.contactsToInvite = Immutable.List();\n      this.emailsToInvite = Immutable.List();\n      this.contacts = Immutable.List();\n      this.displayContactList = false;\n    }\n\n    AddMembersController.prototype._getContacts = function() {\n      var excludeProjectId, userId;\n      userId = this.currentUserService.getUser().get(\"id\");\n      excludeProjectId = this.projectService.project.get(\"id\");\n      return this.userService.getContacts(userId, excludeProjectId).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype._filterContacts = function(invited) {\n      return this.contacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.get('id');\n        };\n      })(this));\n    };\n\n    AddMembersController.prototype.inviteSuggested = function(contact) {\n      this.contactsToInvite = this.contactsToInvite.push(contact);\n      this._filterContacts(contact);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeContact = function(invited) {\n      this.contactsToInvite = this.contactsToInvite.filter((function(_this) {\n        return function(contact) {\n          return contact.get('id') !== invited.id;\n        };\n      })(this));\n      invited = Immutable.fromJS(invited);\n      this.contacts = this.contacts.push(invited);\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.inviteEmail = function(email) {\n      var emailData;\n      emailData = Immutable.Map({\n        'email': email\n      });\n      this.emailsToInvite = this.emailsToInvite.push(emailData);\n      return this.displayContactList = true;\n    };\n\n    AddMembersController.prototype.removeEmail = function(invited) {\n      this.emailsToInvite = this.emailsToInvite.filter((function(_this) {\n        return function(email) {\n          return email.get('email') !== invited.email;\n        };\n      })(this));\n      return this.testEmptyContacts();\n    };\n\n    AddMembersController.prototype.testEmptyContacts = function() {\n      if (this.emailsToInvite.size + this.contactsToInvite.size === 0) {\n        return this.displayContactList = false;\n      }\n    };\n\n    return AddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"AddMembersCtrl\", AddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxAddMembersDirective;\n\n  LightboxAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      return ctrl._getContacts();\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/lightbox-add-members.html\",\n      controller: \"AddMembersCtrl\",\n      controllerAs: \"vm\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgLbAddMembers\", [\"lightboxService\", LightboxAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersController, taiga;\n\n  taiga = this.taiga;\n\n  SuggestAddMembersController = (function() {\n    SuggestAddMembersController.$inject = [];\n\n    function SuggestAddMembersController() {\n      this.contactQuery = \"\";\n    }\n\n    SuggestAddMembersController.prototype.isEmail = function() {\n      return taiga.isEmail(this.contactQuery);\n    };\n\n    SuggestAddMembersController.prototype.filterContacts = function() {\n      return this.filteredContacts = this.contacts.filter((function(_this) {\n        return function(contact) {\n          return contact.get('full_name_display').toLowerCase().includes(_this.contactQuery.toLowerCase()) || contact.get('username').toLowerCase().includes(_this.contactQuery.toLowerCase());\n        };\n      })(this)).slice(0, 12);\n    };\n\n    SuggestAddMembersController.prototype.setInvited = function(contact) {\n      return this.onInviteSuggested({\n        'contact': contact\n      });\n    };\n\n    return SuggestAddMembersController;\n\n  })();\n\n  angular.module(\"taigaAdmin\").controller(\"SuggestAddMembersCtrl\", SuggestAddMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SuggestAddMembersDirective;\n\n  SuggestAddMembersDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch(\"vm.contacts\", (function(_this) {\n        return function(contacts) {\n          if (contacts) {\n            return ctrl.filterContacts();\n          }\n        };\n      })(this));\n    };\n    return {\n      scope: {},\n      templateUrl: \"invite-members/suggest-add-members/suggest-add-members.html\",\n      controller: \"SuggestAddMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: {\n        contacts: '=',\n        onInviteSuggested: '&',\n        onInviteEmail: '&'\n      },\n      link: link\n    };\n  };\n\n  angular.module(\"taigaAdmin\").directive(\"tgSuggestAddMembers\", [\"lightboxService\", SuggestAddMembersDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownNotificationsDirective, timeout;\n\n  timeout = this.taiga.timeout;\n\n  DropdownNotificationsDirective = function($rootScope, notificationsService, currentUserService) {\n    var directive, link;\n    link = function($scope, $el, $attrs, $ctrl) {\n      $scope.notificationsList = [];\n      $scope.loading = false;\n      $scope.$on(\"notifications:loaded\", function(event, total) {\n        $scope.loading = false;\n        if ($scope.total !== void 0 && total > $scope.total) {\n          $scope.newEvent = true;\n          timeout(100, function() {\n            $scope.total = total;\n            return $scope.$apply();\n          });\n          return timeout(2000, function() {\n            return $scope.newEvent = false;\n          });\n        } else {\n          return $scope.total = total;\n        }\n      });\n      $scope.$on(\"notifications:loading\", function() {\n        return $scope.loading = true;\n      });\n      return $scope.setAllAsRead = function() {\n        return notificationsService.setNotificationsAsRead().then(function() {\n          return $rootScope.$emit(\"notifications:dismiss-all\");\n        });\n      };\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-notifications/dropdown-notifications.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownNotifications\", [\"$rootScope\", \"tgNotificationsService\", \"tgCurrentUserService\", DropdownNotificationsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownProjectListDirective;\n\n  DropdownProjectListDirective = function(rootScope, currentUserService, projectsService, projectService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var updateLinks;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"currentProject\", function() {\n        if (projectService.project) {\n          return projectService.project.get('id');\n        }\n        return null;\n      });\n      scope.vm.newProject = function() {\n        return projectsService.newProject();\n      };\n      updateLinks = function() {\n        return el.find(\".dropdown-project-list ul li a\").data(\"fullUrl\", \"\");\n      };\n      return rootScope.$on(\"dropdown-project-list:updated\", updateLinks);\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-project-list/dropdown-project-list.html\",\n      scope: {\n        active: \"=\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownProjectListDirective.$inject = [\"$rootScope\", \"tgCurrentUserService\", \"tgProjectsService\", \"tgProjectService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownProjectList\", DropdownProjectListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DropdownUserDirective;\n\n  DropdownUserDirective = function(authService, configService, locationService, navUrlsService, $rootScope) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      scope.vm = {};\n      scope.vm.isFeedbackEnabled = configService.get(\"feedbackEnabled\");\n      scope.vm.customSupportUrl = configService.get(\"supportUrl\");\n      taiga.defineImmutableProperty(scope.vm, \"user\", function() {\n        return authService.userData;\n      });\n      scope.vm.logout = function() {\n        authService.logout();\n        locationService.url(navUrlsService.resolve(\"discover\"));\n        return locationService.search({});\n      };\n      return scope.vm.userSettingsPlugins = _.filter($rootScope.userSettingsPlugins, {\n        userMenu: true\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/dropdown-user/dropdown-user.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  DropdownUserDirective.$inject = [\"$tgAuth\", \"$tgConfig\", \"$tgLocation\", \"$tgNavUrls\", \"$rootScope\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgDropdownUser\", DropdownUserDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarDirective;\n\n  NavigationBarDirective = function(currentUserService, navigationBarService, locationService, navUrlsService, config, feedbackService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var attempts, loadUserPilot, userPilotInterval;\n      scope.vm = {};\n      taiga.defineImmutableProperty(scope.vm, \"projects\", function() {\n        return currentUserService.projects.get(\"recents\");\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isAuthenticated\", function() {\n        return currentUserService.isAuthenticated();\n      });\n      taiga.defineImmutableProperty(scope.vm, \"isEnabledHeader\", function() {\n        return navigationBarService.isEnabledHeader();\n      });\n      scope.vm.publicRegisterEnabled = config.get(\"publicRegisterEnabled\");\n      scope.vm.customSupportUrl = config.get(\"supportUrl\");\n      scope.vm.isFeedbackEnabled = config.get(\"feedbackEnabled\");\n      loadUserPilot = (function(_this) {\n        return function() {\n          var userPilotIframe;\n          userPilotIframe = document.querySelector('#userpilot-resource-centre-frame');\n          if (userPilotIframe) {\n            return scope.$applyAsync(function() {\n              var userPilotIframeDocument, widget;\n              userPilotIframeDocument = userPilotIframe.contentWindow.document.body;\n              widget = userPilotIframeDocument.querySelector('#widget-title');\n              if (widget) {\n                scope.vm.userPilotTitle = widget.innerText;\n                return clearInterval(userPilotInterval);\n              }\n            });\n          }\n        };\n      })(this);\n      attempts = 10;\n      if (window.TAIGA_USER_PILOT_TOKEN) {\n        scope.vm.userPilotTitle = 'Help center';\n        scope.vm.userpilotEnabled = true;\n        userPilotInterval = setInterval((function(_this) {\n          return function() {\n            loadUserPilot();\n            attempts--;\n            if (!attempts) {\n              return clearInterval(userPilotInterval);\n            }\n          };\n        })(this), 1000);\n      }\n      scope.vm.login = function() {\n        var nextUrl;\n        nextUrl = encodeURIComponent(locationService.url());\n        locationService.url(navUrlsService.resolve(\"login\"));\n        return locationService.search({\n          next: nextUrl\n        });\n      };\n      scope.vm.sendFeedback = function() {\n        return feedbackService.sendFeedback();\n      };\n      window._taigaSendFeedback = scope.vm.sendFeedback;\n      return scope.$on(\"$routeChangeSuccess\", function() {\n        var path;\n        scope.vm.active = null;\n        path = locationService.path();\n        switch (path) {\n          case \"/\":\n            return scope.vm.active = 'dashboard';\n          case \"/discover\":\n            return scope.vm.active = 'discover';\n          case \"/notifications\":\n            return scope.vm.active = 'notifications';\n          case \"/projects/\":\n            return scope.vm.active = 'projects';\n          default:\n            if (path.startsWith('/project')) {\n              return scope.vm.active = 'project';\n            }\n        }\n      });\n    };\n    directive = {\n      templateUrl: \"navigation-bar/navigation-bar.html\",\n      scope: {},\n      link: link\n    };\n    return directive;\n  };\n\n  NavigationBarDirective.$inject = [\"tgCurrentUserService\", \"tgNavigationBarService\", \"$tgLocation\", \"$tgNavUrls\", \"$tgConfig\", \"tgFeedbackService\"];\n\n  angular.module(\"taigaNavigationBar\").directive(\"tgNavigationBar\", NavigationBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NavigationBarService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  NavigationBarService = (function(superClass) {\n    extend(NavigationBarService, superClass);\n\n    function NavigationBarService() {\n      this.disableHeader();\n    }\n\n    NavigationBarService.prototype.enableHeader = function() {\n      return this.enabledHeader = true;\n    };\n\n    NavigationBarService.prototype.disableHeader = function() {\n      return this.enabledHeader = false;\n    };\n\n    NavigationBarService.prototype.isEnabledHeader = function() {\n      return this.enabledHeader;\n    };\n\n    return NavigationBarService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNavigationBar\").service(\"tgNavigationBarService\", NavigationBarService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsListDirective;\n\n  NotificationsListDirective = function() {\n    return {\n      templateUrl: \"notifications/notifications-list/notifications-list.html\",\n      controller: \"Notifications\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        infiniteScrollContainer: \"@\",\n        infiniteScrollDistance: \"=\",\n        infiniteScrollDisabled: \"=\",\n        onlyUnread: \"=onlyUnread\"\n      }\n    };\n  };\n\n  angular.module(\"taigaNotifications\").directive(\"tgNotificationsList\", NotificationsListDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsController, debounceLeading, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  NotificationsController = (function(superClass) {\n    extend(NotificationsController, superClass);\n\n    NotificationsController.$inject = [\"$rootScope\", \"$scope\", \"tgNotificationsService\", \"tgCurrentUserService\", \"$tgEvents\", \"$location\", \"$window\"];\n\n    function NotificationsController(rootScope, scope, notificationsService, currentUserService, events, location, window) {\n      this.rootScope = rootScope;\n      this.scope = scope;\n      this.notificationsService = notificationsService;\n      this.currentUserService = currentUserService;\n      this.events = events;\n      this.location = location;\n      this.window = window;\n      this.total = 0;\n      this.user = this.currentUserService.getUser();\n      this.scrollDisabled = false;\n      this.initList();\n      this.loadNotifications();\n      this.rootScope.$on(\"notifications:dismiss\", (function(_this) {\n        return function(event) {\n          if (_this.onlyUnread) {\n            return _this.reloadList();\n          }\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:new\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n      this.rootScope.$on(\"notifications:dismiss-all\", (function(_this) {\n        return function(event) {\n          return _this.reloadList();\n        };\n      })(this));\n    }\n\n    NotificationsController.prototype.initList = function() {\n      this.notificationsList = Immutable.List();\n      if (this.user) {\n        this.list = this.notificationsService.getNotificationsList(this.user.get(\"id\"), this.onlyUnread != null);\n      }\n      return this.loading = this.list == null;\n    };\n\n    NotificationsController.prototype.reloadList = function() {\n      this.initList();\n      return this.loadNotifications();\n    };\n\n    NotificationsController.prototype.loadNotifications = function() {\n      this.scrollDisabled = true;\n      this.loading = true;\n      this.scope.$emit(\"notifications:loading\");\n      return this.list.next().then((function(_this) {\n        return function(response) {\n          _this.notificationsList = _this.notificationsList.concat(response.get(\"items\"));\n          if (!_this.infiniteScrollDisabled && response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          _this.total = response.get(\"total\");\n          _this.scope.$emit(\"notifications:loaded\", _this.total);\n          _this.loading = false;\n          return _this.notificationsList;\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAsRead = function(notification, url) {\n      return this.notificationsService.setNotificationAsRead(notification.get(\"id\")).then((function(_this) {\n        return function() {\n          if (_this.location.$$url === url) {\n            _this.window.location.reload();\n          } else {\n            _this.location.path(url);\n          }\n          return _this.rootScope.$broadcast(\"notifications:dismiss\");\n        };\n      })(this));\n    };\n\n    NotificationsController.prototype.setAllAsRead = function() {\n      return this.notificationsService.setNotificationsAsRead().then((function(_this) {\n        return function() {\n          return _this.rootScope.$broadcast(\"notifications:dismiss-all\");\n        };\n      })(this));\n    };\n\n    return NotificationsController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaNotifications\").controller(\"Notifications\", NotificationsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NotificationsService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  NotificationsService = (function(superClass) {\n    var _notificationTypes, _params;\n\n    extend(NotificationsService, superClass);\n\n    NotificationsService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"$translate\", \"$tgNavUrls\", \"$tgSections\"];\n\n    _notificationTypes = [\n      {\n        check: function(notification) {\n          return notification.get('event_type') === 1;\n        },\n        key: 'EVENTS.ASSIGNED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 2;\n        },\n        key: 'EVENTS.MENTIONED_YOU',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 3;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_WATCHER',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 4;\n        },\n        key: 'EVENTS.ADDED_YOU_AS_MEMBER',\n        translate_params: ['username']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 5;\n        },\n        key: 'EVENTS.COMMENTED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(notification) {\n          return notification.get('event_type') === 6;\n        },\n        key: 'EVENTS.MENTIONED_YOU_IN_COMMENT',\n        translate_params: ['username', 'obj_name']\n      }\n    ];\n\n    _params = {\n      username: function(notification) {\n        var title_attr, url, user;\n        user = notification.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = this.navUrls.resolve('user-profile', {\n            username: notification.getIn(['data', 'user', 'username'])\n          });\n          return this._getLink(notification, url, user.get('name'), 'user-link', title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      project_name: function(notification) {\n        var url;\n        url = this.navUrls.resolve('project', {\n          project: notification.getIn(['data', 'project', 'slug'])\n        });\n        return this._getLink(notification, url, notification.getIn([\"data\", \"project\", \"name\"]), 'project-link');\n      },\n      obj_name: function(notification) {\n        var obj, text, url;\n        obj = this._getNotificationObject(notification);\n        url = this._getDetailObjUrl(notification, obj.get('content_type'));\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(notification, url, text, 'object-link');\n      }\n    };\n\n    function NotificationsService(rs, userTimelinePaginationSequenceService, translate, navUrls, tgSections) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.translate = translate;\n      this.navUrls = navUrls;\n      this.tgSections = tgSections;\n    }\n\n    NotificationsService.prototype.getNotificationsList = function(userId, onlyUnread) {\n      var config, total;\n      total = 0;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getNotifications(userId, page, onlyUnread).then(function(response) {\n            return response;\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addNotificationAttributes(obj);\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    NotificationsService.prototype.setNotificationAsRead = function(notificationId) {\n      return this.rs.users.setNotificationAsRead(notificationId);\n    };\n\n    NotificationsService.prototype.setNotificationsAsRead = function() {\n      return this.rs.users.setNotificationsAsRead();\n    };\n\n    NotificationsService.prototype._getNotificationObject = function(notification) {\n      if (notification.get('data').get('obj')) {\n        return notification.get('data').get('obj');\n      }\n    };\n\n    NotificationsService.prototype._getType = function(notification) {\n      return _.find(_notificationTypes, function(obj) {\n        return obj.check(notification);\n      });\n    };\n\n    NotificationsService.prototype._addNotificationAttributes = function(notification) {\n      var event_type, projectSectionPath, projectSlug, projectUrl, title, type;\n      event_type = notification.get('event_type');\n      type = this._getType(notification);\n      title = this._getTitle(notification, event_type, type);\n      notification = notification.set('title_html', title);\n      projectSlug = notification.getIn(['data', 'project', 'slug']);\n      projectSectionPath = this.tgSections.getPath(projectSlug);\n      projectUrl = this.navUrls.resolve(\"project-\" + projectSectionPath, {\n        project: projectSlug\n      });\n      notification = notification.set('projectUrl', projectUrl);\n      notification = notification.set('obj', this._getNotificationObject(notification));\n      return notification;\n    };\n\n    NotificationsService.prototype._translateTitleParams = function(param, notification, event) {\n      return _params[param].call(this, notification, event);\n    };\n\n    NotificationsService.prototype._getDetailObjUrl = function(notification, contentType) {\n      var url, urlMapping;\n      urlMapping = {\n        \"issue\": \"project-issues-detail\",\n        \"task\": \"project-tasks-detail\",\n        \"userstory\": \"project-userstories-detail\"\n      };\n      url = this.navUrls.resolve(urlMapping[contentType], {\n        project: notification.getIn(['data', 'project', 'slug']),\n        ref: notification.getIn(['data', 'obj', 'ref'])\n      });\n      return url;\n    };\n\n    NotificationsService.prototype._getLink = function(notification, url, text, css, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a href=\"\">').attr('title', title).attr('class', css).attr('ng-click', \"vm.setAsRead(notification, \\\"\" + url + \"\\\")\").append(span).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    NotificationsService.prototype._getParams = function(notification, event_type, notification_type) {\n      var params;\n      params = {};\n      notification_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, notification, event_type);\n        };\n      })(this));\n      return params;\n    };\n\n    NotificationsService.prototype._getTitle = function(notification, event_type, notification_type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(notification, event_type, notification_type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(notification_type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return NotificationsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaNotifications\").service(\"tgNotificationsService\", NotificationsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarController;\n\n  ProfileBarController = (function() {\n    ProfileBarController.$inject = [\"tgUserService\"];\n\n    function ProfileBarController(userService) {\n      this.userService = userService;\n      this.loadStats();\n    }\n\n    ProfileBarController.prototype.loadStats = function() {\n      return this.userService.getStats(this.user.get(\"id\")).then((function(_this) {\n        return function(stats) {\n          return _this.stats = stats;\n        };\n      })(this));\n    };\n\n    return ProfileBarController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileBar\", ProfileBarController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileBarDirective;\n\n  ProfileBarDirective = function() {\n    return {\n      templateUrl: \"profile/profile-bar/profile-bar.html\",\n      controller: \"ProfileBar\",\n      controllerAs: \"vm\",\n      scope: {\n        user: \"=user\",\n        isCurrentUser: \"=iscurrentuser\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileBar\", ProfileBarDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsController;\n\n  ProfileContactsController = (function() {\n    ProfileContactsController.$inject = [\"tgUserService\", \"tgCurrentUserService\"];\n\n    function ProfileContactsController(userService, currentUserService) {\n      this.userService = userService;\n      this.currentUserService = currentUserService;\n      this.currentUser = this.currentUserService.getUser();\n      this.isCurrentUser = false;\n      if (this.currentUser && this.currentUser.get(\"id\") === this.user.get(\"id\")) {\n        this.isCurrentUser = true;\n      }\n    }\n\n    ProfileContactsController.prototype.loadContacts = function() {\n      return this.userService.getContacts(this.user.get(\"id\")).then((function(_this) {\n        return function(contacts) {\n          return _this.contacts = contacts;\n        };\n      })(this));\n    };\n\n    return ProfileContactsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileContacts\", ProfileContactsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileContactsDirective;\n\n  ProfileContactsDirective = function() {\n    var link;\n    link = function(scope, elm, attrs, ctrl) {\n      return ctrl.loadContacts();\n    };\n    return {\n      templateUrl: \"profile/profile-contacts/profile-contacts.html\",\n      scope: {\n        user: \"=\"\n      },\n      controllerAs: \"vm\",\n      controller: \"ProfileContacts\",\n      link: link,\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileContacts\", ProfileContactsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavItemDirective;\n\n  FavItemDirective = function() {\n    var link, templateUrl;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.vm = {\n        item: scope.item\n      };\n    };\n    templateUrl = function(el, attrs) {\n      if (attrs.itemType === \"project\") {\n        return \"profile/profile-favs/items/project.html\";\n      } else {\n        return \"profile/profile-favs/items/ticket.html\";\n      }\n    };\n    return {\n      scope: {\n        \"item\": \"=tgFavItem\"\n      },\n      link: link,\n      templateUrl: templateUrl\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgFavItem\", FavItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var FavsBaseController, ProfileLikedController, ProfileVotedController, ProfileWatchedController, debounceLeading,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  debounceLeading = this.taiga.debounceLeading;\n\n  FavsBaseController = (function() {\n    function FavsBaseController() {\n      this._init();\n    }\n\n    FavsBaseController.prototype._init = function() {\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = true;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._resetList();\n      this.q = null;\n      return this.type = null;\n    };\n\n    FavsBaseController.prototype._resetList = function() {\n      this.items = Immutable.List();\n      this.scrollDisabled = false;\n      return this._page = 1;\n    };\n\n    FavsBaseController.prototype._enableLoadingSpinner = function() {\n      return this.isLoading = true;\n    };\n\n    FavsBaseController.prototype._disableLoadingSpinner = function() {\n      return this.isLoading = false;\n    };\n\n    FavsBaseController.prototype._enableScroll = function() {\n      return this.scrollDisabled = false;\n    };\n\n    FavsBaseController.prototype._disableScroll = function() {\n      return this.scrollDisabled = true;\n    };\n\n    FavsBaseController.prototype._checkIfHasMorePages = function(hasNext) {\n      if (hasNext) {\n        this._page += 1;\n        return this._enableScroll();\n      } else {\n        return this._disableScroll();\n      }\n    };\n\n    FavsBaseController.prototype._checkIfHasNoResults = function() {\n      return this.hasNoResults = this.items.size === 0;\n    };\n\n    FavsBaseController.prototype.loadItems = function() {\n      this._enableLoadingSpinner();\n      this._disableScroll();\n      return this._getItems(this.user.get(\"id\"), this._page, this.type, this.q).then((function(_this) {\n        return function(response) {\n          _this.items = _this.items.concat(response.get(\"data\"));\n          _this._checkIfHasMorePages(response.get(\"next\"));\n          _this._checkIfHasNoResults();\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          _this._disableLoadingSpinner();\n          return _this.items;\n        };\n      })(this));\n    };\n\n    FavsBaseController.prototype.filterByTextQuery = debounceLeading(500, function() {\n      this._resetList();\n      return this.loadItems();\n    });\n\n    FavsBaseController.prototype.showAll = function() {\n      if (this.type !== null) {\n        this.type = null;\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showProjectsOnly = function() {\n      if (this.type !== \"project\") {\n        this.type = \"project\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showEpicsOnly = function() {\n      if (this.type !== \"epic\") {\n        this.type = \"epic\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showUserStoriesOnly = function() {\n      if (this.type !== \"userstory\") {\n        this.type = \"userstory\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showTasksOnly = function() {\n      if (this.type !== \"task\") {\n        this.type = \"task\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    FavsBaseController.prototype.showIssuesOnly = function() {\n      if (this.type !== \"issue\") {\n        this.type = \"issue\";\n        this._resetList();\n        return this.loadItems();\n      }\n    };\n\n    return FavsBaseController;\n\n  })();\n\n  ProfileLikedController = (function(superClass) {\n    extend(ProfileLikedController, superClass);\n\n    ProfileLikedController.$inject = [\"tgUserService\"];\n\n    function ProfileLikedController(userService) {\n      this.userService = userService;\n      ProfileLikedController.__super__.constructor.call(this);\n      this.tabName = 'likes';\n      this.enableFilterByAll = false;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = false;\n      this.enableFilterByUserStories = false;\n      this.enableFilterByTasks = false;\n      this.enableFilterByIssues = false;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getLiked;\n    }\n\n    return ProfileLikedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileLiked\", ProfileLikedController);\n\n  ProfileVotedController = (function(superClass) {\n    extend(ProfileVotedController, superClass);\n\n    ProfileVotedController.$inject = [\"tgUserService\"];\n\n    function ProfileVotedController(userService) {\n      this.userService = userService;\n      ProfileVotedController.__super__.constructor.call(this);\n      this.tabName = 'upvotes';\n      this.enableFilterByAll = true;\n      this.enableFilterByProjects = false;\n      this.enableFilterByEpics = true;\n      this.enableFilterByUserStories = true;\n      this.enableFilterByTasks = true;\n      this.enableFilterByIssues = true;\n      this.enableFilterByTextQuery = true;\n      this._getItems = this.userService.getVoted;\n    }\n\n    return ProfileVotedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileVoted\", ProfileVotedController);\n\n  ProfileWatchedController = (function(superClass) {\n    extend(ProfileWatchedController, superClass);\n\n    ProfileWatchedController.$inject = [\"tgUserService\"];\n\n    function ProfileWatchedController(userService) {\n      this.userService = userService;\n      ProfileWatchedController.__super__.constructor.call(this);\n      this.tabName = 'watchers';\n      this._getItems = this.userService.getWatched;\n    }\n\n    return ProfileWatchedController;\n\n  })(FavsBaseController);\n\n  angular.module(\"taigaProfile\").controller(\"ProfileWatched\", ProfileWatchedController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileLikedDirective, ProfileVotedDirective, ProfileWatchedDirective, base;\n\n  base = {\n    scope: {},\n    bindToController: {\n      user: \"=\",\n      type: \"@\",\n      q: \"@\",\n      scrollDisabled: \"@\",\n      isLoading: \"@\",\n      hasNoResults: \"@\"\n    },\n    controller: null,\n    controllerAs: \"vm\",\n    templateUrl: \"profile/profile-favs/profile-favs.html\"\n  };\n\n  ProfileLikedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileLiked\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileLiked\", ProfileLikedDirective);\n\n  ProfileVotedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileVoted\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileVoted\", ProfileVotedDirective);\n\n  ProfileWatchedDirective = function() {\n    return _.extend({}, base, {\n      controller: \"ProfileWatched\"\n    });\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileWatched\", ProfileWatchedDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = (function() {\n    ProfileHints.prototype.HINTS = [\n      {\n        url: \"https://resources.taiga.io/extend/import-export-projects/\"\n      }, {\n        url: \"https://resources.taiga.io/features/customisation/#tier-4-custom-fields-and-due-dates\"\n      }, {}, {}\n    ];\n\n    function ProfileHints(translate) {\n      var hintKey;\n      this.translate = translate;\n      hintKey = Math.floor(Math.random() * this.HINTS.length) + 1;\n      this.hint = this.HINTS[hintKey - 1];\n      this.hint.linkText = this.hint.linkText || 'HINTS.LINK';\n      this.hint.title = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TITLE\");\n      this.hint.text = this.translate.instant(\"HINTS.HINT\" + hintKey + \"_TEXT\");\n    }\n\n    return ProfileHints;\n\n  })();\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").controller(\"ProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileHints;\n\n  ProfileHints = function($translate) {\n    return {\n      scope: {},\n      controller: \"ProfileHints\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-hints/profile-hints.html\"\n    };\n  };\n\n  ProfileHints.$inject = [\"$translate\"];\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileHints\", ProfileHints);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsController;\n\n  ProfileProjectsController = (function() {\n    ProfileProjectsController.$inject = [\"tgProjectsService\", \"tgUserService\"];\n\n    function ProfileProjectsController(projectsService, userService) {\n      this.projectsService = projectsService;\n      this.userService = userService;\n    }\n\n    ProfileProjectsController.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this.user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.userService.attachUserContactsToProjects(_this.user.get(\"id\"), projects);\n        };\n      })(this)).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    return ProfileProjectsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileProjects\", ProfileProjectsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileProjectsDirective;\n\n  ProfileProjectsDirective = function() {\n    var link;\n    link = function(scope, elm, attr, ctrl) {\n      return ctrl.loadProjects();\n    };\n    return {\n      templateUrl: \"profile/profile-projects/profile-projects.html\",\n      scope: {\n        user: \"=\"\n      },\n      link: link,\n      bindToController: true,\n      controllerAs: \"vm\",\n      controller: \"ProfileProjects\"\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileProjects\", ProfileProjectsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabDirective;\n\n  ProfileTabDirective = function() {\n    var link;\n    link = function(scope, element, attrs, ctrl, transclude) {\n      scope.tab = {};\n      attrs.$observe(\"tgProfileTab\", function(name) {\n        return scope.tab.name = name;\n      });\n      attrs.$observe(\"tabTitle\", function(title) {\n        return scope.tab.title = title;\n      });\n      scope.tab.icon = attrs.tabIcon;\n      scope.tab.active = !!attrs.tabActive;\n      if (scope.$eval(attrs.tabDisabled) !== true) {\n        return ctrl.addTab(scope.tab);\n      }\n    };\n    return {\n      templateUrl: \"profile/profile-tab/profile-tab.html\",\n      scope: {},\n      require: \"^tgProfileTabs\",\n      link: link,\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTab\", ProfileTabDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsController;\n\n  ProfileTabsController = (function() {\n    function ProfileTabsController() {\n      this.tabs = [];\n    }\n\n    ProfileTabsController.prototype.addTab = function(tab) {\n      return this.tabs.push(tab);\n    };\n\n    ProfileTabsController.prototype.toggleTab = function(tab) {\n      _.map(this.tabs, function(tab) {\n        return tab.active = false;\n      });\n      return tab.active = true;\n    };\n\n    return ProfileTabsController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"ProfileTabs\", ProfileTabsController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileTabsDirective;\n\n  ProfileTabsDirective = function() {\n    return {\n      scope: {},\n      controller: \"ProfileTabs\",\n      controllerAs: \"vm\",\n      templateUrl: \"profile/profile-tabs/profile-tabs.html\",\n      transclude: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgProfileTabs\", ProfileTabsDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProfileController;\n\n  ProfileController = (function() {\n    ProfileController.$inject = [\"tgAppMetaService\", \"tgCurrentUserService\", \"$routeParams\", \"tgUserService\", \"tgXhrErrorService\", \"$translate\"];\n\n    function ProfileController(appMetaService, currentUserService, routeParams, userService, xhrError, translate) {\n      this.appMetaService = appMetaService;\n      this.currentUserService = currentUserService;\n      this.routeParams = routeParams;\n      this.userService = userService;\n      this.xhrError = xhrError;\n      this.translate = translate;\n      this.isCurrentUser = false;\n      if (this.routeParams.slug) {\n        this.userService.getUserByUserName(this.routeParams.slug).then((function(_this) {\n          return function(user) {\n            if (!user.get('is_active')) {\n              return _this.xhrError.notFound();\n            } else {\n              _this.user = user;\n              _this.isCurrentUser = false;\n              _this._setMeta(_this.user);\n              return user;\n            }\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(xhr) {\n            return _this.xhrError.response(xhr);\n          };\n        })(this));\n      } else {\n        this.user = this.currentUserService.getUser();\n        this.isCurrentUser = true;\n        this._setMeta(this.user);\n      }\n    }\n\n    ProfileController.prototype._setMeta = function(user) {\n      var ctx, description, title;\n      ctx = {\n        userFullName: user.get(\"full_name_display\"),\n        userUsername: user.get(\"username\")\n      };\n      title = this.translate.instant(\"USER.PROFILE.PAGE_TITLE\", ctx);\n      description = user.get(\"bio\");\n      return this.appMetaService.setAll(title, description);\n    };\n\n    return ProfileController;\n\n  })();\n\n  angular.module(\"taigaProfile\").controller(\"Profile\", ProfileController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var BlockedProjectExplanationDirective;\n\n  BlockedProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/project/blocked-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgBlockedProjectExplanation\", BlockedProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonController;\n\n  ContactProjectButtonController = (function() {\n    ContactProjectButtonController.$inject = ['tgLightboxFactory'];\n\n    function ContactProjectButtonController(lightboxFactory) {\n      this.lightboxFactory = lightboxFactory;\n    }\n\n    ContactProjectButtonController.prototype.launchContactForm = function() {\n      return this.lightboxFactory.create('tg-lb-contact-project', {\n        \"class\": \"lightbox lightbox-contact-project e2e-lightbox-contact-project\",\n        \"project\": \"project\"\n      }, {\n        \"project\": this.project\n      });\n    };\n\n    return ContactProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectButtonCtrl\", ContactProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectButtonDirective;\n\n  ContactProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"ContactProjectButtonCtrl\",\n      bindToController: {\n        project: '=',\n        layout: '@'\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/contact-project-button/contact-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgContactProjectButton\", ContactProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbController;\n\n  ContactProjectLbController = (function() {\n    ContactProjectLbController.$inject = [\"lightboxService\", \"tgResources\", \"$tgConfirm\"];\n\n    function ContactProjectLbController(lightboxService, rs, confirm) {\n      this.lightboxService = lightboxService;\n      this.rs = rs;\n      this.confirm = confirm;\n      this.contact = {};\n    }\n\n    ContactProjectLbController.prototype.contactProject = function() {\n      var message, project, promise;\n      project = this.project.get('id');\n      message = this.contact.message;\n      promise = this.rs.projects.contactProject(project, message);\n      this.sendingFeedback = true;\n      return promise.then((function(_this) {\n        return function() {\n          _this.lightboxService.closeAll();\n          _this.sendingFeedback = false;\n          return _this.confirm.notify(\"success\");\n        };\n      })(this));\n    };\n\n    return ContactProjectLbController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ContactProjectLbCtrl\", ContactProjectLbController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ContactProjectLbDirective;\n\n  ContactProjectLbDirective = function(lightboxService) {\n    var link;\n    this.inject = ['lightboxService'];\n    link = function(scope, el) {\n      return lightboxService.open(el);\n    };\n    return {\n      controller: \"ContactProjectLbCtrl\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/lb-contact-project/lb-contact-project.html\",\n      link: link\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLbContactProject\", [\"lightboxService\", ContactProjectLbDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonController;\n\n  LikeProjectButtonController = (function() {\n    LikeProjectButtonController.$inject = [\"$tgConfirm\", \"tgLikeProjectButtonService\"];\n\n    function LikeProjectButtonController(confirm, likeButtonService) {\n      this.confirm = confirm;\n      this.likeButtonService = likeButtonService;\n      this.isMouseOver = false;\n      this.loading = false;\n    }\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsOver = function() {\n      return this.isMouseOver = true;\n    };\n\n    LikeProjectButtonController.prototype.showTextWhenMouseIsLeave = function() {\n      return this.isMouseOver = false;\n    };\n\n    LikeProjectButtonController.prototype.toggleLike = function() {\n      var promise;\n      this.loading = true;\n      if (!this.project.get(\"is_fan\")) {\n        promise = this._like();\n      } else {\n        promise = this._unlike();\n      }\n      promise[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n      return promise;\n    };\n\n    LikeProjectButtonController.prototype._like = function() {\n      return this.likeButtonService.like(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.showTextWhenMouseIsLeave();\n        };\n      })(this))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    LikeProjectButtonController.prototype._unlike = function() {\n      return this.likeButtonService.unlike(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"LikeProjectButton\", LikeProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonDirective;\n\n  LikeProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"LikeProjectButton\",\n      bindToController: {\n        project: '='\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/like-project-button/like-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgLikeProjectButton\", LikeProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LikeProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  LikeProjectButtonService = (function(superClass) {\n    extend(LikeProjectButtonService, superClass);\n\n    LikeProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function LikeProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    LikeProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    LikeProjectButtonService.prototype._updateProjects = function(projectId, isFan) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, function(project) {\n        var totalFans;\n        totalFans = project.get(\"total_fans\");\n        if (isFan) {\n          totalFans++;\n        } else {\n          totalFans--;\n        }\n        return project.merge({\n          is_fan: isFan,\n          total_fans: totalFans\n        });\n      });\n      return this.currentUserService.setProjects(projects);\n    };\n\n    LikeProjectButtonService.prototype._updateCurrentProject = function(isFan) {\n      var project, totalFans;\n      totalFans = this.projectService.project.get(\"total_fans\");\n      if (isFan) {\n        totalFans++;\n      } else {\n        totalFans--;\n      }\n      project = this.projectService.project.merge({\n        is_fan: isFan,\n        total_fans: totalFans\n      });\n      return this.projectService.setProject(project);\n    };\n\n    LikeProjectButtonService.prototype.like = function(projectId) {\n      return this.rs.projects.likeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, true);\n          return _this._updateCurrentProject(true);\n        };\n      })(this));\n    };\n\n    LikeProjectButtonService.prototype.unlike = function(projectId) {\n      return this.rs.projects.unlikeProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, false);\n          return _this._updateCurrentProject(false);\n        };\n      })(this));\n    };\n\n    return LikeProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgLikeProjectButtonService\", LikeProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SortProjectsDirective;\n\n  SortProjectsDirective = function(currentUserService) {\n    var directive, link;\n    link = function(scope, el, attrs, ctrl) {\n      var drake, itemEl, scroll;\n      itemEl = null;\n      drake = dragula([el[0]], {\n        copySortSource: false,\n        copy: false,\n        mirrorContainer: el[0],\n        moves: function(item) {\n          return $(item).hasClass('list-itemtype-project');\n        }\n      });\n      drake.on('dragend', function(item) {\n        var i, index, len, project, sortData, sorted_project_ids, value;\n        itemEl = $(item);\n        project = itemEl.scope().project;\n        index = itemEl.index();\n        sorted_project_ids = _.map(scope.projects.toJS(), function(p) {\n          return p.id;\n        });\n        sorted_project_ids = _.without(sorted_project_ids, project.get(\"id\"));\n        sorted_project_ids.splice(index, 0, project.get('id'));\n        sortData = [];\n        for (index = i = 0, len = sorted_project_ids.length; i < len; index = ++i) {\n          value = sorted_project_ids[index];\n          sortData.push({\n            \"project_id\": value,\n            \"order\": index\n          });\n        }\n        return currentUserService.bulkUpdateProjectsOrder(sortData);\n      });\n      scroll = autoScroll(window, {\n        margin: 20,\n        pixels: 30,\n        scrollWhenOutside: true,\n        autoScroll: function() {\n          return this.down && drake.dragging;\n        }\n      });\n      return scope.$on(\"$destroy\", function() {\n        el.off();\n        return drake.destroy();\n      });\n    };\n    directive = {\n      scope: {\n        projects: \"=tgSortProjects\"\n      },\n      link: link\n    };\n    return directive;\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgSortProjects\", [\"tgCurrentUserService\", SortProjectsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonController;\n\n  WatchProjectButtonController = (function() {\n    WatchProjectButtonController.$inject = [\"$tgConfirm\", \"tgWatchProjectButtonService\"];\n\n    function WatchProjectButtonController(confirm, watchButtonService) {\n      this.confirm = confirm;\n      this.watchButtonService = watchButtonService;\n      this.showWatchOptions = false;\n      this.loading = false;\n    }\n\n    WatchProjectButtonController.prototype.toggleWatcherOptions = function() {\n      return this.showWatchOptions = !this.showWatchOptions;\n    };\n\n    WatchProjectButtonController.prototype.closeWatcherOptions = function() {\n      return this.showWatchOptions = false;\n    };\n\n    WatchProjectButtonController.prototype.watch = function(notifyLevel) {\n      if (notifyLevel === this.project.get('notify_level')) {\n        return;\n      }\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.watch(this.project.get('id'), notifyLevel)[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    WatchProjectButtonController.prototype.unwatch = function() {\n      this.loading = true;\n      this.closeWatcherOptions();\n      return this.watchButtonService.unwatch(this.project.get('id'))[\"catch\"]((function(_this) {\n        return function() {\n          return _this.confirm.notify(\"error\");\n        };\n      })(this))[\"finally\"]((function(_this) {\n        return function() {\n          return _this.loading = false;\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"WatchProjectButton\", WatchProjectButtonController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonDirective;\n\n  WatchProjectButtonDirective = function() {\n    return {\n      scope: {},\n      controller: \"WatchProjectButton\",\n      bindToController: {\n        project: \"=\"\n      },\n      controllerAs: \"vm\",\n      templateUrl: \"projects/components/watch-project-button/watch-project-button.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgWatchProjectButton\", WatchProjectButtonDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WatchProjectButtonService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  WatchProjectButtonService = (function(superClass) {\n    extend(WatchProjectButtonService, superClass);\n\n    WatchProjectButtonService.$inject = [\"tgResources\", \"tgCurrentUserService\", \"tgProjectService\"];\n\n    function WatchProjectButtonService(rs, currentUserService, projectService) {\n      this.rs = rs;\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    WatchProjectButtonService.prototype._getProjectIndex = function(projectId) {\n      return this.currentUserService.projects.get('all').findIndex(function(project) {\n        return project.get('id') === projectId;\n      });\n    };\n\n    WatchProjectButtonService.prototype._updateProjects = function(projectId, notifyLevel, isWatcher) {\n      var projectIndex, projects;\n      projectIndex = this._getProjectIndex(projectId);\n      if (projectIndex === -1) {\n        return;\n      }\n      projects = this.currentUserService.projects.get('all').update(projectIndex, (function(_this) {\n        return function(project) {\n          var totalWatchers;\n          totalWatchers = project.get('total_watchers');\n          if (!_this.projectService.project.get('is_watcher') && isWatcher) {\n            totalWatchers++;\n          } else if (_this.projectService.project.get('is_watcher') && !isWatcher) {\n            totalWatchers--;\n          }\n          return project.merge({\n            is_watcher: isWatcher,\n            total_watchers: totalWatchers,\n            notify_level: notifyLevel\n          });\n        };\n      })(this));\n      return this.currentUserService.setProjects(projects);\n    };\n\n    WatchProjectButtonService.prototype._updateCurrentProject = function(notifyLevel, isWatcher) {\n      var project, totalWatchers;\n      totalWatchers = this.projectService.project.get(\"total_watchers\");\n      if (!this.projectService.project.get('is_watcher') && isWatcher) {\n        totalWatchers++;\n      } else if (this.projectService.project.get('is_watcher') && !isWatcher) {\n        totalWatchers--;\n      }\n      project = this.projectService.project.merge({\n        is_watcher: isWatcher,\n        notify_level: notifyLevel,\n        total_watchers: totalWatchers\n      });\n      return this.projectService.setProject(project);\n    };\n\n    WatchProjectButtonService.prototype.watch = function(projectId, notifyLevel) {\n      return this.rs.projects.watchProject(projectId, notifyLevel).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, notifyLevel, true);\n          return _this._updateCurrentProject(notifyLevel, true);\n        };\n      })(this));\n    };\n\n    WatchProjectButtonService.prototype.unwatch = function(projectId) {\n      return this.rs.projects.unwatchProject(projectId).then((function(_this) {\n        return function() {\n          _this._updateProjects(projectId, null, false);\n          return _this._updateCurrentProject(null, false);\n        };\n      })(this));\n    };\n\n    return WatchProjectButtonService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgWatchProjectButtonService\", WatchProjectButtonService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormController;\n\n  AsanaImportProjectFormController = (function() {\n    AsanaImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function AsanaImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Asana\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"scrum\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    AsanaImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    AsanaImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    AsanaImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    AsanaImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return AsanaImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportProjectFormCtrl', AsanaImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportProjectFormDirective;\n\n  AsanaImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/asana-import/asana-import-project-form/asana-import-project-form.html\",\n      controller: \"AsanaImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  AsanaImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImportProjectForm\", AsanaImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportController;\n\n  AsanaImportController = (function() {\n    AsanaImportController.$inject = ['tgAsanaImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function AsanaImportController(asanaImportService, confirm, translate, importProjectService) {\n      this.asanaImportService = asanaImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-asana';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.asanaImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    AsanaImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-asana';\n      return this.asanaImportService.fetchProjects();\n    };\n\n    AsanaImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-asana';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.asanaImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-asana';\n    };\n\n    AsanaImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-asana';\n    };\n\n    AsanaImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.asanaImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    AsanaImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return AsanaImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('AsanaImportCtrl', AsanaImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportDirective;\n\n  AsanaImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/asana-import/asana-import.html\",\n      controller: \"AsanaImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  AsanaImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgAsanaImport\", AsanaImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  AsanaImportService = (function(superClass) {\n    extend(AsanaImportService, superClass);\n\n    AsanaImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function AsanaImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    AsanaImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    AsanaImportService.prototype.fetchProjects = function() {\n      return this.resources.asanaImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.asanaImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.asanaImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    AsanaImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.asanaImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    AsanaImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.asanaImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return AsanaImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgAsanaImportService\", AsanaImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreatetProjectFormController;\n\n  CreatetProjectFormController = (function() {\n    CreatetProjectFormController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$projectUrl\", \"$location\", \"$tgNavUrls\", \"$tgAnalytics\"];\n\n    function CreatetProjectFormController(currentUserService, projectsService, projectUrl, location, navUrls, analytics) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.projectUrl = projectUrl;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.analytics = analytics;\n      this.errorList = [];\n      this.projectForm = {\n        is_private: false\n      };\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n      if (this.type === 'scrum') {\n        this.projectForm.creation_template = 1;\n      } else {\n        this.projectForm.creation_template = 2;\n      }\n    }\n\n    CreatetProjectFormController.prototype.submit = function() {\n      this.errorList = [];\n      if (!this.projectForm.name) {\n        this.errorList.push('name');\n      }\n      if (!this.projectForm.description) {\n        this.errorList.push('description');\n      }\n      if (this.errorList.length === 0) {\n        this.formSubmitLoading = true;\n        return this.projectsService.create(this.projectForm).then((function(_this) {\n          return function(project) {\n            _this.analytics.trackEvent(\"project\", \"create\", \"project creation\", {\n              slug: project.get('slug'),\n              id: project.get('id')\n            });\n            _this.location.url(_this.projectUrl.get(project));\n            return _this.currentUserService.loadProjects();\n          };\n        })(this));\n      }\n    };\n\n    CreatetProjectFormController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    CreatetProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    CreatetProjectFormController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    return CreatetProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('CreateProjectFormCtrl', CreatetProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectFormDirective;\n\n  CreateProjectFormDirective = function() {\n    return {\n      templateUrl: \"projects/create/create-project-form/create-project-form.html\",\n      controller: \"CreateProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        type: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCreateProjectForm\", CreateProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectMembersRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectMembersRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        limitMembersPrivateProject: '=',\n        limitMembersPublicProject: '='\n      },\n      templateUrl: \"projects/create/create-project-members-restrictions/create-project-members-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectMembersRestrictions', [createProjectMembersRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var createProjectRestrictionsDirective, module;\n\n  module = angular.module(\"taigaProject\");\n\n  createProjectRestrictionsDirective = function() {\n    return {\n      scope: {\n        isPrivate: '=',\n        canCreatePrivateProjects: '=',\n        canCreatePublicProjects: '='\n      },\n      templateUrl: \"projects/create/create-project-restrictions/create-project-restrictions.html\"\n    };\n  };\n\n  module.directive('tgCreateProjectRestrictions', [createProjectRestrictionsDirective]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CreateProjectController;\n\n  CreateProjectController = (function() {\n    CreateProjectController.$inject = [\"tgAppMetaService\", \"$translate\", \"tgProjectService\", \"$tgAuth\", \"tgLightboxFactory\", \"tgResources\", \"$tgConfig\"];\n\n    function CreateProjectController(appMetaService, translate, projectService, authService, lightboxFactory, rs, config) {\n      this.appMetaService = appMetaService;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.authService = authService;\n      this.lightboxFactory = lightboxFactory;\n      this.rs = rs;\n      this.config = config;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      this.appMetaService.setfn(this._setMeta.bind(this));\n      this.authService.refresh();\n      this.displayScrumDesc = false;\n      this.dontAsk = false;\n      if (!this.config.get(\"isSaas\")) {\n        this.rs.user.getUserStorage('dont_ask_premise_newsletter').then((function(_this) {\n          return function(storageState) {\n            _this.dontAsk = storageState;\n            return _this.displayOnPremise();\n          };\n        })(this))[\"catch\"]((function(_this) {\n          return function(storageError) {\n            if (storageError.status = 404) {\n              _this.rs.user.createUserStorage('dont_ask_premise_newsletter', false);\n              _this.dontAsk = false;\n              return _this.displayOnPremise();\n            }\n          };\n        })(this));\n      }\n    }\n\n    CreateProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    CreateProjectController.prototype.displayOnPremise = function() {\n      if (!this.dontAsk) {\n        return this.lightboxFactory.create(\"tg-newsletter-email-lightbox\", {\n          \"class\": \"lightbox newsletter-email\"\n        });\n      }\n    };\n\n    CreateProjectController.prototype.displayHelp = function(type, $event) {\n      $event.stopPropagation();\n      $event.preventDefault();\n      if (type === 'scrum') {\n        this.displayScrumDesc = !this.displayScrumDesc;\n      }\n      if (type === 'kanban') {\n        return this.displayKanbanDesc = !this.displayKanbanDesc;\n      }\n    };\n\n    return CreateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"CreateProjectCtrl\", CreateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectController;\n\n  DuplicateProjectController = (function() {\n    DuplicateProjectController.$inject = [\"tgCurrentUserService\", \"tgProjectsService\", \"$tgLocation\", \"$tgNavUrls\"];\n\n    function DuplicateProjectController(currentUserService, projectsService, location, navUrls) {\n      this.currentUserService = currentUserService;\n      this.projectsService = projectsService;\n      this.location = location;\n      this.navUrls = navUrls;\n      this.user = this.currentUserService.getUser();\n      this.members = Immutable.List();\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n      this.projectForm = {\n        is_private: false\n      };\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    DuplicateProjectController.prototype.refreshReferenceProject = function(slug) {\n      return this.projectsService.getProjectBySlug(slug).then((function(_this) {\n        return function(project) {\n          _this.referenceProject = project;\n          _this.members = project.get('members').filter(function(it) {\n            return it.get('id') !== _this.user.get('id');\n          });\n          _this.invitedMembers = _this.members.map(function(it) {\n            return it.get('id');\n          });\n          return _this.checkUsersLimit();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.toggleInvitedMember = function(member) {\n      if (this.invitedMembers.includes(member)) {\n        this.invitedMembers = this.invitedMembers.filter(function(it) {\n          return it !== member;\n        });\n      } else {\n        this.invitedMembers = this.invitedMembers.push(member);\n      }\n      return this.checkUsersLimit();\n    };\n\n    DuplicateProjectController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.invitedMembers.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.invitedMembers.size + 1);\n    };\n\n    DuplicateProjectController.prototype.submit = function() {\n      var data, projectId;\n      projectId = this.referenceProject.get('id');\n      data = this.projectForm;\n      data.users = this.invitedMembers;\n      this.formSubmitLoading = true;\n      return this.projectsService.duplicate(projectId, data).then((function(_this) {\n        return function(newProject) {\n          _this.formSubmitLoading = false;\n          _this.location.path(_this.navUrls.resolve(\"project\", {\n            project: newProject.data.slug\n          }));\n          return _this.currentUserService.loadProjects();\n        };\n      })(this));\n    };\n\n    DuplicateProjectController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid && this.limitMembersPrivateProject.valid;\n      } else {\n        return this.canCreatePublicProjects.valid && this.limitMembersPublicProject.valid;\n      }\n    };\n\n    DuplicateProjectController.prototype.isDisabled = function() {\n      return this.formSubmitLoading || !this.canCreateProject();\n    };\n\n    DuplicateProjectController.prototype.onCancelForm = function() {\n      return this.location.path(this.navUrls.resolve(\"create-project\"));\n    };\n\n    return DuplicateProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"DuplicateProjectCtrl\", DuplicateProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var DuplicateProjectDirective;\n\n  DuplicateProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/duplicate/duplicate-project.html\",\n      controller: \"DuplicateProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  DuplicateProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgDuplicateProject\", DuplicateProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormController;\n\n  GithubImportProjectFormController = (function() {\n    GithubImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function GithubImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Github\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      this.projectForm.project_type = \"kanban\";\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    GithubImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    GithubImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    GithubImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    GithubImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return GithubImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportProjectFormCtrl', GithubImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportProjectFormDirective;\n\n  GithubImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/github-import/github-import-project-form/github-import-project-form.html\",\n      controller: \"GithubImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  GithubImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImportProjectForm\", GithubImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportController;\n\n  GithubImportController = (function() {\n    GithubImportController.$inject = ['tgGithubImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function GithubImportController(githubImportService, confirm, translate, importProjectService) {\n      this.githubImportService = githubImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-github';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.githubImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.githubImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    GithubImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-github';\n      return this.githubImportService.fetchProjects();\n    };\n\n    GithubImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-github';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.githubImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-github';\n    };\n\n    GithubImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-github';\n    };\n\n    GithubImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.githubImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), this.project.get('project_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    GithubImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return GithubImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('GithubImportCtrl', GithubImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportDirective;\n\n  GithubImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/github-import/github-import.html\",\n      controller: \"GithubImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  GithubImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgGithubImport\", GithubImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var GithubImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  GithubImportService = (function(superClass) {\n    extend(GithubImportService, superClass);\n\n    GithubImportService.$inject = ['tgResources', '$q'];\n\n    function GithubImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    GithubImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    GithubImportService.prototype.fetchProjects = function() {\n      return this.resources.githubImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.githubImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      return this.resources.githubImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType);\n    };\n\n    GithubImportService.prototype.getAuthUrl = function(callbackUri) {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.githubImporter.getAuthUrl(callbackUri).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    GithubImportService.prototype.authorize = function(code) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.githubImporter.authorize(code).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return GithubImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgGithubImportService\", GithubImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersController;\n\n  ImportProjectMembersController = (function() {\n    ImportProjectMembersController.$inject = ['tgCurrentUserService', 'tgUserService'];\n\n    function ImportProjectMembersController(currentUserService, userService) {\n      this.currentUserService = currentUserService;\n      this.userService = userService;\n      this.selectImportUserLightbox = false;\n      this.warningImportUsers = false;\n      this.displayEmailSelector = true;\n      this.cancelledUsers = Immutable.List();\n      this.selectedUsers = Immutable.List();\n      this.selectableUsers = Immutable.List();\n      this.userContacts = Immutable.List();\n    }\n\n    ImportProjectMembersController.prototype.fetchUser = function() {\n      this.currentUser = this.currentUserService.getUser();\n      return this.userService.getContacts(this.currentUser.get('id')).then((function(_this) {\n        return function(userContacts) {\n          _this.userContacts = userContacts;\n          return _this.refreshSelectableUsers();\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.searchUser = function(user) {\n      this.selectImportUserLightbox = true;\n      return this.searchingUser = user;\n    };\n\n    ImportProjectMembersController.prototype.beforeSubmitUsers = function() {\n      if (this.selectedUsers.size !== this.members.size) {\n        return this.warningImportUsers = true;\n      } else {\n        return this.submit();\n      }\n    };\n\n    ImportProjectMembersController.prototype.confirmUser = function(externalUser, taigaUser) {\n      var user;\n      this.selectImportUserLightbox = false;\n      user = Immutable.Map();\n      user = user.set('user', externalUser);\n      user = user.set('taigaUser', taigaUser);\n      this.selectedUsers = this.selectedUsers.push(user);\n      this.discardSuggestedUser(externalUser);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.unselectUser = function(user) {\n      var index;\n      index = this.selectedUsers.findIndex(function(it) {\n        return it.getIn(['user', 'id']) === user.get('id');\n      });\n      this.selectedUsers = this.selectedUsers[\"delete\"](index);\n      return this.refreshSelectableUsers();\n    };\n\n    ImportProjectMembersController.prototype.discardSuggestedUser = function(member) {\n      return this.cancelledUsers = this.cancelledUsers.push(member.get('id'));\n    };\n\n    ImportProjectMembersController.prototype.getSelectedMember = function(member) {\n      return this.selectedUsers.find(function(it) {\n        return it.getIn(['user', 'id']) === member.get('id');\n      });\n    };\n\n    ImportProjectMembersController.prototype.isMemberSelected = function(member) {\n      return !!this.getSelectedMember(member);\n    };\n\n    ImportProjectMembersController.prototype.getUser = function(user) {\n      var userSelected;\n      userSelected = this.getSelectedMember(user);\n      if (userSelected) {\n        return userSelected.get('taigaUser');\n      } else {\n        return null;\n      }\n    };\n\n    ImportProjectMembersController.prototype.submit = function() {\n      var users;\n      this.warningImportUsers = false;\n      users = Immutable.Map();\n      this.selectedUsers.map(function(it) {\n        var id;\n        id = '';\n        if (_.isString(it.get('taigaUser'))) {\n          id = it.get('taigaUser');\n        } else {\n          id = it.getIn(['taigaUser', 'id']);\n        }\n        return users = users.set(it.getIn(['user', 'id']), id);\n      });\n      return this.onSubmit({\n        users: users\n      });\n    };\n\n    ImportProjectMembersController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size + 1);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size + 1);\n    };\n\n    ImportProjectMembersController.prototype.showSuggestedMatch = function(member) {\n      return member.get('user') && this.cancelledUsers.indexOf(member.get('id')) === -1 && !this.isMemberSelected(member);\n    };\n\n    ImportProjectMembersController.prototype.getDistinctSelectedTaigaUsers = function() {\n      var ids, users;\n      ids = [];\n      users = this.selectedUsers.filter(function(it) {\n        var id;\n        id = it.getIn(['taigaUser', 'id']);\n        if (ids.indexOf(id) === -1) {\n          ids.push(id);\n          return true;\n        }\n        return false;\n      });\n      return users.filter((function(_this) {\n        return function(it) {\n          return it.getIn(['taigaUser', 'id']) !== _this.currentUser.get('id');\n        };\n      })(this));\n    };\n\n    ImportProjectMembersController.prototype.refreshSelectableUsers = function() {\n      var users;\n      this.importMoreUsersDisabled = this.isImportMoreUsersDisabled();\n      if (this.importMoreUsersDisabled) {\n        users = this.getDistinctSelectedTaigaUsers();\n        this.selectableUsers = users.map(function(it) {\n          return it.get('taigaUser');\n        });\n        this.displayEmailSelector = false;\n      } else {\n        this.selectableUsers = this.userContacts;\n        this.displayEmailSelector = true;\n      }\n      return this.selectableUsers = this.selectableUsers.push(this.currentUser);\n    };\n\n    ImportProjectMembersController.prototype.isImportMoreUsersDisabled = function() {\n      var total, users;\n      users = this.getDistinctSelectedTaigaUsers();\n      total = users.size + 2;\n      if (this.project.get('is_private')) {\n        return !this.currentUserService.canAddMembersPrivateProject(total).valid;\n      } else {\n        return !this.currentUserService.canAddMembersPublicProject(total).valid;\n      }\n    };\n\n    return ImportProjectMembersController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectMembersCtrl', ImportProjectMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectMembersDirective;\n\n  ImportProjectMembersDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        ctrl.fetchUser();\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/import-project-members/import-project-members.html\",\n      controller: \"ImportProjectMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSubmit: '&',\n        platform: '@',\n        logo: '@',\n        onCancel: '&'\n      }\n    };\n  };\n\n  ImportProjectMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectMembers\", ImportProjectMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorController;\n\n  ImportProjectSelectorController = (function() {\n    function ImportProjectSelectorController() {}\n\n    ImportProjectSelectorController.prototype.selectProject = function(project) {\n      return this.onSelectProject({\n        project: Immutable.fromJS(project)\n      });\n    };\n\n    return ImportProjectSelectorController;\n\n  })();\n\n  angular.module('taigaProjects').controller('ImportProjectSelectorCtrl', ImportProjectSelectorController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectSelectorDirective;\n\n  ImportProjectSelectorDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-project-selector/import-project-selector.html\",\n      controller: \"ImportProjectSelectorCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        projects: '<',\n        onCancel: '&',\n        onSelectProject: '&',\n        logo: '@',\n        noProjectsMsg: '@',\n        search: '@'\n      }\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProjectSelector\", ImportProjectSelectorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaController;\n\n  ImportTaigaController = (function() {\n    ImportTaigaController.$inject = ['$tgConfirm', '$tgResources', 'tgImportProjectService', '$translate', '$tgAnalytics'];\n\n    function ImportTaigaController(confirm, rs, importProjectService, translate, analytics) {\n      this.confirm = confirm;\n      this.rs = rs;\n      this.importProjectService = importProjectService;\n      this.translate = translate;\n      this.analytics = analytics;\n    }\n\n    ImportTaigaController.prototype.importTaiga = function(files) {\n      var file, loader, promise;\n      this.analytics.trackEvent(\"import\", \"taiga\", \"Start import from taiga\", 1);\n      file = files[0];\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.rs.projects[\"import\"](file, loader.update);\n      this.importProjectService.importPromise(promise)[\"finally\"](function() {\n        return loader.stop();\n      });\n    };\n\n    return ImportTaigaController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportTaigaCtrl\", ImportTaigaController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportTaigaDirective;\n\n  ImportTaigaDirective = function() {\n    return {\n      templateUrl: \"projects/create/import-taiga/import-taiga.html\",\n      controller: \"ImportTaigaCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {}\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgImportTaiga\", ImportTaigaDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LbImportErrorDirective;\n\n  LbImportErrorDirective = function(lightboxService) {\n    var link;\n    link = function(scope, el, attrs) {\n      lightboxService.open(el);\n      return scope.close = function() {\n        lightboxService.close(el);\n      };\n    };\n    return {\n      templateUrl: \"projects/create/import/import-project-error-lb.html\",\n      link: link\n    };\n  };\n\n  LbImportErrorDirective.$inject = [\"lightboxService\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgLbImportError\", LbImportErrorDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectController;\n\n  ImportProjectController = (function() {\n    ImportProjectController.$inject = ['tgTrelloImportService', 'tgJiraImportService', 'tgGithubImportService', 'tgAsanaImportService', '$location', '$window', '$routeParams', '$tgNavUrls', '$tgConfig', '$tgConfirm', '$tgAnalytics'];\n\n    function ImportProjectController(trelloService, jiraService, githubService, asanaService, location, window, routeParams, tgNavUrls, config, confirm, analytics) {\n      this.trelloService = trelloService;\n      this.jiraService = jiraService;\n      this.githubService = githubService;\n      this.asanaService = asanaService;\n      this.location = location;\n      this.window = window;\n      this.routeParams = routeParams;\n      this.tgNavUrls = tgNavUrls;\n      this.config = config;\n      this.confirm = confirm;\n      this.analytics = analytics;\n    }\n\n    ImportProjectController.prototype.start = function() {\n      var asanaOauthToken, githubOauthToken, jiraOauthToken, jiraOauthVerifier, locationSearch, trelloOauthToken;\n      this.token = null;\n      this.from = this.routeParams.platform;\n      locationSearch = this.location.search();\n      if (this.from) {\n        this.analytics.trackEvent(\"import\", this.from, \"Start import from \" + this.from, 1);\n      }\n      if (this.from === \"asana\") {\n        asanaOauthToken = locationSearch.code;\n        if (locationSearch.code) {\n          asanaOauthToken = locationSearch.code;\n          return this.asanaService.authorize(asanaOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: encodeURIComponent(JSON.stringify(token))\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = JSON.parse(decodeURIComponent(locationSearch.token));\n          this.asanaService.setToken(this.token);\n        }\n      }\n      if (this.from === 'trello') {\n        if (locationSearch.oauth_verifier) {\n          trelloOauthToken = locationSearch.oauth_verifier;\n          return this.trelloService.authorize(trelloOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.trelloService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"github\") {\n        if (locationSearch.code) {\n          githubOauthToken = locationSearch.code;\n          return this.githubService.authorize(githubOauthToken).then(((function(_this) {\n            return function(token) {\n              return _this.location.search({\n                token: token\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else if (locationSearch.token) {\n          this.token = locationSearch.token;\n          this.githubService.setToken(locationSearch.token);\n        }\n      }\n      if (this.from === \"jira\") {\n        jiraOauthToken = locationSearch.oauth_token;\n        if (jiraOauthToken) {\n          jiraOauthVerifier = locationSearch.oauth_verifier;\n          return this.jiraService.authorize(jiraOauthVerifier).then(((function(_this) {\n            return function(data) {\n              return _this.location.search({\n                token: data.token,\n                url: data.url\n              });\n            };\n          })(this)), this.cancelCurrentImport.bind(this));\n        } else {\n          this.token = locationSearch.token;\n          return this.jiraService.setToken(locationSearch.token, locationSearch.url);\n        }\n      }\n    };\n\n    ImportProjectController.prototype.select = function(from) {\n      var callbackUri;\n      if (from === \"trello\") {\n        return this.trelloService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"jira\") {\n        return this.jiraService.getAuthUrl(this.jiraUrl).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this), (function(_this) {\n          return function(err) {\n            return _this.confirm.notify('error', err);\n          };\n        })(this));\n      } else if (from === \"github\") {\n        callbackUri = this.location.absUrl() + \"/github\";\n        return this.githubService.getAuthUrl(callbackUri).then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else if (from === \"asana\") {\n        return this.asanaService.getAuthUrl().then((function(_this) {\n          return function(url) {\n            return _this.window.open(url, \"_self\");\n          };\n        })(this));\n      } else {\n        return this.from = from;\n      }\n    };\n\n    ImportProjectController.prototype.unfoldOptions = function(options) {\n      return this.unfoldedOptions = options;\n    };\n\n    ImportProjectController.prototype.isActiveImporter = function(importer) {\n      switch (importer) {\n        case \"asana\":\n          return this.config.get('enableAsanaImporter');\n        case \"github\":\n          return this.config.get('enableGithubImporter');\n        case \"jira\":\n          return this.config.get('enableJiraImporter');\n        case \"trello\":\n          return this.config.get('enableTrelloImporter');\n        default:\n          return false;\n      }\n    };\n\n    ImportProjectController.prototype.cancelCurrentImport = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project-import'));\n    };\n\n    ImportProjectController.prototype.backToCreate = function() {\n      return this.location.url(this.tgNavUrls.resolve('create-project'));\n    };\n\n    return ImportProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ImportProjectCtrl\", ImportProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectDirective;\n\n  ImportProjectDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {\n      return ctrl.start();\n    };\n    return {\n      link: link,\n      templateUrl: \"projects/create/import/import-project.html\",\n      controller: \"ImportProjectCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancelImport: '&'\n      }\n    };\n  };\n\n  ImportProjectDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgImportProject\", ImportProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ImportProjectService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ImportProjectService = (function(superClass) {\n    extend(ImportProjectService, superClass);\n\n    ImportProjectService.$inject = ['tgCurrentUserService', '$tgAuth', 'tgLightboxFactory', '$translate', '$tgConfirm', '$location', '$tgNavUrls'];\n\n    function ImportProjectService(currentUserService, tgAuth, lightboxFactory, translate, confirm, location, tgNavUrls) {\n      this.currentUserService = currentUserService;\n      this.tgAuth = tgAuth;\n      this.lightboxFactory = lightboxFactory;\n      this.translate = translate;\n      this.confirm = confirm;\n      this.location = location;\n      this.tgNavUrls = tgNavUrls;\n    }\n\n    ImportProjectService.prototype.importPromise = function(promise) {\n      return promise.then(this.importSuccess.bind(this), this.importError.bind(this));\n    };\n\n    ImportProjectService.prototype.importSuccess = function(result) {\n      var promise;\n      promise = this.currentUserService.loadProjects();\n      promise.then((function(_this) {\n        return function() {\n          var ctx, message, msg, title;\n          if (result.status === 202) {\n            title = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_TITLE');\n            message = _this.translate.instant('PROJECT.IMPORT.ASYNC_IN_PROGRESS_MESSAGE');\n            _this.location.path(_this.tgNavUrls.resolve('home'));\n            return _this.confirm.success(title, message);\n          } else {\n            ctx = {\n              project: result.data.slug\n            };\n            _this.location.path(_this.tgNavUrls.resolve('project-admin-project-profile-details', ctx));\n            msg = _this.translate.instant('PROJECT.IMPORT.SYNC_SUCCESS');\n            return _this.confirm.notify('success', msg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.importError = function(result) {\n      var promise;\n      promise = this.tgAuth.refresh();\n      promise.then((function(_this) {\n        return function() {\n          var errorMsg, ref, restrictionError;\n          restrictionError = _this.getRestrictionError(result);\n          if (restrictionError) {\n            return _this.lightboxFactory.create('tg-lb-import-error', {\n              \"class\": 'lightbox lightbox-import-error'\n            }, restrictionError);\n          } else {\n            errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR\");\n            if (result.status === 429) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_TOO_MANY_REQUEST\");\n            } else if ((ref = result.data) != null ? ref._error_message : void 0) {\n              errorMsg = _this.translate.instant(\"PROJECT.IMPORT.ERROR_MESSAGE\", {\n                error_message: result.data._error_message\n              });\n            }\n            return _this.confirm.notify(\"error\", errorMsg);\n          }\n        };\n      })(this));\n      return promise;\n    };\n\n    ImportProjectService.prototype.getRestrictionError = function(result) {\n      var errorKey, maxMemberships, membersError, privateError, publicError, user;\n      if (result.headers) {\n        errorKey = '';\n        user = this.currentUserService.getUser();\n        maxMemberships = null;\n        if (result.headers.isPrivate) {\n          privateError = !this.currentUserService.canCreatePrivateProjects().valid;\n          if (user.get('max_memberships_private_projects') !== null && result.headers.memberships >= user.get('max_memberships_private_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (privateError && membersError) {\n            errorKey = 'private-space-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          } else if (privateError) {\n            errorKey = 'private-space';\n          } else if (membersError) {\n            errorKey = 'private-members';\n            maxMemberships = user.get('max_memberships_private_projects');\n          }\n        } else {\n          publicError = !this.currentUserService.canCreatePublicProjects().valid;\n          if (user.get('max_memberships_public_projects') !== null && result.headers.memberships >= user.get('max_memberships_public_projects')) {\n            membersError = true;\n          } else {\n            membersError = false;\n          }\n          if (publicError && membersError) {\n            errorKey = 'public-space-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          } else if (publicError) {\n            errorKey = 'public-space';\n          } else if (membersError) {\n            errorKey = 'public-members';\n            maxMemberships = user.get('max_memberships_public_projects');\n          }\n        }\n        if (!errorKey) {\n          return false;\n        }\n        return {\n          key: errorKey,\n          values: {\n            max_memberships: maxMemberships,\n            members: result.headers.memberships\n          }\n        };\n      } else {\n        return false;\n      }\n    };\n\n    return ImportProjectService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgImportProjectService\", ImportProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersController;\n\n  InviteMembersController = (function() {\n    function InviteMembersController() {}\n\n    InviteMembersController.$inject = [];\n\n    InviteMembersController.prototype.isDisabled = function(id) {\n      return this.invitedMembers.indexOf(id) === -1;\n    };\n\n    return InviteMembersController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"InviteMembersCtrl\", InviteMembersController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var InviteMembersDirective;\n\n  InviteMembersDirective = function() {\n    var link;\n    link = function(scope, el, attr, ctrl) {};\n    return {\n      link: link,\n      templateUrl: \"projects/create/invite-members/invite-members.html\",\n      controller: \"InviteMembersCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        invitedMembers: '<',\n        members: '<',\n        onToggleInvitedMember: '&'\n      }\n    };\n  };\n\n  InviteMembersDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgInviteMembers\", InviteMembersDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SingleMemberDirective;\n\n  SingleMemberDirective = function() {\n    return {\n      templateUrl: \"projects/create/invite-members/single-member/single-member.html\",\n      scope: {\n        disabled: \"<\",\n        avatar: \"=\"\n      }\n    };\n  };\n\n  SingleMemberDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgSingleMember\", SingleMemberDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormController;\n\n  JiraImportProjectFormController = (function() {\n    JiraImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function JiraImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (this.projectForm.importer_type === \"agile\") {\n        this.projectForm.project_type = null;\n      } else {\n        this.projectForm.project_type = \"scrum\";\n      }\n      this.projectForm.create_subissues = true;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    JiraImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    JiraImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    JiraImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    JiraImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return JiraImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportProjectFormCtrl', JiraImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportProjectFormDirective;\n\n  JiraImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/jira-import/jira-import-project-form/jira-import-project-form.html\",\n      controller: \"JiraImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  JiraImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImportProjectForm\", JiraImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportController;\n\n  JiraImportController = (function() {\n    JiraImportController.$inject = ['tgJiraImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function JiraImportController(jiraImportService, confirm, translate, importProjectService) {\n      this.jiraImportService = jiraImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.step = 'autorization-jira';\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.jiraImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    JiraImportController.prototype.startProjectSelector = function() {\n      this.step = 'project-select-jira';\n      return this.jiraImportService.fetchProjects();\n    };\n\n    JiraImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-jira';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.jiraImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-jira';\n    };\n\n    JiraImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-jira';\n    };\n\n    JiraImportController.prototype.startImport = function(users) {\n      var loader, projectType, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      projectType = this.project.get('project_type');\n      if (projectType === \"issues\" && this.project.get('create_subissues')) {\n        projectType = \"issues-with-subissues\";\n      }\n      promise = this.jiraImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'), projectType, this.project.get('importer_type'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    JiraImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return JiraImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('JiraImportCtrl', JiraImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportDirective;\n\n  JiraImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/jira-import/jira-import.html\",\n      controller: \"JiraImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  JiraImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgJiraImport\", JiraImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var JiraImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  JiraImportService = (function(superClass) {\n    extend(JiraImportService, superClass);\n\n    JiraImportService.$inject = ['tgResources', '$location', '$q'];\n\n    function JiraImportService(resources, location, q) {\n      this.resources = resources;\n      this.location = location;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n    }\n\n    JiraImportService.prototype.setToken = function(token, url) {\n      this.token = token;\n      return this.url = url;\n    };\n\n    JiraImportService.prototype.fetchProjects = function() {\n      return this.resources.jiraImporter.listProjects(this.url, this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.jiraImporter.listUsers(this.url, this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      return this.resources.jiraImporter.importProject(this.url, this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType);\n    };\n\n    JiraImportService.prototype.getAuthUrl = function(url) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.getAuthUrl(url).then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          }, function(err) {\n            return reject(err.data._error_message);\n          });\n        };\n      })(this));\n    };\n\n    JiraImportService.prototype.authorize = function(oauth_verifier) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.jiraImporter.authorize(oauth_verifier).then((function(response) {\n            _this.token = response.data.token;\n            _this.url = response.data.url;\n            return resolve(response.data);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return JiraImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgJiraImportService\", JiraImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var NewsletterEmailLightboxDirective;\n\n  NewsletterEmailLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService, $storageService, $rs, $currentUserService, $rs2, $confirm) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      lightboxService.open(el);\n      scope.dontAsk = false;\n      scope.preference = false;\n      scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n      scope.closeLightbox = function() {\n        return lightboxService.close(el);\n      };\n      return scope.setEmail = function() {\n        if (scope.preference) {\n          return $rs2.onPremise.subscribeOnPremiseNewsletter({\n            \"email\": $currentUserService.getUser().get('email'),\n            \"full_name\": $currentUserService.getUser().get('full_name'),\n            \"origin_form\": 'Newsletter sign-up create'\n          }).then((function(_this) {\n            return function() {\n              $rs.user.setUserStorage('dont_ask_premise_newsletter', true);\n              return scope.closeLightbox();\n            };\n          })(this))[\"catch\"]((function(_this) {\n            return function() {\n              return $confirm.notify(\"light-error\", \"\");\n            };\n          })(this));\n        } else {\n          $rs.user.setUserStorage('dont_ask_premise_newsletter', scope.dontAsk);\n          return scope.closeLightbox();\n        }\n      };\n    };\n    return {\n      scope: {\n        visible: '<',\n        openNewsletter: '<',\n        onClose: '&',\n        onSelectUser: '&'\n      },\n      templateUrl: 'projects/create/newsletter-email-lightbox/newsletter-email-lightbox.html',\n      link: link\n    };\n  };\n\n  NewsletterEmailLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService', \"$tgStorage\", \"tgResources\", \"tgCurrentUserService\", \"tgResources\", \"$tgConfirm\"];\n\n  angular.module(\"taigaProjects\").directive(\"tgNewsletterEmailLightbox\", NewsletterEmailLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxCtrl;\n\n  SelectImportUserLightboxCtrl = (function() {\n    SelectImportUserLightboxCtrl.$inject = [];\n\n    function SelectImportUserLightboxCtrl() {}\n\n    SelectImportUserLightboxCtrl.prototype.start = function() {\n      this.mode = 'search';\n      return this.invalid = false;\n    };\n\n    SelectImportUserLightboxCtrl.prototype.assignUser = function() {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: this.userEmail\n      });\n    };\n\n    SelectImportUserLightboxCtrl.prototype.selectUser = function(taigaUser) {\n      return this.onSelectUser({\n        user: this.user,\n        taigaUser: Immutable.fromJS(taigaUser)\n      });\n    };\n\n    return SelectImportUserLightboxCtrl;\n\n  })();\n\n  angular.module('taigaProjects').controller('SelectImportUserLightboxCtrl', SelectImportUserLightboxCtrl);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var SelectImportUserLightboxDirective;\n\n  SelectImportUserLightboxDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return scope.$watch('vm.visible', function(visible) {\n        if (visible && !el.hasClass('open')) {\n          ctrl.start();\n          return lightboxService.open(el, null, scope.vm.onClose).then(function() {\n            el.find('input').focus();\n            return lightboxKeyboardNavigationService.init(el);\n          });\n        } else if (!visible && el.hasClass('open')) {\n          return lightboxService.close(el).then(function() {\n            ctrl.userEmail = '';\n            return ctrl.usersSearch = '';\n          });\n        }\n      });\n    };\n    return {\n      controller: \"SelectImportUserLightboxCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        user: '<',\n        visible: '<',\n        onClose: '&',\n        onSelectUser: '&',\n        selectableUsers: '<',\n        isPrivate: '<',\n        limitMembersPrivateProject: '<',\n        limitMembersPublicProject: '<',\n        displayEmailSelector: '<'\n      },\n      templateUrl: 'projects/create/select-import-user-lightbox/select-import-user-lightbox.html',\n      link: link\n    };\n  };\n\n  SelectImportUserLightboxDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgSelectImportUserLightbox\", SelectImportUserLightboxDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormController;\n\n  TrelloImportProjectFormController = (function() {\n    TrelloImportProjectFormController.$inject = [\"tgCurrentUserService\"];\n\n    function TrelloImportProjectFormController(currentUserService) {\n      this.currentUserService = currentUserService;\n      this.canCreatePublicProjects = this.currentUserService.canCreatePublicProjects();\n      this.canCreatePrivateProjects = this.currentUserService.canCreatePrivateProjects();\n      this.projectForm = this.project.toJS();\n      this.platformName = \"Trello\";\n      this.projectForm.is_private = false;\n      this.projectForm.keepExternalReference = false;\n      if (!this.canCreatePublicProjects.valid && this.canCreatePrivateProjects.valid) {\n        this.projectForm.is_private = true;\n      }\n    }\n\n    TrelloImportProjectFormController.prototype.checkUsersLimit = function() {\n      this.limitMembersPrivateProject = this.currentUserService.canAddMembersPrivateProject(this.members.size);\n      return this.limitMembersPublicProject = this.currentUserService.canAddMembersPublicProject(this.members.size);\n    };\n\n    TrelloImportProjectFormController.prototype.saveForm = function() {\n      return this.onSaveProjectDetails({\n        project: Immutable.fromJS(this.projectForm)\n      });\n    };\n\n    TrelloImportProjectFormController.prototype.canCreateProject = function() {\n      if (this.projectForm.is_private) {\n        return this.canCreatePrivateProjects.valid;\n      } else {\n        return this.canCreatePublicProjects.valid;\n      }\n    };\n\n    TrelloImportProjectFormController.prototype.isDisabled = function() {\n      return !this.canCreateProject();\n    };\n\n    return TrelloImportProjectFormController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportProjectFormCtrl', TrelloImportProjectFormController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportProjectFormDirective;\n\n  TrelloImportProjectFormDirective = function() {\n    return {\n      link: function(scope, elm, attr, ctrl) {\n        return scope.$watch('vm.members', ctrl.checkUsersLimit.bind(ctrl));\n      },\n      templateUrl: \"projects/create/trello-import/trello-import-project-form/trello-import-project-form.html\",\n      controller: \"TrelloImportProjectFormCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        members: '<',\n        project: '<',\n        onSaveProjectDetails: '&',\n        onCancelForm: '&',\n        fetchingUsers: '<'\n      }\n    };\n  };\n\n  TrelloImportProjectFormDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImportProjectForm\", TrelloImportProjectFormDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportController;\n\n  TrelloImportController = (function() {\n    TrelloImportController.$inject = ['tgTrelloImportService', '$tgConfirm', '$translate', 'tgImportProjectService'];\n\n    function TrelloImportController(trelloImportService, confirm, translate, importProjectService) {\n      this.trelloImportService = trelloImportService;\n      this.confirm = confirm;\n      this.translate = translate;\n      this.importProjectService = importProjectService;\n      this.project = null;\n      taiga.defineImmutableProperty(this, 'projects', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'members', (function(_this) {\n        return function() {\n          return _this.trelloImportService.projectUsers;\n        };\n      })(this));\n    }\n\n    TrelloImportController.prototype.startProjectSelector = function() {\n      return this.trelloImportService.fetchProjects().then((function(_this) {\n        return function() {\n          return _this.step = 'project-select-trello';\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSelectProject = function(project) {\n      this.step = 'project-form-trello';\n      this.project = project;\n      this.fetchingUsers = true;\n      return this.trelloImportService.fetchUsers(this.project.get('id')).then((function(_this) {\n        return function() {\n          return _this.fetchingUsers = false;\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.onSaveProjectDetails = function(project) {\n      this.project = project;\n      return this.step = 'project-members-trello';\n    };\n\n    TrelloImportController.prototype.onCancelMemberSelection = function() {\n      return this.step = 'project-form-trello';\n    };\n\n    TrelloImportController.prototype.startImport = function(users) {\n      var loader, promise;\n      loader = this.confirm.loader(this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.TITLE'), this.translate.instant('PROJECT.IMPORT.IN_PROGRESS.DESCRIPTION'), true);\n      loader.start();\n      promise = this.trelloImportService.importProject(this.project.get('name'), this.project.get('description'), this.project.get('id'), users, this.project.get('keepExternalReference'), this.project.get('is_private'));\n      return this.importProjectService.importPromise(promise).then((function(_this) {\n        return function() {\n          return loader.stop();\n        };\n      })(this));\n    };\n\n    TrelloImportController.prototype.submitUserSelection = function(users) {\n      this.startImport(users);\n      return null;\n    };\n\n    return TrelloImportController;\n\n  })();\n\n  angular.module('taigaProjects').controller('TrelloImportCtrl', TrelloImportController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportDirective;\n\n  TrelloImportDirective = function() {\n    return {\n      link: function(scope, elm, attrs, ctrl) {\n        return ctrl.startProjectSelector();\n      },\n      templateUrl: \"projects/create/trello-import/trello-import.html\",\n      controller: \"TrelloImportCtrl\",\n      controllerAs: \"vm\",\n      bindToController: true,\n      scope: {\n        onCancel: '&'\n      }\n    };\n  };\n\n  TrelloImportDirective.$inject = [];\n\n  angular.module(\"taigaProjects\").directive(\"tgTrelloImport\", TrelloImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TrelloImportService,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  TrelloImportService = (function(superClass) {\n    extend(TrelloImportService, superClass);\n\n    TrelloImportService.$inject = ['tgResources', '$q'];\n\n    function TrelloImportService(resources, q) {\n      this.resources = resources;\n      this.q = q;\n      this.projects = Immutable.List();\n      this.projectUsers = Immutable.List();\n      this.token = null;\n    }\n\n    TrelloImportService.prototype.setToken = function(token) {\n      return this.token = token;\n    };\n\n    TrelloImportService.prototype.fetchProjects = function() {\n      return this.resources.trelloImporter.listProjects(this.token).then((function(_this) {\n        return function(projects) {\n          return _this.projects = projects;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.fetchUsers = function(projectId) {\n      return this.resources.trelloImporter.listUsers(this.token, projectId).then((function(_this) {\n        return function(users) {\n          return _this.projectUsers = users;\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.importProject = function(name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      return this.resources.trelloImporter.importProject(this.token, name, description, projectId, userBindings, keepExternalReference, isPrivate);\n    };\n\n    TrelloImportService.prototype.getAuthUrl = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          return _this.resources.trelloImporter.getAuthUrl().then(function(response) {\n            _this.authUrl = response.data.url;\n            return resolve(_this.authUrl);\n          });\n        };\n      })(this));\n    };\n\n    TrelloImportService.prototype.authorize = function(verifyCode) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          return _this.resources.trelloImporter.authorize(verifyCode).then((function(response) {\n            _this.token = response.data.token;\n            return resolve(_this.token);\n          }), function(error) {\n            return reject(new Error(error.status));\n          });\n        };\n      })(this));\n    };\n\n    return TrelloImportService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgTrelloImportService\", TrelloImportService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WarningUserImportDirective;\n\n  WarningUserImportDirective = function(lightboxService, lightboxKeyboardNavigationService) {\n    return {\n      link: function(scope, el, attr) {\n        return scope.$watch('visible', function(visible) {\n          if (visible && !el.hasClass('open')) {\n            return lightboxService.open(el, scope.onClose).then(function() {\n              el.find('input').focus();\n              return lightboxKeyboardNavigationService.init(el);\n            });\n          } else if (!visible && el.hasClass('open')) {\n            return lightboxService.close(el);\n          }\n        });\n      },\n      templateUrl: \"projects/create/warning-user-import-lightbox/warning-user-import-lightbox.html\",\n      scope: {\n        visible: '<',\n        onClose: '&',\n        onConfirm: '&'\n      }\n    };\n  };\n\n  WarningUserImportDirective.$inject = ['lightboxService', 'lightboxKeyboardNavigationService'];\n\n  angular.module(\"taigaProjects\").directive(\"tgWarningUserImportLightbox\", WarningUserImportDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsListingController;\n\n  ProjectsListingController = (function() {\n    ProjectsListingController.$inject = [\"tgCurrentUserService\"];\n\n    function ProjectsListingController(currentUserService) {\n      this.currentUserService = currentUserService;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this.currentUserService.projects.get(\"all\");\n        };\n      })(this));\n    }\n\n    return ProjectsListingController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectsListing\", ProjectsListingController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectRouterController;\n\n  ProjectRouterController = (function() {\n    ProjectRouterController.$inject = [\"$routeParams\", \"$location\", \"tgProjectService\", \"$tgResources\", \"$tgSections\"];\n\n    function ProjectRouterController(routeParams, location, projectService, rs, tgSections) {\n      this.routeParams = routeParams;\n      this.location = location;\n      this.projectService = projectService;\n      this.rs = rs;\n      this.tgSections = tgSections;\n      this.getProjectHomepage().then((function(_this) {\n        return function(section) {\n          if (section) {\n            return _this.location.url(\"project/\" + _this.routeParams.pslug + \"/\" + section);\n          } else {\n            return _this.gotoDefaultProjectHomepage();\n          }\n        };\n      })(this)).then(null, function() {\n        return this.gotoDefaultProjectHomepage();\n      });\n    }\n\n    ProjectRouterController.prototype.gotoDefaultProjectHomepage = function() {\n      return this.location.url(\"project/\" + this.routeParams.pslug + \"/timeline\");\n    };\n\n    ProjectRouterController.prototype.getProjectHomepage = function() {\n      var project;\n      project = this.projectService.project.toJS();\n      return this.rs.userProjectSettings.list({\n        project: project.id\n      }).then((function(_this) {\n        return function(userProjectSettings) {\n          var settings;\n          settings = _.find(userProjectSettings, {\n            \"project\": project.id\n          });\n          if (!settings) {\n            return;\n          }\n          return _this.tgSections.getPath(project.slug, settings.homepage);\n        };\n      })(this));\n    };\n\n    return ProjectRouterController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"ProjectRouter\", ProjectRouterController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectController;\n\n  ProjectController = (function() {\n    ProjectController.$inject = [\"$routeParams\", \"tgAppMetaService\", \"$tgAuth\", \"$translate\", \"tgProjectService\", \"$tgConfig\", \"$tgNavUrls\", \"$location\"];\n\n    function ProjectController(routeParams, appMetaService, auth, translate, projectService, config, navUrls, location) {\n      var nextUrl;\n      this.routeParams = routeParams;\n      this.appMetaService = appMetaService;\n      this.auth = auth;\n      this.translate = translate;\n      this.projectService = projectService;\n      this.config = config;\n      this.navUrls = navUrls;\n      this.location = location;\n      this.user = this.auth.userData;\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this.projectService.project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"members\", (function(_this) {\n        return function() {\n          return _this.projectService.activeMembers;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"isAuthenticated\", (function(_this) {\n        return function() {\n          return !!_this.user;\n        };\n      })(this));\n      nextUrl = this.location.url();\n      this.registerUrl = (this.navUrls.resolve(\"register\")) + \"?next=\" + nextUrl;\n      this.loginUrl = (this.navUrls.resolve(\"login\")) + \"?next=\" + nextUrl;\n      this.publicRegisterEnabled = this.config.get(\"publicRegisterEnabled\");\n      this.appMetaService.setfn(this._setMeta.bind(this));\n    }\n\n    ProjectController.prototype._setMeta = function() {\n      var ctx;\n      if (!this.project) {\n        return null;\n      }\n      ctx = {\n        projectName: this.project.get(\"name\")\n      };\n      return {\n        title: this.translate.instant(\"PROJECT.PAGE_TITLE\", ctx),\n        description: this.project.get(\"description\")\n      };\n    };\n\n    return ProjectController;\n\n  })();\n\n  angular.module(\"taigaProjects\").controller(\"Project\", ProjectController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectsService, groupBy, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  ProjectsService = (function(superClass) {\n    extend(ProjectsService, superClass);\n\n    ProjectsService.$inject = [\"tgResources\", \"$projectUrl\"];\n\n    function ProjectsService(rs, projectUrl) {\n      this.rs = rs;\n      this.projectUrl = projectUrl;\n    }\n\n    ProjectsService.prototype.create = function(data) {\n      return this.rs.projects.create(data);\n    };\n\n    ProjectsService.prototype.duplicate = function(projectId, data) {\n      return this.rs.projects.duplicate(projectId, data);\n    };\n\n    ProjectsService.prototype.getProjectBySlug = function(projectSlug) {\n      return this.rs.projects.getProjectBySlug(projectSlug).then((function(_this) {\n        return function(project) {\n          return _this._decorate(project);\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getProjectStats = function(projectId) {\n      return this.rs.projects.getProjectStats(projectId);\n    };\n\n    ProjectsService.prototype.getProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype.getListProjectsByUserId = function(userId, paginate) {\n      return this.rs.projects.getListProjectsByUserId(userId, paginate).then((function(_this) {\n        return function(projects) {\n          return projects.map(_this._decorate.bind(_this));\n        };\n      })(this));\n    };\n\n    ProjectsService.prototype._decorate = function(project) {\n      var url;\n      url = this.projectUrl.get(project.toJS());\n      project = project.set(\"url\", url);\n      return project;\n    };\n\n    ProjectsService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.rs.projects.bulkUpdateOrder(sortData);\n    };\n\n    ProjectsService.prototype.transferValidateToken = function(projectId, token) {\n      return this.rs.projects.transferValidateToken(projectId, token);\n    };\n\n    ProjectsService.prototype.transferAccept = function(projectId, token, reason) {\n      return this.rs.projects.transferAccept(projectId, token, reason);\n    };\n\n    ProjectsService.prototype.transferReject = function(projectId, token, reason) {\n      return this.rs.projects.transferReject(projectId, token, reason);\n    };\n\n    return ProjectsService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaProjects\").service(\"tgProjectsService\", ProjectsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CantOwnProjectExplanationDirective;\n\n  CantOwnProjectExplanationDirective = function() {\n    return {\n      templateUrl: \"projects/transfer/cant-own-project-explanation.html\"\n    };\n  };\n\n  angular.module(\"taigaProjects\").directive(\"tgCantOwnProjectExplanation\", CantOwnProjectExplanationDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProject, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProject = (function() {\n    TransferProject.$inject = [\"$routeParams\", \"tgProjectsService\", \"tgProjectService\", \"$location\", \"$tgAuth\", \"tgCurrentUserService\", \"$tgNavUrls\", \"$translate\", \"$tgConfirm\", \"tgErrorHandlingService\"];\n\n    function TransferProject(routeParams, projectsService, projectService, location, authService, currentUserService, navUrls, translate, confirmService, errorHandlingService) {\n      this.routeParams = routeParams;\n      this.projectsService = projectsService;\n      this.projectService = projectService;\n      this.location = location;\n      this.authService = authService;\n      this.currentUserService = currentUserService;\n      this.navUrls = navUrls;\n      this.translate = translate;\n      this.confirmService = confirmService;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    TransferProject.prototype.initialize = function() {\n      this.projectId = this.project.get(\"id\");\n      this.token = this.routeParams.token;\n      this.showAddComment = false;\n      return this._refreshUserData();\n    };\n\n    TransferProject.prototype._validateToken = function() {\n      return this.projectsService.transferValidateToken(this.projectId, this.token).then(null, (function(_this) {\n        return function(data, status) {\n          return _this.errorHandlingService.notfound();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._refreshUserData = function() {\n      return this.authService.refresh().then((function(_this) {\n        return function() {\n          _this._validateToken();\n          _this._setProjectData();\n          return _this._checkOwnerData();\n        };\n      })(this));\n    };\n\n    TransferProject.prototype._setProjectData = function() {\n      return this.canBeOwnedByUser = this.currentUserService.canOwnProject(this.project);\n    };\n\n    TransferProject.prototype._checkOwnerData = function() {\n      var currentUser, maxMemberships;\n      currentUser = this.currentUserService.getUser();\n      if (this.project.get('is_private')) {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PRIVATE';\n        this.maxProjects = currentUser.get('max_private_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_private_projects');\n        maxMemberships = currentUser.get('max_memberships_private_projects');\n      } else {\n        this.ownerMessage = 'ADMIN.PROJECT_TRANSFER.OWNER_MESSAGE.PUBLIC';\n        this.maxProjects = currentUser.get('max_public_projects');\n        if (this.maxProjects === null) {\n          this.maxProjects = this.translate.instant('ADMIN.PROJECT_TRANSFER.UNLIMITED_PROJECTS');\n        }\n        this.currentProjects = currentUser.get('total_public_projects');\n        maxMemberships = currentUser.get('max_memberships_public_projects');\n      }\n      return this.validNumberOfMemberships = maxMemberships === null || this.project.get('total_memberships') <= maxMemberships;\n    };\n\n    TransferProject.prototype.transferAccept = function(token, reason) {\n      this.loadingAccept = true;\n      return this.projectsService.transferAccept(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          return _this.projectService.fetchProject().then(function() {\n            var newUrl;\n            newUrl = _this.navUrls.resolve(\"project-admin-project-profile-details\", {\n              project: _this.project.get(\"slug\")\n            });\n            _this.loadingAccept = false;\n            _this.location.path(newUrl);\n            _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.ACCEPTED_PROJECT_OWNERNSHIP\"), '', 5000);\n          });\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.transferReject = function(token, reason) {\n      this.loadingReject = true;\n      return this.projectsService.transferReject(this.project.get(\"id\"), token, reason).then((function(_this) {\n        return function() {\n          var newUrl;\n          newUrl = _this.navUrls.resolve(\"home\", {\n            project: _this.project.get(\"slug\")\n          });\n          _this.loadingReject = false;\n          _this.location.path(newUrl);\n          _this.confirmService.notify(\"success\", _this.translate.instant(\"ADMIN.PROJECT_TRANSFER.REJECTED_PROJECT_OWNERNSHIP\"), '', 5000);\n        };\n      })(this));\n    };\n\n    TransferProject.prototype.addComment = function() {\n      return this.showAddComment = true;\n    };\n\n    TransferProject.prototype.hideComment = function() {\n      this.showAddComment = false;\n      return this.reason = '';\n    };\n\n    return TransferProject;\n\n  })();\n\n  module.controller(\"TransferProjectController\", TransferProject);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var TransferProjectDirective, module;\n\n  module = angular.module('taigaProjects');\n\n  TransferProjectDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return ctrl.initialize();\n    };\n    return {\n      link: link,\n      scope: {},\n      bindToController: {\n        project: \"=\"\n      },\n      templateUrl: \"projects/transfer/transfer-project.html\",\n      controller: 'TransferProjectController',\n      controllerAs: 'vm'\n    };\n  };\n\n  module.directive('tgTransferProject', TransferProjectDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, sizeFormat, taiga;\n\n  taiga = this.taiga;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  Resource = function(urlsService, http, config, $rootScope, $q, storage) {\n    var service;\n    service = {};\n    service.list = function(type, objectId, projectId) {\n      var httpOptions, params, url, urlname;\n      urlname = \"attachments/\" + type;\n      params = {\n        object_id: objectId,\n        project: projectId\n      };\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      url = urlsService.resolve(urlname);\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.get = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.get(url);\n    };\n    service[\"delete\"] = function(type, id) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http[\"delete\"](url);\n    };\n    service.patch = function(type, id, patch) {\n      var url, urlname;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname) + (\"/\" + id);\n      return http.patch(url, patch);\n    };\n    service.create = function(type, projectId, objectId, file, from_comment) {\n      var data, defered, maxFileSize, response, token, uploadComplete, uploadFailed, uploadProgress, url, urlname, xhr;\n      urlname = \"attachments/\" + type;\n      url = urlsService.resolve(urlname);\n      defered = $q.defer();\n      if (file === void 0) {\n        defered.reject(null);\n        return defered.promise;\n      }\n      maxFileSize = config.get(\"maxUploadFileSize\", null);\n      if (maxFileSize && file.size > maxFileSize) {\n        response = {\n          status: 413,\n          data: {\n            _error_message: \"'\" + file.name + \"' (\" + (sizeFormat(file.size)) + \") is too heavy for our oompa loompas, try it with a smaller than (\" + (sizeFormat(maxFileSize)) + \")\"\n          }\n        };\n        defered.reject(response);\n        return defered.promise;\n      }\n      uploadProgress = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"in-progress\";\n            file.size = sizeFormat(evt.total);\n            file.progressMessage = \"upload \" + (sizeFormat(evt.loaded)) + \" of \" + (sizeFormat(evt.total));\n            return file.progressPercent = \"\" + (Math.round((evt.loaded / evt.total) * 100));\n          });\n        };\n      })(this);\n      uploadComplete = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            var attachment, ref, status;\n            file.status = \"done\";\n            status = evt.target.status;\n            try {\n              attachment = JSON.parse(evt.target.responseText);\n            } catch (error) {\n              attachment = {};\n            }\n            if (status >= 200 && status < 400) {\n              attachment = Immutable.fromJS(attachment);\n              return defered.resolve(attachment);\n            } else {\n              response = {\n                status: status,\n                data: {\n                  _error_message: (ref = data['attached_file']) != null ? ref[0] : void 0\n                }\n              };\n              return defered.reject(response);\n            }\n          });\n        };\n      })(this);\n      uploadFailed = (function(_this) {\n        return function(evt) {\n          return $rootScope.$apply(function() {\n            file.status = \"error\";\n            return defered.reject(\"fail\");\n          });\n        };\n      })(this);\n      data = new FormData();\n      data.append(\"project\", projectId);\n      data.append(\"object_id\", objectId);\n      data.append(\"attached_file\", file);\n      data.append(\"from_comment\", from_comment);\n      xhr = new XMLHttpRequest();\n      xhr.upload.addEventListener(\"progress\", uploadProgress, false);\n      xhr.addEventListener(\"load\", uploadComplete, false);\n      xhr.addEventListener(\"error\", uploadFailed, false);\n      token = storage.get('token');\n      xhr.open(\"POST\", url);\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send(data);\n      return defered.promise;\n    };\n    return function() {\n      return {\n        \"attachments\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\", \"$rootScope\", \"$q\", \"$tgStorage\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgAttachmentsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"epics\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.list = function(projectId, page) {\n      var params, url;\n      if (page == null) {\n        page = 0;\n      }\n      url = urlsService.resolve(\"epics\");\n      params = {\n        project: projectId,\n        page: page\n      };\n      return http.get(url, params).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    service.patch = function(id, patch) {\n      var url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      return http.patch(url, patch).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.post = function(params) {\n      var url;\n      url = urlsService.resolve(\"epics\");\n      return http.post(url, params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.reorder = function(id, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epics\") + (\"/\" + id);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.addRelatedUserstory = function(epicId, userstoryId) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId);\n      params = {\n        user_story: userstoryId,\n        epic: epicId\n      };\n      return http.post(url, params);\n    };\n    service.reorderRelatedUserstory = function(epicId, userstoryId, data, setOrders) {\n      var options, url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      options = {\n        \"headers\": {\n          \"set-orders\": JSON.stringify(setOrders)\n        }\n      };\n      return http.patch(url, data, null, options);\n    };\n    service.bulkCreateRelatedUserStories = function(epicId, projectId, bulk_userstories) {\n      var params, url;\n      url = urlsService.resolve(\"epic-related-userstories-bulk-create\", epicId);\n      params = {\n        bulk_userstories: bulk_userstories,\n        project_id: projectId\n      };\n      return http.post(url, params);\n    };\n    service.deleteRelatedUserstory = function(epicId, userstoryId) {\n      var url;\n      url = urlsService.resolve(\"epic-related-userstories\", epicId) + (\"/\" + userstoryId);\n      return http[\"delete\"](url);\n    };\n    return function() {\n      return {\n        \"epics\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgEpicsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getApplicationToken = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"applications\");\n      url = url + \"/\" + applicationId + \"/token?state=\" + state;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.authorizeApplicationToken = function(applicationId, state) {\n      var data, url;\n      url = urlsService.resolve(\"application-tokens\");\n      url = url + \"/authorize\";\n      data = {\n        \"state\": state,\n        \"application\": applicationId\n      };\n      return http.post(url, data).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"externalapps\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgExternalAppsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getHistory = function(historyType, contentType, objectId, page) {\n      var url;\n      url = urlsService.resolve(\"history/\" + contentType);\n      return http.get(url + \"/\" + objectId, {\n        page: page,\n        type: historyType\n      }).then(function(result) {\n        return {\n          list: Immutable.fromJS(result.data),\n          headers: result.headers\n        };\n      });\n    };\n    return function() {\n      return {\n        \"history\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgHistory\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AsanaResource, GithubResource, JiraResource, TrelloResource, module, taiga;\n\n  taiga = this.taiga;\n\n  TrelloResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(url) {\n      url = urlsService.resolve(\"importers-trello-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(verifyCode) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-authorize\");\n      return http.post(url, {\n        code: verifyCode\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-trello-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate) {\n      var data, url;\n      url = urlsService.resolve(\"importers-trello-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: \"kanban\"\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"trelloImporter\": service\n      };\n    };\n  };\n\n  TrelloResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  JiraResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(jira_url) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-auth-url\") + \"?url=\" + jira_url;\n      return http.get(url);\n    };\n    service.authorize = function(oauth_verifier) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-authorize\");\n      return http.post(url, {\n        oauth_verifier: oauth_verifier\n      });\n    };\n    service.listProjects = function(jira_url, token) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-projects\");\n      return http.post(url, {\n        url: jira_url,\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(jira_url, token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-jira-list-users\");\n      return http.post(url, {\n        url: jira_url,\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(jira_url, token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType, importerType) {\n      var data, projectTemplate, url;\n      url = urlsService.resolve(\"importers-jira-import-project\");\n      projectTemplate = \"kanban\";\n      if (projectType !== \"kanban\") {\n        projectTemplate = \"scrum\";\n      }\n      data = {\n        url: jira_url,\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        project_type: projectType,\n        importer_type: importerType,\n        template: projectTemplate\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"jiraImporter\": service\n      };\n    };\n  };\n\n  JiraResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  GithubResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function(callbackUri) {\n      var url;\n      url = urlsService.resolve(\"importers-github-auth-url\") + \"?uri=\" + callbackUri;\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-github-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-github-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-github-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"githubImporter\": service\n      };\n    };\n  };\n\n  GithubResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  AsanaResource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.getAuthUrl = function() {\n      var url;\n      url = urlsService.resolve(\"importers-asana-auth-url\");\n      return http.get(url);\n    };\n    service.authorize = function(code) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-authorize\");\n      return http.post(url, {\n        code: code\n      });\n    };\n    service.listProjects = function(token) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-projects\");\n      return http.post(url, {\n        token: token\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.listUsers = function(token, projectId) {\n      var url;\n      url = urlsService.resolve(\"importers-asana-list-users\");\n      return http.post(url, {\n        token: token,\n        project: projectId\n      }).then(function(response) {\n        return Immutable.fromJS(response.data);\n      });\n    };\n    service.importProject = function(token, name, description, projectId, userBindings, keepExternalReference, isPrivate, projectType) {\n      var data, url;\n      url = urlsService.resolve(\"importers-asana-import-project\");\n      data = {\n        token: token,\n        name: name,\n        description: description,\n        project: projectId,\n        users_bindings: userBindings.toJS(),\n        keep_external_reference: keepExternalReference,\n        is_private: isPrivate,\n        template: projectType\n      };\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"asanaImporter\": service\n      };\n    };\n  };\n\n  AsanaResource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTrelloImportResource\", TrelloResource);\n\n  module.factory(\"tgJiraImportResource\", JiraResource);\n\n  module.factory(\"tgGithubImportResource\", GithubResource);\n\n  module.factory(\"tgAsanaImportResource\", AsanaResource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"issues\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"issues\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgIssuesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, config) {\n    var service;\n    service = {};\n    service.subscribeOnPremiseNewsletter = function(requestParams) {\n      var params;\n      params = {\n        url: config.get(\"newsletterSubscriberUrl\") + \"/subscribe/\",\n        method: \"POST\",\n        cancelable: true,\n        data: requestParams\n      };\n      return http.request(params).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"onPremise\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"$tgConfig\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgOnPremiseResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module, pagination;\n\n  pagination = function() {};\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.create = function(data) {\n      var url;\n      url = urlsService.resolve('projects');\n      return http.post(url, JSON.stringify(data)).then((function(_this) {\n        return function(result) {\n          return Immutable.fromJS(result.data);\n        };\n      })(this));\n    };\n    service.duplicate = function(projectId, data) {\n      var members, params, url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId + \"/duplicate\";\n      members = data.users.map((function(_this) {\n        return function(member) {\n          return {\n            \"id\": member\n          };\n        };\n      })(this));\n      params = {\n        \"name\": data.name,\n        \"description\": data.description,\n        \"is_private\": data.is_private,\n        \"users\": members\n      };\n      return http.post(url, params);\n    };\n    service.getProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (params == null) {\n        params = {};\n      }\n      if (pagination == null) {\n        pagination = true;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-lazy-pagination\": true\n          }\n        };\n      }\n      return http.get(url, params, httpOptions);\n    };\n    service.getProjectBySlug = function(projectSlug) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/by_slug?slug=\" + projectSlug;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\"\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getListProjectsByUserId = function(userId, paginate) {\n      var httpOptions, params, url;\n      if (paginate == null) {\n        paginate = false;\n      }\n      url = urlsService.resolve(\"projects\");\n      httpOptions = {};\n      if (!paginate) {\n        httpOptions.headers = {\n          \"x-disable-pagination\": \"1\"\n        };\n      }\n      params = {\n        \"member\": userId,\n        \"order_by\": \"user_order\",\n        \"slight\": true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getProjectStats = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"projects\");\n      url = url + \"/\" + projectId;\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.bulkUpdateOrder = function(bulkData) {\n      var url;\n      url = urlsService.resolve(\"bulk-update-projects-order\");\n      return http.post(url, bulkData);\n    };\n    service.getTimeline = function(projectId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-project\");\n      url = url + \"/\" + projectId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.likeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-like\", projectId);\n      return http.post(url);\n    };\n    service.unlikeProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unlike\", projectId);\n      return http.post(url);\n    };\n    service.watchProject = function(projectId, notifyLevel) {\n      var data, url;\n      data = {\n        notify_level: notifyLevel,\n        live_notify_level: notifyLevel\n      };\n      url = urlsService.resolve(\"project-watch\", projectId);\n      return http.post(url, data);\n    };\n    service.unwatchProject = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-unwatch\", projectId);\n      return http.post(url);\n    };\n    service.contactProject = function(projectId, message) {\n      var params, url;\n      params = {\n        project: projectId,\n        comment: message\n      };\n      url = urlsService.resolve(\"project-contact\");\n      return http.post(url, params);\n    };\n    service.transferValidateToken = function(projectId, token) {\n      var data, url;\n      data = {\n        token: token\n      };\n      url = urlsService.resolve(\"project-transfer-validate-token\", projectId);\n      return http.post(url, data);\n    };\n    service.transferAccept = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-accept\", projectId);\n      return http.post(url, data);\n    };\n    service.transferReject = function(projectId, token, reason) {\n      var data, url;\n      data = {\n        token: token,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-reject\", projectId);\n      return http.post(url, data);\n    };\n    service.transferRequest = function(projectId) {\n      var url;\n      url = urlsService.resolve(\"project-transfer-request\", projectId);\n      return http.post(url);\n    };\n    service.transferStart = function(projectId, userId, reason) {\n      var data, url;\n      data = {\n        user: userId,\n        reason: reason\n      };\n      url = urlsService.resolve(\"project-transfer-start\", projectId);\n      return http.post(url, data);\n    };\n    return function() {\n      return {\n        \"projects\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgProjectsResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resources, services;\n\n  services = [\"tgProjectsResources\", \"tgUserResources\", \"tgUsersResources\", \"tgUserstoriesResource\", \"tgTasksResource\", \"tgIssuesResource\", \"tgExternalAppsResource\", \"tgAttachmentsResource\", \"tgStatsResource\", \"tgHistory\", \"tgEpicsResource\", \"tgTrelloImportResource\", \"tgJiraImportResource\", \"tgGithubImportResource\", \"tgAsanaImportResource\", \"tgOnPremiseResource\"];\n\n  Resources = function($injector) {\n    var i, j, len, len1, ref, service, serviceFn, serviceName, serviceProperty;\n    for (i = 0, len = services.length; i < len; i++) {\n      serviceName = services[i];\n      serviceFn = $injector.get(serviceName);\n      service = $injector.invoke(serviceFn);\n      ref = Object.keys(service);\n      for (j = 0, len1 = ref.length; j < len1; j++) {\n        serviceProperty = ref[j];\n        if (this[serviceProperty]) {\n          console.warn(\"repeated resource \" + serviceProperty);\n        }\n        this[serviceProperty] = service[serviceProperty];\n      }\n    }\n    return this;\n  };\n\n  Resources.$inject = [\"$injector\"];\n\n  angular.module(\"taigaResources2\").service(\"tgResources\", Resources);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.discover = function(applicationId, state) {\n      var url;\n      url = urlsService.resolve(\"stats-discover\");\n      return http.get(url).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"stats\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgStatsResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"tasks\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"tasks\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgTasksResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserStorage = function(key) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-storage\");\n      if (key) {\n        url += '/' + key;\n      }\n      httpOptions = {};\n      return http.get(url, {}).then(function(response) {\n        return response.data.value;\n      });\n    };\n    service.setUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\") + '/' + key;\n      params = {\n        key: key,\n        value: value\n      };\n      return http.put(url, params);\n    };\n    service.createUserStorage = function(key, value) {\n      var params, url;\n      url = urlsService.resolve(\"user-storage\");\n      params = {\n        key: key,\n        value: value\n      };\n      return http.post(url, params);\n    };\n    return function() {\n      return {\n        \"user\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http, paginateResponseService) {\n    var service;\n    service = {};\n    service.getUserByUsername = function(username) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"by_username\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        username: username\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getStats = function(userId) {\n      var httpOptions, url;\n      url = urlsService.resolve(\"user-stats\", userId);\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, {}, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getContacts = function(userId, excludeProjectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"user-contacts\", userId);\n      params = {};\n      if (excludeProjectId != null) {\n        params.exclude_project = excludeProjectId;\n      }\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.getLiked = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-liked\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      params.only_relevant = true;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getVoted = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-voted\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getWatched = function(userId, page, type, q) {\n      var params, url;\n      url = urlsService.resolve(\"user-watched\", userId);\n      params = {};\n      if (page != null) {\n        params.page = page;\n      }\n      if (type != null) {\n        params.type = type;\n      }\n      if (q != null) {\n        params.q = q;\n      }\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getProfileTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page\n      };\n      url = urlsService.resolve(\"timeline-profile\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getUserTimeline = function(userId, page) {\n      var params, url;\n      params = {\n        page: page,\n        only_relevant: true\n      };\n      url = urlsService.resolve(\"timeline-user\");\n      url = url + \"/\" + userId;\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        result = Immutable.fromJS(result);\n        return paginateResponseService(result);\n      });\n    };\n    service.getNotifications = function(userId, page, onlyUnread) {\n      var params, url;\n      params = {\n        page: page\n      };\n      if (onlyUnread) {\n        params['only_unread'] = true;\n      }\n      url = urlsService.resolve(\"notifications\");\n      return http.get(url, params, {\n        headers: {\n          'x-lazy-pagination': true\n        }\n      }).then(function(result) {\n        var paginateResponse;\n        result = Immutable.fromJS(result);\n        paginateResponse = Immutable.Map({\n          \"data\": result.get(\"data\").get(\"objects\"),\n          \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n          \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n          \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n          \"count\": result.get(\"headers\")(\"x-pagination-count\"),\n          \"total\": result.get(\"data\").get(\"total\")\n        });\n        return paginateResponse;\n      });\n    };\n    service.setNotificationAsRead = function(notificationId) {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/\" + notificationId + \"/set-as-read\";\n      return http.patch(url).then(function(result) {\n        return result;\n      });\n    };\n    service.setNotificationsAsRead = function() {\n      var url;\n      url = (urlsService.resolve(\"notifications\")) + \"/set-as-read\";\n      return http.post(url).then(function(result) {\n        return result;\n      });\n    };\n    return function() {\n      return {\n        \"users\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\", \"tgPaginateResponseService\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUsersResources\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var Resource, module;\n\n  Resource = function(urlsService, http) {\n    var service;\n    service = {};\n    service.listInAllProjects = function(params, pagination) {\n      var httpOptions, url;\n      if (pagination == null) {\n        pagination = false;\n      }\n      url = urlsService.resolve(\"userstories\");\n      if (!pagination) {\n        httpOptions = {\n          headers: {\n            \"x-disable-pagination\": \"1\"\n          }\n        };\n      }\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listAllInProject = function(projectId) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        project: projectId\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    service.listInEpic = function(epicIid) {\n      var httpOptions, params, url;\n      url = urlsService.resolve(\"userstories\");\n      httpOptions = {\n        headers: {\n          \"x-disable-pagination\": \"1\"\n        }\n      };\n      params = {\n        epic: epicIid,\n        order_by: 'epic_order',\n        include_tasks: true\n      };\n      return http.get(url, params, httpOptions).then(function(result) {\n        return Immutable.fromJS(result.data);\n      });\n    };\n    return function() {\n      return {\n        \"userstories\": service\n      };\n    };\n  };\n\n  Resource.$inject = [\"$tgUrls\", \"$tgHttp\"];\n\n  module = angular.module(\"taigaResources2\");\n\n  module.factory(\"tgUserstoriesResource\", Resource);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AppMetaService, taiga, truncate;\n\n  taiga = this.taiga;\n\n  truncate = taiga.truncate;\n\n  AppMetaService = (function() {\n    AppMetaService.$inject = [\"$rootScope\"];\n\n    function AppMetaService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    AppMetaService.prototype._set = function(key, value) {\n      var meta;\n      if (!key) {\n        return;\n      }\n      if (key === \"title\") {\n        meta = $(\"head title\");\n        if (meta.length === 0) {\n          meta = $(\"<title></title>\");\n          $(\"head\").append(meta);\n        }\n        return meta.html(value || \"\");\n      } else if (key.indexOf(\"og:\") === 0) {\n        meta = $(\"head meta[property='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta property='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      } else {\n        meta = $(\"head meta[name='\" + key + \"']\");\n        if (meta.length === 0) {\n          meta = $(\"<meta name='\" + key + \"'/>\");\n          $(\"head\").append(meta);\n        }\n        return meta.attr(\"content\", value || \"\");\n      }\n    };\n\n    AppMetaService.prototype.setTitle = function(title) {\n      return this._set('title', title);\n    };\n\n    AppMetaService.prototype.setDescription = function(description) {\n      return this._set(\"description\", truncate(description, 250));\n    };\n\n    AppMetaService.prototype.setTwitterMetas = function(title, description) {\n      this._set(\"twitter:card\", \"summary\");\n      this._set(\"twitter:site\", \"@taigaio\");\n      this._set(\"twitter:title\", title);\n      this._set(\"twitter:description\", truncate(description, 300));\n      return this._set(\"twitter:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n    };\n\n    AppMetaService.prototype.setOpenGraphMetas = function(title, description) {\n      this._set(\"og:type\", \"object\");\n      this._set(\"og:site_name\", \"Taiga - Love your projects\");\n      this._set(\"og:title\", title);\n      this._set(\"og:description\", truncate(description, 300));\n      this._set(\"og:image\", window.location.origin + \"/\" + window._version + \"/images/logo-color.png\");\n      return this._set(\"og:url\", window.location.href);\n    };\n\n    AppMetaService.prototype.setAll = function(title, description) {\n      this.setTitle(title);\n      this.setDescription(description);\n      this.setTwitterMetas(title, description);\n      return this.setOpenGraphMetas(title, description);\n    };\n\n    AppMetaService.prototype.addMobileViewport = function() {\n      return $(\"head\").append(\"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\\\">\");\n    };\n\n    AppMetaService.prototype.removeMobileViewport = function() {\n      return $(\"head meta[name=\\\"viewport\\\"]\").remove();\n    };\n\n    AppMetaService.prototype.setfn = function(fn) {\n      if (this.listener) {\n        this._listener();\n      }\n      return this._listener = this.rootScope.$watchCollection(fn, (function(_this) {\n        return function(metas) {\n          if (metas) {\n            _this.setAll(metas.title, metas.description);\n            return _this._listener();\n          }\n        };\n      })(this));\n    };\n\n    return AppMetaService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAppMetaService\", AppMetaService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AttachmentsService, sizeFormat;\n\n  sizeFormat = this.taiga.sizeFormat;\n\n  AttachmentsService = (function() {\n    AttachmentsService.$inject = [\"$tgConfirm\", \"$tgConfig\", \"$translate\", \"tgResources\"];\n\n    function AttachmentsService(confirm, config, translate, rs) {\n      this.confirm = confirm;\n      this.config = config;\n      this.translate = translate;\n      this.rs = rs;\n      this.types = {\n        epics: \"epic\",\n        userstories: \"us\",\n        userstory: \"us\",\n        issues: \"issue\",\n        tasks: \"task\",\n        epic: \"epic\",\n        us: \"us\",\n        issue: \"issue\",\n        task: \"task\",\n        wiki: \"wiki\",\n        wikipage: \"wiki\"\n      };\n      this.maxFileSize = this.getMaxFileSize();\n      if (this.maxFileSize) {\n        this.maxFileSizeFormated = sizeFormat(this.maxFileSize);\n      }\n    }\n\n    AttachmentsService.prototype.sizeError = function(file) {\n      var message;\n      message = this.translate.instant(\"ATTACHMENT.ERROR_MAX_SIZE_EXCEEDED\", {\n        fileName: file.name,\n        fileSize: sizeFormat(file.size),\n        maxFileSize: this.maxFileSizeFormated\n      });\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.validate = function(file) {\n      if (this.maxFileSize && file.size > this.maxFileSize) {\n        this.sizeError(file);\n        return false;\n      }\n      return true;\n    };\n\n    AttachmentsService.prototype.getMaxFileSize = function() {\n      return this.config.get(\"maxUploadFileSize\", null);\n    };\n\n    AttachmentsService.prototype.list = function(type, objId, projectId) {\n      return this.rs.attachments.list(type, objId, projectId).then((function(_this) {\n        return function(attachments) {\n          return attachments.sortBy(function(attachment) {\n            return attachment.get('order');\n          });\n        };\n      })(this));\n    };\n\n    AttachmentsService.prototype.get = function(type, id) {\n      return this.rs.attachments.get(this.types[type], id);\n    };\n\n    AttachmentsService.prototype[\"delete\"] = function(type, id) {\n      return this.rs.attachments[\"delete\"](type, id);\n    };\n\n    AttachmentsService.prototype.saveError = function(file, data) {\n      var message;\n      message = \"\";\n      if (file) {\n        message = this.translate.instant(\"ATTACHMENT.ERROR_UPLOAD_ATTACHMENT\", {\n          fileName: file.name,\n          errorMessage: data.data._error_message\n        });\n      }\n      return this.confirm.notify(\"error\", message);\n    };\n\n    AttachmentsService.prototype.upload = function(file, objId, projectId, type, from_comment) {\n      var promise;\n      if (from_comment == null) {\n        from_comment = false;\n      }\n      promise = this.rs.attachments.create(type, projectId, objId, file, from_comment);\n      promise.then(null, this.saveError.bind(this, file));\n      return promise;\n    };\n\n    AttachmentsService.prototype.patch = function(id, type, patch) {\n      var promise;\n      promise = this.rs.attachments.patch(type, id, patch);\n      promise.then(null, this.saveError.bind(this, null));\n      return promise;\n    };\n\n    return AttachmentsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAttachmentsService\", AttachmentsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var AvatarService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  AvatarService = (function() {\n    function AvatarService(config) {\n      var COLORS, IMAGES;\n      this.config = config;\n      IMAGES = [\"/\" + window._version + \"/images/user-avatars/user-avatar-01.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-02.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-03.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-04.png\", \"/\" + window._version + \"/images/user-avatars/user-avatar-05.png\"];\n      COLORS = [\"rgba( 178, 176, 204, 1 )\", \"rgba( 183, 203, 131, 1 )\", \"rgba( 210, 198, 139, 1 )\", \"rgba( 214, 161, 212, 1 )\", \"rgba( 247, 154, 154, 1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    AvatarService.prototype.getDefault = function(key) {\n      var idx, logo;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    AvatarService.prototype.getUnnamed = function() {\n      return {\n        url: \"/\" + window._version + \"/images/unnamed.png\",\n        username: ''\n      };\n    };\n\n    AvatarService.prototype.getAvatar = function(user, type) {\n      var avatarParamName, fullName, gravatar, logo, logoUrl, photo, root, username;\n      if (!user) {\n        return this.getUnnamed();\n      }\n      avatarParamName = 'photo';\n      if (type === 'avatarBig') {\n        avatarParamName = 'big_photo';\n      }\n      photo = null;\n      if (user instanceof Immutable.Map) {\n        gravatar = user.get('gravatar_id');\n        photo = user.get(avatarParamName);\n        username = \"@\" + (user.get('username'));\n        fullName = user.get('full_name_display');\n      } else {\n        gravatar = user.gravatar_id;\n        photo = user[avatarParamName];\n        username = \"@\" + user.username;\n        fullName = user.full_name_display;\n      }\n      if (!gravatar) {\n        return this.getUnnamed();\n      }\n      if (photo) {\n        return {\n          url: photo,\n          username: username,\n          fullName: fullName\n        };\n      } else if (location.host.indexOf('localhost') !== -1 || !this.config.get(\"gravatar\", true)) {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        return {\n          url: root + logo.src,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      } else {\n        root = location.protocol + '//' + location.host;\n        logo = this.getDefault(gravatar);\n        logoUrl = encodeURIComponent(root + logo.src);\n        return {\n          url: 'https://www.gravatar.com/avatar/' + gravatar + \"?s=200&d=\" + logoUrl,\n          bg: logo.color,\n          username: username,\n          fullName: fullName\n        };\n      }\n    };\n\n    return AvatarService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgAvatarService\", [\"$tgConfig\", AvatarService]);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CheckPermissionsService, taiga;\n\n  taiga = this.taiga;\n\n  CheckPermissionsService = (function() {\n    CheckPermissionsService.$inject = [\"tgProjectService\"];\n\n    function CheckPermissionsService(projectService) {\n      this.projectService = projectService;\n    }\n\n    CheckPermissionsService.prototype.check = function(permission) {\n      if (!this.projectService.project) {\n        return false;\n      }\n      return this.projectService.project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    return CheckPermissionsService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCheckPermissionsService\", CheckPermissionsService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var CurrentUserService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  CurrentUserService = (function() {\n    CurrentUserService.$inject = [\"tgProjectsService\", \"$tgStorage\", \"tgResources\", \"$q\"];\n\n    function CurrentUserService(projectsService, storageService, rs, q) {\n      this.projectsService = projectsService;\n      this.storageService = storageService;\n      this.rs = rs;\n      this.q = q;\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      this._joyride = null;\n      taiga.defineImmutableProperty(this, \"projects\", (function(_this) {\n        return function() {\n          return _this._projects;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"projectsById\", (function(_this) {\n        return function() {\n          return _this._projectsById;\n        };\n      })(this));\n    }\n\n    CurrentUserService.prototype.isAuthenticated = function() {\n      if (this.getUser() !== null) {\n        return true;\n      }\n      return false;\n    };\n\n    CurrentUserService.prototype.getUser = function() {\n      var userData;\n      if (!this._user) {\n        userData = this.storageService.get(\"userInfo\");\n        if (userData) {\n          userData = Immutable.fromJS(userData);\n          this.setUser(userData);\n        }\n      }\n      return this._user;\n    };\n\n    CurrentUserService.prototype.removeUser = function() {\n      this._user = null;\n      this._projects = Immutable.Map();\n      this._projectsById = Immutable.Map();\n      return this._joyride = null;\n    };\n\n    CurrentUserService.prototype.setUser = function(user) {\n      this._user = user;\n      return this._loadUserInfo();\n    };\n\n    CurrentUserService.prototype.bulkUpdateProjectsOrder = function(sortData) {\n      return this.projectsService.bulkUpdateProjectsOrder(sortData).then((function(_this) {\n        return function() {\n          return _this.loadProjects();\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjects = function() {\n      return this.projectsService.getProjectsByUserId(this._user.get(\"id\")).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.loadProjectsList = function() {\n      return this.projectsService.getListProjectsByUserId(this._user.get(\"id\"), null).then((function(_this) {\n        return function(projects) {\n          return _this.setProjects(projects);\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype.disableJoyRide = function(section) {\n      if (!this.isAuthenticated()) {\n        return;\n      }\n      if (section) {\n        this._joyride[section] = false;\n      } else {\n        this._joyride = {\n          backlog: false,\n          kanban: false,\n          dashboard: false\n        };\n      }\n      return this.rs.user.setUserStorage('joyride', this._joyride);\n    };\n\n    CurrentUserService.prototype.loadJoyRideConfig = function() {\n      return this.q((function(_this) {\n        return function(resolve) {\n          if (_this._joyride !== null) {\n            resolve(_this._joyride);\n            return;\n          }\n          return _this.rs.user.getUserStorage('joyride').then(function(config) {\n            _this._joyride = config;\n            return resolve(_this._joyride);\n          })[\"catch\"](function() {\n            _this._joyride = {\n              backlog: true,\n              kanban: true,\n              dashboard: true\n            };\n            _this.rs.user.createUserStorage('joyride', _this._joyride);\n            return resolve(_this._joyride);\n          });\n        };\n      })(this));\n    };\n\n    CurrentUserService.prototype._loadUserInfo = function() {\n      return this.q.all([this.loadProjectsList()]);\n    };\n\n    CurrentUserService.prototype.setProjects = function(projects) {\n      this._projects = this._projects.set(\"all\", projects);\n      this._projects = this._projects.set(\"recents\", projects.slice(0, 4));\n      this._projects = this._projects.set(\"unblocked\", projects.filter(function(project) {\n        return project.toJS().blocked_code === null;\n      }));\n      this._projectsById = Immutable.fromJS(groupBy(projects.toJS(), function(p) {\n        return p.id;\n      }));\n      return this.projects;\n    };\n\n    CurrentUserService.prototype.canCreatePrivateProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user.get('max_private_projects') !== null && user.get('total_private_projects') >= user.get('max_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_private_projects',\n          type: 'private_project',\n          current: user.get('total_private_projects'),\n          max: user.get('max_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canCreatePublicProjects = function() {\n      var user;\n      user = this.getUser();\n      if (user && user.get('max_public_projects') !== null && user.get('total_public_projects') >= user.get('max_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_public_projects',\n          type: 'public_project',\n          current: user.get('total_public_projects'),\n          max: user.get('max_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPublicProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_public_projects') !== null && totalMembers > user.get('max_memberships_public_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_public_projects',\n          type: 'public_project',\n          current: totalMembers,\n          max: user.get('max_memberships_public_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canAddMembersPrivateProject = function(totalMembers) {\n      var user;\n      user = this.getUser();\n      if (user.get('max_memberships_private_projects') !== null && totalMembers > user.get('max_memberships_private_projects')) {\n        return {\n          valid: false,\n          reason: 'max_members_private_projects',\n          type: 'private_project',\n          current: totalMembers,\n          max: user.get('max_memberships_private_projects')\n        };\n      }\n      return {\n        valid: true\n      };\n    };\n\n    CurrentUserService.prototype.canOwnProject = function(project) {\n      var membersResult, result, user;\n      user = this.getUser();\n      if (project.get('is_private')) {\n        result = this.canCreatePrivateProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPrivateProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      } else {\n        result = this.canCreatePublicProjects();\n        if (!result.valid) {\n          return result;\n        }\n        membersResult = this.canAddMembersPublicProject(project.get('total_memberships'));\n        if (!membersResult.valid) {\n          return membersResult;\n        }\n      }\n      return {\n        valid: true\n      };\n    };\n\n    return CurrentUserService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgCurrentUserService\", CurrentUserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ErrorHandlingService, taiga;\n\n  taiga = this.taiga;\n\n  ErrorHandlingService = (function() {\n    ErrorHandlingService.$inject = [\"$rootScope\"];\n\n    function ErrorHandlingService(rootScope) {\n      this.rootScope = rootScope;\n    }\n\n    ErrorHandlingService.prototype.init = function() {\n      return this.rootScope.errorHandling = {};\n    };\n\n    ErrorHandlingService.prototype.notfound = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.notfound = true;\n    };\n\n    ErrorHandlingService.prototype.error = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.error = true;\n    };\n\n    ErrorHandlingService.prototype.permissionDenied = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.permissionDenied = true;\n    };\n\n    ErrorHandlingService.prototype.block = function() {\n      this.rootScope.errorHandling.showingError = true;\n      return this.rootScope.errorHandling.blocked = true;\n    };\n\n    return ErrorHandlingService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgErrorHandlingService\", ErrorHandlingService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var LightboxFactory;\n\n  LightboxFactory = (function() {\n    LightboxFactory.$inject = [\"$rootScope\", \"$compile\"];\n\n    function LightboxFactory(rootScope, compile) {\n      this.rootScope = rootScope;\n      this.compile = compile;\n    }\n\n    LightboxFactory.prototype.create = function(name, attrs, scopeAttrs) {\n      var elm, html, scope;\n      scope = this.rootScope.$new();\n      scope = _.merge(scope, scopeAttrs);\n      elm = $(\"<div>\").attr(name, true).attr(\"tg-bind-scope\", true);\n      if (attrs) {\n        elm.attr(attrs);\n      }\n      elm.addClass(\"remove-on-close\");\n      html = this.compile(elm)(scope);\n      $(document.body).append(html);\n    };\n\n    return LightboxFactory;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgLightboxFactory\", LightboxFactory);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var PaginateResponse;\n\n  PaginateResponse = function() {\n    return function(result) {\n      var paginateResponse;\n      paginateResponse = Immutable.Map({\n        \"data\": result.get(\"data\"),\n        \"next\": !!result.get(\"headers\")(\"x-pagination-next\"),\n        \"prev\": !!result.get(\"headers\")(\"x-pagination-prev\"),\n        \"current\": result.get(\"headers\")(\"x-pagination-current\"),\n        \"count\": result.get(\"headers\")(\"x-pagination-count\")\n      });\n      return paginateResponse;\n    };\n  };\n\n  angular.module(\"taigaCommon\").factory(\"tgPaginateResponseService\", PaginateResponse);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectLogoService,\n    modulo = function(a, b) { return (+a % (b = +b) + b) % b; };\n\n  ProjectLogoService = (function() {\n    function ProjectLogoService() {\n      var COLORS, IMAGES;\n      IMAGES = [\"/\" + window._version + \"/images/project-logos/project-logo-01.png\", \"/\" + window._version + \"/images/project-logos/project-logo-02.png\", \"/\" + window._version + \"/images/project-logos/project-logo-03.png\", \"/\" + window._version + \"/images/project-logos/project-logo-04.png\", \"/\" + window._version + \"/images/project-logos/project-logo-05.png\"];\n      COLORS = [\"rgba( 153,  214, 220, 1 )\", \"rgba( 213,  156,  156, 1 )\", \"rgba( 214, 161, 212,  1 )\", \"rgba( 164, 162, 219, 1 )\", \"rgba( 152, 224, 168,  1 )\"];\n      this.logos = _.cartesianProduct(IMAGES, COLORS);\n    }\n\n    ProjectLogoService.prototype.getDefaultProjectLogo = function(slug, id) {\n      var idx, key, logo;\n      key = slug + \"-\" + id;\n      idx = modulo(murmurhash3_32_gc(key, 42), this.logos.length);\n      logo = this.logos[idx];\n      return {\n        src: logo[0],\n        color: logo[1]\n      };\n    };\n\n    return ProjectLogoService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectLogoService\", ProjectLogoService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ProjectService, taiga,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  taiga = this.taiga;\n\n  ProjectService = (function() {\n    ProjectService.$inject = [\"$rootScope\", \"tgProjectsService\", \"tgXhrErrorService\", \"tgUserActivityService\", \"$interval\", \"$q\"];\n\n    function ProjectService(rootScope, projectsService, xhrError, userActivityService, interval, q) {\n      this.rootScope = rootScope;\n      this.projectsService = projectsService;\n      this.xhrError = xhrError;\n      this.userActivityService = userActivityService;\n      this.interval = interval;\n      this.q = q;\n      this.manageProjectSignal = bind(this.manageProjectSignal, this);\n      this._project = null;\n      this._section = null;\n      this._sectionsBreadcrumb = Immutable.List();\n      this._activeMembers = Immutable.List();\n      taiga.defineImmutableProperty(this, \"project\", (function(_this) {\n        return function() {\n          return _this._project;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"section\", (function(_this) {\n        return function() {\n          return _this._section;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"sectionsBreadcrumb\", (function(_this) {\n        return function() {\n          return _this._sectionsBreadcrumb;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, \"activeMembers\", (function(_this) {\n        return function() {\n          return _this._activeMembers;\n        };\n      })(this));\n      if (!window.localStorage.e2e) {\n        this.autoRefresh();\n      }\n      this.watchSignals();\n    }\n\n    ProjectService.prototype.watchSignals = function() {\n      var fetchRequiredSignals, i, len, results, signal;\n      fetchRequiredSignals = [\"admin:project-modules:updated\", \"admin:project-roles:updated\", \"admin:project-default-values:updated\", \"admin:project-values:updated\", \"admin:project-values:move\", \"admin:project-custom-attributes:updated\", \"sprintform:create:success\", \"sprintform:edit:success\", \"sprintform:remove:success\", \"tags:updated\"];\n      results = [];\n      for (i = 0, len = fetchRequiredSignals.length; i < len; i++) {\n        signal = fetchRequiredSignals[i];\n        results.push(this.rootScope.$on(signal, this.manageProjectSignal));\n      }\n      return results;\n    };\n\n    ProjectService.prototype.manageProjectSignal = function(ctx) {\n      return this.fetchProject();\n    };\n\n    ProjectService.prototype.cleanProject = function() {\n      this._project = null;\n      this._activeMembers = Immutable.List();\n      this._section = null;\n      return this._sectionsBreadcrumb = Immutable.List();\n    };\n\n    ProjectService.prototype.autoRefresh = function() {\n      var intervalId;\n      intervalId = this.interval((function(_this) {\n        return function() {\n          return _this.fetchProject();\n        };\n      })(this), 60 * 10 * 1000);\n      this.userActivityService.onInactive((function(_this) {\n        return function() {\n          return _this.interval.cancel(intervalId);\n        };\n      })(this));\n      return this.userActivityService.onActive((function(_this) {\n        return function() {\n          _this.fetchProject();\n          return _this.autoRefresh();\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.setSection = function(section) {\n      this._section = section;\n      if (section) {\n        return this._sectionsBreadcrumb = this._sectionsBreadcrumb.push(this._section);\n      } else {\n        return this._sectionsBreadcrumb = Immutable.List();\n      }\n    };\n\n    ProjectService.prototype.setProject = function(project) {\n      this._project = project;\n      return this._activeMembers = this._project.get('members').filter(function(member) {\n        return member.get('is_active');\n      });\n    };\n\n    ProjectService.prototype.setProjectBySlug = function(pslug) {\n      return this.q((function(_this) {\n        return function(resolve, reject) {\n          if (!_this.project || _this.project.get('slug') !== pslug) {\n            return _this.projectsService.getProjectBySlug(pslug).then(function(project) {\n              _this.setProject(project);\n              return resolve();\n            })[\"catch\"](function(xhr) {\n              return _this.xhrError.response(xhr);\n            });\n          } else {\n            return resolve();\n          }\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.fetchProject = function() {\n      var pslug;\n      if (!this.project) {\n        return;\n      }\n      pslug = this.project.get('slug');\n      return this.projectsService.getProjectBySlug(pslug).then((function(_this) {\n        return function(project) {\n          return _this.setProject(project);\n        };\n      })(this));\n    };\n\n    ProjectService.prototype.hasPermission = function(permission) {\n      return this._project.get('my_permissions').indexOf(permission) !== -1;\n    };\n\n    ProjectService.prototype.isEpicsDashboardEnabled = function() {\n      return this._project.get(\"is_epics_activated\");\n    };\n\n    return ProjectService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgProjectService\", ProjectService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var ThemeService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  ThemeService = (function(superClass) {\n    extend(ThemeService, superClass);\n\n    function ThemeService() {\n      return ThemeService.__super__.constructor.apply(this, arguments);\n    }\n\n    ThemeService.prototype.use = function(themeName) {\n      var stylesheetEl;\n      stylesheetEl = $(\"link[rel='stylesheet']:first\");\n      if (stylesheetEl.length === 0) {\n        stylesheetEl = $(\"<link rel='stylesheet' href='' type='text/css'>\");\n        $(\"head\").append(stylesheetEl);\n      }\n      return stylesheetEl.attr(\"href\", \"/\" + window._version + \"/styles/theme-\" + themeName + \".css\");\n    };\n\n    return ThemeService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgThemeService\", ThemeService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserActivityService, groupBy, taiga;\n\n  taiga = this.taiga;\n\n  groupBy = this.taiga.groupBy;\n\n  UserActivityService = (function() {\n    UserActivityService.$inject = ['$timeout'];\n\n    UserActivityService.prototype.idleTimeout = 60 * 5 * 1000;\n\n    function UserActivityService(timeout) {\n      this.timeout = timeout;\n      if (window.localStorage.e2e) {\n        return null;\n      }\n      window.addEventListener('mousemove', this.resetTimer.bind(this), false);\n      window.addEventListener('mousedown', this.resetTimer.bind(this), false);\n      window.addEventListener('keypress', this.resetTimer.bind(this), false);\n      window.addEventListener('mousewheel', this.resetTimer.bind(this), false);\n      window.addEventListener('touchmove', this.resetTimer.bind(this), false);\n      this.subscriptionsActive = [];\n      this.subscriptionsInactive = [];\n      this.isActive = true;\n      this.startTimer();\n    }\n\n    UserActivityService.prototype.startTimer = function() {\n      return this.timerId = this.timeout(this._fireInactive.bind(this), this.idleTimeout);\n    };\n\n    UserActivityService.prototype.resetTimer = function() {\n      if (!this.isActive) {\n        this._fireActive();\n      }\n      this.timeout.cancel(this.timerId);\n      this.startTimer();\n      return this.isActive = true;\n    };\n\n    UserActivityService.prototype.onActive = function(cb) {\n      this.subscriptionsActive.push(cb);\n      return this._unSubscriptionsActive.bind(this, cb);\n    };\n\n    UserActivityService.prototype.onInactive = function(cb) {\n      this.subscriptionsInactive.push(cb);\n      return this._unSubscriptionsInactive.bind(this, cb);\n    };\n\n    UserActivityService.prototype._fireActive = function() {\n      return this.subscriptionsActive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._fireInactive = function() {\n      this.isActive = false;\n      return this.subscriptionsInactive.forEach(function(it) {\n        return it();\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsActive = function(cb) {\n      return this.subscriptionsActive = this.subscriptionsActive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    UserActivityService.prototype._unSubscriptionsInactive = function(cb) {\n      return this.subscriptionsInactive = this.subscriptionsInactive.filter(function(fn) {\n        return fn !== cb;\n      });\n    };\n\n    return UserActivityService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserActivityService\", UserActivityService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserListService, normalizeString, taiga;\n\n  taiga = this.taiga;\n\n  normalizeString = this.taiga.normalizeString;\n\n  UserListService = (function() {\n    UserListService.$inject = [\"tgCurrentUserService\", \"tgProjectService\"];\n\n    function UserListService(currentUserService, projectService) {\n      this.currentUserService = currentUserService;\n      this.projectService = projectService;\n    }\n\n    UserListService.prototype.filterUsers = function(text, user) {\n      var username;\n      username = user.full_name_display.toUpperCase();\n      username = normalizeString(username);\n      text = text.toUpperCase();\n      text = normalizeString(text);\n      return _.includes(username, text);\n    };\n\n    UserListService.prototype.searchUsers = function(text, excludedUser) {\n      var users;\n      this.currentUser = this.currentUserService.getUser();\n      users = _.clone(this.projectService.activeMembers.toJS(), true);\n      if (excludedUser) {\n        users = _.reject(users, {\n          \"id\": excludedUser.id\n        });\n      }\n      users = _.sortBy(users, (function(_this) {\n        return function(o) {\n          var ref;\n          if (o.id === ((ref = _this.currentUser) != null ? ref.get('id') : void 0)) {\n            return 0;\n          } else {\n            return o.id;\n          }\n        };\n      })(this));\n      if (text != null) {\n        users = _.filter(users, _.partial(this.filterUsers, text));\n      }\n      return users;\n    };\n\n    return UserListService;\n\n  })();\n\n  angular.module(\"taigaCommon\").service(\"tgUserListService\", UserListService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserService, bindMethods, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  bindMethods = taiga.bindMethods;\n\n  UserService = (function(superClass) {\n    extend(UserService, superClass);\n\n    UserService.$inject = [\"tgResources\"];\n\n    function UserService(rs) {\n      this.rs = rs;\n      bindMethods(this);\n    }\n\n    UserService.prototype.getUserByUserName = function(username) {\n      return this.rs.users.getUserByUsername(username);\n    };\n\n    UserService.prototype.getContacts = function(userId, excludeProjectId) {\n      return this.rs.users.getContacts(userId, excludeProjectId);\n    };\n\n    UserService.prototype.getLiked = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getLiked(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getVoted = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getVoted(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getWatched = function(userId, pageNumber, objectType, textQuery) {\n      return this.rs.users.getWatched(userId, pageNumber, objectType, textQuery);\n    };\n\n    UserService.prototype.getStats = function(userId) {\n      return this.rs.users.getStats(userId);\n    };\n\n    UserService.prototype.attachUserContactsToProjects = function(userId, projects) {\n      return this.getContacts(userId).then(function(contacts) {\n        projects = projects.map(function(project) {\n          var contactsFiltered;\n          contactsFiltered = contacts.filter(function(contact) {\n            var contactId;\n            contactId = contact.get(\"id\");\n            return project.get('members').indexOf(contactId) !== -1;\n          });\n          project = project.set(\"contacts\", contactsFiltered);\n          return project;\n        });\n        return projects;\n      });\n    };\n\n    return UserService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgUserService\", UserService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var xhrError,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  xhrError = (function(superClass) {\n    extend(xhrError, superClass);\n\n    xhrError.$inject = [\"$q\", \"tgErrorHandlingService\"];\n\n    function xhrError(q, errorHandlingService) {\n      this.q = q;\n      this.errorHandlingService = errorHandlingService;\n    }\n\n    xhrError.prototype.notFound = function() {\n      return this.errorHandlingService.notfound();\n    };\n\n    xhrError.prototype.permissionDenied = function() {\n      return this.errorHandlingService.permissionDenied();\n    };\n\n    xhrError.prototype.response = function(xhr) {\n      if (xhr) {\n        if (xhr.status === 404) {\n          this.notFound();\n        } else if (xhr.status === 403) {\n          this.permissionDenied();\n        }\n      }\n      return this.q.reject(xhr);\n    };\n\n    return xhrError;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaCommon\").service(\"tgXhrErrorService\", xhrError);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineAttachmentDirective;\n\n  UserTimelineAttachmentDirective = function(template, $compile) {\n    var isImage, link, validFileExtensions;\n    validFileExtensions = [\".jpg\", \".jpeg\", \".bmp\", \".gif\", \".png\"];\n    isImage = function(url) {\n      url = url.toLowerCase();\n      return _.some(validFileExtensions, function(extension) {\n        return url.indexOf(extension, url - extension.length) !== -1;\n      });\n    };\n    link = function(scope, el) {\n      var is_image, templateHtml;\n      is_image = isImage(scope.attachment.get('url'));\n      if (is_image) {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment-image.html\");\n      } else {\n        templateHtml = template.get(\"user-timeline/user-timeline-attachment/user-timeline-attachment.html\");\n      }\n      el.html(templateHtml);\n      $compile(el.contents())(scope);\n      return el.find(\"img\").error(function() {\n        return this.remove();\n      });\n    };\n    return {\n      link: link,\n      scope: {\n        attachment: \"=tgUserTimelineAttachment\"\n      }\n    };\n  };\n\n  UserTimelineAttachmentDirective.$inject = [\"$tgTemplate\", \"$compile\"];\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineAttachment\", UserTimelineAttachmentDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemTitle, unslugify;\n\n  unslugify = this.taiga.unslugify;\n\n  UserTimelineItemTitle = (function() {\n    UserTimelineItemTitle.$inject = [\"$translate\", \"$sce\"];\n\n    UserTimelineItemTitle.prototype._fieldTranslationKey = {\n      'status': 'COMMON.FIELDS.STATUS',\n      'subject': 'COMMON.FIELDS.SUBJECT',\n      'description_diff': 'COMMON.FIELDS.DESCRIPTION',\n      'points': 'COMMON.FIELDS.POINTS',\n      'assigned_to': 'COMMON.FIELDS.ASSIGNED_TO',\n      'assigned_users': 'COMMON.FIELDS.ASSIGNED_USERS',\n      'severity': 'ISSUES.FIELDS.SEVERITY',\n      'priority': 'ISSUES.FIELDS.PRIORITY',\n      'type': 'ISSUES.FIELDS.TYPE',\n      'is_iocaine': 'TASK.FIELDS.IS_IOCAINE',\n      'is_blocked': 'COMMON.FIELDS.IS_BLOCKED',\n      'color': 'COMMON.FIELDS.COLOR',\n      'due_date': 'COMMON.FIELDS.DUE_DATE',\n      'due_date_reason': 'COMMON.FIELDS.DUE_DATE_REASON',\n      'milestone': 'COMMON.FIELDS.SPRINT'\n    };\n\n    UserTimelineItemTitle.prototype._params = {\n      username: function(timeline, event) {\n        var title_attr, url, user;\n        user = timeline.getIn(['data', 'user']);\n        if (user.get('is_profile_visible')) {\n          title_attr = this.translate.instant('COMMON.SEE_USER_PROFILE', {\n            username: user.get('username')\n          });\n          url = \"user-profile:username=timeline.getIn(['data', 'user', 'username'])\";\n          return this._getLink(url, user.get('name'), title_attr);\n        } else {\n          return this._getUsernameSpan(user.get('name'));\n        }\n      },\n      field_name: function(timeline, event) {\n        var field_name;\n        field_name = timeline.getIn(['data', 'value_diff', 'key']);\n        return this.translate.instant(this._fieldTranslationKey[field_name]);\n      },\n      project_name: function(timeline, event) {\n        var url;\n        url = \"project:project=timeline.getIn(['data', 'project', 'slug'])\";\n        return this._getLink(url, timeline.getIn([\"data\", \"project\", \"name\"]));\n      },\n      new_value: function(timeline, event) {\n        var new_value, prettyDate, value;\n        if (_.isArray(timeline.getIn([\"data\", \"value_diff\", \"value\"]).toJS())) {\n          value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).get(1);\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_to') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          }\n          if (value === null && timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'assigned_users') {\n            value = this.translate.instant('ACTIVITY.VALUES.UNASSIGNED');\n          } else if (timeline.getIn([\"data\", \"value_diff\", \"key\"]) === 'due_date') {\n            if (value) {\n              prettyDate = this.translate.instant(\"COMMON.PICKERDATE.FORMAT\");\n              value = moment(value, \"YYYY-MM-DD\").format(prettyDate);\n            } else {\n              value = this.translate.instant('ACTIVITY.VALUES.NOT_SET');\n            }\n          }\n          new_value = value;\n        } else {\n          new_value = timeline.getIn([\"data\", \"value_diff\", \"value\"]).first().get(1);\n        }\n        return $('<span>').attr('ng-non-bindable', true).text(new_value).prop('outerHTML');\n      },\n      sprint_name: function(timeline, event) {\n        var url;\n        url = \"project-taskboard:project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['data', 'milestone', 'slug'])\";\n        return this._getLink(url, timeline.getIn(['data', 'milestone', 'name']));\n      },\n      us_name: function(timeline, event) {\n        var event_us, obj, text, url;\n        obj = this._getTimelineObj(timeline, event).get('userstory');\n        event_us = {\n          obj: 'parent_userstory'\n        };\n        url = this._getDetailObjUrl(event_us);\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      related_us_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"userstory\"]);\n        url = \"project-userstories-detail:project=timeline.getIn(['data', 'userstory', 'project', 'slug']),ref=timeline.getIn(['data', 'userstory', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      epic_name: function(timeline, event) {\n        var obj, text, url;\n        obj = timeline.getIn([\"data\", \"epic\"]);\n        url = \"project-epics-detail:project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['data', 'epic', 'ref'])\";\n        text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        return this._getLink(url, text);\n      },\n      obj_name: function(timeline, event) {\n        var obj, text, url;\n        obj = this._getTimelineObj(timeline, event);\n        url = this._getDetailObjUrl(event);\n        if (event.obj === 'wikipage') {\n          text = unslugify(obj.get('slug'));\n        } else if (event.obj === 'milestone') {\n          text = obj.get('name');\n        } else {\n          text = '#' + obj.get('ref') + ' ' + obj.get('subject');\n        }\n        return this._getLink(url, text);\n      },\n      role_name: function(timeline, event) {\n        return _.escape(timeline.getIn(['data', 'value_diff', 'value']).keySeq().first());\n      }\n    };\n\n    function UserTimelineItemTitle(translate, sce) {\n      this.translate = translate;\n      this.sce = sce;\n    }\n\n    UserTimelineItemTitle.prototype._translateTitleParams = function(param, timeline, event) {\n      return this._params[param].call(this, timeline, event);\n    };\n\n    UserTimelineItemTitle.prototype._getTimelineObj = function(timeline, event) {\n      return timeline.getIn(['data', event.obj]);\n    };\n\n    UserTimelineItemTitle.prototype._getDetailObjUrl = function(event) {\n      var url;\n      url = {\n        \"issue\": [\"project-issues-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"wikipage\": [\"project-wiki-page\", \":project=timeline.getIn(['data', 'project', 'slug']),slug=timeline.getIn(['obj', 'slug'])\"],\n        \"task\": [\"project-tasks-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"],\n        \"parent_userstory\": [\"project-userstories-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'userstory', 'ref'])\"],\n        \"milestone\": [\"project-taskboard\", \":project=timeline.getIn(['data', 'project', 'slug']),sprint=timeline.getIn(['obj', 'slug'])\"],\n        \"epic\": [\"project-epics-detail\", \":project=timeline.getIn(['data', 'project', 'slug']),ref=timeline.getIn(['obj', 'ref'])\"]\n      };\n      return url[event.obj][0] + url[event.obj][1];\n    };\n\n    UserTimelineItemTitle.prototype._getLink = function(url, text, title) {\n      var span;\n      title = title || text;\n      span = $('<span>').attr('ng-non-bindable', true).text(text);\n      return $('<a>').attr('tg-nav', url).append(span).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getUsernameSpan = function(text) {\n      var title;\n      title = title || text;\n      return $('<span>').addClass('username').text(text).prop('outerHTML');\n    };\n\n    UserTimelineItemTitle.prototype._getParams = function(timeline, event, timeline_type) {\n      var params;\n      params = {};\n      timeline_type.translate_params.forEach((function(_this) {\n        return function(param) {\n          return params[param] = _this._translateTitleParams(param, timeline, event);\n        };\n      })(this));\n      return params;\n    };\n\n    UserTimelineItemTitle.prototype.getTitle = function(timeline, event, type) {\n      var params, paramsKeys, translation;\n      params = this._getParams(timeline, event, type);\n      paramsKeys = {};\n      Object.keys(params).forEach(function(key) {\n        return paramsKeys[key] = '{{' + key + '}}';\n      });\n      translation = this.translate.instant(type.key, paramsKeys);\n      Object.keys(params).forEach(function(key) {\n        var find;\n        find = '{{' + key + '}}';\n        return translation = translation.replace(new RegExp(find, 'g'), params[key]);\n      });\n      return translation;\n    };\n\n    return UserTimelineItemTitle;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemTitle\", UserTimelineItemTitle);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineType, timelineType;\n\n  timelineType = function(timeline, event) {\n    var types;\n    types = [\n      {\n        check: function(timeline, event) {\n          return event.obj === 'membership';\n        },\n        key: 'TIMELINE.NEW_MEMBER',\n        translate_params: ['project_name'],\n        member: function(timeline) {\n          return Immutable.Map({\n            user: timeline.getIn(['data', 'user']),\n            role: timeline.getIn(['data', 'role'])\n          });\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'project' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_PROJECT',\n        translate_params: ['username', 'project_name'],\n        description: function(timeline) {\n          return timeline.getIn(['data', 'project', 'description']);\n        }\n      }, {\n        check: function(timeline, event) {\n          return event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'attachments';\n        },\n        key: 'TIMELINE.UPLOAD_ATTACHMENT',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.US_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'create';\n        },\n        key: 'TIMELINE.ISSUE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'create';\n        },\n        key: 'TIMELINE.WIKI_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'create' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_CREATED_WITH_US',\n        translate_params: ['username', 'project_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'create';\n        },\n        key: 'TIMELINE.MILESTONE_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_CREATED',\n        translate_params: ['username', 'project_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'relateduserstory' && event.type === 'create';\n        },\n        key: 'TIMELINE.EPIC_RELATED_USERSTORY_CREATED',\n        translate_params: ['username', 'project_name', 'related_us_name', 'epic_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.NEW_COMMENT_US',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'issue';\n        },\n        key: 'TIMELINE.NEW_COMMENT_ISSUE',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'task';\n        },\n        key: 'TIMELINE.NEW_COMMENT_TASK',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.getIn(['data', 'comment']) && event.obj === 'epic';\n        },\n        key: 'TIMELINE.NEW_COMMENT_EPIC',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          text = timeline.getIn(['data', 'comment_html']);\n          return $($.parseHTML(text)).text();\n        }\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && timeline.hasIn(['data', 'value_diff', 'value', 'backlog_order']) && event.type === 'change';\n        },\n        key: 'TIMELINE.US_MOVED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'milestone']).get(1) === null;\n          }\n          return false;\n        },\n        key: 'TIMELINE.US_REMOVED_FROM_MILESTONE',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'moveInBacklog' && event.type === 'change' && event.obj === 'userstory';\n        },\n        key: 'TIMELINE.US_ADDED_MILESTONE',\n        translate_params: ['username', 'obj_name', 'sprint_name']\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === true;\n          }\n          return false;\n        },\n        key: 'TIMELINE.BLOCKED',\n        translate_params: ['username', 'obj_name'],\n        description: function(timeline) {\n          var text;\n          if (timeline.hasIn(['data', 'value_diff', 'value', 'blocked_note_html'])) {\n            text = timeline.getIn(['data', 'value_diff', 'value', 'blocked_note_html']).get(1);\n            return $($.parseHTML(text)).text();\n          } else {\n            return false;\n          }\n        }\n      }, {\n        check: function(timeline, event) {\n          if (timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'blocked' && event.type === 'change') {\n            return timeline.getIn(['data', 'value_diff', 'value', 'is_blocked']).get(1) === false;\n          }\n          return false;\n        },\n        key: 'TIMELINE.UNBLOCKED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'milestone' && event.type === 'change';\n        },\n        key: 'TIMELINE.MILESTONE_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'wikipage' && event.type === 'change';\n        },\n        key: 'TIMELINE.WIKI_UPDATED',\n        translate_params: ['username', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'points';\n        },\n        key: 'TIMELINE.US_UPDATED_POINTS',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value', 'role_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.US_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'userstory' && event.type === 'change';\n        },\n        key: 'TIMELINE.US_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'issue' && event.type === 'change';\n        },\n        key: 'TIMELINE.ISSUE_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']) && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && !timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'task' && event.type === 'change' && timeline.getIn(['data', 'task', 'userstory']);\n        },\n        key: 'TIMELINE.TASK_UPDATED_WITH_US_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'us_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'description_diff';\n        },\n        key: 'TIMELINE.EPIC_UPDATED',\n        translate_params: ['username', 'field_name', 'obj_name']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change' && timeline.hasIn(['data', 'value_diff']) && timeline.getIn(['data', 'value_diff', 'key']) === 'color';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_COLOR',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'epic' && event.type === 'change';\n        },\n        key: 'TIMELINE.EPIC_UPDATED_WITH_NEW_VALUE',\n        translate_params: ['username', 'field_name', 'obj_name', 'new_value']\n      }, {\n        check: function(timeline, event) {\n          return event.obj === 'user' && event.type === 'create';\n        },\n        key: 'TIMELINE.NEW_USER',\n        translate_params: ['username']\n      }\n    ];\n    return _.find(types, function(obj) {\n      return obj.check(timeline, event);\n    });\n  };\n\n  UserTimelineType = (function() {\n    function UserTimelineType() {}\n\n    UserTimelineType.prototype.getType = function(timeline, event) {\n      return timelineType(timeline, event);\n    };\n\n    return UserTimelineType;\n\n  })();\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineItemType\", UserTimelineType);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineItemDirective;\n\n  UserTimelineItemDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline-item/user-timeline-item.html\",\n      scope: {\n        timeline: \"=tgUserTimelineItem\"\n      }\n    };\n  };\n\n  angular.module(\"taigaUserTimeline\").directive(\"tgUserTimelineItem\", UserTimelineItemDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelinePaginationSequence;\n\n  UserTimelinePaginationSequence = function() {\n    var obj;\n    obj = {};\n    obj.generate = function(config) {\n      var getContent, items, next, page;\n      page = 1;\n      items = Immutable.List();\n      config.minItems = config.minItems || 20;\n      next = function() {\n        items = Immutable.List();\n        return getContent();\n      };\n      getContent = function() {\n        return config.fetch(page).then(function(response) {\n          var data, pagination;\n          page++;\n          data = response.get(\"data\");\n          if (config.filter) {\n            data = config.filter(data);\n          }\n          if (config.map && data) {\n            data = data.map(config.map);\n          }\n          items = items.concat(data);\n          if (items.size < config.minItems && response.get(\"next\")) {\n            return getContent();\n          }\n          pagination = Immutable.Map({\n            items: items,\n            total: response.get(\"total\"),\n            next: response.get(\"next\")\n          });\n          return pagination;\n        });\n      };\n      return {\n        next: function() {\n          return next();\n        }\n      };\n    };\n    return obj;\n  };\n\n  angular.module(\"taigaUserTimeline\").factory(\"tgUserTimelinePaginationSequenceService\", UserTimelinePaginationSequence);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineController, mixOf, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  mixOf = this.taiga.mixOf;\n\n  UserTimelineController = (function(superClass) {\n    extend(UserTimelineController, superClass);\n\n    UserTimelineController.$inject = [\"tgUserTimelineService\"];\n\n    function UserTimelineController(userTimelineService) {\n      this.userTimelineService = userTimelineService;\n      this.timelineList = Immutable.List();\n      this.scrollDisabled = false;\n      this.timeline = null;\n      if (this.projectId) {\n        this.timeline = this.userTimelineService.getProjectTimeline(this.projectId);\n      } else if (this.currentUser) {\n        this.timeline = this.userTimelineService.getProfileTimeline(this.user.get(\"id\"));\n      } else {\n        this.timeline = this.userTimelineService.getUserTimeline(this.user.get(\"id\"));\n      }\n      this.loadTimeline();\n    }\n\n    UserTimelineController.prototype.loadTimeline = function() {\n      this.scrollDisabled = true;\n      return this.timeline.next().then((function(_this) {\n        return function(response) {\n          _this.timelineList = _this.timelineList.concat(response.get(\"items\"));\n          if (response.get(\"next\")) {\n            _this.scrollDisabled = false;\n          }\n          return _this.timelineList;\n        };\n      })(this));\n    };\n\n    return UserTimelineController;\n\n  })(mixOf(taiga.Controller, taiga.PageMixin, taiga.FiltersMixin));\n\n  angular.module(\"taigaUserTimeline\").controller(\"UserTimeline\", UserTimelineController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineDirective;\n\n  UserTimelineDirective = function() {\n    return {\n      templateUrl: \"user-timeline/user-timeline/user-timeline.html\",\n      controller: \"UserTimeline\",\n      controllerAs: \"vm\",\n      scope: {\n        projectId: \"=projectid\",\n        user: \"=\",\n        currentUser: \"=\"\n      },\n      bindToController: true\n    };\n  };\n\n  angular.module(\"taigaProfile\").directive(\"tgUserTimeline\", UserTimelineDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var UserTimelineService, taiga,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  taiga = this.taiga;\n\n  UserTimelineService = (function(superClass) {\n    extend(UserTimelineService, superClass);\n\n    UserTimelineService.$inject = [\"tgResources\", \"tgUserTimelinePaginationSequenceService\", \"tgUserTimelineItemType\", \"tgUserTimelineItemTitle\"];\n\n    function UserTimelineService(rs, userTimelinePaginationSequenceService, userTimelineItemType, userTimelineItemTitle) {\n      this.rs = rs;\n      this.userTimelinePaginationSequenceService = userTimelinePaginationSequenceService;\n      this.userTimelineItemType = userTimelineItemType;\n      this.userTimelineItemTitle = userTimelineItemTitle;\n    }\n\n    UserTimelineService.prototype._valid_fields = ['status', 'subject', 'description_diff', 'assigned_users', 'assigned_to', 'points', 'severity', 'priority', 'type', 'attachments', 'is_iocaine', 'content_diff', 'name', 'estimated_finish', 'estimated_start', 'blocked', 'moveInBacklog', 'milestone', 'color', 'due_date', 'due_date_reason'];\n\n    UserTimelineService.prototype._invalid = [\n      {\n        check: function(timeline) {\n          var fieldKey, value_diff;\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff) {\n            fieldKey = value_diff.get('key');\n            if (this._valid_fields.indexOf(fieldKey) === -1) {\n              return true;\n            } else if (fieldKey === 'attachments' && value_diff.get('value').get('new').size === 0) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          return event[2] === 'change' && value_diff === void 0;\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[2] === 'delete';\n        }\n      }, {\n        check: function(timeline) {\n          var event;\n          event = timeline.get('event_type').split(\".\");\n          return event[1] === 'project' && event[2] === 'change';\n        }\n      }, {\n        check: function(timeline) {\n          return !!timeline.get(\"data\").get(\"comment_deleted\");\n        }\n      }, {\n        check: function(timeline) {\n          var event, value_diff;\n          event = timeline.get('event_type').split(\".\");\n          value_diff = timeline.get(\"data\").get(\"value_diff\");\n          if (value_diff && event[1] === \"task\" && event[2] === \"change\" && value_diff.get(\"key\") === \"milestone\") {\n            return timeline.get(\"data\").get(\"value_diff\").get(\"value\");\n          }\n          return false;\n        }\n      }\n    ];\n\n    UserTimelineService.prototype._isInValidTimeline = function(timeline) {\n      return _.some(this._invalid, (function(_this) {\n        return function(invalid) {\n          return invalid.check.call(_this, timeline);\n        };\n      })(this));\n    };\n\n    UserTimelineService.prototype._parseEventType = function(event_type) {\n      event_type = event_type.split(\".\");\n      return {\n        section: event_type[0],\n        obj: event_type[1],\n        type: event_type[2]\n      };\n    };\n\n    UserTimelineService.prototype._getTimelineObject = function(timeline, event) {\n      if (timeline.get('data').get(event.obj)) {\n        return timeline.get('data').get(event.obj);\n      }\n    };\n\n    UserTimelineService.prototype._attachExtraInfoToTimelineEntry = function(timeline, event, type) {\n      var title;\n      title = this.userTimelineItemTitle.getTitle(timeline, event, type);\n      timeline = timeline.set('title_html', title);\n      timeline = timeline.set('obj', this._getTimelineObject(timeline, event));\n      if (type.description) {\n        timeline = timeline.set('description', type.description(timeline));\n      }\n      if (type.member) {\n        timeline = timeline.set('member', type.member(timeline));\n      }\n      if (timeline.getIn(['data', 'value_diff', 'key']) === 'attachments' && timeline.hasIn(['data', 'value_diff', 'value', 'new'])) {\n        timeline = timeline.set('attachments', timeline.getIn(['data', 'value_diff', 'value', 'new']));\n      }\n      return timeline;\n    };\n\n    UserTimelineService.prototype._parseTimeline = function(response) {\n      var newdata;\n      newdata = Immutable.List();\n      response.get('data').forEach((function(_this) {\n        return function(item) {\n          var data, event, newItem, values_diff;\n          event = _this._parseEventType(item.get('event_type'));\n          data = item.get('data');\n          values_diff = data.get('values_diff');\n          if (values_diff && values_diff.count()) {\n            if (values_diff.has('is_blocked')) {\n              values_diff = Immutable.Map({\n                'blocked': values_diff\n              });\n            }\n            if (values_diff.has('milestone')) {\n              if (event.obj === 'userstory') {\n                values_diff = Immutable.Map({\n                  'moveInBacklog': values_diff\n                });\n              } else {\n                values_diff = values_diff.deleteIn(['values_diff', 'milestone']);\n              }\n            } else if (event.obj === 'milestone') {\n              values_diff = Immutable.Map({\n                'milestone': values_diff\n              });\n            }\n            return values_diff.forEach(function(value, key) {\n              var newItem, obj;\n              obj = Immutable.Map({\n                key: key,\n                value: value\n              });\n              newItem = item.setIn(['data', 'value_diff'], obj);\n              newItem = newItem.deleteIn(['data', 'values_diff']);\n              return newdata = newdata.push(newItem);\n            });\n          } else {\n            newItem = item.deleteIn(['data', 'values_diff']);\n            return newdata = newdata.push(newItem);\n          }\n        };\n      })(this));\n      return response.set('data', newdata);\n    };\n\n    UserTimelineService.prototype._addEntyAttributes = function(item) {\n      var event, type;\n      event = this._parseEventType(item.get('event_type'));\n      type = this.userTimelineItemType.getType(item, event);\n      return this._attachExtraInfoToTimelineEntry(item, event, type);\n    };\n\n    UserTimelineService.prototype.getProfileTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getProfileTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getUserTimeline = function(userId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.users.getUserTimeline(userId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    UserTimelineService.prototype.getProjectTimeline = function(projectId) {\n      var config;\n      config = {};\n      config.fetch = (function(_this) {\n        return function(page) {\n          return _this.rs.projects.getTimeline(projectId, page).then(function(response) {\n            return _this._parseTimeline(response);\n          });\n        };\n      })(this);\n      config.map = (function(_this) {\n        return function(obj) {\n          return _this._addEntyAttributes(obj);\n        };\n      })(this);\n      config.filter = (function(_this) {\n        return function(items) {\n          return items.filterNot(function(item) {\n            return _this._isInValidTimeline(item);\n          });\n        };\n      })(this);\n      return this.userTimelinePaginationSequenceService.generate(config);\n    };\n\n    return UserTimelineService;\n\n  })(taiga.Service);\n\n  angular.module(\"taigaUserTimeline\").service(\"tgUserTimelineService\", UserTimelineService);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var IsolateClickDirective;\n\n  IsolateClickDirective = function() {\n    var link;\n    link = function(scope, el, attrs) {\n      return el.on('click', (function(_this) {\n        return function(e) {\n          return e.stopPropagation();\n        };\n      })(this));\n    };\n    return {\n      link: link\n    };\n  };\n\n  angular.module(\"taigaUtils\").directive(\"tgIsolateClick\", IsolateClickDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDiffDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDiffDirective = function() {\n    return {\n      templateUrl: \"wiki/history/wiki-history-diff.html\",\n      scope: {\n        key: \"<\",\n        diff: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryDiff\", WikiHistoryDiffDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryEntryDirective, module;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryEntryDirective = function() {\n    var link;\n    link = function(scope, el, attr) {\n      return scope.singleHistoryEntry = scope.historyEntry.toJS();\n    };\n    return {\n      link: link,\n      templateUrl: \"wiki/history/wiki-history-entry.html\",\n      scope: {\n        historyEntry: \"<\"\n      }\n    };\n  };\n\n  module.directive(\"tgWikiHistoryEntry\", WikiHistoryEntryDirective);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryController, module, taiga;\n\n  taiga = this.taiga;\n\n  module = angular.module(\"taigaWikiHistory\");\n\n  WikiHistoryController = (function() {\n    WikiHistoryController.$inject = [\"tgActivityService\"];\n\n    function WikiHistoryController(activityService) {\n      this.activityService = activityService;\n      taiga.defineImmutableProperty(this, 'historyEntries', (function(_this) {\n        return function() {\n          return _this.activityService.entries;\n        };\n      })(this));\n      taiga.defineImmutableProperty(this, 'disablePagination', (function(_this) {\n        return function() {\n          return _this.activityService.disablePagination;\n        };\n      })(this));\n      this.toggle = false;\n    }\n\n    WikiHistoryController.prototype.initializeHistory = function(wikiId) {\n      if (wikiId) {\n        this.activityService.init('wiki', wikiId);\n      }\n      return this.loadHistory();\n    };\n\n    WikiHistoryController.prototype.loadHistory = function() {\n      return this.activityService.fetchEntries();\n    };\n\n    WikiHistoryController.prototype.nextPage = function() {\n      return this.activityService.nextPage();\n    };\n\n    return WikiHistoryController;\n\n  })();\n\n  module.controller(\"WikiHistoryCtrl\", WikiHistoryController);\n\n}).call(this);\n\n\n/*\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n * Copyright (c) 2021-present Kaleidos Ventures SL\n */\n\n(function() {\n  var WikiHistoryDirective, bindOnce, module;\n\n  bindOnce = this.taiga.bindOnce;\n\n  module = angular.module('taigaWikiHistory');\n\n  WikiHistoryDirective = function() {\n    var link;\n    link = function(scope, el, attrs, ctrl) {\n      return bindOnce(scope, 'vm.wikiId', function(value) {\n        return ctrl.initializeHistory(value);\n      });\n    };\n    return {\n      scope: {},\n      bindToController: {\n        wikiId: \"<\"\n      },\n      controller: \"WikiHistoryCtrl\",\n      controllerAs: \"vm\",\n      templateUrl: \"wiki/history/wiki-history.html\",\n      link: link\n    };\n  };\n\n  module.directive(\"tgWikiHistory\", WikiHistoryDirective);\n\n}).call(this);\n\n//# sourceMappingURL=maps/app.js.map\n"],"names":["configure","i18nInit","init","pluginsWithModule","taiga","this","emojis","window","taigaContribPlugins","generateHash","components","_","map","x","JSON","stringify","hex_sha1","join","generateUniqueSessionIdentifier","date","Date","getTime","randomNumber","Math","floor","random","sessionId","$routeProvider","$locationProvider","$httpProvider","$provide","$tgEventsProvider","$compileProvider","$translateProvider","$translatePartialLoaderProvider","$animateProvider","$logProvider","originalWhen","userInfo","classNameFilter","when","path","route","resolve","angular","extend","languageLoad","$q","$translate","deferred","defer","then","promise","projectLoaded","projectService","$route","setSection","ref","current","$$route","section","params","pslug","setProjectBySlug","cleanProject","call","templateUrl","controller","controllerAs","loader","title","description","joyride","reloadOnSearch","access","requiresLogin","template","redirectTo","disableHeader","taigaConfig","publicRegisterEnabled","mobileViewport","otherwise","html5Mode","enabled","requireBase","defaultHeaders","Content-Type","Accept-Language","defaultLanguage","X-Session-Id","defaults","headers","patch","post","put","get","useApplyAsync","setSessionId","authHttpIntercept","$location","$navUrls","$lightboxService","errorHandlingService","responseError","response","nextUrl","search","status","config","cancelable","closeAll","error","url","indexOf","force_next","unauthorized","next","reject","factory","interceptors","push","loaderIntercept","loaderService","request","logRequest","requestError","rejection","logResponse","versionCheckHttpIntercept","data","version","element","injector","invoke","$confirm","versionErrorMsg","instant","notify","blockingIntercept","redirectToBlockedPage","block","blocked_code","debugInfoEnabled","debugInfo","localStorage","parse","preferedLangCode","lang","addPart","useLoader","urlTemplate","_version","useSanitizeValueStrategy","addInterpolation","preferredLanguage","useMissingTranslationHandlerLog","fallbackLanguage","decorators","getDecorators","each","decorator","provider","debugEnabled","debug","console","info","moment","locale","document","querySelector","setAttribute","ljs","load","messages","defaultMessage","type","email","urlstrict","number","digits","dateIso","alphanum","phone","notnull","notblank","required","regexp","min","max","range","minlength","maxlength","rangelength","mincheck","maxcheck","rangecheck","equalto","linewidth","pikaday","checksley","updateMessages","$log","$rootscope","$auth","$events","$analytics","$tagManager","$userPilot","appMetaService","navigationBarService","lightboxService","$tgConfig","un","$on","refresh","validators","val","width","lines","nl2br","split","every","line","length","prettyDate","isValid","RegExp","test","updateValidators","contribPlugins","adminPlugins","filter","authPlugins","userSettingsPlugins","e","ctx","language","rtlLanguages","isRTL","translations","translationTable","getTranslationTable","lan","setupConnection","isAuthenticated","getUser","initialize","identify","event","getLightboxOpen","preventDefault","start","project","setAll","addMobileViewport","removeMobileViewport","enableHeader","module","value","plugin","pluginsModules","modules","concat","run","TaigaBase","TaigaService","child","parent","key","hasProp","ctor","constructor","prototype","__super__","hasOwnProperty","bind","fn","me","apply","arguments","TaigaController","onInitialDataError","xhr","notfound","permissionDenied","q","Base","Service","Controller","DEFAULT_COLOR_LIST","getDefaulColorList","getMatches","getRandomDefaultColor","isEmail","isImage","isPdf","normalizeString","randomInt","item","i","l","slice","addClass","el","className","classList","add","str","replace","bindMethods","object","dependencies","keys","methods","forIn","isFunction","bindAll","bindOnce","scope","attr","continuation","delBind","$eval","$watch","mixOf","Mixed","base","method","mixins","name","trim","char","slugify","toString","toLowerCase","unslugify","capitalize","toggleText","texts","nextTextPosition","text","groupBy","coll","pred","result","len","timeout","wait","setTimeout","cancelTimeout","timeoutVar","clearTimeout","scopeDefer","func","$apply","isNumber","isString","isPlainObject","isUndefined","joinStr","debounce","leading","trailing","debounceLeading","startswith","str1","str2","startsWith","truncate","maxLength","suffix","out","String","substring","lastIndexOf","sizeFormat","input","precision","units","isNaN","parseFloat","isFinite","log","pow","toFixed","stripTags","exception","pattern","replaceTags","tags","defineImmutableProperty","obj","Object","defineProperty","fn_result","isObject","size","mixin","removeKeys","chain","flatten","reduce","cartesianProduct","reduceRight","a","b","y","match","oldImmutable","newImmutable","pathObj","forEach","newValue","toJS","sample","clone","string","regex","index","matches","exec","end","interval","normalizedString","PageMixin","FiltersMixin","UsFiltersMixin","fillUsersAndRoles","users","roles","computableRoles","activeUsers","user","is_active","sortBy","activeUsersById","id","usersById","members","uniq","includes","loadUsersAndRoles","_this","all","rs","projects","usersList","projectId","rolesList","results","excludePrefix","selectFilter","mode","location","existing","compact","isInCurrentRouteParams","noreload","replaceFilter","replaceAllFilters","filters","unselectFilter","parsedValues","newValues","isEmpty","applyStoredFilters","projectSlug","validKeys","getFilters","pick","storeFilters","filtersHashSuffix","ns","hash","storage","set","formatSelectedFilters","list","urlIds","selectedFilters","selectedIds","it","invalidTags","find","sit","invalidAppliedTags","dataType","validAppliedTags","color","filterCategories","excludeFilters","changeQ","filterQ","filtersReloadContent","removeFilter","generateFilters","addFilter","newFilter","category","selectCustomFilter","customFilter","saveCustomFilter","excludeKey","urlfilters","filterRemoteStorageService","storeCustomFiltersName","userFilters","removeCustomFilter","isFilterDataTypeSelected","filterDataType","milestone","loadFilters","storeFiltersName","userstories","filtersData","j","len1","ref1","selected","customFiltersRaw","dataCollection","statuses","tagsWithAtLeastOneElement","tag","count","assigned_users","full_name","assigned_to","role","owner","owners","epic","epics","subject","translate","content","hideEmpty","totalTaggedElements","customFilters","forOwn","$translateMissingTranslationHandlerLog","translationId","$inject","displayName","LoginPage","currentUserService","$routeParams","decodeURIComponent","clear","removeToken","AuthService","rootscope","model","http","urls","config1","userpilot","currentUserService1","themeService","analytics","userModel","_currentTheme","_getUserTheme","setUserdata","userData","Immutable","fromJS","getAttrs","setUser","setUserId","ref2","compiledThemes","_taigaAvailableThemes","defaultTheme","theme","_setTheme","newTheme","use","_setLocales","make_model","auth","remove","setToken","token","getToken","auth_token","$broadcast","login","logout","removeUser","register","getInvitation","invitations","acceptInvitiationWithNewUser","forgotPassword","changePasswordFromRecovery","changeEmail","cancelAccount","exportProfile","sendVerificationEmail","service","PublicRegisterMessageDirective","$config","templates","restrict","encodeURIComponent","directive","LoginDirective","$window","link","$scope","$el","$attrs","onError","onSuccess","submit","form","Form","defaultLoginEnabled","trackEvent","href","onKeyUp","currentTarget","iscapsLockActivated","validate","username","password","loginFormType","on","prerenderReady","off","RegisterDirective","onErrorSubmit","onSuccessSubmit","onlyOneErrorElement","_error_message","setErrors","RegisterOptionsDirective","ForgotPasswordDirective","message","success","ChangePasswordFromRecoveryDirective","$params","tokenInParams","InvitationDirective","loginForm","onErrorSubmitLogin","onErrorSubmitRegister","onSuccessSubmitLogin","onSuccessSubmitRegister","registerForm","submitLogin","invitation","dataLogin","project_slug","project_name","invitation_token","dataRegister","submitRegister","VerifyEmailDirective","$repo","$model","email_token","queryOne","ChangeEmailDirective","CancelAccountDirective","cancel_token","TaigaMainDirective","onresize","home","not-found","permission-denied","discover","discover-search","forgot-password","change-password","change-email","verified-email","cancel-account","create-project","create-project-scrum","create-project-kanban","create-project-duplicate","create-project-import","create-project-import-platform","profile","user-profile","blocked-project","project-detail-ref","project-backlog","project-taskboard","project-kanban","project-issues","project-epics","project-search","project-timeline","project-epics-detail","project-userstories-detail","project-tasks-detail","project-issues-detail","project-wiki","project-wiki-list","project-wiki-page","project-team","project-admin-home","project-admin-project-profile-details","project-admin-project-profile-default-values","project-admin-project-profile-modules","project-admin-project-profile-export","project-admin-project-profile-reports","project-admin-project-values-status","project-admin-project-values-points","project-admin-project-values-priorities","project-admin-project-values-severities","project-admin-project-values-types","project-admin-project-values-custom-fields","project-admin-project-values-tags","project-admin-project-values-due-dates","project-admin-project-values-kanban-power-ups","project-admin-memberships","project-admin-roles","project-admin-third-parties-webhooks","project-admin-third-parties-github","project-admin-third-parties-gitlab","project-admin-third-parties-bitbucket","project-admin-third-parties-gogs","project-admin-contrib","user-settings-user-profile","user-settings-user-change-password","user-settings-user-avatar","user-settings-user-project-settings","user-settings-mail-notifications","user-settings-live-notifications","user-settings-web-notifications","user-settings-contrib","notifications","$navurls","update","ToggleCommentDirective","QueueModelTransformation","qqueue1","repo","model1","qqueue","DataPickerConfig","i18n","previousMonth","nextMonth","months","weekdays","weekdaysShort","firstDay","parseInt","format","SelectedText","$document","getSelection","selection","createRange","CheckPermissionDirective","render","permission","removeClass","unObserve","unwatch","tgCheckPermission","$observe","ClassPermissionDirective","unbindWatcher","checkPermissions","negation","my_permissions","tgClassPermissionWatchAction","classes","AnimationFrame","animationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","performAnimation","time","tail","shift","ProjectUrl","slug","is_backlog_activated","is_kanban_activated","is_wiki_activated","is_issues_activated","Qqueue","lastPromise","bindAdd","args","setObject","scope1","prop","attrs","cloneDeep","_attrs","_name","getObj","save","transformation","defered","comment","modified","omit","_modifiedAttrs","assign","Template","$templateCache","lodash","tmp","Capslock","Svg","svgIcon","svgTitle","svgTitleTranslate","svgTitleTranslateValues","svgFill","Autofocus","$timeout","$parse","$element","ngShow","focus","spinner","preload","src","onLoad","image","Image","onload","transclude","show","prepend","hide","DetailController","navurls","issue","task","us","wikipage","EventsService","win","liveAnnouncementService1","rootScope","liveAnnouncementService","processMessage","EventsProvider","subscriptions","connected","pendingMessages","missedHeartbeats","heartbeatInterval","WebSocket","loc","scheme","stopExistingConnection","protocol","trimStart","host","ws","addEventListener","onOpen","onMessage","onClose","removeEventListener","stopHeartBeatMessages","close","subscribe","desc","$digest","liveNotifications","userId","notification","Notification","icon","body","onshow","onclick","open","requestPermission","webNotifications","routingKey","startHeartBeatMessages","maxMissedHeartbeats","heartbeatIntervalTime","setInterval","Error","sendMessage","cmd","error1","clearInterval","processHeartBeatPongMessage","serialize","msg","send","subscription","routing_key","callback","unsubscribe","reconnectTryInterval","$get","$win","$conf","$rootScope","FeedbackDirective","$loading","feedbackService","currentLoading","target","submitButton","create","feedback","finish","openLightbox","RelatedTaskRowDirective","$compile","$template","$emojis","templateView","templateEdit","saveTask","renderEdit","childScope","$destroy","$new","html","keyCode","$modelValue","renderView","perms","modify_task","delete_task","emojify","replaceEmojiNameByHtmlImgs","escape","select","askOnDelete","askResponse","$emit","ngModel","require","RelatedTaskCreateFormDirective","$tgmodel","newTask","createTask","default_task_status","openNewRelatedTask","reset","RelatedTaskCreateButtonDirective","RelatedTasksDirective","$rs","loadTasks","tasks","usId","_isVisible","reorderTask","newIndex","showAddTaks","showRelatedTasks","RelatedTaskAssignedToInlineEditionDirective","avatarService","$lightboxFactory","updateRelatedTask","member","avatar","getAvatar","imgurl","bg","full_name_display","tgRelatedTaskAssignedToInlineEdition","autoSave","notAutoSave","stopPropagation","assignedUsers","pop","class","currentUsers","single","lbTitle","unbind","ResourcesService","initResources","initUrls","auth-register","by_username","users-password-recovery","users-change-password-from-recovery","users-change-password","users-change-email","users-cancel-account","users-export","user-stats","user-liked","user-voted","user-watched","user-contacts","user-me","user-send-verification-email","permissions","notify-policies","user-project-settings","user-storage","memberships","bulk-create-memberships","resolver","project-templates","project-modules","bulk-update-projects-order","project-like","project-unlike","project-watch","project-unwatch","project-contact","project-transfer-validate-token","project-transfer-accept","project-transfer-reject","project-transfer-request","project-transfer-start","epic-statuses","userstory-statuses","userstory-due-dates","userstory-due-dates-create-default","points","task-statuses","task-due-dates","task-due-dates-create-default","issue-statuses","issue-due-dates","issue-due-dates-create-default","issue-types","priorities","severities","milestones","move-userstories-to-milestone","move-tasks-to-milestone","move-issues-to-milestone","epic-upvote","epic-downvote","epic-watch","epic-unwatch","epic-related-userstories","epic-related-userstories-bulk-create","bulk-create-us","bulk-update-us-backlog-order","bulk-update-us-milestone","bulk-update-us-miles-order","bulk-update-us-kanban-order","userstories-filters","userstory-upvote","userstory-downvote","userstory-watch","userstory-unwatch","bulk-create-tasks","bulk-update-task-taskboard-order","bulk-update-task-milestone","task-upvote","task-downvote","task-watch","task-unwatch","task-filters","promote-task-to-us","issues","bulk-create-issues","bulk-update-issue-milestone","issues-filters","issue-upvote","issue-downvote","issue-watch","issue-unwatch","promote-issue-to-us","swimlanes","swimlane-userstory-statuses","wiki","wiki-restore","wiki-links","history/epic","history/us","history/issue","history/task","history/wiki","attachments/epic","attachments/us","attachments/issue","attachments/task","attachments/wiki_page","attachments/wikipage","custom-attributes/epic","custom-attributes/userstory","custom-attributes/task","custom-attributes/issue","custom-attributes-values/epic","custom-attributes-values/userstory","custom-attributes-values/task","custom-attributes-values/issue","webhooks","webhooks-test","webhooklogs","webhooklogs-resend","epics-csv","userstories-csv","tasks-csv","issues-csv","timeline-profile","timeline-user","timeline-project","exporter","importer","locales","applications","application-tokens","stats-discover","importers-trello-auth-url","importers-trello-authorize","importers-trello-list-projects","importers-trello-list-users","importers-trello-import-project","importers-jira-auth-url","importers-jira-authorize","importers-jira-list-projects","importers-jira-list-users","importers-jira-import-project","importers-github-auth-url","importers-github-authorize","importers-github-list-projects","importers-github-list-users","importers-github-import-project","importers-asana-auth-url","importers-asana-authorize","importers-asana-list-projects","importers-asana-list-users","importers-asana-import-project","$urls","providers","toArray","SearchController","navUrls","projectService1","sectionName","loadInitialData","projectName","projectDescription","searchTerm","t","loadSearchData","searchResults","term","loadProject","epicStatusById","epic_statuses","issueStatusById","issue_statuses","taskStatusById","task_statuses","severityById","priorityById","usStatusById","us_statuses","loading","_loadSearchData","_promise","abort","SearchBoxDirective","reload","SearchDirective","$templatecache","$routeparams","linkTable","$ctrl","applyAutoTab","activeSectionName","tabsDom","currentSearchResults","getActiveSection","maxVal","selectedSection","renderFilterTabs","markSectionTabActive","wikipages","renderTableContent","oldElements","children","oldScope","parseHTML","activeSection","trackPage","sectionData","searchText","AnalyticsService","doc","initialized","conf","accountId","pageEvent","trackRoutes","ignoreFirstPageLoad","injectAnalytics","ga","getUrl","uuid","s","o","g","r","m","createElement","getElementsByTagName","async","parentNode","insertBefore","page","action","label","ecViewPlan","plan","plan_id","quantity","position","ecClickPlan","ecListPlans","arg","plans","ecAddToCart","plan_name","plan_price","price","ecConfirmChange","step","ecPurchase","revenue","BindScope","jQuery","CompileHtmlDirective","tgCompileHtml","oldValue","contents","DateRangeDirective","renderRange","first","second","startDate","endDate","tgDateRange","valFirst","valSecond","DateSelectorDirective","datePickerConfigService","datePickerConfig","merge","field","picker","Pikaday","destroy","setDate","SprintProgressBarDirective","renderProgress","percentage","visual_percentage","hasClass","css","tgSprintProgressbar","sprint","closedPoints","closed_points","totalPoints","total_points","round","CreatedByDisplayDirective","owner_extra_info","created_date","UserDisplayDirective","tgUserId","BlockButtonDirective","isEditable","DeleteButtonDirective","onDeleteGoToUrl","onDeleteTitle","subtitle","ListItemEpicStatusDirective","tgListitemEpicStatus","ListItemUsStatusDirective","tgListitemUsStatus","ListItemTaskStatusDirective","tgListitemTaskStatus","ListItemAssignedtoDirective","tgListitemAssignedto","ListItemIssueStatusDirective","tgListitemIssueStatus","ListItemTypeDirective","issueTypeById","domNode","tgListitemType","ListItemPriorityDirective","priority","tgListitemPriority","ListItemSeverityDirective","severity","tgListitemSeverity","TgProgressBarDirective","tgProgressBar","TgMainTitleDirective","i18nSectionName","ConfirmService","NOTIFICATION_MSG","light-error","ask","lightboxSelector","currentWidth","ok","onEsc","askDelete","lightbox","askChoice","choices","replacement","warning","choicesField","append","detailImage","svgContainer","useSVG","$","createElementNS","setAttributeNS","appendChild","spin","stop","percent","selector","tsem","one","CHECKBOX_TYPE","CustomAttributesValuesController","DATE_TYPE","DROPDOWN_TYPE","NUMBER_TYPE","confirm","objectId","customAttributes","customAttributesValues","loadCustomAttributesValues","getAttributeValue","attribute","attributeValue","attributes_values","updateAttributeValue","attributesValues","CustomAttributesValuesDirective","$templates","$storage","collapsedHash","$ctrls","collapsed","toggleCollapse","requiredEditionPerm","CustomAttributeValueDirective","$selectedText","wysiwygService","setFocusAndSelectOnInputField","edit","editable","attributeHtml","getHTML","extra","onSelect","selectedDate","saveCustomRichText","markdown","cancelCustomRichText","formControl","checked","tgCustomAttributeValue","customAttributeValue","EmojisService","replaceEmojiNameByImgs","replaceImgsByEmojiName","getEmojiByName","getEmojiById","searchByName","emojisById","keyBy","emojisByName","emojiId","regexImgs","emojiIds","emoji","escapeRegExp","LbUsEstimationDirective","$tgEstimationsService","estimationProcess","onSelectedPointForRole","roleId","pointId","$setViewValue","calculateTotalPoints","calculateRoles","UsEstimationDirective","$modelTransform","$watchCollection","EstimationsService","$qqueue","EstimationProcess","pointsTemplate","$el1","us1","project1","bindClickEvents","pointsById","revert","values","v","k","notNullValues","acc","num","pointObj","renderPointsSelector","siblings","popover","point","horizontalList","some","horizontal","closest","offset","top","height","clientHeight","defaultFilter","defaultValue","yesNoFilter","momentFormat","momentFromNow","without_suffix","fromNow","toMutableFilter","toMutable","js","memoizedMutable","memoize","List","byRefFilter","$filterFilter","cleanRef","substr","darkerFilter","luminosity","c","newColor","markdownToHTML","wysiwigService","inArray","$filter","arrayFilter","listItem","textToHTML","superClass","LightboxService","LightboxKeyboardNavigationService","ignoreEsc","lightboxContent","not","firstField","activeElement","blur","which","$applyAsync","docEl","removeAttr","lightboxEl","dispatch","code","trigger","prev","LightboxDirective","$attr","visible","LightboxClose","elm","BlockLightboxDirective","$tgrepo","unblock","finishCallback","transform","is_blocked","blocked_note","BlockingMessageInputDirective","ngmodel","watch","CreateBulkUserstoriesDirective","getCurrentStatus","displayStatusSelector","currentStatus","statusId","toggleStatus","displayStatus","hideStatus","setStatus","swimlaneId","bulk","swimlane","default_swimlane","bulkCreate","swimlane_id","parents","LightboxLeaveProjectWarningDirective","SetDueDateDirective","due_date","new_due_date","unit","due_date_reason","CreateEditDirective","attachmentsService","checkClose","createAttachments","deleteAttachments","getSchema","isDisabledExisting","mount","resetAttachments","saveItem","sprintChangeConfirmAndSave","schema","attachmentsToAdd","attachmentsToDelete","schemas","objName","include_attachments","include_tasks","translationID","translationIDPlural","statusList","initialData","default_us_status","is_archived","sprintId","user_story","typeById","issue_types","typeList","severityList","priorityList","milestonesById","default_priority","default_severity","default_issue_status","default_issue_type","setMode","getOrCreate","existingFilterText","listInAllProjects","existingItems","copy","objType","attachments","lightboxOpen","addAttachment","attachment","deleteAttachment","addTag","projectTags","tags_colors","itemtags","deleteTag","pull","promises","upload","file","addExistingToSprint","oldSprintName","newSprintName","relatedObjectId","setAttr","relatedField","broadcastEvent","isLoading","getByRef","isModified","team_requirement","client_requirement","is_iocaine","isTeamRequirement","isClientRequirement","selectedStatus","is_closed","templateScope","compiledTemplate","RelateToEpicLightboxDirective","$tgCurrentUserService","tgResources","$tgResources","$epicsService","tgAnalytics","existingEpicForm","filterEpics","loadProjects","newEpicForm","selectProject","projectEpics","selectedProject","selectedProjectId","filterText","is_epics_activated","project__blocked_code","excludeIds","filteredData","selectedEpic","searchEpic","onUpdateSearchEpic","saveRelatedEpic","selectedEpicId","onSavedRelatedEpic","addRelatedUserstory","createEpic","epicSubject","onCreateEpic","errors","epicId","Loaded","compile","$event","LoaderDirective","tgLoader","onStart","onEnd","Loader","minTime","startLoadTime","requestCount","lastResponseDate","pageLoaded","force","timeoutValue","diff","autoClose","intervalAuto","auto","TgLoadingService","settings","removeClasses","classess","timeoutId","LoadingDirective","tgLoading","showLoading","UsStatusDirective","usStatusDomParent","usStatusDom","statusElement","tgUsStatus","onUpdate","RelatedTaskStatusDirective","selectionTemplate","updateTaskStatus","taskStatusDomParent","taskStatusDom","tgRelatedTaskStatus","isVisible","docViewBottom","docViewRight","docViewTop","elemBottom","elemLeft","elemTop","elemWidth","display","visibility","scrollTop","left","elemRight","closePopover","fadeOut","fadeIn","ExceptionHandlerFactory","ravenConfig","Raven","install","cause","captureException","SECTIONS","SectionsService","1","2","3","4","5","6","getPath","sectionId","defaultHomePage","p","TagManagerService","injectTagManager","w","d","gtm.start","f","dl","TagsDirective","formatter","isArray","parser","$formatters","$parsers","ColorizeTagsBacklogDirective","tgColorizeBacklogTags","LbTagLineDirective","templateTags","autocomplete","withoutColors","has","renderTags","tagsColors","style","showSaveButton","hideSaveButton","resetInput","addValue","deleteValue","saveInputTag","fromCharCode","Awesomplete","UserPilotService","checkZendeskConditions","hasPaidPlan","is_new_user","getJoinedLimit","userPilotId","getItem","calculateUserPilotId","userPilotCustomer","prepareUserPilotCustomer","zE","setZendeskWidgetStatus","created_at","now","taiga_id","taiga_username","taiga_date_joined","taiga_lang","taiga_max_private_projects","taiga_max_memberships_private_projects","taiga_verified_email","taiga_total_private_projects","taiga_total_public_projects","taiga_roles","maxPrivateProjects","limit","getDate","supress","webWidget","chat","suppress","contactForm","helpCenter","talk","answerBot","CreateEditSprint","getLastSprint","resetSprint","ussToAdd","hasErrors","createSprint","newSprint","estimated_start","estimated_finish","estimated_end","realClone","sprintsCounter","sprints","__all__","milestonesCounter","openSprints","closed","sortedSprints","uss","lastSprint","estimatedStart","estimatedFinish","lastSprintNameDom","editSprint","BacklogController","params1","events","rs2","modelTransform","backlogOrder","milestonesOrder","disablePagination","firstLoadComplete","translationData","totalUserStories","noSwimlaneUserStories","swimlanesList","validQueryParams","showTags","activeFilters","showGraphPlaceholder","displayVelocity","initializeEventHandlers","loadSwimlanes","getShowTags","newUs","loadUserstories","els","loadProjectStats","ussToMove","loadSprints","loadClosedSprints","findIndex","moveUs","unloadClosedSprints","initializeSubscription","routingKey1","loadAllPaginatedUserstories","routingKey2","toggleShowTags","storeShowTags","toggleActiveFilters","toggleVelocityForecasting","visibleUserStories","forecastedStories","stats","defined_points","completedPercentage","total_milestones","calculateForecasting","setMilestonesOrder","user_stories","results1","sprint_order","closedSprints","totalClosedMilestones","closedSprintsById","totalMilestones","totalOpenMilestones","sprintsById","currentSprint","findCurrentSprint","resetPagination","pageSize","loadingUserstories","storeQueryParams","listUnassigned","header","backlog_order","loadBacklog","backlog_points_sum","assigned_points","speed","closedMilestones","total_closed_milestones","usStatusList","toggleTags","prepareBulkUpdateData","uses","us_id","order","moveUsToTopOfBacklog","usList","newUsIndex","newSprintId","afterDestination","currentSprintId","len2","len3","len4","len5","len6","len7","len8","modifiedUs","n","options","orderField","orderList","previous","previousWithTheSameOrder","ref3","setNextOrders","setOrders","setPreviousOrders","startIndex","usListIds","userstory","oldSprintId","beforeDestination","listIt","moveIt","bulkUpdateMilestone","bulkUpdateBacklogOrder","set-orders","updateUserStoryStatus","editUserStory","deleteUserStory","without","addNewUs","addNewSprint","currentDate","addFilterBacklog","removeFilterBacklog","BacklogDirective","doomLineTemplate","linkDoomLine","reloadDoomLine","current_sum","domElement","removeDoomlineDom","addDoomLineDom","before","linkToolbar","checkSelected","lastChecked","shiftPressed","getUsToMove","ussDom","itemScope","moveUssToSprint","selectedUss","ussCurrent","extraPoints","totalExtraPoints","union","moveToCurrentSprint","moveToLatestSprint","partial","toggleClass","moveToSprintDom","shiftKey","elements","nextAll","prevAll","nextUntil","prevUntil","showHideTags","ussToMoveList","openFilterInit","showHideFilter","linkFilters","filtersSearch","UsEditSelector","$tgTemplate","mainTemplate","removePopupOpenState","contains","UsRolePointsSelectorDirective","roleName","is","UsPointsDirective","rolesTemplate","bindClickElements","renderRolesSelector","updatingSelectedRoleId","selectedRoleId","tgBacklogUsPoints","popRolesDom","ToggleBurndownVisibility","firstLoad","toggleGraph","isBurndownGraphCollapsed","BurndownBacklogGraphDirective","redrawChart","dataToDraw","milestonesRange","zero_line","ml","zip","fillColor","optimal_line","optimal","evolution_line","evolution","client_increment_line","team_increment_line","colors","grid","borderWidth","right","bottom","borderColor","hoverable","margin","xaxis","ticks","axisLabel","axisLabelUseCanvas","axisLabelFontSizePixels","axisLabelFontFamily","axisLabelPadding","tickFormatter","axis","yaxis","series","shadowSize","fill","radius","lineWidth","tooltip","tooltipOpts","xval","yval","flotItem","seriesIndex","sprintName","abs","empty","plot","TgBacklogProgressBarDirective","projectPointsPercentaje","closedPointsPercentaje","adjustPercentaje","adjusted","tgBacklogProgressBar","definedPoints","deleteElement","BacklogSortableDirective","drake","initIsBacklog","emptyBacklog","dragula","copySortSource","isContainer","moves","container","dragMultiple","dragMultipleItems","firstElement","isBacklog","sameContainer","autoScroll","pixels","scrollWhenOutside","down","dragging","BacklogSprintDirective","slideOptions","duration","easing","toggleSprint","sprintTable","tgBacklogSprint","slideToggle","BacklogSprintHeaderDirective","taskboardUrl","estimatedDateRange","ToggleExcludeClosedSprintsVisualization","excludeClosedSprints","loadingElm","after","SprintChartDirective","days","utc","day","unshift","open_points","optimal_points","tickSize","last","daysNames","formattedDate","roundedValue","CreateBulkTasksDirective","TaskboardController","rs1","q1","taskboardTasksService","taskboardIssuesService","lightboxFactory","timeout1","openFilter","backToBacklogUrl","usTasks","taskMap","milestoneIssues","tasksByUs","milestoneIssue","issuesRaw","rawIssue","getQueryParams","_setMeta","setZoom","zoomLevel","zoom","previousZoomLevel","Number","isFirstLoad","resetFolds","zoomLoading","loadIssues","completedPoints","completedPointsSum","totalPointsSum","openTasks","totalTasks","total_tasks","refreshTagsColors","replaceModel","taskMove","onAssignedToChanged","itemsMoved","userid","getName","loadTaskboard","loadSprintStats","loadSprint","pointsList","roleById","taskStatusList","res","completed_points","remainingPointsSum","remainingTasks","completed_tasks","setUserstories","locationParams","listInProject","initIssues","notFoundTasks","initialLoad","sslug","getSprintShowTags","setRolePoints","storeSprintShowTags","showPlaceHolder","tasksRaw","editTask","getTask","getIn","editingTask","editIssue","getIssue","editingIssue","deleteTask","deletingTask","deleteIssue","deletingIssue","removeIssueFromSprint","removingIssue","oldStatusId","movingTask","getTaskModel","moveUpdateData","move","status__is_archived","set_orders","reloadUserStory","assignOrders","userStoryId","addNewTask","addNewIssue","targetName","toggleFold","modelName","openUsersSelection","changeTaskAssignedTo","changeIssueAssignedTo","getIssueModel","getPoint","pointsByRole","getRole","getIssuesOrderBy","order_by","TaskboardDirective","scrollLeft","TaskboardSquishColumnDirective","getCeilWidth","recalculateStatusColumnWidth","recalculateTaskboardWidth","setStatusColumnWidth","statusesFolded","getStatusColumnModes","usFolded","getUsRowModes","foldStatus","storeStatusColumnModes","foldUs","rowId","storeUsRowModes","isStatusFolded","isUSFolded","columns","ceil","avatarWidth","statusFoldedWidth","initialWidth","ctrl","total","TaskboardSortableDirective","filterError","initialContainer","itemEl","newParentScope","oldParentScope","$tgConfirm","containers","accepts","cancel","itemIndex","itemTask","newStatusId","newUsId","oldUsId","parentEl","dataset","st","TaskboardIssuesService","foldStatusChanged","issueId","splice","issueModel","images","thumbnail_card_url","colorized_tags","TaskboardTasksService","Map","taskId","refreshRawOrder","taskboard_order","invert","taksWithoutMoved","taskByUsStatus","task_id","taskModel","KanbanUserstoriesService","resetSwimlanesList","userstoriesRaw","archivedStatus","statusHide","usByStatus","usMap","usByStatusSwimlanes","refreshUserStory","initUsByStatusList","usModel","Array","retrieveUserStoryData","refreshSwimlanes","addArchivedStatus","isUsInArchivedHiddenStatus","getUsModel","deleteStatus","showStatus","getStatus","toDelete","archived","difference","kanban_order","previousCard","nextCard","initialLength","previousUsIndex","previousUsOrder","usByStatusWithoutMoved","afterUserstoryId","beforeUserstoryId","bulkUserstories","moveToEnd","usItem","getUs","assignedUserId","assignedUserData","assigned_users_preview","refreshUsMap","collection","emptySwimlaneExists","userstoriesNoSwimlane","emptySwimlane","insert","swimlaneUsByStatus","usListSwimlanes","CardSvgTemplate","KanbanController","kanbanUserstoriesService1","kanbanUserstoriesService","renderUserStories","changeUsAssignedUsers","foldedSwimlane","renderBatching","isLightboxOpened","isRefreshNeeded","cleanSelectedUss","toggleSelectedUs","openArchived","loadUserStoriesForStatus","lastUsId","newOrder","hideUserStoriesForStatus","refreshAfterSwimlanesOrUserstoryStatusesHaveChanged","fetchProject","randomTimeout","routingKeyUserstories","routingKeyProject","editUs","editingUserStory","deleteUs","deletingUserStory","firstStatus","firstSwimlane","toggleSwimlane","kanban","storeSwimlanesModes","assignedUsersIds","renderBatch","clean","take","queue","batchSize","rendered","drop","batchTimings","userstoriesMap","lastSearch","listAll","notFoundUserstories","filteredStatus","waitEmptyQuote","cb","loadKanban","swimlanesStatuses","usCardVisibility","getSwimlanesModes","newSwimlaneId","apiNewSwimlaneId","bulkUpdateKanbanOrder","KanbanDirective","_tableBody","watchKanbanSize","kanbanStyles","getComputedStyle","columnMargin","getPropertyValue","resizeObserver","ResizeObserver","entries","column","offsetWidth","unobserve","setProperty","observe","board","initBoard","visibleEntries","entry","$evalAsync","taskColumnLoaded","addSwimlane","cardLoaded","addCard","isTableLoaded","kanbanTableLoaded","tableHeaderDom","openSwimlane","tableBody","scroll","KanbanArchivedShowStatusHeaderDirective","tgKanbanArchivedShowStatusHeader","KanbanArchivedStatusIntroDirective","tgKanbanArchivedStatusIntro","userStoriesLoaded","KanbanSquishColumnDirective","folds","unfold","archivedFolds","KanbanWipLimitDirective","tgKanbanWipLimit","redrawWipLimit","cards","wipLimitClass","wip_limit","CardAssignedToDirective","svgTemplate","vm","avatars","checkPermission","svg","svgData","initializeZoom","onChange","ctrlKey","metaKey","onClickAssignedTo","onClickEdit","onClickRemove","onClickDelete","CardDataDirective","dueDateService","emptyTask","dueDateColor","dueDate","isClosed","dueDateTitle","totalAttachments","KanbanSwimlaneDirective","currentSwimlane","$parent","mouseleaveSwimlane","mouseoverSwimlane","querySelectorAll","KanbanTaskboardColumnDirective","KanbanSortableDirective","dropTarget","source","sibling","finalUsList","newStatus","newSwimlane","oldSwimlaneId","oldStatus","tableLoaded","EpicDetailController","attachmentsFullService","epicRef","epicref","attachmentsReady","initializeOnDeleteGoToUrl","epicStatus","statusById","epicDescription","description_html","loadAttachments","loadEpic","immutableProject","immutableEpic","commentModel","neighbors","previousUrl","listInEpic","onUpvote","upvote","onDownvote","downvote","onWatch","onUnwatch","onSelectColor","onSelectColorSuccess","onSelectColorError","EpicStatusDisplayDirective","EpicStatusButtonDirective","IssueDetailController","issueRef","issueref","issueSubject","issueStatus","issueType","issueSeverity","issuePriority","issueDescription","loadIssue","milestoneId","IssueStatusDisplayDirective","IssueStatusButtonDirective","IssueTypeButtonDirective","typees","IssueSeverityButtonDirective","severityes","IssuePriorityButtonDirective","priorityes","AssignSprintToIssueButtonDirective","existsMilestone","avaliableMilestones","selectedSprint","needle","haystack","toUpperCase","filterMilestones","saveIssueToSprint","CreateBulkIssuesDirective","IssuesController","voting","isOrderedBy","myFiltersHashSuffix","storeIssuesShowTags","fieldName","orderBy","types","issueStatusList","issueTypes","loadIssuesRequests","models","paginatedBy","getIssuesShowTags","addIssuesInBulk","IssuesPaginationDirective","linkPagination","$pagEl","getNumPages","numPages","renderPagination","cpage","pages","showPrevious","showNext","pagenum","IssuesOrderingDirective","linkOrdering","colHeadElement","currentOrder","finalOrder","IssueStatusInlineEditionDirective","updateIssueStatus","issueStatusDomParent","issueStatusDom","tgIssueStatusInlineEdition","_isModified","IssueAssignedToInlineEditionDirective","updateIssue","tgIssueAssignedToInlineEdition","UserStoryDetailController","configService","tgmodel","sce","usRef","usref","tribeEnabled","tribeHost","closedTasks","progressPercentage","userStoryRef","userStorySubject","descriptionHtml","getTrustedHtml","userStoryStatus","userStoryPoints","userStoryDescription","userStoryClosedTasks","userStoryTotalTasks","userStoryProgressPercentage","relateToEpic","allClosed","loadUs","httpParams","kanbanStaus","legacyChannel","onTribeInfo","publishTitle","alt","publishDesc","withoutMoved","us_order","fromPairs","reorder","UsStatusDisplayDirective","UsStatusButtonDirective","UsTeamRequirementButtonDirective","canEdit","isRequired","UsClientRequirementButtonDirective","TaskDetailController","taskRef","taskref","taskSubject","taskStatus","taskDescription","loadTask","loadUserStory","TaskStatusDisplayDirective","TaskStatusButtonDirective","TaskIsIocaineButtonDirective","isIocaine","TeamController","setRole","filtersRole","loadMembers","totals","currentUser","issuesEnabled","tasksEnabled","wikiEnabled","loadMemberStats","memberStats","vals","statsKey","sum","_processStats","_processStat","stat","singleStat","userRoles","TeamFiltersDirective","TeamMemberStatsDirective","TeamMemberCurrentUserDirective","TeamMembersDirective","filtersQ","LeaveProjectDirective","leaveConfirm","leave_project_text","confirm_leave_project_text","leave","isCurrentUser","membersFilter","WikiDetailController","attachmentsFullService1","moveLink","loadWiki","wikiSlug","linksVisible","wikiPageName","wikiPageContent","totalEditions","editions","lastModifiedDate","modified_date","wikiId","getBySlug","loadWikiLinks","listLinks","wikiLinks","checkLinksPerms","saveAll","WikiSummaryDirective","last_modifier","wikiPage","WikiWysiwyg","activityService","editableDescription","saveDescription","fetchEntries","uploadFiles","default","storageKey","WikiNavDirective","linkWikiLinks","addWikiLinkPermission","tdom","deleteWikiLinkPermission","direction","mirrorContainer","linkId","newLink","loadPromise","WikiPagesListController","loadWikiPages","TransferProjectStartSuccessDirective","ChangeOwnerLightboxController","lightboxService1","commentOpen","LightboxAddMembersWarningMessageDirective","LbRequestOwnershipDirective","confirmService","transferRequest","filterUsers","getUsers","currentOwnerId","totalUsers","userSearch","selectUser","transferStart","ChangeOwnerLightboxDirective","lightboxKeyboardNavigationService","bindToController","MembershipsController","lightboxFactory1","i_am_admin","canAddUsers","max_memberships","total_memberships","httpFilters","getUrlFilters","membership","is_user_active","is_owner","projectOwnerEmail","user_email","addNewMembers","showLimitUsersWarningMessage","MembershipsDirective","MembershipsRowAvatarDirective","pending","isOwner","tgMembershipsRowAvatar","MembershipsRowAdminCheckboxDirective","tgMembershipsRowAdminCheckbox","inputId","is_admin","MembershipsRowRoleSelectorDirective","roleList","selectedRole","tgMembershipsRowRoleSelector","newRole","MembershipsRowActionsDirective","tgMembershipsRowActions","resendInvitation","defaultMsg","NoMoreMembershipsExplanationDirective","ownerEmail","AdminNavigationDirective","tgAdminNavigation","ProjectProfileDirective","ProjectProfileController","tgAuth","CsvExporterController","_deleteUuid","_generateUuid","setCsvUuid","csvUrl","resolveAbsolute","CsvExporterEpicsController","CsvExporterUserstoriesController","CsvExporterTasksController","CsvExporterIssuesController","epicStatusList","issueTypesList","prioritiesList","severitiesList","openDeleteLightbox","privacyChanged","isAttributeModified","newUrl","is_private","ProjectDefaultValuesDirective","ProjectModulesDirective","initializeFields","newVal","oldVal","videoconferences_extra_data","videoconferences","isVideoconferenceActivated","ProjectExportDirective","buttonsEl","showButtons","hideButtons","resultEl","showResult","hideResult","spinnerEl","showSpinner","hideSpinner","resultTitleEl","loading_title","loading_msg","dump_ready_text","asyn_message","syn_message","setLoadingTitle","setAsyncTitle","setSyncTitle","resultMessageEl","setLoadingMessage","setAsyncMessage","setSyncMessage","showLoadingMode","showExportResultAsyncMode","showExportResultSyncMode","showErrorMode","dumpUrl","errorMsg","csvUuid","regenerateUuid","deleteUuid","CsvEpicDirective","sectionTitle","CsvUsDirective","CsvTaskDirective","CsvIssueDirective","ProjectLogoDirective","showSizeInfo","click","logoAttachment","changeLogo","removeLogo","ProjectLogoModelDirective","modelSetter","tgProjectLogoModel","files","AdminProjectRestrictionsDirective","AdminProjectRequestOwnershipDirective","requestOwnership","AdminProjectChangeOwnerDirective","changeOwner","project-id","active-users","current-owner-id","ProjectValuesDirective","TYPE_CHOICES","ProjectValuesSectionController","ProjectValuesController","moveValue","loadValues","resource","ProjectSwimlanesValuesController","removeSwimlane","filterArchivedSwimlaneStatus","filterArchivedProjectStatuses","updatedSwimlanePosition","setDefaultSwimlane","updateSwimlane","ProjectDueDatesValuesController","displayValues","createDefaultValues","ProjectCustomAttributesController","moveCustomAttributes","deleteCustomAttribute","saveCustomAttribute","createCustomAttribute","loadCustomAttributes","_onCustomAttributesModified","ProjectTagsController","mixingClass","cancelMixingTags","confirmMixingTags","toggleMixingFromTags","startMixingTags","editTag","createTag","filterAndSortTags","loadTags","listValues","maxValueOrder","maxBy","itemValue","swimlaneAdded","hideSwimlaneForm","patch_default_swimlane","prevSwimlane","swimlanesOrderArrayFiltered","newSwimlanesOrder","bulkUpdateOrder","moveTo","ProjectSwimlanesValue","isFormVisible","isNewSwimlane","displaySwimlaneForm","ProjectSwimlanesSingle","$animate","displaySwimlaneSingleForm","swimlaneSingleForm","getDefaultTitle","removeSwimlaneTitle","editSwimlaneSingleForm","cancelEditSwimlaneSingleForm","removeSwimlaneDialog","phase","deletingSwimlane","option","SortableSwimlanes","days_to_due_abs","days_to_due","sign","linkDragAndDrop","linkValue","goToBottomList","saveNewValue","saveValue","valueType","objname","initializeNewValue","initializeTextTranslations","addNewElementText","table","formEl","row","editionRow","onSucces","ProjectDueDatesValues","parentDirective","linkDueDateStatusValue","_setDaysToDue","_valueFromEventTarget","due_date_status_name","_parseAttributesExtra","_parseAttributeExtra","maxOrder","attrValues","attrModel","idx","ProjectCustomAttributesDirective","_manageExtraFormEvent","_manageFormEvent","addExtraOption","cancelCreate","cancelUpdate","hideAddButton","hideCancelButton","hideCreateForm","hideEditForm","hideExtra","initAttrType","initDraggable","removeExtraOption","resetNewAttr","revertChangesInCustomAttribute","showAddButton","showCancelButton","showCreateForm","showEditForm","showExtra","isExtraVisible","sortableChildren","sortableEl","handle","itemAttr","attrExtra","sourceIndex","$index","targetIndex","newAttr","toggleExtraVisible","formExtraEl","formScope","projectTagsAll","tagsFilter","from_tag","to_tag","loadingDelete","mixingTags","toTag","fromTags","loadingMixing","mixTags","ProjectTagsDirective","initializeTagsFilter","initializeMixingTags","originalTag","loadingEdit","loadingCreate","ProjectSwimlanesWipDirective","wipClosed","toggleWipVisibility","publicPermissions","RolesController","_disableComputable","_enableComputable","anyComputableRole","computable","loadRoles","public_permission","external_user","public_permissions","forceLoadProject","askOnSuccess","askOnError","toggleComputable","EditRoleDirective","toggleView","toggle","RolesDirective","NewRoleDirective","DEFAULT_PERMISSIONS","insertPosition","RolePermissionsDirective","resumeTemplate","categoryTemplate","baseTemplate","generateCategoriesFromRole","setActivePermissions","active","isPermissionEditable","setActivePermissionsPerCategory","cat","activePermissions","categories","epicPermissions","milestonePermissions","userStoryPermissions","taskPermissions","issuePermissions","wikiPermissions","renderResume","renderCategory","renderPermissions","getActivePermissions","categoryId","anon_permissions","WebhooksController","loadWebhooks","GithubController","GitlabController","loadModules","BitbucketController","GogsController","WebhookDirective","webhook","tgWebhook","updateLogs","validStatus","prettySentHeaders","toPairs","request_headers","prettySentData","request_data","created","logs_counter","logs","updateShowHideHistoryText","textElement","showVisualizationMode","showEditMode","openHistory","resend","NewWebhookDirective","formDOMNode","addWebhookDOMNode","github","gitlab","bitbucket","SelectInputText","execCommand","GithubWebhooksDirective","saveAttribute","GitlabWebhooksDirective","BitbucketWebhooksDirective","ValidOriginIpsDirective","$ngModel","gogs","GogsWebhooksDirective","DeleteProjectDirective","projectToDelete","BindOnceBindDirective","tgBoBind","BindOnceHtmlDirective","tgBoHtml","BindOnceRefDirective","tgBoRef","BindOnceSrcDirective","tgBoSrc","BindOnceHrefDirective","tgBoHref","BindOnceAltDirective","tgBoAlt","BindOnceTitleDirective","tgBoTitle","BindTitleDirective","tgTitleHtml","BindHtmlDirective","tgBindHtml","ConfigurationService","ContribController","currentPlugin","head","ContribUserSettingsController","FiltersStorageService","HttpService","cacheFactory","cache","removeAll","responseType","LoadElementDirective","tgLoadElement","legacyObj","component","locationFactory","lastRoute","Model","dataTypes","_dataTypes","setAttrs","ModelService","instance","applyCasts","attrName","castName","castMethod","casts","getIdAttrName","self","getter","setter","enumerable","configurable","markSaved","desSerialize","sdata","ddata","$http","$gmUrls","$gmStorage","cls","int","float","NavigationUrlsService","formatUrl","replacer","NavigationUrlsDirective","tgSections","bindOnceP","parseNav","param","Promise","tgNavGetParams","tgNav","fullUrl","getURLParams","getURLParamsStr","RepositoryService","resolveUrlForModel","idAttrName","resolveUrlForAttributeModel","extraParams","_data","_status","returnHeaders","queryMany","httpOptions","enablePagination","queryOneAttribute","queryOneRaw","queryPaginated","queryOnePaginatedRaw","StorageService","_default","serializedValue","setItem","removeItem","UrlsService","mainUrl","fmt","trimEnd","resourceProvider","_get","_list","hashSuffix","contentType","entryType","editComment","activityId","commentData","getCommentHistory","deleteComment","undeleteComment","history","hashSprintShowTags","hashIssuesShowTags","project_id","milestone_id","bulk_issues","promoteToUserStory","hashSuffixStatusColumnModes","hashSuffixSwimlanesModes","mdrender","listByUser","bulkCreateMemberships","invitation_extra_text","bulk_memberships","notifyPolicies","listByMember","memberId","bulkData","regenerate_epics_csv_uuid","regenerate_userstories_csv_uuid","regenerate_tasks_csv_uuid","regenerate_issues_csv_uuid","delete_epics_csv_uuid","delete_userstories_csv_uuid","delete_tasks_csv_uuid","delete_issues_csv_uuid","from_tags","export","import","statusUpdater","complete","uploadComplete","uploadFailed","uploadProgress","maxFileSize","fileName","fileSize","evt","loaded","uploadedSize","totalSize","responseText","getResponseHeader","isPrivate","failed","FormData","XMLHttpRequest","setRequestHeader","transformRequest","identity","do","deferredAbort","get_all","noop","u","moveUserStoriesMilestone","currentMilestoneId","bulk_stories","moveTasksMilestone","bulk_tasks","moveIssuesMilestone","swimlanesOrder","bulk_swimlanes","wipLimitUpdate","delete","hashSuffixUsRowModes","bulkUpdateTaskTaskboardOrder","userProjectSettings","changeAvatar","removeAvatar","changePassword","currentPassword","newPassword","current_password","userSettings","contacts","hashShowTags","page_size","status_id","bulk_userstories","after_userstory_id","before_userstory_id","editStatus","webhookId","webhooklogId","UserChangePasswordController","UserChangePasswordDirective","newPassword1","newPassword2","DeleteUserDirective","UserLiveNotificationsController","UserLiveNotificationsDirective","UserLiveNotificationsListDirective","policyIndex","policy","prev_level","live_notify_level","UserSettingsController","window1","getLan","getTheme","maxFileSizeMsg","availableThemes","verifyEmail","UserProfileDirective","UserAvatarDirective","avatarAttachment","TaigaAvatarModelDirective","tgAvatarModel","UserSettingsNavigationDirective","tgUserSettingsNavigation","UserNotificationsController","resources","isSaas","onPremiseSubscribed","loadPremise","subscribed","onPremise","subscribeOnPremiseNewsletter","origin_form","getUserStorage","storageState","setUserStorage","storageError","createUserStorage","UserNotificationsDirective","UserNotificationsListDirective","notify_level","UserProjectSettingsController","sections","updateCustomHomePage","projectSettings","filteredSections","allowed_sections","UserWebNotificationsController","UserWebNotificationsDirective","UserWebNotificationsListDirective","web_notify_level","AnimatedCounter","lastCount","transitionEnd","nextUp","renderCount","nextDown","counter","getCounter","wip","AssignedToInlineDirective","$currentUserService","$userListService","requiredPerm","renderUserList","selectedId","searchUsers","visibleUsers","showMore","renderUser","assignedObject","assigned_to_extra_info","fullName","isUnassigned","fullNameVisible","usersSearch","selfAssign","unassign","searchingText","AssignedUsersInlineDirective","currentAssignedIds","currentAssignedTo","isAssigned","renderUsersList","renderUsers","hiddenUsers","applyToModel","AttachmentLinkDirective","attachmentsPreviewService","tgAttachmentLink","fileId","AttachmentGalleryDirective","onDelete","AttachmentController","is_deprecated","editMode","mergeIn","AttachmentDirective","AttachmentsDropDirective","eventAttr","tgAttachmentsDrop","dataTransfer","originalEvent","AttachmentsFullController","deprecatedsCount","attachmentsVisible","deprecatedsVisible","uploadingAttachments","objId","toggleDeprecatedsVisible","addAttachments","toDeleteAttachment","errorMessage","reorderAttachment","updateAttachment","toUpdateAttachment","_isEditable","hasPermission","editPermission","showAttachments","AttachmentsFullDirective","displayAttachmentInput","AttachmentsFullService","_attachments","_deprecatedsCount","_attachmentsVisible","_deprecatedsVisible","regenerate","uploading","from_comment","oldIndex","setIn","oldAttachment","AttachmentsPreviewController","getCurrent","hasPagination","getIndex","attachmentIndex","findLast","AttachmentPreviewLightboxDirective","AttachmentsPreviewService","AttachmentsSimpleController","onAdd","AttachmentsSimpleDirective","AttachmentSortableDirective","tgAttachmentsSortable","AutoSelectDirective","AvatarDirective","attributeName","tgAvatarBig","avatarBig","BelongToEpicsDirective","$rs2","updateEpics","userStory","removeEpicRelationship","deleteRelatedUserstory","epicsLength","immutable_epics","isIterable","BindCode","$sce","tElement","tAttrs","tgBindWysiwygHtmlGetter","tgBindWysiwygHtml","tgBindWysiwygHtmlWatch","$$addBindingClass","_extraValidHtmlElments","_extraValidAttrs","matchResult","blockClasses","hljs","getLanguage","highlightBlock","node","getAttribute","scrollIntoView","$$addBindingInfo","refreshAttachmentURL","BoardZoomDirective","levels","CardSlideshowController","cardSlideshowDirective","CardController","hasTasks","getTagColor","hasMultipleAssignedUsers","hasVisibleAttachments","onToggleFold","getClosedTasks","closedTasksPercent","getModifyPermisionKey","getDeletePermisionKey","_setVisibility","related","slides","isRelatedTasksVisible","isSlideshowVisible","getNavKey","cardDirective","inViewPort","folded","ClickInputFile","inputFile","ColorSelectorController","colorList","checkIsColorRequired","displayColorList","userCanChangeColor","isColorRequired","dropRight","setColor","customColor","resetColor","initColor","toggleColorList","onSelectDropdownColor","onKeyDown","ColorSelectorDirective","_timeout","mouseenter","mouseleave","DetailHeaderController","loadingSubject","originalSubject","_checkPermissions","cancelEdit","editSubject","saveSubject","onEditSubjectSuccess","onEditSubjectError","DetailHeaderDirective","$tgWysiwygService","blocked_html_note","html_note","DetailNavController","_checkNav","project_extra_info","DetailNavDirective","DueDateController","tgLightboxFactory","_getScope","disabled","setDueDate","dueDatePopoverDirective","bound","getMoment","dueDateDirective","renderDatePicker","DueDateService","defaultConfig","by_default","_formatTitle","_getAppearance","_getDefaultAppearance","defaultAppearance","currentAppearance","appearance","formatedDate","FileChangeDirective","tgFileChange","FilterRemoteStorageService","myFilters","innerPromise","FilterSlideDownDirective","ngIf","contentHeight","outerHeight","context","nextSibling","FilterController","opened","filterModeOptions","filterModeLabels","include","exclude","filterMode","customFilterForm","customFilterName","$onChanges","changes","getIncludedFilters","getExcludedFilters","includedFilters","excludedFilters","activeCustomFilter","repeatedFilterError","lengthZeroError","toggleFilterCategory","filterName","isOpen","openCustomFilter","onSaveCustomFilter","onRemoveFilter","filterCategory","onAddFilter","onRemoveCustomFilter","onSelectCustomFilter","isFilterSelected","FilterDirective","onChangeQ","watchTaskboardHeight","taskboard","maxSize","currentMax","offsetHeight","InputSearchComponent","bindings","change","dirty","IssuesTableController","onEditIssue","onToggleTags","detach","onDetachIssue","onDeleteIssue","issuesTableDirective","onLoadIssues","onAddIssuesInBulk","onAddNewIssue","sprintIssues","issueOptions","displayOptions","hideOptions","JoyRideDirective","joyRideService","initJoyrRide","unsuscribe","intro","introJs","oncomplete","onexit","disableJoyRide","setOptions","exitOnEsc","exitOnOverlayClick","showStepNumbers","nextLabel","prevLabel","skipLabel","doneLabel","disableInteraction","setOption","loadJoyRideConfig","exit","JoyRideService","checkPermissionsService","getConfig","dashboard","steps","backlog","check","joyRide","KanbanBoardZoomDirective","onZoomChange","getZoomView","zooms","zoomIndex","SelectUserDirective","closeLightbox","confirmSelection","getFilteredUsers","available","_filterRows","userIds","roleUsers","userNames","addItem","clearSearch","LiveAnnouncementDirective","defineProperties","LiveAnnouncementService","MoveToSprintLightboxController","someSelected","selectedSprintId","typesSelected","itemsToMove","_loadSprints","openItems","_init","hasManyItemTypes","ussCount","updateSelected","tasksCount","issuesCount","itemType","itemsNotMoved","itemsList","itemsType","moveItems","displayWarning","totalItemsMoved","moveToSprintLightboxDirective","MoveToSprintController","hasOpenItems","getOpenUss","getOpenStorylessTasks","getOpenIssues","checkOpenItems","open-items","unnasignedTasks","issue_id","moveToSprintDirective","ProjectLogoBigSrcDirective","projectLogoService","projectLogo","logo","getDefaultProjectLogo","ProjectLogoSmallSrcDirective","ProjectMenuController","menu","_getActiveSection","projectMenu","_setVideoConference","_setMenuPermissions","videoconferenceUrl","_videoConferenceUrl","oldSectionName","sectionsBreadcrumb","indexBacklog","indexKanban","baseUrl","ProjectMenuDirective","fixed","projectChange","PromoteToUsButtonDirective","searchListDirective","avaliableItems","isContainedIn","itemsById","parseString","resetAll","resetSelected","currentSelected","filterClosed","showClosed","textShowClosed","textHideClosed","choiceId","items","toggleShowClosed","filterItems","filtering","itemAttrs","filterBy","placeholder","itemDisabled","SwimlaneSelector","getCurrentSwimlane","getSelectedSwimlane","displaySelector","selectedSwimlane","filteredSwimlanes","defaultSwimlaneId","selectSwimlane","hasUnclassifiedStories","TagOptionDirective","selectedPosition","containerHeight","onSelectTag","colorArray","TagLineCommonController","tagLineService","disableColorSelection","newTag","_createColorsArray","projectTagColors","createColorsArray","displayTagInput","addNewTag","onAddTag","selectColor","TagLineCommonDirective","tagName","loadingAddTag","loadingRemoveTag","onDeleteTag","TagLineController","onDeleteTagError","onDeleteTagSuccess","onAddTagError","onAddTagSuccess","TagLineDirective","TagLineService","myPermissions","projectPermissions","TagDirective","hasPermissions","TaskboardZoomDirective","TasksSortableDirective","tgTasksSortable","TermsOfServiceAndPrivacyPolicyNoticeDirective","privacyPolicyUrl","termsOfServiceUrl","AssignedToDirective","currentUserId","isSelfAssigned","assignedUser","openAssignedUsers","currentItem","AssignedUsersDirective","deleteAssignedUser","visibleAssignedUsersCount","displayHidden","assignedToUser","assignedUserIds","selfAssigned","TicketWatchersController","openWatchers","watchersIds","watchers","getPerms","_watch","_unwatch","deleteWatcher","watcherId","WatchersDirective","visibleWatchersCount","tipsDirective","tips","loadTip","waitingTimeout","tipLoaded","tip","TribeButtonDirective","locationService","port","TribeLinkedDirective","gigTitle","gigId","VoteButtonController","toggleVote","is_voter","VoteButtonDirective","ProjectSwimlanesWipLimitController","new_wip_limit","submitSwimlaneNewStatus","displayWipLimitSelector","swimlane_userstory_status_id","WipLimitSelector","toggleWipSelectorVisibility","CommentEditWysiwyg","CommentWysiwyg","saveComment","onAddComment","CustomFieldEditWysiwyg","ItemWysiwyg","Wysiwyg","$attachmentsFullService","htmlReadMode","editonly","onCancel","onSave","onUploadFile","discardLocalStorage","editorLinks","getCurrentContent","isDraft","isOutdated","linksEvents","localSave","saveEnd","setHtmlEditor","textEditor","throttleChange","unwatchContent","updateMarkdownWithCurrentHtml","isEditOnly","notPersist","parentElement","setEditMode","unwatchLoader","outdated","uploadFunction","fullNameDisplay","detail","refreshAttachmentURLFromMarkdown","saving","store","cancelWithConfirmation","getMarkdown","throttle","WysiwygService","projectDataConversion","dataConversion","angularDataConversion","setUp","toMarkdown","toHtml","getAttachmentData","tokens","getCachedAttachment","cache_key","attachmentId","cached_result","links","innerHTML","warn","DiscoverHomeOrderByController","is_open","week","month","year","currentText","currentOrderBy","DiscoverHomeOrderByDirective","DiscoverSearchBarController","discoverProjectsService","projectsCount","fetchStats","submitFilter","DiscoverSearchBarDirective","DiscoverSearchListHeaderController","like_is_open","activity_is_open","openLike","setOrderBy","openActivity","DiscoverSearchListHeaderDirective","FeaturedProjectsController","featured","fetchFeatured","FeaturedProjectsDirective","HighlightedDirective","highlighted","MostActiveController","mostActive","getOrderBy","fetch","fetchMostActive","MostActiveDirective","MostLikedController","mostLiked","fetchMostLiked","MostLikedDirective","DiscoverHomeController","onSubmit","DiscoverSearchController","routeParams","searchResult","nextSearchPage","loadingGlobal","loadingList","loadingPagination","resetSearchList","fetchByGlobalSearch","fetchByOrderBy","getFilter","fetchSearch","is_looking_for_people","onChangeFilter","updateParams","onChangeOrder","DiscoverSearchDirective","DiscoverProjectsService","_discoverParams","projectsService","_mostLiked","_mostActive","_featured","_searchResult","_projectsCount","decorate","_decorate","_nextSearchPage","discover_mode","_params","getProjects","is_featured","CreateEpicController","epicsService","newEpic","default_epic_status","validateForm","setFormErrors","CreateEpicDirective","EpicRowController","displayUserStories","displayAssignedTo","displayStatusList","loadingStatus","_calculateProgressBar","progress","canEditEpics","toggleUserStoryList","listRelatedUserStories","userStories","epicStories","updateStatus","updateEpicStatus","updateAssignedTo","assignLoader","updateEpicAssignedTo","EpicRowDirective","EpicsDashboardController","setfn","isEpicsDashboardEnabled","fetchEpics","notFound","canCreateEpics","on-create-epic","EpicsSortableDirective","tgEpicsSortable","EpicsTableController","displayVotes","votes","assigned","closed_us","_disablePagination","_loadingEpics","toggleEpicTableOptions","reorderEpic","nextPage","hoverEpicTableOption","timer","hideEpicTableOption","updateViewOptions","EpicsTableDirective","StoryRowController","totalTasksCompleted","story","StoryRowDirective","EpicsService","xhrError","_epics","_page","epicData","epics_order","reorderRelatedUserstory","epicUserstories","userstoryId","replaceEpic","RelatedUserStoriesController","showCreateRelatedUserstoriesLightbox","showRelatedUserStoriesSection","userCanSort","loadRelatedUserstories","RelatedUserstoriesCreateController","projectUserstories","filterUss","saveRelatedUserStory","selectedUserstoryId","onSavedRelatedUserstory","validateExistingUserstoryForm","setExistingUserstoryFormErrors","bulkCreateRelatedUserStories","userstoriesText","onCreatedRelatedUserstory","validateNewUserstoryForm","setNewUserstoryFormErrors","RelatedUserstoriesCreateDirective","newUserstoryForm","existingUserstoryForm","showLightbox","selectedUserstory","searchUserstory","relatedUserstoriesText","onUpdateSearchUserstory","RelatedUserstoriesSortableDirective","tgRelatedUserstoriesSortable","RelatedUserStoriesDirective","RelatedUserstoryRowController","setAvatarData","getAssignedToFullNameDisplay","onDeleteRelatedUserstory","RelatedUserstoryRowDirective","ExternalAppController","externalAppsService","createApplicationToken","_getApplicationToken","_redirect","_applicationId","application","_state","state","_user","_application","loginUrl","loginWithAnotherUserUrl","applicationToken","getApplicationToken","back","authorizeApplicationToken","ExternalAppsService","applicationId","externalapps","FeedbackService","sendFeedback","ActivityService","_contentType","_objectId","loadingEntries","getHistory","historyType","CommentController","permissionService","hiddenDeletedComment","showDeletedComment","hideDeletedComment","checkCancelComment","onEditMode","commentId","canEditDeleteComment","pk","onEditComment","displayCommentHistory","CommentDirective","editing","deleting","onDeleteComment","onRestoreDeletedComment","CommentsController","initializePermissions","canAddCommentPermission","CommentsDirective","comments","reverse","LightboxDisplayHistoricController","_loadHistoric","commentHistoryEntries","LightboxDisplayHistoricDirective","HistoryEntryDirective","HistoryTabsDirective","showCommentTab","showActivityTab","onActiveComments","onActiveActivities","onOrderComments","activeTab","commentsNum","activitiesNum","onReverse","HistorySectionController","viewComments","_loadHistory","_loadComments","_loadActivity","activities","nextActivityPage","showHistorySection","toggleEditMode","onActiveHistoryTab","restoreDeletedComment","addComment","HistorySectionDirective","ActivitiesDiffController","diffTags","diffRemoveTags","diffAddTags","promotedTo","generated_user_stories","HistoryDiffDirective","HistoryDirective","DutyDirective","duty","isHidden","getDutyType","HomeController","HomeService","_attachProjectInfoToWorkInProgress","workInProgress","projectsById","_attachProjectInfoToDuty","_duties","_getValidDutiesAndAttachProjectInfo","assignedTo","watching","duties","dutyType","getWorkInProgress","projectsPromise","getListProjectsByUserId","params_epics","status__is_closed","params_uss","params_tasks","params_issues","assignedEpicsPromise","assignedUserStoriesPromise","assignedTasksPromise","assignedIssuesPromise","watchingEpicsPromise","watchingUserStoriesPromise","watchingTasksPromise","watchingIssuesPromise","HomeProjectListDirective","WorkingOnController","homeService","hiddenAssignedTo","showHiddenAssignedTo","showHiddenWatching","_setAssignedTo","elem","_setWatching","WorkingOnDirective","slot","slots","updateShowHiddenDuties","showHiddenDuties","getShowHiddenDuties","updateHiddenDuties","hiddenDuties","getHiddenDuties","toggleDutyHidden","toggleShowHiddenDuties","InviteMembersFormController","rolesValues","defaultMaxInvites","_areRolesValidated","contactsToInvite","emailsToInvite","_checkLimitMemberships","pendingMembersCount","membersLimit","showWarningMessage","sendInvites","setInvitedContacts","role_id","inviteContactsMessage","InviteMembersFormDirective","onDisplayContactList","onRemoveInvitedContact","onRemoveInvitedEmail","onSendInvites","AddMembersController","userService","displayContactList","_getContacts","excludeProjectId","getContacts","_filterContacts","invited","contact","inviteSuggested","removeContact","testEmptyContacts","inviteEmail","emailData","removeEmail","LightboxAddMembersDirective","SuggestAddMembersController","contactQuery","filterContacts","filteredContacts","setInvited","onInviteSuggested","SuggestAddMembersDirective","onInviteEmail","DropdownNotificationsDirective","notificationsService","notificationsList","newEvent","setAllAsRead","setNotificationsAsRead","DropdownProjectListDirective","newProject","updateLinks","DropdownUserDirective","authService","navUrlsService","isFeedbackEnabled","customSupportUrl","userMenu","NavigationBarDirective","attempts","loadUserPilot","userPilotInterval","isEnabledHeader","userPilotIframe","widget","contentWindow","userPilotTitle","innerText","TAIGA_USER_PILOT_TOKEN","userpilotEnabled","_taigaSendFeedback","NavigationBarService","enabledHeader","NotificationsListDirective","infiniteScrollContainer","infiniteScrollDistance","infiniteScrollDisabled","onlyUnread","NotificationsController","scrollDisabled","initList","loadNotifications","reloadList","getNotificationsList","setAsRead","setNotificationAsRead","$$url","NotificationsService","_notificationTypes","userTimelinePaginationSequenceService","translate_params","title_attr","_getLink","_getUsernameSpan","obj_name","_getNotificationObject","_getDetailObjUrl","getNotifications","_addNotificationAttributes","generate","notificationId","_getType","event_type","_getTitle","projectSectionPath","projectUrl","_translateTitleParams","urlMapping","span","_getParams","notification_type","translation","paramsKeys","ProfileBarController","loadStats","getStats","ProfileBarDirective","ProfileContactsController","loadContacts","ProfileContactsDirective","FavItemDirective","ProfileWatchedController","FavsBaseController","ProfileLikedController","tabName","enableFilterByAll","enableFilterByProjects","enableFilterByEpics","enableFilterByUserStories","enableFilterByTasks","enableFilterByIssues","enableFilterByTextQuery","_getItems","getLiked","ProfileVotedController","getVoted","getWatched","_resetList","_enableLoadingSpinner","_disableLoadingSpinner","_enableScroll","_disableScroll","_checkIfHasMorePages","hasNext","_checkIfHasNoResults","hasNoResults","loadItems","filterByTextQuery","showAll","showProjectsOnly","showEpicsOnly","showUserStoriesOnly","showTasksOnly","showIssuesOnly","ProfileLikedDirective","ProfileVotedDirective","ProfileWatchedDirective","ProfileHints","hintKey","HINTS","hint","linkText","ProfileProjectsController","getProjectsByUserId","attachUserContactsToProjects","ProfileProjectsDirective","ProfileTabDirective","tab","tabIcon","tabActive","tabDisabled","addTab","ProfileTabsController","tabs","toggleTab","ProfileTabsDirective","ProfileController","getUserByUserName","userFullName","userUsername","BlockedProjectExplanationDirective","ContactProjectButtonController","launchContactForm","ContactProjectButtonDirective","layout","ContactProjectLbController","contactProject","sendingFeedback","ContactProjectLbDirective","inject","LikeProjectButtonController","likeButtonService","isMouseOver","showTextWhenMouseIsOver","showTextWhenMouseIsLeave","toggleLike","_unlike","_like","like","unlike","LikeProjectButtonDirective","LikeProjectButtonService","_getProjectIndex","_updateProjects","isFan","projectIndex","totalFans","is_fan","total_fans","setProjects","_updateCurrentProject","setProject","likeProject","unlikeProject","SortProjectsDirective","sortData","sorted_project_ids","bulkUpdateProjectsOrder","WatchProjectButtonController","watchButtonService","showWatchOptions","toggleWatcherOptions","closeWatcherOptions","notifyLevel","WatchProjectButtonDirective","WatchProjectButtonService","isWatcher","totalWatchers","is_watcher","total_watchers","watchProject","unwatchProject","AsanaImportProjectFormController","canCreatePublicProjects","canCreatePrivateProjects","projectForm","platformName","keepExternalReference","project_type","valid","checkUsersLimit","limitMembersPrivateProject","canAddMembersPrivateProject","limitMembersPublicProject","canAddMembersPublicProject","saveForm","onSaveProjectDetails","canCreateProject","isDisabled","AsanaImportProjectFormDirective","onCancelForm","fetchingUsers","AsanaImportController","asanaImportService","importProjectService","projectUsers","startProjectSelector","fetchProjects","onSelectProject","fetchUsers","onCancelMemberSelection","startImport","importProject","importPromise","submitUserSelection","AsanaImportDirective","AsanaImportService","asanaImporter","listProjects","listUsers","userBindings","projectType","getAuthUrl","authUrl","authorize","CreatetProjectFormController","errorList","creation_template","formSubmitLoading","CreateProjectFormDirective","createProjectMembersRestrictionsDirective","createProjectRestrictionsDirective","CreateProjectController","displayScrumDesc","dontAsk","displayOnPremise","displayHelp","displayKanbanDesc","DuplicateProjectController","refreshReferenceProject","getProjectBySlug","referenceProject","invitedMembers","toggleInvitedMember","duplicate","DuplicateProjectDirective","GithubImportProjectFormController","GithubImportProjectFormDirective","GithubImportController","githubImportService","GithubImportDirective","GithubImportService","githubImporter","callbackUri","ImportProjectMembersController","selectImportUserLightbox","warningImportUsers","displayEmailSelector","cancelledUsers","selectedUsers","selectableUsers","userContacts","fetchUser","refreshSelectableUsers","searchUser","searchingUser","beforeSubmitUsers","confirmUser","externalUser","taigaUser","discardSuggestedUser","unselectUser","getSelectedMember","isMemberSelected","userSelected","showSuggestedMatch","getDistinctSelectedTaigaUsers","ids","importMoreUsersDisabled","isImportMoreUsersDisabled","ImportProjectMembersDirective","platform","ImportProjectSelectorController","ImportProjectSelectorDirective","noProjectsMsg","ImportTaigaController","importTaiga","ImportTaigaDirective","LbImportErrorDirective","ImportProjectController","trelloService","jiraService","githubService","asanaService","tgNavUrls","jiraOauthVerifier","locationSearch","trelloOauthToken","from","asanaOauthToken","cancelCurrentImport","oauth_verifier","githubOauthToken","oauth_token","jiraUrl","err","absUrl","unfoldOptions","unfoldedOptions","isActiveImporter","backToCreate","ImportProjectDirective","onCancelImport","ImportProjectService","importSuccess","importError","restrictionError","getRestrictionError","error_message","errorKey","maxMemberships","membersError","publicError","privateError","InviteMembersController","InviteMembersDirective","onToggleInvitedMember","SingleMemberDirective","JiraImportProjectFormController","importer_type","create_subissues","JiraImportProjectFormDirective","JiraImportController","jiraImportService","JiraImportDirective","JiraImportService","jiraImporter","importerType","NewsletterEmailLightboxDirective","$storageService","openNewsletter","onSelectUser","preference","userEmail","setEmail","SelectImportUserLightboxCtrl","invalid","assignUser","SelectImportUserLightboxDirective","TrelloImportProjectFormController","TrelloImportProjectFormDirective","TrelloImportController","trelloImportService","TrelloImportDirective","TrelloImportService","trelloImporter","verifyCode","WarningUserImportDirective","onConfirm","ProjectsListingController","ProjectRouterController","getProjectHomepage","gotoDefaultProjectHomepage","homepage","ProjectController","activeMembers","registerUrl","ProjectsService","getProjectStats","paginate","transferValidateToken","transferAccept","reason","transferReject","CantOwnProjectExplanationDirective","TransferProject","showAddComment","_refreshUserData","_validateToken","_setProjectData","_checkOwnerData","canBeOwnedByUser","canOwnProject","ownerMessage","maxProjects","currentProjects","validNumberOfMemberships","loadingAccept","loadingReject","hideComment","TransferProjectDirective","Resource","urlsService","urlname","object_id","x-disable-pagination","progressMessage","progressPercent","AsanaResource","GithubResource","JiraResource","TrelloResource","users_bindings","keep_external_reference","jira_url","projectTemplate","requestParams","paginateResponseService","pagination","x-lazy-pagination","slight","getTimeline","only_relevant","services","Resources","$injector","serviceName","serviceProperty","serviceFn","getUserByUsername","exclude_project","getProfileTimeline","getUserTimeline","listAllInProject","epicIid","AppMetaService","_set","meta","setTitle","setDescription","setTwitterMetas","origin","setOpenGraphMetas","listener","_listener","metas","AttachmentsService","getMaxFileSize","maxFileSizeFormated","sizeError","saveError","AvatarService","IMAGES","COLORS","logos","getDefault","murmurhash3_32_gc","getUnnamed","avatarParamName","gravatar","root","photo","gravatar_id","CheckPermissionsService","CurrentUserService","storageService","_projects","_projectsById","_joyride","_loadUserInfo","loadProjectsList","totalMembers","membersResult","ErrorHandlingService","errorHandling","showingError","blocked","LightboxFactory","scopeAttrs","PaginateResponse","ProjectLogoService","ProjectService","userActivityService","manageProjectSignal","_project","_section","_sectionsBreadcrumb","_activeMembers","e2e","autoRefresh","watchSignals","signal","fetchRequiredSignals","intervalId","onInactive","onActive","ThemeService","themeName","stylesheetEl","UserActivityService","resetTimer","subscriptionsActive","subscriptionsInactive","isActive","startTimer","idleTimeout","timerId","_fireInactive","_fireActive","_unSubscriptionsActive","_unSubscriptionsInactive","UserListService","excludedUser","UserService","pageNumber","objectType","textQuery","contactsFiltered","contactId","UserTimelineAttachmentDirective","validFileExtensions","extension","templateHtml","UserTimelineItemTitle","_fieldTranslationKey","description_diff","timeline","field_name","new_value","sprint_name","us_name","_getTimelineObj","event_us","related_us_name","epic_name","role_name","keySeq","parent_userstory","timeline_type","getTitle","UserTimelineType","getType","hasIn","UserTimelineItemDirective","UserTimelinePaginationSequence","getContent","minItems","UserTimelineController","userTimelineService","timelineList","getProjectTimeline","loadTimeline","UserTimelineDirective","UserTimelineService","userTimelineItemType","userTimelineItemTitle","_valid_fields","_invalid","value_diff","fieldKey","_isInValidTimeline","_parseEventType","_getTimelineObject","_attachExtraInfoToTimelineEntry","_parseTimeline","newdata","values_diff","moveInBacklog","deleteIn","newItem","_addEntyAttributes","filterNot","IsolateClickDirective","WikiHistoryDiffDirective","WikiHistoryEntryDirective","singleHistoryEntry","historyEntry","WikiHistoryController","initializeHistory","loadHistory","WikiHistoryDirective"],"mappings":"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"}